
================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\build.gradle.kts
================================================================================

// Top-level build file where you can add configuration options common to all sub-projects/modules.
plugins {
    alias(libs.plugins.android.application) apply false
    alias(libs.plugins.android.kmp.library) apply false
    alias(libs.plugins.kotlin.android) apply false
    alias(libs.plugins.kotlin.multiplatform) apply false
    alias(libs.plugins.gms) apply false
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\gradle.properties
================================================================================

#Gradle
org.gradle.jvmargs=-Xmx2048M -Dfile.encoding=UTF-8
org.gradle.caching=true
org.gradle.configuration-cache=true
#Kotlin
kotlin.code.style=official
kotlin.daemon.jvmargs=-Xmx2048M
#Dokka
org.jetbrains.dokka.experimental.gradle.pluginMode=V2Enabled
org.jetbrains.dokka.experimental.gradle.pluginMode.noWarn=true
#Android
android.useAndroidX=true
android.enableJetifier=true
android.nonTransitiveRClass=true

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\jitpack.yml
================================================================================

jdk:
  - openjdk17
before_install:
  - sdk install java 17.0.1-open
  - sdk use java 17.0.1-open
install:
  - ./gradlew clean common:build publishToMavenLocal

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\LICENSE.md
================================================================================

# Unabandon Public License (UPL)

```
    Preamble
```
This Unabandon Public License (UPL) is designed to ensure the continued development and public availability of source code based on works released under the GNU General Public License Version 3 (GPLv3) while upholding the core principles of GPLv3. This license extends GPLv3 by mandating public accessibility of source code for any derivative works.

```
    Body
```
1. **Incorporation of GPLv3:** This UPL incorporates all terms and conditions of the GNU General Public License Version 3 (GPLv3) as published by the Free Software Foundation. You can find the complete text of GPLv3 at [https://www.gnu.org/licenses/licenses.en.html](https://www.gnu.org/licenses/licenses.en.html).

2. **Public Source Requirement:** In addition to the terms of GPLv3, the source code for any software distributed under this license, including modifications and derivative works, must be publicly available. Public availability means the source code must be accessible to anyone through a publicly accessible repository or download link without any access restrictions or fees.

3. **Source Code Availability:** The source code must be made publicly available using a recognized open-source hosting platform (e.g., GitHub, GitLab) or be downloadable from a publicly accessible website. The chosen method must clearly identify the source code and its corresponding licensed work.

```
    Termination
```
This UPL terminates automatically if the terms and conditions are not followed by the licensee.

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\README.md
================================================================================

# Echo: Music Player

<p>
An Extension-based Music Player for Android, designed with a clean and intuitive UI.
</p>
<p>
  <!--<a href="https://github.com/brahmkshatriya/echo/releases"><img src="https://img.shields.io/github/v/release/brahmkshatriya/echo?label=Downloads&style=for-the-badge" alt="GitHub Downloads"></a>-->
  <a href="https://www.codefactor.io/repository/github/brahmkshatriya/echo"><img src="https://img.shields.io/codefactor/grade/github/brahmkshatriya/echo?label=Codefactor&style=for-the-badge" alt="CodeFactor"/></a>
  <a href="https://hosted.weblate.org/engage/echo"><img alt="Weblate project translated" src="https://img.shields.io/weblate/progress/echo?label=Translated&style=for-the-badge"></a>
</p>

> [!NOTE]
> The developer of this application is not liable for any misuse or legal issues arising from its
> use and is not affiliated with any content providers. This application hosts zero content.
>
> Echo is intended for offline use only by default; the user manages any external sources. Echo does
> not condone or supports piracy.

## Downloads

<!--<a href="https://github.com/brahmkshatriya/echo/releases/latest"><img src="https://img.shields.io/badge/Stable-2EB9FF?label=Recommended&style=for-the-badge"  alt="Latest Stable Release"/></a>-->
<a href="https://nightly.link/brahmkshatriya/echo/workflows/nightly/main/artifact.zip"><img src="https://img.shields.io/badge/Nigthly-9999FF?label=Experimental&style=for-the-badge" alt="Latest Nightly Release"/></a>

## Support Us

<a href='https://ko-fi.com/I2I5C3UUV' target='_blank'><img height='36' style='border:0px;height:36px;' src='https://storage.ko-fi.com/cdn/kofi1.png?v=3' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a>
<a href='https://intradeus.github.io/http-protocol-redirector/?r=upi://pay?pa=brahmkshatriya@apl&tn=Thanks%20for%20this%20amazing%20app!%20Much%20love%20to%20Echo.' target='_blank'><img height='36' src='https://files.catbox.moe/q8yq5o.png' border='0' alt='UPI' /> </a>

> [!TIP]
> ⭐ **Star this repository to support the developer & encourage the development of the app!**
<details>
  <summary>Star History</summary>
  <a href="https://github.com/brahmkshatriya/echo/stargazers">
      <img alt="Star History Chart" src="https://starchart.cc/brahmkshatriya/echo.svg?variant=adaptive" width="370" height="235" />
  </a>
</details>

## Official Communities

Join our communities to stay updated and contribute to the discussion:

<a href="https://discord.gg/J3WvbBUU8Z" style="margin-right: 10px; display: inline-block;"><img src="https://uxwing.com/wp-content/themes/uxwing/download/brands-and-social-media/discord-round-color-icon.png" alt="Discord" height="40" style="vertical-align: middle;"></a>
<a href="https://t.me/echo_app" style="display: inline-block;"><img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram" height="40" style="vertical-align: middle;"></a>

## Contribute

We welcome contributions, from translations to new features. For inquiries, join
our [Discord server](https://discord.gg/J3WvbBUU8Z) or [Telegram group](https://t.me/echo_extension). Pull
requests are welcome; check the [issues](https://github.com/brahmkshatriya/echo/issues?q=is%3Aissue%20) for
guidance on major changes.

### Translation

You can help us by translating the app into your language here

<a href="https://hosted.weblate.org/projects/echo/#languages"><img src="https://img.shields.io/badge/Weblate-90EE90?label=Translate%20On&style=for-the-badge" alt="Latest Nightly Release"/></a>

<details>
<summary>Translation Graph</summary>
<a href="https://hosted.weblate.org/projects/echo/#languages"><img src="https://hosted.weblate.org/widget/echo/app/multi-auto.svg" alt="Translation status" /></a>
</details>

## Acknowledgments

A heartfelt thank you to everyone who has contributed to the development of Echo.
Your efforts are invaluable.

<a href="https://github.com/brahmkshatriya/echo/graphs/contributors">
  <img alt="GitHub contributors" src="https://img.shields.io/github/contributors/brahmkshatriya/echo?style=flat-square&label=Contributors%20%3A&labelColor=%230f1318&color=%230f1318">
</a>
<br>
<a href="https://github.com/brahmkshatriya/echo/graphs/contributors">
  <img src="https://contrib.rocks/image?repo=brahmkshatriya/echo" alt="Contributors">
</a>

## License

Echo is licensed under the Unabandon Public License (UPL). More info can be
found [here](LICENSE.md).


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\settings.gradle.kts
================================================================================

pluginManagement {
    repositories {
        google {
            content {
                includeGroupByRegex("com\\.android.*")
                includeGroupByRegex("com\\.google.*")
                includeGroupByRegex("androidx.*")
            }
        }
        mavenCentral()
        gradlePluginPortal()
    }
}

@Suppress("UnstableApiUsage")
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        google()
        mavenCentral()
        maven { url = uri("https://jitpack.io") }
    }
}

rootProject.name = "Echo"
include(":app")
include(":common")
 

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\.github\FUNDING.yml
================================================================================

github: [brahmkshatriya]
ko_fi: brahmkshatriya


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\.github\ISSUE_TEMPLATE\bug_report.yml
================================================================================

name: Bug Report
description: Report broken or incorrect behaviour
labels: [bug]
body:

  - type: markdown
    attributes:
      value: |
        Thank you for taking your time to fill out this form. For real-time support, consider asking in the `#support` channel on our Discord: https://discord.gg/J3WvbBUU8Z

        Please note that this form is for bug reports only!

  - type: input
    attributes:
      label: Summary
      description: A short summary of the bug report.
    validations:
      required: true

  - type: textarea
    attributes:
      label: Reproduction Steps
      description: What you did to make it happen.
    validations:
      required: true

  - type: textarea
    attributes:
      label: Expected Result
      description: What did you expect to happen?
    validations:
      required: true

  - type: textarea
    attributes:
      label: Actual Result
      description: What actually happened?
    validations:
      required: true

  - type: textarea
    attributes:
      label: Device Information
      description: |
        Please provide some information of the device you are using.
        You can get the device info by doing these steps:
        1) Open Echo
        2) Go to Settings > About
        3) Scroll to the bottom
        4) Long press "Version X.X.X"
      placeholder: |
        Echo Version: X.X.X
        Brand: Samsung
        Architecture: aarch64
        Android Version: 11
    validations:
      required: true

  - type: checkboxes
    attributes:
      label: Checklist
      options:
        - label: I have searched the open AND closed issues for any duplicates.
          required: true
        - label: If this is an issue with an extension, I should be opening an issue in the extension's repository.
          required: false

  - type: textarea
    attributes:
      label: Additional Information
      description: If there is anything else to say, please do so here.


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\.github\ISSUE_TEMPLATE\config.yml
================================================================================

blank_issues_enabled: false
contact_links:
  - name: Discord Server
    url: https://discord.gg/J3WvbBUU8Z
    about: Join our Discord server for support and updates.
  - name: Telegram group
    url: https://t.me/echo_extension
    about: Join our Telegram discussion group for support and updates.

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\.github\ISSUE_TEMPLATE\feature_request.yml
================================================================================

name: Feature Request
description: Suggest a feature for Echo
labels: [enhancement]
body:

  - type: markdown
    attributes:
      value: |
        Please make sure that you have read the entire README.
#        Especially the [Planned Stuff](https://github.com/saikou-app/saikou#planned-stuff) and [Rejected Stuff](https://github.com/saikou-app/saikou#rejected-stuff).

  - type: input
    attributes:
      label: Summary
      description: A short summary of what your feature request is.
    validations:
      required: true

  - type: textarea
    attributes:
      label: The Problem
      description: >
        What problem is your feature trying to solve?
        What becomes easier or possible when this feature is implemented?
    validations:
      required: true

  - type: textarea
    attributes:
      label: The Ideal Solution
      description: >
        What is your ideal solution to the problem?
        What would you like this feature to do?
    validations:
      required: true

  - type: textarea
    attributes:
      label: The Current Solution
      description: What is the current solution to the problem, if any?
    validations:
      required: false

  - type: checkboxes
    attributes:
      label: Checklist
      options:
        - label: I have searched the open AND closed issues for any duplicates.
          required: true
        - label: If this is an issue with an extension, I should be opening an issue in the extension's repository.
          required: false

  - type: textarea
    attributes:
      label: Additional Context
      description: If there is anything else to say, please do so here.


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\.github\workflows\debug.yml
================================================================================

name: Compile Debug

on:
  push:
    branches:
      - main
  workflow_dispatch: { }
jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Setup JDK 17
        uses: actions/setup-java@v4
        with:
          distribution: 'zulu'
          java-version: 17
          cache: 'gradle'

      - name: Make gradlew executable
        run: chmod +x ./gradlew

      - name: Build with Gradle
        run: ./gradlew assembleDebug

      - name: Upload APK
        uses: actions/upload-artifact@v4
        with:
          path: app/build/outputs/apk/debug/app-debug.apk


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\.github\workflows\deploy-docs.yml
================================================================================

name: Deploy Docs to GitHub Pages

on:
  push:
    branches:
      - main
    paths:
      - 'common/**'
  workflow_dispatch:

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: '17'

      - name: Grant execute permission for Gradle wrapper
        run: chmod +x gradlew

      - name: Build Dokka docs
        run: ./gradlew :common:dokkaGenerate

      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v4
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./common/build/dokka/html
          publish_branch: docs


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\.github\workflows\handle-extension-issues.yml
================================================================================

name: Handle Extension Issues
on:
  issues:
    types: [opened]

permissions:
  issues: write

jobs:
  check-extension-issue:
    runs-on: ubuntu-latest
    steps:
      - name: Debug Issue Body
        run: |
          echo "Issue body: ${{ github.event.issue.body }}"
      - name: Check for Extension Checkbox
        uses: actions/github-script@v6
        with:
          script: |
            const issueBody = context.payload.issue.body || '';
            const extensionCheckboxPattern = /- \[[xX]\]\s*If this is an issue with an extension, I should be opening an issue in the extension's repository\./;
            console.log(`Checking issue body for checkbox pattern: ${extensionCheckboxPattern}`);
            if (extensionCheckboxPattern.test(issueBody)) {
              console.log("Checkbox found! Posting comment and closing issue.");
              await github.rest.issues.createComment({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.payload.issue.number,
                body: "If this is an issue with an extension, please open an issue in the extension's repository."
              });
              await github.rest.issues.update({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.payload.issue.number,
                state: "closed",
                state_reason: "not_planned"
              });
            } else {
              console.log("Checkbox not found in issue body.");
            }
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\.github\workflows\maven.yml
================================================================================

name: Maven Publish
on:
  release:
    types: [released, prereleased]
  workflow_dispatch:
jobs:
  publish:
    name: Release build and publish
    runs-on: macOS-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v4
      - name: Set up JDK 21
        uses: actions/setup-java@v4
        with:
          distribution: 'zulu'
          java-version: 21
      - name: Publish to MavenCentral
        run: ./gradlew publishAndReleaseToMavenCentral --no-configuration-cache
        env:
          ORG_GRADLE_PROJECT_mavenCentralUsername: ${{ secrets.MAVEN_CENTRAL_USERNAME }}
          ORG_GRADLE_PROJECT_mavenCentralPassword: ${{ secrets.MAVEN_CENTRAL_PASSWORD }}
          ORG_GRADLE_PROJECT_signingInMemoryKeyId: ${{ secrets.SIGNING_KEY_ID }}
          ORG_GRADLE_PROJECT_signingInMemoryKeyPassword: ${{ secrets.SIGNING_PASSWORD }}
          ORG_GRADLE_PROJECT_signingInMemoryKey: ${{ secrets.GPG_KEY_CONTENTS }}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\.github\workflows\nightly.yml
================================================================================

name: nightly

on:
  push:
    branches:
      - main
  workflow_dispatch: { }

jobs:
  build:
    runs-on: ubuntu-latest
    env:
      VERSION: $( echo ${{ github.event.head_commit.id }} | cut -c1-7 )
      COMMIT: $( sed -E "s/(.*) <.*@.*>/\\1/g;t" <<< "${{ github.event.head_commit.message }}" | jq -Rsa . | tail -c +2 | head -c -2 )
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Setup JDK 17
        uses: actions/setup-java@v4
        with:
          distribution: 'zulu'
          java-version: 17
          cache: 'gradle'

      - name: Cook KeyStore
        run: echo "${{ secrets.KEYSTORE_B64 }}" | base64 -d > $GITHUB_WORKSPACE/signing-key.jks

      - name: Cook Google Services
        run: echo "${{ secrets.GOOGLE_SERVICES_B64 }}" | base64 -d > app/google-services.json

      - name: Make gradlew executable
        run: chmod +x ./gradlew

      - name: Build with Gradle
        run: |
          ./gradlew assembleNightly \
          -Pandroid.injected.signing.store.file=$GITHUB_WORKSPACE/signing-key.jks \
          -Pandroid.injected.signing.store.password=${{ secrets.PASSWORD }} \
          -Pandroid.injected.signing.key.alias=key0 \
          -Pandroid.injected.signing.key.password=${{ secrets.PASSWORD }}
          cp app/build/outputs/apk/nightly/app-nightly.apk app/build/${{ env.VERSION }}.apk

      - name: Upload APK
        uses: actions/upload-artifact@v4
        with:
          path: app/build/outputs/apk/nightly/app-nightly.apk

      - name: Upload APK to Discord
        shell: bash
        env:
          WEBHOOK: ${{ secrets.DISCORD_NIGHTLY_WEBHOOK }}
        run: |
          message=$(echo "@everyone **${{ env.VERSION }}**\n${{ env.COMMIT }}")
          curl -F "payload_json={\"content\":\"${message}\"}" \
          -F "echo_beta=@app/build/${{ env.VERSION }}.apk" \
          ${{ env.WEBHOOK }}

      - name: Upload APK to Telegram
        shell: bash
        env:
          BOT_ID: ${{ secrets.TELEGRAM_BOT_ID }}
          CHANNEL_ID: ${{ secrets.TELEGRAM_CHANNEL_ID }}
          THREAD_ID: ${{ secrets.TELEGRAM_THREAD_ID }}
        run: |
          regex='s/[\_\*\[\]\(\)\~\`\>\#\+\-\=\|\{\}\.\!]/\\&/g'
          message=$(printf "*Nightly Release*\n${{ env.COMMIT }}" | sed -E "$regex")
          curl -F "chat_id=${{ env.CHANNEL_ID }}" \
          -F "message_thread_id=${{ env.THREAD_ID }}" \
          -F "document=@app/build/${{ env.VERSION }}.apk" \
          -F "caption=${message}" \
          -F "parse_mode=MarkdownV2" \
          https://api.telegram.org/bot${{ env.BOT_ID }}/sendDocument


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\.github\workflows\pr.yml
================================================================================

name: pr build

on:
  pull_request:
    branches: [ main ]
  workflow_dispatch: { }
jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Setup JDK 17
        uses: actions/setup-java@v4
        with:
          distribution: 'zulu'
          java-version: 17
          cache: 'gradle'

      - name: Make gradlew executable
        run: chmod +x ./gradlew

      - name: Build with Gradle
        run: ./gradlew assembleRelease

      - name: Upload APK
        uses: actions/upload-artifact@v4
        with:
          path: app/build/outputs/apk/release/app-release-unsigned.apk


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\.github\workflows\stable.yml
================================================================================

name: stable

on:
  push:
    tags:
      - '*'
  workflow_dispatch: { }

jobs:
  build:
    runs-on: ubuntu-latest
    env:
      VERSION: ${{ github.ref_name }}
      COMMIT: $( sed -E "s/(.*) <.*@.*>/\\1/g;t" <<< "${{ github.event.head_commit.message }}" | jq -Rsa . | tail -c +2 | head -c -2 )
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Setup JDK 17
        uses: actions/setup-java@v4
        with:
          distribution: 'zulu'
          java-version: 17
          cache: 'gradle'

      - name: Cook KeyStore
        run: echo "${{ secrets.KEYSTORE_B64 }}" | base64 -d > $GITHUB_WORKSPACE/signing-key.jks

      - name: Cook Google Services
        run: echo "${{ secrets.GOOGLE_SERVICES_B64 }}" | base64 -d > app/google-services.json

      - name: Make gradlew executable
        run: chmod +x ./gradlew

      - name: Build with Gradle
        run: |
          ./gradlew assembleStable \
          -Pandroid.injected.signing.store.file=$GITHUB_WORKSPACE/signing-key.jks \
          -Pandroid.injected.signing.store.password=${{ secrets.PASSWORD }} \
          -Pandroid.injected.signing.key.alias=key0 \
          -Pandroid.injected.signing.key.password=${{ secrets.PASSWORD }}
          cp app/build/outputs/apk/stable/app-stable.apk app/build/${{ env.VERSION }}.apk

      - name: Upload APK
        uses: actions/upload-artifact@v4
        with:
          path: app/build/outputs/apk/stable/app-stable.apk

      - name: Create Release
        uses: softprops/action-gh-release@v2
        with:
          make_latest: true
          body: ${{ env.COMMIT }}
          files: app/build/${{ env.VERSION }}.apk

      - name: Upload APK to Discord
        shell: bash
        env:
          WEBHOOK: ${{ secrets.DISCORD_RELEASE_WEBHOOK }}
        run: |
          message=$(echo "@everyone **${{ env.VERSION }}**\n${{ env.COMMIT }}")
          curl -F "payload_json={\"content\":\"${message}\"}" \
          -F "echo_beta=@app/build/${{ env.VERSION }}.apk" \
          ${{ env.WEBHOOK }}

      - name: Upload APK to Telegram
        shell: bash
        env:
          BOT_ID: ${{ secrets.TELEGRAM_BOT_ID }}
          CHANNEL_ID: ${{ secrets.TELEGRAM_CHANNEL_ID }}
          THREAD_ID: ${{ secrets.TELEGRAM_THREAD_ID }}
        run: |
          regex='s/[\_\*\[\]\(\)\~\`\>\#\+\-\=\|\{\}\.\!]/\\&/g'
          message=$(printf "${{ env.COMMIT }}" | sed -E "$regex")
          curl -F "chat_id=${{ env.CHANNEL_ID }}" \
          -F "message_thread_id=${{ env.THREAD_ID }}" \
          -F "document=@app/build/${{ env.VERSION }}.apk" \
          -F "caption=${message}" \
          -F "parse_mode=MarkdownV2" \
          https://api.telegram.org/bot${{ env.BOT_ID }}/sendDocument


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\build.gradle.kts
================================================================================

plugins {
    alias(libs.plugins.android.application)
    alias(libs.plugins.kotlin.android)
    alias(libs.plugins.ksp)
    alias(libs.plugins.kotlinx.serialization)

    alias(libs.plugins.gms) apply false
    alias(libs.plugins.crashlytics) apply false
}

val hasGoogleServices = file("google-services.json").exists()
val gitHash = execute("git", "rev-parse", "HEAD").take(7)
val gitCount = execute("git", "rev-list", "--count", "HEAD").toInt()
val version = "3.0.$gitCount"

android {
    namespace = "dev.brahmkshatriya.echo"
    compileSdk = 36

    defaultConfig {
        applicationId = "dev.brahmkshatriya.echo"
        minSdk = 24
        targetSdk = 36
        versionCode = gitCount
        versionName = "v${version}_$gitHash($gitCount)"
    }

    buildTypes {
        release {
            isMinifyEnabled = true
            isShrinkResources = true
            proguardFiles(
                getDefaultProguardFile("proguard-android-optimize.txt"),
            )
        }
        create("nightly") {
            initWith(getByName("release"))
            applicationIdSuffix = ".nightly"
            resValue("string", "app_name", "Echo Nightly")
        }
        create("stable") {
            initWith(getByName("release"))
        }
    }

    buildFeatures {
        buildConfig = true
        viewBinding = true
    }

    androidResources {
        @Suppress("UnstableApiUsage")
        generateLocaleConfig = true
    }
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}

kotlin {
    jvmToolchain(17)
}

dependencies {
    implementation(project(":common"))
    implementation(libs.kotlin.reflect)
    implementation(libs.bundles.androidx)
    implementation(libs.material)
    implementation(libs.bundles.paging)
    implementation(libs.filekache)
    implementation(libs.bundles.room)
    ksp(libs.room.compiler)
    implementation(libs.bundles.koin)
    implementation(libs.bundles.media3)
    implementation(libs.bundles.coil)

    implementation(libs.pikolo)
    implementation(libs.fadingedgelayout)
    implementation(libs.fastscroll)
    implementation(libs.kenburnsview)
    implementation(libs.nestedscrollwebview)
    implementation(libs.acsbendi.webview)

    if (!hasGoogleServices) return@dependencies
    implementation(libs.bundles.firebase)
}

if (hasGoogleServices) {
    apply(plugin = libs.plugins.gms.get().pluginId)
    apply(plugin = libs.plugins.crashlytics.get().pluginId)
}

fun execute(vararg command: String): String = providers.exec {
    commandLine(*command)
}.standardOutput.asText.get().trim()

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\AndroidManifest.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">

    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.POST_NOTIFICATIONS" />
    <uses-permission android:name="android.permission.FOREGROUND_SERVICE" />
    <uses-permission android:name="android.permission.FOREGROUND_SERVICE_MEDIA_PLAYBACK" />
    <uses-permission android:name="android.permission.FOREGROUND_SERVICE_DATA_SYNC" />
    <uses-permission android:name="android.permission.READ_MEDIA_AUDIO" />
    <!--    <uses-permission android:name="android.permission.READ_MEDIA_VIDEO" />-->
    <!--    <uses-permission android:name="android.permission.READ_MEDIA_VISUAL_USER_SELECTED" />-->
    <uses-permission
        android:name="android.permission.READ_EXTERNAL_STORAGE"
        android:maxSdkVersion="32" />
    <uses-permission
        android:name="android.permission.WRITE_EXTERNAL_STORAGE"
        android:maxSdkVersion="29" />
    <uses-permission android:name="android.permission.REQUEST_INSTALL_PACKAGES" />
    <uses-permission android:name="android.permission.REQUEST_DELETE_PACKAGES" />
    <uses-permission android:name="android.permission.UPDATE_PACKAGES_WITHOUT_USER_ACTION" />
    <uses-permission
        android:name="android.permission.QUERY_ALL_PACKAGES"
        tools:ignore="QueryAllPackagesPermission" />
    <uses-permission android:name="android.permission.DETECT_SCREEN_CAPTURE" />

    <application
        android:name=".MainApplication"
        android:appCategory="audio"
        android:enableOnBackInvokedCallback="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:requestLegacyExternalStorage="true"
        android:roundIcon="@mipmap/ic_launcher"
        android:supportsRtl="true"
        android:theme="@style/Default"
        android:usesCleartextTraffic="true"
        tools:targetApi="33">
        <receiver
            android:name=".widget.WidgetVertical"
            android:exported="false"
            android:label="@string/vertical">
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widget_vertical" />
        </receiver>

        <receiver
            android:name=".widget.WidgetCircle"
            android:exported="false"
            android:label="@string/circle">
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widget_circle" />
        </receiver>
        <receiver
            android:name=".widget.WidgetHorizontal"
            android:exported="false"
            android:label="@string/horizontal">
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widget_horizontal" />
        </receiver>

        <activity
            android:name=".MainActivity"
            android:enableOnBackInvokedCallback="false"
            android:enabled="true"
            android:exported="true"
            android:launchMode="singleTop"
            android:windowSoftInputMode="stateVisible|adjustPan">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <action android:name="android.media.action.MEDIA_PLAY_FROM_SEARCH" />
                <action android:name="android.intent.action.VIEW" />
                <action android:name="android.intent.action.MUSIC_PLAYER" />

                <category android:name="android.intent.category.LAUNCHER" />
                <category android:name="android.intent.category.APP_MUSIC" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />

                <data android:scheme="echo" />
            </intent-filter>
        </activity>

        <activity
            android:name=".MainActivity$Back"
            android:enableOnBackInvokedCallback="true"
            android:enabled="false"
            android:exported="true"
            android:launchMode="singleTop"
            android:windowSoftInputMode="stateVisible|adjustPan">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <action android:name="android.media.action.MEDIA_PLAY_FROM_SEARCH" />
                <action android:name="android.intent.action.VIEW" />
                <action android:name="android.intent.action.MUSIC_PLAYER" />

                <category android:name="android.intent.category.LAUNCHER" />
                <category android:name="android.intent.category.APP_MUSIC" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />

                <data android:scheme="echo" />
            </intent-filter>
        </activity>

        <activity
            android:name=".ui.extensions.ExtensionOpenerActivity"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />

                <data android:scheme="content" />
                <data android:host="*" />
                <data android:scheme="file" />
                <data android:pathPattern=".*" />
                <data android:pathPattern=".*\\.eapk" />
                <data android:mimeType="application/octet-stream" />
                <data android:mimeType="text/plain" />
            </intent-filter>
        </activity>

        <provider
            android:name="androidx.core.content.FileProvider"
            android:authorities="${applicationId}.provider"
            android:enabled="true"
            android:exported="false"
            android:grantUriPermissions="true">
            <meta-data
                android:name="android.support.FILE_PROVIDER_PATHS"
                android:resource="@xml/provider_paths" />
        </provider>

        <service
            android:name=".playback.PlayerService"
            android:exported="true"
            android:foregroundServiceType="mediaPlayback"
            tools:ignore="ExportedService">
            <intent-filter>
                <action android:name="androidx.media3.session.MediaLibraryService" />
                <action android:name="android.media.browse.MediaBrowserService" />
            </intent-filter>
        </service>

        <receiver
            android:name=".playback.PlayerCallback$ButtonReceiver"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MEDIA_BUTTON" />
            </intent-filter>
        </receiver>

        <activity android:name=".playback.PlayerService$MainActivityOpener" />

        <provider
            android:name="androidx.startup.InitializationProvider"
            android:authorities="${applicationId}.androidx-startup"
            android:exported="false"
            tools:node="merge">
            <meta-data
                android:name="androidx.work.WorkManagerInitializer"
                android:value="androidx.startup"
                tools:node="remove" />
        </provider>

        <service
            android:name="androidx.work.impl.foreground.SystemForegroundService"
            android:foregroundServiceType="dataSync"
            tools:node="merge" />

        <meta-data
            android:name="com.google.android.gms.car.application"
            android:resource="@xml/automotive_app_desc" />
    </application>

</manifest>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\MainActivity.kt
================================================================================

package dev.brahmkshatriya.echo

import android.content.Context
import android.graphics.Color.TRANSPARENT
import android.os.Bundle
import androidx.activity.SystemBarStyle
import androidx.activity.enableEdgeToEdge
import androidx.appcompat.app.AppCompatActivity
import androidx.appcompat.app.AppCompatDelegate
import androidx.core.content.ContextCompat
import androidx.fragment.app.add
import androidx.fragment.app.commit
import com.google.android.material.color.DynamicColors
import com.google.android.material.color.DynamicColorsOptions
import com.google.android.material.navigation.NavigationBarView
import dev.brahmkshatriya.echo.databinding.ActivityMainBinding
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.ui.common.ExceptionUtils.setupExceptionHandler
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.setupIntents
import dev.brahmkshatriya.echo.ui.common.SnackBarHandler.Companion.setupSnackBar
import dev.brahmkshatriya.echo.ui.common.UiViewModel
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.setupNavBarAndInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.setupPlayerBehavior
import dev.brahmkshatriya.echo.ui.extensions.ExtensionsViewModel.Companion.configureExtensionsUpdater
import dev.brahmkshatriya.echo.ui.main.MainFragment
import dev.brahmkshatriya.echo.ui.player.PlayerFragment
import dev.brahmkshatriya.echo.ui.player.PlayerFragment.Companion.PLAYER_COLOR
import dev.brahmkshatriya.echo.utils.ContextUtils.getSettings
import dev.brahmkshatriya.echo.utils.PermsUtils.checkAppPermissions
import dev.brahmkshatriya.echo.utils.ui.UiUtils.isNightMode
import org.koin.android.ext.android.inject
import org.koin.androidx.viewmodel.ext.android.viewModel

open class MainActivity : AppCompatActivity() {

    class Back : MainActivity()

    val binding by lazy { ActivityMainBinding.inflate(layoutInflater) }
    private val uiViewModel by viewModel<UiViewModel>()
    private val extensionLoader by inject<ExtensionLoader>()

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setTheme(getAppTheme())
        DynamicColors.applyToActivityIfAvailable(
            this, applyUiChanges(this, uiViewModel)
        )

        setContentView(binding.root)

        enableEdgeToEdge(
            SystemBarStyle.auto(TRANSPARENT, TRANSPARENT),
            if (isNightMode()) SystemBarStyle.dark(TRANSPARENT)
            else SystemBarStyle.light(TRANSPARENT, TRANSPARENT)
        )

        setupNavBarAndInsets(uiViewModel, binding.root, binding.navView as NavigationBarView)
        setupPlayerBehavior(uiViewModel, binding.playerFragmentContainer)
        setupExceptionHandler(setupSnackBar(uiViewModel, binding.root))
        checkAppPermissions { extensionLoader.setPermGranted() }
        configureExtensionsUpdater()
        supportFragmentManager.commit {
            if (savedInstanceState != null) return@commit
            add<MainFragment>(R.id.navHostFragment, "main")
            add<PlayerFragment>(R.id.playerFragmentContainer, "player")
        }
        setupIntents(uiViewModel)
    }

    companion object {
        const val THEME_KEY = "theme"
        const val AMOLED_KEY = "amoled"
        const val BIG_COVER = "big_cover"
        const val CUSTOM_THEME_KEY = "custom_theme"
        const val COLOR_KEY = "color"

        fun Context.getAppTheme(): Int {
            val settings = getSettings()
            val bigCover = settings.getBoolean(BIG_COVER, false)
            val amoled = settings.getBoolean(AMOLED_KEY, false)
            return when {
                amoled && bigCover -> R.style.AmoledBigCover
                amoled -> R.style.Amoled
                bigCover -> R.style.BigCover
                else -> R.style.Default
            }
        }

        fun Context.defaultColor() =
            ContextCompat.getColor(this, R.color.app_color)

        fun Context.isAmoled() = getSettings().getBoolean(AMOLED_KEY, false)

        fun applyUiChanges(context: Context, uiViewModel: UiViewModel): DynamicColorsOptions {
            val settings = context.getSettings()
            val mode = when (settings.getString(THEME_KEY, "system")) {
                "light" -> AppCompatDelegate.MODE_NIGHT_NO
                "dark" -> AppCompatDelegate.MODE_NIGHT_YES
                else -> AppCompatDelegate.MODE_NIGHT_FOLLOW_SYSTEM
            }
            AppCompatDelegate.setDefaultNightMode(mode)

            val custom = settings.getBoolean(CUSTOM_THEME_KEY, true)
            val color = if (custom) settings.getInt(COLOR_KEY, context.defaultColor()) else null
            val playerColor = settings.getBoolean(PLAYER_COLOR, false)
            val customColor = uiViewModel.playerColors.value?.accent?.takeIf { playerColor }

            val builder = DynamicColorsOptions.Builder()
            (customColor ?: color)?.let { builder.setContentBasedSource(it) }
            return builder.build()
        }

        const val BACK_ANIM = "back_anim"
        fun Context.getMainActivity() = if (getSettings().getBoolean(BACK_ANIM, false))
            Back::class.java else MainActivity::class.java
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\MainApplication.kt
================================================================================

package dev.brahmkshatriya.echo

import android.app.Application
import android.content.Context
import android.content.SharedPreferences
import android.content.pm.PackageManager
import android.os.Build
import android.os.Looper
import androidx.appcompat.app.AppCompatDelegate
import androidx.core.content.edit
import androidx.core.os.LocaleListCompat
import coil3.ImageLoader
import coil3.PlatformContext
import coil3.SingletonImageLoader
import coil3.disk.DiskCache
import coil3.disk.directory
import coil3.memory.MemoryCache
import coil3.request.allowHardware
import coil3.request.crossfade
import dev.brahmkshatriya.echo.di.DI
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.utils.AppShortcuts.configureAppShortcuts
import dev.brahmkshatriya.echo.utils.CoroutineUtils
import org.koin.android.ext.android.inject
import org.koin.android.ext.koin.androidContext
import org.koin.androidx.workmanager.koin.workManagerFactory
import org.koin.androix.startup.KoinStartup
import org.koin.core.annotation.KoinExperimentalAPI
import org.koin.dsl.koinConfiguration

@OptIn(KoinExperimentalAPI::class)
class MainApplication : Application(), KoinStartup, SingletonImageLoader.Factory {

    override fun onKoinStartup() = koinConfiguration {
        androidContext(this@MainApplication)
        modules(DI.appModule)
        workManagerFactory()
    }

    private val settings by inject<SharedPreferences>()
    private val extensionLoader by inject<ExtensionLoader>()

    override fun onCreate() {
        super.onCreate()
        CoroutineUtils.setDebug()
        applyLocale(settings)
        configureAppShortcuts(extensionLoader)
    }

    override fun newImageLoader(context: PlatformContext): ImageLoader {
        return ImageLoader.Builder(context)
            .memoryCache {
                MemoryCache.Builder()
                    .maxSizePercent(context, 0.25)
                    .build()
            }
            .diskCache {
                DiskCache.Builder()
                    .directory(cacheDir.resolve("image-cache"))
                    .maxSizeBytes(1024 * 1024 * 100) // 100MB
                    .build()
            }
            .allowHardware(false)
            .crossfade(true)
            .build()
    }

    override fun getPackageName(): String {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) runCatching {
            val stackTrace = Looper.getMainLooper().thread.stackTrace
            val isChromiumCall = stackTrace.any { trace ->
                trace.className.equals(CLASS_NAME, ignoreCase = true)
                        && FUNCTION_SET.any { trace.methodName.equals(it, ignoreCase = true) }
            }
            if (isChromiumCall) return spoofedPackageName(applicationContext)
        }
        return super.getPackageName()
    }

    private fun spoofedPackageName(context: Context): String {
        return runCatching {
            context.packageManager.getPackageInfo(CHROME_PACKAGE, PackageManager.GET_META_DATA)
            CHROME_PACKAGE
        }.getOrElse {
            SYSTEM_SETTINGS_PACKAGE
        }
    }

    companion object {
        private const val CHROME_PACKAGE = "com.android.chrome"
        private const val SYSTEM_SETTINGS_PACKAGE = "com.android.settings"
        private const val CLASS_NAME = "org.chromium.base.BuildInfo"
        private val FUNCTION_SET = setOf("getAll", "getPackageName", "<init>")

        fun getCurrentLanguage(sharedPref: SharedPreferences) =
            sharedPref.getString("language", null) ?: "system"

        fun setCurrentLanguage(sharedPref: SharedPreferences, locale: String?) {
            sharedPref.edit { putString("language", locale) }
            applyLocale(sharedPref)
        }

        fun applyLocale(sharedPref: SharedPreferences) {
            val value = sharedPref.getString("language", null) ?: "system"
            val locale = if (value == "system") LocaleListCompat.getEmptyLocaleList()
            else LocaleListCompat.forLanguageTags(value)
            AppCompatDelegate.setApplicationLocales(locale)
        }

        val languages = mapOf(
            "ar" to "العربية",
            "as" to "Assamese",
            "be" to "Беларуская",
            "bn" to "বাংলা",
            "ca" to "Català",
            "de" to "Deutsch",
            "es" to "Español",
            "fa" to "فارسی",
            "fr" to "Français",
            "en" to "English",
            "hi" to "हिन्दी",
            "hng" to "Hinglish",
            "hu" to "Magyar",
            "in" to "Bahasa Indonesia",
            "it" to "Italiano",
            "iw" to "עברית",
            "ja" to "日本語",
            "ko" to "한국어",
            "lv" to "Latviski",
            "ms" to "Bahasa Melayu",
            "pl" to "Polski",
            "pt" to "Português",
            "pt-rBR" to "Português (Brasil)",
            "ru" to "Русский",
            "sa" to "संस्कृतम्",
            "si" to "සිංහල",
            "sk" to "Slovenčina",
            "sr" to "Српски",
            "ta" to "தமிழ்",
            "th" to "ไทย",
            "tl" to "Filipino",
            "tr" to "Türkçe",
            "uk" to "Українська",
            "vi" to "Tiếng Việt",
            "zh-rCN" to "中文 (简体)",
            "zh-rTW" to "中文 (繁體)"
        )
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\di\App.kt
================================================================================

package dev.brahmkshatriya.echo.di

import android.app.Application
import android.content.Context.CONNECTIVITY_SERVICE
import android.content.SharedPreferences
import android.net.ConnectivityManager
import android.net.Network
import com.mayakapps.kache.FileKache
import com.mayakapps.kache.KacheStrategy
import dev.brahmkshatriya.echo.common.models.Message
import dev.brahmkshatriya.echo.common.models.NetworkConnection
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.CoroutineStart
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.async
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.flow.collectLatest
import kotlinx.coroutines.launch

data class App(
    val context: Application,
    val settings: SharedPreferences,
) {
    val throwFlow = MutableSharedFlow<Throwable>()
    val messageFlow = MutableSharedFlow<Message>()
    val scope = CoroutineScope(Dispatchers.IO)

    private suspend fun getCache() = FileKache(
        context.cacheDir.resolve("kache").toString(),
        50 * 1024 * 1024
    ) {
        strategy = KacheStrategy.LRU
    }

    val fileCache = scope.async(Dispatchers.IO, CoroutineStart.LAZY) {
        runCatching { getCache() }.getOrElse {
            context.cacheDir.resolve("kache").deleteRecursively()
            getCache()
        }
    }

    private val _networkFlow = MutableStateFlow(NetworkConnection.NotConnected)
    val networkFlow = _networkFlow.asStateFlow()
    val isUnmetered get() = networkFlow.value == NetworkConnection.Unmetered

    init {
        scope.launch {
            throwFlow.collectLatest {
                it.printStackTrace()
            }
        }
        val connectivityManager =
            context.getSystemService(CONNECTIVITY_SERVICE) as ConnectivityManager
        val networkCallback = object : ConnectivityManager.NetworkCallback() {
            override fun onAvailable(network: Network) {
                val isMetered = connectivityManager.isActiveNetworkMetered
                _networkFlow.value = if (isMetered) NetworkConnection.Metered
                else NetworkConnection.Unmetered
            }

            override fun onLost(network: Network) {
                _networkFlow.value = NetworkConnection.NotConnected
            }
        }
        connectivityManager.registerDefaultNetworkCallback(networkCallback)
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\di\DI.kt
================================================================================

package dev.brahmkshatriya.echo.di

import dev.brahmkshatriya.echo.download.DownloadWorker
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.download.db.DownloadDatabase
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.playback.PlayerService
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.ui.common.SnackBarHandler
import dev.brahmkshatriya.echo.ui.common.UiViewModel
import dev.brahmkshatriya.echo.ui.download.DownloadViewModel
import dev.brahmkshatriya.echo.ui.extensions.ExtensionInfoViewModel
import dev.brahmkshatriya.echo.ui.extensions.ExtensionsViewModel
import dev.brahmkshatriya.echo.ui.extensions.add.AddViewModel
import dev.brahmkshatriya.echo.ui.extensions.login.LoginUserListViewModel
import dev.brahmkshatriya.echo.ui.extensions.login.LoginViewModel
import dev.brahmkshatriya.echo.ui.feed.FeedViewModel
import dev.brahmkshatriya.echo.ui.main.search.SearchViewModel
import dev.brahmkshatriya.echo.ui.media.MediaViewModel
import dev.brahmkshatriya.echo.ui.player.PlayerViewModel
import dev.brahmkshatriya.echo.ui.player.more.info.TrackInfoViewModel
import dev.brahmkshatriya.echo.ui.player.more.lyrics.LyricsViewModel
import dev.brahmkshatriya.echo.ui.playlist.create.CreatePlaylistViewModel
import dev.brahmkshatriya.echo.ui.playlist.delete.DeletePlaylistViewModel
import dev.brahmkshatriya.echo.ui.playlist.edit.EditPlaylistViewModel
import dev.brahmkshatriya.echo.ui.playlist.save.SaveToPlaylistViewModel
import dev.brahmkshatriya.echo.utils.ContextUtils.getSettings
import org.koin.android.ext.koin.androidApplication
import org.koin.androidx.workmanager.dsl.workerOf
import org.koin.core.module.dsl.singleOf
import org.koin.core.module.dsl.viewModelOf
import org.koin.dsl.module

object DI {

    private val baseModule = module {
        single { androidApplication().getSettings() }
        singleOf(::App)
    }

    private val extensionModule = module {
        includes(baseModule)
        singleOf(::ExtensionLoader)
    }

    private val downloadModule = module {
        includes(extensionModule)
        singleOf(DownloadDatabase::create)
        singleOf(::Downloader)
        workerOf(::DownloadWorker)
    }

    private val playerModule = module {
        includes(extensionModule)
        singleOf(PlayerService::getCache)
        single { PlayerState() }
    }

    private val uiModules = module {
        singleOf(::SnackBarHandler)
        viewModelOf(::UiViewModel)

        viewModelOf(::PlayerViewModel)
        viewModelOf(::LyricsViewModel)
        viewModelOf(::TrackInfoViewModel)

        viewModelOf(::ExtensionsViewModel)
        viewModelOf(::ExtensionInfoViewModel)
        viewModelOf(::LoginUserListViewModel)
        viewModelOf(::AddViewModel)
        viewModelOf(::LoginViewModel)

        viewModelOf(::FeedViewModel)
        viewModelOf(::SearchViewModel)
        viewModelOf(::MediaViewModel)

        viewModelOf(::CreatePlaylistViewModel)
        viewModelOf(::DeletePlaylistViewModel)
        viewModelOf(::SaveToPlaylistViewModel)
        viewModelOf(::EditPlaylistViewModel)

        viewModelOf(::DownloadViewModel)
    }

    val appModule = module {
        includes(baseModule)
        includes(extensionModule)
        includes(playerModule)
        includes(downloadModule)
        includes(uiModules)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\Downloader.kt
================================================================================

package dev.brahmkshatriya.echo.download

import androidx.work.Constraints
import androidx.work.ExistingWorkPolicy
import androidx.work.NetworkType
import androidx.work.OneTimeWorkRequestBuilder
import androidx.work.WorkManager
import dev.brahmkshatriya.echo.common.clients.DownloadClient
import dev.brahmkshatriya.echo.common.clients.TrackClient
import dev.brahmkshatriya.echo.common.models.DownloadContext
import dev.brahmkshatriya.echo.common.models.Progress
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.download.db.DownloadDatabase
import dev.brahmkshatriya.echo.download.db.models.ContextEntity
import dev.brahmkshatriya.echo.download.db.models.DownloadEntity
import dev.brahmkshatriya.echo.download.db.models.TaskType
import dev.brahmkshatriya.echo.download.exceptions.DownloaderExtensionNotFoundException
import dev.brahmkshatriya.echo.download.tasks.TaskManager
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getAs
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtensionOrThrow
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.isClient
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedExtension.Companion.EXTENSION_ID
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedExtension.Companion.withExtensionId
import dev.brahmkshatriya.echo.utils.Serializer.toJson
import kotlinx.coroutines.CoroutineName
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.SharingStarted
import kotlinx.coroutines.flow.combine
import kotlinx.coroutines.flow.first
import kotlinx.coroutines.flow.map
import kotlinx.coroutines.flow.stateIn
import kotlinx.coroutines.launch
import kotlinx.coroutines.plus
import kotlinx.coroutines.sync.Mutex
import kotlinx.coroutines.sync.withLock
import java.io.File
import java.util.WeakHashMap

class Downloader(
    val app: App,
    val extensionLoader: ExtensionLoader,
    database: DownloadDatabase,
) {
    val unified = extensionLoader.unified.value

    suspend fun downloadExtension() = extensionLoader.misc.value
        .find { it.isClient<DownloadClient>() && it.isEnabled }
        ?: throw DownloaderExtensionNotFoundException()

    val scope = CoroutineScope(Dispatchers.IO) + CoroutineName("Downloader")

    val dao = database.downloadDao()
    val downloadFlow = dao.getDownloadsFlow()
    private val contextFlow = dao.getContextFlow()
    private val downloadInfoFlow = downloadFlow.combine(contextFlow) { downloads, contexts ->
        downloads.map { download ->
            val context = contexts.find { download.contextId == it.id }
            Info(download, context, listOf())
        }
    }

    val taskManager = TaskManager(this)

    fun add(
        downloads: List<DownloadContext>
    ) = scope.launch {
        val concurrentDownloads = downloadExtension()
            .getAs<DownloadClient, Int> { concurrentDownloads }
            .getOrNull()?.takeIf { it > 0 } ?: 2
        taskManager.setConcurrency(concurrentDownloads)
        val contexts = downloads.mapNotNull { it.context }.distinctBy { it.id }.associate {
            it.id to dao.insertContextEntity(ContextEntity(0, it.id, it.toJson()))
        }
        downloads.forEach {
            dao.insertDownloadEntity(
                DownloadEntity(
                    0,
                    it.track.extras[EXTENSION_ID] ?: it.extensionId,
                    it.track.id,
                    contexts[it.context?.id],
                    it.sortOrder,
                    it.track.toJson(),
                    TaskType.Loading,
                )
            )
        }
        ensureWorker()
    }

    private val workManager by lazy { WorkManager.getInstance(app.context) }
    private fun ensureWorker() {
        val request = OneTimeWorkRequestBuilder<DownloadWorker>()
            .setConstraints(Constraints(NetworkType.CONNECTED, requiresStorageNotLow = true))
            .addTag(TAG)
            .build()
        workManager.enqueueUniqueWork(TAG, ExistingWorkPolicy.KEEP, request)
    }

    @Suppress("IDENTITY_SENSITIVE_OPERATIONS_WITH_VALUE_TYPE")
    private val servers = WeakHashMap<Long, Streamable.Media.Server>()
    @Suppress("IDENTITY_SENSITIVE_OPERATIONS_WITH_VALUE_TYPE")
    private val mutexes = WeakHashMap<Long, Mutex>()

    suspend fun getServer(
        trackId: Long, download: DownloadEntity
    ): Streamable.Media.Server = mutexes.getOrPut(trackId) { Mutex() }.withLock {
        servers.getOrPut(trackId) {
            val extensionId = download.extensionId
            val extension = extensionLoader.music.getExtensionOrThrow(extensionId)
            val streamable = download.track.getOrThrow()
                .streamables.find { it.id == download.streamableId }!!
            extension.getAs<TrackClient, Streamable.Media.Server> {
                val media =
                    loadStreamableMedia(streamable, true) as Streamable.Media.Server
                media.sources.ifEmpty {
                    throw Exception("${trackId}: No sources found")
                }
                media
            }.getOrThrow()
        }
    }

    fun cancel(trackId: Long) {
        taskManager.remove(trackId)
        scope.launch {
            val entity = dao.getDownloadEntity(trackId) ?: return@launch
            dao.deleteDownloadEntity(entity)
            entity.exceptionFile?.let {
                val file = File(it)
                if (file.exists()) file.delete()
            }
            servers.remove(trackId)
            mutexes.remove(trackId)
        }
    }

    fun restart(trackId: Long) {
        taskManager.remove(trackId)
        scope.launch {
            val download = dao.getDownloadEntity(trackId) ?: return@launch
            dao.insertDownloadEntity(
                download.copy(exceptionFile = null, finalFile = null, fullyDownloaded = false)
            )
            download.exceptionFile?.let {
                val file = File(it)
                if (file.exists()) file.delete()
            }
            servers.remove(trackId)
            mutexes.remove(trackId)
            ensureWorker()
        }
    }

    fun cancelAll() {
        taskManager.removeAll()
        scope.launch {
            val downloads = downloadFlow.first().filter { it.finalFile == null }
            downloads.forEach { download ->
                dao.deleteDownloadEntity(download)
                servers.remove(download.id)
                mutexes.remove(download.id)
            }
        }
    }

    fun deleteDownload(id: String) {
        scope.launch {
            val downloads = downloadFlow.first().filter { it.trackId == id }
            downloads.forEach { download ->
                dao.deleteDownloadEntity(download)
            }
        }
    }

    fun deleteContext(id: String) {
        scope.launch {
            val contexts = contextFlow.first().filter { it.itemId == id }
            contexts.forEach { context ->
                dao.deleteContextEntity(context)
                val downloads = downloadFlow.first().filter {
                    it.contextId == context.id
                }
                downloads.forEach { download ->
                    dao.deleteDownloadEntity(download)
                }
            }
        }
    }

    data class Info(
        val download: DownloadEntity,
        val context: ContextEntity?,
        val workers: List<Pair<TaskType, Progress>>
    )

    val flow = downloadInfoFlow.combine(taskManager.progressFlow) { downloads, info ->
        downloads.map { (dl, context) ->
            val workers = info.filter { it.first.trackId == dl.id }.map { (a, b) -> a.type to b }
            Info(dl, context, workers)
        }.sortedByDescending { it.workers.size }
    }.stateIn(scope, SharingStarted.Eagerly, listOf())

    init {
        scope.launch {
            downloadInfoFlow.map { info ->
                info.filter { it.download.fullyDownloaded }.groupBy {
                    it.context?.id
                }.flatMap { (id, infos) ->
                    if (id == null) infos.mapNotNull {
                        it.download.track.getOrNull()
                            ?.withExtensionId(it.download.extensionId, false)
                    }
                    else listOfNotNull(infos.first().runCatching {
                        unified.db.getPlaylist(context?.mediaItem!!.getOrThrow())
                    }.getOrNull())
                }
            }.collect(unified.downloadFeed)
        }
    }

    companion object {
        private const val TAG = "Downloader"
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\DownloadWorker.kt
================================================================================

package dev.brahmkshatriya.echo.download

import android.app.PendingIntent
import android.content.Context
import android.content.Intent
import android.content.pm.ServiceInfo.FOREGROUND_SERVICE_TYPE_DATA_SYNC
import android.os.Build
import androidx.annotation.OptIn
import androidx.core.app.NotificationCompat
import androidx.core.app.NotificationManagerCompat
import androidx.media3.common.util.NotificationUtil
import androidx.media3.common.util.NotificationUtil.createNotificationChannel
import androidx.media3.common.util.UnstableApi
import androidx.work.CoroutineWorker
import androidx.work.ForegroundInfo
import androidx.work.WorkerParameters
import dev.brahmkshatriya.echo.MainActivity.Companion.getMainActivity
import dev.brahmkshatriya.echo.R
import kotlinx.coroutines.flow.collectLatest
import kotlinx.coroutines.isActive
import kotlinx.coroutines.launch

class DownloadWorker(
    private val context: Context,
    params: WorkerParameters,
    downloader: Downloader,
) : CoroutineWorker(context, params) {

    private val manager = downloader.taskManager
    override suspend fun doWork(): Result {
        setForeground(createNotification(0))
        val job = manager.scope.launch {
            manager.taskFlow.collectLatest {
                if (it.isEmpty()) removeNotification()
                else if (isActive) setForeground(createNotification(it.size))
            }
        }
        manager.awaitCompletion()
        job.cancel()
        return Result.success()
    }

    @OptIn(UnstableApi::class)
    private fun createNotification(
        tracks: Int,
    ): ForegroundInfo {
        createNotificationChannel(
            context, PROGRESS_CHANNEL_ID, R.string.download_progress, 0,
            NotificationUtil.IMPORTANCE_DEFAULT
        )
        val notificationBuilder = NotificationCompat.Builder(context, PROGRESS_CHANNEL_ID)
        val intent = getMainIntent(context)

        val tracksTitle = runCatching {
            context.resources.getQuantityString(R.plurals.number_songs, tracks, tracks)
        }.getOrNull() ?: context.getString(R.string.n_songs, tracks)

        return ForegroundInfo(
            NOTIF_ID,
            notificationBuilder
                .setSmallIcon(R.drawable.ic_downloading)
                .setContentTitle(context.getString(R.string.downloading_x, tracksTitle))
                .setContentIntent(intent)
                .setProgress(100, 0, true)
                .setOnlyAlertOnce(true)
                .setOngoing(true)
                .build(),
            if (Build.VERSION.SDK_INT < Build.VERSION_CODES.Q) 0
            else FOREGROUND_SERVICE_TYPE_DATA_SYNC
        )
    }

    private fun removeNotification() {
        NotificationManagerCompat.from(context).cancel(NOTIF_ID)
    }

    companion object {
        private const val NOTIF_ID = 0
        private const val PROGRESS_CHANNEL_ID = "download_progress_channel"

        fun getMainIntent(context: Context) = PendingIntent.getActivity(
            context,
            0,
            Intent(context, context.getMainActivity()).apply {
                putExtra("fromDownload", true)
            },
            PendingIntent.FLAG_IMMUTABLE or PendingIntent.FLAG_UPDATE_CURRENT,
        )!!
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\db\DownloadDao.kt
================================================================================

package dev.brahmkshatriya.echo.download.db

import androidx.room.Dao
import androidx.room.Delete
import androidx.room.Insert
import androidx.room.OnConflictStrategy.Companion.REPLACE
import androidx.room.Query
import dev.brahmkshatriya.echo.download.db.models.ContextEntity
import dev.brahmkshatriya.echo.download.db.models.DownloadEntity
import kotlinx.coroutines.flow.Flow

@Dao
interface DownloadDao {
    @Insert(onConflict = REPLACE)
    suspend fun insertContextEntity(context: ContextEntity): Long

    @Insert(onConflict = REPLACE)
    suspend fun insertDownloadEntity(download: DownloadEntity): Long

    @Query("SELECT * FROM DownloadEntity WHERE id = :trackId")
    suspend fun getDownloadEntity(trackId: Long): DownloadEntity?

    @Query("SELECT * FROM ContextEntity WHERE id = :contextId")
    suspend fun getContextEntity(contextId: Long?): ContextEntity?

    @Query("SELECT * FROM DownloadEntity")
    fun getDownloadsFlow(): Flow<List<DownloadEntity>>

    @Query("SELECT * FROM ContextEntity")
    fun getContextFlow(): Flow<List<ContextEntity>>

    @Delete
    fun deleteDownloadEntity(download: DownloadEntity)

    @Delete
    fun deleteContextEntity(context: ContextEntity)

    @Query("SELECT * FROM DownloadEntity WHERE contextId = :id")
    fun getDownloadsForContext(id: Long?): List<DownloadEntity>
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\db\DownloadDatabase.kt
================================================================================

package dev.brahmkshatriya.echo.download.db

import android.app.Application
import androidx.room.Database
import androidx.room.Room
import androidx.room.RoomDatabase
import dev.brahmkshatriya.echo.download.db.models.ContextEntity
import dev.brahmkshatriya.echo.download.db.models.DownloadEntity

@Database(
    entities = [
        ContextEntity::class,
        DownloadEntity::class,
    ],
    version = 8,
    exportSchema = false
)
abstract class DownloadDatabase : RoomDatabase() {
    abstract fun downloadDao(): DownloadDao

    companion object {
        private const val DATABASE_NAME = "download-db"
        fun create(app: Application) = Room.databaseBuilder(
                app, DownloadDatabase::class.java, DATABASE_NAME
            ).fallbackToDestructiveMigration(true).build()
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\db\models\ContextEntity.kt
================================================================================

package dev.brahmkshatriya.echo.download.db.models

import androidx.room.Entity
import androidx.room.PrimaryKey
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.utils.Serializer.toData

@Entity
data class ContextEntity(
    @PrimaryKey(true)
    val id: Long,
    val itemId: String,
    val data: String,
) {
    val mediaItem by lazy { data.toData<EchoMediaItem>() }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\db\models\DownloadEntity.kt
================================================================================

package dev.brahmkshatriya.echo.download.db.models

import androidx.room.Entity
import androidx.room.PrimaryKey
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.ui.common.ExceptionUtils
import dev.brahmkshatriya.echo.utils.Serializer.toData
import kotlinx.serialization.Serializable
import java.io.File

@Entity
@Serializable
data class DownloadEntity(
    @PrimaryKey(true)
    val id: Long,
    val extensionId: String,
    val trackId: String,
    val contextId: Long?,
    val sortOrder: Int? = null,
    val data: String,
    val task: TaskType,
    val loaded: Boolean = false,
    val folderPath: String? = null,
    val streamableId: String? = null,
    val indexesData: String? = null,
    val toMergeFilesData: String? = null,
    val toTagFile: String? = null,
    val finalFile: String? = null,
    val exceptionFile: String? = null,
    val fullyDownloaded: Boolean = false,
) {
    val track by lazy { data.toData<Track>() }
    val indexes by lazy { indexesData?.toData<List<Int>>()?.getOrNull().orEmpty() }
    val toMergeFiles by lazy { toMergeFilesData?.toData<List<String>>()?.getOrNull().orEmpty() }
    val exception by lazy {
        runCatching {
            exceptionFile?.let { File(it) }?.readText()?.toData<ExceptionUtils.Data>()?.getOrThrow()
        }.getOrNull()
    }
    val isFinal by lazy { finalFile != null || exceptionFile != null }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\db\models\TaskType.kt
================================================================================

package dev.brahmkshatriya.echo.download.db.models

enum class TaskType {
    Loading, Downloading, Merging, Tagging, Saving
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\exceptions\DownloaderExtensionNotFoundException.kt
================================================================================

package dev.brahmkshatriya.echo.download.exceptions

class DownloaderExtensionNotFoundException : Exception()

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\exceptions\DownloadException.kt
================================================================================

package dev.brahmkshatriya.echo.download.exceptions

import dev.brahmkshatriya.echo.download.db.models.DownloadEntity
import dev.brahmkshatriya.echo.download.db.models.TaskType

data class DownloadException(
    val type: TaskType,
    val downloadEntity: DownloadEntity,
    override val cause: Throwable
) : Exception()

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\tasks\BaseTask.kt
================================================================================

package dev.brahmkshatriya.echo.download.tasks

import android.Manifest.permission.POST_NOTIFICATIONS
import android.content.Context
import android.content.pm.PackageManager.PERMISSION_GRANTED
import android.graphics.drawable.Drawable
import androidx.annotation.OptIn
import androidx.core.app.NotificationCompat
import androidx.core.app.NotificationManagerCompat
import androidx.core.content.ContextCompat.checkSelfPermission
import androidx.core.graphics.drawable.toBitmap
import androidx.media3.common.util.NotificationUtil
import androidx.media3.common.util.NotificationUtil.createNotificationChannel
import androidx.media3.common.util.UnstableApi
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.clients.DownloadClient
import dev.brahmkshatriya.echo.common.models.DownloadContext
import dev.brahmkshatriya.echo.common.models.Progress
import dev.brahmkshatriya.echo.download.DownloadWorker.Companion.getMainIntent
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.download.db.models.TaskType
import dev.brahmkshatriya.echo.download.exceptions.DownloadException
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getAs
import dev.brahmkshatriya.echo.ui.common.ExceptionUtils.toData
import dev.brahmkshatriya.echo.utils.CoroutineUtils.throttleLatest
import dev.brahmkshatriya.echo.utils.Serializer.toJson
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.withContext
import java.io.File

abstract class BaseTask(
    private val context: Context,
    val downloader: Downloader,
    open val trackId: Long,
) {
    abstract val type: TaskType
    val progressFlow = MutableStateFlow(Progress())
    val throttledProgressFlow = progressFlow.throttleLatest(500L)
    val running = MutableStateFlow(false)
    suspend fun <T> withDownloadExtension(block: suspend DownloadClient.() -> T) =
        downloader.downloadExtension().getAs<DownloadClient, T> { block() }.getOrThrow()

    val dao = downloader.dao

    suspend fun doWork() = withContext(Dispatchers.IO) {
        running.value = true
        val result = runCatching { work(trackId) }
        val throwable = result.exceptionOrNull()
        val download = dao.getDownloadEntity(trackId)
        if (throwable != null && download != null) {
            val exception = DownloadException(type, download, throwable)
            val exceptionFile = context.exceptionDir().resolve("$trackId.json")
            exceptionFile.writeText(exception.toData(context).toJson())
            dao.insertDownloadEntity(download.copy(exceptionFile = exceptionFile.absolutePath))
        }
        running.value = false
        result
    }

    suspend fun getDownload() = dao.getDownloadEntity(trackId)!!

    suspend fun getDownloadContext() = run {
        val download = getDownload()
        val contextEntity = download.contextId?.let { dao.getContextEntity(it) }
        DownloadContext(
            download.extensionId,
            download.track.getOrThrow(),
            download.sortOrder,
            contextEntity?.mediaItem?.getOrThrow()
        )
    }

    abstract suspend fun work(trackId: Long)

    companion object {
        fun Context.getTitle(type: TaskType, title: String) = when (type) {
            TaskType.Loading -> getString(R.string.loading_x, title)
            TaskType.Downloading -> getString(R.string.downloading_x, title)
            TaskType.Merging -> getString(R.string.merging_x, title)
            TaskType.Tagging -> getString(R.string.tagging_x, title)
            TaskType.Saving -> getString(R.string.saving_x, title)
        }

        private const val DOWNLOAD_CHANNEL_ID = "download_channel"

        fun Context.exceptionDir() = File(filesDir, "download_exceptions").apply { mkdirs() }
    }


    @OptIn(UnstableApi::class)
    fun createCompleteNotification(
        context: Context,
        title: String,
        drawable: Drawable?,
    ) {
        createNotificationChannel(
            context, DOWNLOAD_CHANNEL_ID, R.string.download_complete, 0,
            NotificationUtil.IMPORTANCE_DEFAULT
        )
        val notificationBuilder = NotificationCompat.Builder(context, DOWNLOAD_CHANNEL_ID)
            .setSmallIcon(R.drawable.ic_downloading)
            .setContentTitle(context.getString(R.string.download_complete))
            .setContentText(title)
            .setStyle(
                NotificationCompat.BigPictureStyle().bigLargeIcon(drawable?.toBitmap())
            )
            .setContentIntent(getMainIntent(context))
            .setAutoCancel(true)

        if (checkSelfPermission(context, POST_NOTIFICATIONS) != PERMISSION_GRANTED) return
        NotificationManagerCompat.from(context).notify(
            title.hashCode(),
            notificationBuilder.build()
        )
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\tasks\DownloadingTask.kt
================================================================================

package dev.brahmkshatriya.echo.download.tasks

import android.content.Context
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.download.db.models.TaskType
import dev.brahmkshatriya.echo.utils.Serializer.toJson

class DownloadingTask(
    context: Context,
    downloader: Downloader,
    override val trackId: Long,
    val index: Int,
) : BaseTask(context, downloader, trackId) {

    override val type = TaskType.Downloading
    override suspend fun work(trackId: Long) {
        var download = getDownload()
        val server = downloader.getServer(trackId, download)
        val source = server.sources[index]
        val downloadContext = getDownloadContext()
        val file = withDownloadExtension { download(progressFlow, downloadContext, source) }
        download = getDownload()
        download =
            download.copy(toMergeFilesData = (download.toMergeFiles + file.toString()).toJson())
        dao.insertDownloadEntity(download)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\tasks\LoadingTask.kt
================================================================================

package dev.brahmkshatriya.echo.download.tasks

import android.content.Context
import dev.brahmkshatriya.echo.common.clients.TrackClient
import dev.brahmkshatriya.echo.common.models.Progress
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.download.db.models.TaskType
import dev.brahmkshatriya.echo.download.tasks.TaskManager.Companion.toQueueItem
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getAs
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtensionOrThrow
import dev.brahmkshatriya.echo.utils.Serializer.toJson

class LoadingTask(
    private val context: Context,
    downloader: Downloader,
    override val trackId: Long,
) : BaseTask(context, downloader, trackId) {

    override val type = TaskType.Loading

    private val manager = downloader.taskManager
    private val extensionsList = downloader.extensionLoader.music

    private val totalSize = 3L

    override suspend fun work(trackId: Long) {
        progressFlow.value = Progress(totalSize, 0)
        var download = dao.getDownloadEntity(trackId)!!
        val extension = extensionsList.getExtensionOrThrow(download.extensionId)
        if (!download.loaded) {
            val track = extension.getAs<TrackClient, Track> {
                loadTrack(download.track.getOrThrow(), true)
            }.getOrThrow()
            track.servers.ifEmpty { throw Exception("${track.title}: No servers found") }
            download = download.copy(data = track.toJson(), loaded = true)
            dao.insertDownloadEntity(download)
        }

        progressFlow.value = Progress(totalSize, 1)
        val downloadContext = getDownloadContext()
        if (download.streamableId == null) {
            val selected = withDownloadExtension { selectServer(downloadContext) }
            download = download.copy(streamableId = selected.id)
            dao.insertDownloadEntity(download)
        }
        progressFlow.value = Progress(totalSize, 2)

        val server = downloader.getServer(trackId, download)

        val indexes = download.indexes.ifEmpty {
            val sources = withDownloadExtension { selectSources(downloadContext, server) }
            sources.map { server.sources.indexOf(it) }
        }
        if (indexes.isEmpty()) throw Exception("No files to download")
        download = download.copy(indexesData = indexes.toJson())
        dao.insertDownloadEntity(download)

        progressFlow.value = Progress(totalSize, 3)

        val requests = indexes.map { index ->
            DownloadingTask(context, downloader, trackId, index)
        }.toQueueItem()
        val mergeRequest = MergingTask(context, downloader, trackId).toQueueItem()
        val taggingRequest = TaggingTask(context, downloader, trackId).toQueueItem()
        val saveToUnified = SaveToUnifiedTask(context, downloader, trackId).toQueueItem()

        manager.enqueue(trackId, listOf(requests, mergeRequest, taggingRequest, saveToUnified))
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\tasks\MergingTask.kt
================================================================================

package dev.brahmkshatriya.echo.download.tasks

import android.content.Context
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.download.db.models.TaskType
import java.io.File

class MergingTask(
    context: Context,
    downloader: Downloader,
    override val trackId: Long,
) : BaseTask(context, downloader, trackId) {
    override val type = TaskType.Merging

    override suspend fun work(trackId: Long) {
        val downloadContext = getDownloadContext()
        val download = getDownload()
        val file = withDownloadExtension {
            merge(progressFlow, downloadContext, download.toMergeFiles.map { File(it) })
        }
        dao.insertDownloadEntity(download.copy(toTagFile = file.toString()))
    }

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\tasks\SaveToUnifiedTask.kt
================================================================================

package dev.brahmkshatriya.echo.download.tasks

import android.content.Context
import dev.brahmkshatriya.echo.common.clients.PlaylistEditClient
import dev.brahmkshatriya.echo.common.models.Feed.Companion.loadAll
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.download.db.models.TaskType
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getAs
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtensionOrThrow
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedExtension
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedExtension.Companion.withExtensionId
import dev.brahmkshatriya.echo.utils.Serializer.toJson
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadDrawable

class SaveToUnifiedTask(
    private val app: Context,
    downloader: Downloader,
    override val trackId: Long,
) : BaseTask(app, downloader, trackId) {

    override val type = TaskType.Saving

    override suspend fun work(trackId: Long) {
        val old = getDownload()
        if (old.finalFile == null) return

        val download = old.copy(
            data = old.track.getOrThrow().withExtensionId(old.extensionId, false).toJson(),
        )
        dao.insertDownloadEntity(download)

        val downloadContext = getDownloadContext()
        val context = downloadContext.context
        val allDownloads = dao.getDownloadsForContext(download.contextId)

        val unifiedExtension =
            downloader.extensionLoader.music.getExtensionOrThrow(UnifiedExtension.metadata.id)

        if (context != null) unifiedExtension.getAs<PlaylistEditClient, Unit> {
            val db = (this as UnifiedExtension).db
            val playlist = db.getOrCreate(app, context)
            val tracks = loadTracks(playlist).loadAll()
            if (allDownloads.all { it.finalFile != null }) {
                removeTracksFromPlaylist(playlist, tracks, tracks.indices.toList())
                val sorted = allDownloads.sortedBy { it.sortOrder }
                addTracksToPlaylist(playlist, listOf(), 0, sorted.map { it.track.getOrThrow() })
            } else addTracksToPlaylist(
                playlist, tracks, tracks.size, listOf(download.track.getOrThrow())
            )
        }.getOrThrow()

        dao.insertDownloadEntity(download.copy(fullyDownloaded = true))

        val item = if (context == null) download.track.getOrThrow() else {
            if (allDownloads.all { it.finalFile != null }) context else null
        } ?: return
        createCompleteNotification(app, item.title, item.cover.loadDrawable(app))
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\tasks\TaggingTask.kt
================================================================================

package dev.brahmkshatriya.echo.download.tasks

import android.content.Context
import android.media.MediaScannerConnection
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.download.db.models.TaskType
import java.io.File

class TaggingTask(
    private val app: Context,
    downloader: Downloader,
    override val trackId: Long,
) : BaseTask(app, downloader, trackId) {

    override val type = TaskType.Tagging

    override suspend fun work(trackId: Long) {
        val downloadContext = getDownloadContext()
        val download = getDownload()
        val file = withDownloadExtension {
            tag(progressFlow, downloadContext, File(download.toTagFile!!))
        }
        dao.insertDownloadEntity(download.copy(finalFile = file.toString()))
        MediaScannerConnection.scanFile(
            app, arrayOf(file.toString()), null, null
        )
    }

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\download\tasks\TaskManager.kt
================================================================================

package dev.brahmkshatriya.echo.download.tasks

import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.download.db.models.TaskType
import kotlinx.coroutines.Job
import kotlinx.coroutines.async
import kotlinx.coroutines.awaitAll
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.SharingStarted
import kotlinx.coroutines.flow.channelFlow
import kotlinx.coroutines.flow.collectLatest
import kotlinx.coroutines.flow.combine
import kotlinx.coroutines.flow.first
import kotlinx.coroutines.flow.map
import kotlinx.coroutines.flow.stateIn
import kotlinx.coroutines.launch
import kotlinx.coroutines.sync.Semaphore
import kotlinx.coroutines.sync.withPermit

class TaskManager(private val downloader: Downloader) {
    val scope = downloader.scope
    private val downloadFlow = downloader.downloadFlow
    private val context = downloader.app.context

    val taskFlow = MutableStateFlow(listOf<TaskItem>())
    private var taskSemaphores = TaskType.entries.associateWith { Semaphore(2) }
    fun setConcurrency(limit: Int) {
        taskSemaphores = TaskType.entries.associateWith { Semaphore(limit) }
    }

    val progressFlow = channelFlow {
        taskFlow.map { items ->
            items.flatMap { it.queue }.flatMap { it.tasks }
        }.collectLatest { tasks ->
            if (tasks.isEmpty()) send(emptyArray())
            else combine(tasks.map { it.running }) { _ ->
                tasks.filter { it.running.value }.map { task ->
                    task.throttledProgressFlow.map { task to it }
                }
            }.collectLatest { progressFlows ->
                if (progressFlows.isEmpty()) send(emptyArray())
                else combine(progressFlows) { it }.collectLatest { send(it) }
            }
        }
    }.stateIn(scope, SharingStarted.Eagerly, arrayOf())

    data class TaskItem(val trackId: Long, val queue: List<QueueItem>, val job: Job)
    data class QueueItem(val tasks: List<BaseTask>)

    companion object {
        fun BaseTask.toQueueItem() = QueueItem(listOf(this))
        fun List<BaseTask>.toQueueItem() = QueueItem(this)
    }

    fun enqueue(trackId: Long, items: List<QueueItem>) {
        val list = taskFlow.value.toMutableList()
        list.add(TaskItem(trackId, items, scope.launch {
            runCatching {
                items.onEach { item ->
                    val results = item.tasks.map { worker ->
                        scope.async {
                            taskSemaphores[worker.type]!!.withPermit { worker.doWork() }
                        }
                    }.awaitAll()
                    results.onEach { it.getOrThrow() }
                }
            }
            val new = taskFlow.value.toMutableList()
            new.removeAll { it.queue == items }
            taskFlow.value = new
        }))
        taskFlow.value = list
    }

    private fun enqueueLoadingWork(trackId: Long) {
        val loadingWorker = LoadingTask(context, downloader, trackId)
        enqueue(trackId, listOf(QueueItem(listOf(loadingWorker))))
    }

    suspend fun awaitCompletion() {
        downloadFlow.map { entities -> entities.filter { !it.isFinal } }.first { entities ->
            val works = taskFlow.value.map { it.trackId }
            val notStarted = entities.filter { !works.contains(it.id) }
            notStarted.forEach { enqueueLoadingWork(it.id) }
            entities.isEmpty()
        }
    }

    fun remove(trackId: Long) {
        val list = taskFlow.value.toMutableList()
        val works = list.filter { it.trackId == trackId }
        works.forEach { it.job.cancel() }
        list.removeAll(works)
        taskFlow.value = list
    }

    fun removeAll() {
        taskFlow.value.forEach { it.job.cancel() }
        taskFlow.value = listOf()
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\ExtensionLoader.kt
================================================================================

package dev.brahmkshatriya.echo.extensions

import androidx.annotation.OptIn
import androidx.core.content.edit
import androidx.media3.common.util.UnstableApi
import androidx.media3.datasource.cache.SimpleCache
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.LyricsExtension
import dev.brahmkshatriya.echo.common.MiscExtension
import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.TrackerExtension
import dev.brahmkshatriya.echo.common.clients.ExtensionClient
import dev.brahmkshatriya.echo.common.clients.LoginClient
import dev.brahmkshatriya.echo.common.helpers.Injectable
import dev.brahmkshatriya.echo.common.helpers.WebViewClient
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.Metadata
import dev.brahmkshatriya.echo.common.providers.GlobalSettingsProvider
import dev.brahmkshatriya.echo.common.providers.LyricsExtensionsProvider
import dev.brahmkshatriya.echo.common.providers.MessageFlowProvider
import dev.brahmkshatriya.echo.common.providers.MetadataProvider
import dev.brahmkshatriya.echo.common.providers.MiscExtensionsProvider
import dev.brahmkshatriya.echo.common.providers.MusicExtensionsProvider
import dev.brahmkshatriya.echo.common.providers.NetworkConnectionProvider
import dev.brahmkshatriya.echo.common.providers.TrackerExtensionsProvider
import dev.brahmkshatriya.echo.common.providers.WebViewClientProvider
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.get
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getOrThrow
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.inject
import dev.brahmkshatriya.echo.extensions.builtin.offline.OfflineExtension
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedExtension
import dev.brahmkshatriya.echo.extensions.db.ExtensionDatabase
import dev.brahmkshatriya.echo.extensions.db.models.CurrentUser
import dev.brahmkshatriya.echo.extensions.exceptions.AppException.Companion.toAppException
import dev.brahmkshatriya.echo.extensions.exceptions.RequiredExtensionsMissingException
import dev.brahmkshatriya.echo.extensions.repo.CombinedRepository
import dev.brahmkshatriya.echo.extensions.repo.ExtensionParser
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.delay
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.SharingStarted
import kotlinx.coroutines.flow.collectLatest
import kotlinx.coroutines.flow.combine
import kotlinx.coroutines.flow.map
import kotlinx.coroutines.flow.stateIn
import kotlinx.coroutines.launch
import java.io.File

@OptIn(UnstableApi::class)
class ExtensionLoader(
    val app: App,
    val cache: SimpleCache,
) {
    val parser = ExtensionParser(app.context)
    val scope = CoroutineScope(Dispatchers.IO)
    val db = ExtensionDatabase.create(app.context)

    private var permGrantedFlow = false
    fun setPermGranted() {
        if (permGrantedFlow) return
        permGrantedFlow = true
        val id = current.value?.id
        if (id == OfflineExtension.metadata.id || id == UnifiedExtension.metadata.id) {
            current.value = null
            scope.launch {
                delay(1)
                setCurrentExtension()
            }
        }
    }

    val unified = lazy { UnifiedExtension(app, cache) }
    val fileIgnoreFlow = MutableSharedFlow<File?>()
    private val repository = CombinedRepository(
        scope, app.context, fileIgnoreFlow, parser,
        UnifiedExtension.metadata to unified,
        OfflineExtension.metadata to lazy { OfflineExtension(app.context) },
//        TestExtension.metadata to lazy { TestExtension() },
//        DownloadExtension.metadata to lazy { DownloadExtension(app.context) }
//        TrackerTestExtension.metadata to Injectable { TrackerTestExtension() },
    )

    private val settings = app.settings
    val priorityMap = ExtensionType.entries.associateWith {
        val key = it.priorityKey()
        val list = settings.getString(key, null).orEmpty().split(',')
        MutableStateFlow(list)
    }

    val current = MutableStateFlow<MusicExtension?>(null)
    private fun setCurrentExtension() {
        val last = settings.getString(LAST_EXTENSION_KEY, null)
        val list = music.value
        val extension = list.find { it.id == last && it.isEnabled }
            ?: list.firstOrNull { it.isEnabled }
            ?: return
        setupMusicExtension(extension, false)
    }

    fun setupMusicExtension(extension: MusicExtension, manual: Boolean) {
        if (manual) settings.edit { putString(LAST_EXTENSION_KEY, extension.id) }
        current.value = extension
        scope.launch {
            extension.get { onExtensionSelected() }.getOrThrow(app.throwFlow)
        }
    }

    private val injected = repository.flow.map { list ->
        list?.groupBy { it.getOrNull()?.first?.run { type to id } }?.map { entry ->
            entry.value.minBy { it.getOrNull()?.first?.importType?.ordinal ?: Int.MAX_VALUE }
        }.orEmpty()
    }.combine(db.extensionEnabledFlow) { list, enabledList ->
        val enabledMap = enabledList.associate { (it.type to it.id) to it.enabled }
        list.map { result ->
            result.mapCatching { (metadata, injectable) ->
                val key = metadata.run { type to id }
                val isEnabled = enabledMap[key] ?: metadata.isEnabled
                metadata.copy(isEnabled = isEnabled) to injectable
            }
        }
    }.map { list ->
        list.map { result ->
            result.map {
                it.first to it.second.injected(it.first)
            }
        }
    }.combine(db.currentUsersFlow) { list, users ->
        list.onEach { result ->
            scope.launch(Dispatchers.IO) {
                val (metadata, injectable) = result.getOrNull() ?: return@launch
                runCatching {
                    injectable.injectOrRun("user") {
                        if (this !is LoginClient) return@injectOrRun
                        val newCurr = users.getUser(metadata)
                        val user = newCurr?.let { db.getUser(it) }
                        setLoginUser(user)
                    }
                }.onFailure {
                    app.throwFlow.emit(it.toAppException(metadata))
                }
            }
        }
    }

    val webViewClientFactory = WebViewClientFactory(app.context)
    private fun createWebClient(metadata: Metadata): WebViewClient {
        if (metadata.type != ExtensionType.MUSIC)
            throw Exception("Webview client is not available for ${metadata.type} Extensions")
        return webViewClientFactory.createFor(metadata)
    }

    private fun Lazy<ExtensionClient>.injected(
        metadata: Metadata,
    ) = Injectable(::value, mutableListOf({
        if (this is MetadataProvider) setMetadata(metadata)
        if (this is MessageFlowProvider) setMessageFlow(app.messageFlow)
        if (this is GlobalSettingsProvider)
            setGlobalSettings(ExtensionUtils.getGlobalSettings(app.context))
        setSettings(ExtensionUtils.getSettings(app.context, metadata))
        if (this is WebViewClientProvider) setWebViewClient(createWebClient(metadata))
        onInitialize()
        onExtensionSelected()
    }))

    private fun <T : Extension<*>> mapped(
        type: ExtensionType, transform: (Metadata, Injectable<ExtensionClient>) -> T,
    ) = injected.map { list ->
        list.mapNotNull {
            val (meta, injectable) = it.getOrNull() ?: return@mapNotNull null
            if (meta.type != type) return@mapNotNull null
            transform(meta, injectable)
        }
    }.combine(priorityMap[type]!!) { list, _ ->
        list.sorted(type) { it.id }
    }.stateIn(scope, SharingStarted.Lazily, emptyList())

    val music = mapped(ExtensionType.MUSIC) { m, i -> MusicExtension(m, i) }
    val tracker = mapped(ExtensionType.TRACKER) { m, i -> TrackerExtension(m, i.casted()) }
    val lyrics = mapped(ExtensionType.LYRICS) { m, i -> LyricsExtension(m, i.casted()) }
    val misc = mapped(ExtensionType.MISC) { m, i -> MiscExtension(m, i) }
    val all = combine(music, tracker, lyrics, misc) { music, tracker, lyrics, misc ->
        music + tracker + lyrics + misc
    }.stateIn(scope, SharingStarted.Lazily, emptyList())

    init {
        scope.launch {
            all.collect { list ->
                list.forEach {
                    if (!it.isEnabled) return@forEach
                    it.inject("providers", app.throwFlow) { injectProviders(this) }
                }
            }
        }
        scope.launch {
            music.collectLatest { setCurrentExtension() }
        }
        scope.launch {
            app.networkFlow.combine(all) { a, b -> a to b }.collect { (conn, all) ->
                all.forEach {
                    if (!it.isEnabled) return@forEach
                    it.inject("network", app.throwFlow) {
                        if (this !is NetworkConnectionProvider) return@inject
                        setNetworkConnection(conn)
                    }
                }
            }
        }
    }

    private fun <T> List<T>.sorted(type: ExtensionType, id: (T) -> String): List<T> {
        val priority = priorityMap[type]!!.value
        return sortedBy { priority.indexOf(id(it)) }
    }

    fun getFlow(type: ExtensionType) = when (type) {
        ExtensionType.MUSIC -> music
        ExtensionType.TRACKER -> tracker
        ExtensionType.LYRICS -> lyrics
        ExtensionType.MISC -> misc
    }

    private fun injectProviders(client: ExtensionClient) {
        (client as? MusicExtensionsProvider)?.run {
            inject(requiredMusicExtensions, music.value) { setMusicExtensions(it) }
        }
        (client as? TrackerExtensionsProvider)?.run {
            inject(requiredTrackerExtensions, tracker.value) { setTrackerExtensions(it) }
        }
        (client as? LyricsExtensionsProvider)?.run {
            inject(requiredLyricsExtensions, lyrics.value) { setLyricsExtensions(it) }
        }
        (client as? MiscExtensionsProvider)?.run {
            inject(requiredMiscExtensions, misc.value) { setMiscExtensions(it) }
        }
    }

    companion object {
        private fun <T, R : Extension<*>> T.inject(
            required: List<String>,
            extensions: List<R>,
            set: T.(List<R>) -> Unit,
        ) {
            if (required.isEmpty()) set(extensions)
            else {
                val filtered = extensions.filter { it.metadata.id in required }
                if (filtered.size == required.size) set(filtered)
                else throw RequiredExtensionsMissingException(required)
            }
        }

        fun List<CurrentUser>.getUser(ext: Metadata): CurrentUser? {
            val curr = find { it.type == ext.type && it.extId == ext.id }
            return curr
        }

        fun ExtensionType.priorityKey() = "priority_${this.feature}"

        const val LAST_EXTENSION_KEY = "last_extension"
    }

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\ExtensionUtils.kt
================================================================================

package dev.brahmkshatriya.echo.extensions

import android.content.Context
import android.content.SharedPreferences
import androidx.core.content.edit
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.clients.ExtensionClient
import dev.brahmkshatriya.echo.common.helpers.ClientException
import dev.brahmkshatriya.echo.common.models.Metadata
import dev.brahmkshatriya.echo.common.settings.Settings
import dev.brahmkshatriya.echo.extensions.exceptions.AppException.Companion.toAppException
import dev.brahmkshatriya.echo.extensions.exceptions.ExtensionNotFoundException
import dev.brahmkshatriya.echo.utils.ContextUtils.getSettings
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.first
import kotlinx.coroutines.flow.map
import kotlinx.coroutines.withContext

object ExtensionUtils {

    suspend fun <R> Extension<*>.get(
        block: suspend ExtensionClient.() -> R
    ) = runCatching {
        runCatching {
            withContext(Dispatchers.IO) { instance.value().getOrThrow().block() }
        }.getOrElse { throw it.toAppException(this) }
    }

    suspend inline fun <reified C, R> Extension<*>.getAs(
        crossinline block: suspend C.() -> R
    ): Result<R> = get {
        val client = this as? C
            ?: throw ClientException.NotSupported(C::class.simpleName ?: "Unknown Class")
        block(client)
    }

    suspend inline fun <reified C, R> Extension<*>.getIf(
        crossinline block: suspend C.() -> R
    ): Result<R?> = get {
        val client = this as? C
        client?.let { block(it) }
    }

    suspend fun <T> Result<T>.getOrThrow(
        throwableFlow: MutableSharedFlow<Throwable>
    ) = getOrElse {
        throwableFlow.emit(it)
        it.printStackTrace()
        null
    }

    suspend inline fun <reified C> Extension<*>.runIf(
        throwableFlow: MutableSharedFlow<Throwable>,
        crossinline block: suspend C.() -> Unit
    ) { getIf<C, Unit>(block).getOrThrow(throwableFlow) }

    suspend inline fun <reified C, R> Extension<*>.getIf(
        throwableFlow: MutableSharedFlow<Throwable>,
        crossinline block: suspend C.() -> R
    ): R? = getIf<C, R>(block).getOrThrow(throwableFlow)

    suspend fun Extension<*>.inject(
        id: String,
        throwableFlow: MutableSharedFlow<Throwable>,
        block: suspend ExtensionClient.() -> Unit
    ) = runCatching {
        instance.injectOrRun(id) { withContext(Dispatchers.IO) { block() } }
    }.getOrElse {
        throwableFlow.emit(it.toAppException(this))
    }

    suspend inline fun <reified T> Extension<*>.isClient() = instance.value().getOrNull() is T

    suspend fun <T : Extension<*>> Flow<List<T>>.getExtension(id: String?): T? {
        val list = first { it.isNotEmpty() }
        return list.find { it.id == id }
    }

    suspend fun <T : Extension<*>> Flow<List<T>>.getExtensionOrThrow(id: String?) =
        getExtension(id) ?: throw ExtensionNotFoundException(id)

    fun <T : Extension<*>> Flow<List<T>>.getExtensionFlow(id: String?): Flow<T?> {
        return map { list -> list.find { it.id == id } }
    }

    fun extensionPrefId(extensionType: String, extensionId: String) = "$extensionType-$extensionId"
    fun String.prefs(context: Context) =
        context.getSharedPreferences(this, Context.MODE_PRIVATE)!!

    fun Metadata.prefs(context: Context) = extensionPrefId(type.name, id).prefs(context)
    fun Extension<*>.prefs(context: Context) = metadata.prefs(context)

    fun getSettings(context: Context, metadata: Metadata): Settings {
        return toSettings(metadata.prefs(context))
    }

    fun getGlobalSettings(context: Context): Settings {
        return toSettings(context.getSettings())
    }

    fun toSettings(prefs: SharedPreferences) = object : Settings {
        override fun getString(key: String) = prefs.getString(key, null)
        override fun putString(key: String, value: String?) {
            prefs.edit { putString(key, value) }
        }

        override fun getInt(key: String) =
            if (prefs.contains(key)) prefs.getInt(key, 0) else null

        override fun putInt(key: String, value: Int?) {
            prefs.edit { if (value != null) putInt(key, value) else remove(key) }
        }

        override fun getBoolean(key: String) =
            if (prefs.contains(key)) prefs.getBoolean(key, false) else null

        override fun putBoolean(key: String, value: Boolean?) {
            prefs.edit { if (value != null) putBoolean(key, value) else remove(key) }
        }

        override fun getStringSet(key: String) = prefs.getStringSet(key, null)
        override fun putStringSet(key: String, value: Set<String>?) {
            prefs.edit { putStringSet(key, value) }
        }
    }

    @Suppress("UNCHECKED_CAST")
    fun SharedPreferences.copyTo(dest: SharedPreferences) = dest.edit {
        all.entries.forEach { entry ->
            val value = entry.value ?: return@forEach
            val key = entry.key
            when (value) {
                is String -> putString(key, value)
                is Set<*> -> putStringSet(key, value as Set<String>)
                is Int -> putInt(key, value)
                is Long -> putLong(key, value)
                is Float -> putFloat(key, value)
                is Boolean -> putBoolean(key, value)
                else -> {}
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\InstallationUtils.kt
================================================================================

package dev.brahmkshatriya.echo.extensions

import android.app.Activity
import android.content.Context
import android.content.Intent
import android.net.Uri
import androidx.activity.result.contract.ActivityResultContracts
import androidx.core.content.FileProvider
import androidx.core.net.toUri
import androidx.fragment.app.FragmentActivity
import dev.brahmkshatriya.echo.extensions.repo.ExtensionParser.Companion.PACKAGE_FLAGS
import dev.brahmkshatriya.echo.extensions.repo.FileRepository.Companion.getExtensionsFileDir
import dev.brahmkshatriya.echo.utils.ContextUtils.getTempFile
import dev.brahmkshatriya.echo.utils.PermsUtils.registerActivityResultLauncher
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.suspendCancellableCoroutine
import kotlinx.coroutines.withContext
import java.io.File
import kotlin.coroutines.resume

object InstallationUtils {

    suspend fun installApp(activity: FragmentActivity, file: File) {
        val contentUri = FileProvider.getUriForFile(
            activity, "${activity.packageName}.provider", file
        )
        val installIntent = Intent(Intent.ACTION_VIEW).apply {
            addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)
            addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)
            putExtra(Intent.EXTRA_NOT_UNKNOWN_SOURCE, true)
            putExtra(Intent.EXTRA_RETURN_RESULT, true)
            data = contentUri
        }
        val it = activity.waitForResult(installIntent)
        if (it.resultCode == Activity.RESULT_OK) return
        val result = it.data?.extras?.getInt("android.intent.extra.INSTALL_RESULT")
        throw Exception("Please uninstall the existing extension first. Error Code: $result")
    }

    suspend fun installFile(
        context: Context, fileIgnoreFlow: MutableSharedFlow<File?>, id: String, tempFile: File
    ) {
        val dir = context.getExtensionsFileDir()
        val newFile = File(dir, "$id.apk")
        dir.setWritable(true)
        newFile.setWritable(true)
        if (newFile.exists())
            if (!newFile.delete())
                throw IllegalStateException("Failed to delete existing file: $newFile")
        tempFile.renameTo(newFile)
        newFile.setWritable(false)
        dir.setReadOnly()
        fileIgnoreFlow.emit(null)
    }

    suspend fun FragmentActivity.openFileSelector(
        fileType: String = "application/octet-stream"
    ): File {
        val intent = Intent(Intent.ACTION_GET_CONTENT).apply {
            type = fileType
            addCategory(Intent.CATEGORY_OPENABLE)
        }
        val result = waitForResult(intent)
        val uri = result.data?.data ?: throw IllegalStateException("No file selected")
        return getTempFile(uri)
    }

    fun Context.getTempFile(uri: Uri): File {
        val stream = contentResolver.openInputStream(uri)!!
        val tempFile = getTempFile("dat")
        tempFile.outputStream().use { outputStream ->
            stream.copyTo(outputStream)
        }
        return tempFile
    }

    suspend fun uninstallApp(activity: FragmentActivity, path: String) {
        val packageName =
            activity.packageManager.getPackageArchiveInfo(path, PACKAGE_FLAGS)?.packageName
                ?: throw IllegalStateException("Invalid APK path or package name not found")
        activity.packageManager.getPackageInfo(packageName, 0)
        val intent = Intent(Intent.ACTION_DELETE).apply {
            data = "package:$packageName".toUri()
            putExtra(Intent.EXTRA_RETURN_RESULT, true)
        }
        val result = activity.waitForResult(intent)
        if (result.resultCode != Activity.RESULT_OK) {
            val errorCode = result.data?.extras?.getInt("android.intent.extra.INSTALL_RESULT")
            throw Exception("Failed to uninstall extension: $errorCode")
        }
    }

    suspend fun uninstallFile(
        fileIgnoreFlow: MutableSharedFlow<File?>, path: String
    ) = withContext(Dispatchers.IO) {
        val file = File(path)
        fileIgnoreFlow.emit(file)
        file.parentFile!!.setWritable(true)
        file.setWritable(true)
        if (file.exists() && !file.delete())
            throw IllegalStateException("Failed to delete file: $file")
        fileIgnoreFlow.emit(null)
    }

    private suspend fun FragmentActivity.waitForResult(
        intent: Intent
    ) = suspendCancellableCoroutine { cont ->
        val contract = ActivityResultContracts.StartActivityForResult()
        val launcher = registerActivityResultLauncher(contract) { cont.resume(it) }
        cont.invokeOnCancellation { launcher.unregister() }
        launcher.launch(intent)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\MediaState.kt
================================================================================

package dev.brahmkshatriya.echo.extensions

import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import kotlinx.serialization.Serializable

@Serializable
sealed interface MediaState<T : EchoMediaItem> {
    val extensionId: String
    val item: T
    val loaded: Boolean

    @Serializable
    class Loaded<T : EchoMediaItem>(
        override val extensionId: String,
        override val item: T,
        val isFollowed: Boolean?,
        val followers: Long?,
        val isSaved: Boolean?,
        val isLiked: Boolean?,
        val isHidden: Boolean?,
        val showRadio: Boolean,
        val showShare: Boolean
    ) : MediaState<T> {
        override val loaded = true
    }

    @Serializable
    data class Unloaded<T : EchoMediaItem>(
        override val extensionId: String,
        override val item: T
    ) : MediaState<T> {
        override val loaded = false
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\WebViewClientFactory.kt
================================================================================

package dev.brahmkshatriya.echo.extensions

import android.app.PendingIntent
import android.content.Context
import android.content.Intent
import dev.brahmkshatriya.echo.MainActivity.Companion.getMainActivity
import dev.brahmkshatriya.echo.common.helpers.WebViewClient
import dev.brahmkshatriya.echo.common.helpers.WebViewRequest
import dev.brahmkshatriya.echo.common.models.Metadata
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.first

class WebViewClientFactory(
    private val context: Context,
) {

    val requests = mutableMapOf<Int, Wrapper>()
    val responseFlow = MutableSharedFlow<Pair<Wrapper, Result<String?>?>>()

    suspend fun await(
        ext: Metadata, showWebView: Boolean, reason: String, request: WebViewRequest<String>,
    ): Result<String?> {
        val wrapper = Wrapper(ext, showWebView, reason, request)
        val id = wrapper.hashCode()
        requests[id] = wrapper
        startWebView(id)
        val res = responseFlow.first { it.first == wrapper && it.second != null }.second!!
        requests.remove(id)
        return res
    }

    private fun startWebView(id: Int) {
        PendingIntent.getActivity(
            context,
            0,
            Intent(context, context.getMainActivity()).apply {
                putExtra("webViewRequest", id)
            },
            PendingIntent.FLAG_IMMUTABLE or PendingIntent.FLAG_UPDATE_CURRENT,
        ).send()
    }

    fun createFor(metadata: Metadata) = object : WebViewClient {
        override suspend fun await(
            showWebView: Boolean,
            reason: String,
            request: WebViewRequest<String>,
        ): Result<String?> = await(metadata, showWebView, reason, request)
    }

    data class Wrapper(
        val extension: Metadata,
        val showWebView: Boolean,
        val reason: String,
        val request: WebViewRequest<String>,
    )

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\builtin\offline\Convertors.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.builtin.offline

import android.content.Context
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.helpers.PagedData
import dev.brahmkshatriya.echo.common.models.Album
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.Date
import dev.brahmkshatriya.echo.common.models.Date.Companion.toYearDate
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Feed.Companion.toFeed
import dev.brahmkshatriya.echo.common.models.ImageHolder.Companion.toResourceImageHolder
import dev.brahmkshatriya.echo.common.models.ImageHolder.Companion.toResourceUriImageHolder
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedExtension.Companion.EXTENSION_ID

fun MediaStoreUtils.MAlbum.toAlbum() = Album(
    id.toString(),
    title ?: "Unknown",
    null,
    cover.toString().toResourceUriImageHolder(),
    artists.map { it.toArtist() },
    songList.size.toLong(),
    songList.sumOf { it.duration ?: 0 },
    albumYear?.toYearDate(),
    extras = mapOf(EXTENSION_ID to OfflineExtension.metadata.id)
)

fun MediaStoreUtils.MArtist?.toArtist() = Artist(
    this?.id.toString(),
    this?.title ?: "Unknown",
    this?.songList?.firstOrNull()?.cover,
    extras = mapOf(EXTENSION_ID to OfflineExtension.metadata.id)
)

fun MediaStoreUtils.MPlaylist.toPlaylist() = Playlist(
    id.toString(),
    title ?: "Unknown",
    true,
    isPrivate = true,
    cover = songList.firstOrNull()?.cover,
    authors = listOf(),
    trackCount = songList.size.toLong(),
    duration = songList.sumOf { it.duration ?: 0 },
    creationDate = modifiedDate.toDate(),
    description = description,
    extras = mapOf(EXTENSION_ID to OfflineExtension.metadata.id)
)

fun Long.toDate() = Date(this)

private fun MediaStoreUtils.FileNode.toSongList(): List<Track> =
    songList + folderList.values.flatMap { it.toSongList() }

fun MediaStoreUtils.FileNode.toShelf(
    context: Context,
    title: String?
): Shelf.Category = run {
    if (folderList.size == 1 && songList.isEmpty())
        return@run folderList.entries.first()
            .run { value.toShelf(context, "${title ?: folderName}/$key") }
    val itemSize = folderList.size + songList.size
    Shelf.Category(
        folderName,
        title ?: folderName,
        PagedData.Single {
            folderList.map {
                it.value.toShelf(context, it.key)
            } + songList.map { it.toShelf() }
        }.toFeed(
            Feed.Buttons(
                showPlayAndShuffle = true,
                customTrackList = toSongList()
            ),
            songList.firstOrNull()?.cover
        ),
        context.resources.runCatching {
            getQuantityString(R.plurals.number_items, itemSize, itemSize)
        }.getOrNull() ?: context.getString(R.string.n_items, itemSize),
        image = songList.firstOrNull()?.cover ?: R.drawable.ic_offline_files.toResourceImageHolder()
    )
}

fun MediaStoreUtils.Genre.toShelf(): Shelf {
    val id = id.toString()
    return Shelf.Lists.Tracks(
        id,
        title ?: "Unknown",
        songList.take(9),
        more = PagedData.Single<Shelf> { songList.map { it.toShelf() } }.toFeed()
    )
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\builtin\offline\MediaStoreUtils.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.builtin.offline

import android.content.ContentUris
import android.content.ContentValues
import android.content.Context
import android.content.pm.PackageManager
import android.database.Cursor
import android.net.Uri
import android.os.Build
import android.provider.MediaStore
import android.util.Log
import androidx.annotation.RequiresApi
import androidx.core.database.getIntOrNull
import androidx.core.database.getLongOrNull
import androidx.core.database.getStringOrNull
import androidx.core.net.toUri
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Album
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.Date.Companion.toYearDate
import dev.brahmkshatriya.echo.common.models.ImageHolder.Companion.toResourceUriImageHolder
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.common.settings.Settings
import dev.brahmkshatriya.echo.extensions.builtin.offline.MediaStoreUtils.getAllSongs
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedExtension.Companion.EXTENSION_ID
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.withContext
import java.io.File

/**
 * Blatantly kanged from [Gramophone](https://github.com/AkaneTan/Gramophone/blob/beta/app/src/main/kotlin/org/akanework/gramophone/logic/utils/MediaStoreUtils.kt)
 */
object MediaStoreUtils {

    private const val TAG = "MediaStoreUtils"

    interface Item {
        val id: Long?
        val title: String?
        val songList: MutableSet<Track>
    }

    /**
     * [MAlbum] stores Album metadata.
     */
    interface MAlbum : Item {
        override val id: Long?
        override val title: String?
        val artists: List<MArtist?>
        val albumYear: Int?
        val cover: Uri?
        override val songList: MutableSet<Track>
    }

    data class AlbumImpl(
        override val id: Long?,
        override val title: String?,
        override val artists: List<MArtist?>,
        override val albumYear: Int?,
        override var cover: Uri?,
        override val songList: MutableSet<Track>,
    ) : MAlbum

    /**
     * [MArtist] stores Artist metadata.
     */
    data class MArtist(
        override val id: Long?,
        override val title: String?,
        override val songList: MutableSet<Track>,
        val albumList: MutableList<MAlbum>,
    ) : Item

    /**
     * [Genre] stores Genre metadata.
     */
    data class Genre(
        override val id: Long?,
        override val title: String?,
        override val songList: MutableSet<Track>,
    ) : Item

    /**
     * [Date] stores Date metadata.
     */
    data class Date(
        override val id: Long,
        override val title: String?,
        override val songList: MutableSet<Track>,
    ) : Item

    /**
     * [MPlaylist] stores playlist information.
     */
    open class MPlaylist(
        override val id: Long,
        override val title: String?,
        override val songList: MutableSet<Track>,
        val description: String?,
        val modifiedDate: Long,
    ) : Item


    /**
     * [LibraryStoreClass] collects above metadata classes
     * together for more convenient reading/writing.
     */
    @Suppress("unused")
    class LibraryStoreClass(
        val songList: MutableList<Track>,
        val albumList: MutableList<MAlbum>,
        val artistMap: MutableMap<Long?, MArtist>,
        val genreList: MutableList<Genre>,
        val dateList: MutableList<Date>,
        val playlistList: MutableList<MPlaylist>,
        val likedPlaylist: MPlaylist?,
        val folderStructure: FileNode,
        val shallowFolder: FileNode,
        val folders: Set<String>,
    )

    class FileNode(
        val folderName: String,
    ) {
        val folderList = hashMapOf<String, FileNode>()
        val songList = mutableListOf<Track>()
        var albumId: Long? = null
            private set

        fun addSong(item: Track, id: Long?) {
            if (albumId != null && id != albumId) {
                albumId = null
            } else if (albumId == null && songList.isEmpty()) {
                albumId = id
            }
            songList.add(item)
        }
    }

    private fun handleMediaFolder(path: String, rootNode: FileNode): FileNode {
        val newPath = if (path.endsWith('/')) path.substring(1, path.length - 1)
        else path.substring(1)
        val splitPath = newPath.split('/')
        var node: FileNode = rootNode
        for (fld in splitPath.subList(0, splitPath.size - 1)) {
            var newNode = node.folderList[fld]
            if (newNode == null) {
                newNode = FileNode(fld)
                node.folderList[newNode.folderName] = newNode
            }
            node = newNode
        }
        return node
    }

    private fun handleShallowTrack(
        mediaItem: Track,
        albumId: Long?,
        path: String,
        shallowFolder: FileNode,
        folderArray: MutableList<String>,
    ) {
        val newPath = if (path.endsWith('/')) path.substring(0, path.length - 1) else path
        val splitPath = newPath.split('/')
        if (splitPath.size < 2) throw IllegalArgumentException("splitPath.size < 2: $newPath")
        val lastFolderName = splitPath[splitPath.size - 2]
        var folder = shallowFolder.folderList[lastFolderName]
        if (folder == null) {
            folder = FileNode(lastFolderName)
            shallowFolder.folderList[folder.folderName] = folder
            // hack to cut off /
            folderArray.add(
                newPath.substring(0, splitPath[splitPath.size - 1].length + 1)
            )
        }
        folder.addSong(mediaItem, albumId)
    }

    private val selection = "${MediaStore.Audio.Media.IS_MUSIC} != 0" +
            listOf(
                "audio/x-wav",
                "audio/ogg",
                "audio/aac",
                "audio/midi"
            ).joinToString("") { " or ${MediaStore.Audio.Media.MIME_TYPE} = '$it'" }

    private val projection = arrayListOf(
        MediaStore.Audio.Media._ID,
        MediaStore.Audio.Media.TITLE,
        MediaStore.Audio.Media.ARTIST,
        MediaStore.Audio.Media.ARTIST_ID,
        MediaStore.Audio.Media.ALBUM,
        MediaStore.Audio.Media.ALBUM_ARTIST,
        MediaStore.Audio.Media.DATA,
        MediaStore.Audio.Media.YEAR,
        MediaStore.Audio.Media.ALBUM_ID,
        MediaStore.Audio.Media.MIME_TYPE,
        MediaStore.Audio.Media.TRACK,
        MediaStore.Audio.Media.DURATION,
        MediaStore.Audio.Media.DATE_ADDED,
        MediaStore.Audio.Media.DATE_MODIFIED
    ).apply {
        if (hasImprovedMediaStore()) {
            add(MediaStore.Audio.Media.GENRE)
            add(MediaStore.Audio.Media.GENRE_ID)
            add(MediaStore.Audio.Media.CD_TRACK_NUMBER)
            add(MediaStore.Audio.Media.COMPILATION)
            add(MediaStore.Audio.Media.DATE_TAKEN)
            add(MediaStore.Audio.Media.DISC_NUMBER)
        }
    }.toTypedArray()

    private fun playlistContent(
        context: Context,
        playlists: MutableList<Pair<MPlaylist, MutableList<Long>>>,
    ): Boolean {
        var foundPlaylistContent = false
        context.contentResolver.query(
            @Suppress("DEPRECATION") MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI,
            arrayOf(
                @Suppress("DEPRECATION") MediaStore.Audio.Playlists._ID,
                @Suppress("DEPRECATION") MediaStore.Audio.Playlists.NAME,
                @Suppress("DEPRECATION") MediaStore.Audio.Playlists.DATE_MODIFIED
            ),
            null, null, null
        )?.use {
            val playlistIdColumn = it.getColumnIndexOrThrow(
                @Suppress("DEPRECATION") MediaStore.Audio.Playlists._ID
            )
            val playlistNameColumn = it.getColumnIndexOrThrow(
                @Suppress("DEPRECATION") MediaStore.Audio.Playlists.NAME
            )
            val playlistModifiedDateColumn = it.getColumnIndexOrThrow(
                @Suppress("DEPRECATION") MediaStore.Audio.Playlists.DATE_MODIFIED
            )
            while (it.moveToNext()) {
                val playlistId = it.getLong(playlistIdColumn)
                val playlistName = it.getString(playlistNameColumn)?.ifEmpty { null }
                val modifiedDate = it.getLong(playlistModifiedDateColumn)
                val content = mutableListOf<Long>()
                context.contentResolver.query(
                    @Suppress("DEPRECATION")
                    MediaStore.Audio.Playlists.Members.getContentUri("external", playlistId),
                    arrayOf(
                        @Suppress("DEPRECATION") MediaStore.Audio.Playlists.Members.AUDIO_ID
                    ), null, null,
                    @Suppress("DEPRECATION") MediaStore.Audio.Playlists.Members.PLAY_ORDER + " ASC"
                )?.use { cursor ->
                    val column = cursor.getColumnIndexOrThrow(
                        @Suppress("DEPRECATION") MediaStore.Audio.Playlists.Members.AUDIO_ID
                    )
                    while (cursor.moveToNext()) {
                        foundPlaylistContent = true
                        content.add(cursor.getLong(column))
                    }
                }

                val playlist =
                    MPlaylist(playlistId, playlistName, mutableSetOf(), null, modifiedDate)
                playlists.add(Pair(playlist, content))
            }

        }
        return foundPlaylistContent
    }

    private fun Cursor.parseSongQuery(
        limitValue: Int,
        folderFilter: Set<String>,
        blacklistKeywords: List<String>,
        context: Context,
        songs: MutableList<Track>,
        foundPlaylistContent: Boolean,
        idMap: MutableMap<Long, Track>?,
        block: (Track) -> Unit,
    ) = use { cursor ->
        // Get columns from mediaStore.
        val idColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media._ID)
        val titleColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.TITLE)
        val artistColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.ARTIST)
        val albumColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.ALBUM)
        val albumArtistColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.ALBUM_ARTIST)
        val trackNumberColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.TRACK)
        val pathColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA)
        val yearColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.YEAR)
        val albumIdColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.ALBUM_ID)
        val genreColumn = if (hasImprovedMediaStore())
            cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.GENRE) else null
        val durationColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DURATION)
        val addDateColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATE_ADDED)

        while (cursor.moveToNext()) {
            val path = cursor.getStringOrNull(pathColumn) ?: continue
            val duration = cursor.getLongOrNull(durationColumn)
            val fldPath = File(path).parentFile?.absolutePath
            val skip = (duration != null && duration < limitValue * 1000)
                    || folderFilter.contains(fldPath)
                    || blacklistKeywords.any { fldPath?.contains(it, true) == true }
            // We need to add blacklisted songs to idMap as they can be referenced by playlist
            if (skip && !foundPlaylistContent) continue
            val id = cursor.getLongOrNull(idColumn)!!
            val title = cursor.getStringOrNull(titleColumn)!!
            val artist = cursor.getStringOrNull(artistColumn)
                .let { v -> if (v == "<unknown>") null else v }
            val albumName = cursor.getStringOrNull(albumColumn)
            val albumArtist = cursor.getStringOrNull(albumArtistColumn)
            val trackNumber = cursor.getIntOrNull(trackNumberColumn)
            val year = cursor.getIntOrNull(yearColumn).let { v -> if (v == 0) null else v }
            val albumId = cursor.getLongOrNull(albumIdColumn)
            val genre = genreColumn?.let { col -> cursor.getStringOrNull(col) }
            val addDate = cursor.getLongOrNull(addDateColumn)
            val imgUri = ContentUris.appendId(
                MediaStore.Audio.Media.EXTERNAL_CONTENT_URI.buildUpon(), id
            ).appendPath("albumart").build().takeIf { uri ->
                context.contentResolver.runCatching { openInputStream(uri)!!.close() }.isSuccess
            }

            val artists = artist.toArtists()
            val album = albumName?.let {
                Album(albumId.toString(), it, null, null, albumArtist.toArtists())
            }
            val song = Track(
                id = id.toString(),
                title = title,
                artists = artists,
                album = album,
                cover = imgUri?.toString()?.toResourceUriImageHolder(),
                duration = duration,
                releaseDate = year?.toYearDate(),
                streamables = listOf(Streamable.server(path, 0, path)),
                extras = mapOf(
                    "genre" to (genre ?: context.getString(R.string.unknown)),
                    "addDate" to addDate.toString(),
                    "trackNumber" to trackNumber.toString(),
                    EXTENSION_ID to OfflineExtension.metadata.id
                )
            )

            // Build our metadata maps/lists.
            idMap?.put(id, song)
            // Now that the song can be found by playlists, do NOT register other metadata.
            if (skip) continue
            songs.add(song)
            block(song)
        }
    }

    private val coverUri = "content://media/external/audio/albumart".toUri()

    private fun songAlbumMap(
        song: Track,
        year: Int?,
        albumMap: MutableMap<Long?, AlbumImpl>,
        artistMap: MutableMap<Long?, MArtist>,
        haveImgPerm: Boolean,
    ) {
        val album = song.album ?: return
        val id = album.id.toLong()
        albumMap.getOrPut(id) {
            val cover = if (haveImgPerm) null else ContentUris.withAppendedId(coverUri, id)
            val artists = album.artists.map {
                MArtist(it.id.toLongOrNull(), it.name, mutableSetOf(), mutableListOf())
            }

            AlbumImpl(id, album.title, artists, year, cover, mutableSetOf()).apply {
                artists.forEach {
                    val mArtist = artistMap.getOrPut(it.id) {
                        MArtist(it.id, it.title, mutableSetOf(), mutableListOf())
                    }
                    mArtist.albumList.add(this)
                }
            }
        }.songList.add(song)
    }

    private val allowedCoverExtensions = listOf("jpg", "png", "jpeg", "bmp", "tiff", "tif", "webp")

    private fun albumMapToAlbumList(
        albumMap: MutableMap<Long?, AlbumImpl>,
        coverCache: HashMap<Long, Pair<File, FileNode>>?,
    ) = albumMap.values.onEach {
        it.artists.forEach { mArtist ->
            mArtist?.albumList?.add(it)
        }
        // coverCache == null if !haveImgPerm
        coverCache?.get(it.id)?.let { p ->
            // if this is false, folder contains >1 albums
            if (p.second.albumId == it.id) {
                var bestScore = 0
                var bestFile: File? = null
                try {
                    val files = p.first.listFiles() ?: return@let
                    for (file in files) {
                        if (file.extension !in allowedCoverExtensions)
                            continue
                        var score = 1
                        when (file.extension) {
                            "jpg" -> score += 3
                            "png" -> score += 2
                            "jpeg" -> score += 1
                        }
                        if (file.nameWithoutExtension == "albumart") score += 24
                        else if (file.nameWithoutExtension == "cover") score += 20
                        else if (file.nameWithoutExtension.startsWith("albumart")) score += 16
                        else if (file.nameWithoutExtension.startsWith("cover")) score += 12
                        else if (file.nameWithoutExtension.contains("albumart")) score += 8
                        else if (file.nameWithoutExtension.contains("cover")) score += 4
                        if (bestScore < score) {
                            bestScore = score
                            bestFile = file
                        }
                    }
                } catch (e: Exception) {
                    Log.e(TAG, Log.getStackTraceString(e))
                }
                // allow .jpg or .png files with any name, but only permit more exotic
                // formats if name contains either cover or albumart
                if (bestScore >= 3) {
                    bestFile?.let { f -> it.cover = f.toUri() }
                }
            }
        }
    }.toMutableList<MAlbum>()

    /**
     * [getAllSongs] gets all of your songs from your local disk.
     *
     * @param context
     * @return
     */
    suspend fun getAllSongs(
        context: Context, settings: Settings
    ) = withContext(Dispatchers.IO) {
        val limitValueSeconds = settings.getInt("limit_value") ?: 10
        val haveImgPerm = if (hasScopedStorage()) context.hasImagePermission() else false
        val folderFilter = settings.getStringSet("blacklist_folders") ?: setOf()
        val blacklistKeywords = settings.getString("blacklist_keywords")?.split(',')
            ?.mapNotNull { it.trim().takeIf { s -> s.isNotBlank() } }.orEmpty()
        // Initialize list and maps.
        val coverCache = if (haveImgPerm) hashMapOf<Long, Pair<File, FileNode>>() else null
        val folders = hashSetOf<String>()
        val folderArray = mutableListOf<String>()
        val root = FileNode("storage")
        val shallowRoot = FileNode("shallow")
        val songs = mutableListOf<Track>()
        val albumMap = mutableMapOf<Long?, AlbumImpl>()
        val artistMap = mutableMapOf<Long?, MArtist>()
        val albumArtistMap =
            hashMapOf<MArtist?, Pair<MutableSet<MAlbum>, MutableSet<Track>>>()

        val genreMap = hashMapOf<String?, Genre>()
        val dateMap = hashMapOf<Int?, Date>()
        val playlists = mutableListOf<Pair<MPlaylist, MutableList<Long>>>()
        val foundPlaylistContent =
            runCatching { playlistContent(context, playlists) }.getOrNull() ?: false
        val idMap = hashMapOf<Long, Track>()
        val uri = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q)
            MediaStore.Audio.Media.getContentUri(MediaStore.VOLUME_EXTERNAL)
        else MediaStore.Audio.Media.EXTERNAL_CONTENT_URI
        val cursor = context.contentResolver.query(
            uri, projection, selection, null,
            MediaStore.Audio.Media.TITLE + " COLLATE UNICODE ASC",
        )
        cursor?.parseSongQuery(
            limitValueSeconds,
            folderFilter,
            blacklistKeywords,
            context,
            songs,
            foundPlaylistContent,
            idMap,
        ) { song ->
            song.artists.map {
                val id = it.id.toLongOrNull()
                val mArtist = artistMap.getOrPut(id) {
                    MArtist(id, it.name, mutableSetOf(), mutableListOf())
                }
                mArtist.songList.add(song)
                mArtist
            }

            val year = song.releaseDate?.year
            songAlbumMap(song, year, albumMap, artistMap, haveImgPerm)

            val albumId = song.album?.id?.toLong()
            val path = song.streamables.first().id
            val parent = File(path).parentFile
            parent?.absolutePath?.let { folders.add(it) }

            val fn = handleMediaFolder(path, root)
            fn.addSong(song, song.album?.id?.toLong())
            if (albumId != null && parent != null) {
                coverCache?.putIfAbsent(albumId, Pair(parent, fn))
            }
            handleShallowTrack(song, albumId, path, shallowRoot, folderArray)

            val genre = song.extras["genre"] ?: "Unknown"
            genreMap.getOrPut(genre) {
                Genre(genre.id(), genre, mutableSetOf())
            }.songList.add(song)

            dateMap.getOrPut(year) {
                Date(year?.toLong() ?: 0, year?.toString(), mutableSetOf())
            }.songList.add(song)
        }

        // Parse all the lists.
        val albumList = albumMapToAlbumList(albumMap, coverCache)
        albumArtistMap.entries.forEach { (artist, pair) ->
            val albums = pair.first
            val song = pair.second
            MArtist(artist?.id, artist?.title, song, albums.toMutableList())
        }
        val genreList = genreMap.values.toMutableList()
        val dateList = dateMap.values.toMutableList()

        val playlistsFinal = playlists.map {
            it.first.also { playlist ->
                playlist.songList.addAll(it.second.map { value ->
                    idMap[value] ?: dummyTrack(value, "Unknown [$value]")
                })
            }
        }.toMutableList()

        val likedPlaylist = getLikedPlaylist(context, playlistsFinal)
        likedPlaylist?.let { playlistsFinal.add(0, it) }

        folders.addAll(folderFilter)
        LibraryStoreClass(
            songs, albumList, artistMap, genreList, dateList, playlistsFinal,
            likedPlaylist, root, shallowRoot, folders
        )
    }

    private fun getLikedPlaylist(
        context: Context,
        playlistsFinal: MutableList<MPlaylist>,
    ) = run {
        val liked = playlistsFinal.find { it.title == "Liked" }
        val id = liked?.id ?: context.createPlaylist("Liked")
        liked?.let { playlistsFinal.remove(it) }
        MPlaylist(
            id ?: return@run null,
            context.getString(R.string.playlist_liked),
            liked?.songList ?: mutableSetOf(),
            context.getString(R.string.playlist_liked_desc),
            liked?.modifiedDate ?: (System.currentTimeMillis() / 1000L)
        )
    }

    private fun dummyTrack(id: Long, title: String): Track {
        return Track(id.toString(), title)
    }

    @RequiresApi(Build.VERSION_CODES.TIRAMISU)
    fun Context.hasImagePermission() =
        checkSelfPermission(android.Manifest.permission.READ_MEDIA_IMAGES) ==
                PackageManager.PERMISSION_GRANTED

    private fun hasImprovedMediaStore(): Boolean =
        Build.VERSION.SDK_INT >= Build.VERSION_CODES.R

    private fun hasScopedStorage(): Boolean =
        Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU

    fun Context.createPlaylist(title: String): Long? {
        val values = ContentValues()
        values.put(
            @Suppress("DEPRECATION") MediaStore.Audio.Playlists.NAME,
            title
        )
        return contentResolver.insert(
            @Suppress("DEPRECATION")
            MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI,
            values
        )?.lastPathSegment?.toLong()
    }

    fun Context.editPlaylist(id: Long, title: String) {
        val values = ContentValues()
        values.put(
            @Suppress("DEPRECATION") MediaStore.Audio.Playlists.NAME,
            title
        )
        contentResolver.update(
            @Suppress("DEPRECATION")
            MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI,
            values,
            @Suppress("DEPRECATION")
            MediaStore.Audio.Playlists._ID + "=?",
            arrayOf(id.toString())
        )
    }

    fun Context.deletePlaylist(id: Long) {
        contentResolver.delete(
            @Suppress("DEPRECATION")
            MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI,
            @Suppress("DEPRECATION") MediaStore.Audio.Playlists._ID + "=?",
            arrayOf(id.toString())
        )
    }

    fun Context.addSongToPlaylist(playlistId: Long, songId: Long, index: Int) {
        val values = ContentValues()
        values.put(
            @Suppress("DEPRECATION") MediaStore.Audio.Playlists.Members.PLAY_ORDER,
            index + 1
        )
        values.put(
            @Suppress("DEPRECATION") MediaStore.Audio.Playlists.Members.AUDIO_ID,
            songId
        )
        contentResolver.insert(
            @Suppress("DEPRECATION")
            MediaStore.Audio.Playlists.Members.getContentUri("external", playlistId),
            values
        )
    }

    fun Context.removeSongFromPlaylist(playlistId: Long, index: Int) {
        contentResolver.delete(
            @Suppress("DEPRECATION")
            MediaStore.Audio.Playlists.Members.getContentUri("external", playlistId),
            @Suppress("DEPRECATION") MediaStore.Audio.Playlists.Members.PLAY_ORDER + "=?",
            arrayOf((index + 1).toString())
        )
    }

    fun Context.moveSongInPlaylist(playlistId: Long, song: Long, from: Int, to: Int) {
        removeSongFromPlaylist(playlistId, from)
        addSongToPlaylist(playlistId, song, to)
    }

    fun <E> List<E>.searchBy(query: String, block: (E) -> List<String?>) = map { item ->
        val qLower = query.lowercase().split(" ").ifEmpty { return@map 5 to item }
        val titles = block(item).flatMap {
            it?.split(" ") ?: listOf()
        }.mapNotNull {
            it.takeIf { it.isNotBlank() }?.lowercase()
        }.ifEmpty { return@map 5 to item }
        val selected = titles.map { t ->
            val distance = qLower.sumOf {
                val distance = wagnerFischer(t, it)
                val bonus = if (t.contains(it)) -t.length else 0
                distance + bonus
            } / qLower.size
            distance to t
        }.minBy { it.first }
        selected.first to item
    }.filter { it.first <= 3 }.sortedBy { it.first }

    // taken from https://gist.github.com/jmarchesini/e330088e03daa394cf03ddedb8956fbe
    private fun wagnerFischer(s: String, t: String): Int {
        val m = s.length
        val n = t.length

        if (s == t) return 0
        if (s.isEmpty()) return n
        if (t.isEmpty()) return m

        val d = Array(m + 1) { IntArray(n + 1) }

        for (i in 1..m) {
            d[i][0] = i
        }

        for (j in 1..n) {
            d[0][j] = j
        }

        for (j in 1..n) {
            for (i in 1..m) {
                val cost = if (s[i - 1] == t[j - 1]) 0 else 1
                val delCost = d[i - 1][j] + 1
                val addCost = d[i][j - 1] + 1
                val subCost = d[i - 1][j - 1] + cost

                d[i][j] = minOf(delCost, addCost, subCost)
            }
        }
        return d[m][n]
    }

    private fun String?.splitArtists() = this?.split(",", "&", " and ")
        ?.mapNotNull { it.trim().takeIf { s -> s.isNotBlank() } }
        ?: listOf(null)

    private fun String?.toArtists() = takeIf { this != "null" }.splitArtists().map {
        Artist(it?.id().toString(), it ?: "Unknown")
    }

    fun String.id() = this.lowercase().hashCode().toLong()
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\builtin\offline\OfflineExtension.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.builtin.offline

import android.content.Context
import android.net.Uri
import androidx.annotation.OptIn
import androidx.media3.common.util.UnstableApi
import dev.brahmkshatriya.echo.BuildConfig
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.clients.AlbumClient
import dev.brahmkshatriya.echo.common.clients.ArtistClient
import dev.brahmkshatriya.echo.common.clients.ExtensionClient
import dev.brahmkshatriya.echo.common.clients.HomeFeedClient
import dev.brahmkshatriya.echo.common.clients.LibraryFeedClient
import dev.brahmkshatriya.echo.common.clients.LikeClient
import dev.brahmkshatriya.echo.common.clients.PlaylistClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditorListenerClient
import dev.brahmkshatriya.echo.common.clients.RadioClient
import dev.brahmkshatriya.echo.common.clients.SearchFeedClient
import dev.brahmkshatriya.echo.common.clients.SettingsChangeListenerClient
import dev.brahmkshatriya.echo.common.clients.TrackClient
import dev.brahmkshatriya.echo.common.helpers.ClientException
import dev.brahmkshatriya.echo.common.helpers.PagedData
import dev.brahmkshatriya.echo.common.models.Album
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Feed.Companion.loadAll
import dev.brahmkshatriya.echo.common.models.Feed.Companion.toFeed
import dev.brahmkshatriya.echo.common.models.Feed.Companion.toFeedData
import dev.brahmkshatriya.echo.common.models.ImageHolder.Companion.toResourceImageHolder
import dev.brahmkshatriya.echo.common.models.ImportType
import dev.brahmkshatriya.echo.common.models.Metadata
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Radio
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.common.models.Streamable.Media.Companion.toMedia
import dev.brahmkshatriya.echo.common.models.Streamable.Source.Companion.toSource
import dev.brahmkshatriya.echo.common.models.Tab
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.common.settings.Setting
import dev.brahmkshatriya.echo.common.settings.SettingMultipleChoice
import dev.brahmkshatriya.echo.common.settings.SettingSlider
import dev.brahmkshatriya.echo.common.settings.SettingSwitch
import dev.brahmkshatriya.echo.common.settings.SettingTextInput
import dev.brahmkshatriya.echo.common.settings.Settings
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getSettings
import dev.brahmkshatriya.echo.extensions.builtin.offline.MediaStoreUtils.addSongToPlaylist
import dev.brahmkshatriya.echo.extensions.builtin.offline.MediaStoreUtils.createPlaylist
import dev.brahmkshatriya.echo.extensions.builtin.offline.MediaStoreUtils.deletePlaylist
import dev.brahmkshatriya.echo.extensions.builtin.offline.MediaStoreUtils.editPlaylist
import dev.brahmkshatriya.echo.extensions.builtin.offline.MediaStoreUtils.moveSongInPlaylist
import dev.brahmkshatriya.echo.extensions.builtin.offline.MediaStoreUtils.removeSongFromPlaylist
import dev.brahmkshatriya.echo.extensions.builtin.offline.MediaStoreUtils.searchBy
import dev.brahmkshatriya.echo.utils.Serializer.toData
import dev.brahmkshatriya.echo.utils.Serializer.toJson
import kotlinx.coroutines.sync.Mutex
import kotlinx.coroutines.sync.withLock
import java.io.File

@OptIn(UnstableApi::class)
class OfflineExtension(
    private val context: Context,
) : ExtensionClient, HomeFeedClient, TrackClient, AlbumClient, ArtistClient, PlaylistClient,
    RadioClient, LibraryFeedClient, LikeClient, PlaylistEditorListenerClient,
    SearchFeedClient, SettingsChangeListenerClient {

    companion object {
        val metadata = Metadata(
            className = "OfflineExtension",
            path = "",
            importType = ImportType.BuiltIn,
            type = ExtensionType.MUSIC,
            id = "echo-offline",
            name = "Offline",
            description = "An extension for all your downloaded files.",
            version = "v${BuildConfig.VERSION_CODE}",
            author = "Echo",
            icon = R.drawable.ic_offline.toResourceImageHolder(),
        )
    }

    override suspend fun onSettingsChanged(settings: Settings, key: String?) {
        refreshLibrary()
    }

    override suspend fun getSettingItems(): List<Setting> {
        val folders = getLibrary().folders
        return listOf(
            SettingSwitch(
                context.getString(R.string.refresh_library_on_reload),
                "refresh_library",
                context.getString(R.string.refresh_library_on_reload_summary),
                false
            ),
            SettingSlider(
                context.getString(R.string.duration_filter),
                "limit_value",
                context.getString(R.string.duration_filter_summary),
                10,
                0,
                120,
                10
            ),
            SettingMultipleChoice(
                context.getString(R.string.blacklist_folders),
                "blacklist_folders",
                context.getString(R.string.blacklist_folders_summary),
                folders.toList(),
                folders.toList()
            ),
            SettingTextInput(
                context.getString(R.string.blacklist_folder_keywords),
                "blacklist_keywords",
                context.getString(R.string.blacklist_folder_keywords_summary)
            )
        )
    }

    private val settings = getSettings(context, metadata)
    override fun setSettings(settings: Settings) {}
    private val refreshLibrary
        get() = settings.getBoolean("refresh_library") ?: true

    private val mutex = Mutex()
    private var _library: MediaStoreUtils.LibraryStoreClass? = null
    private suspend fun getLibrary() = mutex.withLock {
        if (_library == null) _library = MediaStoreUtils.getAllSongs(context, settings)
        _library!!
    }

    private suspend fun refreshLibrary() {
        _library = MediaStoreUtils.getAllSongs(context, settings)
    }

    private suspend fun find(artist: Artist) =
        getLibrary().artistMap[artist.id.toLongOrNull()]

    private suspend fun find(album: Album) =
        getLibrary().albumList.find { it.id == album.id.toLong() }

    private suspend fun find(playlist: Playlist) =
        getLibrary().playlistList.find { it.id == playlist.id.toLong() }

    private fun List<EchoMediaItem>.toShelves(buttons: Feed.Buttons? = null): Feed<Shelf> =
        map { it.toShelf() }.toFeed(buttons)

    override suspend fun loadHomeFeed() = Feed(listOf()) {
        if (refreshLibrary) refreshLibrary()
        val library = getLibrary()
        val recentlyAdded = library.songList.sortedByDescending {
            it.extras["addDate"]?.toLongOrNull()
        }.map { it }
        val albums = library.albumList.map {
            it.toAlbum()
        }.shuffled()
        val artists = library.artistMap.values.map {
            it.toArtist()
        }.shuffled()

        val recent = if (recentlyAdded.isNotEmpty()) Shelf.Lists.Tracks(
            "recents",
            context.getString(R.string.recently_added),
            recentlyAdded.take(9),
            more = recentlyAdded.toShelves().takeIf { recentlyAdded.size > 9 }
        ) else null

        val albumShelf = if (albums.isNotEmpty()) Shelf.Lists.Items(
            "albums",
            context.getString(R.string.albums),
            albums.take(10),
            more = albums.toShelves().takeIf { albums.size > 10 }
        ) else null

        val artistsShelf = if (artists.isNotEmpty()) Shelf.Lists.Items(
            "artists",
            context.getString(R.string.artists),
            artists.take(10),
            more = artists.toShelves().takeIf { artists.size > 10 }
        ) else null

        val data = PagedData.Single {
            listOfNotNull(recent, albumShelf, artistsShelf) + library.songList.map { it.toShelf() }
        }
        data.toFeedData(
            Feed.Buttons(
                showSearch = false, showSort = true, showPlayAndShuffle = true
            )
        )
    }

    override suspend fun loadTrack(track: Track, isDownload: Boolean): Track = track

    override suspend fun loadStreamableMedia(streamable: Streamable, isDownload: Boolean) =
        Uri.fromFile(File(streamable.id)).toString().toSource(isLive = false).toMedia()

    override suspend fun loadFeed(track: Track): Feed<Shelf>? = null

    override suspend fun loadAlbum(album: Album) =
        find(album)!!.toAlbum()

    override suspend fun loadTracks(album: Album): Feed<Track> = PagedData.Single {
        find(album)!!.songList.sortedBy { it.extras["trackNumber"]?.toLongOrNull() }.map { it }
    }.toFeed()

    override suspend fun loadFeed(album: Album) =
        getArtistsWithCategories(album.artists) { it.album?.id != album.id }

    private suspend fun getArtistsWithCategories(
        artists: List<Artist>, filter: (Track) -> Boolean,
    ) = artists.map { small ->
        val artist = find(small)
        val category = artist?.songList?.filter {
            filter(it)
        }?.map { it }?.ifEmpty { null }?.let { tracks ->
            Shelf.Lists.Items(
                small.id,
                context.getString(R.string.more_by_x, small.name),
                tracks,
                more = tracks.toShelves()
            )
        }
        listOfNotNull(artist.toArtist().toShelf(), category)
    }.flatten().toFeed()

    override suspend fun loadArtist(artist: Artist) =
        find(artist)!!.toArtist()

    override suspend fun loadFeed(artist: Artist): Feed<Shelf> {
        return find(artist)!!.run {
            val tracks = songList.ifEmpty { null }?.toList()
            val albums = albumList.map { it.toAlbum() }.ifEmpty { null }
            listOfNotNull(
                tracks?.let {
                    val id = "${artist.id}_tracks"
                    listOf(
                        Shelf.Lists.Items(
                            id,
                            context.getString(R.string.songs) + " (${it.size})",
                            listOf(),
                            more = tracks.toShelves().takeIf { tracks.size >= 10 }
                        )
                    )
                },
                tracks?.take(10)?.map { it.toShelf() },
                albums?.let {
                    val id = "${artist.id}_albums"
                    listOf(
                        Shelf.Lists.Items(
                            id,
                            context.getString(R.string.albums) + " (${it.size})",
                            it,
                            more = albums.toShelves().takeIf { albums.size >= 4 }
                        )
                    )
                }
            ).flatten().toFeed(Feed.Buttons(showPlayAndShuffle = true, customTrackList = tracks))
        }
    }

    override suspend fun loadPlaylist(playlist: Playlist) =
        if (playlist.id == "cached") playlist else find(playlist)!!.toPlaylist()

    override suspend fun loadTracks(playlist: Playlist): Feed<Track> = PagedData.Single {
        find(playlist)!!.songList.map { it }
    }.toFeed()

    override suspend fun loadFeed(playlist: Playlist): Feed<Shelf>? = null

    override suspend fun loadRadio(radio: Radio) = radio

    override suspend fun loadTracks(radio: Radio): Feed<Track> = PagedData.Single {
        val mediaItem = radio.extras["mediaItem"]!!.toData<EchoMediaItem>().getOrThrow()
        val library = getLibrary()
        when (mediaItem) {
            is Album -> {
                val tracks = loadTracks(mediaItem).loadAll().asSequence()
                    .map { it.artists }.flatten().map { artist ->
                        library.artistMap[artist.id.toLongOrNull()]?.songList?.map { it }!!
                    }.flatten().filter { it.album?.id != mediaItem.id }.take(25)

                val randomTracks = library.songList.shuffled().take(25).map { it }
                (tracks + randomTracks).distinctBy { it.id }.toMutableList()
            }

            is Playlist -> {
                val tracks = loadTracks(mediaItem).loadAll()
                val randomTracks = getLibrary().songList.shuffled().take(25).map { it }
                (tracks + randomTracks).distinctBy { it.id }.toMutableList()
            }

            is Artist -> {
                val tracks = find(mediaItem)?.songList?.map { it } ?: emptyList()
                val randomTracks = getLibrary().songList.shuffled().take(25).map { it }
                (tracks + randomTracks).distinctBy { it.id }.toMutableList()
            }

            is Track -> {
                val albumTracks = mediaItem.album?.let { loadTracks(loadAlbum(it)).loadAll() }
                val artistTracks = mediaItem.artists.map { artist ->
                    find(artist)?.songList ?: emptyList()
                }.flatten().map { it }
                val randomTracks = getLibrary().songList.shuffled().take(25).map { it }
                val allTracks =
                    listOfNotNull(albumTracks, artistTracks, randomTracks).flatten()
                        .distinctBy { it.id }
                        .toMutableList()
                allTracks.removeIf { it.id == mediaItem.id }
                allTracks
            }

            else -> throw IllegalAccessException()
        }.shuffled()
    }.toFeed()

    override suspend fun radio(item: EchoMediaItem, context: EchoMediaItem?): Radio {
        val id = "radio_${item.hashCode()}"
        val title = item.title
        return Radio(
            id = id,
            title = this.context.getString(R.string.x_radio, title),
            extras = mapOf("mediaItem" to item.toJson())
        )
    }

    private fun List<EchoMediaItem>.sorted() =
        sortedBy { it.title.lowercase() }.map { it.toShelf() }

    private fun List<Shelf>.toPair(buttons: Feed.Buttons? = null) =
        PagedData.Single { this }.toFeedData(buttons)

    private fun Pair<List<Shelf>, Boolean>.toFeed() =
        first.toPair(if (second) Feed.Buttons(false, showSort = true) else null)

    override suspend fun loadSearchFeed(query: String) = Feed(
        (if (query.isBlank()) listOf("Songs", "Albums", "Artists", "Genres")
        else listOf("All", "Songs", "Albums", "Artists")).map { Tab(it, it) }
    ) { tab ->
        if (query.isBlank()) {
            if (refreshLibrary) refreshLibrary()
            when (tab?.id) {
                "Albums" -> getLibrary().albumList.map { it.toAlbum() }.sorted().toPair(
                    Feed.Buttons(showSearch = false, showSort = true)
                )

                "Artists" -> getLibrary().artistMap.values.map { it.toArtist() }.sorted().toPair(
                    Feed.Buttons(showSearch = false, showSort = true)
                )

                "Genres" -> getLibrary().genreList.map { it.toShelf() }.toPair()
                else -> getLibrary().songList.sortedByDescending {
                    it.extras["addDate"]?.toLongOrNull()
                }.map { it.toShelf() }.toPair(
                    Feed.Buttons(
                        showSearch = false, showSort = true, showPlayAndShuffle = true
                    )
                )
            }
        } else {
            val tracks = getLibrary().songList.map { it }.searchBy(query) {
                listOf(it.title, it.album?.title) + it.artists.map { artist -> artist.name }
            }
            val albums = getLibrary().albumList.map { it.toAlbum() }.searchBy(query) {
                listOf(it.title) + it.artists.map { artist -> artist.name }
            }
            val artists = getLibrary().artistMap.values.map { it.toArtist() }.searchBy(query) {
                listOf(it.name)
            }

            when (tab?.id) {
                "Songs" -> tracks.map { it.second.toShelf() } to true
                "Albums" -> albums.map { it.second.toShelf() } to true
                "Artists" -> artists.map { it.second.toShelf() } to true
                else -> {
                    val items = listOf(
                        "Songs" to tracks, "Albums" to albums, "Artist" to artists
                    ).sortedBy { it.second.firstOrNull()?.first ?: 20 }
                        .map { it.first to it.second.map { pair -> pair.second } }
                        .filter { it.second.isNotEmpty() }

                    val exactMatch = items.firstNotNullOfOrNull {
                        it.second.find { item -> item.title.contains(query, true) }
                    }?.toShelf()

                    val containers = items.map { (title, items) ->
                        val id = "${query}_$title"
                        Shelf.Lists.Items(id, title, items, more = items.toShelves())
                    }

                    listOf(listOfNotNull(exactMatch), containers).flatten() to false
                }
            }.toFeed()
        }
    }

    override suspend fun loadLibraryFeed() = Feed(
        listOf("Playlists", "Folders").map { Tab(it, it) }
    ) { tab ->
        if (refreshLibrary) refreshLibrary()
        val pagedData: PagedData<Shelf> = when (tab?.id) {
            "Folders" -> getLibrary().folderStructure.folderList.entries.firstOrNull()?.value
                ?.toShelf(context, null)?.feed?.getPagedData?.invoke(null)?.pagedData
                ?: PagedData.Single { listOf() }

            else -> PagedData.Single {
                getLibrary().playlistList.map { it.toPlaylist().toShelf() }
            }
        }
        pagedData.toFeedData(Feed.Buttons())
    }

    override suspend fun listEditablePlaylists(track: Track?) = getLibrary().playlistList.map {
        val has = it.songList.any { song -> song.id == track?.id }
        it.toPlaylist() to has
    }

    override suspend fun likeItem(item: EchoMediaItem, shouldLike: Boolean) {
        val library = getLibrary()
        val playlist = library.likedPlaylist?.id
            ?: throw ClientException.NotSupported("Couldn't create Liked Playlist")
        if (shouldLike) context.addSongToPlaylist(playlist, item.id.toLong(), 0)
        else {
            val index = library.likedPlaylist.songList.indexOfFirst { it.id == item.id }
            context.removeSongFromPlaylist(playlist, index)
        }
        refreshLibrary()
    }

    override suspend fun isItemLiked(item: EchoMediaItem) =
        getLibrary().likedPlaylist?.songList?.find { it.id == item.id } != null

    override suspend fun createPlaylist(title: String, description: String?): Playlist {
        val id = context.createPlaylist(title)
        refreshLibrary()
        return getLibrary().playlistList.find { it.id == id }!!.toPlaylist()
    }

    override suspend fun deletePlaylist(playlist: Playlist) {
        context.deletePlaylist(playlist.id.toLong())
        refreshLibrary()
    }

    override suspend fun editPlaylistMetadata(
        playlist: Playlist, title: String, description: String?,
    ) {
        context.editPlaylist(playlist.id.toLong(), title)
    }

    override suspend fun addTracksToPlaylist(
        playlist: Playlist, tracks: List<Track>, index: Int, new: List<Track>,
    ) {
        new.forEach {
            context.addSongToPlaylist(playlist.id.toLong(), it.id.toLong(), index)
        }
    }

    override suspend fun removeTracksFromPlaylist(
        playlist: Playlist, tracks: List<Track>, indexes: List<Int>,
    ) {
        indexes.forEach { index ->
            context.removeSongFromPlaylist(playlist.id.toLong(), index)
        }
    }

    override suspend fun moveTrackInPlaylist(
        playlist: Playlist, tracks: List<Track>, fromIndex: Int, toIndex: Int,
    ) {
        val song = tracks[fromIndex].id.toLong()
        context.moveSongInPlaylist(playlist.id.toLong(), song, fromIndex, toIndex)
    }

    override suspend fun onEnterPlaylistEditor(playlist: Playlist, tracks: List<Track>) {}
    override suspend fun onExitPlaylistEditor(playlist: Playlist, tracks: List<Track>) {
        refreshLibrary()
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\builtin\test\DownloadExtension.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.builtin.test

import android.content.Context
import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.clients.AlbumClient
import dev.brahmkshatriya.echo.common.clients.DownloadClient
import dev.brahmkshatriya.echo.common.clients.PlaylistClient
import dev.brahmkshatriya.echo.common.clients.RadioClient
import dev.brahmkshatriya.echo.common.models.Album
import dev.brahmkshatriya.echo.common.models.DownloadContext
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.Feed.Companion.loadAll
import dev.brahmkshatriya.echo.common.models.ImportType
import dev.brahmkshatriya.echo.common.models.Metadata
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Progress
import dev.brahmkshatriya.echo.common.models.Radio
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.common.providers.MusicExtensionsProvider
import dev.brahmkshatriya.echo.common.settings.Setting
import dev.brahmkshatriya.echo.common.settings.Settings
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getAs
import kotlinx.coroutines.delay
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import java.io.File

class DownloadExtension(
    val context: Context
) : DownloadClient, MusicExtensionsProvider {

    companion object {
        val metadata = Metadata(
            "DownloadExtension",
            "",
            ImportType.BuiltIn,
            ExtensionType.MISC,
            "test_download",
            "Test Download Extension",
            "1.0.0",
            "Test extension for download testing",
            "Test",
        )
    }

    override val concurrentDownloads = 2

    override suspend fun selectServer(context: DownloadContext): Streamable {
        return context.track.servers.first()
    }

    override suspend fun selectSources(
        context: DownloadContext, server: Streamable.Media.Server
    ): List<Streamable.Source> {
        return server.sources
    }

    override suspend fun download(
        progressFlow: MutableStateFlow<Progress>,
        context: DownloadContext,
        source: Streamable.Source
    ) = test(progressFlow, "Downloading", 10000)

    override suspend fun merge(
        progressFlow: MutableStateFlow<Progress>,
        context: DownloadContext,
        files: List<File>
    ) = test(progressFlow, "Merging", 5000)

    override suspend fun tag(
        progressFlow: MutableStateFlow<Progress>,
        context: DownloadContext,
        file: File
    ) = test(progressFlow, "Tagging", 2000)

    override suspend fun getDownloadTracks(
        extensionId: String,
        item: EchoMediaItem,
        context: EchoMediaItem?
    ): List<DownloadContext> {
        return when (item) {
            is Track -> listOf(DownloadContext(extensionId, item))
            is EchoMediaItem.Lists -> {
                val ext = exts.first { it.id == extensionId }
                val tracks = when (item) {
                    is Album -> ext.getAs<AlbumClient, List<Track>> {
                        val album = loadAlbum(item)
                        val tracks = loadTracks(album)!!.loadAll()
                        tracks
                    }

                    is Playlist -> ext.getAs<PlaylistClient, List<Track>> {
                        val album = loadPlaylist(item)
                        val tracks = loadTracks(album).loadAll()
                        tracks
                    }

                    is Radio -> ext.getAs<RadioClient, List<Track>> {
                        val radio = loadRadio(item)
                        loadTracks(radio).loadAll()
                    }

                }.getOrThrow()
                tracks.mapIndexed { index, track ->
                    DownloadContext(extensionId, track, index, item)
                }
            }

            else -> listOf()
        }
    }

    private suspend fun test(
        progressFlow: MutableSharedFlow<Progress>,
        type: String,
        crash: Long
    ): File {
        progressFlow.emit(Progress(crash, 0))
        var it = 0L
        while (it < crash) {
            delay(1)
            progressFlow.emit(Progress(crash, it))
            it++
        }
        if (type == "Tagging") throw Exception("Test exception in $type")
        return this.context.cacheDir
    }

    override suspend fun getSettingItems() = listOf<Setting>()
    override fun setSettings(settings: Settings) {}
    override val requiredMusicExtensions = listOf<String>()

    private lateinit var exts: List<MusicExtension>
    override fun setMusicExtensions(extensions: List<MusicExtension>) {
        exts = extensions
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\builtin\test\TestExtension.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.builtin.test

import dev.brahmkshatriya.echo.common.clients.ArtistClient
import dev.brahmkshatriya.echo.common.clients.ExtensionClient
import dev.brahmkshatriya.echo.common.clients.FollowClient
import dev.brahmkshatriya.echo.common.clients.HideClient
import dev.brahmkshatriya.echo.common.clients.HomeFeedClient
import dev.brahmkshatriya.echo.common.clients.LibraryFeedClient
import dev.brahmkshatriya.echo.common.clients.LikeClient
import dev.brahmkshatriya.echo.common.clients.LoginClient
import dev.brahmkshatriya.echo.common.clients.LoginClient.InputField
import dev.brahmkshatriya.echo.common.clients.LyricsSearchClient
import dev.brahmkshatriya.echo.common.clients.RadioClient
import dev.brahmkshatriya.echo.common.clients.SaveClient
import dev.brahmkshatriya.echo.common.clients.ShareClient
import dev.brahmkshatriya.echo.common.clients.TrackClient
import dev.brahmkshatriya.echo.common.clients.TrackerMarkClient
import dev.brahmkshatriya.echo.common.helpers.ContinuationCallback.Companion.await
import dev.brahmkshatriya.echo.common.helpers.PagedData
import dev.brahmkshatriya.echo.common.helpers.WebViewClient
import dev.brahmkshatriya.echo.common.helpers.WebViewRequest
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Feed.Companion.toFeed
import dev.brahmkshatriya.echo.common.models.Feed.Companion.toFeedData
import dev.brahmkshatriya.echo.common.models.ImageHolder.Companion.toImageHolder
import dev.brahmkshatriya.echo.common.models.ImportType
import dev.brahmkshatriya.echo.common.models.Lyrics
import dev.brahmkshatriya.echo.common.models.Metadata
import dev.brahmkshatriya.echo.common.models.NetworkRequest
import dev.brahmkshatriya.echo.common.models.NetworkRequest.Companion.toGetRequest
import dev.brahmkshatriya.echo.common.models.Radio
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.common.models.Streamable.Media.Companion.toBackgroundMedia
import dev.brahmkshatriya.echo.common.models.Streamable.Media.Companion.toServerMedia
import dev.brahmkshatriya.echo.common.models.Streamable.Media.Companion.toSubtitleMedia
import dev.brahmkshatriya.echo.common.models.Streamable.Source.Companion.toSource
import dev.brahmkshatriya.echo.common.models.Tab
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.common.models.TrackDetails
import dev.brahmkshatriya.echo.common.models.User
import dev.brahmkshatriya.echo.common.providers.WebViewClientProvider
import dev.brahmkshatriya.echo.common.settings.Setting
import dev.brahmkshatriya.echo.common.settings.Settings
import kotlinx.coroutines.delay
import okhttp3.OkHttpClient
import okhttp3.Request
import kotlin.random.Random

@Suppress("unused")
class TestExtension : ExtensionClient, LoginClient.CustomInput, TrackClient, LoginClient.WebView,
    HomeFeedClient, FollowClient, RadioClient, WebViewClientProvider, ArtistClient,
    LyricsSearchClient, LibraryFeedClient,
    SaveClient, LikeClient, HideClient, TrackerMarkClient, ShareClient {

    companion object {
        val metadata = Metadata(
            "TestExtension",
            "",
            ImportType.BuiltIn,
            ExtensionType.MUSIC,
            "test",
            "Test Extension",
            "1.0.0",
            "Test extension for offline testing",
            "Test",
            icon = "https://yt3.googleusercontent.com/UMGZZMPQkM3kGtyW4jNE1GtpSrydfNJdbG1UyWTp5zeqUYc6-rton70Imm7B11RulRRuK521NQ=s160-c-k-c0x00ffffff-no-rj".toImageHolder()
        )

        const val FUN =
            "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerFun.mp4"

        const val BUNNY =
            "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"

        const val M3U8 =
            "https://fl3.moveonjoy.com/CNBC/index.m3u8"

        const val SUBTITLE =
            "https://raw.githubusercontent.com/brenopolanski/html5-video-webvtt-example/master/MIB2-subtitles-pt-BR.vtt"

        private fun createTrack(id: String, title: String, streamables: List<Streamable>) = Track(
            id,
            title,
            cover = "https://picsum.photos/seed/$id/300".toImageHolder(),
            isExplicit = Random.nextBoolean(),
            streamables = streamables
        ).toShelf()
    }

    override suspend fun getSettingItems() = listOf<Setting>()
    override fun setSettings(settings: Settings) {}

    override val forms = listOf(
        LoginClient.Form(
            "bruh",
            "Test Form",
            InputField.Type.Username,
            listOf(
                InputField(InputField.Type.Username, "name", "Name", true),
                InputField(InputField.Type.Password, "password", "Password", false),
                InputField(InputField.Type.Email, "email", "EMail", false),
                InputField(InputField.Type.Misc, "text", "Text", false),
                InputField(InputField.Type.Number, "number", "Number", false),
                InputField(InputField.Type.Url, "url", "Url", false),
            )
        )
    )

    override suspend fun onLogin(key: String, data: Map<String, String?>): List<User> {
        return listOf(
            User(
                key,
                "$key User",
                "https://picsum.photos/seed/$key/200".toImageHolder(),
            )
        )
    }

    override val webViewRequest = object : WebViewRequest.Cookie<List<User>> {
        override suspend fun onStop(url: NetworkRequest, cookie: String): List<User> {
            return listOf(
                User(
                    "test_user",
                    "WebView User",
                    "https://picsum.photos/seed/test_user/200".toImageHolder(),
                )
            )
        }

        override val initialUrl = "https://www.example.com/".toGetRequest()
        override val stopUrlRegex = "https://www\\.iana\\.org/.*".toRegex()
    }

    override fun setLoginUser(user: User?) {
//        println("setLoginUser: $user")
    }

    override suspend fun getCurrentUser(): User? = null

    override suspend fun loadStreamableMedia(
        streamable: Streamable, isDownload: Boolean,
    ): Streamable.Media {
        if (streamable.quality == 3) throw Exception("Test exception for quality 3")
        return when (streamable.type) {
            Streamable.MediaType.Background -> streamable.id.toBackgroundMedia()
            Streamable.MediaType.Server -> {
                val srcs = Srcs.valueOf(streamable.id)
                when (srcs) {
                    Srcs.Single -> FUN.toServerMedia()
                    Srcs.Merged -> Streamable.Media.Server(
                        listOf(
                            BUNNY.toSource(),
                            FUN.toSource(),
                        ), false
                    )

                    Srcs.M3U8 -> M3U8.toServerMedia(type = Streamable.SourceType.HLS)
                }
            }

            Streamable.MediaType.Subtitle -> streamable.id.toSubtitleMedia(Streamable.SubtitleType.VTT)
        }
    }

    override suspend fun loadFeed(track: Track): Feed<Shelf>? = null

    enum class Srcs {
        Single, Merged, M3U8;

        fun createTrack() = createTrack(
            name, name, listOf(Streamable.subtitle(SUBTITLE)) + (0..5).map { i ->
                Streamable.server(this.name, i)
            }
        )
    }

    private lateinit var webViewClient: WebViewClient
    override fun setWebViewClient(webViewClient: WebViewClient) {
        this.webViewClient = webViewClient
    }

    override suspend fun loadHomeFeed(): Feed<Shelf> = Feed(
        listOf("All", "Music", "Podcasts").map { Tab(it, it) }
    ) { tab ->
        if (tab?.id == "Podcasts") {
            throw Exception("Test exception for Podcasts tab")
//            return@Feed PagedData.empty<Shelf>().toFeedData()
        }
        PagedData.Single {
            if (tab?.id == "Music") delay(5000)
            OkHttpClient().newCall(
                Request.Builder().url("https://example.com").build()
            ).await().body
            listOf(
                Shelf.Lists.Categories(
                    "bruh",
                    "Bruh ${tab?.title}",
                    listOf(
                        "Burhhhhhhh", "brjdksls", "sbajkxclllll", "a", "b", " b"
                    ).map { Shelf.Category(it, it, loadHomeFeed()) }
                ),
                Shelf.Lists.Categories(
                    "bruh",
                    "Bruh ${tab?.title}",
                    listOf(
                        "Burhhhhhhh", "brjdksls", "sbajkxclllll", "a", "b", " b"
                    ).map { Shelf.Category(it, it, loadHomeFeed()) },
                    type = Shelf.Lists.Type.Grid
                ),
                Artist(
                    "bruh",
                    "Bruh",
                    cover = "https://www.easygifanimator.net/images/samples/video-to-gif-sample.gif"
                        .toImageHolder()
                ).toShelf(),
                Track("not", "Not Playable", isPlayable = Track.Playable.Unreleased).toShelf(),
                createTrack(
                    "all", "All", listOf(
                        Streamable.server(Srcs.Single.name, 0),
                        Streamable.server(Srcs.Merged.name, 0),
                        Streamable.server(Srcs.M3U8.name, 0),
                        Streamable.subtitle(SUBTITLE)
                    )
                ),
                Srcs.Single.createTrack(),
                Srcs.Merged.createTrack(),
                Srcs.M3U8.createTrack()
            )
        }.toFeedData(background = "https://picsum.photos/id/21/400/300".toImageHolder())
    }

    private val radio = Radio("empty", "empty")
    override suspend fun loadRadio(radio: Radio) = radio
    override suspend fun loadTracks(radio: Radio) = listOf(
        Track("", "Bruh")
    ).toFeed()

    override suspend fun radio(item: EchoMediaItem, context: EchoMediaItem?) = radio


    override suspend fun loadFeed(artist: Artist) = PagedData.Single<Shelf> {
        listOf(
            Srcs.Single.createTrack(),
            artist.toShelf(),
        )
    }.toFeed()

    override suspend fun loadArtist(artist: Artist) = artist

    private var isSaved = false
    override suspend fun saveToLibrary(item: EchoMediaItem, shouldSave: Boolean) {
        println(item.extras["loaded"])
        isSaved = shouldSave
        println("save $shouldSave")
    }

    override suspend fun isItemSaved(item: EchoMediaItem): Boolean {
        println(item.extras["loaded"])
        println("isSaved : $isSaved")
        return isSaved
    }


    private var isLiked = false
    override suspend fun likeItem(item: EchoMediaItem, shouldLike: Boolean) {
        println(item.extras["loaded"])
        isLiked = shouldLike
        println("like $shouldLike")
    }

    override suspend fun isItemLiked(item: EchoMediaItem): Boolean {
        println(item.extras["loaded"])
        println("isLiked : $isLiked")
        return isLiked
    }

    private var isHidden = false
    override suspend fun hideItem(item: EchoMediaItem, shouldHide: Boolean) {
        println("hide")
        this.isHidden = shouldHide
    }

    override suspend fun isItemHidden(item: EchoMediaItem): Boolean {
        println("isHidden : $isHidden")
        return isHidden
    }

    override suspend fun loadTrack(track: Track, isDownload: Boolean): Track = track.copy(
        extras = mapOf("loaded" to "Loaded bro")
    )

    override suspend fun onTrackChanged(details: TrackDetails?) {
        println("onTrackChanged : $details")
    }

    override suspend fun onPlayingStateChanged(details: TrackDetails?, isPlaying: Boolean) {
        println("onPlayingStateChanged $isPlaying : $details")
    }

    override suspend fun getMarkAsPlayedDuration(details: TrackDetails) = 10000L
    override suspend fun onMarkAsPlayed(details: TrackDetails) {
        println("onMarkAsPlayed : $details")
    }

    private var isFollowing = false
    override suspend fun isFollowing(item: EchoMediaItem) = isFollowing
    override suspend fun getFollowersCount(item: EchoMediaItem): Long = 1000L
    override suspend fun followItem(item: EchoMediaItem, shouldFollow: Boolean) {
        println("followItem: $item, follow: $shouldFollow")
        isFollowing = shouldFollow
    }

    override suspend fun onShare(item: EchoMediaItem): String {
        return "https://example.com/${item.id}"
    }

    val lyrics = listOf(
        Lyrics("1", "Test Lyrics 1", lyrics = Lyrics.Simple("First line\nSecond line\nThird line")),
        Lyrics(
            "2", "Test Lyrics 2", lyrics = Lyrics.Timed(
                listOf(
                    Lyrics.Item("First line", 0, 1000),
                    Lyrics.Item("Second line", 1000, 2000),
                    Lyrics.Item("Third line", 2000, 3000)
                )
            )
        ),
        Lyrics(
            "3", "Test Lyrics 3", lyrics = Lyrics.WordByWord(
                listOf(
                    listOf(Lyrics.Item("First", 0, 500), Lyrics.Item("line", 500, 1000)),
                    listOf(Lyrics.Item("Second", 1000, 1500), Lyrics.Item("line", 1500, 2000)),
                    listOf(Lyrics.Item("Third", 2000, 2500), Lyrics.Item("line", 2500, 3000))
                )
            )
        ),
    )

    override suspend fun searchLyrics(query: String): Feed<Lyrics> = Feed(
        listOf("Simple", "Timed", "WordByWord", "All").map { Tab(it, it) }
    ) { tab ->
        delay(3000)
        val burh = when (tab?.id) {
            "Simple" -> lyrics.filter { it.lyrics is Lyrics.Simple }
            "Timed" -> lyrics.filter { it.lyrics is Lyrics.Timed }
            "WordByWord" -> lyrics.filter { it.lyrics is Lyrics.WordByWord }
            else -> lyrics
        }
        burh.toFeedData()
    }

    override suspend fun searchTrackLyrics(clientId: String, track: Track) = run {
        delay(5000)
        lyrics.toFeed()
    }

    override suspend fun loadLyrics(lyrics: Lyrics) = lyrics
    override suspend fun loadLibraryFeed() = (0..10).map {
        createTrack("lib_$it", "Library Track $it", listOf(Streamable.server(Srcs.Single.name, 0)))
    }.toFeed<Shelf>(Feed.Buttons(showPlayAndShuffle = true))

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\builtin\test\TrackerTestExtension.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.builtin.test

import dev.brahmkshatriya.echo.common.clients.TrackerMarkClient
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.ImportType
import dev.brahmkshatriya.echo.common.models.Metadata
import dev.brahmkshatriya.echo.common.models.TrackDetails
import dev.brahmkshatriya.echo.common.settings.Setting
import dev.brahmkshatriya.echo.common.settings.Settings

class TrackerTestExtension : TrackerMarkClient {
    companion object {
        val metadata = Metadata(
            "TrackerTestExtension",
            "",
            ImportType.BuiltIn,
            ExtensionType.TRACKER,
            "test",
            "Tracker Test Extension",
            "1.0.0",
            "Test extension for offline testing",
            "Test",
        )
    }

    override suspend fun getSettingItems() = listOf<Setting>()
    override fun setSettings(settings: Settings) {}

    override suspend fun onTrackChanged(details: TrackDetails?) {
        println("onTrackChanged ${details?.track?.id}")
    }

    override suspend fun getMarkAsPlayedDuration(details: TrackDetails): Long? {
        return details.totalDuration?.div(3)
    }

    override suspend fun onMarkAsPlayed(details: TrackDetails) {
        println("onMarkAsPlayed: ${details.track.id}")
    }

    override suspend fun onPlayingStateChanged(details: TrackDetails?, isPlaying: Boolean) {
        println("onPlayingStateChanged $isPlaying: ${details?.track?.id}")
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\builtin\unified\UnifiedDatabase.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.builtin.unified

import android.content.Context
import androidx.core.net.toUri
import androidx.room.Dao
import androidx.room.Database
import androidx.room.Delete
import androidx.room.Entity
import androidx.room.Insert
import androidx.room.OnConflictStrategy.Companion.REPLACE
import androidx.room.PrimaryKey
import androidx.room.Query
import androidx.room.RoomDatabase
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Date
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.ImageHolder
import dev.brahmkshatriya.echo.common.models.ImageHolder.Companion.toResourceUriImageHolder
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedDatabase.PlaylistEntity.Companion.toEntity
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedDatabase.PlaylistTrackEntity.Companion.toTrackEntity
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedDatabase.SavedEntity.Companion.toEntity
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedExtension.Companion.EXTENSION_ID
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedExtension.Companion.UNIFIED_ID
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedExtension.Companion.extensionId
import dev.brahmkshatriya.echo.utils.Serializer.toData
import dev.brahmkshatriya.echo.utils.Serializer.toJson
import java.io.File
import java.util.Calendar

@Database(
    entities = [
        UnifiedDatabase.PlaylistEntity::class,
        UnifiedDatabase.PlaylistTrackEntity::class,
        UnifiedDatabase.SavedEntity::class,
    ],
    version = 6,
    exportSchema = false
)
abstract class UnifiedDatabase : RoomDatabase() {
    abstract fun playlistDao(): PlaylistDao

    private val dao by lazy { playlistDao() }

    suspend fun getCreatedPlaylists(): List<Playlist> {
        return dao.getPlaylists().filter { it.actualId.isEmpty() }.map { it.playlist }
    }

    suspend fun getSaved(): List<EchoMediaItem> {
        return dao.getSaved().mapNotNull { it.item.getOrNull() }
    }

    suspend fun isSaved(item: EchoMediaItem): Boolean {
        val extId = item.extras.extensionId
        return dao.isSaved(item.id, extId)
    }

    suspend fun save(item: EchoMediaItem) {
        dao.insertSaved(item.toEntity())
    }

    suspend fun deleteSaved(item: EchoMediaItem) {
        dao.deleteSaved(item.toEntity())
    }

    private fun getDateNow(): Date {
        val calendar = Calendar.getInstance()
        calendar.time = java.util.Date()
        return Date(
            year = calendar.get(Calendar.YEAR),
            month = calendar.get(Calendar.MONTH),
            day = calendar.get(Calendar.DAY_OF_MONTH),
        )
    }

    suspend fun getLikedPlaylist(context: Context): Playlist {
        val liked = dao.getPlaylist("Liked")
        return if (liked == null) {
            val playlist = PlaylistEntity(
                0,
                getDateNow().toJson(),
                "Liked",
                context.getString(R.string.unified_liked_playlist_summary),
                null,
                "[]"
            )
            val id = dao.insertPlaylist(playlist)
            playlist.copy(id = id).playlist
        } else liked.playlist
    }

    suspend fun createPlaylist(
        title: String,
        description: String?,
        cover: ImageHolder? = null,
        actualId: String = "",
    ): Playlist {
        val playlist = PlaylistEntity(
            0,
            getDateNow().toJson(),
            title,
            description ?: "",
            cover?.toJson(),
            "[]",
            actualId
        )
        val id = dao.insertPlaylist(playlist)
        return playlist.copy(id = id).playlist
    }

    suspend fun deletePlaylist(playlist: Playlist) {
        dao.deleteAllTracks(playlist.id.toLong())
        dao.deletePlaylist(playlist.toEntity())
    }

    suspend fun editPlaylistMetadata(playlist: Playlist, title: String, description: String?) {
        val entity = playlist.toEntity().copy(name = title, description = description ?: "")
        dao.insertPlaylist(entity)
    }

    suspend fun editPlaylistCover(playlist: Playlist, file: File?) {
        val image: ImageHolder? = file?.toUri()?.toString()?.toResourceUriImageHolder(true)
        val entity = playlist.toEntity().copy(
            cover = image?.toJson()
        )
        dao.insertPlaylist(entity)
    }

    suspend fun loadPlaylist(playlist: Playlist): Playlist {
        val entity = dao.getPlaylist(playlist.toEntity().id)
        val tracks = dao.getTracks(entity.id).map { it.track }
        if (tracks.isEmpty()) return playlist.copy(trackCount = 0, duration = null)
        val durations = tracks.mapNotNull { it.duration }
        val average = durations.average().toLong()
        return entity.playlist.copy(
            trackCount = tracks.size.toLong(),
            duration = average * tracks.size
        )
    }

    suspend fun getTracks(playlist: Playlist): List<Track> {
        val entity = dao.getPlaylist(playlist.toEntity().id)
        val tracks = dao.getTracks(entity.id).associateBy { it.eid }
        if (tracks.isEmpty()) return emptyList()
        return entity.list.map { tracks[it]!!.track }
    }

    suspend fun addTracksToPlaylist(
        playlist: Playlist, index: Int, new: List<Track>,
    ) {
        if (new.isEmpty()) return
        val entity = dao.getPlaylist(playlist.toEntity().id)
        val newTracks = new.map {
            val trackEntity = PlaylistTrackEntity(
                0, entity.id, it.id, it.extras.extensionId, it.toJson()
            )
            dao.insertPlaylistTrack(trackEntity)
        }
        val newEntity = entity.copy(
            listData = entity.list.toMutableList().apply {
                addAll(index, newTracks)
            }.toJson()
        )
        dao.insertPlaylist(newEntity)
    }

    suspend fun removeTracksFromPlaylist(
        playlist: Playlist, tracks: List<Track>, indexes: List<Int>,
    ) {
        val entities = indexes.map { tracks[it].toTrackEntity() }
        entities.forEach { dao.deletePlaylistTrack(it) }
        val entity = dao.getPlaylist(playlist.toEntity().id)
        val newEntity = entity.copy(
            listData = entity.list.toMutableList().apply {
                entities.forEach {
                    val index = indexOf(it.eid)
                    if (index != -1) removeAt(index)
                }
            }.toJson()
        )
        dao.insertPlaylist(newEntity)
    }

    suspend fun moveTrack(playlist: Playlist, fromIndex: Int, toIndex: Int) {
        val entity = dao.getPlaylist(playlist.toEntity().id)
        val newEntity = entity.copy(
            listData = entity.list.toMutableList().apply {
                add(toIndex, removeAt(fromIndex))
            }.toJson()
        )
        dao.insertPlaylist(newEntity)
    }

    suspend fun isLiked(track: Track): Boolean {
        val liked = dao.getPlaylist("Liked") ?: return false
        return dao.getTracks(liked.id)
            .any { it.trackId == track.id && it.extId == track.extras.extensionId }
    }

    suspend fun getOrCreate(app: Context, context: EchoMediaItem): Playlist {
        return dao.getPlaylistByActualId(context.id)?.playlist ?: createPlaylist(
            context.title,
            app.getString(R.string.downloaded_x, ""),
            context.cover,
            context.id
        )
    }

    suspend fun getPlaylist(mediaItem: EchoMediaItem): Playlist? {
        return dao.getPlaylistByActualId(mediaItem.id)?.playlist
    }

    @Dao
    interface PlaylistDao {
        @Query("SELECT * FROM PlaylistEntity")
        suspend fun getPlaylists(): List<PlaylistEntity>

        @Query("SELECT * FROM PlaylistEntity WHERE id = :id")
        suspend fun getPlaylist(id: Long): PlaylistEntity

        @Query("SELECT * FROM PlaylistEntity WHERE name = :name")
        suspend fun getPlaylist(name: String): PlaylistEntity?

        @Query("SELECT * FROM PlaylistEntity WHERE actualId = :actualId")
        suspend fun getPlaylistByActualId(actualId: String): PlaylistEntity?

        @Insert(onConflict = REPLACE)
        suspend fun insertPlaylist(playlist: PlaylistEntity): Long

        @Delete
        suspend fun deletePlaylist(playlist: PlaylistEntity)

        @Query("SELECT * FROM PlaylistTrackEntity WHERE playlistId = :playlistId")
        suspend fun getTracks(playlistId: Long): List<PlaylistTrackEntity>

        @Insert(onConflict = REPLACE)
        suspend fun insertPlaylistTrack(playlistTrack: PlaylistTrackEntity): Long

        @Delete
        suspend fun deletePlaylistTrack(playlistTrack: PlaylistTrackEntity)

        @Query("DELETE FROM PlaylistTrackEntity WHERE playlistId = :playlistId")
        suspend fun deleteAllTracks(playlistId: Long)

        @Query("SELECT * FROM SavedEntity")
        suspend fun getSaved(): List<SavedEntity>

        @Query("SELECT EXISTS(SELECT 1 FROM SavedEntity WHERE id = :id AND extId = :extId)")
        suspend fun isSaved(id: String, extId: String): Boolean

        @Insert(onConflict = REPLACE)
        suspend fun insertSaved(saved: SavedEntity): Long

        @Delete
        suspend fun deleteSaved(saved: SavedEntity)

        @Query("SELECT * FROM PlaylistTrackEntity WHERE eid = :eid")
        suspend fun getTrack(eid: Long?): PlaylistTrackEntity?

        @Query("SELECT * FROM PlaylistTrackEntity WHERE \"after\" = :eid")
        suspend fun getAfterTrack(eid: Long): PlaylistTrackEntity?
    }

    @Entity
    data class PlaylistEntity(
        @PrimaryKey(true)
        val id: Long,
        val modified: String,
        val name: String,
        val description: String,
        val cover: String?,
        val listData: String,
        val actualId: String = "",
    ) {
        val list by lazy {
            listData.toData<List<Long>>().getOrThrow()
        }

        val playlist by lazy {
            Playlist(
                id.toString(),
                name,
                true,
                cover = cover?.toData<ImageHolder?>()?.getOrThrow(),
                creationDate = modified.toData<Date>().getOrNull(),
                description = description.takeIf { it.isNotBlank() },
                extras = mapOf(
                    EXTENSION_ID to UNIFIED_ID,
                    "listData" to listData,
                    "actualId" to actualId
                )
            )
        }

        companion object {
            fun Playlist.toEntity(): PlaylistEntity {
                return PlaylistEntity(
                    id.toLong(),
                    creationDate.toJson(),
                    title,
                    description ?: "",
                    cover?.toJson(),
                    extras["listData"] ?: "[]",
                    extras["actualId"] ?: ""
                )
            }
        }
    }

    @Entity
    data class PlaylistTrackEntity(
        @PrimaryKey(autoGenerate = true)
        val eid: Long,
        val playlistId: Long,
        val trackId: String,
        val extId: String,
        val data: String,
    ) {
        val track by lazy {
            data.toData<Track>().getOrThrow().run {
                this.copy(
                    type = type,
                    extras = extras + mapOf(
                        "pId" to playlistId.toString(),
                        "eId" to eid.toString(),
                    )
                )
            }
        }

        companion object {
            fun Track.toTrackEntity(): PlaylistTrackEntity {
                val pId = extras["pId"]!!.toLong()
                val eId = extras["eId"]!!.toLong()
                return PlaylistTrackEntity(eId, pId, id, extras.extensionId, this.toJson())
            }
        }
    }

    @Entity(primaryKeys = ["id", "extId"])
    data class SavedEntity(
        val id: String,
        val extId: String,
        val data: String,
    ) {
        val item by lazy { data.toData<EchoMediaItem>() }

        companion object {
            fun EchoMediaItem.toEntity(): SavedEntity {
                val extId = extras.extensionId
                return SavedEntity(id, extId, this.toJson())
            }
        }
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\builtin\unified\UnifiedExtension.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.builtin.unified

import android.content.Context
import androidx.annotation.OptIn
import androidx.media3.common.util.UnstableApi
import androidx.media3.datasource.cache.SimpleCache
import androidx.room.Room
import dev.brahmkshatriya.echo.BuildConfig
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.clients.AlbumClient
import dev.brahmkshatriya.echo.common.clients.ArtistClient
import dev.brahmkshatriya.echo.common.clients.ExtensionClient
import dev.brahmkshatriya.echo.common.clients.FollowClient
import dev.brahmkshatriya.echo.common.clients.HideClient
import dev.brahmkshatriya.echo.common.clients.HomeFeedClient
import dev.brahmkshatriya.echo.common.clients.LibraryFeedClient
import dev.brahmkshatriya.echo.common.clients.LikeClient
import dev.brahmkshatriya.echo.common.clients.LyricsClient
import dev.brahmkshatriya.echo.common.clients.PlaylistClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditCoverClient
import dev.brahmkshatriya.echo.common.clients.RadioClient
import dev.brahmkshatriya.echo.common.clients.SaveClient
import dev.brahmkshatriya.echo.common.clients.SearchFeedClient
import dev.brahmkshatriya.echo.common.clients.ShareClient
import dev.brahmkshatriya.echo.common.clients.TrackClient
import dev.brahmkshatriya.echo.common.clients.TrackerClient
import dev.brahmkshatriya.echo.common.clients.TrackerMarkClient
import dev.brahmkshatriya.echo.common.helpers.ClientException
import dev.brahmkshatriya.echo.common.helpers.PagedData
import dev.brahmkshatriya.echo.common.models.Album
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Feed.Companion.loadAll
import dev.brahmkshatriya.echo.common.models.Feed.Companion.toFeed
import dev.brahmkshatriya.echo.common.models.Feed.Companion.toFeedData
import dev.brahmkshatriya.echo.common.models.ImportType
import dev.brahmkshatriya.echo.common.models.Lyrics
import dev.brahmkshatriya.echo.common.models.Metadata
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Radio
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.common.models.Tab
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.common.models.TrackDetails
import dev.brahmkshatriya.echo.common.providers.MusicExtensionsProvider
import dev.brahmkshatriya.echo.common.settings.SettingSwitch
import dev.brahmkshatriya.echo.common.settings.Settings
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.extensions.cache.Cached
import dev.brahmkshatriya.echo.extensions.exceptions.AppException.Companion.toAppException
import dev.brahmkshatriya.echo.playback.MediaItemUtils.toKey
import dev.brahmkshatriya.echo.utils.CacheUtils.getFromCache
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.first
import java.io.File

@OptIn(UnstableApi::class)
class UnifiedExtension(
    private val app: App,
    private val cache: SimpleCache,
) : ExtensionClient, MusicExtensionsProvider,
    HomeFeedClient, SearchFeedClient, LibraryFeedClient,
    PlaylistClient, AlbumClient, ArtistClient, TrackClient,
    FollowClient, RadioClient, LikeClient, SaveClient, HideClient, ShareClient,
    PlaylistEditClient, PlaylistEditCoverClient, LyricsClient, TrackerMarkClient {

    companion object {
        const val UNIFIED_ID = "unified"
        const val EXTENSION_ID = "extension_id"
        val metadata = Metadata(
            "UnifiedExtension",
            "",
            ImportType.BuiltIn,
            ExtensionType.MUSIC,
            UNIFIED_ID,
            "Unified Extension",
            version = "v${BuildConfig.VERSION_CODE}",
            "All your extensions in one place!",
            "Echo",
            isEnabled = true
        )

        fun Context.getFeed(items: List<EchoMediaItem>): Feed<Shelf> {
            if (items.isEmpty()) return listOf<Shelf>().toFeed()
            val types = items.groupBy {
                when (it) {
                    is Track -> getString(R.string.track)
                    is Album -> getString(R.string.album)
                    is Artist -> getString(R.string.artists)
                    is Playlist -> getString(R.string.playlist)
                    is Radio -> getString(R.string.radio)
                }
            }
            val tabs = if (types.keys.size == 1) listOf()
            else getString(R.string.all).let { listOf(Tab(it, it)) } +
                    types.keys.map { Tab(it, it, true) }

            return Feed(tabs) { tab ->
                val items = types[tab?.id]?.toList() ?: items
                items.map { it.toShelf() }.toFeedData()
            }
        }

        suspend inline fun <reified C, T> Extension<*>.client(block: C.() -> T): T = runCatching {
            val client = instance.value().getOrThrow() as? C
                ?: throw ClientException.NotSupported(C::class.run { simpleName ?: java.name })
            client.block()
        }.getOrElse { throw it.toAppException(this) }

        suspend inline fun <reified C, T> Extension<*>.clientOrNull(block: C.() -> T): T? =
            runCatching {
                val client = instance.value().getOrThrow() as? C
                client?.block()
            }.getOrElse { throw it.toAppException(this) }

        private fun List<Extension<*>>.get(id: String?) =
            find { it.id == id } ?: throw Exception("Extension $id not found")

        private fun List<Extension<*>>.getOrNull(id: String?) = find { it.id == id }

        val Map<String, String>.extensionId
            get() = this[EXTENSION_ID] ?: throw Exception("Extension id not found")

        fun Track.withExtensionId(
            id: String, client: Any?, cached: Boolean = false,
        ) = copy(
            extras = extras + mapOf(EXTENSION_ID to id, "cached" to cached.toString()),
            album = album?.withExtensionId(id, client),
            artists = artists.map { it.withExtensionId(id, client) },
            streamables = streamables.map {
                it.copy(extras = it.extras + mapOf(EXTENSION_ID to id))
            },
            isSaveable = true,
            isLikeable = true,
            isHideable = client is HideClient && isHideable,
            isRadioSupported = client is RadioClient && isRadioSupported,
            isFollowable = client is FollowClient && isFollowable,
            isShareable = client is ShareClient && isShareable
        )

        private fun Album.withExtensionId(id: String, client: Any?) = copy(
            artists = artists.map { it.withExtensionId(id, client) },
            extras = extras + mapOf(EXTENSION_ID to id),
            isSaveable = true,
            isLikeable = false,
            isHideable = client is HideClient && isHideable,
            isRadioSupported = client is RadioClient && isRadioSupported,
            isFollowable = client is FollowClient && isFollowable,
            isShareable = client is ShareClient && isShareable
        )

        private fun Artist.withExtensionId(id: String, client: Any?) = copy(
            extras = extras + mapOf(EXTENSION_ID to id),
            isSaveable = true,
            isLikeable = false,
            isHideable = client is HideClient && isHideable,
            isRadioSupported = client is RadioClient && isRadioSupported,
            isFollowable = client is FollowClient && isFollowable,
            isShareable = client is ShareClient && isShareable
        )

        private fun Playlist.withExtensionId(id: String, client: Any?) = copy(
            isEditable = false,
            authors = authors.map { it.withExtensionId(id, client) },
            extras = extras + mapOf(EXTENSION_ID to id),
            isSaveable = true,
            isLikeable = false,
            isHideable = client is HideClient && isHideable,
            isRadioSupported = client is RadioClient && isRadioSupported,
            isFollowable = client is FollowClient && isFollowable,
            isShareable = client is ShareClient && isShareable
        )

        private fun Radio.withExtensionId(id: String, client: Any?) = copy(
            extras = extras + mapOf(EXTENSION_ID to id),
            isSaveable = true,
            isLikeable = false,
            isHideable = client is HideClient && isHideable,
            isFollowable = client is FollowClient && isFollowable,
            isShareable = client is ShareClient && isShareable
        )

        private fun EchoMediaItem.withExtensionId(
            id: String, client: Any?,
        ) = when (this) {
            is Artist -> this.withExtensionId(id, client)
            is Album -> this.withExtensionId(id, client)
            is Playlist -> this.withExtensionId(id, client)
            is Radio -> this.withExtensionId(id, client)
            is Track -> this.withExtensionId(id, client)
        }

        private fun Lyrics.withExtensionId(id: String) = copy(
            extras = extras + mapOf(EXTENSION_ID to id)
        )

        fun Shelf.Item.withExtensionId(id: String, client: Any?) = copy(
            media = media.withExtensionId(id, client)
        )

        fun Feed.Buttons.withExtensionId(extension: Extension<*>) = copy(
            customTrackList = customTrackList?.map {
                it.withExtensionId(extension.id, extension.instance.value)
            }
        )

        private fun Feed<Shelf>.injectExtensionId(extension: Extension<*>) = copy(
            tabs = tabs.map { it.injectId(extension.id) },
            getPagedData = { tab ->
                val (data, buttons, bg) = runCatching { getPagedData(tab) }.getOrElse {
                    throw it.toAppException(extension)
                }
                data.injectExtensionId(extension)
                    .toFeedData(buttons?.withExtensionId(extension), bg)
            }
        )

        private fun Feed<Track>.injectExtension(extension: Extension<*>) = copy(
            tabs = tabs.map { it.injectId(extension.id) },
            getPagedData = { tab ->
                val id = extension.id
                val (data, buttons, bg) = runCatching { getPagedData(tab) }.getOrElse {
                    throw it.toAppException(extension)
                }
                data.map { result ->
                    val list = result.getOrElse { throw it.toAppException(extension) }
                    list.map { it.withExtensionId(id, extension.instance.value) }
                }.toFeedData(buttons?.withExtensionId(extension), bg)
            }
        )

        fun Feed<Lyrics>.injectLyricsExtId(extension: Extension<*>) = copy(
            tabs = tabs.map { it.injectId(extension.id) },
        ) { tab ->
            val (data, buttons, bg) = runCatching { getPagedData(tab) }.getOrElse {
                throw it.toAppException(extension)
            }
            data.map { result ->
                val id = extension.id
                val list = result.getOrElse { throw it.toAppException(extension) }
                list.map { it.withExtensionId(id) }
            }.toFeedData(buttons?.withExtensionId(extension), bg)
        }

        private fun Shelf.Category.withExtensionId(extension: Extension<*>): Shelf.Category =
            copy(feed = feed?.injectExtensionId(extension))

        private fun PagedData<Shelf>.injectExtensionId(extension: Extension<*>): PagedData<Shelf> =
            map { result ->
                val id = extension.id
                val client = extension.instance.value
                val list = result.getOrElse { throw it.toAppException(extension) }
                list.map {
                    when (it) {
                        is Shelf.Category -> it.withExtensionId(extension)
                        is Shelf.Item -> it.withExtensionId(id, client)
                        is Shelf.Lists.Categories -> it.copy(
                            list = it.list.map { category -> category.withExtensionId(extension) },
                            more = it.more?.injectExtensionId(extension)
                        )

                        is Shelf.Lists.Items -> it.copy(
                            list = it.list.map { item -> item.withExtensionId(id, client) },
                            more = it.more?.injectExtensionId(extension)
                        )

                        is Shelf.Lists.Tracks -> it.copy(
                            list = it.list.map { track ->
                                track.withExtensionId(id, client)
                            },
                            more = it.more?.injectExtensionId(extension)
                        )
                    }
                }
            }

        fun Tab.injectId(id: String) = copy(extras = extras + mapOf(EXTENSION_ID to id))
    }

    private val context = app.context

    override suspend fun getSettingItems() = listOf(
        SettingSwitch(
            context.getString(R.string.show_tabs),
            "show_tabs",
            context.getString(R.string.show_tab_summary),
            false
        ),
    )

    private lateinit var settings: Settings
    override fun setSettings(settings: Settings) {
        this.settings = settings
    }

    private val showTabs get() = settings.getBoolean("show_tabs") ?: false

    override val requiredMusicExtensions = listOf<String>()
    private var extFlow = MutableStateFlow<List<MusicExtension>?>(null)
    suspend fun extensions() = extFlow.first { it != null }!!
    override fun setMusicExtensions(extensions: List<MusicExtension>) {
        extFlow.value = extensions.filter { it.id != UNIFIED_ID && it.metadata.isEnabled }
    }

    private suspend inline fun <reified T> Extension<*>.getFeedData(
        crossinline loadFeed: suspend T.() -> Feed<Shelf>,
    ): Feed.Data<Shelf> {
        val feed = client<T, Feed<Shelf>> { loadFeed() }.injectExtensionId(this)
        val data = feed.run { getPagedData(tabs.firstOrNull()) }
        val otherTabs = feed.tabs.drop(1).map { tab ->
            Shelf.Category(
                tab.id,
                tab.title,
                Feed(listOf()) { feed.run { getPagedData(tab) } }
            )
        }
        return if (feed.tabs.size > 1 && showTabs) {
            Feed.Data(
                PagedData.Concat(
                    PagedData.Single {
                        listOf(
                            Shelf.Lists.Categories(
                                "tabs",
                                context.getString(R.string.tabs),
                                otherTabs
                            )
                        )
                    },
                    data.pagedData
                ),
                data.buttons?.withExtensionId(this),
                data.background
            )
        } else data
    }

    private suspend inline fun <reified T> feed(
        crossinline loadFeed: suspend T.() -> Feed<Shelf>,
    ): Feed<Shelf> {
        val list = extensions()
        return if (list.size == 1) {
            val ext = list.first()
            ext.client<T, Feed<Shelf>> { loadFeed() }.injectExtensionId(ext)
        } else Feed(
            list.map { Tab(it.id, it.name).injectId(it.id) }
        ) { tab ->
            val extensions = extensions()
            val id = tab?.extras?.extensionId ?: extensions.firstOrNull()?.id
            extensions.get(id).getFeedData(loadFeed)
        }
    }

    override suspend fun loadHomeFeed() = feed<HomeFeedClient> { loadHomeFeed() }

    override suspend fun loadSearchFeed(query: String): Feed<Shelf> {
        return feed<SearchFeedClient> { loadSearchFeed(query) }
    }

    val db = Room.databaseBuilder(
        context, UnifiedDatabase::class.java, "unified-db"
    ).fallbackToDestructiveMigration(true).build()

    private suspend fun getCached() = cache.keys.mapNotNull {
        val key = context.getFromCache<String>(it, "player")
        key?.toKey()?.getOrNull()
    }.reversed().groupBy { it.trackId }.mapNotNull {
        var (id, _, extId) = it.value.first()
        val state = Cached.getMedia<Track>(app, extId, id).getOrNull()
            ?: return@mapNotNull null
        if (extId == UNIFIED_ID) extId = state.item.extras[EXTENSION_ID] ?: return@mapNotNull null
        val client = extensions().getOrNull(extId)?.instance?.value
        state.item.withExtensionId(extId, client, true)
    }

    private var cachedTracks = listOf<Track>()
    private fun cachePlaylist() = if (cachedTracks.isNotEmpty()) Playlist(
        id = "cached",
        title = context.getString(R.string.cached_songs),
        isEditable = false,
        cover = cachedTracks.first().cover,
        description = context.getString(R.string.cache_playlist_warning),
        trackCount = cachedTracks.size.toLong(),
        extras = mapOf(EXTENSION_ID to UNIFIED_ID)
    ) else null

    val downloadFeed = MutableStateFlow(listOf<EchoMediaItem>())
    override suspend fun loadLibraryFeed() = Feed(
        listOf(Tab("Unified", context.getString(R.string.all))) + extensions().map {
            Tab(it.id, it.name)
        }
    ) { tab ->
        val extension = extensions().getOrNull(tab?.id)
        extension?.getFeedData<LibraryFeedClient> { loadLibraryFeed() } ?: run {
            PagedData.Single {
                cachedTracks = getCached()
                listOfNotNull(
                    Shelf.Category(
                        "saved",
                        context.getString(R.string.saved),
                        context.getFeed(db.getSaved())
                    ),
                    Shelf.Category(
                        "downloads",
                        context.getString(R.string.downloads),
                        context.getFeed(downloadFeed.value)
                    ),
                    cachePlaylist()?.toShelf()
                ) + db.getCreatedPlaylists().map { it.toShelf() }
            }.toFeedData()
        }
    }

    override suspend fun loadRadio(radio: Radio): Radio {
        val id = radio.extras.extensionId
        val extension = extensions().get(id)
        return extension.client<RadioClient, Radio> {
            loadRadio(radio).withExtensionId(id, this)
        }
    }

    override suspend fun loadTracks(radio: Radio): Feed<Track> {
        val id = radio.extras.extensionId
        val extension = extensions().get(id)
        return extension.client<RadioClient, Feed<Track>> {
            this.loadTracks(radio).injectExtension(extension)
        }
    }

    override suspend fun radio(item: EchoMediaItem, context: EchoMediaItem?): Radio {
        val id = item.extras.extensionId
        return extensions().get(id).client<RadioClient, Radio> {
            radio(item, context).withExtensionId(id, this)
        }
    }

    override suspend fun loadTrack(track: Track, isDownload: Boolean): Track {
        val cached = track.extras["cached"]?.toBoolean() ?: false
        if (cached) return track
        val id = track.extras.extensionId
        return extensions().get(id).client<TrackClient, Track> {
            loadTrack(track, isDownload).withExtensionId(id, this)
        }
    }

    override suspend fun loadStreamableMedia(
        streamable: Streamable, isDownload: Boolean,
    ): Streamable.Media {
        val id = streamable.extras.extensionId
        return extensions().get(id).client<TrackClient, Streamable.Media> {
            loadStreamableMedia(streamable, isDownload)
        }
    }

    override suspend fun loadFeed(track: Track): Feed<Shelf>? {
        val id = track.extras.extensionId
        val extension = extensions().get(id)
        return extension.client<TrackClient, Feed<Shelf>?> {
            loadFeed(track)?.injectExtensionId(extension)
        }
    }

    override suspend fun loadAlbum(album: Album): Album {
        val id = album.extras.extensionId
        return extensions().get(id).client<AlbumClient, Album> {
            loadAlbum(album).withExtensionId(id, this)
        }
    }

    override suspend fun loadTracks(album: Album): Feed<Track>? {
        val id = album.extras.extensionId
        val extension = extensions().get(id)
        return extension.client<AlbumClient, Feed<Track>?> {
            loadTracks(album)?.injectExtension(extension)
        }
    }

    override suspend fun loadFeed(album: Album): Feed<Shelf>? {
        val id = album.extras.extensionId
        val extension = extensions().get(id)
        return extension.client<AlbumClient, Feed<Shelf>?> {
            loadFeed(album)?.injectExtensionId(extension)
        }
    }

    override suspend fun loadArtist(artist: Artist): Artist {
        val id = artist.extras.extensionId
        return extensions().get(id).client<ArtistClient, Artist> {
            loadArtist(artist).withExtensionId(id, this)
        }
    }

    override suspend fun loadFeed(artist: Artist): Feed<Shelf> {
        val id = artist.extras.extensionId
        val extension = extensions().get(id)
        return extension.client<ArtistClient, Feed<Shelf>> {
            loadFeed(artist).injectExtensionId(extension)
        }
    }

    override suspend fun loadPlaylist(playlist: Playlist): Playlist {
        val extId = playlist.extras.extensionId
        return if (extId == UNIFIED_ID) {
            if (playlist.id == "cached") cachePlaylist() ?: playlist else db.loadPlaylist(playlist)
        } else extensions().get(extId).client<PlaylistClient, Playlist> {
            loadPlaylist(playlist).withExtensionId(extId, this)
        }
    }

    override suspend fun loadTracks(playlist: Playlist): Feed<Track> {
        val id = playlist.extras.extensionId
        return if (id == UNIFIED_ID) PagedData.Single {
            if (playlist.id == "cached") cachedTracks
            else db.getTracks(playlist)
        }.toFeed()
        else {
            val extension = extensions().get(id)
            extension.client<PlaylistClient, Feed<Track>> {
                loadTracks(playlist).injectExtension(extension)
            }
        }
    }

    override suspend fun loadFeed(playlist: Playlist): Feed<Shelf>? {
        val id = playlist.extras.extensionId
        val extension = if (id != UNIFIED_ID) extensions().get(id) else return null
        return extension.client<PlaylistClient, Feed<Shelf>?> {
            loadFeed(playlist)?.injectExtensionId(extension)
        }
    }

    override suspend fun saveToLibrary(item: EchoMediaItem, shouldSave: Boolean) {
        if (shouldSave) db.save(item) else db.deleteSaved(item)
    }

    override suspend fun isItemSaved(item: EchoMediaItem): Boolean {
        return db.isSaved(item)
    }

    override suspend fun listEditablePlaylists(track: Track?) = db.getCreatedPlaylists().map {
        val has = db.getTracks(it).any { t -> t.id == track?.id }
        it to has
    }

    override suspend fun createPlaylist(title: String, description: String?): Playlist {
        return db.createPlaylist(title, description)
    }

    val coverDir = context.filesDir.resolve("unified-playlist-covers")
    override suspend fun deletePlaylist(playlist: Playlist) {
        db.deletePlaylist(playlist)
        File(coverDir, playlist.id).let {
            if (it.exists()) it.delete()
        }
    }

    override suspend fun editPlaylistMetadata(
        playlist: Playlist, title: String, description: String?
    ) {
        db.editPlaylistMetadata(playlist, title, description)
    }

    override suspend fun editPlaylistCover(
        playlist: Playlist, cover: File?
    ) {
//        coverDir.listFiles {
//            it.nameWithoutExtension == playlist.id
//        }?.firstOrNull()?.delete()
//        val savedFile = cover?.let {
//            val newFile = File(coverDir, playlist.id + "."+ it.extension)
//            it.copyTo(newFile, true)
//        }
        db.editPlaylistCover(playlist, cover)
    }

    override suspend fun addTracksToPlaylist(
        playlist: Playlist, tracks: List<Track>, index: Int, new: List<Track>,
    ) {
        db.addTracksToPlaylist(playlist, index, new)
    }

    override suspend fun removeTracksFromPlaylist(
        playlist: Playlist, tracks: List<Track>, indexes: List<Int>,
    ) {
        db.removeTracksFromPlaylist(playlist, tracks, indexes)
    }

    override suspend fun moveTrackInPlaylist(
        playlist: Playlist, tracks: List<Track>, fromIndex: Int, toIndex: Int,
    ) {
        db.moveTrack(playlist, fromIndex, toIndex)
    }

    override suspend fun searchTrackLyrics(clientId: String, track: Track): Feed<Lyrics> {
        val extId = track.extras.extensionId
        val extension = extensions().get(extId)
        return extension.clientOrNull<LyricsClient, Feed<Lyrics>> {
            searchTrackLyrics(clientId, track).injectLyricsExtId(extension)
        } ?: listOf<Lyrics>().toFeed()
    }

    override suspend fun loadLyrics(lyrics: Lyrics): Lyrics {
        val extId = lyrics.extras.extensionId
        return extensions().get(extId).client<LyricsClient, Lyrics> {
            loadLyrics(lyrics).withExtensionId(extId)
        }
    }

    private var current: Track? = null
    override suspend fun onTrackChanged(details: TrackDetails?) {
        current = details?.track
        val id = details?.track?.extras?.extensionId ?: return
        val extension = extensions().get(id)
        extension.clientOrNull<TrackerClient, Unit> { onTrackChanged(details) }
    }

    override suspend fun onMarkAsPlayed(details: TrackDetails) {
        val id = details.track.extras.extensionId
        val extension = extensions().get(id)
        extension.clientOrNull<TrackerMarkClient, Unit> { onMarkAsPlayed(details) }
    }

    override suspend fun onPlayingStateChanged(details: TrackDetails?, isPlaying: Boolean) {
        val id = details?.track?.extras?.extensionId ?: return
        val extension = extensions().get(id)
        extension.clientOrNull<TrackerClient, Unit> { onPlayingStateChanged(details, isPlaying) }
    }

    override suspend fun getMarkAsPlayedDuration(details: TrackDetails): Long? {
        val extension = extensions().get(details.track.extras.extensionId)
        return extension.clientOrNull<TrackerMarkClient, Long?> { getMarkAsPlayedDuration(details) }
    }

    override suspend fun onShare(item: EchoMediaItem): String {
        val id = item.extras.extensionId
        val extension = extensions().get(id)
        return extension.client<ShareClient, String> { onShare(item) }
    }

    override suspend fun isFollowing(item: EchoMediaItem): Boolean {
        val id = item.extras.extensionId
        val extension = extensions().get(id)
        return extension.client<FollowClient, Boolean> { isFollowing(item) }
    }

    override suspend fun getFollowersCount(item: EchoMediaItem): Long? {
        val id = item.extras.extensionId
        val extension = extensions().get(id)
        return extension.client<FollowClient, Long?> { getFollowersCount(item) }
    }

    override suspend fun followItem(item: EchoMediaItem, shouldFollow: Boolean) {
        val id = item.extras.extensionId
        val extension = extensions().get(id)
        extension.client<FollowClient, Unit> { followItem(item, shouldFollow) }
    }

    override suspend fun likeItem(item: EchoMediaItem, shouldLike: Boolean) {
        if (item !is Track) throw ClientException.NotSupported("LikeItem only supports Track")
        val likedPlaylist = db.getLikedPlaylist(context)
        val tracks = loadTracks(likedPlaylist).loadAll()
        if (shouldLike) addTracksToPlaylist(likedPlaylist, tracks, 0, listOf(item))
        else removeTracksFromPlaylist(
            likedPlaylist, tracks, listOf(tracks.indexOfFirst { it.id == item.id })
        )
    }

    override suspend fun isItemLiked(item: EchoMediaItem): Boolean {
        if (item !is Track) throw ClientException.NotSupported("IsItemLiked only supports Track")
        return db.isLiked(item)
    }

    override suspend fun hideItem(item: EchoMediaItem, shouldHide: Boolean) {
        val id = item.extras.extensionId
        val extension = extensions().get(id)
        extension.client<HideClient, Unit> { hideItem(item, shouldHide) }
    }

    override suspend fun isItemHidden(item: EchoMediaItem): Boolean {
        val id = item.extras.extensionId
        val extension = extensions().get(id)
        return extension.client<HideClient, Boolean> { isItemHidden(item) }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\cache\Cached.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.cache

import com.mayakapps.kache.FileKache
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.clients.AlbumClient
import dev.brahmkshatriya.echo.common.clients.ArtistClient
import dev.brahmkshatriya.echo.common.clients.FollowClient
import dev.brahmkshatriya.echo.common.clients.HideClient
import dev.brahmkshatriya.echo.common.clients.LikeClient
import dev.brahmkshatriya.echo.common.clients.LyricsClient
import dev.brahmkshatriya.echo.common.clients.LyricsSearchClient
import dev.brahmkshatriya.echo.common.clients.PlaylistClient
import dev.brahmkshatriya.echo.common.clients.RadioClient
import dev.brahmkshatriya.echo.common.clients.SaveClient
import dev.brahmkshatriya.echo.common.clients.ShareClient
import dev.brahmkshatriya.echo.common.clients.TrackClient
import dev.brahmkshatriya.echo.common.helpers.Page
import dev.brahmkshatriya.echo.common.helpers.PagedData
import dev.brahmkshatriya.echo.common.models.Album
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Feed.Companion.toFeedData
import dev.brahmkshatriya.echo.common.models.ImageHolder
import dev.brahmkshatriya.echo.common.models.Lyrics
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Radio
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.common.models.Tab
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getAs
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getIf
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.isClient
import dev.brahmkshatriya.echo.extensions.MediaState
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedExtension.Companion.EXTENSION_ID
import dev.brahmkshatriya.echo.extensions.exceptions.AppException.Companion.toAppException
import dev.brahmkshatriya.echo.utils.Serializer.toData
import dev.brahmkshatriya.echo.utils.Serializer.toJson
import kotlinx.coroutines.async
import kotlinx.coroutines.coroutineScope
import java.io.File

object Cached {
    class NotFound(id: String) : Exception("Cache not found for $id")

    suspend inline fun <reified T> FileKache.getData(id: String) = runCatching {
        val file = get(id) ?: throw NotFound(id)
        File(file).readText().toData<T>().getOrThrow()
    }

    suspend inline fun <reified T> FileKache.putData(id: String, data: T) = runCatching {
        put(id) {
            runCatching {
                File(it).writeText(data.toJson())
            }.isSuccess
        }
    }

    suspend inline fun <reified T : EchoMediaItem> getMedia(
        app: App, extensionId: String, itemId: String,
    ) = runCatching {
        val fileCache = app.fileCache.await()
        val id = "media-$extensionId-$itemId-state"
        fileCache.getData<MediaState.Loaded<T>>(id).getOrThrow()
    }

    suspend inline fun <reified T : EchoMediaItem> loadMedia(
        app: App, extension: Extension<*>, state: MediaState<T>,
    ) = coroutineScope {
        runCatching {
            val result = runCatching {
                val new = loadItem(extension, state.item).getOrThrow()
                val isSaved = async {
                    if (new.isSaveable) extension.getIf<SaveClient, Boolean> {
                        isItemSaved(new)
                    } else null
                }
                val isFollowed = async {
                    if (new.isFollowable) extension.getIf<FollowClient, Boolean> {
                        isFollowing(new)
                    } else null
                }
                val followers = async {
                    if (new.isFollowable) extension.getIf<FollowClient, Long?> {
                        getFollowersCount(new)
                    } else null
                }
                val isLiked = async {
                    if (new.isLikeable) extension.getIf<LikeClient, Boolean> {
                        isItemLiked(new)
                    } else null
                }
                val isHidden = async {
                    if (new.isHideable) extension.getIf<HideClient, Boolean> {
                        isItemHidden(new)
                    } else null
                }
                val newState = MediaState.Loaded(
                    item = new,
                    extensionId = extension.id,
                    isSaved = isSaved.await()?.getOrThrow(),
                    isFollowed = isFollowed.await()?.getOrThrow(),
                    followers = followers.await()?.getOrThrow(),
                    isLiked = isLiked.await()?.getOrThrow(),
                    isHidden = isHidden.await()?.getOrThrow(),
                    showRadio = new.isRadioSupported && extension.isClient<RadioClient>(),
                    showShare = new.isShareable && extension.isClient<ShareClient>(),
                )
                val fileCache = app.fileCache.await()
                val id = "media-${extension.id}-${newState.item.id}-state"
                fileCache.putData(id, newState)
                newState
            }
            result.getOrElse {
                getMedia<T>(app, extension.id, state.item.id).getOrNull()
                    ?: throw it
            }
        }
    }

    suspend inline fun <reified T : EchoMediaItem> loadItem(
        extension: Extension<*>, item: T,
    ) = runCatching {
        when (item) {
            is Artist -> extension.getAs<ArtistClient, Artist> { loadArtist(item) }
            is Album -> extension.getAs<AlbumClient, Album> { loadAlbum(item) }
            is Playlist -> extension.getAs<PlaylistClient, Playlist> { loadPlaylist(item) }
            is Track -> extension.getAs<TrackClient, Track> { loadTrack(item, false) }
            is Radio -> extension.getAs<RadioClient, Radio> { loadRadio(item) }
        }.getOrThrow() as T
    }

    suspend fun loadStreamableMedia(
        app: App, extension: Extension<*>, track: Track, streamable: Streamable,
    ) = runCatching {
        val fileCache = app.fileCache.await()
        val extId = track.extras[EXTENSION_ID] ?: extension.id
        val id = "media-${extId}-${track.id}-${streamable.id}"
        val media = extension.getAs<TrackClient, Streamable.Media> {
            loadStreamableMedia(streamable, false)
        }.getOrElse { throwable ->
            fileCache.getData<Streamable.Media>(id).getOrNull() ?: throw throwable
        }
        fileCache.putData(id, media)
        media
    }

    suspend fun getTracks(
        app: App, extensionId: String, item: EchoMediaItem,
    ) = runCatching {
        if (item !is EchoMediaItem.Lists) return@runCatching null
        val itemId = item.id
        getFeed<Track>(app, extensionId, "$itemId-tracks") { it }
    }

    suspend fun loadTracks(app: App, extension: Extension<*>, item: EchoMediaItem) = runCatching {
        val feed = when (item) {
            is Album -> extension.getAs<AlbumClient, Feed<Track>?> { loadTracks(item) }
            is Playlist -> extension.getAs<PlaylistClient, Feed<Track>> { loadTracks(item) }
            is Radio -> extension.getAs<RadioClient, Feed<Track>> { loadTracks(item) }
            is Artist -> null
            is Track -> null
        }?.getOrThrow() ?: return@runCatching null
        savingFeed(app, extension, "${item.id}-tracks", feed)
    }

    suspend fun getFeed(
        app: App, extensionId: String, item: EchoMediaItem,
    ) = run {
        if (item !is EchoMediaItem.Lists) return@run null
        val itemId = item.id
        getFeedShelf(app, extensionId, itemId)
    }

    suspend fun loadFeed(app: App, extension: Extension<*>, item: EchoMediaItem) = runCatching {
        val feed = when (item) {
            is Artist -> extension.getAs<ArtistClient, Feed<Shelf>> { loadFeed(item) }
            is Album -> extension.getAs<AlbumClient, Feed<Shelf>?> { loadFeed(item) }
            is Playlist -> extension.getAs<PlaylistClient, Feed<Shelf>?> { loadFeed(item) }
            is Track -> extension.getAs<TrackClient, Feed<Shelf>?> { loadFeed(item) }
            is Radio -> null
        }?.getOrThrow() ?: return@runCatching null
        savingFeed(app, extension, item.id, feed)
    }

    suspend fun loadLyrics(app: App, extension: Extension<*>, lyrics: Lyrics) = runCatching {
        val fileCache = app.fileCache.await()
        val id = "lyrics-${extension.id}-${lyrics.id}"
        val loaded = extension.getAs<LyricsClient, Lyrics> {
            loadLyrics(lyrics)
        }.getOrElse { throwable ->
            fileCache.getData<Lyrics>(id).getOrNull() ?: throw throwable
        }
        fileCache.putData(id, loaded)
        loaded
    }

    suspend fun getLyricsFeed(
        app: App, extensionId: String, clientId: String, track: Track, query: String,
    ) = runCatching {
        val id = if (query.isEmpty()) "lyrics-$clientId-${track.id}" else "lyrics-search-$query"
        getFeed<Lyrics>(app, extensionId, id) { it }
    }

    suspend fun loadLyricsFeed(
        app: App, extension: Extension<*>, clientId: String, track: Track, query: String,
    ) = runCatching {
        val feed = if (query.isEmpty()) extension.getAs<LyricsClient, Feed<Lyrics>> {
            searchTrackLyrics(clientId, track)
        }.getOrThrow() else extension.getAs<LyricsSearchClient, Feed<Lyrics>> {
            searchLyrics(query)
        }.getOrThrow()
        val id = if (query.isEmpty()) "lyrics-$clientId-${track.id}" else "lyrics-search-$query"
        savingFeed(app, extension, id, feed)
    }

    suspend fun getFeedShelf(
        app: App, extensionId: String, feedId: String,
    ): Result<Feed<Shelf>> = runCatching {
        getFeed<Shelf>(app, extensionId, feedId) { shelf ->
            when (shelf) {
                is Shelf.Item -> shelf
                is Shelf.Category -> shelf.copy(
                    feed = getFeedShelf(app, extensionId, shelf.id).getOrNull()
                )

                is Shelf.Lists.Categories -> shelf.copy(
                    list = shelf.list.map {
                        it.copy(feed = getFeedShelf(app, extensionId, it.id).getOrNull())
                    },
                    more = getFeedShelf(app, extensionId, shelf.id).getOrNull()
                )

                is Shelf.Lists.Items -> shelf.copy(
                    more = getFeedShelf(app, extensionId, shelf.id).getOrNull()
                )

                is Shelf.Lists.Tracks -> shelf.copy(
                    more = getFeedShelf(app, extensionId, shelf.id).getOrNull()
                )
            }
        }
    }


    // FEED STUFF

    suspend inline fun <reified T : Any> getFeed(
        app: App, extensionId: String, feedId: String, crossinline transform: suspend (T) -> T,
    ): Feed<T> {
        val fileCache = app.fileCache.await()
        val tabId = "feed-$extensionId-$feedId"
        val tabs = fileCache.getData<List<Tab>>(tabId).getOrThrow()
        return Feed(tabs) { tab ->
            val id = "$tabId-${tab?.id}"
            val (buttons, bg) = fileCache.getData<Pair<Feed.Buttons?, ImageHolder?>>(id)
                .getOrThrow()
            PagedData.Continuous { token ->
                val id = "$id-$token"
                val page = fileCache.getData<Page<T>>(id).getOrThrow()
                page.copy(page.data.map { transform(it) })
            }.toFeedData(buttons, bg)
        }
    }

    suspend inline fun <reified T : Any> savingFeed(
        app: App, extension: Extension<*>, feedId: String, feed: Feed<T>,
    ): Feed<T> {
        val fileCache = app.fileCache.await()
        val tabId = "feed-${extension.id}-$feedId"
        fileCache.putData(tabId, feed.tabs)
        return Feed(feed.tabs) { tab ->
            val data = runCatching {
                feed.getPagedData(tab)
            }.getOrElse {
                throw it.toAppException(extension)
            }
            val (pagedData, buttons, bg) = data
            val id = "$tabId-${tab?.id}"
            fileCache.putData(id, Pair(buttons, bg))
            PagedData.Continuous { token ->
                val page = runCatching {
                    pagedData.loadPage(token)
                }.getOrElse {
                    throw it.toAppException(extension)
                }
                val id = "$id-$token"
                fileCache.putData(id, page)
                page
            }.toFeedData(buttons, bg)
        }
    }

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\db\ExtensionDao.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.db

import androidx.room.Dao
import androidx.room.Insert
import androidx.room.OnConflictStrategy
import androidx.room.Query
import dev.brahmkshatriya.echo.extensions.db.models.ExtensionEntity
import kotlinx.coroutines.flow.Flow

@Dao
interface ExtensionDao {

    @Query("SELECT * FROM ExtensionEntity")
    fun getExtensionFlow(): Flow<List<ExtensionEntity>>

    @Insert(onConflict = OnConflictStrategy.REPLACE)
    suspend fun setExtension(extensionEntity: ExtensionEntity)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\db\ExtensionDatabase.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.db

import android.app.Application
import androidx.room.Database
import androidx.room.Room
import androidx.room.RoomDatabase
import dev.brahmkshatriya.echo.common.models.User
import dev.brahmkshatriya.echo.extensions.db.models.CurrentUser
import dev.brahmkshatriya.echo.extensions.db.models.ExtensionEntity
import dev.brahmkshatriya.echo.extensions.db.models.UserEntity

@Database(
    entities = [
        UserEntity::class,
        CurrentUser::class,
        ExtensionEntity::class,
    ],
    version = 1,
    exportSchema = false
)
abstract class ExtensionDatabase : RoomDatabase() {
    private val userDao by lazy { userDao() }
    val currentUsersFlow by lazy { userDao.observeCurrentUser() }
    private val extensionDao by lazy { extensionDao() }
    val extensionEnabledFlow by lazy { extensionDao.getExtensionFlow() }

    abstract fun userDao(): UserDao
    abstract fun extensionDao(): ExtensionDao

    suspend fun getUser(current: CurrentUser): User? {
        return userDao.getUser(current.type, current.extId, current.userId)?.user?.getOrNull()
    }

    companion object {
        private const val DATABASE_NAME = "extension-db"
        fun create(app: Application) = Room.databaseBuilder(
            app, ExtensionDatabase::class.java, DATABASE_NAME
        ).fallbackToDestructiveMigration(true).build()
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\db\UserDao.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.db

import androidx.room.Dao
import androidx.room.Delete
import androidx.room.Insert
import androidx.room.OnConflictStrategy
import androidx.room.Query
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.extensions.db.models.CurrentUser
import dev.brahmkshatriya.echo.extensions.db.models.UserEntity
import kotlinx.coroutines.flow.Flow

@Dao
interface UserDao {

    @Insert(onConflict = OnConflictStrategy.REPLACE)
    suspend fun setCurrentUser(currentUser: CurrentUser)

    @Query("SELECT * FROM CurrentUser")
    fun observeCurrentUser(): Flow<List<CurrentUser>>

    @Query("SELECT * FROM UserEntity WHERE type = :type AND extId = :extId")
    fun observeAllUsers(type: ExtensionType, extId: String): Flow<List<UserEntity>>

    @Query("SELECT * FROM CurrentUser WHERE extId = :extId AND type = :type")
    suspend fun getCurrentUser(type: ExtensionType, extId: String): CurrentUser?

    @Delete
    suspend fun deleteUser(user: UserEntity)

    @Insert(onConflict = OnConflictStrategy.REPLACE)
    suspend fun insertUsers(users: List<UserEntity>)

    @Query("SELECT * FROM UserEntity WHERE type = :type AND extId = :extId AND id = :userId")
    suspend fun getUser(type: ExtensionType, extId: String, userId: String?): UserEntity?

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\db\models\CurrentUser.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.db.models

import androidx.room.Entity
import dev.brahmkshatriya.echo.common.models.ExtensionType

@Entity(primaryKeys = ["type", "extId"])
data class CurrentUser(
    val type : ExtensionType,
    val extId: String,
    val userId: String?
)

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\db\models\ExtensionEntity.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.db.models

import androidx.room.Entity
import dev.brahmkshatriya.echo.common.models.ExtensionType

@Entity(primaryKeys = ["id", "type"])
data class ExtensionEntity(
    val id: String,
    val type : ExtensionType,
    val enabled : Boolean
)

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\db\models\UserEntity.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.db.models

import androidx.room.Entity
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.User
import dev.brahmkshatriya.echo.utils.Serializer.toData
import dev.brahmkshatriya.echo.utils.Serializer.toJson

@Entity(primaryKeys = ["id", "type", "extId"])
data class UserEntity(
    val type: ExtensionType,
    val extId: String,
    val id: String,
    val data: String
) {
    val user by lazy { data.toData<User>() }

    companion object {
        fun User.toEntity(type: ExtensionType, clientId: String) =
            UserEntity(type, clientId, id, toJson())

        fun UserEntity.toCurrentUser() =
            CurrentUser(type, extId, id)
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\exceptions\AppException.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.exceptions

import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.helpers.ClientException
import dev.brahmkshatriya.echo.common.models.Metadata

sealed class AppException : Exception() {

    abstract val extension: Metadata

    open class LoginRequired(
        override val extension: Metadata
    ) : AppException()

    class Unauthorized(
        override val extension: Metadata,
        val userId: String
    ) : LoginRequired(extension)

    class NotSupported(
        override val cause: Throwable,
        override val extension: Metadata,
        val operation: String
    ) : AppException() {
        override val message: String
            get() = "$operation is not supported in ${extension.name}"
    }

    class Other(
        override val cause: Throwable,
        override val extension: Metadata
    ) : AppException() {
        override val message: String
            get() = "${cause.message} error in ${extension.name}"
    }

    companion object {
        fun Throwable.toAppException(extension: Extension<*>) = toAppException(extension.metadata)
        fun Throwable.toAppException(extension: Metadata): AppException = when (this) {
            is ClientException.Unauthorized -> Unauthorized(extension, userId)
            is ClientException.LoginRequired -> LoginRequired(extension)
            is ClientException.NotSupported -> NotSupported(this, extension, operation)
            else -> Other(this, extension)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\exceptions\ExtensionLoaderException.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.exceptions

class ExtensionLoaderException(
    val clazz: String,
    val source: String,
    override val cause: Throwable
) : Exception()

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\exceptions\ExtensionNotFoundException.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.exceptions

class ExtensionNotFoundException(val id: String?) : Exception("Extension not found: $id")

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\exceptions\InvalidExtensionListException.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.exceptions

class InvalidExtensionListException(
    val link: String, override val cause: Throwable
) : Exception()

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\exceptions\RequiredExtensionsMissingException.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.exceptions

class RequiredExtensionsMissingException(val required: List<String>) :
    Exception("Missing required extensions: ${required.joinToString(", ")}")

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\repo\AppRepository.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.repo

import android.content.BroadcastReceiver
import android.content.Context
import android.content.Intent
import android.content.IntentFilter
import androidx.core.content.ContextCompat
import dev.brahmkshatriya.echo.common.clients.ExtensionClient
import dev.brahmkshatriya.echo.common.models.ImportType
import dev.brahmkshatriya.echo.common.models.Metadata
import dev.brahmkshatriya.echo.extensions.repo.ExtensionParser.Companion.FEATURE
import dev.brahmkshatriya.echo.extensions.repo.ExtensionParser.Companion.PACKAGE_FLAGS
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.channelFlow
import kotlinx.coroutines.launch
import kotlinx.coroutines.sync.Mutex
import kotlinx.coroutines.sync.withLock
import kotlinx.coroutines.withContext
import java.io.File
import java.util.WeakHashMap
import kotlin.coroutines.suspendCoroutine

class AppRepository(
    private val scope: CoroutineScope,
    private val context: Context,
    private val parser: ExtensionParser
) : ExtensionRepository {
    private suspend fun Context.getStaticPackages() = withContext(Dispatchers.IO) {
        runCatching {
            packageManager.getInstalledPackages(PACKAGE_FLAGS).mapNotNull {
                runCatching {
                    val isExtension = it.reqFeatures.orEmpty().any { featureInfo ->
                        featureInfo?.name?.startsWith(FEATURE) ?: false
                    }
                    if (isExtension) File(it.applicationInfo!!.sourceDir!!) else null
                }.getOrNull()
            }
        }.getOrNull().orEmpty()
    }

    private val map =
        WeakHashMap<String, Pair<String, Result<Pair<Metadata, Lazy<ExtensionClient>>>>>()
    private val mutex = Mutex()

    override suspend fun loadExtensions() = mutex.withLock {
        parser.getAllDynamically(ImportType.App, map, context.getStaticPackages())
    }

    override val flow = channelFlow {
        send(null)
        send(loadExtensions())
        suspendCoroutine {
            val receiver = Receiver {
                scope.launch {
                    send(loadExtensions())
                }
            }
            val filter = IntentFilter().apply {
                addAction(Intent.ACTION_PACKAGE_ADDED)
                addAction(Intent.ACTION_PACKAGE_REMOVED)
                addAction(Intent.ACTION_PACKAGE_REPLACED)
                addAction(Intent.ACTION_PACKAGE_CHANGED)
                addDataScheme("package")
            }
            ContextCompat.registerReceiver(
                context, receiver, filter, ContextCompat.RECEIVER_NOT_EXPORTED
            )
        }
    }


    class Receiver(private val onReceive: () -> Unit) : BroadcastReceiver() {
        override fun onReceive(context: Context?, intent: Intent?) = onReceive()
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\repo\CombinedRepository.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.repo

import android.content.Context
import dev.brahmkshatriya.echo.common.clients.ExtensionClient
import dev.brahmkshatriya.echo.common.models.Metadata
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.SharingStarted
import kotlinx.coroutines.flow.combine
import kotlinx.coroutines.flow.first
import kotlinx.coroutines.flow.stateIn
import java.io.File

class CombinedRepository(
    scope: CoroutineScope,
    context: Context,
    fileIgnoreFlow: Flow<File?>,
    extensionParser: ExtensionParser,
    vararg builtIns: Pair<Metadata, Lazy<ExtensionClient>>
) : ExtensionRepository {

    private val list = builtIns.map { Result.success(it) }
    private val appRepository = AppRepository(scope, context, extensionParser)
    private val fileRepository = FileRepository(context, extensionParser, fileIgnoreFlow)

    override val flow = fileRepository.flow.combine(appRepository.flow) { file, app ->
        if (app == null) return@combine null
        list + file + app
    }.stateIn(scope, SharingStarted.Lazily, list)

    override suspend fun loadExtensions() = flow.first { it != null } ?: list
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\repo\DexLoader.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.repo

import android.content.Context
import android.os.Build
import dalvik.system.DexClassLoader
import dev.brahmkshatriya.echo.common.models.Metadata
import java.io.File
import java.io.FileOutputStream
import java.lang.ref.WeakReference
import java.util.zip.ZipFile

class DexLoader(
    metadata: Metadata,
    context: Context,
    librarySearchPath: String =
        unloadLibraries(metadata, File(context.cacheDir, "libs")).absolutePath
) : DexClassLoader(
    metadata.path, context.cacheDir.absolutePath, librarySearchPath, context.classLoader
) {

    private val preservedPackages = metadata.preservedPackages
    override fun loadClass(name: String?, resolve: Boolean): Class<*> {
        if (name != null && preservedPackages.any { name.startsWith(it) }) {
            val loadedClass = classMap[name]?.get()
            if (loadedClass != null) return loadedClass
            val clazz = super.loadClass(name, resolve)
            classMap[name] = WeakReference(clazz)
            return clazz
        }
        return super.loadClass(name, resolve)
    }

    companion object {
        private val classMap = mutableMapOf<String, WeakReference<Class<*>>>()

        private fun unloadLibraries(
            metadata: Metadata, libFolder: File
        ): File {
            val targetAbi = Build.SUPPORTED_ABIS.first()
            if (!libFolder.exists()) libFolder.mkdirs()
            val libs = File(libFolder, metadata.id)
            val version = File(libs, "version.txt")
            if (version.exists() && version.readText() == metadata.version) return libs
            libs.deleteRecursively()
            extractLibsFromApk(metadata.path, targetAbi, libs).getOrThrow()
            version.writeText(metadata.version)
            return libs
        }

        private fun extractLibsFromApk(
            apkPath: String, targetAbi: String, outputFolder: File
        ) = runCatching {
            outputFolder.mkdirs()
            val apkFile = ZipFile(apkPath)
            val extractedFiles = mutableListOf<File>()
            apkFile.entries().iterator().forEach { entry ->
                if (entry.name.startsWith("lib/$targetAbi/") && entry.name.endsWith(".so")) {
                    val fileName = entry.name.substringAfterLast("/")
                    val outputFile = File(outputFolder, fileName)
                    apkFile.getInputStream(entry).use { input ->
                        FileOutputStream(outputFile).use { output ->
                            input.copyTo(output)
                        }
                    }
                    extractedFiles.add(outputFile)
                }
            }
            apkFile.close()
            extractedFiles
        }
    }

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\repo\ExtensionParser.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.repo

import android.content.Context
import android.content.pm.FeatureInfo
import android.content.pm.PackageManager
import android.os.Build
import dev.brahmkshatriya.echo.common.clients.ExtensionClient
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.ImageHolder.Companion.toImageHolder
import dev.brahmkshatriya.echo.common.models.ImportType
import dev.brahmkshatriya.echo.common.models.Metadata
import dev.brahmkshatriya.echo.extensions.exceptions.ExtensionLoaderException
import dev.brahmkshatriya.echo.utils.ShaUtils.getSha256
import java.io.File
import java.util.WeakHashMap

class ExtensionParser(
    private val context: Context,
) {

    fun getAllDynamically(
        type: ImportType,
        map: WeakHashMap<String, Pair<String, Result<Pair<Metadata, Lazy<ExtensionClient>>>>>,
        files: List<File>
    ): List<Result<Pair<Metadata, Lazy<ExtensionClient>>>> {
        val new = files.associate {
            val sha = runCatching { getSha256(it) }.getOrNull().orEmpty()
            val entry = map[it.absolutePath]
            val value = if (entry != null && entry.first == sha) entry
            else sha to parse(it, type)
            it.absolutePath to value
        }
        map.clear()
        map.putAll(new)
        return map.values.map { it.second }
    }

    private fun parse(source: File, importType: ImportType) = runCatching {
        runCatching {
            val metadata = parseManifest(source, importType)
            val lazy = lazy { loadFrom(metadata) }
            metadata to lazy
        }.getOrElse {
            throw ExtensionLoaderException(javaClass.simpleName, source.toString(), it)
        }
    }


    fun parseManifest(file: File, importType: ImportType): Metadata {
        val packageInfo =
            context.packageManager.getPackageArchiveInfo(file.absolutePath, PACKAGE_FLAGS)
                ?: error("Failed to get package info for ${file.absolutePath}")
        val metadata = packageInfo.applicationInfo!!.metaData!!
        val type = packageInfo.reqFeatures!!.toExtensionType()
        fun getOrNull(key: String) = metadata.getString(key)?.takeIf { it.isNotBlank() }
        fun get(key: String) = getOrNull(key)
            ?: error("$key not found in Metadata for ${packageInfo.packageName}")
        return Metadata(
            path = file.absolutePath,
            preservedPackages = getOrNull("preserved_packages")
                .orEmpty().split(",").mapNotNull { it.trim().ifEmpty { null } },
            className = get("class"),
            importType = importType,
            type = type,
            id = get("id"),
            version = get("version"),
            icon = getOrNull("icon_url")?.toImageHolder(),
            name = get("name"),
            description = get("description"),
            author = get("author"),
            authorUrl = getOrNull("author_url"),
            repoUrl = getOrNull("repo_url"),
            updateUrl = getOrNull("update_url"),
            isEnabled = metadata.getBoolean("enabled", true)
        )
    }

    private fun loadFrom(metadata: Metadata): ExtensionClient {
        val dexLoader = DexLoader(metadata, context)
        val clazz = dexLoader.loadClass(metadata.className)
        return clazz.getConstructor().newInstance() as ExtensionClient
    }

    companion object {

        @Suppress("Deprecation")
        val PACKAGE_FLAGS = PackageManager.GET_CONFIGURATIONS or
                PackageManager.GET_META_DATA or
                PackageManager.GET_SIGNATURES or
                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) PackageManager.GET_SIGNING_CERTIFICATES else 0

        const val FEATURE = "dev.brahmkshatriya.echo."
        private fun Array<FeatureInfo>.toExtensionType(): ExtensionType {
            val feature = first { it.name.startsWith(FEATURE) }
            val type = feature.name.substringAfter(FEATURE)
            return ExtensionType.entries.first { it.feature == type }
        }


    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\repo\ExtensionRepository.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.repo

import dev.brahmkshatriya.echo.common.clients.ExtensionClient
import dev.brahmkshatriya.echo.common.models.Metadata
import kotlinx.coroutines.flow.Flow

interface ExtensionRepository {
    val flow: Flow<List<Result<Pair<Metadata, Lazy<ExtensionClient>>>>?>
    suspend fun loadExtensions(): List<Result<Pair<Metadata, Lazy<ExtensionClient>>>>
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\extensions\repo\FileRepository.kt
================================================================================

package dev.brahmkshatriya.echo.extensions.repo

import android.content.Context
import dev.brahmkshatriya.echo.common.clients.ExtensionClient
import dev.brahmkshatriya.echo.common.models.ImportType
import dev.brahmkshatriya.echo.common.models.Metadata
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.channelFlow
import kotlinx.coroutines.flow.collectLatest
import kotlinx.coroutines.flow.flowOn
import kotlinx.coroutines.sync.Mutex
import kotlinx.coroutines.sync.withLock
import java.io.File
import java.util.WeakHashMap

class FileRepository(
    private val folder: File,
    private val parser: ExtensionParser,
    private val fileIgnoreFlow: Flow<File?>
) : ExtensionRepository {

    private val map =
        WeakHashMap<String, Pair<String, Result<Pair<Metadata, Lazy<ExtensionClient>>>>>()
    private val mutex = Mutex()

    private var toIgnoreFile: File? = null
    override val flow = channelFlow {
        send(loadExtensions())
        fileIgnoreFlow.collectLatest {
            toIgnoreFile = it
            send(loadExtensions())
        }
    }.flowOn(Dispatchers.IO)

    private fun loadAllApks() = folder.run {
        setReadOnly()
        listFiles()!!.filter {
            it != toIgnoreFile && it.extension == "apk"
        }.onEach { it.setWritable(false) }
    }

    override suspend fun loadExtensions() = mutex.withLock {
        parser.getAllDynamically(ImportType.File, map, loadAllApks())
    }

    constructor(
        context: Context, parser: ExtensionParser, fileIgnoreFlow: Flow<File?>
    ) : this(context.getExtensionsFileDir(), parser, fileIgnoreFlow)

    companion object {
        fun Context.getExtensionsFileDir() = File(filesDir, "extensions").apply { mkdirs() }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\AndroidAutoCallback.kt
================================================================================

package dev.brahmkshatriya.echo.playback

import android.content.ContentResolver
import android.content.Context
import android.content.res.Resources
import android.net.Uri
import androidx.annotation.CallSuper
import androidx.annotation.OptIn
import androidx.core.net.toUri
import androidx.core.os.bundleOf
import androidx.media3.common.MediaItem
import androidx.media3.common.MediaMetadata
import androidx.media3.common.util.UnstableApi
import androidx.media3.session.LibraryResult
import androidx.media3.session.MediaLibraryService
import androidx.media3.session.MediaLibraryService.MediaLibrarySession
import androidx.media3.session.MediaSession
import androidx.media3.session.SessionError
import com.google.common.collect.ImmutableList
import com.google.common.util.concurrent.Futures
import com.google.common.util.concurrent.ListenableFuture
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.clients.AlbumClient
import dev.brahmkshatriya.echo.common.clients.ArtistClient
import dev.brahmkshatriya.echo.common.clients.ExtensionClient
import dev.brahmkshatriya.echo.common.clients.HomeFeedClient
import dev.brahmkshatriya.echo.common.clients.LibraryFeedClient
import dev.brahmkshatriya.echo.common.clients.PlaylistClient
import dev.brahmkshatriya.echo.common.clients.RadioClient
import dev.brahmkshatriya.echo.common.clients.SearchFeedClient
import dev.brahmkshatriya.echo.common.helpers.PagedData
import dev.brahmkshatriya.echo.common.models.Album
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.ImageHolder
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Radio
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.isClient
import dev.brahmkshatriya.echo.extensions.MediaState
import dev.brahmkshatriya.echo.extensions.builtin.offline.OfflineExtension
import dev.brahmkshatriya.echo.utils.CacheUtils.getFromCache
import dev.brahmkshatriya.echo.utils.CacheUtils.saveToCache
import dev.brahmkshatriya.echo.utils.CoroutineUtils.await
import dev.brahmkshatriya.echo.utils.CoroutineUtils.future
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.flow.StateFlow
import java.util.WeakHashMap

@UnstableApi
abstract class AndroidAutoCallback(
    open val app: App,
    open val scope: CoroutineScope,
    open val extensionList: StateFlow<List<MusicExtension>>,
    open val downloadFlow: StateFlow<List<Downloader.Info>>
) : MediaLibrarySession.Callback {

    val context get() = app.context

    @CallSuper
    override fun onGetLibraryRoot(
        session: MediaLibrarySession,
        browser: MediaSession.ControllerInfo,
        params: MediaLibraryService.LibraryParams?
    ): ListenableFuture<LibraryResult<MediaItem>> {
        return Futures.immediateFuture(
            LibraryResult.ofItem(browsableItem(ROOT, "", browsable = false), null)
        )
    }

    @OptIn(UnstableApi::class)
    @CallSuper
    override fun onGetChildren(
        session: MediaLibrarySession,
        browser: MediaSession.ControllerInfo,
        parentId: String,
        page: Int,
        pageSize: Int,
        params: MediaLibraryService.LibraryParams?
    ): ListenableFuture<LibraryResult<ImmutableList<MediaItem>>> = scope.future {
        val extensions = extensionList.value
        if (parentId == ROOT) return@future LibraryResult.ofItemList(
            extensions.map { it.toMediaItem(context) },
            null
        )
        val extId = parentId.substringAfter("$ROOT/").substringBefore("/")
        val extension = extensions.first { it.id == extId }
        val searchQuery = params?.extras?.getString("search_query") ?: ""
        val type = parentId.substringAfter("$extId/").substringBefore("/")
        when (type) {
            ALBUM -> extension.getList<AlbumClient> {
                val id = parentId.substringAfter("$ALBUM/").substringBefore("/")
                val unloaded = itemMap[id] as Album
                getTracks(context, id, page) {
                    val album = loadAlbum(unloaded)
                    album to loadTracks(album)
                }
            }

            PLAYLIST -> extension.getList<PlaylistClient> {
                val id = parentId.substringAfter("$PLAYLIST/").substringBefore("/")
                val unloaded = itemMap[id] as Playlist
                getTracks(context, id, page) {
                    val playlist = loadPlaylist(unloaded)
                    playlist to loadTracks(playlist)
                }
            }

            RADIO -> extension.getList<RadioClient> {
                val id = parentId.substringAfter("$RADIO/").substringBefore("/")
                val radio = itemMap[id] as Radio
                getTracks(context, id, page) {
                    radio to loadTracks(radio)
                }
            }

            ARTIST -> extension.getList<ArtistClient> {
                val id = parentId.substringAfter("$ARTIST/").substringBefore("/")
                val artist = loadArtist(Artist(id, ""))
                loadFeed(artist).toMediaItems(artist.id, context, extId, page)
            }

            LIST -> extension.getList<ExtensionClient> {
                val id = parentId.substringAfter("$LIST/").substringBefore("/")
                getListsItems(context, id, extId)
            }

            SHELF -> extension.getList<ExtensionClient> {
                val id = parentId.substringAfter("$SHELF/").substringBefore("/")
                getShelfItems(context, id, extId, page)
            }

            HOME -> extension.getFeed<HomeFeedClient>(
                context, parentId, HOME, page
            ) { loadHomeFeed() }

            LIBRARY -> extension.getFeed<LibraryFeedClient>(
                context, parentId, LIBRARY, page
            ) { loadLibraryFeed() }

            SEARCH -> extension.getFeed<SearchFeedClient>(
                context, parentId, SEARCH, page
            ) { loadSearchFeed(searchQuery) }

            else -> LibraryResult.ofItemList(
                listOfNotNull(
                    if (extension.isClient<HomeFeedClient>())
                        browsableItem("$ROOT/$extId/$HOME", context.getString(R.string.home))
                    else null,
                    if (extension.isClient<SearchFeedClient>())
                        browsableItem("$ROOT/$extId/$SEARCH", context.getString(R.string.search))
                    else null,
                    if (extension.isClient<LibraryFeedClient>())
                        browsableItem("$ROOT/$extId/$LIBRARY", context.getString(R.string.library))
                    else null,
                ),
                null
            )
        }
    }

    @OptIn(UnstableApi::class)
    @CallSuper
    override fun onGetSearchResult(
        session: MediaLibrarySession,
        browser: MediaSession.ControllerInfo,
        query: String,
        page: Int,
        pageSize: Int,
        params: MediaLibraryService.LibraryParams?
    ): ListenableFuture<LibraryResult<ImmutableList<MediaItem>>> {
        return scope.future {
            val extensions = extensionList.value
            LibraryResult.ofItemList(
                extensions.map { ext ->
                    browsableItem("$ROOT/${ext.id}/$SEARCH", ext.name, query)
                },
                MediaLibraryService.LibraryParams.Builder()
                    .setExtras(bundleOf("search_query" to query))
                    .build()
            )
        }
    }

    @CallSuper
    override fun onSetMediaItems(
        mediaSession: MediaSession,
        controller: MediaSession.ControllerInfo,
        mediaItems: MutableList<MediaItem>,
        startIndex: Int,
        startPositionMs: Long
    ) = scope.future {
        val new = mediaItems.mapNotNull {
            if (it.mediaId.startsWith("auto/")) {
                val id = it.mediaId.substringAfter("auto/")
                val (track, extId, con) =
                    context.getFromCache<Triple<Track, String, EchoMediaItem?>>(id, "auto")
                        ?: return@mapNotNull null
                MediaItemUtils.build(
                    app,
                    downloadFlow.value,
                    MediaState.Unloaded(extId, track),
                    con
                )
            } else it
        }
        val future = super.onSetMediaItems(
            mediaSession, controller, new, startIndex, startPositionMs
        )
        future.await(context)
    }

    companion object {
        private const val ROOT = "root"
        private const val LIBRARY = "library"
        private const val HOME = "home"
        private const val SEARCH = "search"
        private const val FEED = "feed"
        private const val SHELF = "shelf"
        private const val LIST = "list"

        private const val ARTIST = "artist"
        private const val USER = "user"
        private const val ALBUM = "album"
        private const val PLAYLIST = "playlist"
        private const val RADIO = "radio"

        private fun Resources.getUri(int: Int): Uri {
            val scheme = ContentResolver.SCHEME_ANDROID_RESOURCE
            val pkg = getResourcePackageName(int)
            val type = getResourceTypeName(int)
            val name = getResourceEntryName(int)
            val uri = "$scheme://$pkg/$type/$name"
            return uri.toUri()
        }

        private fun ImageHolder.toUri(context: Context) = when (this) {
            is ImageHolder.ResourceUriImageHolder -> uri.toUri()
            is ImageHolder.NetworkRequestImageHolder -> request.url.toUri()
            is ImageHolder.ResourceIdImageHolder -> context.resources.getUri(resId)
            is ImageHolder.HexColorImageHolder -> "".toUri()
        }

        private fun browsableItem(
            id: String,
            title: String,
            subtitle: String? = null,
            browsable: Boolean = true,
            artWorkUri: Uri? = null,
            type: Int = MediaMetadata.MEDIA_TYPE_FOLDER_MIXED
        ) = MediaItem.Builder()
            .setMediaId(id)
            .setMediaMetadata(
                MediaMetadata.Builder()
                    .setIsPlayable(false)
                    .setIsBrowsable(browsable)
                    .setMediaType(type)
                    .setTitle(title)
                    .setSubtitle(subtitle)
                    .setArtworkUri(artWorkUri)
                    .build()
            )
            .build()

        private fun Track.toItem(
            context: Context, extensionId: String, con: EchoMediaItem? = null
        ): MediaItem {
            context.saveToCache(id, Triple(this, extensionId, con), "auto")
            return MediaItem.Builder()
                .setMediaId("auto/$id")
                .setMediaMetadata(
                    MediaMetadata.Builder()
                        .setIsPlayable(true)
                        .setIsBrowsable(false)
                        .setMediaType(MediaMetadata.MEDIA_TYPE_MUSIC)
                        .setTitle(title)
                        .setArtist(subtitleWithE)
                        .setAlbumTitle(album?.title)
                        .setArtworkUri(cover?.toUri(context))
                        .build()
                ).build()
        }

        private suspend fun Extension<*>.toMediaItem(context: Context) = browsableItem(
            "$ROOT/$id", name, context.getString(R.string.extension),
            instance.value().isSuccess,
            metadata.icon?.toUri(context)
        )

        @OptIn(UnstableApi::class)
        val notSupported =
            LibraryResult.ofError<ImmutableList<MediaItem>>(SessionError.ERROR_NOT_SUPPORTED)

        @OptIn(UnstableApi::class)
        val errorIo = LibraryResult.ofError<ImmutableList<MediaItem>>(SessionError.ERROR_IO)

        suspend inline fun <reified C> Extension<*>.getList(
            block: C.() -> List<MediaItem>
        ): LibraryResult<ImmutableList<MediaItem>> = runCatching {
            val client = instance.value().getOrThrow() as? C ?: return@runCatching notSupported
            LibraryResult.ofItemList(
                client.block(),
                MediaLibraryService.LibraryParams.Builder()
                    .setOffline(client is OfflineExtension)
                    .build()
            )
        }.getOrElse {
            it.printStackTrace()
            errorIo
        }


        private val itemMap = WeakHashMap<String, EchoMediaItem>()
        private fun EchoMediaItem.toMediaItem(
            context: Context, extId: String
        ): MediaItem = when (this) {
            is Track -> toItem(context, extId)
            else -> {
                val id = hashCode().toString()
                itemMap[id] = this
                val (page, type) = when (this) {
                    is Artist, is Radio -> USER to MediaMetadata.MEDIA_TYPE_MIXED
                    is Album -> ALBUM to MediaMetadata.MEDIA_TYPE_ALBUM
                    is Playlist -> PLAYLIST to MediaMetadata.MEDIA_TYPE_PLAYLIST
                    else -> throw IllegalStateException("Invalid type")
                }
                browsableItem(
                    "$ROOT/$extId/$page/$id",
                    title,
                    subtitleWithE,
                    true,
                    cover?.toUri(context),
                    type
                )
            }
        }

        private val listsMap = WeakHashMap<String, Shelf.Lists<*>>()
        private fun getListsItems(
            context: Context, id: String, extId: String
        ) = run {
            val shelf = listsMap[id]!!
            when (shelf) {
                is Shelf.Lists.Categories -> shelf.list.map { it.toMediaItem(context, extId) }
                is Shelf.Lists.Items -> shelf.list.map { it.toMediaItem(context, extId) }
                is Shelf.Lists.Tracks -> shelf.list.map { it.toItem(context, extId) }
            } + listOfNotNull(
                if (shelf.more != null) {
                    val moreId = shelf.id
                    feedMap[moreId] = shelf.more
                    browsableItem(
                        "$ROOT/$extId/$FEED/$moreId",
                        context.getString(R.string.more)
                    )
                } else null
            )
        }

        private fun Shelf.toMediaItem(
            context: Context, extId: String
        ): MediaItem = when (this) {
            is Shelf.Category -> {
                val items = feed
                if (items != null) feedMap[id] = items
                browsableItem("$ROOT/$extId/$FEED/$id", title, subtitle, items != null)
            }

            is Shelf.Item -> media.toMediaItem(context, extId)
            is Shelf.Lists<*> -> {
                val id = "${id.hashCode()}"
                listsMap[id] = this
                browsableItem("$ROOT/$extId/$LIST/$id", title, subtitle)
            }
        }


        // THIS PROBABLY BREAKS GOING BACK TBH, NEED TO TEST
        private val shelvesMap = WeakHashMap<String, PagedData<Shelf>>()
        private val continuations = WeakHashMap<Pair<String, Int>, String?>()
        private suspend fun getShelfItems(
            context: Context, id: String, extId: String, page: Int
        ): List<MediaItem> {
            val shelf = shelvesMap[id]!!
            val (list, next) = shelf.loadPage(continuations[id to page])
            continuations[id to page + 1] = next
            return listOfNotNull(
                *list.map { it.toMediaItem(context, extId) }.toTypedArray()
            )
        }

        private val feedMap = WeakHashMap<String, Feed<Shelf>>()
        private suspend fun Feed<Shelf>.toMediaItems(
            id: String, context: Context, extId: String, page: Int
        ): List<MediaItem> {
            val id = "${id.hashCode()}"
            feedMap[id] = this
            //TODO
            return listOf()
        }

        private suspend inline fun <reified T> Extension<*>.getFeed(
            context: Context,
            parentId: String,
            page: String,
            pageNumber: Int,
            getFeed: T.() -> Feed<Shelf>
        ) = getList<T> {
            TODO()
        }

        private val tracksMap = WeakHashMap<String, Pair<EchoMediaItem, PagedData<Track>>>()
        private suspend fun getTracks(
            context: Context,
            id: String,
            page: Int,
            getTracks: suspend () -> Pair<EchoMediaItem, Feed<Track>?>
        ): List<MediaItem> {
            val (item, tracks) = tracksMap.getOrPut(id) {
                val tracks = getTracks().run {
                    first to (second?.run { getPagedData(tabs.firstOrNull()) }?.pagedData
                        ?: PagedData.empty())
                }
                tracksMap[id] = tracks
                tracks
            }
            val (list, next) = tracks.loadPage(continuations[id to page])
            continuations[id to page + 1] = next
            return list.map { it.toItem(context, id, item) }
        }
    }

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\MediaItemUtils.kt
================================================================================

package dev.brahmkshatriya.echo.playback

import android.content.Context
import android.content.SharedPreferences
import android.net.Uri
import android.os.Bundle
import androidx.annotation.OptIn
import androidx.core.net.toUri
import androidx.core.os.bundleOf
import androidx.media3.common.C
import androidx.media3.common.MediaItem
import androidx.media3.common.MediaMetadata
import androidx.media3.common.MimeTypes
import androidx.media3.common.ThumbRating
import androidx.media3.common.util.UnstableApi
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.ImageHolder
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.extensions.MediaState
import dev.brahmkshatriya.echo.playback.PlayerService.Companion.selectServerIndex
import dev.brahmkshatriya.echo.utils.Serializer.getSerialized
import dev.brahmkshatriya.echo.utils.Serializer.putSerialized
import dev.brahmkshatriya.echo.utils.Serializer.toData
import dev.brahmkshatriya.echo.utils.Serializer.toJson
import kotlinx.serialization.Serializable
import kotlin.io.encoding.Base64
import kotlin.text.Charsets.UTF_8

object MediaItemUtils {

    fun build(
        app: App,
        downloads: List<Downloader.Info>,
        state: MediaState.Unloaded<Track>,
        context: EchoMediaItem?,
    ): MediaItem {
        val item = MediaItem.Builder()
        val metadata = state.toMetaData(bundleOf(), downloads, context, false, app)
        item.setMediaMetadata(metadata)
        item.setMediaId(state.item.id)
        item.setUri(state.item.id)
        return item.build()
    }

    fun buildLoaded(
        app: App,
        downloads: List<Downloader.Info>,
        mediaItem: MediaItem,
        state: MediaState.Loaded<Track>,
    ): MediaItem = with(mediaItem) {
        val item = buildUpon()
        val metadata = state.toMetaData(
            mediaMetadata.extras!!, downloads, context, true, app
        )
        item.setMediaMetadata(metadata)
        return item.build()
    }

    fun buildServer(mediaItem: MediaItem, index: Int): MediaItem = with(mediaItem) {
        val bundle = Bundle().apply {
            putAll(mediaMetadata.extras!!)
            putInt("serverIndex", index)
            putInt("retries", 0)
        }
        buildWithBundle(this, bundle)
    }

    fun buildSource(mediaItem: MediaItem, index: Int) = with(mediaItem) {
        val bundle = Bundle().apply {
            putAll(mediaMetadata.extras!!)
            putInt("sourceIndex", index)
            putInt("retries", 0)
        }
        buildWithBundle(this, bundle)
    }

    fun buildBackground(mediaItem: MediaItem, index: Int): MediaItem = with(mediaItem) {
        val bundle = Bundle().apply {
            putAll(mediaMetadata.extras!!)
            putInt("backgroundIndex", index)
        }
        buildWithBundle(this, bundle)
    }

    fun buildSubtitle(mediaItem: MediaItem, index: Int): MediaItem = with(mediaItem) {
        val bundle = Bundle().apply {
            putAll(mediaMetadata.extras!!)
            putInt("subtitleIndex", index)
        }
        buildWithBundle(this, bundle)
    }


    fun withRetry(item: MediaItem): MediaItem {
        val bundle = Bundle().apply {
            putAll(item.mediaMetadata.extras!!)
            val retries = getInt("retries") + 1
            putBoolean("loaded", false)
            putInt("retries", retries)
        }
        return buildWithBundle(item, bundle)
    }

    private fun buildWithBundle(mediaItem: MediaItem, bundle: Bundle) = run {
        val item = mediaItem.buildUpon()
        val metadata =
            mediaItem.mediaMetadata.buildUpon().setExtras(bundle).setSubtitle(bundle.indexes())
                .build()
        item.setMediaMetadata(metadata)
        item.build()
    }

    @Serializable
    data class Key(val trackId: String, val sourceIndex: Int, val extensionId: String)

    fun String.toKey() = runCatching {
        Base64.decode(this).toString(UTF_8).toData<Key>().getOrThrow()
    }

    fun buildForSource(
        mediaItem: MediaItem, index: Int, source: Streamable.Source?,
    ) = with(mediaItem) {
        val item = buildUpon()
        item.setUri(Base64.encode(Key(track.id, index, extensionId).toJson().toByteArray()))
        when (val decryption = (source as? Streamable.Source.Http)?.decryption) {
            null -> {}
            is Streamable.Decryption.Widevine -> {
                val drmRequest = decryption.license
                val config = MediaItem.DrmConfiguration.Builder(C.WIDEVINE_UUID)
                    .setLicenseUri(drmRequest.url).setMultiSession(decryption.isMultiSession)
                    .setLicenseRequestHeaders(drmRequest.headers).build()
                item.setDrmConfiguration(config)
            }
        }
        item.build()
    }

    fun buildWithBackgroundAndSubtitle(
        mediaItem: MediaItem,
        background: Streamable.Media.Background?,
        subtitle: Streamable.Media.Subtitle?,
    ) = with(mediaItem) {
        val bundle = mediaMetadata.extras!!
        bundle.putSerialized("background", background)
        val item = buildUpon()
        item.setSubtitleConfigurations(
            if (subtitle == null) listOf()
            else listOf(
                MediaItem.SubtitleConfiguration.Builder(subtitle.url.toUri())
                    .setMimeType(subtitle.type.toMimeType())
                    .setSelectionFlags(C.SELECTION_FLAG_DEFAULT).build()
            )
        )
        item.build()
    }


    @OptIn(UnstableApi::class)
    private fun MediaState<Track>.toMetaData(
        bundle: Bundle,
        downloads: List<Downloader.Info>,
        context: EchoMediaItem? = bundle.getSerialized<EchoMediaItem>("context")?.getOrNull(),
        loaded: Boolean = bundle.getBoolean("loaded"),
        app: App,
        serverIndex: Int? = null,
        backgroundIndex: Int? = null,
        subtitleIndex: Int? = null,
    ) = with(item) {
        val isLiked = (this@toMetaData as? MediaState.Loaded<*>)?.isLiked == true
        MediaMetadata.Builder()
            .setTitle(title)
            .setAlbumTitle(album?.title)
            .setAlbumArtist(album?.artists?.joinToString(", ") { it.name })
            .setArtist(artists.joinToString(", ") { it.name })
            .setArtworkUri(cover?.toUriWithJson())
            .setUserRating(
                if (isLiked) ThumbRating(true) else ThumbRating()
            )
            .setExtras(Bundle().apply {
                putAll(bundle)
                putSerialized("unloadedCover", bundle.stateNullable?.item?.cover)
                putSerialized("state", this@toMetaData)
                putSerialized("context", context)
                putBoolean("loaded", loaded)
                putInt("subtitleIndex", subtitleIndex ?: 0.takeIf { subtitles.isNotEmpty() } ?: -1)
                putInt(
                    "backgroundIndex", backgroundIndex ?: 0.takeIf {
                        backgrounds.isNotEmpty() && app.settings.showBackground()
                    } ?: -1
                )
                val downloaded =
                    downloads.filter { it.download.trackId == id }
                        .mapNotNull { it.download.finalFile }
                putInt(
                    "serverIndex",
                    serverIndex ?: selectServerIndex(app, extensionId, servers, downloaded)
                )
                putSerialized("downloaded", downloaded)
            })
            .setSubtitle(bundle.indexes())
            .setMediaType(MediaMetadata.MEDIA_TYPE_MUSIC)
            .setIsPlayable(true)
            .setIsBrowsable(false)
            .build()
    }

    private fun Bundle.indexes() =
        "${getInt("serverIndex")} ${getInt("sourceIndex")} ${getInt("backgroundIndex")} ${getInt("subtitleIndex")}"

    private val Bundle?.stateNullable
        get() = this?.getSerialized<MediaState<Track>>("state")?.getOrNull()
    val Bundle?.state get() = requireNotNull(stateNullable)
    val Bundle?.track get() = state.item
    val Bundle?.isLoaded get() = this?.getBoolean("loaded") ?: false
    val Bundle?.extensionId get() = state.extensionId
    val Bundle?.context get() = this?.getSerialized<EchoMediaItem?>("context")?.getOrNull()
    val Bundle?.serverIndex get() = this?.getInt("serverIndex", -1) ?: -1
    val Bundle?.sourceIndex get() = this?.getInt("sourceIndex", -1) ?: -1
    val Bundle?.backgroundIndex get() = this?.getInt("backgroundIndex", -1) ?: -1
    val Bundle?.subtitleIndex get() = this?.getInt("subtitleIndex", -1) ?: -1
    val Bundle?.background
        get() = this?.getSerialized<Streamable.Media.Background?>("background")?.getOrNull()
    val Bundle?.retries get() = this?.getInt("retries") ?: 0
    val Bundle?.unloadedCover
        get() = this?.getSerialized<ImageHolder?>("unloadedCover")?.getOrNull()
    val Bundle?.downloaded get() = this?.getSerialized<List<String>>("downloaded")?.getOrNull()

    val MediaItem.state get() = mediaMetadata.extras.state
    val MediaItem.track get() = mediaMetadata.extras.track
    val MediaItem.extensionId get() = mediaMetadata.extras.extensionId
    val MediaItem.context get() = mediaMetadata.extras.context
    val MediaItem.isLoaded get() = mediaMetadata.extras.isLoaded
    val MediaItem.serverIndex get() = mediaMetadata.extras.serverIndex
    val MediaItem.sourceIndex get() = mediaMetadata.extras.sourceIndex
    val MediaItem.backgroundIndex get() = mediaMetadata.extras.backgroundIndex
    val MediaItem.subtitleIndex get() = mediaMetadata.extras.subtitleIndex
    val MediaItem.background get() = mediaMetadata.extras.background
    val MediaMetadata.isLiked get() = (userRating as? ThumbRating)?.isThumbsUp == true
    val MediaItem.isLiked get() = mediaMetadata.isLiked
    val MediaItem.retries get() = mediaMetadata.extras.retries
    val MediaItem.unloadedCover get() = mediaMetadata.extras.unloadedCover
    val MediaItem.downloaded get() = mediaMetadata.extras.downloaded

    private fun Streamable.SubtitleType.toMimeType() = when (this) {
        Streamable.SubtitleType.VTT -> MimeTypes.TEXT_VTT
        Streamable.SubtitleType.SRT -> MimeTypes.APPLICATION_SUBRIP
        Streamable.SubtitleType.ASS -> MimeTypes.TEXT_SSA
    }

    private fun ImageHolder.toUriWithJson(): Uri {
        val main = when (this) {
            is ImageHolder.ResourceUriImageHolder -> uri
            is ImageHolder.NetworkRequestImageHolder -> request.url
            is ImageHolder.ResourceIdImageHolder -> "res://$resId"
            is ImageHolder.HexColorImageHolder -> ""
        }.toUri()
        val json = toJson()
        return main.buildUpon().appendQueryParameter("actual_data", json).build()
    }

    const val SHOW_BACKGROUND = "show_background"
    fun SharedPreferences?.showBackground() = this?.getBoolean(SHOW_BACKGROUND, true) ?: true

    fun MediaItem.serverWithDownloads(
        context: Context,
    ) = track.servers + listOfNotNull(
        Streamable.server(
            "DOWNLOADED", Int.MAX_VALUE, context.getString(R.string.downloads)
        ).takeIf { !downloaded.isNullOrEmpty() }
    )
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\PlayerCallback.kt
================================================================================

package dev.brahmkshatriya.echo.playback

import android.content.Context
import android.content.Intent
import android.graphics.drawable.Drawable
import android.os.Bundle
import android.widget.Toast
import androidx.annotation.OptIn
import androidx.core.graphics.drawable.toBitmap
import androidx.core.graphics.scale
import androidx.core.os.bundleOf
import androidx.media3.common.Player
import androidx.media3.common.Rating
import androidx.media3.common.ThumbRating
import androidx.media3.common.util.UnstableApi
import androidx.media3.session.MediaButtonReceiver
import androidx.media3.session.MediaSession
import androidx.media3.session.MediaSession.MediaItemsWithStartPosition
import androidx.media3.session.SessionCommand
import androidx.media3.session.SessionError
import androidx.media3.session.SessionResult
import androidx.media3.session.SessionResult.RESULT_SUCCESS
import com.google.common.util.concurrent.Futures
import com.google.common.util.concurrent.ListenableFuture
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.clients.AlbumClient
import dev.brahmkshatriya.echo.common.clients.ArtistClient
import dev.brahmkshatriya.echo.common.clients.LikeClient
import dev.brahmkshatriya.echo.common.clients.PlaylistClient
import dev.brahmkshatriya.echo.common.clients.RadioClient
import dev.brahmkshatriya.echo.common.clients.TrackClient
import dev.brahmkshatriya.echo.common.helpers.PagedData
import dev.brahmkshatriya.echo.common.models.Album
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Feed.Companion.pagedDataOfFirst
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Radio
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.get
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getAs
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtension
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtensionOrThrow
import dev.brahmkshatriya.echo.extensions.MediaState
import dev.brahmkshatriya.echo.playback.MediaItemUtils.extensionId
import dev.brahmkshatriya.echo.playback.MediaItemUtils.track
import dev.brahmkshatriya.echo.playback.ResumptionUtils.recoverPlaylist
import dev.brahmkshatriya.echo.playback.ResumptionUtils.recoverRepeat
import dev.brahmkshatriya.echo.playback.ResumptionUtils.recoverShuffle
import dev.brahmkshatriya.echo.playback.ResumptionUtils.recoverTracks
import dev.brahmkshatriya.echo.playback.exceptions.PlayerException
import dev.brahmkshatriya.echo.playback.listener.PlayerRadio
import dev.brahmkshatriya.echo.utils.CoroutineUtils.future
import dev.brahmkshatriya.echo.utils.Serializer.getSerialized
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadDrawable
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.Job
import kotlinx.coroutines.delay
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.launch
import kotlinx.coroutines.withContext


@OptIn(UnstableApi::class)
class PlayerCallback(
    override val app: App,
    override val scope: CoroutineScope,
    private val throwableFlow: MutableSharedFlow<Throwable>,
    private val extensions: ExtensionLoader,
    private val radioFlow: MutableStateFlow<PlayerState.Radio>,
    override val downloadFlow: StateFlow<List<Downloader.Info>>,
) : AndroidAutoCallback(app, scope, extensions.music, downloadFlow) {

    override fun onConnect(
        session: MediaSession, controller: MediaSession.ControllerInfo,
    ): MediaSession.ConnectionResult {
        val sessionCommands = with(PlayerCommands) {
            MediaSession.ConnectionResult.DEFAULT_SESSION_AND_LIBRARY_COMMANDS.buildUpon()
                .add(likeCommand).add(unlikeCommand).add(repeatCommand).add(repeatOffCommand)
                .add(repeatOneCommand).add(radioCommand).add(sleepTimer)
                .add(playCommand).add(addToQueueCommand).add(addToNextCommand)
                .add(resumeCommand).add(imageCommand)
                .build()
        }
        return MediaSession.ConnectionResult.AcceptedResultBuilder(session)
            .setAvailableSessionCommands(sessionCommands).build()
    }

    override fun onCustomCommand(
        session: MediaSession,
        controller: MediaSession.ControllerInfo,
        customCommand: SessionCommand,
        args: Bundle,
    ): ListenableFuture<SessionResult> = with(PlayerCommands) {
        val player = session.player
        when (customCommand) {
            likeCommand -> onSetRating(session, controller, ThumbRating(true))
            unlikeCommand -> onSetRating(session, controller, ThumbRating())
            repeatOffCommand -> setRepeat(player, Player.REPEAT_MODE_OFF)
            repeatOneCommand -> setRepeat(player, Player.REPEAT_MODE_ONE)
            repeatCommand -> setRepeat(player, Player.REPEAT_MODE_ALL)
            playCommand -> playItem(player, args)
            addToQueueCommand -> addToQueue(player, args)
            addToNextCommand -> addToNext(player, args)
            radioCommand -> radio(player, args)
            sleepTimer -> onSleepTimer(player, args.getLong("ms"))
            resumeCommand -> resume(player, args.getBoolean("cleared", true))
            imageCommand -> getImage(player)
            else -> super.onCustomCommand(session, controller, customCommand, args)
        }
    }

    private fun getImage(player: Player) = scope.future {
        val item = player.with { currentMediaItem }
            ?: context.recoverPlaylist(app, downloadFlow.value, false).run { first.getOrNull(second) }
            ?: return@future SessionResult(SessionError.ERROR_UNKNOWN)
        val image = item.track.cover.loadDrawable(context)?.toScaledBitmap(720)
        SessionResult(RESULT_SUCCESS, Bundle().apply { putParcelable("image", image) })
    }

    private fun Drawable.toScaledBitmap(width: Int) = toBitmap().let { bmp ->
        val ratio = width.toFloat() / bmp.width
        val height = (bmp.height * ratio).toInt()
        bmp.scale(width, height)
    }

    private fun resume(player: Player, withClear: Boolean) = scope.future {
        withContext(Dispatchers.Main) {
            player.shuffleModeEnabled = context.recoverShuffle() == true
            player.repeatMode = context.recoverRepeat() ?: Player.REPEAT_MODE_OFF
        }
        val (items, index, pos) = context.recoverPlaylist(app,downloadFlow.value, withClear)
        withContext(Dispatchers.Main) {
            player.setMediaItems(items, index, pos)
            player.prepare()
        }
        SessionResult(RESULT_SUCCESS)
    }

    private var timerJob: Job? = null
    private fun onSleepTimer(player: Player, ms: Long): ListenableFuture<SessionResult> {
        timerJob?.cancel()
        val time = when (ms) {
            0L -> return Futures.immediateFuture(SessionResult(RESULT_SUCCESS))
            Long.MAX_VALUE -> player.run { duration - currentPosition }
            else -> ms
        }

        timerJob = scope.launch {
            delay(time)
            player.with { pause() }
        }
        return Futures.immediateFuture(SessionResult(RESULT_SUCCESS))
    }

    private fun setRepeat(player: Player, repeat: Int) = run {
        player.repeatMode = repeat
        Futures.immediateFuture(SessionResult(RESULT_SUCCESS))
    }


    @OptIn(UnstableApi::class)
    private fun radio(player: Player, args: Bundle) = scope.future {
        val error = SessionResult(SessionError.ERROR_UNKNOWN)
        val extId = args.getString("extId") ?: return@future error
        val item = args.getSerialized<EchoMediaItem>("item")?.getOrNull() ?: return@future error
        val itemLoaded = args.getBoolean("loaded", false)
        val extension = extensions.music.getExtension(extId) ?: return@future error
        val newItem = if (itemLoaded) item else loadItem(extension, item)
        radioFlow.value = PlayerState.Radio.Loading
        val loaded = PlayerRadio.start(
            throwableFlow, extension, newItem, null
        )
        if (loaded == null) return@future error
        player.with {
            clearMediaItems()
            shuffleModeEnabled = false
        }
        PlayerRadio.play(player, downloadFlow, app, radioFlow, loaded)
        player.with { play() }
        SessionResult(RESULT_SUCCESS)
    }

    private suspend fun loadItem(
        extension: Extension<*>, item: EchoMediaItem,
    ) = when (item) {
        is Track -> extension.getAs<TrackClient, EchoMediaItem> { loadTrack(item, false) }
        is Album -> extension.getAs<AlbumClient, EchoMediaItem> { loadAlbum(item) }
        is Playlist -> extension.getAs<PlaylistClient, EchoMediaItem> { loadPlaylist(item) }
        is Artist -> extension.getAs<ArtistClient, EchoMediaItem> { loadArtist(item) }
        is Radio -> throw IllegalStateException()
    }.getOrThrow()

    private suspend fun listTracks(
        extension: Extension<*>, item: EchoMediaItem, loaded: Boolean,
    ) = when (item) {
        is Album -> extension.getAs<AlbumClient, PagedData<Track>> {
            val album = if (!loaded) loadAlbum(item) else item
            loadTracks(album)?.pagedDataOfFirst()
                ?: PagedData.empty()
        }

        is Playlist -> extension.getAs<PlaylistClient, PagedData<Track>> {
            val playlist = if (!loaded) loadPlaylist(item) else item
            loadTracks(playlist).pagedDataOfFirst()
        }

        is Radio -> extension.getAs<RadioClient, PagedData<Track>> {
            val radio = if (!loaded) loadRadio(item) else item
            loadTracks(radio).pagedDataOfFirst()
        }

        is Artist -> extension.getAs<ArtistClient, PagedData<Track>> {
            val artist = if (!loaded) loadArtist(item) else item
            loadFeed(artist).pagedDataOfFirst().toTracks()
        }

        is Track -> Result.success(PagedData.Single { listOf(item) })
    }


    private fun playItem(player: Player, args: Bundle) = scope.future {
        val error = SessionResult(SessionError.ERROR_UNKNOWN)
        val extId = args.getString("extId") ?: return@future error
        val item = args.getSerialized<EchoMediaItem>("item")?.getOrNull() ?: return@future error
        val loaded = args.getBoolean("loaded", false)
        val shuffle = args.getBoolean("shuffle", false)
        val extension = extensions.music.getExtension(extId) ?: return@future error
        when (item) {
            is Track -> {
                val mediaItem = MediaItemUtils.build(
                    app, downloadFlow.value, MediaState.Unloaded(extId, item), null
                )
                player.with {
                    setMediaItem(mediaItem)
                    prepare()
                    seekTo(item.playedDuration ?: 0)
                    play()
                }
            }

            else -> {
                val tracks = listTracks(extension, item, loaded).getOrElse {
                    throwableFlow.emit(it)
                    return@future error
                }

                val result = if (shuffle) extension.get { tracks.loadAll() }
                else runCatching {
                    val (list, continuation) = extension.get { tracks.loadPage(null) }.getOrThrow()
                    if (continuation != null) scope.launch {
                        val all = extension.get { tracks.loadAll() }.getOrElse {
                            throwableFlow.emit(it)
                            return@launch
                        }.drop(list.size).map {
                            MediaItemUtils.build(
                                app, downloadFlow.value, MediaState.Unloaded(extId, it), item
                            )
                        }
                        player.with { addMediaItems(list.size, all) }
                    }
                    list
                }
                val list = result.getOrElse {
                    throwableFlow.emit(it)
                    return@future error
                }
                player.with {
                    setMediaItems(list.map {
                        MediaItemUtils.build(
                            app, downloadFlow.value, MediaState.Unloaded(extId, it), item
                        )
                    })
                    shuffleModeEnabled = shuffle
                    seekTo(0, list.firstOrNull()?.playedDuration ?: 0)
                    play()
                }
            }
        }
        SessionResult(RESULT_SUCCESS)
    }

    private suspend fun <T> Player.with(block: suspend Player.() -> T): T =
        withContext(Dispatchers.Main) { block() }

    private suspend fun <T : Any> PagedData<T>.load(
        pages: Int = 5,
    ) = runCatching {
        val list = mutableListOf<T>()
        var page = loadPage(null)
        list.addAll(page.data)
        var count = 0
        while (page.continuation != null && count < pages) {
            page = loadPage(page.continuation)
            list.addAll(page.data)
            count++
        }
        list
    }

    private fun addToQueue(player: Player, args: Bundle) = scope.future {
        val error = SessionResult(SessionError.ERROR_UNKNOWN)
        val extId = args.getString("extId") ?: return@future error
        val item = args.getSerialized<EchoMediaItem>("item")?.getOrNull() ?: return@future error
        val loaded = args.getBoolean("loaded", false)
        val extension = extensions.music.getExtension(extId) ?: return@future error
        val tracks = listTracks(extension, item, loaded).getOrElse {
            throwableFlow.emit(it)
            return@future error
        }.load().getOrElse {
            throwableFlow.emit(it)
            return@future error
        }
        if (tracks.isEmpty()) return@future error
        val mediaItems = tracks.map { track ->
            MediaItemUtils.build(
                app,
                downloadFlow.value,
                MediaState.Unloaded(extId, track),
                null
            )
        }
        player.with {
            addMediaItems(mediaItems)
            prepare()
        }
        SessionResult(RESULT_SUCCESS)
    }

    private var next = 0
    private var nextJob: Job? = null
    private fun addToNext(player: Player, args: Bundle) = scope.future {
        val error = SessionResult(SessionError.ERROR_UNKNOWN)
        val extId = args.getString("extId") ?: return@future error
        val item = args.getSerialized<EchoMediaItem>("item")?.getOrNull() ?: return@future error
        val loaded = args.getBoolean("loaded", false)
        val extension = extensions.music.getExtension(extId) ?: return@future error
        nextJob?.cancel()
        val tracks = listTracks(extension, item, loaded).getOrElse {
            throwableFlow.emit(it)
            return@future error
        }.load().getOrElse {
            throwableFlow.emit(it)
            return@future error
        }
        if (tracks.isEmpty()) return@future error
        val mediaItems = tracks.map { track ->
            MediaItemUtils.build(
                app,
                downloadFlow.value,
                MediaState.Unloaded(extId, track),
                null
            )
        }
        player.with {
            if (mediaItemCount == 0) playWhenReady = true
            addMediaItems(currentMediaItemIndex + 1 + next, mediaItems)
            prepare()
        }
        next += mediaItems.size
        nextJob = scope.launch {
            delay(5000)
            next = 0
        }
        SessionResult(RESULT_SUCCESS)
    }

    override fun onSetRating(
        session: MediaSession, controller: MediaSession.ControllerInfo, rating: Rating,
    ): ListenableFuture<SessionResult> {
        return if (rating !is ThumbRating) super.onSetRating(session, controller, rating)
        else scope.future {
            val item = session.player.with { currentMediaItem }
                ?: return@future SessionResult(SessionError.ERROR_UNKNOWN)
            val track = item.track
            runCatching {
                val extension = extensions.music.getExtensionOrThrow(item.extensionId)
                extension.getAs<LikeClient, Unit> {
                    likeItem(track, rating.isThumbsUp)
                }
            }.getOrElse {
                throwableFlow.emit(PlayerException(item, it))
                return@future SessionResult(SessionError.ERROR_UNKNOWN)
            }
            val liked = rating.isThumbsUp
            val newItem = item.run {
                buildUpon().setMediaMetadata(
                    mediaMetadata.buildUpon().setUserRating(ThumbRating(liked)).build()
                )
            }.build()
            session.player.with {
                replaceMediaItem(currentMediaItemIndex, newItem)
            }
            SessionResult(RESULT_SUCCESS, bundleOf("liked" to liked))
        }
    }

    override fun onPlaybackResumption(
        mediaSession: MediaSession,
        controller: MediaSession.ControllerInfo,
    ) = scope.future {
        withContext(Dispatchers.Main) {
            mediaSession.player.shuffleModeEnabled = context.recoverShuffle() ?: false
            mediaSession.player.repeatMode = context.recoverRepeat() ?: Player.REPEAT_MODE_OFF
        }
        val (items, index, pos) = context.recoverPlaylist(app, downloadFlow.value)
        MediaItemsWithStartPosition(items, index, pos)
    }

    class ButtonReceiver : MediaButtonReceiver() {
        override fun shouldStartForegroundService(context: Context, intent: Intent): Boolean {
            val isEmpty = context.recoverTracks().isNullOrEmpty()
            if (isEmpty) Toast.makeText(
                context,
                context.getString(R.string.no_last_played_track_found),
                Toast.LENGTH_SHORT
            ).show()
            return !isEmpty
        }
    }

    companion object {
        fun PagedData<Shelf>.toTracks() = map {
            it.getOrThrow().mapNotNull { shelf ->
                when (shelf) {
                    is Shelf.Category -> null
                    is Shelf.Item -> listOfNotNull(shelf.media as? Track)
                    is Shelf.Lists.Categories -> null
                    is Shelf.Lists.Items -> shelf.list.filterIsInstance<Track>()
                    is Shelf.Lists.Tracks -> shelf.list
                }
            }.flatten()
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\PlayerCommands.kt
================================================================================

package dev.brahmkshatriya.echo.playback

import android.content.Context
import android.os.Bundle
import androidx.media3.common.MediaItem
import androidx.media3.common.Player
import androidx.media3.session.CommandButton
import androidx.media3.session.SessionCommand
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.playback.MediaItemUtils.isLiked

object PlayerCommands {
    val likeCommand = SessionCommand("liked", Bundle.EMPTY)
    val unlikeCommand = SessionCommand("unliked", Bundle.EMPTY)
    val repeatCommand = SessionCommand("repeat", Bundle.EMPTY)
    val repeatOffCommand = SessionCommand("repeat_off", Bundle.EMPTY)
    val repeatOneCommand = SessionCommand("repeat_one", Bundle.EMPTY)
    val playCommand = SessionCommand("play", Bundle.EMPTY)
    val addToQueueCommand = SessionCommand("add_to_queue", Bundle.EMPTY)
    val addToNextCommand = SessionCommand("add_to_next", Bundle.EMPTY)
    val radioCommand = SessionCommand("radio", Bundle.EMPTY)
    val sleepTimer = SessionCommand("sleep_timer", Bundle.EMPTY)
    val resumeCommand = SessionCommand("resume", Bundle.EMPTY)
    val imageCommand = SessionCommand("image", Bundle.EMPTY)

    fun getLikeButton(context: Context, item: MediaItem) = run {
        val builder = CommandButton.Builder()
        if (!item.isLiked) builder
            .setDisplayName(context.getString(R.string.like))
            .setIconResId(R.drawable.ic_favorite_20dp)
            .setSessionCommand(likeCommand)
        else builder
            .setDisplayName(context.getString(R.string.unlike))
            .setIconResId(R.drawable.ic_favorite_filled_20dp)
            .setSessionCommand(unlikeCommand)
        builder.build()
    }

    fun getRepeatButton(context: Context, repeat: Int) = run {
        val builder = CommandButton.Builder()
        when (repeat) {
            Player.REPEAT_MODE_ONE -> builder
                .setDisplayName(context.getString(R.string.repeat_one))
                .setIconResId(R.drawable.ic_repeat_one_20dp)
                .setSessionCommand(repeatOffCommand)

            Player.REPEAT_MODE_OFF -> builder
                .setDisplayName(context.getString(R.string.repeat_off))
                .setIconResId(R.drawable.ic_repeat_20dp)
                .setSessionCommand(repeatCommand)

            else -> builder
                .setDisplayName(context.getString(R.string.repeat_all))
                .setIconResId(R.drawable.ic_repeat_on_20dp)
                .setSessionCommand(repeatOneCommand)
        }
        builder.build()
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\PlayerService.kt
================================================================================

package dev.brahmkshatriya.echo.playback

import android.app.Activity
import android.app.Application
import android.app.PendingIntent
import android.content.ComponentName
import android.content.Context
import android.content.Intent
import android.content.SharedPreferences
import androidx.annotation.OptIn
import androidx.media3.common.AudioAttributes
import androidx.media3.common.C
import androidx.media3.common.MediaItem
import androidx.media3.common.TrackSelectionParameters
import androidx.media3.common.TrackSelectionParameters.AudioOffloadPreferences.AUDIO_OFFLOAD_MODE_DISABLED
import androidx.media3.common.TrackSelectionParameters.AudioOffloadPreferences.AUDIO_OFFLOAD_MODE_ENABLED
import androidx.media3.common.util.UnstableApi
import androidx.media3.database.StandaloneDatabaseProvider
import androidx.media3.datasource.cache.LeastRecentlyUsedCacheEvictor
import androidx.media3.datasource.cache.SimpleCache
import androidx.media3.exoplayer.ExoPlayer
import androidx.media3.session.DefaultMediaNotificationProvider
import androidx.media3.session.MediaController
import androidx.media3.session.MediaLibraryService
import androidx.media3.session.MediaSession
import androidx.media3.session.SessionToken
import dev.brahmkshatriya.echo.MainActivity.Companion.getMainActivity
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.extensionPrefId
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.prefs
import dev.brahmkshatriya.echo.playback.listener.AudioFocusListener
import dev.brahmkshatriya.echo.playback.listener.EffectsListener
import dev.brahmkshatriya.echo.playback.listener.MediaSessionServiceListener
import dev.brahmkshatriya.echo.playback.listener.PlayerEventListener
import dev.brahmkshatriya.echo.playback.listener.PlayerRadio
import dev.brahmkshatriya.echo.playback.listener.TrackingListener
import dev.brahmkshatriya.echo.playback.renderer.PlayerBitmapLoader
import dev.brahmkshatriya.echo.playback.renderer.RenderersFactory
import dev.brahmkshatriya.echo.playback.source.StreamableMediaSource
import dev.brahmkshatriya.echo.utils.ContextUtils.listenFuture
import kotlinx.coroutines.CoroutineName
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.launch
import kotlinx.coroutines.plus
import org.koin.android.ext.android.inject
import java.io.File

class PlayerService : MediaLibraryService() {

    private val extensionLoader by inject<ExtensionLoader>()
    private val extensions by lazy { extensionLoader }
    private val exoPlayer by lazy { createExoplayer() }

    private var mediaSession: MediaLibrarySession? = null
    override fun onGetSession(controllerInfo: MediaSession.ControllerInfo) = mediaSession

    private val app by inject<App>()
    private val state by inject<PlayerState>()
    private val scope = CoroutineScope(Dispatchers.IO) + CoroutineName("PlayerService")

    @OptIn(UnstableApi::class)
    private val listener = SharedPreferences.OnSharedPreferenceChangeListener { prefs, key ->
        when (key) {
            SKIP_SILENCE -> exoPlayer.skipSilenceEnabled = prefs.getBoolean(key, true)
            MORE_BRAIN_CAPACITY -> exoPlayer.trackSelectionParameters =
                exoPlayer.trackSelectionParameters
                    .buildUpon()
                    .setAudioOffloadPreferences(offloadPreferences(prefs.getBoolean(key, false)))
                    .build()
        }
    }
    private val effects by lazy { EffectsListener(exoPlayer, this, state.session) }

    private val downloader by inject<Downloader>()
    private val downloadFlow by lazy { downloader.flow }

    @OptIn(UnstableApi::class)
    override fun onCreate() {
        super.onCreate()
        setListener(MediaSessionServiceListener(this, getPendingIntent(this)))

        val player = ShufflePlayer(exoPlayer)
        scope.launch(Dispatchers.Main) {
            mediaChangeFlow.collect { (o, n) -> player.onMediaItemChanged(o, n) }
        }

        val callback = PlayerCallback(
            app, scope, app.throwFlow, extensions, state.radio, downloadFlow
        )

        val session = MediaLibrarySession.Builder(this, player, callback)
            .setBitmapLoader(PlayerBitmapLoader(this, scope))
            .setSessionActivity(getPendingIntent(this))
            .build()

        player.addListener(AudioFocusListener(this, player))
        player.addListener(
            PlayerEventListener(this, scope, session, state.current, extensions, app.throwFlow)
        )
        player.addListener(
            PlayerRadio(
                app, scope, player, app.throwFlow, state.radio, extensions.music, downloadFlow
            )
        )
        player.addListener(
            TrackingListener(player, scope, extensions, state.current, app.throwFlow)
        )
        player.addListener(effects)
        app.settings.registerOnSharedPreferenceChangeListener(listener)

        val notificationProvider = DefaultMediaNotificationProvider.Builder(this)
            .setChannelName(R.string.app_name)
            .build()
        notificationProvider.setSmallIcon(R.drawable.ic_mono)
        setMediaNotificationProvider(notificationProvider)

        mediaSession = session
    }

    override fun onDestroy() {
        mediaSession?.run {
            player.release()
            release()
            mediaSession = null
        }
        super.onDestroy()
    }

    private val cache by inject<SimpleCache>()

    private val mediaChangeFlow = MutableSharedFlow<Pair<MediaItem, MediaItem>>()

    @OptIn(UnstableApi::class)
    private fun offloadPreferences(moreBrainCapacity: Boolean) =
        TrackSelectionParameters.AudioOffloadPreferences.Builder()
            .setAudioOffloadMode(
                if (moreBrainCapacity) AUDIO_OFFLOAD_MODE_DISABLED else AUDIO_OFFLOAD_MODE_ENABLED
            ).setIsGaplessSupportRequired(true)
            .setIsSpeedChangeSupportRequired(true)
            .build()

    @OptIn(UnstableApi::class)
    private fun createExoplayer() = run {
        val audioAttributes = AudioAttributes.Builder()
            .setUsage(C.USAGE_MEDIA)
            .setContentType(C.AUDIO_CONTENT_TYPE_MUSIC)
            .build()

        val audioOffloadPreferences =
            offloadPreferences(app.settings.getBoolean(MORE_BRAIN_CAPACITY, false))

        val factory = StreamableMediaSource.Factory(
            app, scope, state, extensions, cache, downloadFlow, mediaChangeFlow
        )

        ExoPlayer.Builder(this, factory)
            .setRenderersFactory(RenderersFactory(this))
            .setHandleAudioBecomingNoisy(true)
            .setWakeMode(C.WAKE_MODE_NETWORK)
            .setAudioAttributes(audioAttributes, true)
            .build()
            .also {
                it.trackSelectionParameters = it.trackSelectionParameters
                    .buildUpon()
                    .setAudioOffloadPreferences(audioOffloadPreferences)
                    .build()
                it.preloadConfiguration = ExoPlayer.PreloadConfiguration(C.TIME_UNSET)
                it.skipSilenceEnabled = app.settings.getBoolean(SKIP_SILENCE, true)
            }
    }


    override fun onTaskRemoved(rootIntent: Intent?) {
        val stopPlayer = app.settings.getBoolean(CLOSE_PLAYER, false)
        val player = mediaSession?.player ?: return stopSelf()
        if (stopPlayer || !player.isPlaying) stopSelf()
    }

    companion object {
        const val MORE_BRAIN_CAPACITY = "offload"
        const val CLOSE_PLAYER = "close_player"
        const val SKIP_SILENCE = "skip_silence"

        const val CACHE_SIZE = "cache_size"

        @OptIn(UnstableApi::class)
        fun getCache(
            app: Application,
            settings: SharedPreferences,
        ): SimpleCache {
            val databaseProvider = StandaloneDatabaseProvider(app)
            val cacheSize = settings.getInt(CACHE_SIZE, 250)
            return SimpleCache(
                File(app.cacheDir, "exo-player"),
                LeastRecentlyUsedCacheEvictor(cacheSize * 1024 * 1024L),
                databaseProvider
            )
        }

        const val STREAM_QUALITY = "stream_quality"
        const val UNMETERED_STREAM_QUALITY = "unmetered_stream_quality"
        val streamQualities = arrayOf("highest", "medium", "lowest")

        fun selectServerIndex(
            app: App,
            extensionId: String,
            streamables: List<Streamable>,
            downloaded: List<String>,
        ) = if (downloaded.isNotEmpty()) streamables.size
        else if (streamables.isNotEmpty()) {
            val streamable = streamables.select(app, extensionId) { it.quality }
            streamables.indexOf(streamable)
        } else -1

        private fun <E> List<E>.select(
            app: App,
            settings: SharedPreferences,
            quality: (E) -> Int,
            default: String = streamQualities[1],
        ): E? {
            val unmetered = if (app.isUnmetered) selectQuality(
                settings.getString(UNMETERED_STREAM_QUALITY, "off"),
                quality
            ) else null
            return unmetered ?: selectQuality(
                settings.getString(STREAM_QUALITY, default),
                quality
            )
        }

        private fun <E> List<E>.selectQuality(final: String?, quality: (E) -> Int): E? {
            return when (final) {
                streamQualities[0] -> maxBy { quality(it) }
                streamQualities[1] -> sortedBy { quality(it) }[size / 2]
                streamQualities[2] -> minBy { quality(it) }
                else -> null
            }
        }


        fun <T> List<T>.select(
            app: App, extensionId: String, quality: (T) -> Int,
        ): T {
            val extSettings =
                extensionPrefId(ExtensionType.MUSIC.name, extensionId).prefs(app.context)
            return select(app, extSettings, quality, "off")
                ?: select(app, app.settings, quality)
                ?: first()
        }

        fun getController(
            context: Application,
            block: (MediaController) -> Unit,
        ): () -> Unit {
            val sessionToken =
                SessionToken(context, ComponentName(context, PlayerService::class.java))
            val playerFuture = MediaController.Builder(context, sessionToken).buildAsync()
            context.listenFuture(playerFuture) { result ->
                val controller = result.getOrElse {
                    return@listenFuture it.printStackTrace()
                }
                block(controller)
            }
            return { MediaController.releaseFuture(playerFuture) }
        }

        fun getPendingIntent(context: Context): PendingIntent = PendingIntent.getActivity(
            context,
            0,
            Intent(context, MainActivityOpener::class.java),
            PendingIntent.FLAG_IMMUTABLE,
        )
    }

    class MainActivityOpener : Activity() {
        override fun onStart() {
            super.onStart()
            finish()
            startActivity(Intent(this, getMainActivity()).apply {
                addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
                putExtra("fromNotification", true)
            })
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\PlayerState.kt
================================================================================

package dev.brahmkshatriya.echo.playback

import androidx.media3.common.MediaItem
import dev.brahmkshatriya.echo.common.helpers.Page
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.playback.MediaItemUtils.context
import dev.brahmkshatriya.echo.playback.MediaItemUtils.track
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import java.util.WeakHashMap

data class PlayerState(
    val current: MutableStateFlow<Current?> = MutableStateFlow(null),
    val radio: MutableStateFlow<Radio> = MutableStateFlow(Radio.Empty),
    val session: MutableStateFlow<Int> = MutableStateFlow(0)
) {

    val servers: WeakHashMap<String, Result<Streamable.Media.Server>> = WeakHashMap()
    val serverChanged = MutableSharedFlow<Unit>()

    data class Current(
        val index: Int,
        val mediaItem: MediaItem,
        val isLoaded: Boolean,
        val isPlaying: Boolean,
    ) {

        val context by lazy { mediaItem.context }
        val track by lazy { mediaItem.track }
        fun isPlaying(id: String?): Boolean {
            val same = mediaItem.mediaId == id
                    || context?.id == id
                    || track.album?.id == id
                    || track.artists.any { it.id == id }
            return isPlaying && same
        }

        companion object {
            fun Current?.isPlaying(id: String?): Boolean = this?.isPlaying(id) ?: false
        }
    }

    sealed class Radio {
        data object Empty : Radio()
        data object Loading : Radio()
        data class Loaded(
            val clientId: String,
            val context: EchoMediaItem,
            val cont: String?,
            val tracks: suspend (String?) -> Page<Track>?
        ) : Radio()
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\ResumptionUtils.kt
================================================================================

package dev.brahmkshatriya.echo.playback

import android.content.Context
import androidx.media3.common.C
import androidx.media3.common.MediaItem
import androidx.media3.common.Player
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.extensions.MediaState
import dev.brahmkshatriya.echo.playback.MediaItemUtils.context
import dev.brahmkshatriya.echo.playback.MediaItemUtils.extensionId
import dev.brahmkshatriya.echo.playback.MediaItemUtils.track
import dev.brahmkshatriya.echo.utils.CacheUtils.getFromCache
import dev.brahmkshatriya.echo.utils.CacheUtils.saveToCache
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.withContext

object ResumptionUtils {

    private const val CLEARED = "cleared"
    private const val FOLDER = "queue"
    private const val TRACKS = "queue_tracks"
    private const val CONTEXTS = "queue_contexts"
    private const val EXTENSIONS = "queue_extensions"
    private const val INDEX = "queue_index"
    private const val POSITION = "position"
    private const val SHUFFLE = "shuffle"
    private const val REPEAT = "repeat"

    private fun Player.mediaItems() = (0 until mediaItemCount).map { getMediaItemAt(it) }
    fun saveIndex(context: Context, index: Int) {
        context.saveToCache(INDEX, index, FOLDER)
    }

    suspend fun saveQueue(context: Context, player: Player) = withContext(Dispatchers.Main) {
        val list = player.mediaItems()
        context.saveToCache(CLEARED, list.isEmpty())
        if (list.isEmpty()) return@withContext
        val currentIndex = player.currentMediaItemIndex
        withContext(Dispatchers.IO) {
            val extensionIds = list.map { it.extensionId }
            val tracks = list.map { it.track }
            val contexts = list.map { it.context }
            context.saveToCache(INDEX, currentIndex, FOLDER)
            context.saveToCache(EXTENSIONS, extensionIds, FOLDER)
            context.saveToCache(TRACKS, tracks, FOLDER)
            context.saveToCache(CONTEXTS, contexts, FOLDER)
        }
    }

    fun saveCurrentPos(context: Context, position: Long) {
        context.saveToCache(POSITION, position, FOLDER)
    }

    fun Context.recoverTracks(withClear: Boolean = false): List<Pair<MediaState.Unloaded<Track>, EchoMediaItem?>>? {
        if (withClear && getFromCache<Boolean>(CLEARED) != false) return null
        val tracks = getFromCache<List<Track>>(TRACKS, FOLDER)
        val extensionIds = getFromCache<List<String>>(EXTENSIONS, FOLDER)
        val contexts = getFromCache<List<EchoMediaItem>>(CONTEXTS, FOLDER)
        return tracks?.mapIndexedNotNull { index, track ->
            val extensionId = extensionIds?.getOrNull(index) ?: return@mapIndexedNotNull null
            val item = contexts?.getOrNull(index)
            MediaState.Unloaded(extensionId, track) to item
        }
    }

    private fun Context.recoverQueue(
        app: App,
        downloads: List<Downloader.Info>,
        withClear: Boolean = false
    ): List<MediaItem>? {
        val tracks = recoverTracks(withClear) ?: return null
        return tracks.map { (state, item) ->
            MediaItemUtils.build(app, downloads, state, item)
        }
    }

    fun Context.recoverIndex() = getFromCache<Int>(INDEX, FOLDER)
    private fun Context.recoverPosition() = getFromCache<Long>(POSITION, FOLDER)


    fun Context.recoverShuffle() = getFromCache<Boolean>(SHUFFLE, FOLDER)
    fun saveShuffle(context: Context, shuffle: Boolean) {
        context.saveToCache(SHUFFLE, shuffle, FOLDER)
    }

    fun Context.recoverRepeat() = getFromCache<Int>(REPEAT, FOLDER)
    fun saveRepeat(context: Context, repeat: Int) {
        context.saveToCache(REPEAT, repeat, FOLDER)
    }

    fun Context.recoverPlaylist(
        app: App,
        downloads: List<Downloader.Info>,
        withClear: Boolean = false
    ): Triple<List<MediaItem>, Int, Long> {
        val items = recoverQueue(app, downloads, withClear) ?: emptyList()
        val index = recoverIndex() ?: C.INDEX_UNSET
        val position = recoverPosition() ?: -1L
        return Triple(items, index, position)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\ShufflePlayer.kt
================================================================================

package dev.brahmkshatriya.echo.playback

import androidx.annotation.OptIn
import androidx.media3.common.ForwardingPlayer
import androidx.media3.common.MediaItem
import androidx.media3.common.util.UnstableApi
import androidx.media3.exoplayer.ExoPlayer
import androidx.media3.exoplayer.source.ShuffleOrder

@Suppress("unused")
@OptIn(UnstableApi::class)
class ShufflePlayer(
    private val player: ExoPlayer,
) : ForwardingPlayer(player) {

    init {
        player.setShuffleOrder(ShuffleOrder.UnshuffledShuffleOrder(0))
    }

    private fun getQueue() = (0 until mediaItemCount).map { player.getMediaItemAt(it) }

    private var isShuffled = false
    private var original = getQueue()

    override fun setShuffleModeEnabled(enabled: Boolean) {
        if (enabled) original = getQueue()
        isShuffled = enabled
        changeQueue(if (enabled) original.shuffled() else original)
        player.shuffleModeEnabled = enabled
    }

    override fun hasNextMediaItem(): Boolean {
        return currentMediaItemIndex < mediaItemCount - 1
    }

    @Suppress("UNUSED_PARAMETER")
    private fun log(name: String) {
//        println(name)
//        println("$isShuffled list ${original.size}: ${original.map { it.mediaMetadata.title }}")
//        println("player ${mediaItemCount}: ${getQueue().map { it.mediaMetadata.title }}")
    }

    private fun changeQueue(list: List<MediaItem>) {
        log("Change queue")
        if (list.size <= 1) return
        val currentMediaItem = list.first { it.mediaId == currentMediaItem?.mediaId }
        val index = list.indexOf(currentMediaItem)
        val before = list.take(index) - currentMediaItem
        val after = list.takeLast(list.size - index) - currentMediaItem
        if (currentMediaItemIndex > 0) player.removeMediaItems(0, currentMediaItemIndex)
        player.addMediaItems(0, before)
        player.removeMediaItems(currentMediaItemIndex + 1, mediaItemCount)
        player.addMediaItems(currentMediaItemIndex + 1, after)
    }

    fun onMediaItemChanged(old: MediaItem, new: MediaItem) {
        original = original.toMutableList().apply {
            val index = indexOf(old).takeIf { it != -1 } ?: return
            set(index, new)
        }
        log("Change media item")
    }

    override fun addMediaItem(mediaItem: MediaItem) {
        original = original + mediaItem
        player.addMediaItem(mediaItem)
        log("Add media item")
    }

    override fun addMediaItems(mediaItems: MutableList<MediaItem>) {
        original = original + mediaItems
        player.addMediaItems(mediaItems)
        log("Add media items")
    }

    override fun addMediaItem(index: Int, mediaItem: MediaItem) {
        original = original + mediaItem
        player.addMediaItem(index, mediaItem)
        log("Add media item at $index")
    }

    override fun addMediaItems(index: Int, mediaItems: MutableList<MediaItem>) {
        original = original + mediaItems
        player.addMediaItems(index, mediaItems)
        log("Add media items at $index")
    }

    private fun getItemAt(index: Int) = player.getMediaItemAt(index).let {
        original.first { item -> item.mediaId == it.mediaId }
    }

    override fun removeMediaItem(index: Int) {
        original = original - getItemAt(index)
        player.removeMediaItem(index)
        log("Remove media item at $index")
    }

    override fun removeMediaItems(fromIndex: Int, toIndex: Int) {
        original =
            original - (fromIndex until toIndex).map { getItemAt(it) }.toSet()
        player.removeMediaItems(fromIndex, toIndex)
        log("Remove media items from $fromIndex to $toIndex")
    }

    override fun replaceMediaItem(index: Int, mediaItem: MediaItem) {
        original = original.toMutableList().apply {
            val originalIndex = indexOf(getItemAt(index)).takeIf { it != -1 }!!
            set(originalIndex, mediaItem)
        }
        player.replaceMediaItem(index, mediaItem)
        log("Replace media item at $index")
    }

    override fun replaceMediaItems(
        fromIndex: Int, toIndex: Int, mediaItems: MutableList<MediaItem>
    ) {
        original = original.toMutableList().apply {
            val originalIndexes = (fromIndex until toIndex).map { i ->
                indexOf(getItemAt(i)).takeIf { it != -1 }!!
            }
            originalIndexes.forEachIndexed { i, originalIndex ->
                set(originalIndex, mediaItems[i])
            }
        }
        player.replaceMediaItems(fromIndex, toIndex, mediaItems)
        log("Replace media items from $fromIndex to $toIndex")
    }

    override fun setMediaItem(mediaItem: MediaItem) {
        original = listOf(mediaItem)
        player.setMediaItem(mediaItem)
        log("Set media item")
    }

    override fun setMediaItem(mediaItem: MediaItem, resetPosition: Boolean) {
        original = listOf(mediaItem)
        player.setMediaItem(mediaItem, resetPosition)
        log("Set media item")
    }

    override fun setMediaItem(mediaItem: MediaItem, startPositionMs: Long) {
        original = listOf(mediaItem)
        player.setMediaItem(mediaItem, startPositionMs)
        log("Set media item")
    }

    override fun setMediaItems(mediaItems: MutableList<MediaItem>) {
        original = mediaItems
        player.setMediaItems(mediaItems)
        log("Set media items")
    }

    override fun setMediaItems(mediaItems: MutableList<MediaItem>, resetPosition: Boolean) {
        original = mediaItems
        player.setMediaItems(mediaItems, resetPosition)
        log("Set media items")
    }

    override fun setMediaItems(
        mediaItems: MutableList<MediaItem>,
        startIndex: Int,
        startPositionMs: Long
    ) {
        original = mediaItems
        player.setMediaItems(
            mediaItems,
            startIndex.coerceAtMost(mediaItems.size - 1),
            startPositionMs
        )
        log("Set media items")
    }

    override fun clearMediaItems() {
        original = emptyList()
        player.clearMediaItems()
        log("Clear media items")
    }

}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\exceptions\PlayerException.kt
================================================================================

package dev.brahmkshatriya.echo.playback.exceptions

import androidx.media3.common.MediaItem

class PlayerException(
    val mediaItem: MediaItem?,
    override val cause: Throwable
) : Exception()

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\listener\AudioFocusListener.kt
================================================================================

package dev.brahmkshatriya.echo.playback.listener

import android.content.Context
import android.media.AudioAttributes
import android.media.AudioFocusRequest
import android.media.AudioManager
import android.os.Build
import android.os.Handler
import androidx.media3.common.Player
import androidx.media3.common.Player.PlaybackSuppressionReason

@Suppress("DEPRECATION")
class AudioFocusListener(
    val context: Context,
    val player: Player
) : Player.Listener {
    private val handler = Handler(context.mainLooper)
    private val audioManager = context.getSystemService(Context.AUDIO_SERVICE) as AudioManager
    private lateinit var focusRequest: AudioFocusRequest

    private val audioFocusChangeListener = AudioManager.OnAudioFocusChangeListener {
        if (it == AudioManager.AUDIOFOCUS_GAIN) {
            player.apply {
                setAudioAttributes(audioAttributes, true)
                seekTo(currentPosition)
            }
            abandonRequest()
        }
    }


    private fun requestFocus() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O)
            audioManager.requestAudioFocus(focusRequest)
        else audioManager.requestAudioFocus(
            audioFocusChangeListener,
            AudioManager.STREAM_MUSIC,
            AudioManager.AUDIOFOCUS_GAIN
        )
    }

    private fun abandonRequest() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O)
            audioManager.abandonAudioFocusRequest(focusRequest)
        else audioManager.abandonAudioFocus(audioFocusChangeListener)
    }

    init {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            focusRequest = AudioFocusRequest.Builder(AudioManager.AUDIOFOCUS_GAIN).run {
                setAudioAttributes(
                    AudioAttributes.Builder()
                        .setUsage(AudioAttributes.USAGE_MEDIA)
                        .setContentType(AudioAttributes.CONTENT_TYPE_MUSIC)
                        .build()
                )
                setAcceptsDelayedFocusGain(true)
                setOnAudioFocusChangeListener(audioFocusChangeListener, handler)
                build()
            }
        }

        //TODO fix this to support player to play in calls
        // if the audio suppression was not there from the start
        // https://github.com/androidx/media/issues/1716
        onPlaybackSuppressionReasonChanged(player.playbackSuppressionReason)
    }

    override fun onPlaybackSuppressionReasonChanged(playbackSuppressionReason: @PlaybackSuppressionReason Int) {
        if (playbackSuppressionReason == Player.PLAYBACK_SUPPRESSION_REASON_TRANSIENT_AUDIO_FOCUS_LOSS) {
            player.apply {
                setAudioAttributes(audioAttributes, false)
                player.playWhenReady = false
                seekTo(currentPosition)
            }
            requestFocus()
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\listener\EffectsListener.kt
================================================================================

package dev.brahmkshatriya.echo.playback.listener

import android.content.Context
import android.content.Intent
import android.content.SharedPreferences
import android.content.SharedPreferences.OnSharedPreferenceChangeListener
import android.media.audiofx.AudioEffect
import android.media.audiofx.Equalizer
import android.media.audiofx.LoudnessEnhancer
import androidx.annotation.OptIn
import androidx.core.content.edit
import androidx.media3.common.MediaItem
import androidx.media3.common.PlaybackParameters
import androidx.media3.common.Player
import androidx.media3.common.util.UnstableApi
import androidx.media3.exoplayer.ExoPlayer
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.copyTo
import kotlinx.coroutines.flow.MutableStateFlow
import kotlin.math.pow
import kotlin.math.roundToInt

@OptIn(UnstableApi::class)
class EffectsListener(
    private val exoPlayer: ExoPlayer,
    private val context: Context,
    private val audioSessionFlow: MutableStateFlow<Int>
) : Player.Listener {

    init {
        audioSessionFlow.value = exoPlayer.audioSessionId
        context.broadcastAudioSession()
    }

    private val settings: SharedPreferences = context.globalFx()
    private var oldSettings = settings
    private fun applyCustomEffects() {
        oldSettings.unregisterOnSharedPreferenceChangeListener(listener)
        val current = context.getFxPrefs(settings, exoPlayer.currentMediaItem?.mediaId?.hashCode())
            ?: settings
        oldSettings = current
        current.registerOnSharedPreferenceChangeListener(listener)
        applyPlayback(current)
        effects.applySettings(current)
    }

    private fun createEffects() = Effects(exoPlayer.audioSessionId)

    private fun applyPlayback(settings: SharedPreferences) {
        val index = settings.getInt(PLAYBACK_SPEED, speedRange.indexOf(1f))
        val speed = speedRange.getOrNull(index) ?: 1f
        val pitch = if (settings.getBoolean(CHANGE_PITCH, true)) speed else 1f
        exoPlayer.playbackParameters =
            PlaybackParameters(speed, pitch)
    }

    private var effects: Effects = createEffects()
    private val listener = OnSharedPreferenceChangeListener { _, _ -> applyCustomEffects() }

    override fun onMediaItemTransition(mediaItem: MediaItem?, reason: Int) = applyCustomEffects()
    override fun onAudioSessionIdChanged(audioSessionId: Int) {
        release()
        context.broadcastAudioSession()
        audioSessionFlow.value = audioSessionId
        effects = createEffects()
        effects.applySettings(oldSettings)
    }

    class Effects(sessionId: Int) {
        private val equalizer = runCatching { Equalizer(0, sessionId) }.getOrNull()
        private val gain = runCatching { LoudnessEnhancer(sessionId) }.getOrNull()
        private fun applyBassBoost(strength: Int) = runCatching {
            if (strength == 0) {
                equalizer?.setEnabled(false)
                gain?.setEnabled(false)
                return@runCatching
            }
            gain?.setEnabled(true)
            equalizer?.setEnabled(true)
            equalizer?.apply {
                val value =
                    (strength * bandLevelRange.last().toDouble() / 10).roundToInt().toShort()
                val zero = numberOfBands.toDouble() * 2 / 3
                for (it in 0 until numberOfBands) {
                    val v = (-(it - zero).pow(3) * value / zero.pow(3)).roundToInt()
                    setBandLevel(it.toShort(), v.toShort())
                }
            }
            val g = (strength.toDouble().pow(1.toDouble() / 3) * 1600).roundToInt()
            gain?.setTargetGain(g)
        }

        fun release() {
            runCatching {
                equalizer?.release()
                gain?.release()
            }
        }

        fun applySettings(settings: SharedPreferences) {
            applyBassBoost(settings.getInt(BASS_BOOST, 0))
        }
    }

    companion object {
        const val GLOBAL_FX = "global_fx"
        const val BASS_BOOST = "bass_boost"
        const val PLAYBACK_SPEED = "playback_speed"
        val speedRange = listOf(
            0.1f, 0.175f, 0.25f, 0.33f, 0.5f, 0.66f, 0.75f, 0.85f, 0.9f, 0.95f,
            1f, 1.05f, 1.1f, 1.15f, 1.25f, 1.33f, 1.5f, 1.66f, 1.75f, 1.88f, 2f,
            2.33f, 2.5f, 3f, 4f, 8f, 16f, 32f, 64f
        )

        const val CHANGE_PITCH = "change_pitch"
        const val CUSTOM_EFFECTS = "custom_effects"

        fun Context.globalFx() = getSharedPreferences(GLOBAL_FX, Context.MODE_PRIVATE)!!
        fun Context.deleteGlobalFx() = deleteSharedPreferences(GLOBAL_FX)
        fun Context.getFxPrefs(settings: SharedPreferences, id: Int? = null): SharedPreferences? {
            if (id == null) return null
            val string = id.toString()
            val hasCustom = settings.getStringSet(CUSTOM_EFFECTS, emptySet())?.contains(string)
                ?: false
            return if (!hasCustom) null
            else getSharedPreferences("fx_$string", Context.MODE_PRIVATE)!!.apply {
                if (getBoolean("init", false)) return@apply
                settings.copyTo(this)
                edit { putBoolean("init", true) }
            }
        }

        fun Context.deleteFxPrefs(id: Int) =
            deleteSharedPreferences("fx_$id")
    }

    private fun Context.broadcastAudioSession() {
        val id = exoPlayer.audioSessionId
        sendBroadcast(Intent(AudioEffect.ACTION_OPEN_AUDIO_EFFECT_CONTROL_SESSION).apply {
            putExtra(AudioEffect.EXTRA_PACKAGE_NAME, packageName)
            putExtra(AudioEffect.EXTRA_AUDIO_SESSION, id)
            putExtra(AudioEffect.EXTRA_CONTENT_TYPE, AudioEffect.CONTENT_TYPE_MUSIC)
        })
    }

    private fun Context.broadcastAudioSessionClose(id: Int) {
        sendBroadcast(Intent(AudioEffect.ACTION_CLOSE_AUDIO_EFFECT_CONTROL_SESSION).apply {
            putExtra(AudioEffect.EXTRA_PACKAGE_NAME, packageName)
            putExtra(AudioEffect.EXTRA_AUDIO_SESSION, id)
        })
    }

    private fun release() {
        effects.release()
        context.broadcastAudioSessionClose(audioSessionFlow.value)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\listener\MediaSessionServiceListener.kt
================================================================================

package dev.brahmkshatriya.echo.playback.listener

import android.Manifest
import android.app.NotificationChannel
import android.app.NotificationManager
import android.app.PendingIntent
import android.content.Context
import android.content.pm.PackageManager
import android.os.Build
import androidx.core.app.NotificationCompat
import androidx.core.app.NotificationManagerCompat
import androidx.media3.common.util.UnstableApi
import androidx.media3.session.MediaSessionService.Listener
import dev.brahmkshatriya.echo.R

@UnstableApi
class MediaSessionServiceListener(
    private val context: Context,
    private val intent: PendingIntent
) : Listener {

    override fun onForegroundServiceStartNotAllowedException() {
        if (
            Build.VERSION.SDK_INT >= 33 &&
            context.checkSelfPermission(Manifest.permission.POST_NOTIFICATIONS) !=
            PackageManager.PERMISSION_GRANTED
        ) return

        val notificationManagerCompat = NotificationManagerCompat.from(context)
        context.ensureNotificationChannel(notificationManagerCompat)
        val builder = NotificationCompat.Builder(context, CHANNEL_ID)
            .setSmallIcon(R.drawable.ic_mono)
            .setContentTitle(context.getString(R.string.app_name))
            .setStyle(
                NotificationCompat.BigTextStyle().bigText(context.getString(R.string.app_name))
            )
            .setPriority(NotificationCompat.PRIORITY_DEFAULT)
            .setAutoCancel(true)
            .setContentIntent(intent)
        notificationManagerCompat.notify(NOTIFICATION_ID, builder.build())
    }

    private fun Context.ensureNotificationChannel(
        notificationManagerCompat: NotificationManagerCompat
    ) {
        if (
            Build.VERSION.SDK_INT < 26 ||
            notificationManagerCompat.getNotificationChannel(CHANNEL_ID) != null
        ) return

        val channel = NotificationChannel(
            CHANNEL_ID,
            getString(R.string.app_name),
            NotificationManager.IMPORTANCE_DEFAULT,
        )
        notificationManagerCompat.createNotificationChannel(channel)
    }

    companion object {
        const val CHANNEL_ID = "echo_notification_channel_id"
        const val NOTIFICATION_ID = 1
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\listener\PlayerEventListener.kt
================================================================================

package dev.brahmkshatriya.echo.playback.listener

import android.content.Context
import androidx.media3.common.MediaItem
import androidx.media3.common.MediaMetadata
import androidx.media3.common.PlaybackException
import androidx.media3.common.Player
import androidx.media3.common.Timeline
import androidx.media3.session.MediaSession
import dev.brahmkshatriya.echo.common.clients.LikeClient
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtension
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.isClient
import dev.brahmkshatriya.echo.playback.MediaItemUtils
import dev.brahmkshatriya.echo.playback.MediaItemUtils.extensionId
import dev.brahmkshatriya.echo.playback.MediaItemUtils.isLoaded
import dev.brahmkshatriya.echo.playback.MediaItemUtils.retries
import dev.brahmkshatriya.echo.playback.PlayerCommands.getLikeButton
import dev.brahmkshatriya.echo.playback.PlayerCommands.getRepeatButton
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.playback.ResumptionUtils
import dev.brahmkshatriya.echo.playback.exceptions.PlayerException
import dev.brahmkshatriya.echo.utils.Serializer.rootCause
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.launch
import kotlinx.coroutines.withContext
import kotlin.reflect.KClass

class PlayerEventListener(
    private val context: Context,
    private val scope: CoroutineScope,
    private val session: MediaSession,
    private val currentFlow: MutableStateFlow<PlayerState.Current?>,
    private val extensions: ExtensionLoader,
    private val throwableFlow: MutableSharedFlow<Throwable>
) : Player.Listener {

    private val player get() = session.player

    private fun updateCustomLayout() = scope.launch(Dispatchers.Main) {
        val item = player.currentMediaItem ?: return@launch
        val supportsLike = withContext(Dispatchers.IO) {
            extensions.music.getExtension(item.extensionId)?.isClient<LikeClient>() ?: false
        }
        val commandButtons = listOfNotNull(
            getRepeatButton(context, player.repeatMode),
            getLikeButton(context, item).takeIf { supportsLike }
        )
        session.setCustomLayout(commandButtons)
    }

    private fun updateCurrentFlow() {
        if (player.currentMediaItem == null && player.mediaItemCount > 0)
            throw Exception("This is possible")
        currentFlow.value = player.currentMediaItem?.let {
            val isPlaying = player.isPlaying && player.playbackState == Player.STATE_READY
            PlayerState.Current(player.currentMediaItemIndex, it, it.isLoaded, isPlaying)
        }
    }

    override fun onMediaItemTransition(mediaItem: MediaItem?, reason: Int) {
        updateCurrentFlow()
        updateCustomLayout()
        ResumptionUtils.saveIndex(context, player.currentMediaItemIndex)
    }

    override fun onMediaMetadataChanged(mediaMetadata: MediaMetadata) {
        updateCurrentFlow()
        updateCustomLayout()
    }

    override fun onTimelineChanged(timeline: Timeline, reason: Int) {
        updateCurrentFlow()
        scope.launch { ResumptionUtils.saveQueue(context, player) }
    }

    override fun onRepeatModeChanged(repeatMode: Int) {
        updateCustomLayout()
        ResumptionUtils.saveRepeat(context, repeatMode)
    }

    override fun onShuffleModeEnabledChanged(shuffleModeEnabled: Boolean) {
        ResumptionUtils.saveShuffle(context, shuffleModeEnabled)
    }

    override fun onPlaybackStateChanged(playbackState: Int) {
        updateCurrentFlow()
    }

    override fun onIsPlayingChanged(isPlaying: Boolean) {
        updateCurrentFlow()
        ResumptionUtils.saveCurrentPos(context, player.currentPosition)
    }

    override fun onPositionDiscontinuity(
        oldPosition: Player.PositionInfo, newPosition: Player.PositionInfo, reason: Int
    ) {
        ResumptionUtils.saveCurrentPos(context, player.currentPosition)
    }

    private val maxRetries = 3
    private val maxSingleItemRetries = 1
    private var currentRetries = 0
    private var last: KClass<*>? = null
    override fun onPlayerError(error: PlaybackException) {
        val cause = error.cause ?: error
        val mediaItem = player.currentMediaItem
        scope.launch { throwableFlow.emit(PlayerException(mediaItem, cause)) }

        val old = last
        last = cause.rootCause::class
        if (old != null && old == last) currentRetries++
        else currentRetries = 0

        if (mediaItem == null) return
        val index = player.currentMediaItemIndex
        val retries = mediaItem.retries

        if (currentRetries >= maxRetries) return
        if (retries >= maxSingleItemRetries) {
            val hasMore = index < player.mediaItemCount - 1
            if (!hasMore) return
            player.seekToNextMediaItem()
        } else {
            val newItem = MediaItemUtils.withRetry(mediaItem)
            player.replaceMediaItem(index, newItem)
        }
        player.prepare()
        player.play()
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\listener\PlayerRadio.kt
================================================================================

package dev.brahmkshatriya.echo.playback.listener

import android.content.SharedPreferences
import androidx.media3.common.MediaItem
import androidx.media3.common.Player
import androidx.media3.common.Player.REPEAT_MODE_OFF
import androidx.media3.common.Timeline
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.clients.RadioClient
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Feed.Companion.pagedDataOfFirst
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.get
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtension
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getIf
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getOrThrow
import dev.brahmkshatriya.echo.extensions.MediaState
import dev.brahmkshatriya.echo.playback.MediaItemUtils
import dev.brahmkshatriya.echo.playback.MediaItemUtils.context
import dev.brahmkshatriya.echo.playback.MediaItemUtils.extensionId
import dev.brahmkshatriya.echo.playback.MediaItemUtils.track
import dev.brahmkshatriya.echo.playback.PlayerState
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.launch
import kotlinx.coroutines.withContext

class PlayerRadio(
    private val app: App,
    private val scope: CoroutineScope,
    private val player: Player,
    private val throwFlow: MutableSharedFlow<Throwable>,
    private val stateFlow: MutableStateFlow<PlayerState.Radio>,
    private val extensionList: StateFlow<List<MusicExtension>>,
    private val downloadFlow: StateFlow<List<Downloader.Info>>
) : Player.Listener {

    companion object {
        const val AUTO_START_RADIO = "auto_start_radio"
        suspend fun start(
            throwableFlow: MutableSharedFlow<Throwable>,
            extension: Extension<*>,
            item: EchoMediaItem,
            itemContext: EchoMediaItem?
        ): PlayerState.Radio.Loaded? {
            if (!item.isRadioSupported) return null
            return extension.getIf<RadioClient, PlayerState.Radio.Loaded?> {
                val radio = radio(item, itemContext)
                val tracks = loadTracks(radio).pagedDataOfFirst()
                PlayerState.Radio.Loaded(extension.id, radio, null) {
                    extension.get { tracks.loadPage(it) }.getOrThrow(throwableFlow)
                }
            }.getOrThrow(throwableFlow)
        }

        suspend fun play(
            player: Player,
            downloadFlow: StateFlow<List<Downloader.Info>>,
            app: App,
            stateFlow: MutableStateFlow<PlayerState.Radio>,
            loaded: PlayerState.Radio.Loaded
        ) {
            stateFlow.value = PlayerState.Radio.Loading
            val tracks = loaded.tracks(loaded.cont) ?: return

            stateFlow.value = if (tracks.continuation == null) PlayerState.Radio.Empty
            else loaded.copy(cont = tracks.continuation)

            val item = tracks.data.map {
                MediaItemUtils.build(
                    app,
                    downloadFlow.value,
                    MediaState.Unloaded(loaded.clientId, it),
                    loaded.context
                )
            }

            withContext(Dispatchers.Main) {
                player.addMediaItems(item)
                player.prepare()
            }
        }
    }

    private suspend fun loadPlaylist() {
        val mediaItem = withContext(Dispatchers.Main) { player.currentMediaItem } ?: return
        val extensionId = mediaItem.extensionId
        val item = mediaItem.track
        val itemContext = mediaItem.context
        stateFlow.value = PlayerState.Radio.Loading
        val extension = extensionList.getExtension(extensionId) ?: return
        val loaded = start(throwFlow, extension, item, itemContext)
        stateFlow.value = loaded ?: PlayerState.Radio.Empty
        if (loaded != null) play(player, downloadFlow, app, stateFlow, loaded)
    }

    private var autoStartRadio = app.settings.getBoolean(AUTO_START_RADIO, true)

    private val listener = SharedPreferences.OnSharedPreferenceChangeListener { pref, key ->
        if (key != AUTO_START_RADIO) return@OnSharedPreferenceChangeListener
        autoStartRadio = pref.getBoolean(AUTO_START_RADIO, true)
    }

    init {
        app.settings.registerOnSharedPreferenceChangeListener(listener)
    }

    private suspend fun startRadio() {
        if (!autoStartRadio) return
        val shouldNotStart = withContext(Dispatchers.Main) {
            player.run {
                currentMediaItem == null || repeatMode != REPEAT_MODE_OFF || hasNextMediaItem()
            }
        }
        if (shouldNotStart) return
        when (val state = stateFlow.value) {
            is PlayerState.Radio.Loading -> {}
            is PlayerState.Radio.Empty -> loadPlaylist()
            is PlayerState.Radio.Loaded -> play(player, downloadFlow, app, stateFlow, state)
        }
    }

    override fun onTimelineChanged(timeline: Timeline, reason: Int) {
        scope.launch { startRadio() }
    }

    override fun onMediaItemTransition(mediaItem: MediaItem?, reason: Int) {
        if (player.mediaItemCount == 0) stateFlow.value = PlayerState.Radio.Empty
        scope.launch { startRadio() }
    }
}



================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\listener\TrackingListener.kt
================================================================================

package dev.brahmkshatriya.echo.playback.listener

import androidx.media3.common.C
import androidx.media3.common.MediaItem
import androidx.media3.common.PlaybackException
import androidx.media3.common.Player
import androidx.media3.common.util.UnstableApi
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.clients.TrackerClient
import dev.brahmkshatriya.echo.common.clients.TrackerMarkClient
import dev.brahmkshatriya.echo.common.models.TrackDetails
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtension
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.runIf
import dev.brahmkshatriya.echo.playback.MediaItemUtils.context
import dev.brahmkshatriya.echo.playback.MediaItemUtils.extensionId
import dev.brahmkshatriya.echo.playback.MediaItemUtils.track
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.utils.PauseTimer
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.FlowPreview
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.collectLatest
import kotlinx.coroutines.flow.debounce
import kotlinx.coroutines.flow.distinctUntilChanged
import kotlinx.coroutines.flow.map
import kotlinx.coroutines.launch
import kotlinx.coroutines.sync.Mutex
import kotlinx.coroutines.sync.withLock
import kotlinx.coroutines.withContext

@UnstableApi
class TrackingListener(
    private val player: Player,
    private val scope: CoroutineScope,
    extensions: ExtensionLoader,
    private val currentFlow: MutableStateFlow<PlayerState.Current?>,
    private val throwableFlow: MutableSharedFlow<Throwable>
) : Player.Listener {

    private val musicList = extensions.music
    private val trackerList = extensions.tracker

    private var current: MediaItem? = null
    private var previousId: String? = null

    private suspend fun getDetails() = withContext(Dispatchers.Main) {
        current?.let { curr ->
            val (pos, total) = player.currentPosition to player.duration.takeIf { it != C.TIME_UNSET }
            TrackDetails(curr.extensionId, curr.track, curr.context, pos, total)
        }
    }

    private fun trackMedia(
        block: suspend TrackerClient.(extension: Extension<*>, details: TrackDetails?) -> Unit
    ) {
        scope.launch {
            val details = getDetails()
            val prevExtension = previousId?.takeIf { details?.extensionId != it }
                ?.let { musicList.getExtension(it) }
            val extension = musicList.getExtension(details?.extensionId)
            val trackers = trackerList.value.filter { it.isEnabled }
            prevExtension?.runIf<TrackerClient>(throwableFlow) { block(prevExtension, null) }
            extension?.runIf<TrackerClient>(throwableFlow) { block(extension, details) }
            trackers.forEach {
                launch { it.runIf<TrackerClient>(throwableFlow) { block(it, details) } }
            }
        }
    }

    private val mutex = Mutex()
    private val timers = mutableMapOf<String, PauseTimer>()
    private fun onTrackChanged(mediaItem: MediaItem?) {
        previousId = current?.extensionId
        current = mediaItem
        scope.launch {
            mutex.withLock {
                timers.forEach { (_, timer) -> timer.pause() }
                timers.clear()
            }
            trackMedia { extension, details ->
                onTrackChanged(details)
                details ?: return@trackMedia
                val duration = (this as? TrackerMarkClient)?.getMarkAsPlayedDuration(details)
                    ?: return@trackMedia
                mutex.withLock {
                    timers[extension.id] = PauseTimer(scope, duration) {
                        scope.launch {
                            extension.runIf<TrackerMarkClient>(throwableFlow) {
                                onMarkAsPlayed(details)
                            }
                        }
                    }
                }
            }
        }
    }

    override fun onIsPlayingChanged(isPlaying: Boolean) {
        scope.launch {
            playState.value = getDetails() to isPlaying
        }
    }

    override fun onPositionDiscontinuity(
        oldPosition: Player.PositionInfo, newPosition: Player.PositionInfo, reason: Int
    ) {
        scope.launch {
            val isPlaying = withContext(Dispatchers.Main) { player.isPlaying }
            playState.value = getDetails() to isPlaying
        }
        if (reason == 2 || current == null) return
        val mediaItem = newPosition.mediaItem ?: return
        if (oldPosition.mediaItem != mediaItem) return
        if (newPosition.positionMs != 0L) return

        onTrackChanged(current)
    }

    override fun onPlayerError(error: PlaybackException) {
        onTrackChanged(null)
    }

    private val playState = MutableStateFlow<Pair<TrackDetails?, Boolean>>(null to false)

    init {
        scope.launch {
            currentFlow.map { it?.let { curr -> curr.mediaItem.takeIf { curr.isLoaded } } }
                .distinctUntilChanged().collectLatest {
                    onTrackChanged(it)
                }
        }
        scope.launch {
            @OptIn(FlowPreview::class)
            playState.debounce(500).collectLatest { (_, isPlaying) ->
                mutex.withLock {
                    timers.forEach { (_, timer) ->
                        if (isPlaying) timer.resume()
                        else timer.pause()
                    }
                }
                trackMedia { _, details ->
                    onPlayingStateChanged(details, isPlaying)
                }
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\renderer\PlayerBitmapLoader.kt
================================================================================

package dev.brahmkshatriya.echo.playback.renderer

import android.content.Context
import android.graphics.Bitmap
import android.graphics.BitmapFactory
import android.net.Uri
import androidx.core.graphics.drawable.toBitmapOrNull
import androidx.media3.common.util.BitmapLoader
import androidx.media3.common.util.UnstableApi
import com.google.common.util.concurrent.ListenableFuture
import dev.brahmkshatriya.echo.common.models.ImageHolder
import dev.brahmkshatriya.echo.utils.CoroutineUtils.futureCatching
import dev.brahmkshatriya.echo.utils.Serializer.toData
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadDrawable
import kotlinx.coroutines.CoroutineScope

@UnstableApi
class PlayerBitmapLoader(
    val context: Context,
    private val scope: CoroutineScope
) : BitmapLoader {

    override fun supportsMimeType(mimeType: String) = true

    override fun decodeBitmap(data: ByteArray) = scope.futureCatching {
        BitmapFactory.decodeByteArray(data, 0, data.size) ?: error("Failed to decode bitmap")
    }

    override fun loadBitmap(uri: Uri): ListenableFuture<Bitmap> = scope.futureCatching {
        val cover = uri.getQueryParameter("actual_data")!!.toData<ImageHolder>().getOrThrow()
        cover.loadDrawable(context)?.toBitmapOrNull()
            ?: error("Failed to load bitmap of $cover")
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\renderer\RenderersFactory.kt
================================================================================

package dev.brahmkshatriya.echo.playback.renderer

import android.content.Context
import androidx.media3.common.audio.SonicAudioProcessor
import androidx.media3.common.util.UnstableApi
import androidx.media3.exoplayer.DefaultRenderersFactory
import androidx.media3.exoplayer.audio.DefaultAudioSink
import androidx.media3.exoplayer.audio.SilenceSkippingAudioProcessor

@androidx.annotation.OptIn(UnstableApi::class)
class RenderersFactory(
    context: Context
) : DefaultRenderersFactory(context) {

    override fun buildAudioSink(
        context: Context,
        enableFloatOutput: Boolean,
        enableAudioTrackPlaybackParams: Boolean
    ) = run {
        val silenceSkippingAudioProcessor = SilenceSkippingAudioProcessor(
            2_000_000,
            (20_000 / 2_000_000).toFloat(),
            2_000_000,
            0,
            256,
        )

        DefaultAudioSink.Builder(context)
            .setEnableFloatOutput(enableFloatOutput)
            .setEnableAudioTrackPlaybackParams(enableAudioTrackPlaybackParams)
            .setAudioProcessorChain(
                DefaultAudioSink.DefaultAudioProcessorChain(
                    emptyArray(), silenceSkippingAudioProcessor, SonicAudioProcessor()
                )
            )
            .build()
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\source\RawDataSource.kt
================================================================================

package dev.brahmkshatriya.echo.playback.source

import android.net.Uri
import androidx.annotation.OptIn
import androidx.media3.common.util.UnstableApi
import androidx.media3.datasource.BaseDataSource
import androidx.media3.datasource.DataSource
import androidx.media3.datasource.DataSpec
import dev.brahmkshatriya.echo.common.models.Streamable
import kotlinx.coroutines.runBlocking
import java.io.InputStream

@OptIn(UnstableApi::class)
class RawDataSource : BaseDataSource(true) {

    class Factory : DataSource.Factory {
        override fun createDataSource() = RawDataSource()
    }

    private var stream: InputStream? = null
    private var uri: Uri? = null

    override fun open(dataSpec: DataSpec): Long {
        val streamable = dataSpec.customData as Streamable.Source.Raw
        val (source, total) = runBlocking {
            streamable.streamProvider!!.provide(dataSpec.position, dataSpec.length)
        }
        uri = dataSpec.uri
        stream = source
        return total
    }

    override fun read(buffer: ByteArray, offset: Int, length: Int): Int {
        return stream!!.read(buffer, offset, length)
    }

    override fun getUri() = uri

    override fun close() {
        stream?.close()
        stream = null
        uri = null
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\source\StreamableDataSource.kt
================================================================================

package dev.brahmkshatriya.echo.playback.source

import android.content.Context
import androidx.core.net.toUri
import androidx.media3.common.util.UnstableApi
import androidx.media3.datasource.BaseDataSource
import androidx.media3.datasource.DataSource
import androidx.media3.datasource.DataSpec
import androidx.media3.datasource.DefaultDataSource
import androidx.media3.datasource.DefaultHttpDataSource
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.playback.source.StreamableResolver.Companion.copy

@UnstableApi
class StreamableDataSource(
    private val defaultDataSourceFactory: Lazy<DefaultDataSource.Factory>,
    private val defaultHttpDataSourceFactory: Lazy<DefaultHttpDataSource.Factory>,
    private val rawDataSourceFactory: Lazy<RawDataSource.Factory>,
) : BaseDataSource(true) {

    class Factory(
        context: Context,
    ) : DataSource.Factory {
        private val defaultDataSourceFactory = lazy {
            DefaultDataSource.Factory(context, defaultHttpDataSourceFactory.value)
        }
        private val defaultHttpDataSourceFactory = lazy {
            DefaultHttpDataSource.Factory().setAllowCrossProtocolRedirects(true)
        }
        private val rawDataSourceFactory = lazy { RawDataSource.Factory() }
        override fun createDataSource() = StreamableDataSource(
            defaultDataSourceFactory, defaultHttpDataSourceFactory, rawDataSourceFactory
        )
    }

    private var source: DataSource? = null

    override fun getUri() = source?.uri

    override fun read(buffer: ByteArray, offset: Int, length: Int) =
        source?.read(buffer, offset, length) ?: throw Exception("Source not opened")

    override fun close() {
        source?.close()
        source = null
    }

    override fun open(dataSpec: DataSpec): Long {
        val result = dataSpec.customData as? Result<*>
        val (factory, spec) = when (result) {
            null -> defaultDataSourceFactory to dataSpec
            else -> when (val streamable = result.getOrThrow() as Streamable.Source) {
                is Streamable.Source.Raw -> rawDataSourceFactory to
                        dataSpec.copy(uri = streamable.uri, customData = streamable)

                is Streamable.Source.Http -> {
                    val spec = streamable.request.run {
                        defaultHttpDataSourceFactory.value.setDefaultRequestProperties(headers)
                        dataSpec.copy(uri = url.toUri(), httpRequestHeaders = headers)
                    }
                    defaultDataSourceFactory to spec
                }
            }
        }
        val source = factory.value.createDataSource()
        this.source = source
        return source.open(spec)
    }

    companion object {
        val Streamable.Source.uri
            get() = when (this) {
                is Streamable.Source.Http -> request.url.toUri()
                is Streamable.Source.Raw -> "raw://${id.hashCode()}".toUri()
            }
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\source\StreamableLoader.kt
================================================================================

package dev.brahmkshatriya.echo.playback.source

import android.net.Uri
import androidx.media3.common.MediaItem
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.common.models.Streamable.Source.Companion.toSource
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtensionOrThrow
import dev.brahmkshatriya.echo.extensions.MediaState
import dev.brahmkshatriya.echo.extensions.cache.Cached
import dev.brahmkshatriya.echo.extensions.cache.Cached.loadStreamableMedia
import dev.brahmkshatriya.echo.playback.MediaItemUtils
import dev.brahmkshatriya.echo.playback.MediaItemUtils.backgroundIndex
import dev.brahmkshatriya.echo.playback.MediaItemUtils.downloaded
import dev.brahmkshatriya.echo.playback.MediaItemUtils.extensionId
import dev.brahmkshatriya.echo.playback.MediaItemUtils.isLoaded
import dev.brahmkshatriya.echo.playback.MediaItemUtils.serverIndex
import dev.brahmkshatriya.echo.playback.MediaItemUtils.state
import dev.brahmkshatriya.echo.playback.MediaItemUtils.subtitleIndex
import dev.brahmkshatriya.echo.playback.MediaItemUtils.track
import dev.brahmkshatriya.echo.ui.media.MediaHeaderAdapter.Companion.playableString
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.async
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.first
import kotlinx.coroutines.withContext
import java.io.File

class StreamableLoader(
    private val app: App,
    private val extensionListFlow: StateFlow<List<MusicExtension>>,
    private val downloadFlow: StateFlow<List<Downloader.Info>>
) {
    suspend fun load(mediaItem: MediaItem) = withContext(Dispatchers.IO) {
        extensionListFlow.first { it.isNotEmpty() }
        val new = if (mediaItem.isLoaded) mediaItem
        else MediaItemUtils.buildLoaded(
            app, downloadFlow.value, mediaItem, loadTrack(mediaItem)
        )

        val server = async { loadServer(new) }
        val background =
            async { if (new.backgroundIndex < 0) null else loadBackground(new).getOrNull() }
        val subtitle = async { if (new.subtitleIndex < 0) null else loadSubtitle(new).getOrNull() }

        MediaItemUtils.buildWithBackgroundAndSubtitle(
            new, background.await(), subtitle.await()
        ) to server.await()
    }

    private suspend fun <T> withClient(
        mediaItem: MediaItem,
        block: suspend (Extension<*>) -> Result<T>
    ): Result<T> {
        val extension = extensionListFlow.getExtensionOrThrow(mediaItem.extensionId)
        return block(extension)
    }

    private suspend fun loadTrack(item: MediaItem): MediaState.Loaded<Track> {
        val track = withClient(item) {
            Cached.loadMedia(app, it, item.state)
        }
        return track.getOrThrow()
    }

    private suspend fun loadServer(mediaItem: MediaItem): Result<Streamable.Media.Server> {
        val downloaded = mediaItem.downloaded
        val servers = mediaItem.track.servers
        val index = mediaItem.serverIndex
        if (!downloaded.isNullOrEmpty() && servers.size == index) {
            return runCatching {
                Streamable.Media.Server(
                    downloaded.map { Uri.fromFile(File(it)).toString().toSource() },
                    true
                )
            }
        }
        return withClient(mediaItem) {
            runCatching {
                val isPlayable = mediaItem.track.playableString(app.context)
                if (isPlayable != null) throw Exception(isPlayable)
                val streamable = servers.getOrNull(index) ?: throw Exception("Server not found")
                loadStreamableMedia(
                    app, it, mediaItem.track, streamable
                ).getOrThrow() as Streamable.Media.Server
            }
        }
    }

    private suspend fun loadBackground(mediaItem: MediaItem): Result<Streamable.Media.Background> {
        val streams = mediaItem.track.backgrounds
        val index = mediaItem.backgroundIndex
        val streamable = streams[index]
        return withClient(mediaItem) {
            runCatching {
                loadStreamableMedia(
                    app, it, mediaItem.track, streamable
                ).getOrThrow() as Streamable.Media.Background
            }
        }
    }

    private suspend fun loadSubtitle(mediaItem: MediaItem): Result<Streamable.Media.Subtitle> {
        val streams = mediaItem.track.subtitles
        val index = mediaItem.subtitleIndex
        val streamable = streams[index]
        return withClient(mediaItem) {
            runCatching {
                loadStreamableMedia(
                    app, it, mediaItem.track, streamable
                ).getOrThrow() as Streamable.Media.Subtitle
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\source\StreamableMediaSource.kt
================================================================================

package dev.brahmkshatriya.echo.playback.source

import androidx.media3.common.C
import androidx.media3.common.MediaItem
import androidx.media3.common.Timeline
import androidx.media3.common.util.UnstableApi
import androidx.media3.common.util.Util
import androidx.media3.datasource.ResolvingDataSource
import androidx.media3.datasource.TransferListener
import androidx.media3.datasource.cache.CacheDataSource
import androidx.media3.datasource.cache.SimpleCache
import androidx.media3.exoplayer.dash.DashMediaSource
import androidx.media3.exoplayer.drm.DrmSessionManagerProvider
import androidx.media3.exoplayer.hls.HlsMediaSource
import androidx.media3.exoplayer.source.CompositeMediaSource
import androidx.media3.exoplayer.source.DefaultMediaSourceFactory
import androidx.media3.exoplayer.source.MediaPeriod
import androidx.media3.exoplayer.source.MediaSource
import androidx.media3.exoplayer.source.MergingMediaSource
import androidx.media3.exoplayer.upstream.Allocator
import androidx.media3.exoplayer.upstream.LoadErrorHandlingPolicy
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.playback.MediaItemUtils
import dev.brahmkshatriya.echo.playback.MediaItemUtils.backgroundIndex
import dev.brahmkshatriya.echo.playback.MediaItemUtils.extensionId
import dev.brahmkshatriya.echo.playback.MediaItemUtils.retries
import dev.brahmkshatriya.echo.playback.MediaItemUtils.serverIndex
import dev.brahmkshatriya.echo.playback.MediaItemUtils.sourceIndex
import dev.brahmkshatriya.echo.playback.MediaItemUtils.subtitleIndex
import dev.brahmkshatriya.echo.playback.PlayerService.Companion.select
import dev.brahmkshatriya.echo.playback.PlayerState
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.launch
import java.io.IOException

@UnstableApi
class StreamableMediaSource(
    private var mediaItem: MediaItem,
    private val app: App,
    private val scope: CoroutineScope,
    private val state: PlayerState,
    private val loader: StreamableLoader,
    private val cacheFactories: Factories,
    private val factories: Factories,
    private val changeFlow: MutableSharedFlow<Pair<MediaItem, MediaItem>>,
) : CompositeMediaSource<Nothing>() {

    private var error: Throwable? = null
    override fun maybeThrowSourceInfoRefreshError() {
        error?.let { throw IOException(it) }
        super.maybeThrowSourceInfoRefreshError()
    }

    fun getFactory(source: Streamable.Source) = if (source.isLive) factories else cacheFactories

    private lateinit var actualSource: MediaSource
    override fun prepareSourceInternal(mediaTransferListener: TransferListener?) {
        super.prepareSourceInternal(mediaTransferListener)
        val handler = Util.createHandlerForCurrentLooper()
        scope.launch {
            var (new, serv) = runCatching { loader.load(mediaItem) }.getOrElse {
                error = it
                return@launch
            }
            val server = serv.getOrNull()
            state.servers[new.mediaId] = serv
            state.serverChanged.emit(Unit)
            val sources = server?.sources
            actualSource = when (sources?.size) {
                0, null -> factories.create(new, -1, null)
                1 -> {
                    val source = sources.first()
                    getFactory(source).create(new, 0, source)
                }

                else -> {
                    if (server.merged) MergingMediaSource(
                        *sources.mapIndexed { index, source ->
                            getFactory(source).create(new, index, source)
                        }.toTypedArray()
                    ) else {
                        val index = mediaItem.sourceIndex
                        val source = sources.getOrNull(index)
                            ?: sources.select(app, new.extensionId) { it.quality }
                        val newIndex = sources.indexOf(source)
                        new = MediaItemUtils.buildSource(new, newIndex)
                        getFactory(source).create(new, newIndex, source)
                    }
                }
            }

            changeFlow.emit(mediaItem to new)
            mediaItem = new

            handler.post {
                runCatching {
                    prepareChildSource(null, actualSource)
                }.getOrElse {
                    it.printStackTrace()
                }
            }
        }
    }

    override fun onChildSourceInfoRefreshed(
        childSourceId: Nothing?, mediaSource: MediaSource, newTimeline: Timeline,
    ) = refreshSourceInfo(newTimeline)

    override fun getMediaItem() = mediaItem

    override fun createPeriod(
        id: MediaSource.MediaPeriodId, allocator: Allocator, startPositionUs: Long,
    ) = actualSource.createPeriod(id, allocator, startPositionUs)

    override fun releasePeriod(mediaPeriod: MediaPeriod) =
        actualSource.releasePeriod(mediaPeriod)

    override fun canUpdateMediaItem(mediaItem: MediaItem) = run {
        this.mediaItem.apply {
            if (retries != mediaItem.retries) return@run false
            if (serverIndex != mediaItem.serverIndex) return@run false
            if (this.sourceIndex != mediaItem.sourceIndex) return@run false
            if (backgroundIndex != mediaItem.backgroundIndex) return@run false
            if (subtitleIndex != mediaItem.subtitleIndex) return@run false
        }
        if (::actualSource.isInitialized) actualSource.canUpdateMediaItem(mediaItem)
        else false
    }

    override fun updateMediaItem(mediaItem: MediaItem) {
        this.mediaItem = mediaItem
        actualSource.updateMediaItem(mediaItem)
    }

    data class Factories(
        val dash: Lazy<MediaSource.Factory>,
        val hls: Lazy<MediaSource.Factory>,
        val default: Lazy<MediaSource.Factory>,
    ) {
        fun create(mediaItem: MediaItem, index: Int, source: Streamable.Source?): MediaSource {
            val type = (source as? Streamable.Source.Http)?.type
            val factory = when (type) {
                Streamable.SourceType.DASH -> dash
                Streamable.SourceType.HLS -> hls
                Streamable.SourceType.Progressive, null -> default
            }
            val new = MediaItemUtils.buildForSource(mediaItem, index, source)
            return factory.value.createMediaSource(new)
        }
    }

    class Factory(
        private val app: App,
        private val scope: CoroutineScope,
        private val state: PlayerState,
        extensions: ExtensionLoader,
        cache: SimpleCache,
        downloadFlow: StateFlow<List<Downloader.Info>>,
        private val changeFlow: MutableSharedFlow<Pair<MediaItem, MediaItem>>,
    ) : MediaSource.Factory {

        private val loader = StreamableLoader(app, extensions.music, downloadFlow)

        val dataSourceFactory = StreamableDataSource.Factory(app.context)
        val streamableResolver = StreamableResolver(app.context, state.servers)

        private val cacheDataSource = ResolvingDataSource.Factory(
            CacheDataSource.Factory().setCache(cache)
                .setUpstreamDataSourceFactory(dataSourceFactory),
            streamableResolver
        )

        private val dataSource = ResolvingDataSource.Factory(
            dataSourceFactory, streamableResolver
        )

        private val cacheFactories = createFactories(cacheDataSource)

        private val factories = createFactories(dataSource)

        private fun createFactories(dataSource: ResolvingDataSource.Factory) = Factories(
            lazily { DashMediaSource.Factory(dataSource) },
            lazily { HlsMediaSource.Factory(dataSource) },
            lazily { DefaultMediaSourceFactory(dataSource) }
        )

        private var drmSessionManagerProvider: DrmSessionManagerProvider? = null
        private var loadErrorHandlingPolicy: LoadErrorHandlingPolicy? = null
        private fun lazily(factory: () -> MediaSource.Factory) = lazy {
            factory().apply {
                drmSessionManagerProvider?.let { setDrmSessionManagerProvider(it) }
                loadErrorHandlingPolicy?.let { setLoadErrorHandlingPolicy(it) }
            }
        }

        override fun getSupportedTypes() = intArrayOf(
            C.CONTENT_TYPE_OTHER, C.CONTENT_TYPE_HLS, C.CONTENT_TYPE_DASH
        )

        override fun setDrmSessionManagerProvider(
            drmSessionManagerProvider: DrmSessionManagerProvider,
        ): MediaSource.Factory {
            this.drmSessionManagerProvider = drmSessionManagerProvider
            return this
        }

        override fun setLoadErrorHandlingPolicy(
            loadErrorHandlingPolicy: LoadErrorHandlingPolicy,
        ): MediaSource.Factory {
            this.loadErrorHandlingPolicy = loadErrorHandlingPolicy
            return this
        }

        override fun createMediaSource(mediaItem: MediaItem) = StreamableMediaSource(
            mediaItem, app, scope, state, loader, cacheFactories, factories, changeFlow
        )
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\playback\source\StreamableResolver.kt
================================================================================

package dev.brahmkshatriya.echo.playback.source

import android.content.Context
import android.net.Uri
import androidx.annotation.OptIn
import androidx.media3.common.util.UnstableApi
import androidx.media3.datasource.DataSpec
import androidx.media3.datasource.ResolvingDataSource.Resolver
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.playback.MediaItemUtils.toKey
import dev.brahmkshatriya.echo.playback.source.StreamableDataSource.Companion.uri
import dev.brahmkshatriya.echo.utils.CacheUtils.saveToCache
import java.util.WeakHashMap

class StreamableResolver(
    private val context: Context,
    private val current: WeakHashMap<String, Result<Streamable.Media.Server>>,
) : Resolver {

    @OptIn(UnstableApi::class)
    override fun resolveDataSpec(dataSpec: DataSpec): DataSpec {
        val (id, index) = dataSpec.uri.toString().toKey().getOrNull() ?: return dataSpec
        val streamable = runCatching { current[id]!!.getOrThrow().sources[index] }
        val uri = streamable.map {
            if (!it.isLive)
                context.saveToCache(it.uri.toString(), dataSpec.uri.toString(), "player")
            it.uri
        }
        return dataSpec.copy(uri = uri.getOrNull(), customData = streamable)
    }

    companion object {

        @OptIn(UnstableApi::class)
        fun DataSpec.copy(
            uri: Uri? = null,
            uriPositionOffset: Long? = null,
            httpMethod: Int? = null,
            httpBody: ByteArray? = null,
            httpRequestHeaders: Map<String, String>? = null,
            position: Long? = null,
            length: Long? = null,
            key: String? = null,
            flags: Int? = null,
            customData: Any? = null,
        ): DataSpec {
            return DataSpec.Builder()
                .setUri(uri ?: this.uri)
                .setUriPositionOffset(uriPositionOffset ?: this.uriPositionOffset)
                .setHttpMethod(httpMethod ?: this.httpMethod)
                .setHttpBody(httpBody ?: this.httpBody)
                .setHttpRequestHeaders(httpRequestHeaders ?: this.httpRequestHeaders)
                .setPosition(position ?: this.position)
                .setLength(length ?: this.length)
                .setKey(key ?: this.key)
                .setFlags(flags ?: this.flags)
                .setCustomData(customData ?: this.customData)
                .build()
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\common\ExceptionFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.common

import android.app.Activity
import android.os.Build
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.view.WindowManager
import androidx.fragment.app.Fragment
import androidx.lifecycle.lifecycleScope
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.databinding.FragmentExceptionBinding
import dev.brahmkshatriya.echo.ui.common.ExceptionUtils.getPasteLink
import dev.brahmkshatriya.echo.ui.common.SnackBarHandler.Companion.createSnack
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyBackPressCallback
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyContentInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyFabInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsets
import dev.brahmkshatriya.echo.utils.ContextUtils.copyToClipboard
import dev.brahmkshatriya.echo.utils.Serializer.getSerialized
import dev.brahmkshatriya.echo.utils.Serializer.putSerialized
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.setupTransition
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import dev.brahmkshatriya.echo.utils.ui.UiUtils.configureAppBar
import kotlinx.coroutines.launch

class ExceptionFragment : Fragment() {
    companion object {
        fun getBundle(data: ExceptionUtils.Data) = Bundle().apply {
            putSerialized("data", data)
        }
    }

    private val data by lazy {
        requireArguments().getSerialized<ExceptionUtils.Data>("data")!!.getOrThrow()
    }

    private var binding by autoCleared<FragmentExceptionBinding>()
    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
    ): View {
        binding = FragmentExceptionBinding.inflate(inflater, container, false)
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        setupTransition(view)
        applyInsets {
            binding.nestedScrollView.applyContentInsets(it)
            binding.fabContainer.applyFabInsets(it, systemInsets.value)
        }
        applyBackPressCallback()
        binding.appBarLayout.configureAppBar { offset ->
            binding.toolbarOutline.alpha = offset
            binding.exceptionIconContainer.alpha = 1 - offset
        }

        binding.exceptionMessage.setNavigationOnClickListener {
            parentFragmentManager.popBackStack()
        }

        binding.exceptionMessage.title = data.title
        binding.exceptionDetails.text = data.trace
        binding.fabCopy.setOnClickListener {
            copyException()
        }

        requireActivity().run {
            window.setFlags(
                WindowManager.LayoutParams.FLAG_SECURE,
                WindowManager.LayoutParams.FLAG_SECURE
            )
            if (Build.VERSION.SDK_INT < Build.VERSION_CODES.UPSIDE_DOWN_CAKE) return@run
            registerScreenCaptureCallback(mainExecutor, screenCaptureCallback)
        }
    }

    private fun copyException() {
        createSnack(R.string.copying_the_error)
        lifecycleScope.launch {
            val toCopy = getPasteLink(data).getOrElse { data.trace }
            requireContext().copyToClipboard("Error", toCopy)
        }
    }

    private val screenCaptureCallback by lazy {
        Activity.ScreenCaptureCallback {
            copyException()
        }
    }

    override fun onDestroyView() {
        super.onDestroyView()
        requireActivity().run {
            window.clearFlags(WindowManager.LayoutParams.FLAG_SECURE)
            if (Build.VERSION.SDK_INT < Build.VERSION_CODES.UPSIDE_DOWN_CAKE) return@run
            unregisterScreenCaptureCallback(screenCaptureCallback)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\common\ExceptionUtils.kt
================================================================================

package dev.brahmkshatriya.echo.ui.common

import android.content.Context
import android.view.View
import androidx.fragment.app.FragmentActivity
import dev.brahmkshatriya.echo.MainActivity
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.helpers.ContinuationCallback.Companion.await
import dev.brahmkshatriya.echo.common.models.Message
import dev.brahmkshatriya.echo.download.exceptions.DownloadException
import dev.brahmkshatriya.echo.download.exceptions.DownloaderExtensionNotFoundException
import dev.brahmkshatriya.echo.download.tasks.BaseTask.Companion.getTitle
import dev.brahmkshatriya.echo.extensions.db.models.UserEntity
import dev.brahmkshatriya.echo.extensions.exceptions.AppException
import dev.brahmkshatriya.echo.extensions.exceptions.ExtensionLoaderException
import dev.brahmkshatriya.echo.extensions.exceptions.ExtensionNotFoundException
import dev.brahmkshatriya.echo.extensions.exceptions.InvalidExtensionListException
import dev.brahmkshatriya.echo.extensions.exceptions.RequiredExtensionsMissingException
import dev.brahmkshatriya.echo.playback.MediaItemUtils.extensionId
import dev.brahmkshatriya.echo.playback.MediaItemUtils.serverIndex
import dev.brahmkshatriya.echo.playback.MediaItemUtils.track
import dev.brahmkshatriya.echo.playback.exceptions.PlayerException
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.extensions.login.LoginFragment
import dev.brahmkshatriya.echo.ui.extensions.login.LoginUserListViewModel
import dev.brahmkshatriya.echo.utils.AppUpdater
import dev.brahmkshatriya.echo.utils.ContextUtils.appVersion
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.Serializer
import dev.brahmkshatriya.echo.utils.Serializer.rootCause
import dev.brahmkshatriya.echo.utils.Serializer.toJson
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.withContext
import kotlinx.serialization.Serializable
import okhttp3.OkHttpClient
import okhttp3.Request
import okhttp3.RequestBody.Companion.toRequestBody
import org.koin.androidx.viewmodel.ext.android.viewModel
import java.net.UnknownHostException
import java.nio.channels.UnresolvedAddressException

object ExceptionUtils {

    private fun Context.getTitle(throwable: Throwable): String? = when (throwable) {
        is LinkageError, is ReflectiveOperationException -> getString(R.string.extension_out_of_date)
        is UnknownHostException, is UnresolvedAddressException -> getString(R.string.no_internet)

        is ExtensionLoaderException ->
            getString(R.string.error_loading_extension_from_x, throwable.clazz)

        is ExtensionNotFoundException -> getString(R.string.extension_x_not_found, throwable.id)
        is RequiredExtensionsMissingException -> getString(
            R.string.required_extensions_missing_x,
            throwable.required.joinToString(", ")
        )

        is AppException -> when (throwable) {
            is AppException.Unauthorized ->
                getString(R.string.account_session_expired_in_x, throwable.extension.name)

            is AppException.LoginRequired ->
                getString(R.string.x_login_required, throwable.extension.name)

            is AppException.NotSupported -> getString(
                R.string.x_is_not_supported_in_x,
                throwable.operation,
                throwable.extension.name
            )

            is AppException.Other -> "${throwable.extension.name}: ${getFinalTitle(throwable.cause)}"
        }

        is InvalidExtensionListException -> getString(R.string.invalid_extension_list)
        is AppUpdater.UpdateException -> getString(R.string.error_updating_extension)

        is PlayerException -> "${throwable.mediaItem?.track?.title}: ${getFinalTitle(throwable.cause)}"

        is DownloadException -> {
            val title = getTitle(throwable.type, throwable.downloadEntity.track.getOrNull()?.title ?: "???")
            "${title}: ${getFinalTitle(throwable.cause)}"
        }

        is DownloaderExtensionNotFoundException -> getString(R.string.no_download_extension)

        else -> null
    }

    private fun getDetails(throwable: Throwable): String? = when (throwable) {
        is ExtensionLoaderException -> """
            Class: ${throwable.clazz}
            Source: ${throwable.source}
        """.trimIndent()

        is ExtensionNotFoundException -> "Extension ID: ${throwable.id}"
        is RequiredExtensionsMissingException ->
            "Required Extension: ${throwable.required.joinToString(", ")}"

        is AppException -> """
            Type: ${throwable.extension.type}
            ID: ${throwable.extension.id}
            Extension: ${throwable.extension.name}(${throwable.extension.version})
            ${if (throwable is AppException.NotSupported) "Operation: ${throwable.operation}" else ""}
        """.trimIndent()

        is InvalidExtensionListException -> "Link: ${throwable.link}"

        is PlayerException -> throwable.mediaItem?.let {
            """
            Extension ID: ${it.extensionId}
            Track: ${it.track.toJson()}
            Stream: ${it.run { track.servers.getOrNull(serverIndex)?.toJson() }}
        """.trimIndent()
        }

        is DownloadException -> """
            Type: ${throwable.type}
            Track: ${throwable.downloadEntity.toJson()}
        """.trimIndent()

        is Serializer.DecodingException -> "JSON: ${throwable.json}"

        else -> null
    }

    fun Context.getFinalTitle(throwable: Throwable): String? =
        getTitle(throwable) ?: throwable.cause?.let { getFinalTitle(it) } ?: throwable.message


    private fun getFinalDetails(throwable: Throwable): String = buildString {
        getDetails(throwable)?.let { appendLine(it) }
        throwable.cause?.let { append(getFinalDetails(it)) }
    }

    private fun getStackTrace(throwable: Throwable): String = buildString {
        appendLine("Version: ${appVersion()}")
        appendLine(getFinalDetails(throwable))
        appendLine("---Stack Trace---")
        appendLine(throwable.stackTraceToString())
    }

    @Serializable
    data class Data(val title: String, val trace: String)

    fun Throwable.toData(context: Context) = run {
        val title = context.getFinalTitle(this) ?: context.getString(
            R.string.error_x,
            message ?: this::class.run { simpleName ?: java.name }
        )
        Data(title, getStackTrace(this))
    }


    fun FragmentActivity.getMessage(throwable: Throwable, view: View?): Message {
        val title = getFinalTitle(throwable) ?: getString(
            R.string.error_x,
            throwable.message ?: throwable::class.run { simpleName ?: java.name }
        )
        val root = throwable.rootCause
        return Message(
            message = title,
            when (root) {
                is AppException.Unauthorized ->
                    Message.Action(getString(R.string.logout_and_login)) {
                        runCatching { openLoginException(root, view) }
                    }

                is AppException.LoginRequired -> Message.Action(getString(R.string.login)) {
                    runCatching { openLoginException(root, view) }
                }

                else -> Message.Action(getString(R.string.view)) {
                    runCatching { openException(Data(title, getStackTrace(throwable)), view) }
                }
            }
        )
    }

    private fun FragmentActivity.openException(data: Data, view: View? = null) {
        openFragment<ExceptionFragment>(view, ExceptionFragment.getBundle(data))
    }

    fun FragmentActivity.openLoginException(
        it: AppException.LoginRequired, view: View? = null
    ) {
        if (it is AppException.Unauthorized) {
            val model by viewModel<LoginUserListViewModel>()
            model.logout(UserEntity(it.extension.type, it.extension.id, it.userId, ""))
        }
        openFragment<LoginFragment>(view, LoginFragment.getBundle(it))
    }


    fun MainActivity.setupExceptionHandler(handler: SnackBarHandler) {
        observe(handler.app.throwFlow) { throwable ->
            val message = getMessage(throwable, null)
            handler.create(message)
        }
    }

    private val client = OkHttpClient()
    suspend fun getPasteLink(data: Data) = withContext(Dispatchers.IO) {
        val request = Request.Builder()
            .url("https://paste.rs")
            .post(data.trace.toRequestBody())
            .build()
        runCatching { client.newCall(request).await().body.string() }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\common\FragmentUtils.kt
================================================================================

package dev.brahmkshatriya.echo.ui.common

import android.content.Intent
import android.net.Uri
import android.os.Bundle
import android.view.View
import androidx.core.net.toFile
import androidx.fragment.app.Fragment
import androidx.fragment.app.FragmentActivity
import androidx.fragment.app.FragmentManager
import androidx.fragment.app.activityViewModels
import androidx.fragment.app.commit
import com.google.android.material.bottomsheet.BottomSheetBehavior.STATE_COLLAPSED
import com.google.android.material.bottomsheet.BottomSheetBehavior.STATE_EXPANDED
import com.google.android.material.bottomsheet.BottomSheetBehavior.STATE_HIDDEN
import dev.brahmkshatriya.echo.MainActivity
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Album
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.ui.common.SnackBarHandler.Companion.createSnack
import dev.brahmkshatriya.echo.ui.download.DownloadFragment
import dev.brahmkshatriya.echo.ui.extensions.ExtensionsViewModel
import dev.brahmkshatriya.echo.ui.extensions.WebViewUtils.onWebViewIntent
import dev.brahmkshatriya.echo.ui.media.MediaFragment
import org.koin.androidx.viewmodel.ext.android.viewModel

object FragmentUtils {
    inline fun <reified T : Fragment> Fragment.openFragment(
        view: View? = null, bundle: Bundle? = null,
    ) {
        val viewModel by activityViewModels<UiViewModel>()
        openFragment<T>(id, parentFragmentManager, viewModel, view, bundle)
    }

    inline fun <reified T : Fragment> openFragment(
        cont: Int,
        manager: FragmentManager,
        viewModel: UiViewModel,
        view: View? = null,
        bundle: Bundle? = null,
    ) {
        viewModel.collapsePlayer()
        manager.commit {
            setReorderingAllowed(true)
            addToBackStack(null)
            val fragment = createFragment<T>(bundle)
            val old = manager.findFragmentById(cont)
            if (old != null) hide(old)
            add(cont, fragment)
            setPrimaryNavigationFragment(fragment)
        }
    }

    inline fun <reified T : Fragment> createFragment(
        bundle: Bundle? = null
    ): T = T::class.java.getDeclaredConstructor().newInstance().apply { arguments = bundle }

    inline fun <reified T : Fragment> FragmentActivity.openFragment(
        view: View? = null, bundle: Bundle? = null, cont: Int = R.id.navHostFragment
    ) {
        val oldFragment = supportFragmentManager.findFragmentById(cont)
        if (oldFragment == null) {
            val viewModel by viewModel<UiViewModel>()
            openFragment<T>(cont, supportFragmentManager, viewModel, view, bundle)
        } else oldFragment.openFragment<T>(view, bundle)
    }

    inline fun <reified F : Fragment> Fragment.addIfNull(
        id: Int, tag: String, args: Bundle? = null
    ) {
        childFragmentManager.run {
            if (findFragmentByTag(tag) == null) commit {
                val fragment = createFragment<F>(args)
                add(id, fragment, tag)
            }
        }
    }

    fun MainActivity.setupIntents(
        uiViewModel: UiViewModel,
    ) {
        addOnNewIntentListener { onIntent(uiViewModel, it) }
        onIntent(uiViewModel, intent)
    }

    private fun FragmentActivity.onIntent(uiViewModel: UiViewModel, intent: Intent?) {
        this.intent = null
        intent ?: return
        val fromNotif = intent.hasExtra("fromNotification")
        if (fromNotif) uiViewModel.run {
            if (playerSheetState.value == STATE_HIDDEN) return@run
            changePlayerState(STATE_EXPANDED)
            changeMoreState(STATE_COLLAPSED)
            return
        }
        val fromDownload = intent.hasExtra("fromDownload")
        if (fromDownload) {
            uiViewModel.selectedSettingsTab.value = 0
            openFragment<DownloadFragment>()
            return
        }
        val webViewRequest = intent.hasExtra("webViewRequest")
        if (webViewRequest) {
            onWebViewIntent(intent)
            return
        }
        val uri = intent.data
        when (uri?.scheme) {
            "echo" -> runCatching { openItemFragmentFromUri(uri) }
            "file" -> {
                val viewModel by viewModel<ExtensionsViewModel>()
                viewModel.installWithPrompt(listOf(uri.toFile()))
            }
        }
    }

    private fun FragmentActivity.openItemFragmentFromUri(uri: Uri) {
        when (val extensionType = uri.host) {
            "music" -> {
                val extensionId = uri.pathSegments.firstOrNull()
                if (extensionId == null) {
                    createSnack("No extension id found")
                    return
                }
                val type = uri.pathSegments.getOrNull(1)
                val id = uri.pathSegments.getOrNull(2)
                if (id == null) {
                    val vm by viewModel<ExtensionsViewModel>()
                    vm.changeExtension(extensionId)
                    return
                }
                val name = uri.getQueryParameter("name").orEmpty()
                val item: EchoMediaItem? = when (type) {
                    "artist" -> Artist(id, name)
                    "track" -> Track(id, name)
                    "album" -> Album(id, name)
                    "playlist" -> Playlist(id, name, false)
                    else -> null
                }
                if (item == null) {
                    createSnack("Invalid item type")
                    return
                }
                openFragment<MediaFragment>(null, MediaFragment.getBundle(extensionId, item, false))
            }

            else -> {
                createSnack("Opening $extensionType extension is not possible")
            }
        }
    }
}



================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\common\GridAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.common

import androidx.core.util.toKotlinPair
import androidx.core.view.doOnLayout
import androidx.recyclerview.widget.ConcatAdapter
import androidx.recyclerview.widget.GridLayoutManager
import androidx.recyclerview.widget.RecyclerView
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.utils.ui.UiUtils.dpToPx
import dev.brahmkshatriya.echo.utils.ui.UiUtils.resolveStyledDimension
import kotlin.math.floor

interface GridAdapter {
    val adapter: RecyclerView.Adapter<*>
    fun getSpanSize(position: Int, width: Int, count: Int): Int

    class Concat(
        vararg adapters: GridAdapter
    ) : GridAdapter {
        override val adapter = ConcatAdapter(adapters.map { it.adapter })
        private val getSpanSizeMap = adapters.mapIndexed { index, gridAdapter ->
            gridAdapter.adapter to gridAdapter::getSpanSize
        }.toMap()

        override fun getSpanSize(position: Int, width: Int, count: Int): Int {
            val (adapter, pos) = adapter.getWrappedAdapterAndPosition(position).toKotlinPair()
            val getSpanSize = getSpanSizeMap[adapter]
                ?: throw IllegalStateException("No span size function found for adapter: ${adapter.javaClass.name}")
            return getSpanSize(pos, width, count)
        }
    }

    companion object {
        fun configureGridLayout(
            recycler: RecyclerView, gridAdapter: GridAdapter, even: Boolean = true
        ) {
            val context = recycler.context
            val layoutManager = GridLayoutManager(context, 1)
            recycler.doOnLayout {
                val itemWidth = context.resolveStyledDimension(R.attr.itemCoverSize)
                val width = it.width - it.paddingLeft - it.paddingRight
                val calc = floor(width.toFloat() / (itemWidth + 8.dpToPx(context))).toInt()
                val count = if (calc > 1) calc - if (even) calc % 2 else 0 else 1
                layoutManager.spanCount = count
                layoutManager.spanSizeLookup = object : GridLayoutManager.SpanSizeLookup() {
                    override fun getSpanSize(position: Int): Int {
                        val size = gridAdapter.getSpanSize(position, width, count)
                        return size
                    }
                }
            }
            recycler.adapter = gridAdapter.adapter
            recycler.layoutManager = layoutManager
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\common\PagedSource.kt
================================================================================

package dev.brahmkshatriya.echo.ui.common

import androidx.paging.LoadState
import androidx.paging.LoadStates
import androidx.paging.Pager
import androidx.paging.PagingConfig
import androidx.paging.PagingData
import androidx.paging.PagingSource
import androidx.paging.PagingState
import dev.brahmkshatriya.echo.common.helpers.PagedData
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.flowOn

class PagedSource<T : Any>(
    private val loaded: Result<PagedData<T>>?,
    private val cached: Result<PagedData<T>>? = null
) : PagingSource<String, T>() {

    val flow = Pager(
        PagingConfig(
            pageSize = 10,
            enablePlaceholders = false,
            prefetchDistance = 20
        )
    ) { this }.flow.flowOn(Dispatchers.IO)

    override val keyReuseSupported = true
    override fun getRefreshKey(state: PagingState<String, T>): String? {
        val pos = state.anchorPosition ?: return null
        val key = state.closestPageToPosition(pos)?.nextKey
        invalidate(key)
        return key
    }

    private fun invalidate(key: String?) {
        cached?.getOrNull()?.invalidate(key)
        loaded?.getOrNull()?.invalidate(key)
    }

    override suspend fun load(params: LoadParams<String>): LoadResult<String, T> {
        val key = params.key
        return runCatching {
            val page = loaded?.getOrThrow()?.loadPage(key) ?: throw LoadingException()
            LoadResult.Page(page.data, key, page.continuation)
        }.getOrElse { error ->
            val cachedPage = cached?.mapCatching { it.loadPage(key) }?.getOrNull()
            return if (cachedPage == null || cachedPage.data.isEmpty()) LoadResult.Error(error)
            else LoadResult.Page(cachedPage.data, key, cachedPage.continuation)
        }
    }

    companion object {
        fun <T : Any> empty() = PagingData.Companion.empty<T>(
            LoadStates(
                LoadState.Loading,
                LoadState.NotLoading(false),
                LoadState.NotLoading(true)
            )
        )
    }

    class LoadingException() : Exception("Loading PagedSource")
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\common\SnackBarHandler.kt
================================================================================

package dev.brahmkshatriya.echo.ui.common

import android.view.View
import android.view.ViewGroup
import androidx.core.view.updateLayoutParams
import androidx.fragment.app.Fragment
import androidx.fragment.app.FragmentActivity
import androidx.lifecycle.lifecycleScope
import com.google.android.material.snackbar.Snackbar
import dev.brahmkshatriya.echo.MainActivity
import dev.brahmkshatriya.echo.common.models.Message
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.UiUtils.dpToPx
import kotlinx.coroutines.launch
import org.koin.android.ext.android.inject
import java.util.WeakHashMap

class SnackBarHandler(
    val app: App,
) {

    private val messageFlow = app.messageFlow
    private val messages = mutableListOf<Message>()

    suspend fun create(message: Message) {
        if (messages.isEmpty()) messageFlow.emit(message)
        if (!messages.contains(message)) messages.add(message)
    }

    suspend fun remove(message: Message, dismissed: Boolean) {
        if (dismissed) messages.remove(message)
        if (messages.isNotEmpty()) messageFlow.emit(messages.first())
    }

    companion object {
        fun MainActivity.setupSnackBar(
            uiViewModel: UiViewModel, root: View
        ): SnackBarHandler {
            val handler by inject<SnackBarHandler>()
            val padding = 8.dpToPx(this@setupSnackBar)
            @Suppress("IDENTITY_SENSITIVE_OPERATIONS_WITH_VALUE_TYPE")
            val snackBars = WeakHashMap<Int, Snackbar>()
            fun updateInsets(snackBar: Snackbar) {
                snackBar.view.updateLayoutParams<ViewGroup.MarginLayoutParams> {
                    val insets = uiViewModel.systemInsets.value
                    val snackbarInsets = uiViewModel.getSnackbarInsets()
                    marginStart = insets.start + snackbarInsets.start + padding
                    marginEnd = insets.end + snackbarInsets.end + padding
                    bottomMargin = snackbarInsets.bottom + padding
                }
            }
            fun createSnackBar(message: Message) {
                val snackBar = Snackbar.make(root, message.message, Snackbar.LENGTH_LONG)
                snackBar.animationMode = Snackbar.ANIMATION_MODE_SLIDE
                updateInsets(snackBar)
                message.action?.run { snackBar.setAction(name) { handler() } }
                snackBars[message.hashCode()] = snackBar
                snackBar.addCallback(object : Snackbar.Callback() {
                    override fun onDismissed(transientBottomBar: Snackbar?, event: Int) {
                        snackBars.remove(message.hashCode())
                        lifecycleScope.launch {
                            handler.remove(message, event != DISMISS_EVENT_MANUAL)
                        }
                    }
                })
                snackBar.show()
            }

            observe(handler.messageFlow) { message ->
                createSnackBar(message)
            }
            observe(uiViewModel.combined) { _ ->
                snackBars.values.forEach { updateInsets(it) }
            }
            return handler
        }

        fun Fragment.createSnack(message: Message) {
            val handler by inject<SnackBarHandler>()
            lifecycleScope.launch { handler.create(message) }
        }

        fun Fragment.createSnack(message: String) {
            createSnack(Message(message))
        }

        fun Fragment.createSnack(message: Int) {
            createSnack(getString(message))
        }

        fun FragmentActivity.createSnack(message: Message) {
            val handler by inject<SnackBarHandler>()
            lifecycleScope.launch { handler.create(message) }
        }

        fun FragmentActivity.createSnack(message: String) {
            createSnack(Message(message))
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\common\UiViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.common

import android.content.Context
import android.graphics.drawable.Drawable
import android.view.View
import android.view.ViewGroup.MarginLayoutParams
import androidx.activity.BackEventCompat
import androidx.activity.OnBackPressedCallback
import androidx.core.graphics.drawable.toBitmap
import androidx.core.graphics.drawable.toDrawable
import androidx.core.view.ViewCompat
import androidx.core.view.WindowInsetsCompat
import androidx.core.view.forEach
import androidx.core.view.updateLayoutParams
import androidx.core.view.updatePadding
import androidx.core.view.updatePaddingRelative
import androidx.fragment.app.Fragment
import androidx.lifecycle.LifecycleOwner
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import androidx.swiperefreshlayout.widget.SwipeRefreshLayout
import com.google.android.material.bottomsheet.BottomSheetBehavior
import com.google.android.material.bottomsheet.BottomSheetBehavior.STATE_COLLAPSED
import com.google.android.material.bottomsheet.BottomSheetBehavior.STATE_EXPANDED
import com.google.android.material.bottomsheet.BottomSheetBehavior.STATE_HIDDEN
import com.google.android.material.color.MaterialColors
import com.google.android.material.navigation.NavigationBarView
import com.google.android.material.navigationrail.NavigationRailView
import dev.brahmkshatriya.echo.MainActivity
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.ui.main.MainFragment
import dev.brahmkshatriya.echo.ui.player.PlayerColors
import dev.brahmkshatriya.echo.utils.CacheUtils.getFromCache
import dev.brahmkshatriya.echo.utils.CacheUtils.saveToCache
import dev.brahmkshatriya.echo.utils.ContextUtils.emit
import dev.brahmkshatriya.echo.utils.ContextUtils.getSettings
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadDrawable
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.animateTranslation
import dev.brahmkshatriya.echo.utils.ui.GradientDrawable
import dev.brahmkshatriya.echo.utils.ui.UiUtils.dpToPx
import dev.brahmkshatriya.echo.utils.ui.UiUtils.isRTL
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.SharingStarted.Companion.Lazily
import kotlinx.coroutines.flow.combine
import kotlinx.coroutines.flow.merge
import kotlinx.coroutines.flow.stateIn
import kotlinx.coroutines.flow.transform
import kotlinx.coroutines.launch
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import org.koin.androidx.viewmodel.ext.android.viewModel
import java.lang.ref.WeakReference
import kotlin.math.max
import kotlin.math.min

class UiViewModel(
    context: Context,
    extensionLoader: ExtensionLoader,
    private val playerState: PlayerState
) : ViewModel() {

    data class Insets(
        val top: Int = 0,
        val bottom: Int = 0,
        val start: Int = 0,
        val end: Int = 0
    ) {
        fun add(vararg insets: Insets) = insets.fold(this) { acc, it ->
            Insets(
                acc.top + it.top,
                acc.bottom + it.bottom,
                acc.start + it.start,
                acc.end + it.end
            )
        }
    }

    var currentAppColor: String? = null
    val navigation = MutableStateFlow(context.getFromCache("main_nav") ?: 0).also { flow ->
        viewModelScope.launch { flow.collect { context.saveToCache("main_nav", it) } }
    }
    val selectedSettingsTab = MutableStateFlow(0)
    val navigationReselected = MutableSharedFlow<Int>()
    val navIds = listOf(
        R.id.homeFragment,
        R.id.searchFragment,
        R.id.libraryFragment
    )

    val currentNavBackground = MutableStateFlow<Drawable?>(null)
    private val extensionColor = extensionLoader.current.transform { extension ->
        emit(null)
        val drawable = extension?.metadata?.icon?.loadDrawable(context) ?: return@transform
        emit(PlayerColors.getDominantColor(drawable.toBitmap()).toDrawable())
    }

    private val navViewInsets = MutableStateFlow(Insets())
    private val playerNavViewInsets = MutableStateFlow(Insets())
    private val playerInsets = MutableStateFlow(Insets())
    val systemInsets = MutableStateFlow(Insets())
    val isMainFragment = MutableStateFlow(true)

    val combined = systemInsets.combine(navViewInsets) { system, nav ->
        if (isMainFragment.value) system.add(nav) else system
    }.combine(playerInsets) { system, player ->
        system.add(player)
    }.stateIn(viewModelScope, Lazily, Insets())

    fun getCombined() = (if (isMainFragment.value) systemInsets.value.add(navViewInsets.value)
    else systemInsets.value).add(playerInsets.value)

    fun getSnackbarInsets(): Insets {
        if (playerSheetState.value == STATE_EXPANDED) return Insets()
        if (isMainFragment.value) return navViewInsets.value.add(playerInsets.value)
        return playerInsets.value
    }

    fun setPlayerNavViewInsets(context: Context, isNavVisible: Boolean, isRail: Boolean): Insets {
        val insets = context.resources.run {
            if (!isNavVisible) return@run Insets()
            val height = getDimensionPixelSize(R.dimen.nav_height)
            if (!isRail) return@run Insets(bottom = height)
            val width = getDimensionPixelSize(R.dimen.nav_width)
            if (context.isRTL()) Insets(end = width) else Insets(start = width)
        }
        playerNavViewInsets.value = insets
        return insets
    }

    fun setNavInsets(insets: Insets) {
        navViewInsets.value = insets
    }

    fun setSystemInsets(context: Context, insets: WindowInsetsCompat) {
        val system = insets.getInsetsIgnoringVisibility(WindowInsetsCompat.Type.systemBars())
        val display = insets.getInsets(WindowInsetsCompat.Type.displayCutout())
        val inset = system.run {
            val top = if (top > 0) top else display.top
            val bottom = if (bottom > 0) bottom else display.bottom
            val left = if (left > 0) left else display.left
            val right = if (right > 0) right else display.right
            if (context.isRTL()) Insets(top, bottom, right, left)
            else Insets(top, bottom, left, right)
        }
        systemInsets.value = inset
    }

    fun setPlayerInsets(context: Context, isVisible: Boolean) {
        val insets = if (isVisible) {
            val height = context.resources.getDimensionPixelSize(R.dimen.collapsed_cover_size)
            Insets(bottom = height + 8.dpToPx(context))
        } else Insets()
        playerInsets.value = insets
    }

    val playerBgVisible = MutableStateFlow(false)
    private fun getState() =
        if (playerState.current.value != null) STATE_COLLAPSED else STATE_HIDDEN

    val playerSheetState = MutableStateFlow(getState())
    val playerSheetOffset = MutableStateFlow(0f)
    val moreSheetState = MutableStateFlow(STATE_COLLAPSED)
    val moreSheetOffset = MutableStateFlow(0f)
    val playerBackProgress = MutableStateFlow(0f)
    private var playerBackPressCallback: OnBackPressedCallback? = null
    private var moreBackPressCallback: OnBackPressedCallback? = null
    fun backPressCallback() = object : OnBackPressedCallback(false) {
        val backPress
            get() = moreBackPressCallback ?: playerBackPressCallback

        override fun handleOnBackStarted(backEvent: BackEventCompat) {
            backPress?.handleOnBackStarted(backEvent)
        }

        override fun handleOnBackProgressed(backEvent: BackEventCompat) {
            backPress?.handleOnBackProgressed(backEvent)
        }

        override fun handleOnBackPressed() {
            backPress?.handleOnBackPressed()
        }

        override fun handleOnBackCancelled() {
            backPress?.handleOnBackCancelled()
        }
    }

    fun collapsePlayer() {
        changePlayerState(getState())
        changeMoreState(STATE_COLLAPSED)
    }

    private var playerBehaviour = WeakReference<BottomSheetBehavior<View>>(null)
    fun changePlayerState(state: Int) {
        val behavior = playerBehaviour.get() ?: return
        if (state == STATE_HIDDEN) behavior.isHideable = true
        behavior.state = state
    }

    private var moreBehaviour = WeakReference<BottomSheetBehavior<View>>(null)
    fun changeMoreState(state: Int) {
        val behavior = moreBehaviour.get() ?: return
        behavior.state = state
    }

    var lastMoreTab = R.id.queue
    var playerControlsHeight = MutableStateFlow(0)
    val playerDrawable = MutableStateFlow<Drawable?>(null)
    val playerColors = MutableStateFlow<PlayerColors?>(null)

    val mainBgDrawable = playerDrawable.combine(extensionColor) { a, b -> a ?: b }

    fun changeBgVisible(show: Boolean) {
        playerBgVisible.value = show
        if (!show && moreSheetState.value == STATE_EXPANDED)
            changeMoreState(STATE_COLLAPSED)
    }

    companion object {
        const val BACKGROUND_GRADIENT = "bg_gradient"
        fun Fragment.applyGradient(view: View, drawable: Drawable?) {
            val settings = requireContext().getSettings()
            val isGradient = settings.getBoolean(BACKGROUND_GRADIENT, true)
            val drawable = if (isGradient) {
                drawable ?: MaterialColors.getColor(view, androidx.appcompat.R.attr.colorPrimary)
                    .toDrawable()
            } else null
            view.background = GradientDrawable.createBlurred(view, drawable)
        }

        fun Fragment.applyInsets(vararg flows: Flow<*>, block: UiViewModel.(Insets) -> Unit) {
            val uiViewModel by activityViewModel<UiViewModel>()
            val flows = listOf(uiViewModel.combined) + flows
            observe(flows.merge()) { uiViewModel.block(uiViewModel.combined.value) }
        }

        fun Fragment.applyInsetsWithChild(
            appBar: View,
            child: View?,
            bottom: Int = 12,
            block: UiViewModel.(Insets) -> Unit = {}
        ) {
            val uiViewModel by activityViewModel<UiViewModel>()
            observe(uiViewModel.combined) { insets ->
                child?.updatePadding(
                    bottom = insets.bottom + bottom.dpToPx(child.context),
                )
                appBar.updatePaddingRelative(
                    top = insets.top,
                    start = insets.start,
                    end = insets.end
                )
                uiViewModel.block(insets)
            }
        }

        fun View.applyContentInsets(
            insets: Insets, horizontal: Int = 0, vertical: Int = 0, bottom: Int = 0
        ) {
            val horizontalPadding = horizontal.dpToPx(context)
            val verticalPadding = vertical.dpToPx(context)
            updatePaddingRelative(
                top = verticalPadding,
                bottom = insets.bottom + verticalPadding + bottom.dpToPx(context),
                start = insets.start + horizontalPadding,
                end = insets.end + horizontalPadding
            )
        }

        fun View.applyInsets(it: Insets, vertical: Int, horizontal: Int, bottom: Int = 0) {
            val verticalPadding = vertical.dpToPx(context)
            val horizontalPadding = horizontal.dpToPx(context)
            val bottomPadding = bottom.dpToPx(context)
            updatePaddingRelative(
                top = verticalPadding + it.top,
                bottom = bottomPadding + verticalPadding + it.bottom,
                start = horizontalPadding + it.start,
                end = horizontalPadding + it.end,
            )
        }

        fun View.applyInsets(it: Insets, paddingDp: Int = 0) {
            val padding = paddingDp.dpToPx(context)
            updatePaddingRelative(
                top = it.top + padding,
                bottom = it.bottom + padding,
                start = it.start + padding,
                end = it.end + padding,
            )
        }

        fun View.applyHorizontalInsets(it: Insets, isLandScape: Boolean = false) {
            updatePaddingRelative(
                start = if (!isLandScape) it.start else 0,
                end = it.end
            )
        }

        fun View.applyFabInsets(it: Insets, system: Insets, paddingDp: Int = 0) {
            val padding = paddingDp.dpToPx(context)
            updatePaddingRelative(
                bottom = it.bottom - system.bottom + padding,
                start = it.start + padding,
                end = it.end + padding,
            )
        }

        fun Fragment.applyBackPressCallback(callback: ((Int) -> Unit)? = null) {
            val activity = requireActivity()
            val viewModel by activity.viewModel<UiViewModel>()
            val backPress = viewModel.backPressCallback()
            observe(viewModel.playerSheetState) {
                backPress.isEnabled = it == STATE_EXPANDED
                callback?.invoke(it)
            }
            activity.onBackPressedDispatcher.addCallback(viewLifecycleOwner, backPress)
        }

        private fun BottomSheetBehavior<View>.backPressCallback(
            onProgress: (Float) -> Unit = {},
        ) = object : OnBackPressedCallback(true) {
            override fun handleOnBackStarted(backEvent: BackEventCompat) {
                startBackProgress(backEvent)
                onProgress(0f)
            }

            override fun handleOnBackProgressed(backEvent: BackEventCompat) {
                updateBackProgress(backEvent)
                onProgress(min(1f, backEvent.progress * 2))
            }

            override fun handleOnBackPressed() {
                handleBackInvoked()
                onProgress(0f)
            }

            override fun handleOnBackCancelled() {
                cancelBackProgress()
                onProgress(0f)
            }
        }

        const val NAVBAR_GRADIENT = "navbar_gradient"
        fun MainActivity.setupNavBarAndInsets(
            uiViewModel: UiViewModel,
            root: View,
            navView: NavigationBarView
        ) {
            val isRail = navView is NavigationRailView
            ViewCompat.setOnApplyWindowInsetsListener(root) { _, insets ->
                uiViewModel.setSystemInsets(this, insets)
                val navBarSize = uiViewModel.systemInsets.value.bottom
                val full = getSettings().getBoolean(NAVBAR_GRADIENT, true)
                GradientDrawable.applyNav(navView, isRail, navBarSize, !full)
                insets
            }

            navView.setOnItemSelectedListener {
                uiViewModel.navigation.value = uiViewModel.navIds.indexOf(it.itemId)
                true
            }
            navView.menu.forEach {
                findViewById<View>(it.itemId).setOnClickListener { _ ->
                    uiViewModel.run {
                        if (navigation.value == navIds.indexOf(it.itemId))
                            emit(navigationReselected, navIds.indexOf(it.itemId))
                    }
                    navView.selectedItemId = it.itemId
                }
            }

            fun animateNav(animate: Boolean) {
                val isMainFragment = uiViewModel.isMainFragment.value
                val insets =
                    uiViewModel.setPlayerNavViewInsets(this, isMainFragment, isRail)
                val isPlayerCollapsed = uiViewModel.playerSheetState.value != STATE_EXPANDED
                navView.animateTranslation(isRail, isMainFragment, isPlayerCollapsed, animate) {
                    uiViewModel.setNavInsets(insets)
                    if (isPlayerCollapsed) navView.updateLayoutParams<MarginLayoutParams> {
                        bottomMargin = -it.toInt()
                    }
                }
            }

            animateNav(false)
            supportFragmentManager.addOnBackStackChangedListener {
                val current = supportFragmentManager.findFragmentById(R.id.navHostFragment)
                val isMain = current is MainFragment
                uiViewModel.isMainFragment.value = isMain
                animateNav(true)
            }
            observe(uiViewModel.navigation) { navView.selectedItemId = uiViewModel.navIds[it] }
            observe(uiViewModel.playerSheetOffset) {
                if (!uiViewModel.isMainFragment.value) return@observe
                val offset = max(0f, it)
                if (isRail) navView.translationX = -navView.width * offset
                else navView.translationY = navView.height * offset
                navView.menu.forEach { item ->
                    findViewById<View>(item.itemId).apply {
                        translationX = 0f
                        translationY = 0f
                    }
                }
            }
        }

        fun isFinalState(state: Int): Boolean {
            return state == STATE_HIDDEN || state == STATE_COLLAPSED || state == STATE_EXPANDED
        }

        fun LifecycleOwner.setupPlayerBehavior(viewModel: UiViewModel, view: View) {
            val behavior = BottomSheetBehavior.from(view)
            viewModel.playerBehaviour = WeakReference(behavior)
            observe(viewModel.moreSheetState) { behavior.isDraggable = it == STATE_COLLAPSED }
            viewModel.playerBackPressCallback = behavior.backPressCallback {
                viewModel.playerBackProgress.value = it
            }

            val combined =
                viewModel.run { playerNavViewInsets.combine(systemInsets) { nav, _ -> nav } }
            observe(combined) {
                val bottomPadding = 8.dpToPx(view.context)
                val collapsedCoverSize =
                    view.resources.getDimensionPixelSize(R.dimen.collapsed_cover_size) + bottomPadding
                val peekHeight =
                    view.resources.getDimensionPixelSize(R.dimen.bottom_player_peek_height)
                val height = if (it.bottom == 0) collapsedCoverSize else peekHeight
                val newHeight = viewModel.systemInsets.value.bottom + height
                behavior.peekHeight = newHeight
                if (viewModel.playerSheetState.value != STATE_HIDDEN)
                    animateTranslation(view, behavior.peekHeight, newHeight)
            }
            val callback = object : BottomSheetBehavior.BottomSheetCallback() {
                override fun onStateChanged(bottomSheet: View, newState: Int) {
                    val expanded = newState == STATE_EXPANDED
                    behavior.isHideable = !expanded
                    viewModel.playerSheetState.value = newState
                    if (!isFinalState(newState)) return
                    viewModel.setPlayerInsets(view.context, newState != STATE_HIDDEN)
                    onSlide(view, if (newState == STATE_EXPANDED) 1f else 0f)
                }

                override fun onSlide(bottomSheet: View, slideOffset: Float) {
                    viewModel.playerSheetOffset.value = slideOffset
                }
            }
            val state = viewModel.playerSheetState.value
            callback.onStateChanged(view, state)
            callback.onSlide(view, if (state == STATE_EXPANDED) 1f else 0f)
            behavior.addBottomSheetCallback(callback)
        }

        fun setupPlayerMoreBehavior(viewModel: UiViewModel, view: View) {
            val behavior = BottomSheetBehavior.from(view)
            viewModel.moreBehaviour = WeakReference(behavior)
            val backPress = behavior.backPressCallback()
            val callback = object : BottomSheetBehavior.BottomSheetCallback() {
                override fun onStateChanged(bottomSheet: View, newState: Int) {
                    viewModel.moreSheetState.value = newState
                    viewModel.moreBackPressCallback =
                        backPress.takeIf { newState != STATE_COLLAPSED }
                }

                override fun onSlide(bottomSheet: View, slideOffset: Float) {
                    val offset = max(0f, slideOffset)
                    viewModel.moreSheetOffset.value = offset
                }
            }
            val state = viewModel.moreSheetState.value
            callback.onStateChanged(view, state)
            callback.onSlide(view, if (state == STATE_EXPANDED) 1f else 0f)
            behavior.addBottomSheetCallback(callback)
        }

        fun SwipeRefreshLayout.configure(it: Insets = Insets()) {
            setProgressViewOffset(true, it.top, 72.dpToPx(context) + it.top)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\download\DownloadFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.download

import android.os.Bundle
import android.view.View
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.paging.LoadState
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.databinding.FragmentDownloadBinding
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedExtension
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedExtension.Companion.getFeed
import dev.brahmkshatriya.echo.ui.common.ExceptionFragment
import dev.brahmkshatriya.echo.ui.common.ExceptionUtils
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.ui.common.GridAdapter.Companion.configureGridLayout
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyBackPressCallback
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyContentInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyFabInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsets
import dev.brahmkshatriya.echo.ui.download.DownloadsAdapter.Companion.toItems
import dev.brahmkshatriya.echo.ui.feed.FeedAdapter.Companion.getFeedAdapter
import dev.brahmkshatriya.echo.ui.feed.FeedAdapter.Companion.getTouchHelper
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener.Companion.getFeedListener
import dev.brahmkshatriya.echo.ui.feed.FeedData
import dev.brahmkshatriya.echo.ui.feed.FeedViewModel
import dev.brahmkshatriya.echo.ui.media.LineAdapter
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.setupTransition
import dev.brahmkshatriya.echo.utils.ui.FastScrollerHelper
import dev.brahmkshatriya.echo.utils.ui.UiUtils.configureAppBar
import org.koin.androidx.viewmodel.ext.android.viewModel

class DownloadFragment : Fragment(R.layout.fragment_download) {

    private val vm by viewModel<DownloadViewModel>()
    private val downloadsAdapter by lazy {
        DownloadsAdapter(object : DownloadsAdapter.Listener {
            override fun onCancel(trackId: Long) = vm.cancel(trackId)
            override fun onRestart(trackId: Long) = vm.restart(trackId)
            override fun onExceptionClicked(data: ExceptionUtils.Data) = requireActivity()
                .openFragment<ExceptionFragment>(null, ExceptionFragment.getBundle(data))
        })
    }

    private val feedViewModel by viewModel<FeedViewModel>()
    private val feedData by lazy {
        val flow = vm.downloader.unified.downloadFeed
        feedViewModel.getFeedData(
            "downloads", Feed.Buttons(), false, flow
        ) {
            val feed = requireContext().getFeed(flow.value)
            FeedData.State(UnifiedExtension.metadata.id, null, feed)
        }
    }

    private val feedListener by lazy { getFeedListener() }
    private val feedAdapter by lazy {
        getFeedAdapter(feedData, feedListener)
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        val binding = FragmentDownloadBinding.bind(view)
        setupTransition(view)
        applyBackPressCallback()
        binding.appBarLayout.configureAppBar { offset ->
            binding.toolbarOutline.alpha = offset
            binding.iconContainer.alpha = 1 - offset
        }
        binding.toolBar.setNavigationOnClickListener {
            parentFragmentManager.popBackStack()
        }
        applyInsets {
            binding.recyclerView.applyContentInsets(it, 20, 8, 72)
            binding.fabContainer.applyFabInsets(it, systemInsets.value)
        }
        FastScrollerHelper.applyTo(binding.recyclerView)
        val lineAdapter = LineAdapter()
        binding.fabCancel.setOnClickListener {
            vm.cancelAll()
        }
        binding.recyclerView.itemAnimator = null
        getTouchHelper(feedListener).attachToRecyclerView(binding.recyclerView)
        configureGridLayout(
            binding.recyclerView,
            GridAdapter.Concat(
                downloadsAdapter,
                lineAdapter,
                feedAdapter.withLoading(this)
            )
        )
        observe(vm.flow) { infos ->
            binding.fabCancel.isVisible = infos.any { it.download.finalFile == null }
            lineAdapter.loadState = if (infos.isNotEmpty()) LoadState.Loading
            else LoadState.NotLoading(false)
            downloadsAdapter.submitList(infos.toItems(vm.extensions.music.value))
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\download\DownloadsAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.download

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.view.isVisible
import androidx.recyclerview.widget.DiffUtil
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.models.Progress
import dev.brahmkshatriya.echo.databinding.ItemDownloadBinding
import dev.brahmkshatriya.echo.databinding.ItemDownloadTaskBinding
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.download.db.models.ContextEntity
import dev.brahmkshatriya.echo.download.db.models.DownloadEntity
import dev.brahmkshatriya.echo.download.db.models.TaskType
import dev.brahmkshatriya.echo.download.tasks.BaseTask.Companion.getTitle
import dev.brahmkshatriya.echo.ui.common.ExceptionUtils
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadAsCircle
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadInto
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimListAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class DownloadsAdapter(
    private val listener: Listener,
) : ScrollAnimListAdapter<DownloadsAdapter.Item, DownloadsAdapter.ViewHolder>(
    object : DiffUtil.ItemCallback<Item>() {
        override fun areContentsTheSame(oldItem: Item, newItem: Item) = oldItem == newItem
        override fun areItemsTheSame(oldItem: Item, newItem: Item): Boolean {
            return when (oldItem) {
                is Download -> if (newItem !is Download) false
                else oldItem.downloadEntity.id == newItem.downloadEntity.id

                is Task -> if (newItem !is Task) false
                else oldItem.id == newItem.id
            }
        }
    }
), GridAdapter {

    interface Listener {
        fun onExceptionClicked(data: ExceptionUtils.Data)
        fun onCancel(trackId: Long)
        fun onRestart(trackId: Long)
    }

    sealed class ViewHolder(itemView: View) : ScrollAnimViewHolder(itemView)

    class DownloadViewHolder(
        parent: ViewGroup,
        private val listener: Listener,
        private val binding: ItemDownloadBinding = ItemDownloadBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        ),
    ) : ViewHolder(binding.root) {
        init {
            binding.imageView.clipToOutline = true
        }

        fun bind(item: Download) {
            val entity = item.downloadEntity
            binding.apply {
                val track = entity.track.getOrNull()
                title.text = track?.title
                track?.cover.loadInto(imageView, R.drawable.art_music)
                item.extension?.metadata?.icon?.loadAsCircle(
                    extensionIcon, R.drawable.ic_extension
                ) {
                    extensionIcon.setImageDrawable(it)
                }
                val sub = item.context?.mediaItem?.getOrNull()?.title
                subtitle.text = sub
                subtitle.isVisible = !sub.isNullOrEmpty()

                exception.text = entity.exception?.title
                exception.isVisible = exception.text.isNotEmpty()

                remove.setOnClickListener {
                    listener.onCancel(entity.id)
                }

                retry.isVisible = entity.exception != null
                retry.setOnClickListener {
                    listener.onRestart(entity.id)
                }
                root.setOnClickListener {
                    val data = entity.exception ?: return@setOnClickListener
                    listener.onExceptionClicked(data)
                }
            }
        }
    }

    class TaskViewHolder(
        parent: ViewGroup,
        private val binding: ItemDownloadTaskBinding = ItemDownloadTaskBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        ),
    ) : ViewHolder(binding.root) {
        fun bind(item: Task) = binding.apply {
            progressBar.isIndeterminate = item.progress.size == 0L
            progressBar.max = item.progress.size.toInt()
            progressBar.progress = item.progress.progress.toInt()
            subtitle.text = item.progress.toText()
            title.text = root.context.run {
                getTitle(item.taskType, getString(R.string.download))
            }
        }
    }


    sealed interface Item
    data class Download(
        val context: ContextEntity?,
        val downloadEntity: DownloadEntity,
        val extension: Extension<*>?,
    ) : Item

    data class Task(val taskType: TaskType, val progress: Progress, val id: Long) : Item

    override fun getItemViewType(position: Int): Int {
        return when (getItem(position)) {
            is Download -> 0
            is Task -> 1
        }
    }

    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) = 2.coerceAtLeast(count)

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) = when (viewType) {
        0 -> DownloadViewHolder(parent, listener)
        1 -> TaskViewHolder(parent)
        else -> throw IllegalArgumentException("Invalid view type")
    }

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        super.onBindViewHolder(holder, position)
        when (holder) {
            is DownloadViewHolder -> {
                val item = getItem(position) as Download
                holder.bind(item)
            }

            is TaskViewHolder -> {
                val item = getItem(position) as Task
                holder.bind(item)
            }
        }
    }


    companion object {
        fun List<Downloader.Info>.toItems(extensions: List<Extension<*>>) = filter {
            it.download.finalFile == null
        }.flatMap { info ->
            val download = info.download
            val extension = extensions.find { it.id == download.extensionId }
            listOf(Download(info.context, download, extension)) + info.workers.map {
                Task(it.first, it.second, download.id)
            }
        }

        private val SPEED_UNITS = arrayOf("", "KB", "MB", "GB")
        fun Progress.toText() = buildString {
            if (size > 0) append("%.2f%% • ".format(progress.toFloat() / size * 100))
            append(
                if (size > 0) "${convertBytes(progress)} / ${convertBytes(size)}"
                else convertBytes(progress)
            )
            if (speed > 0) append(" • ${convertBytes(speed)}/s")
        }

        private fun convertBytes(bytes: Long): String {
            var value = bytes.toFloat()
            var unitIndex = 0

            while (value >= 500 && unitIndex < SPEED_UNITS.size - 1) {
                value /= 1024
                unitIndex++
            }
            return "%.2f %s".format(value, SPEED_UNITS[unitIndex])
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\download\DownloadViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.download

import androidx.fragment.app.FragmentActivity
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.clients.DownloadClient
import dev.brahmkshatriya.echo.common.models.DownloadContext
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Message
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getIf
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.isClient
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.extensions.add.ExtensionsAddBottomSheet
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.ExperimentalCoroutinesApi
import kotlinx.coroutines.flow.SharingStarted.Companion.Eagerly
import kotlinx.coroutines.flow.first
import kotlinx.coroutines.flow.mapLatest
import kotlinx.coroutines.flow.stateIn
import kotlinx.coroutines.launch

class DownloadViewModel(
    app: App,
    extensionLoader: ExtensionLoader,
    val downloader: Downloader,
) : ViewModel() {

    private val app = app.context
    private val messageFlow = app.messageFlow
    private val throwableFlow = app.throwFlow

    @OptIn(ExperimentalCoroutinesApi::class)
    val downloadExtensions = extensionLoader.misc.mapLatest { list ->
        list.filter { it.isEnabled && it.isClient<DownloadClient>() }
    }.stateIn(viewModelScope, Eagerly, null)

    val extensions = extensionLoader

    val flow = downloader.flow

    fun addToDownload(
        activity: FragmentActivity,
        extensionId: String,
        item: EchoMediaItem,
        context: EchoMediaItem?,
    ) = viewModelScope.launch(Dispatchers.IO) {
        with(activity) {
            messageFlow.emit(Message(getString(R.string.downloading_x, item.title)))
            val downloadExt = downloadExtensions.first { it != null }?.firstOrNull()
                ?: return@with messageFlow.emit(
                    Message(
                        app.getString(R.string.no_download_extension),
                        Message.Action(getString(R.string.add_extension)) {
                            ExtensionsAddBottomSheet().show(supportFragmentManager, null)
                        }
                    )
                )

            val downloads =
                downloadExt.getIf<DownloadClient, List<DownloadContext>>(throwableFlow) {
                    getDownloadTracks(extensionId, item, context)
                } ?: return@with

            if (downloads.isEmpty()) return@with messageFlow.emit(
                Message(app.getString(R.string.nothing_to_download_in_x, item.title))
            )

            downloader.add(downloads)
            messageFlow.emit(
                Message(
                    getString(R.string.download_started),
                    Message.Action(getString(R.string.view)) {
                        openFragment<DownloadFragment>()
                    }
                )
            )
        }
    }

    fun cancel(trackId: Long) {
        downloader.cancel(trackId)
    }

    fun restart(trackId: Long) {
        downloader.restart(trackId)
    }

    fun cancelAll() {
        downloader.cancelAll()
    }

    fun deleteDownload(item: EchoMediaItem) {
        when (item) {
            is Track -> downloader.deleteDownload(item.id)
            else -> downloader.deleteContext(item.id)
        }
        viewModelScope.launch {
            messageFlow.emit(
                Message(app.getString(R.string.removed_x_from_downloads, item.title))
            )
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\ApkLinkParser.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions

import org.w3c.dom.Document
import org.w3c.dom.Node
import org.xml.sax.Attributes
import org.xml.sax.helpers.DefaultHandler
import java.io.File
import java.io.InputStream
import java.util.Stack
import java.util.zip.ZipFile
import javax.xml.parsers.DocumentBuilderFactory
import javax.xml.parsers.SAXParserFactory

object ApkLinkParser {
    fun getSupportedLinks(apkFile: File): List<String> {
        val zip = ZipFile(apkFile)
        val entry = zip.getEntry("AndroidManifest.xml")
        val manifest = parse(zip.getInputStream(entry)) ?: return listOf()
        return manifest.getElementsByTagName("intent-filter").run {
            (0 until length).flatMap { index ->
                val intentFilter = item(index)
                val schemes = mutableListOf<String>()
                val hosts = mutableListOf<String>()
                val paths = mutableListOf<String>()

                intentFilter.childNodes.run {
                    for (i in 0 until length) {
                        val node = item(i)
                        fun data(name: String) = node.attributes.getNamedItem(name)?.nodeValue
                        if (node.nodeName == "data") {
                            data("android:scheme")?.let { schemes.add(it) }
                            data("android:host")?.let { hosts.add(it) }
                            data("android:path")?.let {
                                paths.add(it)
                            }
                        }
                    }

                    schemes.flatMap { scheme ->
                        hosts.flatMap { host ->
                            if (paths.isEmpty()) listOf("$scheme://$host")
                            else paths.map { path -> "$scheme://$host$path" }
                        }
                    }
                }
            }
        }
    }

    private fun parse(input: InputStream) = runCatching {
        val xmlDom = XmlDom()
        runCatching {
            CompressedXmlParser(xmlDom).parse(input)
        }.getOrElse {
            NonCompressedXmlParser(xmlDom).parse(input)
        }
        xmlDom.document
    }.getOrNull()


    class Attribute {
        var name: String? = null
        var prefix: String? = null
        var namespace: String? = null
        var value: String? = null
    }

    class XmlDom {
        val document: Document =
            DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument()
        private val mStack = Stack<Node?>()
        private fun isEmpty(text: String?) = text == null || "" == text
        fun startDocument() {
            mStack.push(document)
        }

        fun startElement(
            uri: String?, localName: String?, qName: String?, attrs: Array<Attribute>
        ) {
            val elt = if (isEmpty(uri)) document.createElement(localName)
            else document.createElementNS(uri, qName)

            for (attr in attrs) {
                if (isEmpty(attr.namespace)) elt.setAttribute(attr.name, attr.value)
                else elt.setAttributeNS(attr.namespace, attr.prefix + ':' + attr.name, attr.value)
            }
            mStack.peek()!!.appendChild(elt)
            mStack.push(elt)
        }

        fun endElement() {
            mStack.pop()
        }

        fun text(data: String?) {
            mStack.peek()!!.appendChild(document.createTextNode(data))
        }

        fun characterData(data: String?) {
            mStack.peek()!!.appendChild(document.createCDATASection(data))
        }
    }

    //NOT TESTED
    class NonCompressedXmlParser(private val mListener: XmlDom) {
        fun parse(input: InputStream) {
            val factory = SAXParserFactory.newInstance()
            val saxParser = factory.newSAXParser()
            val handler = object : DefaultHandler() {
                override fun startDocument() = mListener.startDocument()
                override fun startElement(
                    uri: String?, localName: String?, qName: String, attributes: Attributes
                ) {
                    val attrs = Array(attributes.length) { i ->
                        Attribute().apply {
                            name = attributes.getQName(i)
                            namespace = uri
                            value = attributes.getValue(i)
                        }
                    }
                    mListener.startElement(uri, localName, qName, attrs)
                }

                override fun characters(ch: CharArray, start: Int, length: Int) {
                    val data = String(ch, start, length)
                    mListener.characterData(data)
                }

                override fun endElement(uri: String?, localName: String?, qName: String) =
                    mListener.endElement()

                override fun endDocument() {}
            }

            saxParser.parse(input, handler)
        }
    }

    class CompressedXmlParser(private val mListener: XmlDom) {

        fun parse(input: InputStream) {
            mData = ByteArray(input.available())
            input.read(mData)
            input.close()
            parseCompressedXml()
        }

        private fun parseCompressedXml() {
            var word0: Int

            while (mParserOffset < mData.size) {
                word0 = getLEWord(mParserOffset)
                when (word0) {
                    WORD_START_DOCUMENT -> parseStartDocument()
                    WORD_STRING_TABLE -> parseStringTable()
                    WORD_RES_TABLE -> parseResourceTable()
                    WORD_START_NS -> parseNamespace(true)
                    WORD_END_NS -> parseNamespace(false)
                    WORD_START_TAG -> parseStartTag()
                    WORD_END_TAG -> parseEndTag()
                    WORD_TEXT -> parseText()
                    else -> mParserOffset += WORD_SIZE
                }
            }
        }

        private fun parseStartDocument() {
            mListener.startDocument()
            mParserOffset += 2 * WORD_SIZE
        }

        private fun parseStringTable() {
            val chunk = getLEWord(mParserOffset + (1 * WORD_SIZE))
            mStringsCount = getLEWord(mParserOffset + (2 * WORD_SIZE))
            mStylesCount = getLEWord(mParserOffset + (3 * WORD_SIZE))
            val strOffset = mParserOffset + getLEWord(mParserOffset + (5 * WORD_SIZE))
            mStringsTable = arrayOfNulls(mStringsCount)
            var offset: Int
            for (i in 0 until mStringsCount) {
                offset = strOffset + getLEWord(mParserOffset + ((i + 7) * WORD_SIZE))
                mStringsTable[i] = getStringFromStringTable(offset)
            }
            mParserOffset += chunk
        }

        private fun parseResourceTable() {
            val chunk = getLEWord(mParserOffset + (1 * WORD_SIZE))
            mResCount = (chunk / 4) - 2
            mResourcesIds = IntArray(mResCount)
            for (i in 0 until mResCount) {
                mResourcesIds[i] = getLEWord(mParserOffset + ((i + 2) * WORD_SIZE))
            }
            mParserOffset += chunk
        }

        private fun parseNamespace(start: Boolean) {
            val prefixIdx = getLEWord(mParserOffset + (4 * WORD_SIZE))
            val uriIdx = getLEWord(mParserOffset + (5 * WORD_SIZE))
            val uri = getString(uriIdx)
            val prefix = getString(prefixIdx)
            if (start) mNamespaces[uri] = prefix
            else mNamespaces.remove(uri)
            mParserOffset += 6 * WORD_SIZE
        }

        private fun parseStartTag() {
            val uriIdx = getLEWord(mParserOffset + (4 * WORD_SIZE))
            val nameIdx = getLEWord(mParserOffset + (5 * WORD_SIZE))
            val attrCount = getLEShort(mParserOffset + (7 * WORD_SIZE))
            val name = getString(nameIdx)
            val (uri, qName) = if (uriIdx == -0x1) "" to name else {
                val uri = getString(uriIdx)
                uri to if (mNamespaces.containsKey(uri)) mNamespaces[uri] + ':' + name
                else name
            }
            mParserOffset += 9 * WORD_SIZE
            val attrs = Array(attrCount) {
                parseAttribute().also { mParserOffset += 5 * 4 }
            }
            mListener.startElement(uri, name, qName, attrs)
        }

        private fun parseAttribute(): Attribute {
            val attrNSIdx = getLEWord(mParserOffset)
            val attrNameIdx = getLEWord(mParserOffset + (1 * WORD_SIZE))
            val attrValueIdx = getLEWord(mParserOffset + (2 * WORD_SIZE))
            val attrType = getLEWord(mParserOffset + (3 * WORD_SIZE))
            val attrData = getLEWord(mParserOffset + (4 * WORD_SIZE))

            val attr = Attribute()
            attr.name = getString(attrNameIdx)

            if (attrNSIdx == -0x1) {
                attr.namespace = null
                attr.prefix = null
            } else {
                val uri = getString(attrNSIdx)
                if (mNamespaces.containsKey(uri)) {
                    attr.namespace = uri
                    attr.prefix = mNamespaces[uri]
                }
            }
            attr.value = if (attrValueIdx == -0x1) getAttributeValue(attrType, attrData)
            else getString(attrValueIdx)

            return attr
        }

        private fun parseText() {
            val strIndex = getLEWord(mParserOffset + (4 * WORD_SIZE))
            val data = getString(strIndex)
            mListener.characterData(data)
            mParserOffset += 7 * WORD_SIZE
        }

        private fun parseEndTag() {
            mListener.endElement()
            mParserOffset += 6 * WORD_SIZE
        }

        private fun getString(index: Int): String? {
            val res = if (index in 0..<mStringsCount) mStringsTable[index] else null
            return res
        }

        private fun getStringFromStringTable(offset: Int): String {
            val strLength: Int
            val chars: ByteArray
            if (mData[offset + 1] == mData[offset]) {
                strLength = mData[offset].toInt()
                chars = ByteArray(strLength)
                for (i in 0 until strLength) {
                    chars[i] = mData[offset + 2 + i]
                }
            } else {
                strLength =
                    ((mData[offset + 1].toInt() shl 8) and 0xFF00) or (mData[offset].toInt() and 0xFF)
                chars = ByteArray(strLength)
                for (i in 0 until strLength) {
                    chars[i] = mData[offset + 2 + (i * 2)]
                }
            }
            return String(chars)
        }

        private fun getLEWord(off: Int) = (((mData[off + 3].toInt() shl 24) and -0x1000000)
                or ((mData[off + 2].toInt() shl 16) and 0x00ff0000)
                or ((mData[off + 1].toInt() shl 8) and 0x0000ff00)
                or ((mData[off + 0].toInt() shl 0) and 0x000000ff))

        private fun getLEShort(off: Int) =
            ((mData[off + 1].toInt() shl 8) and 0xff00) or ((mData[off + 0].toInt() shl 0) and 0x00ff)

        private fun getAttributeValue(type: Int, data: Int) = when (type) {
            TYPE_STRING -> getString(data)
            TYPE_ID_REF -> String.format("@id/0x%08X", data)
            TYPE_ATTR_REF -> String.format("?id/0x%08X", data)
            else -> String.format("%08X/0x%08X", type, data)
        }

        private val mNamespaces: MutableMap<String?, String?> = HashMap()
        private lateinit var mData: ByteArray

        private lateinit var mStringsTable: Array<String?>
        private lateinit var mResourcesIds: IntArray
        private var mStringsCount = 0
        private var mStylesCount = 0
        private var mResCount = 0
        private var mParserOffset = 0

        companion object {
            const val WORD_START_DOCUMENT: Int = 0x00080003

            const val WORD_STRING_TABLE: Int = 0x001C0001
            const val WORD_RES_TABLE: Int = 0x00080180

            const val WORD_START_NS: Int = 0x00100100
            const val WORD_END_NS: Int = 0x00100101
            const val WORD_START_TAG: Int = 0x00100102
            const val WORD_END_TAG: Int = 0x00100103
            const val WORD_TEXT: Int = 0x00100104
            const val WORD_SIZE: Int = 4

            private const val TYPE_ID_REF = 0x01000008
            private const val TYPE_ATTR_REF = 0x02000008
            private const val TYPE_STRING = 0x03000008
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\ExtensionInfoFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions

import android.app.Activity
import android.content.Context
import android.content.Intent
import android.os.Bundle
import android.view.View
import androidx.activity.result.contract.ActivityResultContracts
import androidx.core.net.toUri
import androidx.preference.Preference
import androidx.preference.PreferenceCategory
import androidx.preference.PreferenceFragmentCompat
import androidx.preference.PreferenceGroup
import androidx.preference.SwitchPreferenceCompat
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.ImageHolder
import dev.brahmkshatriya.echo.common.models.ImportType
import dev.brahmkshatriya.echo.common.settings.Setting
import dev.brahmkshatriya.echo.common.settings.SettingCategory
import dev.brahmkshatriya.echo.common.settings.SettingItem
import dev.brahmkshatriya.echo.common.settings.SettingList
import dev.brahmkshatriya.echo.common.settings.SettingMultipleChoice
import dev.brahmkshatriya.echo.common.settings.SettingOnClick
import dev.brahmkshatriya.echo.common.settings.SettingSlider
import dev.brahmkshatriya.echo.common.settings.SettingSwitch
import dev.brahmkshatriya.echo.common.settings.SettingTextInput
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.extensionPrefId
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.toSettings
import dev.brahmkshatriya.echo.playback.PlayerService.Companion.STREAM_QUALITY
import dev.brahmkshatriya.echo.playback.PlayerService.Companion.streamQualities
import dev.brahmkshatriya.echo.ui.settings.BaseSettingsFragment
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.PermsUtils.registerActivityResultLauncher
import dev.brahmkshatriya.echo.utils.Serializer.getSerialized
import dev.brahmkshatriya.echo.utils.Serializer.putSerialized
import dev.brahmkshatriya.echo.utils.exportExtensionSettings
import dev.brahmkshatriya.echo.utils.importExtensionSettings
import dev.brahmkshatriya.echo.utils.ui.prefs.LoadingPreference
import dev.brahmkshatriya.echo.utils.ui.prefs.MaterialListPreference
import dev.brahmkshatriya.echo.utils.ui.prefs.MaterialMultipleChoicePreference
import dev.brahmkshatriya.echo.utils.ui.prefs.MaterialSliderPreference
import dev.brahmkshatriya.echo.utils.ui.prefs.MaterialTextInputPreference
import dev.brahmkshatriya.echo.utils.ui.prefs.TransitionPreference
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import org.koin.androidx.viewmodel.ext.android.viewModel
import org.koin.core.parameter.parametersOf

class ExtensionInfoFragment : BaseSettingsFragment() {
    private val args by lazy { requireArguments() }
    private val name by lazy { args.getString("name")!! }
    private val extensionId by lazy { args.getString("id")!! }
    private val extensionType by lazy { args.getString("type")!! }
    private val extIcon by lazy { args.getSerialized<ImageHolder?>("icon")?.getOrThrow() }

    private val viewModel by viewModel<ExtensionInfoViewModel> {
        parametersOf(ExtensionType.valueOf(extensionType), extensionId)
    }
    private val extensionsViewModel by activityViewModel<ExtensionsViewModel>()

    override val title get() = name
    override val icon get() = extIcon
    override val creator = { ExtensionPreference().apply { arguments = args } }

    companion object {
        fun getBundle(
            name: String, id: String, type: ExtensionType, icon: ImageHolder?,
        ) = Bundle().apply {
            putString("name", name)
            putString("id", id)
            putString("type", type.name)
            putSerialized("icon", icon)
        }

        fun getBundle(extension: Extension<*>) =
            getBundle(extension.name, extension.id, extension.type, extension.metadata.icon)

        fun Activity.openLink(url: String) {
            val intent = Intent(Intent.ACTION_VIEW).apply { data = url.toUri() }
            runCatching { startActivity(intent) }
        }
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        observe(viewModel.stateFlow) { state ->
            val extension = state?.extension ?: return@observe
            val metadata = extension.metadata
            binding.toolBar.setOnMenuItemClickListener { menuItem ->
                when (menuItem.itemId) {
                    R.id.menu_uninstall -> {
                        parentFragmentManager.popBackStack()
                        extensionsViewModel.uninstall(requireActivity(), extension)
                        true
                    }

                    R.id.menu_repo -> {
                        requireActivity().openLink(metadata.repoUrl!!)
                        true
                    }

                    R.id.menu_update -> {
                        extensionsViewModel.update(extension)
                        true
                    }

                    else -> false
                }
            }
            if (metadata.importType != ImportType.BuiltIn) {
                binding.toolBar.menu.clear()
                binding.toolBar.inflateMenu(R.menu.extensions_menu)
                if (metadata.repoUrl == null) binding.toolBar.menu.removeItem(R.id.menu_repo)
            }
        }
    }

    class ExtensionPreference : PreferenceFragmentCompat() {
        private val extensionId by lazy { arguments?.getString("id")!! }
        private val extensionType by lazy { arguments?.getString("type")!! }
        private val viewModel by lazy {
            requireParentFragment().viewModel<ExtensionInfoViewModel> {
                parametersOf(ExtensionType.valueOf(extensionType), extensionId)
            }.value
        }

        override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
            super.onViewCreated(view, savedInstanceState)
            configure()
        }

        override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {
            val context = preferenceManager.context
            preferenceManager.sharedPreferencesName = extensionPrefId(extensionType, extensionId)
            preferenceManager.sharedPreferencesMode = Context.MODE_PRIVATE
            val prefs = preferenceManager.sharedPreferences ?: return
            val settings = toSettings(prefs)
            prefs.registerOnSharedPreferenceChangeListener { _, key ->
                viewModel.onSettingsChanged(settings, key)
            }
            preferenceManager.setOnPreferenceTreeClickListener {
                viewModel.onSettingsChanged(settings, it.key)
                true
            }
            observe(viewModel.stateFlow) { state ->
                val extension = state?.extension
                val screen = preferenceManager.createPreferenceScreen(context)
                preferenceScreen = screen
                if (extension == null) {
                    screen.addPreference(LoadingPreference(context))
                    return@observe
                }
                val infoPreference = ExtensionInfoPreference(
                    this@ExtensionPreference, extension, state.isLoginClient
                )
                screen.addPreference(infoPreference)
                if (extension.type == ExtensionType.MUSIC) MaterialListPreference(context).apply {
                    key = STREAM_QUALITY
                    title = getString(R.string.stream_quality)
                    summary = getString(R.string.x_specific_quality_summary, extension.name)
                    entries =
                        context.resources.getStringArray(R.array.stream_qualities) + getString(R.string.off)
                    entryValues = streamQualities + "off"
                    layoutResource = R.layout.preference
                    isIconSpaceReserved = false
                    setDefaultValue("off")
                    screen.addPreference(this)
                }
                state.settings.forEach { it.addPreferenceTo(screen) }

                TransitionPreference(context).apply {
                    key = "export"
                    title = getString(R.string.export_settings)
                    summary = getString(R.string.export_settings_summary)
                    layoutResource = R.layout.preference
                    isIconSpaceReserved = false
                    screen.addPreference(this)
                    setOnPreferenceClickListener {
                        val contract = ActivityResultContracts.CreateDocument("application/json")
                        requireActivity().registerActivityResultLauncher(contract) { uri ->
                            uri?.let {
                                context.exportExtensionSettings(extensionType, extensionId, it)
                            }
                        }.launch("echo-$extensionType-$extensionId-settings.json".lowercase())
                        true
                    }
                }

                TransitionPreference(context).apply {
                    key = "import"
                    title = getString(R.string.import_settings)
                    summary = getString(R.string.import_settings_summary)
                    layoutResource = R.layout.preference
                    isIconSpaceReserved = false
                    screen.addPreference(this)
                    setOnPreferenceClickListener {
                        val contract = ActivityResultContracts.OpenDocument()
                        requireActivity().registerActivityResultLauncher(contract) {
                            it?.let {
                                context.importExtensionSettings(extensionType, extensionId, it)
                                requireActivity().recreate()
                            }
                        }.launch(arrayOf("application/json"))
                        true
                    }
                }
            }
        }

        private fun Setting.addPreferenceTo(preferenceGroup: PreferenceGroup) {
            val context = preferenceGroup.context
            when (this) {
                is SettingCategory -> {
                    PreferenceCategory(context).also {
                        it.title = this.title
                        it.key = this.key

                        it.isIconSpaceReserved = false
                        it.layoutResource = R.layout.preference_category
                        preferenceGroup.addPreference(it)

                        this.items.forEach { item ->
                            item.addPreferenceTo(it)
                        }
                    }
                }

                is SettingItem -> {
                    Preference(context).also {
                        it.title = this.title
                        it.key = this.key
                        it.summary = this.summary

                        it.isIconSpaceReserved = false
                        it.layoutResource = R.layout.preference
                        preferenceGroup.addPreference(it)
                    }
                }

                is SettingSwitch -> {
                    SwitchPreferenceCompat(context).also {
                        it.title = this.title
                        it.key = this.key
                        it.summary = this.summary
                        it.setDefaultValue(this.defaultValue)

                        it.isIconSpaceReserved = false
                        it.layoutResource = R.layout.preference_switch
                        preferenceGroup.addPreference(it)
                    }
                }

                is SettingList -> {
                    MaterialListPreference(context).also {
                        it.title = this.title
                        it.key = this.key
                        it.summary = this.summary
                        defaultEntryIndex?.let { index ->
                            it.setDefaultValue(this.entryValues[index])
                        }
                        it.entries = this.entryTitles.toTypedArray()
                        it.entryValues = this.entryValues.toTypedArray()

                        it.isIconSpaceReserved = false
                        it.layoutResource = R.layout.preference
                        preferenceGroup.addPreference(it)
                    }
                }

                is SettingMultipleChoice -> {
                    MaterialMultipleChoicePreference(context).also {
                        it.title = this.title
                        it.key = this.key
                        it.summary = this.summary
                        defaultEntryIndices?.let { indices ->
                            it.setDefaultValue(indices.mapNotNull { index ->
                                entryValues.getOrNull(index)
                            }.toSet())
                        }
                        it.entries = this.entryTitles.toTypedArray()
                        it.entryValues = this.entryValues.toTypedArray()

                        it.isIconSpaceReserved = false
                        it.layoutResource = R.layout.preference
                        preferenceGroup.addPreference(it)
                    }
                }

                is SettingTextInput -> {
                    MaterialTextInputPreference(context).also {
                        it.title = this.title
                        it.key = this.key
                        it.summary = this.summary
                        it.text = this.defaultValue

                        it.isIconSpaceReserved = false
                        it.layoutResource = R.layout.preference
                        preferenceGroup.addPreference(it)
                    }
                }

                is SettingSlider -> {
                    MaterialSliderPreference(context, from, to, steps, allowOverride).also {
                        it.title = this.title
                        it.key = this.key
                        it.summary = this.summary
                        it.setDefaultValue(this.defaultValue)

                        it.isIconSpaceReserved = false
                        preferenceGroup.addPreference(it)
                    }
                }

                is SettingOnClick -> {
                    TransitionPreference(context).also {
                        it.title = this.title
                        it.key = this.key
                        it.summary = this.summary
                        it.setOnPreferenceClickListener {
                            viewModel.onSettingsClick(onClick)
                            true
                        }
                        it.isIconSpaceReserved = false
                        it.layoutResource = R.layout.preference
                        preferenceGroup.addPreference(it)
                    }
                }
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\ExtensionInfoPreference.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions

import android.annotation.SuppressLint
import android.text.SpannableString
import android.text.Spanned
import android.text.method.LinkMovementMethod
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.preference.Preference
import androidx.preference.PreferenceViewHolder
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.databinding.ItemLoginUserBinding
import dev.brahmkshatriya.echo.databinding.PreferenceExtensionInfoBinding
import dev.brahmkshatriya.echo.extensions.db.models.CurrentUser
import dev.brahmkshatriya.echo.extensions.db.models.UserEntity.Companion.toEntity
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.extensions.ExtensionInfoFragment.Companion.openLink
import dev.brahmkshatriya.echo.ui.extensions.login.LoginFragment
import dev.brahmkshatriya.echo.ui.extensions.login.LoginUserListBottomSheet
import dev.brahmkshatriya.echo.ui.extensions.login.LoginUserListViewModel
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadInto
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.addOnDestroyObserver
import dev.brahmkshatriya.echo.utils.ui.SimpleItemSpan
import org.koin.androidx.viewmodel.ext.android.activityViewModel

class ExtensionInfoPreference(
    private val fragment: Fragment,
    private val extension: Extension<*>,
    private val isLoginClient: Boolean,
) : Preference(fragment.requireContext()) {

    private val viewModel by fragment.activityViewModel<ExtensionsViewModel>()
    private val loginViewModel by fragment.activityViewModel<LoginUserListViewModel>()

    init {
        layoutResource = R.layout.preference_extension_info
        if (isLoginClient) {
            loginViewModel.currentExtension.value = extension
            fragment.addOnDestroyObserver {
                loginViewModel.currentExtension.value = viewModel.extensionLoader.current.value
            }
        }
    }

    @SuppressLint("SetTextI18n")
    override fun onBindViewHolder(holder: PreferenceViewHolder) {
        val binding = PreferenceExtensionInfoBinding.bind(holder.itemView)
        val metadata = extension.metadata
        binding.extensionDetails.text =
            "${metadata.version} • ${metadata.importType.name}"

        val byAuthor = fragment.getString(R.string.by_x, metadata.author)
        val type = getType(extension.type)
        val typeString = fragment.getString(R.string.x_extension, fragment.getString(type))
        val span = SpannableString("$typeString\n\n${metadata.description}\n\n$byAuthor")
        val authUrl = metadata.authorUrl
        if (authUrl != null) {
            val itemSpan = SimpleItemSpan(context) {
                fragment.requireActivity().openLink(authUrl)
            }
            val start = span.length - metadata.author.length
            span.setSpan(itemSpan, start, span.length, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)
        }
        binding.extensionDescription.text = span
        binding.extensionDescription.movementMethod = LinkMovementMethod.getInstance()

        fun updateText(enabled: Boolean) {
            binding.extensionEnabledText.text = fragment.getString(
                if (enabled) R.string.enabled else R.string.disabled
            )
        }
        binding.extensionEnabledSwitch.apply {
            updateText(metadata.isEnabled)
            isChecked = metadata.isEnabled
            setOnCheckedChangeListener { _, isChecked ->
                updateText(isChecked)
                viewModel.setExtensionEnabled(extension.type, metadata.id, isChecked)
            }
            binding.extensionEnabled.setOnClickListener { toggle() }
        }
        if (isLoginClient) binding.extensionLoginUser.bind(fragment)
        else binding.extensionLoginUser.root.isVisible = false
    }

    companion object {
        fun getType(type: ExtensionType) = when (type) {
            ExtensionType.MUSIC -> R.string.music
            ExtensionType.TRACKER -> R.string.tracker
            ExtensionType.LYRICS -> R.string.lyrics
            ExtensionType.MISC -> R.string.misc
        }

        private fun ItemLoginUserBinding.bind(fragment: Fragment) = with(fragment) {
            val viewModel by activityViewModel<LoginUserListViewModel>()
            val binding = this@bind

            binding.switchAccount.setOnClickListener {
                LoginUserListBottomSheet().show(parentFragmentManager, null)
            }
            observe(viewModel.currentUser) { user ->
                binding.login.isVisible = user == null
                binding.notLoggedInContainer.isVisible = user == null

                binding.logout.isVisible = user != null
                binding.userContainer.isVisible = user != null

                val ext = viewModel.currentExtension.value
                binding.login.setOnClickListener {
                    ext ?: return@setOnClickListener
                    requireActivity().openFragment<LoginFragment>(
                        null,
                        LoginFragment.getBundle(ext.id, ext.name, ext.type)
                    )
                }

                binding.logout.setOnClickListener {
                    ext ?: return@setOnClickListener
                    viewModel.logout(user?.toEntity(ext.type, ext.id))
                    viewModel.setLoginUser(CurrentUser(ext.type, ext.id, null))
                }

                binding.incognito.setOnClickListener {
                    ext ?: return@setOnClickListener
                    viewModel.setLoginUser(CurrentUser(ext.type, ext.id, null))
                }

                binding.currentUserName.text = user?.name
                binding.currentUserSubTitle.text = user?.subtitle ?: ext?.name
                user?.cover.loadInto(binding.currentUserAvatar, R.drawable.ic_account_circle)
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\ExtensionInfoViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.clients.LoginClient
import dev.brahmkshatriya.echo.common.clients.SettingsChangeListenerClient
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.providers.SettingsProvider
import dev.brahmkshatriya.echo.common.settings.Setting
import dev.brahmkshatriya.echo.common.settings.Settings
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.get
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getIf
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getOrThrow
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.isClient
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.runIf
import kotlinx.coroutines.ExperimentalCoroutinesApi
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.SharingStarted.Companion.Eagerly
import kotlinx.coroutines.flow.combine
import kotlinx.coroutines.flow.stateIn
import kotlinx.coroutines.flow.transformLatest
import kotlinx.coroutines.launch

class ExtensionInfoViewModel(
    val app: App,
    val extensionLoader: ExtensionLoader,
    val type: ExtensionType,
    val id: String,
) : ViewModel() {

    private val reload = MutableSharedFlow<Unit>(1).also {
        viewModelScope.launch { it.emit(Unit) }
    }

    @OptIn(ExperimentalCoroutinesApi::class)
    val stateFlow = extensionLoader.getFlow(type).combine(reload) { a, _ -> a }
        .transformLatest { list ->
            emit(null)
            val ext = list.find { it.id == id } ?: return@transformLatest
            emit(
                State(
                    ext,
                    ext.isClient<LoginClient>(),
                    ext.isClient<SettingsChangeListenerClient>(),
                    ext.getIf<SettingsProvider, List<Setting>>(app.throwFlow) {
                        getSettingItems()
                    }.orEmpty()
                )
            )
        }.stateIn(viewModelScope, Eagerly, null)

    data class State(
        val extension: Extension<*>?,
        val isLoginClient: Boolean,
        val isPlaylistEditClient: Boolean,
        val settings: List<Setting>,
    )

    fun onSettingsChanged(settings: Settings, key: String?) = viewModelScope.launch {
        stateFlow.value?.extension?.runIf<SettingsChangeListenerClient>(app.throwFlow) {
            onSettingsChanged(settings, key)
        }
    }

    fun onSettingsClick(onClick: suspend () -> Unit) = viewModelScope.launch {
        stateFlow.value?.extension?.get { onClick() }?.getOrThrow(app.throwFlow)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\ExtensionInstallerBottomSheet.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions

import android.annotation.SuppressLint
import android.content.Context
import android.content.DialogInterface
import android.content.Intent
import android.os.Bundle
import android.provider.Settings
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.appcompat.app.AlertDialog
import androidx.core.net.toUri
import androidx.core.view.isVisible
import androidx.lifecycle.lifecycleScope
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import com.google.android.material.dialog.MaterialAlertDialogBuilder
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.ImportType
import dev.brahmkshatriya.echo.databinding.DialogExtensionInstallerBinding
import dev.brahmkshatriya.echo.extensions.exceptions.ExtensionLoaderException
import dev.brahmkshatriya.echo.extensions.repo.ExtensionParser.Companion.PACKAGE_FLAGS
import dev.brahmkshatriya.echo.ui.extensions.ExtensionInfoPreference.Companion.getType
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadAsCircle
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import kotlinx.coroutines.launch
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import java.io.File

class ExtensionInstallerBottomSheet : BottomSheetDialogFragment() {

    companion object {
        fun newInstance(
            file: File,
        ) = ExtensionInstallerBottomSheet().apply {
            arguments = Bundle().apply {
                putString("file", file.absolutePath)
            }
        }

        fun Context.createLinksDialog(
            file: File, links: List<String>
        ): AlertDialog = MaterialAlertDialogBuilder(this)
            .setTitle(getString(R.string.allow_opening_links))
            .setMessage(
                links.joinToString("\n") + "\n" + getString(R.string.open_links_instruction)
            )
            .setPositiveButton(getString(R.string.okay)) { dialog, _ ->
                val intent = Intent(Settings.ACTION_APPLICATION_DETAILS_SETTINGS)
                val packageName = packageManager
                    .getPackageArchiveInfo(file.absolutePath, PACKAGE_FLAGS)?.packageName
                intent.setData("package:$packageName".toUri())
                startActivity(intent)
                dialog.dismiss()
            }
            .setNegativeButton(getString(R.string.cancel)) { dialog, _ -> dialog.dismiss() }
            .show()
    }

    private var binding by autoCleared<DialogExtensionInstallerBinding>()
    private val viewModel by activityViewModel<ExtensionsViewModel>()

    private val args by lazy { requireArguments() }
    private val file by lazy { File(args.getString("file")!!) }
    private val supportedLinks by lazy {
        runCatching { ApkLinkParser.getSupportedLinks(file) }.getOrNull().orEmpty()
    }
    private val metadata by lazy {
        runCatching { viewModel.extensionLoader.parser.parseManifest(file, ImportType.File) }
    }

    override fun onCreateView(inflater: LayoutInflater, parent: ViewGroup?, state: Bundle?): View {
        binding = DialogExtensionInstallerBinding.inflate(inflater, parent, false)
        return binding.root
    }

    private var install = false
    private var installAsApk = false

    @SuppressLint("SetTextI18n")
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        binding.topAppBar.setNavigationOnClickListener { dismiss() }
        val metadata = metadata.getOrElse {
            lifecycleScope.launch {
                viewModel.app.throwFlow.emit(
                    ExtensionLoaderException("ExtensionInstaller", file.toString(), it)
                )
            }
            dismiss()
            return
        }

        binding.extensionTitle.text = metadata.name
        metadata.icon
            .loadAsCircle(binding.extensionIcon, R.drawable.ic_extension_32dp) {
                binding.extensionIcon.setImageDrawable(it)
            }
        binding.extensionDetails.text = metadata.version

        val byAuthor = getString(R.string.by_x, metadata.author)
        val type = getType(metadata.type)
        val typeString = getString(R.string.x_extension, getString(type))
        binding.extensionDescription.text = "$typeString\n\n${metadata.description}\n\n$byAuthor"

        val isSupported = supportedLinks.isNotEmpty()
        binding.installationTypeTitle.isVisible = isSupported
        binding.installationTypeGroup.isVisible = isSupported
        binding.installationTypeSummary.isVisible = isSupported
        binding.installationTypeLinks.isVisible = isSupported
        binding.installationTypeWarning.isVisible = false

        installAsApk = isSupported
        if (isSupported) {
            binding.installationTypeLinks.text = supportedLinks.joinToString("\n")
            binding.installationTypeGroup.addOnButtonCheckedListener { group, _, _ ->
                installAsApk = group.checkedButtonId == R.id.appInstall
                binding.installationTypeWarning.isVisible = !installAsApk
            }
        }

        binding.installButton.setOnClickListener {
            install = true
            dismiss()
        }
    }

    override fun onDismiss(dialog: DialogInterface) {
        super.onDismiss(dialog)
        val id = metadata.getOrNull()?.id
        val type = if (installAsApk) ImportType.App else ImportType.File
        viewModel.promptDismissed(file, install, type, id ?: "", supportedLinks)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\ExtensionOpenerActivity.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions

import android.app.Activity
import android.content.Intent
import android.net.Uri
import android.widget.Toast
import androidx.core.net.toFile
import dev.brahmkshatriya.echo.MainActivity.Companion.getMainActivity
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.extensions.InstallationUtils.getTempFile
import dev.brahmkshatriya.echo.utils.ContextUtils.getTempFile
import java.io.File

class ExtensionOpenerActivity : Activity() {
    override fun onStart() {
        super.onStart()
        val uri = intent.data

        val file = runCatching {
            when (uri?.scheme) {
                "content" -> getTempFile(uri)
                "file" -> getTempFile(uri.toFile())
                else -> null
            }
        }.getOrNull()

        if (file == null) Toast.makeText(
            this, getString(R.string.could_not_find_the_file), Toast.LENGTH_SHORT
        ).show()

        finish()
        val startIntent = Intent(this, getMainActivity())
        startIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
        startIntent.data = file?.let { Uri.fromFile(it) }
        startActivity(startIntent)
    }

    private fun getTempFile(file: File): File {
        val tempFile = getTempFile()
        file.copyTo(tempFile)
        return tempFile
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\ExtensionsViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions

import androidx.fragment.app.FragmentActivity
import androidx.lifecycle.DefaultLifecycleObserver
import androidx.lifecycle.LifecycleOwner
import androidx.lifecycle.viewModelScope
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.ImportType
import dev.brahmkshatriya.echo.common.models.Message
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtensionOrThrow
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getOrThrow
import dev.brahmkshatriya.echo.extensions.InstallationUtils.installApp
import dev.brahmkshatriya.echo.extensions.InstallationUtils.installFile
import dev.brahmkshatriya.echo.extensions.InstallationUtils.uninstallApp
import dev.brahmkshatriya.echo.extensions.InstallationUtils.uninstallFile
import dev.brahmkshatriya.echo.extensions.db.models.ExtensionEntity
import dev.brahmkshatriya.echo.extensions.exceptions.AppException.Companion.toAppException
import dev.brahmkshatriya.echo.ui.extensions.ExtensionInstallerBottomSheet.Companion.createLinksDialog
import dev.brahmkshatriya.echo.ui.extensions.list.ExtensionListViewModel
import dev.brahmkshatriya.echo.utils.AppUpdater.downloadUpdate
import dev.brahmkshatriya.echo.utils.AppUpdater.getUpdateFileUrl
import dev.brahmkshatriya.echo.utils.AppUpdater.updateApp
import dev.brahmkshatriya.echo.utils.CacheUtils.getFromCache
import dev.brahmkshatriya.echo.utils.CacheUtils.saveToCache
import dev.brahmkshatriya.echo.utils.ContextUtils.cleanupTempApks
import dev.brahmkshatriya.echo.utils.ContextUtils.collect
import kotlinx.coroutines.CancellationException
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.combine
import kotlinx.coroutines.flow.first
import kotlinx.coroutines.launch
import okhttp3.OkHttpClient
import org.koin.androidx.viewmodel.ext.android.viewModel
import java.io.File

class ExtensionsViewModel(
    val extensionLoader: ExtensionLoader,
    val app: App
) : ExtensionListViewModel<MusicExtension>() {
    override val extensionsFlow = extensionLoader.music
    override val currentSelectionFlow = extensionLoader.current
    override fun onExtensionSelected(extension: MusicExtension) {
        extensionLoader.setupMusicExtension(extension, true)
    }

    private val extensionDao = extensionLoader.db.extensionDao()
    fun setExtensionEnabled(extensionType: ExtensionType, id: String, checked: Boolean) {
        viewModelScope.launch(Dispatchers.IO) {
            extensionDao.setExtension(ExtensionEntity(id, extensionType, checked))
        }
    }

    fun changeExtension(id: String) {
        viewModelScope.launch {
            runCatching {
                val ext = extensionLoader.music.getExtensionOrThrow(id)
                extensionLoader.setupMusicExtension(ext, true)
            }.getOrElse {
                app.throwFlow.emit(it)
            }
        }
    }

    val lastSelectedManageExt = MutableStateFlow(0)
    val manageExtListFlow = extensionLoader.all.combine(lastSelectedManageExt) { _, last ->
        extensionLoader.getFlow(ExtensionType.entries[last]).value
    }

    fun moveExtensionItem(toPos: Int, fromPos: Int) {
        val type = ExtensionType.entries[lastSelectedManageExt.value]
        val flow = extensionLoader.priorityMap[type]!!
        val list = extensionLoader.getFlow(type).value.map { it.id }.toMutableList()
        list.add(toPos, list.removeAt(fromPos))
        flow.value = list
    }

    private val updateTime = 1000 * 60 * 60 * 2 // Check every 2hrs
    private fun shouldCheckForExtensionUpdates(): Boolean {
        val check = app.settings.getBoolean("check_for_updates", true)
        if (!check) return false
        val lastUpdateCheck = app.context.getFromCache<Long>("last_update_check") ?: 0
        return System.currentTimeMillis() - lastUpdateCheck > updateTime
    }

    private suspend fun message(msg: String) {
        app.messageFlow.emit(Message(msg))
    }

    fun update(activity: FragmentActivity, force: Boolean) = viewModelScope.launch {
        if (!force && !shouldCheckForExtensionUpdates()) return@launch
        activity.saveToCache("last_update_check", System.currentTimeMillis())
        activity.cleanupTempApks()
        message(app.context.getString(R.string.checking_for_updates))
        val appApk = updateApp(app)
        runCatching {
            if (appApk != null) {
                activity.saveToCache("last_update_check", 0)
                awaitInstallation(appApk).getOrThrow()
            } else extensionLoader.all.value.forEach { updateExt(it) }
        }.getOrElse { app.throwFlow.emit(it) }
    }

    data class PromptResult(
        val file: File,
        val accepted: Boolean,
        val type: ImportType,
        val id: String,
        val supportedLinks: List<String>
    )

    val installPromptFlow = MutableSharedFlow<File>()
    private val promptResultFlow = MutableSharedFlow<PromptResult>()
    val installFileFlow = MutableSharedFlow<File>()
    val installedFlow = MutableSharedFlow<Pair<File, Result<Unit>>>()
    val linksDialogFlow = MutableSharedFlow<Pair<File, List<String>>>()

    private suspend fun install(id: String, type: ImportType, file: File): Result<Unit> {
        return if (type == ImportType.App) awaitInstallation(file)
        else runCatching { installFile(app.context, extensionLoader.fileIgnoreFlow, id, file) }
    }

    private suspend fun awaitInstallation(file: File): Result<Unit> {
        installFileFlow.emit(file)
        return installedFlow.first { it.first == file }.second
    }

    fun promptDismissed(
        file: File, install: Boolean, type: ImportType, id: String, supportedLinks: List<String>
    ) = viewModelScope.launch {
        promptResultFlow.emit(PromptResult(file, install, type, id, supportedLinks))
    }

    private suspend fun updateExt(ext: Extension<*>, show: Boolean = false) {
        val file = getExtensionUpdate(ext, show) ?: return
        install(ext.id, ext.metadata.importType, file).onFailure {
            app.throwFlow.emit(it)
            return
        }
        message(app.context.getString(R.string.extension_updated_successfully, ext.name))
    }

    fun update(extension: Extension<*>) = viewModelScope.launch { updateExt(extension, true) }

    fun installWithPrompt(files: List<File>) = viewModelScope.launch {
        files.forEach { file ->
            installPromptFlow.emit(file)
            val result = promptResultFlow.first { it.file == file }
            if (!result.accepted) return@forEach
            install(result.id, result.type, result.file).onFailure {
                app.throwFlow.emit(it)
                return@forEach
            }
            message(app.context.getString(R.string.extension_installed_successfully))
            if (result.type == ImportType.App)
                linksDialogFlow.emit(file to result.supportedLinks)
        }
    }

    fun uninstall(activity: FragmentActivity, extension: Extension<*>) = viewModelScope.launch {
        val fileResult = runCatching {
            uninstallFile(extensionLoader.fileIgnoreFlow, extension.metadata.path)
        }.exceptionOrNull()
        val appResult = runCatching {
            uninstallApp(activity, extension.metadata.path)
        }.exceptionOrNull()
        val result = if (extension.metadata.importType == ImportType.App) appResult else fileResult
        if (result == null) message(app.context.getString(R.string.extension_uninstalled_successfully))
        else app.throwFlow.emit(result)
    }

    companion object {
        fun FragmentActivity.configureExtensionsUpdater() {
            val viewModel by viewModel<ExtensionsViewModel>()
            collect(viewModel.installPromptFlow) {
                ExtensionInstallerBottomSheet.newInstance(it).show(supportFragmentManager, null)
            }
            collect(viewModel.linksDialogFlow) {
                createLinksDialog(it.first, it.second)
            }

            viewModel.update(this, false)
            var currentFile: File? = null
            collect(viewModel.installFileFlow) {
                currentFile = it
                viewModel.installedFlow.emit(it to runCatching { installApp(this, it) })
            }
            lifecycle.addObserver(object : DefaultLifecycleObserver {
                override fun onDestroy(owner: LifecycleOwner) {
                    val file = currentFile ?: return
                    viewModel.run {
                        viewModelScope.launch {
                            installedFlow.emit(
                                file to Result.failure(CancellationException())
                            )
                        }
                    }
                }
            })
        }
    }

    private val client = OkHttpClient()
    private suspend fun getExtensionUpdate(
        extension: Extension<*>,
        show: Boolean = false
    ): File? {
        val currentVersion = extension.version
        val updateUrl = extension.metadata.updateUrl ?: return null
        val url = runCatching {
            getUpdateFileUrl(currentVersion, updateUrl, client).getOrThrow()
        }.recoverCatching {
            throw it.toAppException(extension)
        }.getOrThrow(app.throwFlow)
        if (url == null) {
            if (show) message(
                app.context.getString(R.string.no_update_available_for_x, extension.name)
            )
            return null
        }
        message(app.context.getString(R.string.downloading_update_for_x, extension.name))
        val file = runCatching {
            downloadUpdate(app.context, url, client).getOrThrow()
        }.recoverCatching {
            throw it.toAppException(extension)
        }.getOrThrow(app.throwFlow) ?: return null
        return file
    }

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\WebViewUtils.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions

import android.annotation.SuppressLint
import android.content.Intent
import android.graphics.Bitmap
import android.os.Build
import android.os.Bundle
import android.view.View
import android.webkit.CookieManager
import android.webkit.JavascriptInterface
import android.webkit.WebResourceRequest
import android.webkit.WebResourceResponse
import android.webkit.WebSettings
import android.webkit.WebStorage
import android.webkit.WebView
import androidx.activity.OnBackPressedCallback
import androidx.fragment.app.Fragment
import androidx.fragment.app.FragmentActivity
import androidx.fragment.app.add
import androidx.fragment.app.commit
import androidx.lifecycle.lifecycleScope
import com.acsbendi.requestinspectorwebview.RequestInspectorWebViewClient
import com.google.android.material.progressindicator.LinearProgressIndicator
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.helpers.WebViewRequest
import dev.brahmkshatriya.echo.common.models.Message
import dev.brahmkshatriya.echo.common.models.NetworkRequest
import dev.brahmkshatriya.echo.databinding.FragmentGenericCollapsableBinding
import dev.brahmkshatriya.echo.databinding.FragmentWebviewBinding
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.addIfNull
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.common.SnackBarHandler.Companion.createSnack
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyBackPressCallback
import dev.brahmkshatriya.echo.ui.extensions.login.LoginFragment.Companion.bind
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadAsCircle
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.delay
import kotlinx.coroutines.launch
import kotlinx.coroutines.suspendCancellableCoroutine
import kotlinx.coroutines.sync.Mutex
import kotlinx.coroutines.sync.withLock
import kotlinx.coroutines.withContext
import org.koin.android.ext.android.inject
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import kotlin.coroutines.resume
import kotlin.coroutines.resumeWithException

object WebViewUtils {
    private const val USER_AGENT =
        "Mozilla/5.0 (Linux; Android 2; Jeff Bezos) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.158 Mobile Safari/537.36"

    @Suppress("DEPRECATION")
    @SuppressLint("SetJavaScriptEnabled")
    fun <T> FragmentActivity.configure(
        webView: WebView,
        progress: LinearProgressIndicator,
        target: WebViewRequest<T>,
        skipTimeout: Boolean,
        onComplete: suspend (Result<T>?) -> Unit,
    ): OnBackPressedCallback {
        val callback = object : OnBackPressedCallback(false) {
            override fun handleOnBackPressed() {
                webView.goBack()
            }
        }
        WebStorage.getInstance().deleteAllData()
        CookieManager.getInstance().run {
            removeAllCookies(null)
            flush()
        }
        webView.settings.apply {
            javaScriptEnabled = true
            domStorageEnabled = true
            databaseEnabled = true
            userAgentString = USER_AGENT
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU)
                isAlgorithmicDarkeningAllowed = true
        }
        runCatching {
            webView.load(lifecycleScope, progress, callback, target, skipTimeout, onComplete)
        }.getOrElse {
            lifecycleScope.launch {
                webView.stop(callback)
                onComplete(Result.failure(it))
            }
        }
        return callback
    }

    private fun <T> WebView.load(
        scope: CoroutineScope,
        progress: LinearProgressIndicator,
        callback: OnBackPressedCallback,
        target: WebViewRequest<T>,
        skipTimeout: Boolean,
        onComplete: suspend (Result<T>?) -> Unit,
    ) {
        val stopRegex = target.stopUrlRegex
        val interceptRegex =
            if (target is WebViewRequest.Headers) target.interceptUrlRegex else null
        val timeout = target.maxTimeout
        val bridge = Bridge()
        val requests = mutableListOf<NetworkRequest>()
        val timeoutJob = if (!skipTimeout) scope.launch {
            delay(timeout)
            onComplete(
                Result.failure(
                    Exception(
                        "WebView request timed out after $timeout ms\nParsed Links:\n" +
                                requests.joinToString("\n") { it.url }
                    )
                )
            )
        } else null
        webViewClient = object : RequestInspectorWebViewClient(this@load) {
            override fun doUpdateVisitedHistory(view: WebView?, url: String?, isReload: Boolean) {
                callback.isEnabled = canGoBack()
            }

            var done = false
            override fun onPageStarted(view: WebView, url: String, favicon: Bitmap?) {
                super.onPageStarted(view, url, favicon)
                progress.show()
                if (done) return
                if (target !is WebViewRequest.Evaluate) return
                target.javascriptToEvaluateOnPageStart?.let { js ->
                    scope.launch {
                        runCatching { evalJS(null, js) }.onFailure {
                            stop(callback)
                            onComplete(Result.failure(it))
                        }
                    }
                }
            }

            override fun onPageFinished(view: WebView?, url: String?) {
                progress.hide()
            }

            val mutex = Mutex()
            fun intercept(request: NetworkRequest) {
                if (target is WebViewRequest.Headers) {
                    if (interceptRegex == null || interceptRegex.matches(request.url)) {
                        requests.add(request)
                    }
                }
                if (stopRegex.find(request.url) == null) return
                timeoutJob?.cancel()
                scope.launch(Dispatchers.IO) {
                    mutex.withLock {
                        if (done) return@withLock
                        done = true
                        onComplete(null)
                        val result = runCatching {
                            val headerRes = if (target is WebViewRequest.Headers)
                                target.onStop(requests)
                            else null
                            val cookieRes = if (target is WebViewRequest.Cookie) {
                                val cookie =
                                    CookieManager.getInstance().getCookie(request.url) ?: ""
                                target.onStop(request, cookie)
                            } else null
                            val evalRes = if (target is WebViewRequest.Evaluate)
                                target.onStop(
                                    request,
                                    evalJS(bridge, target.javascriptToEvaluate)
                                )
                            else null
                            evalRes ?: cookieRes ?: headerRes!!
                        }
                        stop(callback)
                        onComplete(result)
                    }
                }
            }

            override fun shouldInterceptRequest(
                view: WebView, webViewRequest: com.acsbendi.requestinspectorwebview.WebViewRequest,
            ): WebResourceResponse? {
                intercept(
                    webViewRequest.run {
                        NetworkRequest(
                            NetworkRequest.Method.valueOf(method),
                            url,
                            headers,
                            body.encodeToByteArray()
                        )
                    }
                )
                return null
            }

            override fun shouldOverrideUrlLoading(
                view: WebView?, request: WebResourceRequest?,
            ): Boolean {
                request?.run {
                    val headers = requestHeaders?.toMutableMap() ?: mutableMapOf()
                    val cookie = CookieManager.getInstance().getCookie(url.toString())
                    if (cookie != null) headers["Cookie"] = cookie
                    intercept(NetworkRequest(url.toString(), headers))
                }
                return false
            }
        }

        addJavascriptInterface(bridge, "bridge")
        settings.cacheMode =
            if (runCatching { target.dontCache }.getOrNull() == true) WebSettings.LOAD_NO_CACHE
            else WebSettings.LOAD_DEFAULT
        target.initialUrl.run {
            settings.userAgentString = lowerCaseHeaders["user-agent"] ?: settings.userAgentString
            loadUrl(url, headers)
        }
    }

    suspend fun WebView.evalJS(bridge: Bridge?, js: String) = withContext(Dispatchers.Main) {
        suspendCancellableCoroutine {
            bridge?.onResult = it::resume
            bridge?.onError = it::resumeWithException
            val asyncFunction = if (js.startsWith("async function")) js
            else if (js.startsWith("function")) "async $js"
            else {
                it.resumeWithException(Exception("Invalid JS function, must start with async or function"))
                return@suspendCancellableCoroutine
            }
            val newJs = """
            (function() {
                try {
                    const fun = $asyncFunction;
                    fun().then((result) => {
                        bridge.putJsResult(result);
                    }).catch((error) => {
                        bridge.putJsError(error.message || error.toString());
                    });
                } catch (error) {
                    bridge.putJsError(error.message || error.toString());
                }
            })()
            """.trimIndent()
            evaluateJavascript(newJs, null)

            it.invokeOnCancellation {
                evaluateJavascript("javascript:window.stop();", null)
            }
        }
    }

    suspend fun WebView.stop(
        callback: OnBackPressedCallback,
    ) = withContext(Dispatchers.Main) {
        loadUrl("about:blank")
        callback.isEnabled = false
    }

    @Suppress("unused")
    class Bridge {
        var onError: ((Throwable) -> Unit)? = null
        var onResult: ((String?) -> Unit)? = null

        @JavascriptInterface
        fun putJsResult(result: String?) {
            onResult?.invoke(result)
        }

        @JavascriptInterface
        fun putJsError(error: String?) {
            onError?.invoke(Exception(error ?: "Unknown JavaScript error"))
        }
    }

    fun FragmentActivity.onWebViewIntent(
        intent: Intent,
    ) {
        val id = intent.getIntExtra("webViewRequest", -1)
        if (id == -1) return
        val extensionLoader by inject<ExtensionLoader>()
        val webViewClient = extensionLoader.webViewClientFactory
        val wrapper = webViewClient.requests[id] ?: return
        createSnack(Message(getString(R.string.opening_webview_x, wrapper.reason)))
        if (wrapper.showWebView) openFragment<WithAppbar>(null, getBundle(id))
        else supportFragmentManager.commit {
            add<Hidden>(R.id.hiddenWebViewContainer, null, getBundle(id))
        }
    }

    private fun getBundle(id: Int) = Bundle().apply {
        putInt("webViewRequest", id)
    }

    class Hidden : Fragment(R.layout.fragment_webview) {
        private val vm by activityViewModel<ExtensionsViewModel>()
        private val webViewClient by lazy { vm.extensionLoader.webViewClientFactory }
        private val wrapper by lazy {
            val id = requireArguments().getInt("webViewRequest")
            webViewClient.requests[id]
        }
        private val shouldRemove by lazy {
            requireArguments().getBoolean("hidden", true)
        }

        private fun removeSelf() {
            if (shouldRemove) parentFragmentManager.commit(true) { remove(this@Hidden) }
            else parentFragment?.parentFragmentManager?.popBackStack()
        }

        override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
            val binding = FragmentWebviewBinding.bind(view)
            val wrapper = wrapper ?: run {
                removeSelf()
                return
            }
            val callback = requireActivity().configure(
                binding.webview,
                binding.progress,
                wrapper.request,
                false
            ) {
                webViewClient.responseFlow.emit(wrapper to it)
                if (it == null) runCatching { removeSelf() }
            }
            if (!shouldRemove) {
                requireActivity().onBackPressedDispatcher.addCallback(viewLifecycleOwner, callback)
                applyBackPressCallback()
            }
        }
    }

    class WithAppbar : Fragment(R.layout.fragment_generic_collapsable) {
        private val vm by activityViewModel<ExtensionsViewModel>()
        private val webViewClient by lazy { vm.extensionLoader.webViewClientFactory }
        private val wrapper by lazy {
            val id = requireArguments().getInt("webViewRequest")
            webViewClient.requests[id] ?: throw IllegalStateException("Invalid webview request")
        }

        override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
            val binding = FragmentGenericCollapsableBinding.bind(view)
            binding.bind(this)
            binding.toolBar.title = wrapper.extension.name
            wrapper.extension.icon.loadAsCircle(
                binding.extensionIcon, R.drawable.ic_extension_32dp
            ) {
                binding.extensionIcon.setImageDrawable(it)
            }
            addIfNull<Hidden>(R.id.genericFragmentContainer, "webview", arguments?.apply {
                putBoolean("hidden", false)
            })
        }
    }
}



================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\add\AddViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions.add

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import dev.brahmkshatriya.echo.common.helpers.ContinuationCallback.Companion.await
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.exceptions.InvalidExtensionListException
import dev.brahmkshatriya.echo.ui.extensions.ExtensionsViewModel
import dev.brahmkshatriya.echo.utils.AppUpdater.downloadUpdate
import dev.brahmkshatriya.echo.utils.AppUpdater.getUpdateFileUrl
import dev.brahmkshatriya.echo.utils.Serializer.toData
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.launch
import kotlinx.coroutines.withContext
import kotlinx.serialization.Serializable
import okhttp3.OkHttpClient
import okhttp3.Request
import java.io.File

class AddViewModel(
    private val app: App,
    private val extensionLoader: ExtensionLoader
) : ViewModel() {

    fun getList() = (addingFlow.value as? AddState.AddList)?.list.orEmpty()

    fun selectAll(select: Boolean) {
        val list = getList()
        addingFlow.value = AddState.AddList(list.map { it.copy(isChecked = select) })
    }

    fun toggleItem(item: ExtensionAssetResponse, isChecked: Boolean) {
        val list = getList()
        val index = list.indexOfFirst { it.item.id == item.id }
        if (index == -1) return
        val currentItem = list[index]
        addingFlow.value = AddState.AddList(list.toMutableList().apply {
            set(index, currentItem.copy(isChecked = isChecked))
        })
    }

    private val client = OkHttpClient()
    private suspend fun getExtensionList(
        link: String,
        client: OkHttpClient
    ) = withContext(Dispatchers.IO) {
        runCatching {
            val request = Request.Builder()
                .addHeader("Cookie", "preview=1")
                .url(link).build()
            client.newCall(request).await().body.string()
                .toData<List<ExtensionAssetResponse>>().getOrThrow()
        }
    }.getOrElse {
        throw InvalidExtensionListException(link, it)
    }

    @Serializable
    data class ExtensionAssetResponse(
        val id: String,
        val name: String,
        val subtitle: String? = null,
        val iconUrl: String? = null,
        val updateUrl: String
    )

    sealed class AddState {
        data object Init : AddState()
        data object Loading : AddState()
        data class AddList(val list: List<ExtensionsAddListAdapter.Item>?) : AddState()
        data class Downloading(val item: ExtensionAssetResponse) : AddState()
        data class Final(val files: List<File>) : AddState()
    }

    var opened = false
    val addingFlow = MutableStateFlow<AddState>(AddState.Init)
    fun addFromLinkOrCode(link: String) = viewModelScope.launch {
        addingFlow.value = AddState.Loading
        val actualLink = when {
            link.startsWith("http://") or link.startsWith("https://") -> link
            else -> "https://v.gd/$link"
        }

        val list = runCatching { getExtensionList(actualLink, client) }.getOrElse {
            app.throwFlow.emit(it)
            null
        }
        val installed = extensionLoader.all.value.map { it.id }
        val shouldBeChecked = (list?.size ?: 0) <= 3
        addingFlow.value = AddState.AddList(list?.map {
            val isInstalled = it.id in installed
            ExtensionsAddListAdapter.Item(
                it,
                isChecked = shouldBeChecked && !isInstalled,
                isInstalled = isInstalled
            )
        })
    }

    fun download(
        download: Boolean, extensionsViewModel: ExtensionsViewModel
    ) = viewModelScope.launch {
        val selected =
            if (download) getList().filter { it.isChecked }.map { it.item } else listOf()
        val files = selected.mapNotNull { item ->
            addingFlow.value = AddState.Downloading(item)
            val url = getUpdateFileUrl("", item.updateUrl, client).getOrElse {
                app.throwFlow.emit(it)
                null
            } ?: return@mapNotNull null
            downloadUpdate(app.context, url, client).getOrElse {
                app.throwFlow.emit(it)
                null
            }
        }
        extensionsViewModel.installWithPrompt(files)
        addingFlow.value = AddState.Final(files)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\add\ExtensionsAddBottomSheet.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions.add

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.view.isVisible
import androidx.lifecycle.lifecycleScope
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.databinding.DialogExtensionAddBinding
import dev.brahmkshatriya.echo.extensions.InstallationUtils.openFileSelector
import dev.brahmkshatriya.echo.ui.common.SnackBarHandler.Companion.createSnack
import dev.brahmkshatriya.echo.ui.extensions.ExtensionsViewModel
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import kotlinx.coroutines.launch
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import org.koin.androidx.viewmodel.ext.android.viewModel

class ExtensionsAddBottomSheet : BottomSheetDialogFragment() {

    var binding by autoCleared<DialogExtensionAddBinding>()
    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View {
        binding = DialogExtensionAddBinding.inflate(inflater)
        return binding.root
    }

    val viewModel by viewModel<AddViewModel>()
    private val extensionViewModel by activityViewModel<ExtensionsViewModel>()
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        val context = requireActivity()
        binding.topAppBar.setNavigationOnClickListener { dismiss() }
        binding.installationTypeGroup.addOnButtonCheckedListener { group, _, _ ->
            val isLink = group.checkedButtonId == R.id.linkAdd
            binding.textInputLayout.isVisible = isLink
        }

        binding.editText.setOnEditorActionListener { _, _, _ ->
            binding.installButton.performClick()
            true
        }

        binding.installButton.setOnClickListener {
            val isLink = binding.installationTypeGroup.checkedButtonId == R.id.linkAdd
            if (!isLink) lifecycleScope.launch {
                val file = runCatching { requireActivity().openFileSelector() }.getOrNull()
                extensionViewModel.installWithPrompt(listOfNotNull(file))
                dismissAllowingStateLoss()
            } else {
                val link = binding.editText.text.toString()
                if (link.isEmpty()) return@setOnClickListener
                viewModel.addFromLinkOrCode(link)
            }
        }

        observe(viewModel.addingFlow) {
            val loading = it != AddViewModel.AddState.Init
            binding.loading.root.isVisible = loading
            binding.nestedScrollView.isVisible = !loading
            when (it) {
                AddViewModel.AddState.Init -> {}
                AddViewModel.AddState.Loading -> {
                    binding.loading.textView.text = context.getString(R.string.loading)
                }

                is AddViewModel.AddState.AddList -> if (it.list != null) {
                    if (it.list.isEmpty()) {
                        createSnack(R.string.list_is_empty)
                        dismiss()
                    } else {
                        if (viewModel.opened) return@observe
                        viewModel.opened = true
                        ExtensionsAddListBottomSheet().show(childFragmentManager, null)
                    }
                } else dismiss()

                is AddViewModel.AddState.Downloading -> {
                    binding.loading.textView.text = context.getString(
                        R.string.downloading_x, it.item.name
                    )
                }

                is AddViewModel.AddState.Final -> {
                    viewModel.opened = false
                    viewModel.addingFlow.value = AddViewModel.AddState.Init
                    dismiss()
                }
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\add\ExtensionsAddListAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions.add

import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.recyclerview.widget.DiffUtil
import androidx.recyclerview.widget.ListAdapter
import androidx.recyclerview.widget.RecyclerView
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.ImageHolder.Companion.toImageHolder
import dev.brahmkshatriya.echo.databinding.ItemExtensionAddBinding
import dev.brahmkshatriya.echo.databinding.ItemExtensionAddFooterBinding
import dev.brahmkshatriya.echo.databinding.ItemExtensionAddHeaderBinding
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadAsCircle
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class ExtensionsAddListAdapter(
    val listener: Listener
) : ListAdapter<ExtensionsAddListAdapter.Item, ExtensionsAddListAdapter.ViewHolder>(DiffCallback) {

    data class Item(
        val item: AddViewModel.ExtensionAssetResponse,
        val isChecked: Boolean,
        val isInstalled: Boolean
    )

    object DiffCallback : DiffUtil.ItemCallback<Item>() {
        override fun areItemsTheSame(oldItem: Item, newItem: Item) =
            oldItem.item.id == newItem.item.id

        override fun areContentsTheSame(oldItem: Item, newItem: Item) =
            oldItem == newItem
    }

    fun interface Listener {
        fun onChecked(item: AddViewModel.ExtensionAssetResponse, isChecked: Boolean)
    }

    inner class ViewHolder(
        val binding: ItemExtensionAddBinding
    ) : ScrollAnimViewHolder(binding.root) {
        init {
            binding.extensionSwitch.setOnCheckedChangeListener { _, checked ->
                val item = runCatching { getItem(bindingAdapterPosition) }.getOrNull()
                if (item == null) return@setOnCheckedChangeListener
                listener.onChecked(item.item, checked)
            }
            binding.root.setOnClickListener {
                binding.extensionSwitch.isChecked = !binding.extensionSwitch.isChecked
            }
            binding.extensionSwitch.isClickable = false
        }
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val inflater = LayoutInflater.from(parent.context)
        val binding = ItemExtensionAddBinding.inflate(inflater, parent, false)
        return ViewHolder(binding)
    }

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        val (item, isChecked, isInstalled) = getItem(position)
        val binding = holder.binding
        binding.extensionName.text = if (!isInstalled) item.name
        else binding.root.context.getString(R.string.extension_installed, item.name)
        binding.extensionSubtitle.text = item.subtitle ?: item.id
        binding.itemExtension.apply {
            item.iconUrl?.toImageHolder().loadAsCircle(this, R.drawable.ic_extension_32dp) {
                setImageDrawable(it)
            }
        }
        binding.extensionSwitch.isChecked = isChecked
    }

    class Header(
        val listener: Listener
    ) : RecyclerView.Adapter<Header.ViewHolder>() {

        interface Listener {
            fun onClose()
            fun onSelectAllChanged(select: Boolean)
        }

        class ViewHolder(val binding: ItemExtensionAddHeaderBinding) :
            ScrollAnimViewHolder(binding.root)

        override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
            val inflater = LayoutInflater.from(parent.context)
            val binding = ItemExtensionAddHeaderBinding.inflate(inflater, parent, false)
            binding.toolBar.setNavigationOnClickListener { listener.onClose() }
            binding.selectAll.setOnCheckedChangeListener { _, isChecked ->
                listener.onSelectAllChanged(isChecked)
            }
            return ViewHolder(binding)
        }

        override fun getItemCount() = 1

        override fun onBindViewHolder(holder: ViewHolder, position: Int) {}

    }

    class Footer(
        val listener: Listener
    ) : RecyclerView.Adapter<Footer.ViewHolder>() {

        fun interface Listener {
            fun onAdd()
        }

        class ViewHolder(val binding: ItemExtensionAddFooterBinding) :
            ScrollAnimViewHolder(binding.root)

        override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
            val inflater = LayoutInflater.from(parent.context)
            val binding = ItemExtensionAddFooterBinding.inflate(inflater, parent, false)
            return ViewHolder(binding)
        }

        override fun getItemCount() = 1

        override fun onBindViewHolder(holder: ViewHolder, position: Int) {
            holder.binding.root.setOnClickListener { listener.onAdd() }
        }

    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\add\ExtensionsAddListBottomSheet.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions.add

import android.content.DialogInterface
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.recyclerview.widget.ConcatAdapter
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import dev.brahmkshatriya.echo.databinding.DialogExtensionsAddListBinding
import dev.brahmkshatriya.echo.ui.extensions.ExtensionsViewModel
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import org.koin.androidx.viewmodel.ext.android.viewModel

class ExtensionsAddListBottomSheet : BottomSheetDialogFragment() {
    var binding by autoCleared<DialogExtensionsAddListBinding>()
    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
    ): View {
        binding = DialogExtensionsAddListBinding.inflate(inflater, container, false)
        return binding.root
    }

    private var clicked = false
    private val viewModel by lazy {
        requireParentFragment().viewModel<AddViewModel>().value
    }
    private val extensionsViewModel by activityViewModel<ExtensionsViewModel>()

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        val extensionListAdapter = ExtensionsAddListAdapter { item, isChecked ->
            viewModel.toggleItem(item, isChecked)
        }

        val headerAdapter = ExtensionsAddListAdapter.Header(
            object : ExtensionsAddListAdapter.Header.Listener {
                override fun onClose() = dismiss()
                override fun onSelectAllChanged(select: Boolean) {
                    viewModel.selectAll(select)
                }
            }
        )

        val footerAdapter = ExtensionsAddListAdapter.Footer {
            clicked = true
            dismiss()
        }
        binding.root.adapter = ConcatAdapter(headerAdapter, extensionListAdapter, footerAdapter)
        observe(viewModel.addingFlow) {
            val list = viewModel.getList()
            extensionListAdapter.submitList(list)
        }
    }

    override fun onDismiss(dialog: DialogInterface) {
        viewModel.download(clicked, extensionsViewModel)
        super.onDismiss(dialog)
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\list\ExtensionListViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions.list

import androidx.lifecycle.ViewModel
import dev.brahmkshatriya.echo.common.Extension
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow

abstract class ExtensionListViewModel<T : Extension<*>> : ViewModel() {
    abstract val extensionsFlow: StateFlow<List<T>>
    abstract val currentSelectionFlow: MutableStateFlow<T?>
    fun selectExtension(index: Int) {
        val extension = extensionsFlow.value.getOrNull(index) ?: return
        currentSelectionFlow.value = extension
        onExtensionSelected(extension)
    }

    open fun onExtensionSelected(extension: T) {}
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\list\ExtensionsListBottomSheet.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions.list

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import com.google.android.material.button.MaterialButtonToggleGroup
import com.google.android.material.button.MaterialButtonToggleGroup.OnButtonCheckedListener
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.databinding.DialogExtensionsListBinding
import dev.brahmkshatriya.echo.databinding.ItemExtensionButtonBinding
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.extensions.ExtensionInfoFragment
import dev.brahmkshatriya.echo.ui.extensions.ExtensionInfoPreference.Companion.getType
import dev.brahmkshatriya.echo.ui.extensions.ExtensionsViewModel
import dev.brahmkshatriya.echo.ui.extensions.add.ExtensionsAddBottomSheet
import dev.brahmkshatriya.echo.ui.extensions.manage.ManageExtensionsFragment
import dev.brahmkshatriya.echo.ui.player.more.lyrics.LyricsViewModel
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadAsCircle
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import org.koin.androidx.viewmodel.ext.android.activityViewModel

class ExtensionsListBottomSheet : BottomSheetDialogFragment() {

    companion object {
        fun newInstance(type: ExtensionType) = ExtensionsListBottomSheet().apply {
            arguments = Bundle().apply {
                putString("type", type.name)
            }
        }
    }

    private var binding by autoCleared<DialogExtensionsListBinding>()
    private val args by lazy { requireArguments() }
    private val type by lazy { ExtensionType.valueOf(args.getString("type")!!) }

    override fun onCreateView(inflater: LayoutInflater, parent: ViewGroup?, state: Bundle?): View {
        binding = DialogExtensionsListBinding.inflate(inflater, parent, false)
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        binding.topAppBar.setNavigationOnClickListener { dismiss() }
        binding.topAppBar.title = getString(R.string.x_extensions, getString(getType(type)))

        binding.addExtension.setOnClickListener {
            dismiss()
            ExtensionsAddBottomSheet().show(parentFragmentManager, null)
        }

        binding.manageExtension.setOnClickListener {
            dismiss()
            requireActivity().openFragment<ManageExtensionsFragment>()
        }

        val viewModel = when (type) {
            ExtensionType.MUSIC -> activityViewModel<ExtensionsViewModel>().value
            ExtensionType.LYRICS -> activityViewModel<LyricsViewModel>().value
            else -> throw IllegalStateException("Not supported")
        }

        binding.topAppBar.setOnMenuItemClickListener {
            val extension =
                viewModel.currentSelectionFlow.value ?: return@setOnMenuItemClickListener false
            requireActivity().openFragment<ExtensionInfoFragment>(
                null, ExtensionInfoFragment.getBundle(extension)
            )
            dismiss()
            true
        }

        val listener = object : OnButtonCheckedListener {
            var enabled = false
            override fun onButtonChecked(
                group: MaterialButtonToggleGroup?, checkedId: Int, isChecked: Boolean
            ) {
                if (isChecked && enabled) {
                    viewModel.selectExtension(checkedId)
                    dismiss()
                }
            }
        }
        binding.buttonToggleGroup.addOnButtonCheckedListener(listener)
        val extensionFlow = viewModel.extensionsFlow
        observe(extensionFlow) { list ->
            binding.buttonToggleGroup.removeAllViews()
            listener.enabled = false
            val selected = viewModel.currentSelectionFlow.value
            list.forEachIndexed { index, extension ->
                if (!extension.isEnabled) return@forEachIndexed
                val button = ItemExtensionButtonBinding.inflate(
                    layoutInflater,
                    binding.buttonToggleGroup,
                    false
                ).root
                button.text = extension.name
                binding.buttonToggleGroup.addView(button)
                button.isChecked = extension == selected
                extension.metadata.icon.loadAsCircle(button) {
                    if (it != null) {
                        button.icon = it
                        button.iconTint = null
                    } else button.setIconResource(R.drawable.ic_extension_32dp)
                }
                button.id = index
            }

            val checked = list.indexOf(selected).takeIf { it != -1 }
            if (checked != null) binding.buttonToggleGroup.check(checked)
            listener.enabled = true
        }
    }

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\login\LoginFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions.login

import android.os.Bundle
import android.text.InputType.TYPE_CLASS_NUMBER
import android.text.InputType.TYPE_CLASS_TEXT
import android.text.InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS
import android.text.InputType.TYPE_TEXT_VARIATION_PASSWORD
import android.text.InputType.TYPE_TEXT_VARIATION_URI
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.os.bundleOf
import androidx.core.view.isVisible
import androidx.core.widget.doAfterTextChanged
import androidx.fragment.app.Fragment
import androidx.fragment.app.commit
import androidx.fragment.app.replace
import androidx.lifecycle.lifecycleScope
import com.google.android.material.transition.MaterialSharedAxis
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.clients.LoginClient
import dev.brahmkshatriya.echo.common.clients.LoginClient.InputField.Type
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.Message
import dev.brahmkshatriya.echo.databinding.FragmentExtensionLoginCustomInputBinding
import dev.brahmkshatriya.echo.databinding.FragmentExtensionLoginSelectorBinding
import dev.brahmkshatriya.echo.databinding.FragmentGenericCollapsableBinding
import dev.brahmkshatriya.echo.databinding.FragmentWebviewBinding
import dev.brahmkshatriya.echo.databinding.ItemExtensionButtonBinding
import dev.brahmkshatriya.echo.databinding.ItemInputBinding
import dev.brahmkshatriya.echo.extensions.exceptions.AppException
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyBackPressCallback
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyContentInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsets
import dev.brahmkshatriya.echo.ui.extensions.WebViewUtils.configure
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadAsCircle
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.setupTransition
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import dev.brahmkshatriya.echo.utils.ui.UiUtils.configureAppBar
import kotlinx.coroutines.delay
import kotlinx.coroutines.launch
import org.koin.androidx.viewmodel.ext.android.viewModel
import org.koin.core.parameter.parametersOf

class LoginFragment : Fragment() {
    companion object {
        fun getBundle(extId: String, extName: String, extensionType: ExtensionType) = bundleOf(
            "extId" to extId,
            "extName" to extName,
            "extensionType" to extensionType.name,
        )

        fun getBundle(error: AppException.LoginRequired) =
            getBundle(error.extension.id, error.extension.name, error.extension.type)


        fun FragmentGenericCollapsableBinding.bind(
            fragment: Fragment, applyInsets: Boolean = true
        ) = with(fragment) {
            setupTransition(root)
            if (applyInsets) applyInsets {
                genericFragmentContainer.applyContentInsets(it)
            }
            applyBackPressCallback()
            appBarLayout.configureAppBar { offset ->
                toolbarOutline.alpha = offset
                iconContainer.alpha = 1 - offset
            }
            toolBar.setNavigationOnClickListener {
                parentFragmentManager.popBackStack()
            }
        }

        private fun getIcon(type: Type) = when (type) {
            Type.Email -> R.drawable.ic_email
            Type.Password -> R.drawable.ic_password
            Type.Number -> R.drawable.ic_numbers
            Type.Url -> R.drawable.ic_language
            Type.Username -> R.drawable.ic_account_circle
            Type.Misc -> R.drawable.ic_input
        }
    }

    private var binding by autoCleared<FragmentGenericCollapsableBinding>()
    private val clientType by lazy {
        val type = requireArguments().getString("extensionType")!!
        ExtensionType.valueOf(type)
    }
    private val extId by lazy { requireArguments().getString("extId")!! }
    private val extName by lazy { requireArguments().getString("extName")!! }
    private val loginViewModel by viewModel<LoginViewModel> {
        parametersOf(clientType, extId)
    }

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
    ): View {
        binding = FragmentGenericCollapsableBinding.inflate(inflater, container, false)
        return binding.root
    }

    private inline fun <reified T : Fragment> add(args: Bundle? = null) {
        if (!isAdded) return
        childFragmentManager.run {
            loginViewModel.loading.value = false
            commit {
                setReorderingAllowed(true)
                if (fragments.isNotEmpty()) addToBackStack(null)
                replace<T>(R.id.genericFragmentContainer, null, args)
            }
        }
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        binding.bind(this)
        binding.toolBar.setNavigationOnClickListener {
            parentFragmentManager.popBackStack()
        }
        binding.toolBar.title = getString(R.string.x_login, extName)

        observe(loginViewModel.extension) { ext ->
            ext?.metadata?.icon.loadAsCircle(binding.extensionIcon, R.drawable.ic_extension_32dp) {
                binding.extensionIcon.setImageDrawable(it)
                lifecycleScope.launch {
                    delay(2000)
                    binding.appBarLayout.setExpanded(false)
                }
            }
        }

        observe(loginViewModel.loading) {
            binding.genericFragmentContainer.isVisible = !it
            binding.loading.root.isVisible = it
        }

        observe(loginViewModel.loadingOver) {
            repeat(childFragmentManager.backStackEntryCount) {
                parentFragmentManager.popBackStack()
            }
            parentFragmentManager.popBackStack()
        }

        observe(loginViewModel.addFragmentFlow) {
            when (it) {
                LoginViewModel.FragmentType.Selector -> add<Selector>(arguments)
                LoginViewModel.FragmentType.WebView -> add<WebView>(arguments)
                is LoginViewModel.FragmentType.CustomInput -> add<CustomInput>(Bundle().apply {
                    putAll(arguments)
                    putInt("formIndex", it.index ?: 0)
                })
            }
        }
    }

    class Selector : Fragment(R.layout.fragment_extension_login_selector) {
        private val loginViewModel by lazy {
            requireParentFragment().viewModel<LoginViewModel>().value
        }

        override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
            setupTransition(view)
            val binding = FragmentExtensionLoginSelectorBinding.bind(view)
            val client = loginViewModel.extension.value?.instance?.value
            val clients = listOfNotNull(
                if (client is LoginClient.WebView) {
                    val button = ItemExtensionButtonBinding.inflate(
                        layoutInflater, binding.loginToggleGroup, false
                    ).root
                    button.text = getString(R.string.webview)
                    button.setIconResource(R.drawable.ic_language)
                    button to { loginViewModel.changeFragment(LoginViewModel.FragmentType.WebView) }
                } else null,
                *(if (client is LoginClient.CustomInput) {
                    val forms = runCatching { client.forms }.getOrNull().orEmpty()
                    forms.mapIndexed { index, it ->
                        val button = ItemExtensionButtonBinding.inflate(
                            layoutInflater, binding.loginToggleGroup, false
                        ).root
                        button.text = it.label
                        button.setIconResource(getIcon(it.icon))
                        button to {
                            loginViewModel.changeFragment(
                                LoginViewModel.FragmentType.CustomInput(index)
                            )
                        }
                    }
                } else listOf()).toTypedArray(),
            )
            clients.forEachIndexed { index, pair ->
                val button = pair.first
                button.setOnClickListener { pair.second() }
                binding.loginToggleGroup.addView(button)
                button.id = index
            }
        }
    }

    class WebView : Fragment(R.layout.fragment_webview) {
        private val loginViewModel by lazy {
            requireParentFragment().viewModel<LoginViewModel>().value
        }
        private val extension by lazy {
            loginViewModel.extension.value
        }
        private val webViewRequest by lazy {
            (extension?.instance?.value as? LoginClient.WebView)?.webViewRequest
        }

        override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
            setupTransition(view, axis = MaterialSharedAxis.X)
            val binding = FragmentWebviewBinding.bind(view)
            val req = webViewRequest ?: return
            val callback = requireActivity().configure(
                binding.webview, binding.progress, req, true
            ) {
                if (it == null) loginViewModel.loading.value = true
                else loginViewModel.onWebViewStop(it)
            }
            requireActivity().onBackPressedDispatcher.addCallback(viewLifecycleOwner, callback)
        }
    }

    class CustomInput : Fragment(R.layout.fragment_extension_login_custom_input) {
        private val loginViewModel by lazy {
            requireParentFragment().viewModel<LoginViewModel>().value
        }
        private val extension by lazy { loginViewModel.extension.value }
        private val formIndex by lazy { requireArguments().getInt("formIndex", 0) }
        private val form by lazy {
            (extension?.instance?.value as? LoginClient.CustomInput)?.forms?.getOrNull(formIndex)
        }

        override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
            setupTransition(view, axis = MaterialSharedAxis.X)
            val form = form ?: run {
                message(Message("No form found for extension ${extension?.id}"))
                parentFragmentManager.popBackStack()
                return
            }
            val binding = FragmentExtensionLoginCustomInputBinding.bind(view)
            binding.run {
                form.inputFields.forEachIndexed { index, field ->
                    val input = ItemInputBinding.inflate(
                        layoutInflater, customInput, false
                    )
                    input.root.id = field.key.hashCode()
                    input.editText.id = "${field.key}_input".hashCode()
                    input.root.hint = field.label
                    input.root.setStartIconDrawable(getIcon(field.type))
                    @Suppress("DEPRECATION")
                    input.root.isPasswordVisibilityToggleEnabled = field.type == Type.Password
                    input.editText.inputType = when (field.type) {
                        Type.Email -> TYPE_CLASS_TEXT or TYPE_TEXT_VARIATION_EMAIL_ADDRESS
                        Type.Password -> TYPE_CLASS_TEXT or TYPE_TEXT_VARIATION_PASSWORD
                        Type.Number -> TYPE_CLASS_TEXT or TYPE_CLASS_NUMBER
                        Type.Url -> TYPE_CLASS_TEXT or TYPE_TEXT_VARIATION_URI
                        else -> TYPE_CLASS_TEXT
                    }
                    input.editText.setText(loginViewModel.inputs[field.key])
                    input.editText.doAfterTextChanged { editable ->
                        loginViewModel.inputs[field.key] =
                            editable.toString().takeIf { it.isNotBlank() }
                    }
                    input.editText.setOnEditorActionListener { _, _, _ ->
                        if (index < form.inputFields.size - 1) {
                            customInput.getChildAt(index + 1).requestFocus()
                        } else loginCustomSubmit.performClick()
                        true
                    }

                    customInput.addView(input.root)
                }
                loginCustomSubmit.setOnClickListener {
                    form.inputFields.forEach {
                        if (it.isRequired && loginViewModel.inputs[it.key].isNullOrEmpty()) {
                            message(Message(getString(R.string.x_is_required, it.label)))
                            return@setOnClickListener
                        }
                        val regex = it.regex
                        if (regex != null && !loginViewModel.inputs[it.key].isNullOrEmpty()) {
                            if (!loginViewModel.inputs[it.key]!!.matches(regex)) {
                                message(
                                    Message(
                                        getString(R.string.regex_invalid, it.label, regex.pattern)
                                    )
                                )
                                return@setOnClickListener
                            }
                        }
                    }
                    loginViewModel.onCustomTextInputSubmit(form)
                }
            }
        }

        private fun message(m: Message) {
            lifecycleScope.launch {
                loginViewModel.messageFlow.emit(m)
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\login\LoginUserListBottomSheet.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions.login

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.view.isVisible
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import com.google.android.material.button.MaterialButtonToggleGroup.OnButtonCheckedListener
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.databinding.DialogLoginUserListBinding
import dev.brahmkshatriya.echo.databinding.ItemExtensionButtonBinding
import dev.brahmkshatriya.echo.extensions.db.models.CurrentUser
import dev.brahmkshatriya.echo.extensions.db.models.UserEntity.Companion.toEntity
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadAsCircle
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import org.koin.androidx.viewmodel.ext.android.activityViewModel

class LoginUserListBottomSheet : BottomSheetDialogFragment() {

    var binding by autoCleared<DialogLoginUserListBinding>()
    val viewModel by activityViewModel<LoginUserListViewModel>()

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View {
        binding = DialogLoginUserListBinding.inflate(inflater, container, false)
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        binding.title.setNavigationOnClickListener { dismiss() }

        var listener: OnButtonCheckedListener? = null
        observe(viewModel.allUsers) { (ext, list) ->
            binding.accountListLoading.root.isVisible = ext == null
            binding.accountListToggleGroup.isVisible = ext != null
            binding.title.title = getString(R.string.select_x_account, ext?.name ?: "")
            binding.accountListToggleGroup.removeAllViews()
            listener?.let { binding.accountListToggleGroup.removeOnButtonCheckedListener(it) }

            ext ?: return@observe

            binding.title.setOnMenuItemClickListener {
                dismiss()
                viewModel.setLoginUser(CurrentUser(ext.type, ext.id, null))
                true
            }

            binding.addAccount.setOnClickListener {
                dismiss()
                requireActivity().openFragment<LoginFragment>(
                    null,
                    LoginFragment.getBundle(ext.id, ext.name, ext.type)
                )
            }

            val selectedUser = viewModel.currentUser.value

            binding.logout.isEnabled = selectedUser != null
            binding.logout.setOnClickListener {
                viewModel.logout(selectedUser?.toEntity(ext.type, ext.id))
                viewModel.setLoginUser(CurrentUser(ext.type, ext.id, null))
            }

            list.forEachIndexed { index, (user, selected) ->
                val button = ItemExtensionButtonBinding.inflate(
                    layoutInflater, binding.accountListToggleGroup, false
                ).root
                button.text = user.name
                binding.accountListToggleGroup.addView(button)
                button.isChecked = selected
                user.cover.loadAsCircle(button) {
                    if (it != null) {
                        button.icon = it
                        button.iconTint = null
                    } else button.setIconResource(R.drawable.ic_account_circle)
                }
                button.id = index
            }

            val checked = list.indexOfFirst { it.second }.takeIf { it != -1 }
            if (checked != null) binding.accountListToggleGroup.check(checked)

            listener = OnButtonCheckedListener { _, id, isChecked ->
                if (isChecked) {
                    val user = list[id].first
                    viewModel.setLoginUser(user.toEntity(ext.type, ext.id))
                    dismiss()
                }
            }
            binding.accountListToggleGroup.addOnButtonCheckedListener(listener)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\login\LoginUserListViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions.login

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.clients.LoginClient
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.isClient
import dev.brahmkshatriya.echo.extensions.db.models.CurrentUser
import dev.brahmkshatriya.echo.extensions.db.models.UserEntity
import dev.brahmkshatriya.echo.extensions.db.models.UserEntity.Companion.toCurrentUser
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.ExperimentalCoroutinesApi
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.SharingStarted
import kotlinx.coroutines.flow.combine
import kotlinx.coroutines.flow.emptyFlow
import kotlinx.coroutines.flow.flatMapLatest
import kotlinx.coroutines.flow.map
import kotlinx.coroutines.flow.mapLatest
import kotlinx.coroutines.flow.stateIn
import kotlinx.coroutines.launch

class LoginUserListViewModel(
    val extensionLoader: ExtensionLoader,
) : ViewModel() {

    private val userDao = extensionLoader.db.userDao()
    val currentExtension = MutableStateFlow<Extension<*>?>(null)

    @OptIn(ExperimentalCoroutinesApi::class)
    val allUsers = currentExtension
        .combine(extensionLoader.all) { ext, all ->
            if (ext == null) return@combine null
            all.find { it.type == ext.type && it.id == ext.id }
        }
        .combine(userDao.observeCurrentUser()) { a, b -> a to b }
        .flatMapLatest { (ext, current) ->
            val curr = current.find { it.extId == ext?.id && it.type == ext.type }
            val flow = if (ext != null) userDao.observeAllUsers(ext.type, ext.id)
            else null
            flow?.map { entities ->
                val users = entities.mapNotNull { ent ->
                    val selected = ent.id == curr?.userId
                    ent.user.getOrNull()?.let { it to selected }
                }
                ext to users
            } ?: emptyFlow()
        }.stateIn(viewModelScope, SharingStarted.Eagerly, null to listOf())

    @OptIn(ExperimentalCoroutinesApi::class)
    val allUsersWithClient = allUsers.mapLatest {
        val (ext, users) = it
        val isLoginClient = ext?.isClient<LoginClient>() ?: false
        Triple(ext, isLoginClient, users)
    }.stateIn(viewModelScope, SharingStarted.Eagerly, Triple(null, false, emptyList()))

    val currentUser = allUsers.map {
        it.second.find { user -> user.second }?.first
    }.stateIn(viewModelScope, SharingStarted.Eagerly, null)

    fun logout(user: UserEntity?) {
        if (user == null) return
        viewModelScope.launch(Dispatchers.IO) {
            userDao.deleteUser(user)
        }
    }

    fun setLoginUser(user: UserEntity?) {
        val currentUser = user?.toCurrentUser()
            ?: currentExtension.value?.let { CurrentUser(it.type, it.id, null) }
            ?: return
        setLoginUser(currentUser)
    }

    fun setLoginUser(currentUser: CurrentUser) {
        viewModelScope.launch(Dispatchers.IO) {
            userDao.setCurrentUser(currentUser)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\login\LoginViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions.login

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.clients.LoginClient
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.Message
import dev.brahmkshatriya.echo.common.models.User
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.get
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getAs
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtensionFlow
import dev.brahmkshatriya.echo.extensions.db.models.UserEntity.Companion.toCurrentUser
import dev.brahmkshatriya.echo.extensions.db.models.UserEntity.Companion.toEntity
import dev.brahmkshatriya.echo.extensions.exceptions.AppException.Companion.toAppException
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.SharingStarted.Companion.Eagerly
import kotlinx.coroutines.flow.first
import kotlinx.coroutines.flow.stateIn
import kotlinx.coroutines.launch

class LoginViewModel(
    val extensionLoader: ExtensionLoader,
    val extensionType: ExtensionType,
    val extensionId: String? = null,
) : ViewModel() {
    val extension = extensionLoader.getFlow(extensionType).getExtensionFlow(extensionId)
        .stateIn(viewModelScope, Eagerly, null)

    private val app = extensionLoader.app
    val messageFlow = app.messageFlow
    private val userDao = extensionLoader.db.userDao()
    val loading = MutableStateFlow(true)
    val loadingOver = MutableSharedFlow<Unit>()
    val addFragmentFlow = MutableSharedFlow<FragmentType>()

    sealed class FragmentType {
        data object Selector : FragmentType()
        data object WebView : FragmentType()
        data class CustomInput(val index: Int?) : FragmentType()
    }

    private suspend fun loginNotSupported(extName: String?) {
        val login = app.context.getString(R.string.login)
        val message =
            app.context.getString(R.string.x_is_not_supported_in_x, login, extName.toString())
        messageFlow.emit(Message(message))
        loadingOver.emit(Unit)
    }

    fun changeFragment(type: FragmentType) = viewModelScope.launch {
        addFragmentFlow.emit(type)
    }

    private suspend fun afterLogin(
        result: Result<List<User>>
    ) {
        val users = result.getOrElse {
            app.throwFlow.emit(it)
            loading.value = false
            loadingOver.emit(Unit)
            return@afterLogin
        }
        if (users.isEmpty()) {
            app.messageFlow.emit(Message(app.context.getString(R.string.no_user_found)))
        } else {
            val entities = users.map { it.toEntity(extensionType, extensionId!!) }
            userDao.insertUsers(entities)
            val user = entities.first()
            userDao.setCurrentUser(user.toCurrentUser())
        }
        loading.value = false
        loadingOver.emit(Unit)
    }

    fun onWebViewStop(
        result: Result<List<User>>,
    ) = viewModelScope.launch {
        val extension = extension.first { it != null }!!
        val users = runCatching { result.getOrElse { throw it.toAppException(extension) } }
        afterLogin(users)
    }

    val inputs = mutableMapOf<String, String?>()
    fun onCustomTextInputSubmit(form: LoginClient.Form) = viewModelScope.launch {
        loading.value = true
        val extension = extension.first { it != null }!!
        val users = extension.getAs<LoginClient.CustomInput, List<User>> {
            onLogin(form.key, inputs.toMap())
        }
        afterLogin(users)
    }

    init {
        viewModelScope.launch {
            val extension = extension.first { it != null }!!
            val totalClients = extension.get {
                listOfNotNull(
                    if (this is LoginClient.WebView) 1 else 0,
                    if (this is LoginClient.CustomInput) forms.size
                    else 0,
                ).sum()
            }.getOrNull() ?: 0
            val client = extension.instance.value().getOrNull()
            when (totalClients) {
                0 -> loginNotSupported(extension.name)
                1 -> when (client) {
                    is LoginClient.WebView -> addFragmentFlow.emit(FragmentType.WebView)
                    is LoginClient.CustomInput -> addFragmentFlow.emit(FragmentType.CustomInput(null))
                    null -> loginNotSupported(extension.name)
                }

                else -> addFragmentFlow.emit(FragmentType.Selector)
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\manage\ExtensionAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions.manage

import android.annotation.SuppressLint
import android.content.SharedPreferences
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.content.edit
import androidx.core.view.isVisible
import androidx.paging.LoadState
import androidx.paging.PagingData
import androidx.paging.PagingDataAdapter
import androidx.recyclerview.widget.ConcatAdapter
import androidx.recyclerview.widget.DiffUtil
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.databinding.ItemExtensionBinding
import dev.brahmkshatriya.echo.extensions.ExtensionLoader.Companion.priorityKey
import dev.brahmkshatriya.echo.ui.feed.EmptyAdapter
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadAsCircle
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class
ExtensionAdapter(
    val listener: Listener
) : PagingDataAdapter<Extension<*>, ExtensionAdapter.ViewHolder>(DiffCallback) {

    interface Listener {
        fun onClick(extension: Extension<*>, view: View)
        fun onDragHandleTouched(viewHolder: ViewHolder)
        fun onOpenClick(extension: Extension<*>)
    }

    object DiffCallback : DiffUtil.ItemCallback<Extension<*>>() {
        override fun areItemsTheSame(oldItem: Extension<*>, newItem: Extension<*>) =
            oldItem.id == newItem.id

        override fun areContentsTheSame(oldItem: Extension<*>, newItem: Extension<*>) =
            oldItem == newItem
    }

    private val empty = EmptyAdapter()
    fun withEmptyAdapter() = ConcatAdapter(empty, this)

    class ViewHolder(val binding: ItemExtensionBinding, val listener: Listener) :
        ScrollAnimViewHolder(binding.root) {
        @SuppressLint("SetTextI18n")
        fun bind(extension: Extension<*>) {
            val metadata = extension.metadata
            binding.root.transitionName = metadata.id
            binding.root.setOnClickListener {
                listener.onClick(extension, binding.root)
            }
            binding.extensionName.apply {
                text = if (metadata.isEnabled) metadata.name
                else context.getString(R.string.x_disabled, metadata.name)
            }
            binding.extensionVersion.text = "${metadata.version} • ${metadata.importType.name}"
            binding.itemExtension.apply {
                metadata.icon.loadAsCircle(this, R.drawable.ic_extension_32dp) {
                    setImageDrawable(it)
                }
            }

            binding.extensionDrag.setOnTouchListener { v, _ ->
                v.performClick()
                listener.onDragHandleTouched(this)
                true
            }

            binding.extensionUse.isVisible = extension.type == ExtensionType.MUSIC
            binding.extensionUse.setOnClickListener {
                listener.onOpenClick(extension)
            }
        }
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val inflater = LayoutInflater.from(parent.context)
        return ViewHolder(ItemExtensionBinding.inflate(inflater, parent, false), listener)
    }

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        val download = runCatching { getItem(position) }.getOrNull() ?: return
        holder.bind(download)
    }

    suspend fun submit(list: List<Extension<*>>, selectedIndex: Int, settings: SharedPreferences) {
        submitData(PagingData.from(list))
        empty.loadState = if (list.isEmpty()) LoadState.Loading
        else LoadState.NotLoading(true)
        // Update priority map of extensions
        val key = ExtensionType.entries[selectedIndex].priorityKey()
        val extIds = list.joinToString(",") { it.id }
        settings.edit { putString(key, extIds) }
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\extensions\manage\ManageExtensionsFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.extensions.manage

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.recyclerview.widget.ItemTouchHelper
import androidx.recyclerview.widget.RecyclerView
import com.google.android.material.tabs.TabLayout
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.databinding.FragmentManageExtensionsBinding
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyBackPressCallback
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsetsWithChild
import dev.brahmkshatriya.echo.ui.extensions.ExtensionInfoFragment
import dev.brahmkshatriya.echo.ui.extensions.ExtensionInfoPreference.Companion.getType
import dev.brahmkshatriya.echo.ui.extensions.ExtensionsViewModel
import dev.brahmkshatriya.echo.ui.extensions.add.ExtensionsAddBottomSheet
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.setupTransition
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import dev.brahmkshatriya.echo.utils.ui.FastScrollerHelper
import dev.brahmkshatriya.echo.utils.ui.UiUtils.configureAppBar
import org.koin.androidx.viewmodel.ext.android.activityViewModel

class ManageExtensionsFragment : Fragment() {
    private var binding by autoCleared<FragmentManageExtensionsBinding>()
    private val viewModel by activityViewModel<ExtensionsViewModel>()

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
    ): View {
        binding = FragmentManageExtensionsBinding.inflate(inflater, container, false)
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        setupTransition(view)
        applyInsetsWithChild(binding.appBarLayout, binding.recyclerView, 104) {
            binding.fabContainer.applyInsets(it)
        }
        applyBackPressCallback()
        binding.appBarLayout.configureAppBar { offset ->
            binding.appBarOutline.alpha = offset
            binding.appBarOutline.isVisible = offset > 0
            binding.toolBar.alpha = 1 - offset
        }
        binding.toolBar.setNavigationOnClickListener {
            parentFragmentManager.popBackStack()
        }
        binding.toolBar.setOnMenuItemClickListener {
            viewModel.update(requireActivity(), true)
            true
        }

        FastScrollerHelper.applyTo(binding.recyclerView)
        binding.fabAddExtensions.setOnClickListener {
            ExtensionsAddBottomSheet().show(parentFragmentManager, null)
        }

        val tabs = ExtensionType.entries.map {
            binding.tabLayout.newTab().apply {
                setText(getType(it))
            }
        }
        binding.tabLayout.run {
            tabs.forEach { addTab(it) }
        }

        val callback = object : ItemTouchHelper.SimpleCallback(
            ItemTouchHelper.UP or ItemTouchHelper.DOWN, 0
        ) {
            override fun onMove(
                recyclerView: RecyclerView,
                viewHolder: RecyclerView.ViewHolder,
                target: RecyclerView.ViewHolder
            ): Boolean {
                val fromPos = viewHolder.bindingAdapterPosition
                val toPos = target.bindingAdapterPosition
                viewModel.moveExtensionItem(toPos, fromPos)
                return true
            }

            override fun onSwiped(viewHolder: RecyclerView.ViewHolder, direction: Int) {}

            override fun getMovementFlags(
                recyclerView: RecyclerView, viewHolder: RecyclerView.ViewHolder
            ) = makeMovementFlags(ItemTouchHelper.UP or ItemTouchHelper.DOWN, 0)

        }

        val touchHelper = ItemTouchHelper(callback)
        val extensionAdapter = ExtensionAdapter(object : ExtensionAdapter.Listener {
            override fun onClick(extension: Extension<*>, view: View) {
                openFragment<ExtensionInfoFragment>(
                    view, ExtensionInfoFragment.getBundle(extension)
                )
            }

            override fun onDragHandleTouched(viewHolder: ExtensionAdapter.ViewHolder) {
                touchHelper.startDrag(viewHolder)
            }

            override fun onOpenClick(extension: Extension<*>) {
                viewModel.onExtensionSelected(extension as MusicExtension)
                parentFragmentManager.popBackStack()
                parentFragmentManager.popBackStack()
            }
        })

        observe(viewModel.manageExtListFlow) { list ->
            extensionAdapter.submit(list, viewModel.lastSelectedManageExt.value, viewModel.app.settings)
        }

        binding.tabLayout.addOnTabSelectedListener(object : TabLayout.OnTabSelectedListener {
            fun select(tab: TabLayout.Tab) {
                viewModel.lastSelectedManageExt.value = tab.position
            }

            override fun onTabSelected(tab: TabLayout.Tab) = select(tab)
            override fun onTabReselected(tab: TabLayout.Tab) = select(tab)
            override fun onTabUnselected(tab: TabLayout.Tab) {}
        })

        binding.tabLayout.selectTab(tabs[viewModel.lastSelectedManageExt.value])
        binding.recyclerView.adapter = extensionAdapter.withEmptyAdapter()
        touchHelper.attachToRecyclerView(binding.recyclerView)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\ButtonsAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed

import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.core.view.isVisible
import androidx.core.widget.addTextChangedListener
import com.google.android.material.chip.Chip
import com.google.android.material.chip.ChipGroup
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.databinding.ItemFeedButtonsBinding
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.animateVisibility
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimRecyclerAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class ButtonsAdapter(
    private val viewModel: FeedData,
    private val listener: FeedClickListener,
    private val getAllLoaded: () -> List<Track>
) : ScrollAnimRecyclerAdapter<ButtonsAdapter.ViewHolder>(), GridAdapter {
    override fun getItemCount() = 1
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) =
        ViewHolder(parent, viewModel, listener, getAllLoaded)

    var buttons: FeedData.Buttons? = null
        set(value) {
            field = value
            notifyItemChanged(0)
        }

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        super.onBindViewHolder(holder, position)
        holder.bind(buttons)
    }

    override fun onViewDetachedFromWindow(holder: ViewHolder) {
        holder.onViewDetached()
    }

    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) = count

    class ViewHolder(
        parent: ViewGroup,
        private val viewModel: FeedData,
        private val listener: FeedClickListener,
        private val getAllLoaded: () -> List<Track>,
        private val binding: ItemFeedButtonsBinding = ItemFeedButtonsBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        )
    ) : ScrollAnimViewHolder(binding.root) {

        private var feed: FeedData.Buttons? = null

        init {
            binding.searchToggleButton.addOnCheckedChangeListener { _, isChecked ->
                viewModel.searchToggled = isChecked
                if (!isChecked) {
                    binding.searchLayout.clearFocus()
                    viewModel.searchQuery = null
                    viewModel.onSearchClicked()
                }
                binding.searchBarContainer.animateVisibility(isChecked)
            }
            binding.searchBarText.addTextChangedListener { text ->
                viewModel.searchQuery = text?.toString()?.takeIf { it.isNotBlank() }
                binding.searchClose.isEnabled = !text.isNullOrBlank()
            }
            binding.searchClose.setOnClickListener {
                binding.searchBarText.setText("")
                viewModel.searchQuery = null
                viewModel.onSearchClicked()
            }
            binding.searchBarText.setOnEditorActionListener { v, _, _ ->
                viewModel.onSearchClicked()
                true
            }
            binding.sortToggleButton.setOnClickListener {
                listener.onSortClicked(it, feed?.feedId)
            }
            binding.playButton.setOnClickListener {
                val list = if (feed?.item == null) {
                    feed?.buttons?.customTrackList ?: getAllLoaded()
                } else null
                listener.onPlayClicked(it, feed?.extensionId, feed?.item, list, false)
            }
            binding.shuffleButton.setOnClickListener {
                val feed = feed
                val list = if (feed?.item == null) {
                    feed?.buttons?.customTrackList ?: getAllLoaded()
                } else null
                listener.onPlayClicked(it, feed?.extensionId, feed?.item, list, true)
            }
        }

        fun bind(feed: FeedData.Buttons?) {
            val buttons = feed?.buttons ?: Feed.Buttons.EMPTY
            this.feed = feed
            val showButtons = buttons.run { showPlayAndShuffle || showSort || showSearch }
            binding.searchToggleButton.isChecked = viewModel.searchToggled
            binding.searchBarText.setText(viewModel.searchQuery)
            binding.chipGroup.configure(feed?.sortState)
            binding.buttonGroup.isVisible = showButtons
            if (!showButtons) return
            binding.playButton.isVisible = buttons.showPlayAndShuffle
            binding.shuffleButton.isVisible = buttons.showPlayAndShuffle
            binding.searchToggleButton.isVisible = buttons.showSearch
            binding.sortToggleButton.isVisible = buttons.showSort
        }

        fun onViewDetached() {
            binding.searchLayout.clearFocus()
        }

        private fun ChipGroup.configure(state: FeedSort.State?) {
            removeAllViews()
            var visible = false
            if (state?.feedSort != null) {
                visible = true
                val chip = Chip(context)
                chip.text = context.getString(state.feedSort.title)
                chip.isCheckable = true
                chip.isChecked = true
                addView(chip)
                chip.setOnClickListener {
                    viewModel.feedSortState.value = state.copy(feedSort = null)
                }
            }
            if (state?.reversed == true) {
                visible = true
                val chip = Chip(context)
                chip.text = context.getString(R.string.reversed)
                chip.isCheckable = true
                chip.isChecked = true
                addView(chip)
                chip.setOnClickListener {
                    viewModel.feedSortState.value = state.copy(reversed = false)
                }
            }
            isVisible = visible
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\EmptyAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed

import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.paging.LoadState
import dev.brahmkshatriya.echo.databinding.ItemShelfEmptyBinding
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimLoadStateAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class EmptyAdapter : ScrollAnimLoadStateAdapter<EmptyAdapter.ViewHolder>(), GridAdapter {
    class ViewHolder(val binding: ItemShelfEmptyBinding) : ScrollAnimViewHolder(binding.root)

    override fun onCreateViewHolder(parent: ViewGroup, loadState: LoadState): ViewHolder {
        val inflater = LayoutInflater.from(parent.context)
        val binding = ItemShelfEmptyBinding.inflate(inflater, parent, false)
        return ViewHolder(binding)
    }

    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) = count
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\FeedAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed

import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.paging.LoadState
import androidx.recyclerview.widget.DiffUtil
import androidx.recyclerview.widget.ItemTouchHelper
import androidx.recyclerview.widget.RecyclerView
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.databinding.ItemLoadingBinding
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.ui.feed.FeedData.FeedTab
import dev.brahmkshatriya.echo.ui.feed.FeedLoadingAdapter.Companion.createListener
import dev.brahmkshatriya.echo.ui.feed.FeedType.Enum.Category
import dev.brahmkshatriya.echo.ui.feed.FeedType.Enum.CategoryGrid
import dev.brahmkshatriya.echo.ui.feed.FeedType.Enum.Header
import dev.brahmkshatriya.echo.ui.feed.FeedType.Enum.HorizontalList
import dev.brahmkshatriya.echo.ui.feed.FeedType.Enum.Media
import dev.brahmkshatriya.echo.ui.feed.FeedType.Enum.MediaGrid
import dev.brahmkshatriya.echo.ui.feed.FeedType.Enum.Video
import dev.brahmkshatriya.echo.ui.feed.FeedType.Enum.VideoHorizontal
import dev.brahmkshatriya.echo.ui.feed.viewholders.CategoryViewHolder
import dev.brahmkshatriya.echo.ui.feed.viewholders.FeedViewHolder
import dev.brahmkshatriya.echo.ui.feed.viewholders.HeaderViewHolder
import dev.brahmkshatriya.echo.ui.feed.viewholders.HorizontalListViewHolder
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaGridViewHolder
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder
import dev.brahmkshatriya.echo.ui.feed.viewholders.VideoHorizontalViewHolder
import dev.brahmkshatriya.echo.ui.feed.viewholders.VideoViewHolder
import dev.brahmkshatriya.echo.ui.player.PlayerViewModel
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.animatedWithAlpha
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimPagingAdapter
import kotlinx.coroutines.flow.combine
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import java.lang.ref.WeakReference

class FeedAdapter(
    private val viewModel: FeedData,
    private val listener: FeedClickListener,
    private val takeFullScreen: Boolean = false,
) : ScrollAnimPagingAdapter<FeedType, FeedViewHolder<*>>(DiffCallback), GridAdapter {

    object DiffCallback : DiffUtil.ItemCallback<FeedType>() {
        override fun areContentsTheSame(oldItem: FeedType, newItem: FeedType) = oldItem == newItem
        override fun areItemsTheSame(oldItem: FeedType, newItem: FeedType): Boolean {
            if (oldItem.extensionId != newItem.extensionId) return false
            if (newItem.type != oldItem.type) return false
            if (oldItem.id != newItem.id) return false
            return true
        }
    }

    private val viewPool = RecyclerView.RecycledViewPool()
    override fun getItemViewType(position: Int) =
        runCatching { getItem(position)!! }.getOrNull()?.type?.ordinal ?: 0

    private var isPlayButtonShown = false
    private fun FeedType.toTrack(): Track? = when (this) {
        is FeedType.Media -> item as? Track
        is FeedType.MediaGrid -> item as? Track
        is FeedType.Video -> item
        else -> null
    }

    fun getAllTracks(feed: FeedType): Pair<List<Track>, Int> {
        if (!isPlayButtonShown) return listOfNotNull(feed.toTrack()) to 0
        val list = snapshot().mapNotNull { it }
        val index = list.indexOfFirst { it.id == feed.id }
        if (index == -1) return listOf<Track>() to -1
        val from = list.take(index).indexOfLast { it.type != feed.type }
        val to = list.drop(index + 1).indexOfFirst { it.type != feed.type }
        val feeds = list.subList(from + 1, if (to == -1) list.size else index + to + 1)
        val tracks = feeds.mapNotNull { it.toTrack() }
        val newIndex = tracks.indexOfFirst { it.id == feed.id }
        return tracks to newIndex
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): FeedViewHolder<*> {
        val type = FeedType.Enum.entries[viewType]
        return when (type) {
            Header -> HeaderViewHolder(parent, listener)
            HorizontalList -> HorizontalListViewHolder(parent, listener, viewPool)
            Category -> CategoryViewHolder(parent, listener)
            CategoryGrid -> CategoryViewHolder(parent, listener)
            Media -> MediaViewHolder(parent, listener, ::getAllTracks)
            MediaGrid -> MediaGridViewHolder(parent, listener, ::getAllTracks)
            Video -> VideoViewHolder(parent, listener, ::getAllTracks)
            VideoHorizontal -> VideoHorizontalViewHolder(parent, listener, ::getAllTracks)
        }
    }

    override fun onBindViewHolder(holder: FeedViewHolder<*>, position: Int) {
        super.onBindViewHolder(holder, position)
        val feed = runCatching { getItem(position) }.getOrNull() ?: return
        when (holder) {
            is HeaderViewHolder -> holder.bind(feed as FeedType.Header)
            is CategoryViewHolder -> holder.bind(feed as FeedType.Category)
            is MediaViewHolder -> holder.bind(feed as FeedType.Media)
            is MediaGridViewHolder -> holder.bind(feed as FeedType.MediaGrid)
            is VideoViewHolder -> holder.bind(feed as FeedType.Video)
            is VideoHorizontalViewHolder -> holder.bind(feed as FeedType.Video)
            is HorizontalListViewHolder -> {
                holder.bind(feed as FeedType.HorizontalList)
                viewModel.visibleScrollableViews[position] = WeakReference(holder)
                holder.layoutManager.apply {
                    val state = viewModel.layoutManagerStates[position]
                    if (state != null) onRestoreInstanceState(state)
                    else scrollToPosition(0)
                }
            }
        }
        holder.onCurrentChanged(current)
    }

    override fun onViewRecycled(holder: FeedViewHolder<*>) {
        if (holder is HorizontalListViewHolder) saveScrollState(holder) {
            viewModel.visibleScrollableViews.remove(holder.bindingAdapterPosition)
        }
    }

    override fun onViewAttachedToWindow(holder: FeedViewHolder<*>) {
        holder.onCurrentChanged(current)
    }

    class LoadingViewHolder(
        parent: ViewGroup,
        val binding: ItemLoadingBinding = ItemLoadingBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        ),
    ) : FeedLoadingAdapter.ViewHolder(binding.root) {
        init {
            binding.textView.isVisible = false
        }

        override fun bind(loadState: LoadState) {
            binding.root.alpha = 0f
            binding.root.animatedWithAlpha(500)
        }
    }

    fun getAllTracks() = snapshot().mapNotNull {
        when (it) {
            is FeedType.Media -> listOfNotNull(it.item as? Track)
            is FeedType.MediaGrid -> listOfNotNull(it.item as? Track)
            is FeedType.Video -> listOf(it.item)
            is FeedType.HorizontalList -> it.shelf.list.filterIsInstance<Track>()
            else -> null
        }
    }.flatten()

    fun withLoading(fragment: Fragment, vararg before: GridAdapter): GridAdapter.Concat {
        val tabs = TabsAdapter<FeedTab>({ tab.title }) { view, index, tab ->
            listener.onTabSelected(view, tab.feedId, tab.extensionId, index)
        }
        fragment.observe(viewModel.tabsFlow) { tabs.data = it }
        fragment.observe(viewModel.selectedTabIndexFlow) { tabs.selected = it }
        val buttons = ButtonsAdapter(viewModel, listener, ::getAllTracks)
        fragment.observe(viewModel.buttonsFlow) {
            buttons.buttons = it
            isPlayButtonShown = it?.buttons?.showPlayAndShuffle == true
        }
        val loadStateListener = fragment.createListener { retry() }
        val header = FeedLoadingAdapter(loadStateListener) { LoadingViewHolder(it) }
        val footer = FeedLoadingAdapter(loadStateListener) { LoadingViewHolder(it) }
        val empty = EmptyAdapter()
        fragment.observe(
            loadStateFlow.combine(viewModel.shouldShowEmpty) { a, b -> a to b }
        ) { (loadStates, shouldShowEmpty) ->
            val isEmpty =
                shouldShowEmpty && itemCount == 0 && loadStates.append is LoadState.NotLoading
            empty.loadState = if (isEmpty) LoadState.Loading else LoadState.NotLoading(false)
        }
        addLoadStateListener { loadStates ->
            header.loadState = loadStates.refresh
            footer.loadState = loadStates.append
        }
        return GridAdapter.Concat(*before, tabs, buttons, header, empty, this, footer)
    }

    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) =
        when (FeedType.Enum.entries[getItemViewType(position)]) {
            Header, HorizontalList -> count
            Category, Media, Video -> if (takeFullScreen) count else 2.coerceAtMost(count)
            CategoryGrid, MediaGrid, VideoHorizontal -> 1
        }

    private fun clearState() {
        viewModel.layoutManagerStates.clear()
        viewModel.visibleScrollableViews.clear()
    }

    private fun saveScrollState(
        holder: HorizontalListViewHolder, block: ((HorizontalListViewHolder) -> Unit)? = null,
    ) = runCatching {
        val layoutManagerStates = viewModel.layoutManagerStates
        layoutManagerStates[holder.bindingAdapterPosition] =
            holder.layoutManager.onSaveInstanceState()
        block?.invoke(holder)
    }

    fun saveState() {
        viewModel.visibleScrollableViews.values.forEach { item ->
            item.get()?.let { saveScrollState(it) }
        }
        viewModel.visibleScrollableViews.clear()
    }

    init {
        addLoadStateListener {
            if (it.refresh == LoadState.Loading) clearState()
        }
    }

    private var current: PlayerState.Current? = null
    fun onCurrentChanged(current: PlayerState.Current?) {
        this.current = current
        onEachViewHolder { onCurrentChanged(current) }
    }

    companion object {
        fun Fragment.getFeedAdapter(
            viewModel: FeedData,
            listener: FeedClickListener,
            takeFullScreen: Boolean = false,
        ): FeedAdapter {
            val playerViewModel by activityViewModel<PlayerViewModel>()
            val adapter = FeedAdapter(viewModel, listener, takeFullScreen)
            observe(viewModel.pagingFlow) {
                adapter.saveState()
                adapter.submitData(it)
            }
            observe(playerViewModel.playerState.current) { adapter.onCurrentChanged(it) }
            return adapter
        }

        fun getTouchHelper(listener: FeedClickListener) = ItemTouchHelper(
            object : ItemTouchHelper.SimpleCallback(0, ItemTouchHelper.START) {
                override fun getMovementFlags(
                    recyclerView: RecyclerView, viewHolder: RecyclerView.ViewHolder,
                ): Int {
                    if (viewHolder !is MediaViewHolder) return 0
                    if (viewHolder.feed?.item !is Track) return 0
                    return makeMovementFlags(0, ItemTouchHelper.START)
                }

                override fun onSwiped(viewHolder: RecyclerView.ViewHolder, direction: Int) {
                    val feed = (viewHolder as MediaViewHolder).feed ?: return
                    val track = feed.item as? Track ?: return
                    listener.onTrackSwiped(viewHolder.itemView, feed.extensionId, track)
                    viewHolder.bindingAdapter?.notifyItemChanged(viewHolder.bindingAdapterPosition)
                }

                override fun getSwipeThreshold(viewHolder: RecyclerView.ViewHolder) = 0.25f
                override fun onMove(
                    recyclerView: RecyclerView,
                    viewHolder: RecyclerView.ViewHolder,
                    target: RecyclerView.ViewHolder,
                ) = false
            }
        )
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\FeedClickListener.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed

import android.view.View
import androidx.fragment.app.Fragment
import androidx.fragment.app.FragmentManager
import androidx.fragment.app.activityViewModels
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Radio
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.common.SnackBarHandler.Companion.createSnack
import dev.brahmkshatriya.echo.ui.media.MediaFragment
import dev.brahmkshatriya.echo.ui.media.MediaFragment.Companion.getBundle
import dev.brahmkshatriya.echo.ui.media.more.MediaMoreBottomSheet
import dev.brahmkshatriya.echo.ui.player.PlayerViewModel
import dev.brahmkshatriya.echo.ui.playlist.edit.search.EditPlaylistSearchClickListener
import org.koin.androidx.viewmodel.ext.android.viewModel

open class FeedClickListener(
    private val fragment: Fragment,
    val fragmentManager: FragmentManager,
    private val containerId: Int,
    private val afterOpen: () -> Unit = {}
) {
    companion object {
        fun Fragment.getFeedListener(
            navFragment: Fragment = this,
            afterOpen: () -> Unit = {}
        ): FeedClickListener {
            val key = arguments?.getString("feedListener")
            return when (key) {
                "playlist_search" -> EditPlaylistSearchClickListener(this)
                else -> FeedClickListener(
                    this,
                    navFragment.parentFragmentManager,
                    navFragment.id,
                    afterOpen
                )
            }
        }
    }

    open fun onTabSelected(
        view: View?,
        feedId: String?,
        extensionId: String?,
        position: Int
    ): Boolean {
        val vm by fragment.viewModel<FeedViewModel>()
        val feedData = vm.feedDataMap[feedId] ?: return notFoundSnack(R.string.feed)
        feedData.selectTab(extensionId, position)
        return true
    }

    open fun onSortClicked(view: View?, feedId: String?): Boolean {
        val vm by fragment.viewModel<FeedViewModel>()
        val feedData = vm.feedDataMap[feedId] ?: return notFoundSnack(R.string.feed)
        feedData.feedSortState.value = feedData.feedSortState.value ?: FeedSort.State()
        FeedSortBottomSheet.newInstance(feedId!!).show(fragment.childFragmentManager, null)
        return true
    }

    open fun onPlayClicked(
        view: View?,
        extensionId: String?,
        context: EchoMediaItem?,
        tracks: List<Track>?,
        shuffle: Boolean
    ): Boolean {
        if (extensionId == null) return notFoundSnack(R.string.extension)
        val vm by fragment.activityViewModels<PlayerViewModel>()
        if (tracks != null) {
            if (tracks.isEmpty()) return notFoundSnack(R.string.tracks)
            vm.setQueue(extensionId, tracks, 0, context)
            vm.setShuffle(shuffle, true)
            vm.setPlaying(true)
            return true
        }
        if (context == null) return notFoundSnack(R.string.item)
        if (shuffle) vm.shuffle(extensionId, context, true)
        else vm.play(extensionId, context, true)
        return true
    }

    open fun openFeed(
        view: View?,
        extensionId: String?,
        feedId: String?,
        title: String?,
        subtitle: String?,
        feed: Feed<Shelf>?
    ): Boolean {
        val fragment = fragmentManager.findFragmentById(containerId)
            ?: return notFoundSnack(R.string.view)
        val vm by fragment.activityViewModels<FeedFragment.VM>()
        vm.extensionId = extensionId ?: return notFoundSnack(R.string.extension)
        vm.feedId = feedId ?: return notFoundSnack(R.string.item)
        vm.feed = feed ?: return notFoundSnack(R.string.feed)
        fragment.openFragment<FeedFragment>(view, FeedFragment.getBundle(title.orEmpty(), subtitle))
        afterOpen()
        return true
    }

    fun notFoundSnack(id: Int): Boolean = with(fragment) {
        val notFound = getString(R.string.no_x_found, getString(id))
        createSnack(notFound)
        false
    }

    open fun onMediaClicked(
        view: View?, extensionId: String?, item: EchoMediaItem?, context: EchoMediaItem?
    ): Boolean {
        if (extensionId == null) return notFoundSnack(R.string.extension)
        if (item == null) return notFoundSnack(R.string.item)
        return when (item) {
            is Radio -> {
                val vm by fragment.activityViewModels<PlayerViewModel>()
                vm.play(extensionId, item, false)
                true
            }

            else -> {
                val fragment = fragmentManager.findFragmentById(containerId)
                    ?: return notFoundSnack(R.string.view)
                fragment.openFragment<MediaFragment>(view, getBundle(extensionId, item, false))
                afterOpen()
                true
            }
        }
    }

    open fun onMediaLongClicked(
        view: View?, extensionId: String?, item: EchoMediaItem?, context: EchoMediaItem?,
        tabId: String?, index: Int
    ): Boolean {
        if (extensionId == null) return notFoundSnack(R.string.extension)
        if (item == null) return notFoundSnack(R.string.item)
        MediaMoreBottomSheet.newInstance(
            containerId, extensionId, item, false,
            context = context, tabId = tabId, pos = index
        ).show(fragmentManager, null)
        return true
    }

    open fun onTracksClicked(
        view: View?,
        extensionId: String?,
        context: EchoMediaItem?,
        tracks: List<Track>?,
        pos: Int
    ): Boolean {
        if (extensionId == null) return notFoundSnack(R.string.extension)
        if (tracks.isNullOrEmpty()) return notFoundSnack(R.string.tracks)
        val vm by fragment.activityViewModels<PlayerViewModel>()
        vm.setQueue(extensionId, tracks, pos, context)
        vm.setPlaying(true)
        return true
    }

    open fun onTrackSwiped(
        view: View?, extensionId: String?, track: Track?,
    ): Boolean {
        if (extensionId == null) return notFoundSnack(R.string.extension)
        if (track == null) return notFoundSnack(R.string.track)
        val vm by fragment.activityViewModels<PlayerViewModel>()
        vm.addToNext(extensionId, track, false)
        return true
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\FeedData.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed

import android.os.Parcelable
import androidx.paging.cachedIn
import dev.brahmkshatriya.echo.common.helpers.PagedData
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Tab
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtensionOrThrow
import dev.brahmkshatriya.echo.extensions.builtin.offline.MediaStoreUtils.searchBy
import dev.brahmkshatriya.echo.ui.common.PagedSource
import dev.brahmkshatriya.echo.ui.feed.FeedType.Companion.toFeedType
import dev.brahmkshatriya.echo.ui.feed.viewholders.HorizontalListViewHolder
import dev.brahmkshatriya.echo.utils.CacheUtils.getFromCache
import dev.brahmkshatriya.echo.utils.CacheUtils.saveToCache
import dev.brahmkshatriya.echo.utils.CoroutineUtils.combineTransformLatest
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadDrawable
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.ExperimentalCoroutinesApi
import kotlinx.coroutines.FlowPreview
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.SharingStarted.Companion.Lazily
import kotlinx.coroutines.flow.collectLatest
import kotlinx.coroutines.flow.combine
import kotlinx.coroutines.flow.debounce
import kotlinx.coroutines.flow.emitAll
import kotlinx.coroutines.flow.flowOn
import kotlinx.coroutines.flow.map
import kotlinx.coroutines.flow.mapLatest
import kotlinx.coroutines.flow.merge
import kotlinx.coroutines.flow.stateIn
import kotlinx.coroutines.launch
import kotlinx.coroutines.withContext
import java.lang.ref.WeakReference

@OptIn(ExperimentalCoroutinesApi::class, FlowPreview::class)
data class FeedData(
    private val feedId: String,
    private val scope: CoroutineScope,
    private val app: App,
    private val extensionLoader: ExtensionLoader,
    private val cached: suspend ExtensionLoader.() -> State<Feed<Shelf>>?,
    private val load: suspend ExtensionLoader.() -> State<Feed<Shelf>>?,
    private val defaultButtons: Feed.Buttons,
    private val noVideos: Boolean,
    private val extraLoadFlow: Flow<*>
) {
    val current = extensionLoader.current
    val usersFlow = extensionLoader.db.currentUsersFlow
    suspend fun getExtension(id: String) =
        extensionLoader.getFlow(ExtensionType.MUSIC).getExtensionOrThrow(id)

    val layoutManagerStates = hashMapOf<Int, Parcelable?>()
    val visibleScrollableViews = hashMapOf<Int, WeakReference<HorizontalListViewHolder>>()

    private val refreshFlow = MutableSharedFlow<Unit>(1)
    private val cachedState = MutableStateFlow<Result<State<Feed<Shelf>>?>?>(null)
    private val loadedState = MutableStateFlow<Result<State<Feed<Shelf>>?>?>(null)
    private val selectedTabFlow = MutableStateFlow<Tab?>(null)

    val loadedShelves = MutableStateFlow<List<Shelf>?>(null)
    var searchToggled: Boolean = false
    var searchQuery: String? = null
    val feedSortState = MutableStateFlow<FeedSort.State?>(null)
    val searchClickedFlow = MutableSharedFlow<Unit>()

    private val stateFlow = cachedState.combine(loadedState) { a, b -> a to b }
        .stateIn(scope, Lazily, null to null)

    private val cachedDataFlow = cachedState.combineTransformLatest(selectedTabFlow) { feed, tab ->
        emit(null)
        if (feed == null) return@combineTransformLatest
        emit(getData(feed, tab))
    }.stateIn(scope, Lazily, null)

    private val loadedDataFlow = loadedState.combineTransformLatest(selectedTabFlow) { feed, tab ->
        emit(null)
        if (feed == null) return@combineTransformLatest
        emit(getData(feed, tab))
    }.stateIn(scope, Lazily, null)

    private suspend fun getData(
        state: Result<State<Feed<Shelf>>?>, tab: Tab?
    ) = withContext(Dispatchers.IO) {
        runCatching {
            val (extensionId, item, feed) = state.getOrThrow() ?: return@runCatching null
            State(extensionId, item, feed.getPagedData(tab))
        }
    }

    val dataFlow = cachedDataFlow.combine(loadedDataFlow) { cached, loaded ->
        val extensionId = (loaded?.getOrNull() ?: cached?.getOrNull())?.extensionId
        val tabId = selectedTabFlow.value?.id
        searchQuery = null
        searchToggled = false
        val id = "$extensionId-$feedId-$tabId"
        feedSortState.value = extensionId?.let { app.context.getFromCache(id, "sort") }
        loadedShelves.value = null
        cached to loaded
    }

    val shouldShowEmpty = dataFlow.map { (cached, loaded) ->
        val data = loaded?.getOrNull() ?: cached?.getOrNull()
        data != null
    }.stateIn(scope, Lazily, false)

    val tabsFlow = stateFlow.map { (cached, loaded) ->
        val state = (loaded?.getOrNull() ?: cached?.getOrNull()) ?: return@map listOf()
        state.feed.tabs.map {
            FeedTab(feedId, state.extensionId, it)
        }
    }

    val selectedTabIndexFlow = tabsFlow.combine(selectedTabFlow) { tabs, tab ->
        tabs.indexOfFirst { it.tab.id == tab?.id }
    }

    data class FeedTab(
        val feedId: String,
        val extensionId: String,
        val tab: Tab
    )

    data class Buttons(
        val feedId: String,
        val extensionId: String,
        val buttons: Feed.Buttons,
        val item: EchoMediaItem? = null,
        val sortState: FeedSort.State? = null,
    )

    val buttonsFlow = dataFlow.combine(feedSortState) { data, state ->
        val feed = data.run { second?.getOrNull() ?: first?.getOrNull() } ?: return@combine null
        Buttons(
            feedId,
            feed.extensionId,
            feed.feed.buttons ?: defaultButtons,
            feed.item,
            state,
        )
    }

    private val imageFlow = dataFlow.map { (cached, loaded) ->
        (loaded?.getOrNull() ?: cached?.getOrNull())?.feed?.background
    }.stateIn(scope, Lazily, null)

    val backgroundImageFlow = imageFlow.mapLatest { image ->
        image?.loadDrawable(app.context)
    }.flowOn(Dispatchers.IO).stateIn(scope, Lazily, null)

    val cachedFeedTypeFlow =
        combineTransformLatest(cachedDataFlow, feedSortState, searchClickedFlow) { _ ->
            emit(null)
            val cached = cachedDataFlow.value ?: return@combineTransformLatest
            emit(getFeedSourceData(cached))
        }.stateIn(scope, Lazily, null)

    val loadedFeedTypeFlow =
        combineTransformLatest(loadedDataFlow, feedSortState, searchClickedFlow) { _ ->
            emit(null)
            val loaded = loadedDataFlow.value ?: return@combineTransformLatest
            emit(getFeedSourceData(loaded))
        }.stateIn(scope, Lazily, null)

    val pagingFlow =
        cachedFeedTypeFlow.combineTransformLatest(loadedFeedTypeFlow) { cached, loaded ->
            emitAll(PagedSource(loaded, cached).flow)
        }.cachedIn(scope)

    private suspend fun getFeedSourceData(
        result: Result<State<Feed.Data<Shelf>>?>
    ): Result<PagedData<FeedType>> = withContext(Dispatchers.IO) {
        val tabId = selectedTabFlow.value?.id
        val data = if (feedSortState.value != null || searchQuery != null) {
            result.mapCatching { state ->
                state ?: return@mapCatching PagedData.empty()
                val extensionId = state.extensionId
                val data = state.feed.pagedData

                val sortState = feedSortState.value
                val query = searchQuery
                var shelves = data.loadTill(2000)
                shelves = if (sortState?.feedSort != null || query != null)
                    shelves.flatMap { shelf ->
                        when (shelf) {
                            is Shelf.Category -> listOf(shelf)
                            is Shelf.Item -> listOf(shelf)
                            is Shelf.Lists.Categories -> shelf.list
                            is Shelf.Lists.Items -> shelf.list.map { it.toShelf() }
                            is Shelf.Lists.Tracks -> shelf.list.map { it.toShelf() }
                        }
                    }
                else shelves
                loadedShelves.value = shelves
                if (sortState != null) {
                    shelves = sortState.feedSort?.sorter?.invoke(app.context, shelves) ?: shelves
                    if (sortState.reversed) shelves = shelves.reversed()
                    if (sortState.save)
                        app.context.saveToCache("$extensionId-$feedId-$tabId", sortState, "sort")
                }
                if (query != null) {
                    shelves = shelves.searchBy(query) {
                        listOf(it.title)
                    }.map { it.second }
                }
                PagedData.Single {
                    shelves.toFeedType(
                        feedId,
                        extensionId,
                        state.item,
                        tabId,
                        noVideos
                    )
                }
            }
        } else result.mapCatching { state ->
            state ?: return@mapCatching PagedData.empty()
            val extId = state.extensionId
            val data = state.feed.pagedData
            data.loadPage(null)
            var start = 0L
            data.map { result ->
                result.map {
                    val list = it.toFeedType(feedId, extId, state.item, tabId, noVideos, start)
                    start += list.size
                    list
                }.getOrThrow()
            }
        }
        data
    }

    private suspend fun <T : Any> PagedData<T>.loadTill(limit: Long): List<T> {
        val list = mutableListOf<T>()
        var page = loadPage(null)
        list.addAll(page.data)
        while (page.continuation != null && list.size < limit) {
            page = loadPage(page.continuation)
            list.addAll(page.data)
        }
        return list
    }

    val isRefreshingFlow = loadedFeedTypeFlow.map {
        loadedFeedTypeFlow.value == null
    }.stateIn(scope, Lazily, true)

    fun selectTab(extensionId: String?, pos: Int) {
        val state = stateFlow.value.run { second?.getOrNull() ?: first?.getOrNull() }
        val tab = state?.feed?.tabs?.getOrNull(pos)
            ?.takeIf { state.extensionId == extensionId }
        app.context.saveToCache(feedId, tab?.id, "selected_tab")
        selectedTabFlow.value = tab
    }

    fun refresh() = scope.launch { refreshFlow.emit(Unit) }

    init {
        scope.launch(Dispatchers.IO) {
            listOfNotNull(current, refreshFlow, usersFlow, extraLoadFlow)
                .merge().debounce(100L).collectLatest {
                    cachedState.value = null
                    loadedState.value = null
                    extensionLoader.current.value ?: return@collectLatest
                    cachedState.value = runCatching { cached(extensionLoader) }
                    loadedState.value = runCatching { load(extensionLoader) }
                }
        }
        scope.launch {
            stateFlow.collect { result ->
                val feed = result.run { second?.getOrNull() ?: first?.getOrNull() }?.feed?.tabs
                selectedTabFlow.value = if (feed == null) null else {
                    val last = app.context.getFromCache<String>(feedId, "selected_tab")
                    feed.find { it.id == last } ?: feed.firstOrNull()
                }
            }
        }
    }

    data class State<T>(
        val extensionId: String,
        val item: EchoMediaItem?,
        val feed: T,
    )

    fun onSearchClicked() = scope.launch { searchClickedFlow.emit(Unit) }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\FeedFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed

import android.os.Bundle
import android.view.View
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.fragment.app.activityViewModels
import androidx.fragment.app.commit
import androidx.fragment.app.replace
import androidx.fragment.app.viewModels
import androidx.lifecycle.ViewModel
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.databinding.FragmentGenericCollapsableBinding
import dev.brahmkshatriya.echo.databinding.FragmentRecyclerWithRefreshBinding
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtensionOrThrow
import dev.brahmkshatriya.echo.extensions.cache.Cached
import dev.brahmkshatriya.echo.extensions.cache.Cached.savingFeed
import dev.brahmkshatriya.echo.ui.common.GridAdapter.Companion.configureGridLayout
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyContentInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.configure
import dev.brahmkshatriya.echo.ui.extensions.login.LoginFragment.Companion.bind
import dev.brahmkshatriya.echo.ui.feed.FeedAdapter.Companion.getFeedAdapter
import dev.brahmkshatriya.echo.ui.feed.FeedAdapter.Companion.getTouchHelper
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener.Companion.getFeedListener
import dev.brahmkshatriya.echo.ui.main.MainFragment.Companion.applyPlayerBg
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.FastScrollerHelper
import kotlinx.coroutines.flow.combine
import org.koin.androidx.viewmodel.ext.android.viewModel

class FeedFragment : Fragment(R.layout.fragment_generic_collapsable) {
    companion object {
        fun getBundle(title: String, subtitle: String?) = Bundle().apply {
            putString("title", title)
            putString("subtitle", subtitle)
        }
    }

    class VM : ViewModel() {
        var initialized = false
        var extensionId: String? = null
        var feedId: String? = null
        var feed: Feed<Shelf>? = null
    }

    private val activityVm by activityViewModels<VM>()
    private val vm by viewModels<VM>()

    private val feedData by lazy {
        val feedViewModel by viewModel<FeedViewModel>()
        if (!vm.initialized) {
            vm.initialized = true
            vm.extensionId = activityVm.extensionId
            vm.feedId = activityVm.feedId
            vm.feed = activityVm.feed
        }
        feedViewModel.getFeedData(
            vm.feedId ?: "",
            cached = {
                val extId = vm.extensionId!!
                val feed = Cached.getFeedShelf(app, extId, vm.feedId!!)
                FeedData.State(extId, null, feed.getOrThrow())
            }
        ) {
            val extension = music.getExtensionOrThrow(vm.extensionId)
            val feed = savingFeed(app, extension, vm.feedId!!, vm.feed!!)
            FeedData.State(extension.id, null, feed)
        }
    }

    private val title by lazy { arguments?.getString("title")!! }
    private val subtitle by lazy { arguments?.getString("subtitle") }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        val binding = FragmentGenericCollapsableBinding.bind(view)
        binding.bind(this, false)
        binding.extensionIcon.isVisible = false
        binding.toolBar.title = title
        binding.toolBar.subtitle = subtitle
        applyPlayerBg(view) {
            mainBgDrawable.combine(feedData.backgroundImageFlow) { a, b -> b ?: a }
        }
        if (savedInstanceState == null) childFragmentManager.commit {
            replace<Actual>(R.id.genericFragmentContainer, null, arguments)
        }
    }

    class Actual() : Fragment(R.layout.fragment_recycler_with_refresh) {
        private val feedData by lazy {
            val vm by requireParentFragment().viewModel<FeedViewModel>()
            vm.feedDataMap.values.first()
        }

        private val listener by lazy { requireParentFragment().getFeedListener() }
        private val feedAdapter by lazy {
            getFeedAdapter(feedData, listener)
        }

        override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
            val binding = FragmentRecyclerWithRefreshBinding.bind(view)
            applyInsets {
                binding.recyclerView.applyContentInsets(it, 20, 8, 16)
            }
            FastScrollerHelper.applyTo(binding.recyclerView)
            configureGridLayout(
                binding.recyclerView,
                feedAdapter.withLoading(this)
            )
            getTouchHelper(listener).attachToRecyclerView(binding.recyclerView)
            binding.swipeRefresh.run {
                configure()
                setOnRefreshListener { feedData.refresh() }
                observe(feedData.isRefreshingFlow) {
                    isRefreshing = it
                }
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\FeedLoadingAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.fragment.app.Fragment
import androidx.paging.LoadState
import dev.brahmkshatriya.echo.databinding.ItemShelfErrorBinding
import dev.brahmkshatriya.echo.databinding.ItemShelfLoginRequiredBinding
import dev.brahmkshatriya.echo.databinding.ItemShelfNotLoadingBinding
import dev.brahmkshatriya.echo.extensions.cache.Cached
import dev.brahmkshatriya.echo.extensions.exceptions.AppException
import dev.brahmkshatriya.echo.ui.common.ExceptionUtils.getFinalTitle
import dev.brahmkshatriya.echo.ui.common.ExceptionUtils.getMessage
import dev.brahmkshatriya.echo.ui.common.ExceptionUtils.openLoginException
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.ui.common.PagedSource
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimLoadStateAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class FeedLoadingAdapter(
    val listener: Listener? = null,
    val loadingAdapter: (ViewGroup) -> ViewHolder,
) : ScrollAnimLoadStateAdapter<FeedLoadingAdapter.ViewHolder>(), GridAdapter {

    interface Listener {
        fun onRetry()
        fun onError(view: View, error: Throwable)
        fun onLoginRequired(view: View, error: AppException.LoginRequired)
    }

    abstract class ViewHolder(val view: View) : ScrollAnimViewHolder(view) {
        open fun bind(loadState: LoadState) {}
    }

    data class NotLoading(
        val inflater: LayoutInflater,
        val parent: ViewGroup,
        val listener: Listener?,
        val binding: ItemShelfNotLoadingBinding =
            ItemShelfNotLoadingBinding.inflate(inflater, parent, false)
    ) : ViewHolder(binding.root) {
        override fun bind(loadState: LoadState) {
            binding.retry.setOnClickListener {
                listener?.onRetry()
            }
        }
    }

    data class Error(
        val inflater: LayoutInflater,
        val parent: ViewGroup,
        val listener: Listener?,
        val binding: ItemShelfErrorBinding =
            ItemShelfErrorBinding.inflate(inflater, parent, false)
    ) : ViewHolder(binding.root) {
        override fun bind(loadState: LoadState) {
            loadState as LoadState.Error
            val throwable = loadState.error
            binding.error.run {
                transitionName = throwable.hashCode().toString()
                text = context.getFinalTitle(throwable)
            }
            binding.errorView.setOnClickListener {
                listener?.onError(binding.error, throwable)
            }
            binding.retry.setOnClickListener {
                listener?.onRetry()
            }
        }
    }

    data class LoginRequired(
        val inflater: LayoutInflater,
        val parent: ViewGroup,
        val listener: Listener?,
        val binding: ItemShelfLoginRequiredBinding
        = ItemShelfLoginRequiredBinding.inflate(inflater, parent, false)
    ) : ViewHolder(binding.root) {
        override fun bind(loadState: LoadState) {
            val error = (loadState as LoadState.Error).error
            val appError = error as AppException.LoginRequired
            binding.error.run {
                text = context.getFinalTitle(appError)
            }
            binding.login.transitionName = appError.hashCode().toString()
            binding.login.setOnClickListener {
                listener?.onLoginRequired(it, appError)
            }
        }
    }

    override fun onCreateViewHolder(parent: ViewGroup, loadState: LoadState): ViewHolder {
        val inflater = LayoutInflater.from(parent.context)
        return when (getStateViewType(loadState)) {
            0 -> loadingAdapter(parent)
            1 -> NotLoading(inflater, parent, listener)
            2 -> Error(inflater, parent, listener)
            3 -> LoginRequired(inflater, parent, listener)
            else -> throw IllegalStateException()
        }
    }

    override fun getStateViewType(loadState: LoadState): Int {
        return when (loadState) {
            is LoadState.Loading -> 0
            is LoadState.NotLoading -> 1
            is LoadState.Error -> {
                when (loadState.error) {
                    is AppException.LoginRequired -> 3
                    is PagedSource.LoadingException -> 0
                    is Cached.NotFound -> 1
                    else -> 2
                }
            }
        }
    }

    override fun onBindViewHolder(holder: ViewHolder, loadState: LoadState) {
        super.onBindViewHolder(holder, loadState)
        holder.bind(loadState)
    }

    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) = count

    companion object {
        fun Fragment.createListener(retry: () -> Unit) =
            object : Listener {
                override fun onRetry() {
                    retry()
                }

                override fun onError(view: View, error: Throwable) {
                    requireActivity().getMessage(error, view).action?.handler?.invoke()
                }

                override fun onLoginRequired(view: View, error: AppException.LoginRequired) {
                    requireActivity().openLoginException(error, view)
                }
            }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\FeedSort.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed

import android.content.Context
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Album
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.ui.feed.FeedSort.entries
import dev.brahmkshatriya.echo.ui.media.MediaHeaderAdapter.Companion.toTrackString
import kotlinx.serialization.Serializable

fun getSorts(data: List<Shelf>): List<FeedSort> {
    return entries.filter { it.shouldBeVisible(data) != null }
}

private fun Shelf.title() = when (this) {
    is Shelf.Category -> this.title
    is Shelf.Item -> this.media.title
    is Shelf.Lists<*> -> null
}

private fun Shelf.subtitle() = when (this) {
    is Shelf.Category -> this.subtitle
    is Shelf.Item -> this.media.subtitle
    is Shelf.Lists<*> -> null
}

private fun Shelf.duration() = when (this) {
    is Shelf.Category -> null
    is Shelf.Item -> when (val item = this.media) {
        is Track -> item.duration
        is Album -> item.duration
        is Playlist -> item.duration
        else -> null
    }

    is Shelf.Lists<*> -> null
}

private fun Shelf.date() = when (this) {
    is Shelf.Category -> null
    is Shelf.Item -> when (val item = this.media) {
        is Track -> item.releaseDate
        is Album -> item.releaseDate
        is Playlist -> item.creationDate
        else -> null
    }

    is Shelf.Lists<*> -> null
}

private fun Shelf.dateAdded() = when (this) {
    is Shelf.Category -> null
    is Shelf.Item -> when (val item = this.media) {
        is Track -> item.playlistAddedDate
        else -> null
    }

    is Shelf.Lists<*> -> null
}

private fun Shelf.artists() = when (this) {
    is Shelf.Category -> null
    is Shelf.Item -> when (val item = this.media) {
        is Track -> item.artists
        is EchoMediaItem.Lists -> item.artists
        else -> null
    }

    is Shelf.Lists<*> -> null
}

private fun Shelf.album() = when (this) {
    is Shelf.Category -> null
    is Shelf.Item -> when (val item = this.media) {
        is Track -> item.album
        else -> null
    }

    is Shelf.Lists<*> -> null
}

private fun Shelf.trackCount() = when (this) {
    is Shelf.Category -> null
    is Shelf.Item -> when (val item = this.media) {
        is EchoMediaItem.Lists -> item.trackCount
        else -> null
    }

    is Shelf.Lists<*> -> null
}

private fun Shelf.ifListItem(): EchoMediaItem.Lists? = when (this) {
    is Shelf.Category -> null
    is Shelf.Item -> when (media) {
        is EchoMediaItem.Lists -> media as EchoMediaItem.Lists
        else -> null
    }

    is Shelf.Lists<*> -> null
}

private fun Shelf.copy(subtitle: String) = when (this) {
    is Shelf.Category -> this.copy(subtitle = subtitle)
    is Shelf.Item -> this.copy(media = this.media.copyMediaItem(subtitle = subtitle))
    is Shelf.Lists<*> -> throw IllegalStateException()
}

enum class FeedSort(
    val title: Int,
    val sorter: Context.(List<Shelf>) -> List<Shelf>
) {
    Title(R.string.sort_title, { list -> list.sortedBy { it.title() } }),
    Subtitle(R.string.sort_subtitle, { list -> list.sortedBy { it.subtitle() } }),
    Duration(R.string.sort_duration, { list ->
        list.sortedBy { it.duration() }
    }),
    Date(R.string.sort_date, { list ->
        list.sortedBy { it.date() }
            .filter { it.date() != null }
            .map { it.copy(subtitle = it.date().toString()) }
    }),
    DateAdded(R.string.sort_date_added, { list ->
        list.sortedBy { it.date() }
            .filter { it.date() != null }
            .map { it.copy(subtitle = it.date().toString()) }
    }),
    Artists(R.string.artists, { list ->
        list.flatMap { shelf ->
            shelf.artists().orEmpty().map {
                it to shelf.copy(subtitle = it.name)
            }
        }.sortedBy { it.first.name.lowercase() }.groupBy { it.first.id }
            .values.flatMap { it -> it.map { it.second } }
    }),
    Album(R.string.albums, { list ->
        list.flatMap { shelf ->
            shelf.album()?.let { album ->
                listOf(shelf.copy(subtitle = album.title))
            } ?: emptyList()
        }.sortedBy { it.subtitle() }
    }),
    Tracks(R.string.tracks, { list ->
        list.sortedBy { it.trackCount() }
            .filter { it.trackCount() != null }
            .map { it.copy(subtitle = it.ifListItem()?.toTrackString(this) ?: "???") }
    })
    ;

    fun shouldBeVisible(data: List<Shelf>): FeedSort? {
        val take = when (this) {
            Title -> data.any { it.title()?.isNotEmpty() ?: false }
            Subtitle -> data.any { it.subtitle()?.isNotEmpty() ?: false }
            Date -> data.any { it.date() != null }
            DateAdded -> data.any { it.dateAdded() != null }
            Duration -> data.any { it.duration() != null }
            Artists -> data.any { it.artists()?.isNotEmpty() ?: false }
            Album -> data.mapNotNull { it.album() }.toSet().size > 1
            Tracks -> data.any { it.trackCount() != null }
        }
        return if (take) this else null
    }

    @Serializable
    data class State(
        val feedSort: FeedSort? = null,
        val reversed: Boolean = false,
        val save: Boolean = false,
    )
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\FeedSortBottomSheet.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed

import android.content.DialogInterface
import android.os.Bundle
import android.text.TextUtils
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.os.bundleOf
import androidx.core.view.isVisible
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import com.google.android.material.chip.Chip
import dev.brahmkshatriya.echo.databinding.DialogSortBinding
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import org.koin.androidx.viewmodel.ext.android.viewModel

class FeedSortBottomSheet : BottomSheetDialogFragment() {

    private val feedData by lazy {
        val vm by requireParentFragment().viewModel<FeedViewModel>()
        val id = requireArguments().getString("id")!!
        vm.feedDataMap[id]!!
    }
    private val loadedShelves by lazy { feedData.loadedShelves }
    private val sortState by lazy { feedData.feedSortState }

    private var binding by autoCleared<DialogSortBinding>()
    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
    ): View {
        binding = DialogSortBinding.inflate(inflater, container, false)
        return binding.root
    }

    private var selectedFeedSort: FeedSort? = null
    private fun applySorts() {
        val list = loadedShelves.value ?: listOf()
        val state = sortState.value
        selectedFeedSort = state?.feedSort
        val available = getSorts(list)
        val checked = available.indexOf(state?.feedSort)
        binding.sortChipGroup.run {
            removeAllViews()
            available.forEachIndexed { index, t ->
                val chip = Chip(context)
                chip.id = index
                chip.text = getString(t.title)
                chip.ellipsize = TextUtils.TruncateAt.MIDDLE
                chip.isCheckable = true
                addView(chip)
                if (index == checked) check(chip.id)
            }
            setOnCheckedStateChangeListener { _, checkedIds ->
                selectedFeedSort = available.getOrNull(checkedIds.firstOrNull() ?: -1)
            }
        }
        binding.filter.isVisible = false
        binding.filterGroup.isVisible = false
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        observe(loadedShelves) {
            binding.progressIndicator.isVisible = it == null
            applySorts()
        }
        observe(sortState) {
            applySorts()
            binding.saveCheckbox.isChecked = it?.save ?: false
            binding.reversedSwitch.isChecked = it?.reversed ?: false
        }
        binding.saveContainer.setOnClickListener {
            binding.saveCheckbox.isChecked = !binding.saveCheckbox.isChecked
        }
        binding.reversedContainer.setOnClickListener {
            binding.reversedSwitch.isChecked = !binding.reversedSwitch.isChecked
        }
        binding.apply.setOnClickListener {
            sortState.value = FeedSort.State(
                feedSort = selectedFeedSort,
                reversed = binding.reversedSwitch.isChecked,
                save = binding.saveCheckbox.isChecked
            )
            dismiss()
        }
        binding.topAppBar.setNavigationOnClickListener {
            dismiss()
        }
        binding.topAppBar.setOnMenuItemClickListener {
            sortState.value = FeedSort.State()
            dismiss()
            true
        }
    }

    override fun onDismiss(dialog: DialogInterface) {
        super.onDismiss(dialog)
        parentFragmentManager.setFragmentResult("shelfSort", Bundle().apply {
            putBoolean("changed", true)
        })
    }

    companion object {
        fun newInstance(id: String) = FeedSortBottomSheet().apply {
            arguments = bundleOf("id" to id)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\FeedType.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed

import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedExtension.Companion.EXTENSION_ID
import kotlinx.serialization.ExperimentalSerializationApi
import kotlinx.serialization.Serializable
import kotlinx.serialization.Transient
import kotlinx.serialization.json.JsonClassDiscriminator

@OptIn(ExperimentalSerializationApi::class)
@JsonClassDiscriminator("clazzType")
@Serializable
sealed interface FeedType {

    enum class Enum {
        Header, HorizontalList,
        Category, CategoryGrid,
        Media, MediaGrid,
        Video, VideoHorizontal,
    }

    val feedId: String
    val id: String
    val type: Enum
    val extId: String
    val extras: Map<String, String>?

    val extensionId: String
        get() = extras?.let {
            if (it["cached"] == "true") it[EXTENSION_ID] else null
        } ?: extId

    val context: EchoMediaItem?
    val tabId: String?

    @Serializable
    data class Header(
        override val feedId: String,
        override val extId: String,
        override val context: EchoMediaItem?,
        override val tabId: String?,
        override val id: String,
        val title: String,
        val subtitle: String? = null,
        @Transient val more: Feed<Shelf>? = null,
        val tracks: List<Track>? = null,
    ) : FeedType {
        override val type = Enum.Header
        override val extras: Map<String, String>? = null
    }

    @Serializable
    data class Category(
        override val feedId: String,
        override val extId: String,
        override val context: EchoMediaItem?,
        override val tabId: String?,
        val shelf: Shelf.Category,
        override val type: Enum = Enum.Category,
    ) : FeedType {
        override val id = shelf.id
        override val extras: Map<String, String>? = shelf.extras
    }

    @Serializable
    data class Media(
        override val feedId: String,
        override val extId: String,
        override val context: EchoMediaItem?,
        override val tabId: String?,
        val item: EchoMediaItem,
        val number: Long?,
    ) : FeedType {
        override val id = item.id
        override val type: Enum = Enum.Media
        override val extras: Map<String, String>? = item.extras
    }

    @Serializable
    data class Video(
        override val feedId: String,
        override val extId: String,
        override val context: EchoMediaItem?,
        override val tabId: String?,
        val item: Track,
        override val type: Enum = Enum.Video,
    ) : FeedType {
        override val id = item.id
        override val extras: Map<String, String>? = item.extras
    }

    @Serializable
    data class MediaGrid(
        override val feedId: String,
        override val extId: String,
        override val context: EchoMediaItem?,
        override val tabId: String?,
        val item: EchoMediaItem,
        val number: Int? = null,
    ) : FeedType {
        override val id = item.id
        override val type: Enum = Enum.MediaGrid
        override val extras: Map<String, String>? = item.extras
    }

    @Serializable
    data class HorizontalList(
        override val feedId: String,
        override val extId: String,
        override val context: EchoMediaItem?,
        override val tabId: String?,
        val shelf: Shelf.Lists<*>,
    ) : FeedType {
        override val id = shelf.id
        override val type = Enum.HorizontalList
        override val extras: Map<String, String>? = shelf.extras
    }

    companion object {
        fun List<Shelf>.toFeedType(
            feedId: String,
            extId: String,
            context: EchoMediaItem?,
            tabId: String?,
            noVideos: Boolean = false,
            start: Long = 0,
        ): List<FeedType> = mapIndexed { index, shelf ->

            when (shelf) {
                is Shelf.Category -> if (shelf.feed == null) listOf(
                    Header(
                        feedId, extId, context, tabId, shelf.id, shelf.title, shelf.subtitle,
                    )
                ) else listOf(Category(feedId, extId, context, tabId, shelf))

                is Shelf.Item -> when (val item = shelf.media) {
                    is Track -> if (!noVideos) when (item.type) {
                        Track.Type.Video -> listOf(Video(feedId, extId, context, tabId, item))
                        Track.Type.HorizontalVideo -> listOf(
                            Video(feedId, extId, context, tabId, item, Enum.VideoHorizontal)
                        )

                        else -> listOf(Media(feedId, extId, context, tabId, item, null))
                    } else {
                        val index = start + index
                        listOf(Media(feedId, extId, context, tabId, item, index))
                    }

                    else -> listOf(Media(feedId, extId, context, tabId, item, null))
                }

                is Shelf.Lists<*> -> listOf(
                    Header(
                        feedId, extId, context, tabId,
                        shelf.id, shelf.title, shelf.subtitle, shelf.more,
                        if (shelf is Shelf.Lists.Tracks) shelf.list else null
                    )
                ) + if (shelf.type == Shelf.Lists.Type.Linear) listOf(
                    HorizontalList(feedId, extId, context, tabId, shelf)
                )
                else when (shelf) {
                    is Shelf.Lists.Categories -> shelf.list.map {
                        Category(feedId, extId, context, tabId, it, Enum.CategoryGrid)
                    }

                    is Shelf.Lists.Items -> shelf.list.map {
                        MediaGrid(feedId, extId, context, tabId, it)
                    }

                    is Shelf.Lists.Tracks -> shelf.list.mapIndexed { index, item ->
                        MediaGrid(feedId, extId, context, tabId, item, index + 1)
                    }
                }
            }
        }.flatten()
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\FeedViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.merge

class FeedViewModel(
    val app: App,
    private val extensionLoader: ExtensionLoader,
) : ViewModel() {
    val feedDataMap = hashMapOf<String, FeedData>()
    fun getFeedData(
        id: String,
        buttons: Feed.Buttons = Feed.Buttons(),
        noVideos: Boolean = false,
        vararg extraLoadFlow: Flow<*>,
        cached: suspend ExtensionLoader.() -> FeedData.State<Feed<Shelf>>? = { null },
        loader: suspend ExtensionLoader.() -> FeedData.State<Feed<Shelf>>?
    ): FeedData {
        return feedDataMap.getOrPut(id) {
            FeedData(
                feedId = id,
                scope = viewModelScope,
                app = app,
                extensionLoader = extensionLoader,
                cached = cached,
                load = loader,
                defaultButtons = buttons,
                noVideos = noVideos,
                extraLoadFlow = extraLoadFlow.toList().merge(),
            )
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\TabsAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.view.children
import androidx.core.view.doOnLayout
import androidx.core.view.isVisible
import com.google.android.material.button.MaterialButton
import com.google.android.material.button.MaterialButtonGroup
import dev.brahmkshatriya.echo.databinding.ItemTabBinding
import dev.brahmkshatriya.echo.databinding.ItemTabContainerBinding
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimRecyclerAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class TabsAdapter<T>(
    private val getTitle: T.() -> String,
    private val onTabSelected: (View, Int, T) -> Unit
) : ScrollAnimRecyclerAdapter<TabsAdapter.ViewHolder>(), GridAdapter {
    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) = count
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) = ViewHolder(parent)
    override fun getItemCount() = 1

    var data: List<T> = emptyList()
        set(value) {
            field = value
            notifyItemChanged(0)
        }

    var selected = -1
        set(value) {
            field = value
            parent?.let { apply(it) }
        }

    var parent: MaterialButtonGroup? = null
    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        super.onBindViewHolder(holder, position)
        val parent = holder.binding.buttonGroup
        this.parent = parent
        apply(parent)
        parent.doOnLayout {
            if (selected < 0) return@doOnLayout
            val scrollX = parent.children.filter { it.isVisible }
                .take(selected).sumOf { it.width }
            holder.binding.root.scrollTo(scrollX, 0)
        }
    }

    fun apply(parent: MaterialButtonGroup) {
        val tabs = data
        parent.isVisible = tabs.isNotEmpty()
        if (tabs.isEmpty()) return
        val toKeep = tabs.size - parent.childCount
        val inflater = LayoutInflater.from(parent.context)
        if (toKeep > 0) repeat(toKeep) {
            parent.addView(ItemTabBinding.inflate(inflater, parent, false).root)
        } else if (toKeep < 0) repeat(-toKeep) {
            parent.getChildAt(tabs.size + it).isVisible = false
        }
        tabs.indices.forEach { i ->
            val tab = tabs[i]
            val button = parent.getChildAt(i) as MaterialButton
            button.apply {
                isVisible = true
                val title = getTitle(tab)
                if (text.toString() != title) text = title
                setOnClickListener(null)
                isChecked = i == selected
                setOnClickListener {
                    if (i == selected) isChecked = true
                    else onTabSelected(it, i, tab)
                }
            }
        }
    }

    class ViewHolder(
        parent: ViewGroup,
        val binding: ItemTabContainerBinding = ItemTabContainerBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        )
    ) : ScrollAnimViewHolder(binding.root) {
        init {
            binding.buttonGroup.removeAllViews()
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\viewholders\CategoryViewHolder.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed.viewholders

import android.graphics.Color
import android.graphics.Color.HSVToColor
import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.cardview.widget.CardView
import androidx.core.content.res.ResourcesCompat
import androidx.core.graphics.toColorInt
import androidx.core.view.isVisible
import com.google.android.material.color.MaterialColors
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.databinding.ItemShelfCategoryBinding
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener
import dev.brahmkshatriya.echo.ui.feed.FeedType
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadInto
import dev.brahmkshatriya.echo.utils.ui.UiUtils.isNightMode
import kotlin.math.roundToInt

class CategoryViewHolder(
    parent: ViewGroup,
    listener: FeedClickListener,
    private val binding: ItemShelfCategoryBinding = ItemShelfCategoryBinding.inflate(
        LayoutInflater.from(parent.context), parent, false
    )
) : FeedViewHolder<FeedType.Category>(binding.root) {

    private var feed: FeedType.Category? = null

    init {
        binding.root.setOnClickListener {
            listener.openFeed(
                it,
                feed?.extensionId,
                feed?.id,
                feed?.shelf?.title,
                feed?.shelf?.subtitle,
                feed?.shelf?.feed
            )
        }
    }

    override fun bind(feed: FeedType.Category) {
        this.feed = feed
        val category = feed.shelf
        binding.bind(category)
    }

    companion object {
        fun ItemShelfCategoryBinding.bind(category: Shelf.Category) {
            title.text = category.title
            subtitle.text = category.subtitle
            subtitle.isVisible = !category.subtitle.isNullOrEmpty()
            icon.isVisible = category.image != null
            category.image.loadInto(icon)
            root.run {
                val color = applyBackground(category.backgroundColor)
                    ?: ResourcesCompat.getColor(resources, R.color.amoled_fg_semi, null)
                setCardBackgroundColor(color)
            }
        }

        fun CardView.applyBackground(hex: String?): Int? {
            val hsv = runCatching { hex?.toColorInt() }.getOrNull()?.run {
                val hsv = FloatArray(3)
                Color.colorToHSV(this, hsv)
                hsv
            } ?: return null
            val actualSat = (hsv[1] * 0.25).roundToInt()
            val sat = if (context.isNightMode()) (35f + actualSat) / 100 else 0.2f
            val value = if (context.isNightMode()) 0.5f else 0.9f
            val color = HSVToColor(floatArrayOf(hsv[0], sat, value))
            val with = MaterialColors.getColor(this, androidx.appcompat.R.attr.colorPrimary)
            return MaterialColors.harmonize(color, with)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\viewholders\FeedViewHolder.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed.viewholders

import android.view.View
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.ui.feed.FeedType
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

sealed class FeedViewHolder<T : FeedType>(view: View) : ScrollAnimViewHolder(view) {
    abstract fun bind(feed: T)
    open fun canBeSwiped(): Boolean = false
    open fun onSwipe(): T? = null
    open fun onCurrentChanged(current: PlayerState.Current?) {}
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\viewholders\HeaderViewHolder.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed.viewholders

import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.core.view.isVisible
import dev.brahmkshatriya.echo.databinding.ItemShelfHeaderBinding
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener
import dev.brahmkshatriya.echo.ui.feed.FeedType

class HeaderViewHolder(
    parent: ViewGroup,
    listener: FeedClickListener,
    private val binding: ItemShelfHeaderBinding = ItemShelfHeaderBinding.inflate(
        LayoutInflater.from(parent.context), parent, false
    )
) : FeedViewHolder<FeedType.Header>(binding.root) {

    private var feed: FeedType.Header? = null

    init {
        binding.more.setOnClickListener {
            listener.openFeed(
                it,
                feed?.extensionId,
                feed?.id,
                feed?.title,
                feed?.subtitle,
                feed?.more
            )
        }
        binding.shuffle.setOnClickListener {
            listener.onPlayClicked(it, feed?.extensionId, feed?.context, feed?.tracks, true)
        }
    }

    override fun bind(feed: FeedType.Header) {
        this.feed = feed
        binding.title.text = feed.title
        binding.title.isVisible = feed.title.isNotEmpty()
        binding.subtitle.text = feed.subtitle
        binding.subtitle.isVisible = !feed.subtitle.isNullOrEmpty()
        binding.shuffle.isVisible = feed.tracks != null
        binding.more.isVisible = feed.more != null
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\viewholders\HorizontalListViewHolder.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed.viewholders

import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.core.view.updatePaddingRelative
import androidx.recyclerview.widget.DiffUtil
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.ListAdapter
import androidx.recyclerview.widget.RecyclerView
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.databinding.ItemShelfListsBinding
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener
import dev.brahmkshatriya.echo.ui.feed.FeedType
import dev.brahmkshatriya.echo.ui.feed.viewholders.shelf.ShelfType
import dev.brahmkshatriya.echo.ui.feed.viewholders.shelf.ShelfViewHolder
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.applyTranslationAndScaleAnimation
import dev.brahmkshatriya.echo.utils.ui.UiUtils.dpToPx

class HorizontalListViewHolder(
    parent: ViewGroup,
    listener: FeedClickListener,
    pool: RecyclerView.RecycledViewPool,
    private val binding: ItemShelfListsBinding = ItemShelfListsBinding.inflate(
        LayoutInflater.from(parent.context), parent, false
    )
) : FeedViewHolder<FeedType.HorizontalList>(binding.root) {
    val adapter = Adapter(listener)
    val layoutManager = LinearLayoutManager(parent.context, RecyclerView.HORIZONTAL, false)

    init {
        binding.root.setRecycledViewPool(pool)
        binding.root.layoutManager = layoutManager
    }

    override fun bind(feed: FeedType.HorizontalList) {
        val endPadding = if (feed.shelf is Shelf.Lists.Tracks) 8 else 20
        binding.root.updatePaddingRelative(end = endPadding.dpToPx(binding.root.context))
        adapter.tracks = feed.shelf.list.filterIsInstance<Track>()
        adapter.submitList(feed.shelf.toShelfType(feed.extensionId, feed.context, feed.tabId)) {
            binding.root.adapter = adapter
        }
    }

    override fun onCurrentChanged(current: PlayerState.Current?) {
        adapter.onCurrentChanged(current)
    }

    fun Shelf.Lists<*>.toShelfType(
        extensionId: String, context: EchoMediaItem?, tabId: String?
    ) = when (this) {
        is Shelf.Lists.Items -> list.map { ShelfType.Media(extensionId, context, tabId, it) }
        is Shelf.Lists.Categories -> list.map {
            ShelfType.Category(extensionId, context, tabId, it)
        }

        is Shelf.Lists.Tracks -> list.chunked(3).mapIndexed { index, it ->
            ShelfType.ThreeTracks(
                extensionId, context, tabId, index,
                Triple(
                    it[0],
                    it.getOrNull(1),
                    it.getOrNull(2)
                )
            )
        }
    }

    object DiffCallback : DiffUtil.ItemCallback<ShelfType>() {
        override fun areItemsTheSame(oldItem: ShelfType, newItem: ShelfType): Boolean {
            if (oldItem.extensionId != newItem.extensionId) return false
            if (oldItem.type != newItem.type) return false
            if (oldItem.id != newItem.id) return false
            return true
        }

        override fun areContentsTheSame(oldItem: ShelfType, newItem: ShelfType): Boolean {
            return oldItem == newItem
        }
    }

    class Adapter(
        private val listener: FeedClickListener
    ) : ListAdapter<ShelfType, ShelfViewHolder<*>>(DiffCallback) {
        var tracks: List<Track> = emptyList()
        override fun getItemViewType(position: Int) = currentList[position].type.ordinal
        override fun onCreateViewHolder(
            parent: ViewGroup, viewType: Int
        ) = when (ShelfType.Enum.entries[viewType]) {
            ShelfType.Enum.Category -> ShelfViewHolder.Category(parent, listener)
            ShelfType.Enum.Media -> ShelfViewHolder.Media(parent, listener)
            ShelfType.Enum.ThreeTracks -> ShelfViewHolder.ThreeTracks(
                parent, listener, { tracks }
            )
        }

        override fun onBindViewHolder(
            holder: ShelfViewHolder<*>, position: Int
        ) {
            holder.itemView.applyTranslationAndScaleAnimation(scrollAmountX)
            holder.scrollX = scrollAmountX
            when (holder) {
                is ShelfViewHolder.Category -> holder.bind(
                    position,
                    currentList.map { it as ShelfType.Category })

                is ShelfViewHolder.Media -> holder.bind(
                    position,
                    currentList.map { it as ShelfType.Media })

                is ShelfViewHolder.ThreeTracks -> holder.bind(
                    position,
                    currentList.map { it as ShelfType.ThreeTracks })
            }
            holder.onCurrentChanged(current)
        }

        var current: PlayerState.Current? = null

        override fun onViewDetachedFromWindow(holder: ShelfViewHolder<*>) {
            holder.onCurrentChanged(current)
        }

        override fun onViewAttachedToWindow(holder: ShelfViewHolder<*>) {
            holder.onCurrentChanged(current)
        }

        private var scrollAmountX: Int = 0
        private val scrollListener = object : RecyclerView.OnScrollListener() {
            override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: Int) {
                scrollAmountX = dx
            }
        }

        var recyclerView: RecyclerView? = null
        override fun onAttachedToRecyclerView(recyclerView: RecyclerView) {
            this.recyclerView = recyclerView
            recyclerView.addOnScrollListener(scrollListener)
        }

        override fun onDetachedFromRecyclerView(recyclerView: RecyclerView) {
            recyclerView.removeOnScrollListener(scrollListener)
            this.recyclerView = null
        }

        private fun onEachViewHolder(action: ShelfViewHolder<*>.() -> Unit) {
            recyclerView?.let { rv ->
                for (i in 0 until rv.childCount) {
                    val holder = rv.getChildViewHolder(rv.getChildAt(i)) as? ShelfViewHolder<*>
                    holder?.action()
                }
            }
        }

        fun onCurrentChanged(current: PlayerState.Current?) {
            this.current = current
            onEachViewHolder { onCurrentChanged(current) }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\viewholders\MediaGridViewHolder.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed.viewholders

import android.graphics.drawable.Animatable
import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.core.view.isVisible
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.databinding.ItemShelfMediaGridBinding
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.playback.PlayerState.Current.Companion.isPlaying
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener
import dev.brahmkshatriya.echo.ui.feed.FeedType
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.applyCover
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.subtitle

class MediaGridViewHolder(
    parent: ViewGroup,
    listener: FeedClickListener,
    getAllTracks: (FeedType) -> Pair<List<Track>, Int>,
    private val binding: ItemShelfMediaGridBinding = ItemShelfMediaGridBinding.inflate(
        LayoutInflater.from(parent.context), parent, false
    )
) : FeedViewHolder<FeedType.MediaGrid>(binding.root) {
    private var feed: FeedType.MediaGrid? = null

    init {
        binding.coverContainer.cover.clipToOutline = true
        binding.root.setOnClickListener {
            when (val item = feed?.item) {
                is Track -> {
                    if (item.isPlayable != Track.Playable.Yes) {
                        listener.onMediaClicked(it, feed?.extensionId, item, feed?.context)
                        return@setOnClickListener
                    }
                    val (tracks, pos) = getAllTracks(feed!!)
                    listener.onTracksClicked(it, feed?.extensionId, feed?.context, tracks, pos)
                }

                else -> listener.onMediaClicked(it, feed?.extensionId, item, feed?.context)
            }
        }
        binding.root.setOnLongClickListener {
            listener.onMediaLongClicked(
                it, feed?.extensionId, feed?.item,
                feed?.context, feed?.tabId, bindingAdapterPosition
            )
            true
        }
    }

    override fun bind(feed: FeedType.MediaGrid) = with(binding) {
        this@MediaGridViewHolder.feed = feed
        val item = feed.item
        val index = feed.number
        title.text = if (index == null) item.title
        else root.context.getString(R.string.n_dot_x, index + 1, item.title)
        val subtitleText = item.subtitle(root.context)
        subtitle.text = subtitleText
        subtitle.isVisible = !subtitleText.isNullOrBlank()
        coverContainer.run { applyCover(item, cover, listBg1, listBg2, icon) }
    }


    override fun onCurrentChanged(current: PlayerState.Current?) {
        val isPlaying = current.isPlaying(feed?.item?.id)
        binding.coverContainer.isPlaying.isVisible = isPlaying
        (binding.coverContainer.isPlaying.icon as Animatable).start()
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\viewholders\MediaViewHolder.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed.viewholders

import android.content.Context
import android.graphics.drawable.Animatable
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.view.ViewGroup.LayoutParams.WRAP_CONTENT
import android.widget.ImageView
import androidx.core.view.isVisible
import androidx.core.view.updateLayoutParams
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Album
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Radio
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.databinding.ItemShelfMediaBinding
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.playback.PlayerState.Current.Companion.isPlaying
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener
import dev.brahmkshatriya.echo.ui.feed.FeedType
import dev.brahmkshatriya.echo.ui.media.MediaHeaderAdapter.Companion.playableString
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadInto

class MediaViewHolder(
    parent: ViewGroup,
    listener: FeedClickListener,
    getAllTracks: (FeedType) -> Pair<List<Track>, Int>,
    private val binding: ItemShelfMediaBinding = ItemShelfMediaBinding.inflate(
        LayoutInflater.from(parent.context), parent, false
    ),
) : FeedViewHolder<FeedType.Media>(binding.root) {
    var feed: FeedType.Media? = null

    init {
        binding.coverContainer.cover.clipToOutline = true
        binding.root.setOnClickListener {
            when (val item = feed?.item) {
                is Track -> {
                    if (item.isPlayable != Track.Playable.Yes) {
                        listener.onMediaClicked(it, feed?.extensionId, item, feed?.context)
                        return@setOnClickListener
                    }
                    val (tracks, pos) = getAllTracks(feed!!)
                    listener.onTracksClicked(it, feed?.extensionId, feed?.context, tracks, pos)
                }

                else -> listener.onMediaClicked(it, feed?.extensionId, item, feed?.context)
            }
        }
        binding.root.setOnLongClickListener {
            listener.onMediaLongClicked(
                it, feed?.extensionId, feed?.item,
                feed?.context, feed?.tabId, bindingAdapterPosition
            )
            true
        }

        binding.more.setOnClickListener {
            listener.onMediaLongClicked(
                it, feed?.extensionId, feed?.item,
                feed?.context, feed?.tabId, bindingAdapterPosition
            )
        }
        binding.play.setOnClickListener {
            listener.onPlayClicked(
                it, feed?.extensionId, feed?.item, null, false
            )
        }
    }

    override fun bind(feed: FeedType.Media) {
        this.feed = feed
        binding.bind(feed.item, feed.number?.toInt())
    }

    override fun canBeSwiped() = feed?.item is Track
    override fun onSwipe() = feed

    override fun onCurrentChanged(current: PlayerState.Current?) {
        val isPlaying = current.isPlaying(feed?.item?.id)
        binding.coverContainer.isPlaying.isVisible = isPlaying
        (binding.coverContainer.isPlaying.icon as Animatable).start()
    }

    companion object {
        fun ItemShelfMediaBinding.bind(item: EchoMediaItem, index: Int? = null) {
            title.text = if (index == null) item.title
            else root.context.getString(R.string.n_dot_x, index + 1, item.title)
            val subtitleText = item.subtitle(root.context)
            subtitle.text = subtitleText
            subtitle.isVisible = !subtitleText.isNullOrBlank()
            coverContainer.run {
                applyCover(item, cover, listBg1, listBg2, icon)
                isPlaying.setBackgroundResource(
                    if (item is Artist) R.drawable.rounded_rectangle_cover_profile
                    else R.drawable.rounded_rectangle_cover
                )
            }
            play.isVisible = item !is Track
        }

        val EchoMediaItem.placeHolder
            get() = when (this) {
                is Track -> R.drawable.art_music
                is Artist -> R.drawable.art_artist
                is Album -> R.drawable.art_album
                is Playlist -> R.drawable.art_library_music
                is Radio -> R.drawable.art_sensors
            }

        val EchoMediaItem.icon
            get() = when (this) {
                is Track -> R.drawable.ic_music
                is Artist -> R.drawable.ic_artist
                is Album -> R.drawable.ic_album
                is Playlist -> R.drawable.ic_library_music
                is Radio -> R.drawable.ic_sensors
            }

        fun applyCover(
            item: EchoMediaItem,
            cover: ImageView,
            listBg1: View,
            listBg2: View,
            icon: ImageView,
        ) {
            icon.isVisible = when (item) {
                is Track, is Artist, is Album -> false
                else -> true
            }
            icon.setImageResource(item.icon)
            cover.setBackgroundResource(
                if (item is Artist) R.drawable.rounded_rectangle_cover_profile
                else R.drawable.rounded_rectangle_cover
            )
            val bgVisible = item is EchoMediaItem.Lists
            listBg1.isVisible = bgVisible
            listBg2.isVisible = bgVisible
            cover.updateLayoutParams {
                height = if (item is Artist) width else WRAP_CONTENT
            }
            item.cover.loadInto(cover, item.placeHolder)
        }

        fun EchoMediaItem.subtitle(context: Context) = when (this) {
            is Track -> playableString(context) ?: subtitleWithE
            else -> subtitleWithE
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\viewholders\VideoHorizontalViewHolder.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed.viewholders

import android.graphics.drawable.Animatable
import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.core.view.isVisible
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.databinding.ItemShelfVideoHorizontalBinding
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.playback.PlayerState.Current.Companion.isPlaying
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener
import dev.brahmkshatriya.echo.ui.feed.FeedType
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.icon
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.placeHolder
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.subtitle
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadInto

class VideoHorizontalViewHolder(
    parent: ViewGroup,
    listener: FeedClickListener,
    getAllTracks: (FeedType) -> Pair<List<Track>, Int>,
    private val binding: ItemShelfVideoHorizontalBinding = ItemShelfVideoHorizontalBinding.inflate(
        LayoutInflater.from(parent.context), parent, false
    )
) : FeedViewHolder<FeedType.Video>(binding.root) {
    var feed: FeedType.Video? = null

    init {
        binding.artistCover.clipToOutline = true
        binding.cover.clipToOutline = true
        binding.root.setOnClickListener {
            val track = feed?.item
            if (track?.isPlayable != Track.Playable.Yes) {
                listener.onMediaClicked(it, feed?.extensionId, track, feed?.context)
                return@setOnClickListener
            }
            val (tracks, pos) = getAllTracks(feed!!)
            listener.onTracksClicked(it, feed?.extensionId, feed?.context, tracks, pos)
        }
        binding.root.setOnLongClickListener {
            listener.onMediaLongClicked(
                it, feed?.extensionId, feed?.item,
                feed?.context, feed?.tabId, bindingAdapterPosition
            )
            true
        }
        binding.more.setOnClickListener {
            listener.onMediaLongClicked(
                it, feed?.extensionId, feed?.item,
                feed?.context, feed?.tabId, bindingAdapterPosition
            )
        }
    }

    override fun bind(feed: FeedType.Video) = with(binding) {
        this@VideoHorizontalViewHolder.feed = feed
        val track = feed.item
        title.text = track.title
        val sub = track.subtitle(root.context)
        subtitle.text = sub
        subtitle.isVisible = !sub.isNullOrBlank()
        track.cover.loadInto(binding.cover, track.placeHolder)
        val artist = track.artists.firstOrNull()
        artist?.cover.loadInto(binding.artistCover, artist?.icon)
        artistCover.isVisible = artist != null
    }

    override fun onCurrentChanged(current: PlayerState.Current?) {
        val isPlaying = current.isPlaying(feed?.item?.id)
        binding.isPlaying.isVisible = isPlaying
        (binding.isPlaying.icon as Animatable).start()
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\viewholders\VideoViewHolder.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed.viewholders

import android.graphics.drawable.Animatable
import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.core.view.isVisible
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.databinding.ItemShelfVideoBinding
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.playback.PlayerState.Current.Companion.isPlaying
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener
import dev.brahmkshatriya.echo.ui.feed.FeedType
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.icon
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.placeHolder
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.subtitle
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadInto

class VideoViewHolder(
    parent: ViewGroup,
    listener: FeedClickListener,
    getAllTracks: (FeedType) -> Pair<List<Track>, Int>,
    private val binding: ItemShelfVideoBinding = ItemShelfVideoBinding.inflate(
        LayoutInflater.from(parent.context), parent, false
    )
) : FeedViewHolder<FeedType.Video>(binding.root) {

    var feed: FeedType.Video? = null

    init {
        binding.artistCover.clipToOutline = true
        binding.cover.clipToOutline = true
        binding.root.setOnClickListener {
            val track = feed?.item
            if (track?.isPlayable != Track.Playable.Yes) {
                listener.onMediaClicked(it, feed?.extensionId, track, feed?.context)
                return@setOnClickListener
            }
            val (tracks, pos) = getAllTracks(feed!!)
            listener.onTracksClicked(it, feed?.extensionId, feed?.context, tracks, pos)
        }
        binding.root.setOnLongClickListener {
            listener.onMediaLongClicked(
                it, feed?.extensionId, feed?.item,
                feed?.context, feed?.tabId, bindingAdapterPosition
            )
            true
        }
        binding.more.setOnClickListener {
            listener.onMediaLongClicked(
                it, feed?.extensionId, feed?.item,
                feed?.context, feed?.tabId, bindingAdapterPosition
            )
        }
    }

    override fun bind(feed: FeedType.Video) = with(binding) {
        this@VideoViewHolder.feed = feed
        val track = feed.item
        title.text = track.title
        val sub = track.subtitle(root.context)
        subtitle.text = sub
        subtitle.isVisible = !sub.isNullOrBlank()
        track.cover.loadInto(binding.cover, track.placeHolder)
        val artist = track.artists.firstOrNull()
        artist?.cover.loadInto(binding.artistCover, artist?.icon)
        artistCover.isVisible = artist != null
    }

    override fun onCurrentChanged(current: PlayerState.Current?) {
        val isPlaying = current.isPlaying(feed?.item?.id)
        binding.isPlaying.isVisible = isPlaying
        (binding.isPlaying.icon as Animatable).start()
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\viewholders\shelf\ShelfType.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed.viewholders.shelf

import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Track

sealed interface ShelfType {
    enum class Enum {
        Category, Media, ThreeTracks
    }

    val extensionId: String
    val tabId: String?
    val type: Enum
    val id: String
    val context: EchoMediaItem?

    class Category(
        override val extensionId: String,
        override val context: EchoMediaItem?,
        override val tabId: String?,
        val category: Shelf.Category,
    ) : ShelfType {
        override val type = Enum.Category
        override val id = category.id
    }

    class Media(
        override val extensionId: String,
        override val context: EchoMediaItem?,
        override val tabId: String?,
        val media: EchoMediaItem,
    ) : ShelfType {
        override val type = Enum.Media
        override val id = media.id
    }

    class ThreeTracks(
        override val extensionId: String,
        override val context: EchoMediaItem?,
        override val tabId: String?,
        val number: Int?,
        val tracks: Triple<Track, Track?, Track?>,
    ) : ShelfType {
        override val type = Enum.ThreeTracks
        override val id = tracks.run { "${first.id}-${second?.id}-${third?.id}" }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\feed\viewholders\shelf\ShelfViewHolder.kt
================================================================================

package dev.brahmkshatriya.echo.ui.feed.viewholders.shelf

import android.graphics.drawable.Animatable
import android.view.Gravity
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.view.ViewGroup.LayoutParams.WRAP_CONTENT
import androidx.core.view.isVisible
import androidx.core.view.updateLayoutParams
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.databinding.ItemShelfCategoryBinding
import dev.brahmkshatriya.echo.databinding.ItemShelfListsMediaBinding
import dev.brahmkshatriya.echo.databinding.ItemShelfListsThreeTracksBinding
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.playback.PlayerState.Current.Companion.isPlaying
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener
import dev.brahmkshatriya.echo.ui.feed.viewholders.CategoryViewHolder.Companion.bind
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.applyCover
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.bind
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.subtitle
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

sealed class ShelfViewHolder<T : ShelfType>(view: View) : ScrollAnimViewHolder(view) {
    var scrollX = 0
    abstract fun bind(index: Int, list: List<T>)
    open fun onCurrentChanged(current: PlayerState.Current?) {}

    class Category(
        parent: ViewGroup,
        listener: FeedClickListener,
        private val binding: ItemShelfCategoryBinding = ItemShelfCategoryBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        ),
    ) : ShelfViewHolder<ShelfType.Category>(binding.root) {

        private var item: ShelfType.Category? = null

        init {
            binding.root.setOnClickListener {
                listener.openFeed(
                    it,
                    item?.extensionId,
                    item?.id,
                    item?.category?.title,
                    item?.category?.subtitle,
                    item?.category?.feed
                )
            }
            binding.root.updateLayoutParams { width = WRAP_CONTENT }
            binding.icon.clipToOutline = true
        }

        override fun bind(index: Int, list: List<ShelfType.Category>) {
            val item = list[index]
            this.item = item
            binding.bind(item.category)
        }
    }

    class Media(
        parent: ViewGroup,
        listener: FeedClickListener,
        private val binding: ItemShelfListsMediaBinding = ItemShelfListsMediaBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        ),
    ) : ShelfViewHolder<ShelfType.Media>(binding.root) {
        var shelf: ShelfType.Media? = null

        init {
            binding.coverContainer.cover.clipToOutline = true
            binding.root.setOnClickListener {
                when (val item = shelf?.media) {
                    is Track -> {
                        if (item.isPlayable != Track.Playable.Yes) {
                            listener.onMediaClicked(it, shelf?.extensionId, item, shelf?.context)
                        } else listener.onTracksClicked(
                            it, shelf?.extensionId, shelf?.context, listOf(item), 0
                        )
                    }

                    else -> listener.onMediaClicked(it, shelf?.extensionId, item, shelf?.context)
                }
            }
            binding.root.setOnLongClickListener {
                listener.onMediaLongClicked(
                    it, shelf?.extensionId, shelf?.media,
                    shelf?.context, shelf?.tabId, bindingAdapterPosition
                )
                true
            }
        }

        override fun bind(index: Int, list: List<ShelfType.Media>) {
            val shelf = list[index]
            this.shelf = shelf
            binding.bind(shelf.media)
        }

        override fun onCurrentChanged(current: PlayerState.Current?) {
            val isPlaying = current.isPlaying(shelf?.media?.id)
            binding.coverContainer.isPlaying.isVisible = isPlaying
            (binding.coverContainer.isPlaying.icon as Animatable).start()
        }
    }

    class ThreeTracks(
        parent: ViewGroup,
        listener: FeedClickListener,
        getAllTracks: () -> List<Track>,
        binding: ItemShelfListsThreeTracksBinding = ItemShelfListsThreeTracksBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        ),
    ) : ShelfViewHolder<ShelfType.ThreeTracks>(binding.root) {
        private val bindings = listOf(binding.track1, binding.track2, binding.track3)

        private var shelf: ShelfType.ThreeTracks? = null

        init {
            bindings.forEachIndexed { index, binding ->
                binding.coverContainer.cover.clipToOutline = true
                val actualIndex = shelf?.number?.let { it * 3 + index } ?: index
                binding.root.setOnClickListener { view ->
                    val tracks = getAllTracks()
                    val pos = shelf?.number?.let { it * 3 + index } ?: index
                    val track = tracks.getOrNull(index)
                    if (track?.isPlayable != Track.Playable.Yes) listener.onMediaClicked(
                        view, shelf?.extensionId, track, shelf?.context
                    ) else listener.onTracksClicked(
                        view, shelf?.extensionId, shelf?.context, tracks, pos
                    )
                }
                binding.root.setOnLongClickListener {
                    listener.onMediaLongClicked(
                        it, shelf?.extensionId, shelf?.tracks?.toList()?.getOrNull(index),
                        shelf?.context, shelf?.tabId, actualIndex
                    )
                    true
                }
                binding.more.setOnClickListener {
                    listener.onMediaLongClicked(
                        it, shelf?.extensionId, shelf?.tracks?.toList()?.getOrNull(index),
                        shelf?.context, shelf?.tabId, actualIndex
                    )
                }
            }
        }

        override fun bind(index: Int, list: List<ShelfType.ThreeTracks>) {
            val shelf = list[index]
            this.shelf = shelf
            val number = shelf.number
            val tracks = shelf.tracks.toList()
            bindings.forEachIndexed { index, view ->
                val track = tracks.getOrNull(index)
                view.root.isVisible = track != null
                if (track == null) return@forEachIndexed
                view.bind(track, number?.let { it * 3 + index })
            }
        }

        override fun onCurrentChanged(current: PlayerState.Current?) {
            val tracks = shelf?.tracks?.toList() ?: return
            bindings.forEachIndexed { index, binding ->
                val track = tracks.getOrNull(index) ?: return@forEachIndexed
                val isPlaying = current.isPlaying(track.id)
                binding.coverContainer.isPlaying.isVisible = isPlaying
                (binding.coverContainer.isPlaying.icon as Animatable).start()
            }
        }
    }

    companion object {
        fun ItemShelfListsMediaBinding.bind(item: EchoMediaItem) {
            val gravity = if (item is Artist) Gravity.CENTER else Gravity.NO_GRAVITY
            title.text = item.title
            title.gravity = gravity
            val sub = item.subtitle(root.context)
            subtitle.text = sub
            subtitle.gravity = gravity
            subtitle.isVisible = !sub.isNullOrBlank()
            coverContainer.run { applyCover(item, cover, listBg1, listBg2, icon) }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\main\HeaderAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.main

import android.content.res.ColorStateList
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.ImageView
import androidx.fragment.app.Fragment
import com.google.android.material.color.MaterialColors
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.ImageHolder
import dev.brahmkshatriya.echo.common.models.User
import dev.brahmkshatriya.echo.databinding.ItemMainHeaderBinding
import dev.brahmkshatriya.echo.extensions.db.models.UserEntity.Companion.toEntity
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.ui.extensions.list.ExtensionsListBottomSheet
import dev.brahmkshatriya.echo.ui.extensions.login.LoginUserListViewModel
import dev.brahmkshatriya.echo.ui.settings.SettingsBottomSheet
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadAsCircle
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimRecyclerAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder
import org.koin.androidx.viewmodel.ext.android.activityViewModel

class HeaderAdapter(
    private val fragment: Fragment,
) : ScrollAnimRecyclerAdapter<HeaderAdapter.ViewHolder>(), GridAdapter {
    private val viewModel by fragment.activityViewModel<LoginUserListViewModel>()

    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) = count
    override fun getItemCount() = 1
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val holder = ViewHolder(parent)
        val binding = holder.binding
        val parentFragmentManager = fragment.parentFragmentManager
        binding.extensionsCont.setOnClickListener {
            ExtensionsListBottomSheet.newInstance(ExtensionType.MUSIC)
                .show(parentFragmentManager, null)
        }

        binding.accountsCont.setOnClickListener {
            SettingsBottomSheet().show(parentFragmentManager, null)
        }
        return holder
    }

    private var extension: MusicExtension? = null
        set(value) {
            field = value
            notifyItemChanged(0)
        }

    private var triple: Triple<Extension<*>?, Boolean, List<Pair<User, Boolean>>> =
        Triple(null, false, emptyList())
        set(value) {
            field = value
            notifyItemChanged(0)
        }

    override fun onBindViewHolder(holder: ViewHolder, position: Int) = with(holder.binding) {
        super.onBindViewHolder(holder, position)
        val context = root.context
        title.text = extension?.name ?: context.getString(R.string.app_name)
        extensions.loadBigIcon(extension?.metadata?.icon, R.drawable.ic_extension_32dp)
        extensionsCont.setLoopedLongClick(
            viewModel.extensionLoader.music.value.filter { it.isEnabled },
            { viewModel.extensionLoader.current.value }
        ) {
            viewModel.extensionLoader.setupMusicExtension(it, true)
        }

        val (ext, isLoginClient, all) = triple
        accounts.loadBigIcon(
            viewModel.currentUser.value?.cover,
            if (isLoginClient) R.drawable.ic_account_circle_32dp else R.drawable.ic_settings_outline_32dp
        )
        accountsCont.setLoopedLongClick(all, { all.find { it.second } }) {
            ext ?: return@setLoopedLongClick
            viewModel.setLoginUser(it.first.toEntity(ext.type, ext.id))
        }
    }

    class ViewHolder(
        parent: ViewGroup,
        val binding: ItemMainHeaderBinding = ItemMainHeaderBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        ),
    ) : ScrollAnimViewHolder(binding.root)

    init {
        with(fragment) {

            observe(viewModel.extensionLoader.current) {
                viewModel.currentExtension.value = it
                extension = it
            }
            observe(viewModel.allUsersWithClient) {
                triple = it
            }
        }
    }

    companion object {
        fun <T> View.setLoopedLongClick(
            list: List<T>,
            getCurrent: (View) -> T?,
            onSelect: (T) -> Unit,
        ) {
            setOnLongClickListener {
                val current = getCurrent(this)
                val index = list.indexOf(current)
                if (index == -1) return@setOnLongClickListener false
                val next = list[(index + 1) % list.size]
                if (next == current) return@setOnLongClickListener false
                onSelect(next)
                true
            }
        }

        fun ImageView.loadBigIcon(image: ImageHolder?, placeholder: Int) {
            val color = ColorStateList.valueOf(
                MaterialColors.getColor(
                    this,
                    androidx.appcompat.R.attr.colorControlNormal
                )
            )
            image.loadAsCircle(this) {
                if (it == null) {
                    imageTintList = color
                    setImageResource(placeholder)
                } else {
                    imageTintList = null
                    setImageDrawable(it)
                }
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\main\HomeFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.main

import android.os.Bundle
import android.view.View
import androidx.fragment.app.Fragment
import com.google.android.material.transition.MaterialSharedAxis
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.clients.HomeFeedClient
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Feed.Buttons.Companion.EMPTY
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.databinding.FragmentHomeBinding
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getAs
import dev.brahmkshatriya.echo.extensions.cache.Cached
import dev.brahmkshatriya.echo.ui.common.GridAdapter.Companion.configureGridLayout
import dev.brahmkshatriya.echo.ui.common.UiViewModel
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyBackPressCallback
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.configure
import dev.brahmkshatriya.echo.ui.extensions.list.ExtensionsListBottomSheet
import dev.brahmkshatriya.echo.ui.feed.FeedAdapter.Companion.getFeedAdapter
import dev.brahmkshatriya.echo.ui.feed.FeedAdapter.Companion.getTouchHelper
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener.Companion.getFeedListener
import dev.brahmkshatriya.echo.ui.feed.FeedData
import dev.brahmkshatriya.echo.ui.feed.FeedViewModel
import dev.brahmkshatriya.echo.ui.main.MainFragment.Companion.applyInsets
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.setupTransition
import kotlinx.coroutines.flow.combine
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import org.koin.androidx.viewmodel.ext.android.viewModel

class HomeFragment : Fragment(R.layout.fragment_home) {

    private val feedData by lazy {
        val vm by viewModel<FeedViewModel>()
        val id = "home"
        vm.getFeedData(id, EMPTY, cached = {
            val curr = current.value!!
            val feed = Cached.getFeedShelf(app, curr.id, id).getOrThrow()
            FeedData.State(curr.id, null, feed)
        }) {
            val curr = current.value!!
            val feed = Cached.savingFeed(
                app, curr, id,
                curr.getAs<HomeFeedClient, Feed<Shelf>> { loadHomeFeed() }.getOrThrow()
            )
            FeedData.State(curr.id, null, feed)
        }
    }

    private val listener by lazy { getFeedListener(requireParentFragment()) }
    private val feedAdapter by lazy { getFeedAdapter(feedData, listener) }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        val binding = FragmentHomeBinding.bind(view)
        setupTransition(view, false, MaterialSharedAxis.Y)
        applyInsets(binding.recyclerView, binding.appBarOutline) {
            binding.swipeRefresh.configure(it)
        }
        val uiViewModel by activityViewModel<UiViewModel>()
        observe(uiViewModel.navigationReselected) {
            if (it != 0) return@observe
            ExtensionsListBottomSheet.newInstance(ExtensionType.MUSIC)
                .show(parentFragmentManager, null)
        }
        observe(
            uiViewModel.navigation.combine(feedData.backgroundImageFlow) { a, b -> a to b }
        ) { (curr, bg) ->
            if (curr != 0) return@observe
            uiViewModel.currentNavBackground.value = bg
        }
        applyBackPressCallback()
        getTouchHelper(listener).attachToRecyclerView(binding.recyclerView)
        configureGridLayout(
            binding.recyclerView,
            feedAdapter.withLoading(this, HeaderAdapter(this))
        )
        binding.swipeRefresh.run {
            setOnRefreshListener { feedData.refresh() }
            observe(feedData.isRefreshingFlow) {
                isRefreshing = it
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\main\LibraryFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.main

import android.os.Bundle
import android.view.View
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import com.google.android.material.transition.MaterialSharedAxis
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.clients.LibraryFeedClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditClient
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Message
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.databinding.FragmentLibraryBinding
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getAs
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.isClient
import dev.brahmkshatriya.echo.extensions.cache.Cached
import dev.brahmkshatriya.echo.ui.common.GridAdapter.Companion.configureGridLayout
import dev.brahmkshatriya.echo.ui.common.SnackBarHandler.Companion.createSnack
import dev.brahmkshatriya.echo.ui.common.UiViewModel
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyBackPressCallback
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.configure
import dev.brahmkshatriya.echo.ui.feed.FeedAdapter.Companion.getFeedAdapter
import dev.brahmkshatriya.echo.ui.feed.FeedAdapter.Companion.getTouchHelper
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener.Companion.getFeedListener
import dev.brahmkshatriya.echo.ui.feed.FeedData
import dev.brahmkshatriya.echo.ui.feed.FeedViewModel
import dev.brahmkshatriya.echo.ui.main.MainFragment.Companion.applyInsets
import dev.brahmkshatriya.echo.ui.playlist.create.CreatePlaylistBottomSheet
import dev.brahmkshatriya.echo.ui.settings.SettingsBottomSheet
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.Serializer.getSerialized
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.setupTransition
import kotlinx.coroutines.flow.combine
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import org.koin.androidx.viewmodel.ext.android.viewModel

class LibraryFragment : Fragment(R.layout.fragment_library) {
    private val feedData by lazy {
        val vm by viewModel<FeedViewModel>()
        val id = "library"
        vm.getFeedData(id, cached = {
            val curr = current.value!!
            val feed = Cached.getFeedShelf(app, curr.id, id).getOrThrow()
            FeedData.State(curr.id, null, feed)
        }) {
            val curr = current.value!!
            val feed = Cached.savingFeed(
                app, curr, id,
                curr.getAs<LibraryFeedClient, Feed<Shelf>> { loadLibraryFeed() }.getOrThrow()
            )
            FeedData.State(curr.id, null, feed)
        }
    }

    private val listener by lazy { getFeedListener(requireParentFragment()) }
    private val feedAdapter by lazy { getFeedAdapter(feedData, listener) }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        val binding = FragmentLibraryBinding.bind(view)
        setupTransition(view, false, MaterialSharedAxis.Y)
        val headerAdapter = HeaderAdapter(this)
        val uiViewModel by activityViewModel<UiViewModel>()
        observe(uiViewModel.navigationReselected) {
            if (it != 2) return@observe
            SettingsBottomSheet().show(parentFragmentManager, null)
        }
        observe(
            uiViewModel.navigation.combine(feedData.backgroundImageFlow) { a, b -> a to b }
        ) { (curr, bg) ->
            if (curr != 2) return@observe
            uiViewModel.currentNavBackground.value = bg
        }
        applyInsets(binding.recyclerView, binding.appBarOutline, 72) {
            binding.createPlaylistContainer.applyInsets(it)
            binding.swipeRefresh.configure(it)
        }
        applyBackPressCallback()
        getTouchHelper(listener).attachToRecyclerView(binding.recyclerView)
        configureGridLayout(
            binding.recyclerView,
            feedAdapter.withLoading(this, headerAdapter)
        )
        binding.swipeRefresh.run {
            setOnRefreshListener { feedData.refresh() }
            observe(feedData.isRefreshingFlow) {
                isRefreshing = it
            }
        }

        observe(feedData.current) {
            binding.createPlaylist.isVisible = it?.isClient<PlaylistEditClient>() ?: false
        }
        val parent = requireParentFragment()
        binding.createPlaylist.setOnClickListener {
            CreatePlaylistBottomSheet().show(parent.parentFragmentManager, null)
        }

        parent.parentFragmentManager.setFragmentResultListener("createPlaylist", this) { _, data ->
            val extensionId = data.getString("extensionId")
            val playlist = data.getSerialized<Playlist>("playlist")?.getOrNull()
            if (extensionId != null && playlist != null) createSnack(
                Message(
                    getString(R.string.x_created, playlist.title),
                    Message.Action(getString(R.string.view)) {
                        listener.onMediaClicked(null, extensionId, playlist, null)
                    }
                )
            )
            feedData.refresh()
        }

        parent.parentFragmentManager.setFragmentResultListener("deleted", this) { _, _ ->
            feedData.refresh()
        }

        parent.parentFragmentManager.setFragmentResultListener("reloadLibrary", this) { _, _ ->
            feedData.refresh()
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\main\MainFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.main

import android.graphics.Rect
import android.graphics.drawable.Drawable
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.view.updatePadding
import androidx.fragment.app.Fragment
import androidx.fragment.app.commit
import androidx.recyclerview.widget.RecyclerView
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.databinding.FragmentMainBinding
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.addIfNull
import dev.brahmkshatriya.echo.ui.common.UiViewModel
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.BACKGROUND_GRADIENT
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyGradient
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsets
import dev.brahmkshatriya.echo.ui.main.search.SearchFragment
import dev.brahmkshatriya.echo.utils.ContextUtils.getSettings
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.setupTransition
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import dev.brahmkshatriya.echo.utils.ui.FastScrollerHelper
import dev.brahmkshatriya.echo.utils.ui.UiUtils.dpToPx
import dev.brahmkshatriya.echo.utils.ui.UiUtils.isRTL
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.combine
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import kotlin.math.max

class MainFragment : Fragment() {

    private var binding by autoCleared<FragmentMainBinding>()
    private val viewModel by activityViewModel<UiViewModel>()

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
    ): View {
        binding = FragmentMainBinding.inflate(inflater, container, false)
        return binding.root
    }

    private inline fun <reified F : Fragment> Fragment.addIfNull(tag: String): String {
        addIfNull<F>(R.id.main_fragment_container_view, tag)
        return tag
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        setupTransition(view)
        applyPlayerBg(view) {
            mainBgDrawable.combine(currentNavBackground) { a, b -> b ?: a }
        }
        observe(viewModel.navigation) {
            val toShow = when (it) {
                1 -> addIfNull<SearchFragment>("search")
                2 -> addIfNull<LibraryFragment>("library")
                else -> addIfNull<HomeFragment>("home")
            }

            childFragmentManager.commit(true) {
                childFragmentManager.fragments.forEach { fragment ->
                    if (fragment.tag != toShow) hide(fragment)
                    else show(fragment)
                }
                setReorderingAllowed(true)
            }
        }
    }

    companion object {
        fun Fragment.applyPlayerBg(
            view: View,
            imageFlow: UiViewModel.() -> Flow<Drawable?>
        ): UiViewModel {
            val uiViewModel by activityViewModel<UiViewModel>()
            val combined = uiViewModel.imageFlow()
            observe(combined) { applyGradient(view, it) }
            return uiViewModel
        }

        fun Fragment.applyInsets(
            recyclerView: RecyclerView,
            outline: View,
            bottom: Int = 0,
            block: UiViewModel.(UiViewModel.Insets) -> Unit = {}
        ) {
            recyclerView.run {
                val height = 48.dpToPx(context)
                val settings = context.getSettings()
                val isGradient = settings.getBoolean(BACKGROUND_GRADIENT, true)
                val extra = if (isGradient) 0.5f else 0f
                setOnScrollChangeListener { _, _, _, _, _ ->
                    val offset =
                        computeVerticalScrollOffset().coerceAtMost(height) / height.toFloat()
                    outline.alpha = max(0f, offset - extra)
                }
            }
            val scroller = FastScrollerHelper.applyTo(recyclerView)
            applyInsets {
                recyclerView.applyInsets(it, 20, 20, bottom + 4)
                outline.updatePadding(top = it.top)
                scroller?.setPadding(recyclerView.run {
                    val pad = 8.dpToPx(context)
                    val isRtl = context.isRTL()
                    val left = if (!isRtl) it.start else it.end
                    val right = if (!isRtl) it.end else it.start
                    Rect(left + pad, it.top + pad, right + pad, it.bottom + bottom + pad)
                })
                block(it)
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\main\search\QuickSearchAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.main.search

import android.view.View
import android.view.ViewGroup
import androidx.core.view.isVisible
import androidx.recyclerview.widget.DiffUtil
import dev.brahmkshatriya.echo.common.models.QuickSearchItem
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimListAdapter

class QuickSearchAdapter(
    val listener: Listener,
) : ScrollAnimListAdapter<QuickSearchAdapter.Item, QuickSearchViewHolder>(DiffCallback) {
    data class Item(
        val extensionId: String,
        val actual: QuickSearchItem,
    )

    object DiffCallback : DiffUtil.ItemCallback<Item>() {
        override fun areItemsTheSame(oldItem: Item, newItem: Item): Boolean {
            if (oldItem.extensionId != newItem.extensionId) return false
            return oldItem.actual.sameAs(newItem.actual)
        }

        override fun areContentsTheSame(oldItem: Item, newItem: Item) = oldItem == newItem
    }

    interface Listener {
        fun onClick(item: Item, transitionView: View)
        fun onLongClick(item: Item, transitionView: View): Boolean
        fun onInsert(item: Item)
        fun onDeleteClick(item: Item)
    }

    override fun getItemViewType(position: Int) = when (getItem(position).actual) {
        is QuickSearchItem.Query -> 0
        is QuickSearchItem.Media -> 1
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) = when (viewType) {
        0 -> QuickSearchViewHolder.Query.create(parent)
        1 -> QuickSearchViewHolder.Media.create(parent)
        else -> throw IllegalArgumentException("Unknown viewType: $viewType")
    }

    override fun onBindViewHolder(holder: QuickSearchViewHolder, position: Int) {
        val item = getItem(position) ?: return
        holder.bind(item)
        holder.itemView.setOnClickListener {
            listener.onClick(item, holder.transitionView)
        }
        holder.itemView.setOnLongClickListener {
            listener.onLongClick(item, holder.transitionView)
        }
        holder.insertView.setOnClickListener {
            listener.onInsert(item)
        }

        holder.deleteView.isVisible = item.actual.searched
        holder.deleteView.setOnClickListener {
            listener.onDeleteClick(item)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\main\search\QuickSearchViewHolder.kt
================================================================================

package dev.brahmkshatriya.echo.ui.main.search

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.view.isVisible
import dev.brahmkshatriya.echo.common.models.QuickSearchItem
import dev.brahmkshatriya.echo.databinding.ItemQuickSearchMediaBinding
import dev.brahmkshatriya.echo.databinding.ItemQuickSearchQueryBinding
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.placeHolder
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.subtitle
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadInto
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

sealed class QuickSearchViewHolder(itemView: View) : ScrollAnimViewHolder(itemView) {
    abstract fun bind(item: QuickSearchAdapter.Item)
    abstract val insertView: View
    abstract val deleteView: View
    open val transitionView: View
        get() = this.insertView

    class Query(val binding: ItemQuickSearchQueryBinding) : QuickSearchViewHolder(binding.root) {
        override val insertView: View
            get() = binding.insert

        override val deleteView: View
            get() = binding.delete

        override fun bind(item:  QuickSearchAdapter.Item) {
            val item = item.actual as QuickSearchItem.Query
            binding.history.visibility = if (item.searched) View.VISIBLE else View.INVISIBLE
            binding.query.text = item.query
        }

        companion object {
            fun create(
                parent: ViewGroup
            ): QuickSearchViewHolder {
                val layoutInflater = LayoutInflater.from(parent.context)
                return Query(
                    ItemQuickSearchQueryBinding.inflate(layoutInflater, parent, false)
                )
            }
        }
    }

    class Media(val binding: ItemQuickSearchMediaBinding) : QuickSearchViewHolder(binding.root) {
        override val insertView: View
            get() = binding.insert

        override val deleteView: View
            get() = binding.delete

        override val transitionView: View
            get() = binding.coverContainer

        override fun bind(item:  QuickSearchAdapter.Item) {
            val item = item.actual as QuickSearchItem.Media
            binding.title.text = item.media.title
            val subtitle = item.media.subtitle(binding.root.context)
            binding.subtitle.text = subtitle
            binding.subtitle.isVisible = !subtitle.isNullOrEmpty()
            transitionView.transitionName = ("quick" + item.media.id).hashCode().toString()
            item.media.cover.loadInto(binding.cover, item.media.placeHolder)
        }

        companion object {
            fun create(
                parent: ViewGroup
            ): QuickSearchViewHolder {
                val layoutInflater = LayoutInflater.from(parent.context)
                return Media(
                    ItemQuickSearchMediaBinding.inflate(layoutInflater, parent, false)
                )
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\main\search\SearchBarAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.main.search

import android.view.LayoutInflater
import android.view.ViewGroup
import com.google.android.material.search.SearchView
import dev.brahmkshatriya.echo.databinding.ItemSearchBarBinding
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimRecyclerAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class SearchBarAdapter(
    val viewModel: SearchViewModel,
    val searchView: SearchView,
) : ScrollAnimRecyclerAdapter<SearchBarAdapter.ViewHolder>(), GridAdapter {
    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) = count
    override fun getItemCount() = 1
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) =
        ViewHolder(parent, viewModel, searchView)

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        super.onBindViewHolder(holder, position)
        holder.bind()
    }

    class ViewHolder(
        parent: ViewGroup,
        val viewModel: SearchViewModel,
        val searchView: SearchView,
        private val binding: ItemSearchBarBinding = ItemSearchBarBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        )
    ) : ScrollAnimViewHolder(binding.root) {
        fun bind() {
            searchView.setupWithSearchBar(binding.root)
            binding.root.setText(viewModel.queryFlow.value.takeIf { it.isNotBlank() })
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\main\search\SearchFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.main.search

import android.os.Bundle
import android.view.View
import androidx.activity.OnBackPressedCallback
import androidx.core.widget.doOnTextChanged
import androidx.fragment.app.Fragment
import com.google.android.material.bottomsheet.BottomSheetBehavior.STATE_EXPANDED
import com.google.android.material.transition.MaterialSharedAxis
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.clients.SearchFeedClient
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Feed.Buttons.Companion.EMPTY
import dev.brahmkshatriya.echo.common.models.QuickSearchItem
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.databinding.FragmentSearchBinding
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getAs
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtension
import dev.brahmkshatriya.echo.extensions.cache.Cached
import dev.brahmkshatriya.echo.ui.common.GridAdapter.Companion.configureGridLayout
import dev.brahmkshatriya.echo.ui.common.UiViewModel
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyBackPressCallback
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.configure
import dev.brahmkshatriya.echo.ui.feed.FeedAdapter.Companion.getFeedAdapter
import dev.brahmkshatriya.echo.ui.feed.FeedAdapter.Companion.getTouchHelper
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener.Companion.getFeedListener
import dev.brahmkshatriya.echo.ui.feed.FeedData
import dev.brahmkshatriya.echo.ui.feed.FeedViewModel
import dev.brahmkshatriya.echo.ui.main.HeaderAdapter
import dev.brahmkshatriya.echo.ui.main.MainFragment.Companion.applyInsets
import dev.brahmkshatriya.echo.ui.main.search.SearchViewModel.Companion.saveInHistory
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.setupTransition
import kotlinx.coroutines.flow.combine
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import org.koin.androidx.viewmodel.ext.android.viewModel

class SearchFragment : Fragment(R.layout.fragment_search) {

    private val argId by lazy { arguments?.getString("extensionId") }
    private val searchViewModel by viewModel<SearchViewModel>()

    private var extensionId = ""

    private val feedData by lazy {
        val vm by viewModel<FeedViewModel>()
        val id = "search"
        vm.getFeedData(
            id,
            EMPTY,
            false,
            searchViewModel.queryFlow,
            cached = {
                val curr = music.getExtension(argId) ?: current.value!!
                val query = searchViewModel.queryFlow.value
                val feed = Cached.getFeedShelf(app, curr.id, "$id-$query")
                FeedData.State(curr.id, null, feed.getOrThrow())
            }
        ) {
            val curr = music.getExtension(argId) ?: current.value!!
            val query = searchViewModel.queryFlow.value
            curr.saveInHistory(vm.app.context, query)
            val feed = Cached.savingFeed(
                app, curr, "$id-$query",
                curr.getAs<SearchFeedClient, Feed<Shelf>> { loadSearchFeed(query) }.getOrThrow()
            )
            extensionId = curr.id
            FeedData.State(curr.id, null, feed)
        }
    }

    private val listener by lazy {
        getFeedListener(if (argId == null) requireParentFragment() else this)
    }

    private val feedAdapter by lazy {
        getFeedAdapter(feedData, listener)
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        val binding = FragmentSearchBinding.bind(view)
        setupTransition(view, false, MaterialSharedAxis.Y)
        applyInsets(binding.recyclerView, binding.appBarOutline) {
            binding.swipeRefresh.configure(it)
        }
        val uiViewModel by activityViewModel<UiViewModel>()
        observe(uiViewModel.navigationReselected) {
            if (it != 1) return@observe
            binding.quickSearchView.show()
        }
        observe(uiViewModel.navigation) {
            binding.quickSearchView.hide()
        }
        observe(
            uiViewModel.navigation.combine(feedData.backgroundImageFlow) { a, b -> a to b }
        ) { (curr, bg) ->
            if (curr != 1) return@observe
            uiViewModel.currentNavBackground.value = bg
        }
        val backCallback = object : OnBackPressedCallback(false) {
            override fun handleOnBackPressed() {
                binding.quickSearchView.hide()
            }
        }
        requireActivity().onBackPressedDispatcher.addCallback(viewLifecycleOwner, backCallback)
        binding.quickSearchView.addTransitionListener { v, _, _ ->
            backCallback.isEnabled = v.isShowing
        }
        applyBackPressCallback {
            if (it == STATE_EXPANDED) binding.quickSearchView.hide()
        }
        val searchAdapter = SearchBarAdapter(searchViewModel, binding.quickSearchView)
        observe(searchViewModel.queryFlow) {
            searchAdapter.notifyItemChanged(0)
            binding.quickSearchView.setText(it)
        }
        getTouchHelper(listener).attachToRecyclerView(binding.recyclerView)
        configureGridLayout(
            binding.recyclerView,
            feedAdapter.withLoading(this, HeaderAdapter(this), searchAdapter)
        )
        binding.swipeRefresh.run {
            setOnRefreshListener { feedData.refresh() }
            observe(feedData.isRefreshingFlow) {
                isRefreshing = it
            }
        }
        binding.quickSearchView.editText.setText(searchViewModel.queryFlow.value)
        binding.quickSearchView.editText.doOnTextChanged { text, _, _, _ ->
            searchViewModel.quickSearch(extensionId, text.toString())
        }
        binding.quickSearchView.editText.setOnEditorActionListener { textView, _, _ ->
            val query = textView.text.toString()
            binding.quickSearchView.hide()
            searchViewModel.queryFlow.value = query
            false
        }
        val quickSearchAdapter = QuickSearchAdapter(object : QuickSearchAdapter.Listener {
            override fun onClick(item: QuickSearchAdapter.Item, transitionView: View) {
                when (val actualItem = item.actual) {
                    is QuickSearchItem.Query -> {
                        binding.quickSearchView.editText.run {
                            setText(actualItem.query)
                            onEditorAction(imeOptions)
                        }
                    }

                    is QuickSearchItem.Media -> {
                        val extensionId = item.extensionId
                        listener.onMediaClicked(transitionView, extensionId, actualItem.media, null)
                    }
                }
            }

            override fun onDeleteClick(item: QuickSearchAdapter.Item) =
                searchViewModel.deleteSearch(
                    item.extensionId,
                    item.actual,
                    binding.quickSearchView.editText.text.toString()
                )

            override fun onLongClick(item: QuickSearchAdapter.Item, transitionView: View) =
                when (val actualItem = item.actual) {
                    is QuickSearchItem.Query -> {
                        onDeleteClick(item)
                        true
                    }

                    is QuickSearchItem.Media -> {
                        val extensionId = item.extensionId
                        listener.onMediaLongClicked(
                            transitionView, extensionId, actualItem.media,
                            null, null, -1
                        )
                        true
                    }
                }

            override fun onInsert(item: QuickSearchAdapter.Item) {
                binding.quickSearchView.editText.run {
                    setText(item.actual.title)
                    setSelection(length())
                }
            }
        })

        binding.quickSearchRecyclerView.adapter = quickSearchAdapter
        observe(searchViewModel.quickFeed) { list ->
            quickSearchAdapter.submitList(list.map {
                QuickSearchAdapter.Item(extensionId, it)
            })
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\main\search\SearchViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.main.search

import android.content.Context
import android.content.SharedPreferences
import androidx.core.content.edit
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.clients.QuickSearchClient
import dev.brahmkshatriya.echo.common.models.QuickSearchItem
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtension
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getIf
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.prefs
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.launch

class SearchViewModel(
    private val app: App,
    extensionLoader: ExtensionLoader
) : ViewModel() {
    val queryFlow = MutableStateFlow("")
    private val music = extensionLoader.music
    val quickFeed = MutableStateFlow<List<QuickSearchItem>>(emptyList())
    fun quickSearch(extensionId: String, query: String) {
        viewModelScope.launch(Dispatchers.IO) {
            val extension = music.getExtension(extensionId)
            val list = extension?.getIf<QuickSearchClient, List<QuickSearchItem>>(app.throwFlow) {
                quickSearch(query)
            } ?: defaultQuickSearch(extension, app.context, query)
            quickFeed.value = list
        }
    }

    fun deleteSearch(extensionId: String, item: QuickSearchItem, query: String) {
        viewModelScope.launch {
            val extension = music.getExtension(extensionId)
            extension?.getIf<QuickSearchClient, Unit>(app.throwFlow) {
                deleteQuickSearch(item)
            } ?: defaultDeleteSearch(extension, app.context, item)
            quickSearch(extensionId, query)
        }
    }

    companion object {
        fun defaultQuickSearch(
            extension: Extension<*>?, context: Context, query: String
        ): List<QuickSearchItem> {
            val setting = extension?.prefs(context) ?: return emptyList()
            if (query.isNotBlank()) return emptyList()
            return getHistory(setting).map { QuickSearchItem.Query(it, true) }
        }

        fun defaultDeleteSearch(extension: Extension<*>?, context: Context, item: QuickSearchItem) {
            val setting = extension?.prefs(context) ?: return
            val history = getHistory(setting).toMutableList()
            history.remove(item.title)
            setting.edit { putString("search_history", history.joinToString(",")) }
        }

        private fun getHistory(setting: SharedPreferences): List<String> {
            return setting.getString("search_history", "")
                ?.split(",")?.mapNotNull {
                    it.takeIf { it.isNotBlank() }
                }?.distinct()?.take(5)
                ?: emptyList()
        }

        fun Extension<*>.saveInHistory(context: Context, query: String) {
            if (query.isBlank()) return
            val setting = prefs(context)
            val history = getHistory(setting).toMutableList()
            history.add(0, query)
            setting.edit { putString("search_history", history.joinToString(",")) }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\media\LineAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.media

import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.paging.LoadState
import dev.brahmkshatriya.echo.databinding.ItemLineBinding
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimLoadStateAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class LineAdapter : ScrollAnimLoadStateAdapter<LineAdapter.ViewHolder>(), GridAdapter {
    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) = count
    override fun onCreateViewHolder(parent: ViewGroup, loadState: LoadState) = ViewHolder(parent)
    class ViewHolder(
        parent: ViewGroup,
        binding: ItemLineBinding = ItemLineBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        )
    ) : ScrollAnimViewHolder(binding.root)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\media\MediaDetailsFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.media

import android.os.Bundle
import android.view.View
import androidx.fragment.app.Fragment
import androidx.paging.LoadState
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.databinding.FragmentMediaDetailsBinding
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.ui.common.GridAdapter.Companion.configureGridLayout
import dev.brahmkshatriya.echo.ui.common.UiViewModel
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyContentInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.configure
import dev.brahmkshatriya.echo.ui.feed.FeedAdapter.Companion.getFeedAdapter
import dev.brahmkshatriya.echo.ui.feed.FeedAdapter.Companion.getTouchHelper
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener.Companion.getFeedListener
import dev.brahmkshatriya.echo.ui.feed.FeedViewModel
import dev.brahmkshatriya.echo.ui.media.MediaHeaderAdapter.Companion.getMediaHeaderListener
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.FastScrollerHelper
import kotlinx.coroutines.flow.combine
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import org.koin.androidx.viewmodel.ext.android.viewModel

class MediaDetailsFragment : Fragment(R.layout.fragment_media_details) {

    interface Parent {
        val feedId: String
        val viewModel: MediaDetailsViewModel
        val fromPlayer: Boolean
    }

    val parent by lazy { requireParentFragment() as Parent }
    val viewModel by lazy { parent.viewModel }
    private val feedViewModel by lazy {
        requireParentFragment().viewModel<FeedViewModel>().value
    }

    private val trackFeedData by lazy {
        feedViewModel.getFeedData(
            "${parent.feedId}_tracks",
            Feed.Buttons(showPlayAndShuffle = true),
            true,
            viewModel.tracksLoadedFlow, viewModel.trackCachedFlow,
            cached = { viewModel.trackCachedFlow.value?.getOrThrow() },
            loader = { viewModel.tracksLoadedFlow.value?.getOrThrow() }
        )
    }

    private val feedData by lazy {
        feedViewModel.getFeedData(
            "${parent.feedId}_feed",
            Feed.Buttons(),
            false,
            viewModel.feedCachedFlow, viewModel.feedLoadedFlow,
            cached = { viewModel.feedCachedFlow.value?.getOrThrow() },
            loader = { viewModel.feedLoadedFlow.value?.getOrThrow() }
        )
    }

    private val mediaHeaderAdapter by lazy {
        MediaHeaderAdapter(
            requireParentFragment().getMediaHeaderListener(viewModel),
            parent.fromPlayer
        )
    }

    private val feedListener by lazy {
        if (!parent.fromPlayer) requireParentFragment().getFeedListener()
        else FeedClickListener(
            requireParentFragment(),
            requireActivity().supportFragmentManager,
            R.id.navHostFragment
        ) {
            val uiViewModel by activityViewModel<UiViewModel>()
            uiViewModel.collapsePlayer()
        }
    }

    private val trackAdapter by lazy {
        getFeedAdapter(trackFeedData, feedListener, true)
    }
    private val feedAdapter by lazy {
        getFeedAdapter(feedData, feedListener)
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        val binding = FragmentMediaDetailsBinding.bind(view)
        FastScrollerHelper.applyTo(binding.recyclerView)
        applyInsets(viewModel.uiResultFlow) {
            val item = viewModel.uiResultFlow.value?.getOrNull()?.item as? Playlist
            val bottom = if (item?.isEditable == true) 72 else 16
            binding.recyclerView.applyContentInsets(it, 20, 8, bottom)
        }
        val lineAdapter = LineAdapter()
        observe(trackFeedData.shouldShowEmpty) {
            lineAdapter.loadState = if (it) LoadState.Loading else LoadState.NotLoading(false)
        }
        observe(viewModel.uiResultFlow) { result ->
            mediaHeaderAdapter.result = result
        }
        getTouchHelper(feedListener).attachToRecyclerView(binding.recyclerView)
        configureGridLayout(
            binding.recyclerView,
            GridAdapter.Concat(
                mediaHeaderAdapter,
                trackAdapter.withLoading(this),
                lineAdapter,
                feedAdapter.withLoading(this)
            )
        )
        val loadingFlow = viewModel.isRefreshingFlow
            .combine(trackFeedData.isRefreshingFlow) { a, b -> a || b }
                .combine(feedData.isRefreshingFlow) { a, b -> a || b }
        binding.swipeRefresh.run {
            configure()
            setOnRefreshListener { viewModel.refresh() }
            observe(loadingFlow) {
                isRefreshing = it
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\media\MediaDetailsViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.media

import android.content.Context
import android.content.Intent
import androidx.core.app.ShareCompat
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.clients.FollowClient
import dev.brahmkshatriya.echo.common.clients.HideClient
import dev.brahmkshatriya.echo.common.clients.LikeClient
import dev.brahmkshatriya.echo.common.clients.SaveClient
import dev.brahmkshatriya.echo.common.clients.ShareClient
import dev.brahmkshatriya.echo.common.helpers.PagedData
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Feed.Companion.toFeed
import dev.brahmkshatriya.echo.common.models.Message
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getIf
import dev.brahmkshatriya.echo.extensions.MediaState
import dev.brahmkshatriya.echo.extensions.cache.Cached.getFeed
import dev.brahmkshatriya.echo.extensions.cache.Cached.getTracks
import dev.brahmkshatriya.echo.extensions.cache.Cached.loadFeed
import dev.brahmkshatriya.echo.extensions.cache.Cached.loadItem
import dev.brahmkshatriya.echo.extensions.cache.Cached.loadTracks
import dev.brahmkshatriya.echo.ui.feed.FeedData
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.ExperimentalCoroutinesApi
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.SharingStarted.Companion.Eagerly
import kotlinx.coroutines.flow.combine
import kotlinx.coroutines.flow.map
import kotlinx.coroutines.flow.stateIn
import kotlinx.coroutines.flow.transformLatest
import kotlinx.coroutines.launch

@OptIn(ExperimentalCoroutinesApi::class)
abstract class MediaDetailsViewModel(
    downloader: Downloader,
    private val app: App,
    private val loadFeeds: Boolean,
    extension: Flow<MusicExtension?>,
) : ViewModel() {
    val extensionFlow = extension.stateIn(viewModelScope, Eagerly, null)
    val downloadsFlow = downloader.flow

    val refreshFlow = MutableSharedFlow<Unit>()
    val cacheResultFlow = MutableStateFlow<Result<MediaState.Loaded<*>>?>(null)
    val itemResultFlow = MutableStateFlow<Result<MediaState.Loaded<*>>?>(null)

    val uiResultFlow = itemResultFlow.combine(cacheResultFlow) { item, cache ->
        item ?: cache
    }.stateIn(viewModelScope, Eagerly, null)

    val cacheExtensionItemFlow = uiResultFlow.map {
        extensionFlow.value to it?.getOrNull()?.item
    }.stateIn(viewModelScope, Eagerly, null to null)

    val extensionItemFlow = itemResultFlow.map { result ->
        extensionFlow.value to result?.getOrNull()?.item
    }.stateIn(viewModelScope, Eagerly, null to null)

    private fun trackFeed(item: EchoMediaItem, extension: Extension<*>) =
        if (item is Track) runCatching {
            PagedData.Concat(
                PagedData.Single {
                    val album = item.album?.let { loadItem(extension, it).getOrNull() ?: it }
                    listOfNotNull(album?.toShelf())
                },
                PagedData.Single {
                    if (item.artists.isEmpty()) return@Single emptyList()
                    listOf(
                        Shelf.Lists.Items(
                            item.id + "_artists",
                            app.context.getString(R.string.artists),
                            item.artists.map {
                                loadItem(extension, it).getOrNull() ?: it
                            },
                        )
                    )
                },
            ).toFeed(Feed.Buttons.EMPTY)
        } else null

    val trackCachedFlow = cacheExtensionItemFlow.transformLatest { (extension, item) ->
        emit(null)
        if (!loadFeeds) return@transformLatest
        extension ?: return@transformLatest
        val item = item ?: cacheResultFlow.value?.getOrNull()?.item ?: return@transformLatest
        val feed = trackFeed(item, extension)
            ?: getTracks(app, extension.id, item).map { feed -> feed?.map { it.toShelf() } }
        emit(feed.map {
            it ?: return@map null
            FeedData.State(extension.id, item, it)
        })
    }.stateIn(viewModelScope, Eagerly, null)

    val tracksLoadedFlow = extensionItemFlow.transformLatest { (extension, item) ->
        emit(null)
        if (!loadFeeds) return@transformLatest
        extension ?: return@transformLatest
        item ?: return@transformLatest
        val feed = trackFeed(item, extension)
            ?: loadTracks(app, extension, item).map { feed -> feed?.map { it.toShelf() } }
        emit(feed.map {
            it ?: return@map null
            FeedData.State(extension.id, item, it)
        })
    }.stateIn(viewModelScope, Eagerly, null)

    val feedCachedFlow = cacheExtensionItemFlow.transformLatest { (extension, item) ->
        emit(null)
        if (!loadFeeds) return@transformLatest
        extension ?: return@transformLatest
        val item = item ?: cacheResultFlow.value?.getOrNull()?.item ?: return@transformLatest
        val feed = getFeed(app, extension.id, item) ?: return@transformLatest
        emit(feed.map {
            FeedData.State(extension.id, item, it)
        })
    }.stateIn(viewModelScope, Eagerly, null)

    val feedLoadedFlow = extensionItemFlow.transformLatest { (extension, item) ->
        emit(null)
        if (!loadFeeds) return@transformLatest
        extension ?: return@transformLatest
        item ?: return@transformLatest
        val feed = loadFeed(app, extension, item)
        emit(feed.map {
            it ?: return@map null
            FeedData.State(extension.id, item, it)
        })
    }.stateIn(viewModelScope, Eagerly, null)

    fun refresh() = viewModelScope.launch {
        refreshFlow.emit(Unit)
    }

    abstract fun getItem(): Triple<String, EchoMediaItem, Boolean>?

    fun likeItem(liked: Boolean) = app.scope.launch {
        val item = itemResultFlow.value?.getOrNull()?.item ?: return@launch
        val extension = extensionFlow.value
        like(app, extension, item, liked)
        refresh()
    }

    fun hideItem(hidden: Boolean) = app.scope.launch {
        val item = itemResultFlow.value?.getOrNull()?.item ?: return@launch
        val extension = extensionFlow.value
        hide(app, extension, item, hidden)
        refresh()
    }

    fun followItem(followed: Boolean) = app.scope.launch {
        val item = itemResultFlow.value?.getOrNull()?.item ?: return@launch
        val extension = extensionFlow.value
        follow(app, extension, item, followed)
        refresh()
    }

    fun saveToLibrary(saved: Boolean) = app.scope.launch {
        val item = itemResultFlow.value?.getOrNull()?.item ?: return@launch
        val extension = extensionFlow.value
        save(app, extension, item, saved)
        refresh()
    }

    fun onShare() = app.scope.launch(Dispatchers.IO) {
        val item = itemResultFlow.value?.getOrNull()?.item ?: return@launch
        val extension = extensionFlow.value
        share(app, extension, item)
    }

    val isRefreshing get() = itemResultFlow.value == null
    val isRefreshingFlow = itemResultFlow.map {
        isRefreshing
    }

    companion object {

        suspend fun notFound(app: App, id: Int) {
            val notFound = app.context.run { getString(R.string.no_x_found, getString(id)) }
            app.messageFlow.emit(Message(notFound))
        }

        suspend fun createMessage(app: App, message: Context.() -> String) {
            app.messageFlow.emit(Message(app.context.message()))
        }

        suspend fun like(
            app: App, extension: Extension<*>?, item: EchoMediaItem, like: Boolean,
        ) {
            val extension = extension ?: return notFound(app, R.string.extension)
            createMessage(app) {
                getString(
                    if (like) R.string.liking_x else R.string.unliking_x,
                    item.title
                )
            }
            val result = extension.getIf<LikeClient, Unit>(app.throwFlow) {
                likeItem(item, like)
            }
            if (result != null) createMessage(app) {
                getString(
                    if (like) R.string.liked_x else R.string.unliked_x, item.title
                )
            }
        }

        suspend fun hide(
            app: App, extension: Extension<*>?, item: EchoMediaItem, hide: Boolean,
        ) {
            val extension = extension ?: return notFound(app, R.string.extension)
            createMessage(app) {
                getString(
                    if (hide) R.string.hiding_x else R.string.unhiding_x,
                    item.title
                )
            }
            val result = extension.getIf<HideClient, Unit>(app.throwFlow) {
                hideItem(item, hide)
            }
            if (result != null) createMessage(app) {
                getString(
                    if (hide) R.string.hidden_x else R.string.unhidden_x,
                    item.title
                )
            }
        }

        suspend fun follow(
            app: App, extension: Extension<*>?, item: EchoMediaItem, follow: Boolean,
        ) {
            val extension = extension ?: return notFound(app, R.string.extension)
            createMessage(app) {
                getString(
                    if (follow) R.string.following_x else R.string.unfollowing_x,
                    item.title
                )
            }
            val result = extension.getIf<FollowClient, Unit>(app.throwFlow) {
                followItem(item, follow)
            }
            if (result != null) createMessage(app) {
                getString(
                    if (follow) R.string.followed_x else R.string.unfollowed_x,
                    item.title
                )
            }
        }

        suspend fun save(
            app: App, extension: Extension<*>?, item: EchoMediaItem, save: Boolean,
        ) {
            val extension = extension ?: return notFound(app, R.string.extension)
            createMessage(app) {
                getString(
                    if (save) R.string.saving_x else R.string.removing_x,
                    item.title
                )
            }
            val result = extension.getIf<SaveClient, Unit>(app.throwFlow) {
                saveToLibrary(item, save)
            }
            if (result != null) createMessage(app) {
                getString(
                    if (save) R.string.saved_x_to_library else R.string.removed_x_from_library,
                    item.title
                )
            }
        }

        suspend fun share(
            app: App, extension: Extension<*>?, item: EchoMediaItem,
        ) {
            val extension = extension ?: return notFound(app, R.string.extension)
            createMessage(app) { getString(R.string.sharing_x, item.title) }
            val url = extension.getIf<ShareClient, String>(app.throwFlow) {
                onShare(item)
            } ?: return notFound(app, R.string.extension)
            val intent = ShareCompat.IntentBuilder(app.context)
                .setType("text/plain")
                .setChooserTitle("${extension.name} - ${item.title}")
                .setText(url)
                .createChooserIntent()
            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
            app.context.startActivity(intent)
        }

        private fun <T : Any> Feed<T>.map(transform: (T) -> Shelf) = Feed(tabs) { tab ->
            val data = getPagedData.invoke(tab)
            Feed.Data(
                data.pagedData.map {
                    val list = it.getOrThrow()
                    list.map(transform)
                },
                data.buttons,
                data.background
            )
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\media\MediaFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.media

import android.os.Bundle
import android.view.View
import androidx.constraintlayout.widget.ConstraintLayout
import androidx.core.view.isVisible
import androidx.core.view.updateLayoutParams
import androidx.fragment.app.Fragment
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.databinding.FragmentMediaBinding
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyBackPressCallback
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyFabInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyGradient
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsets
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.icon
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.placeHolder
import dev.brahmkshatriya.echo.ui.media.more.MediaMoreBottomSheet
import dev.brahmkshatriya.echo.ui.playlist.delete.DeletePlaylistBottomSheet
import dev.brahmkshatriya.echo.ui.playlist.edit.EditPlaylistFragment
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.Serializer.getSerialized
import dev.brahmkshatriya.echo.utils.Serializer.putSerialized
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadInto
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadWithThumb
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.setupTransition
import dev.brahmkshatriya.echo.utils.ui.UiUtils.configureAppBar
import dev.brahmkshatriya.echo.utils.ui.UiUtils.dpToPx
import org.koin.androidx.viewmodel.ext.android.viewModel
import org.koin.core.parameter.parametersOf

class MediaFragment : Fragment(R.layout.fragment_media), MediaDetailsFragment.Parent {
    companion object {
        fun getBundle(extensionId: String, item: EchoMediaItem, loaded: Boolean) = Bundle().apply {
            putString("extensionId", extensionId)
            putSerialized("item", item)
            putBoolean("loaded", loaded)
        }
    }

    val args by lazy { requireArguments() }
    val extensionId by lazy { args.getString("extensionId")!! }
    val item by lazy { args.getSerialized<EchoMediaItem>("item")!!.getOrThrow() }
    val loaded by lazy { args.getBoolean("loaded") }

    override val fromPlayer = false
    override val feedId by lazy { item.id }

    override val viewModel by viewModel<MediaViewModel> {
        parametersOf(true, extensionId, item, loaded, false)
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        val binding = FragmentMediaBinding.bind(view)
        setupTransition(view)
        applyBackPressCallback()
        binding.appBarLayout.configureAppBar { offset ->
            binding.appbarOutline.alpha = offset
            binding.coverContainer.alpha = 1 - offset
            binding.endIcon.alpha = 1 - offset
        }
        binding.toolBar.setNavigationOnClickListener {
            parentFragmentManager.popBackStack()
        }
        binding.toolBar.setOnMenuItemClickListener {
            val item = viewModel.itemResultFlow.value?.getOrNull()?.item ?: item
            MediaMoreBottomSheet.newInstance(
                id, extensionId, item, !viewModel.isRefreshing
            ).show(parentFragmentManager, null)
            true
        }
        applyInsets {
            binding.fabContainer.applyFabInsets(it, systemInsets.value)
        }

        observe(viewModel.itemResultFlow) { result ->
            val item = result?.getOrNull()?.item ?: item
            binding.toolBar.title = item.title.trim()
            binding.endIcon.setImageResource(item.icon)
            if (item is Artist) binding.coverContainer.run {
                val maxWidth = 240.dpToPx(context)
                radius = maxWidth.toFloat()
                updateLayoutParams<ConstraintLayout.LayoutParams> {
                    matchConstraintMaxWidth = maxWidth
                }
            }
            item.cover.loadInto(binding.cover, null, item.placeHolder)
            item.background.loadWithThumb(view) { applyGradient(view, it) }
            val isEditable = (result?.getOrNull()?.item as? Playlist)?.isEditable ?: false
            binding.fabEditPlaylist.isVisible = isEditable
            binding.fabEditPlaylist.setOnClickListener {
                val playlist = item as? Playlist ?: return@setOnClickListener
                openFragment<EditPlaylistFragment>(
                    it, EditPlaylistFragment.getBundle(extensionId, playlist, loaded)
                )
            }
        }
        parentFragmentManager.setFragmentResultListener("reload", this) { _, data ->
            if (data.getString("id") == item.id) viewModel.refresh()
        }
        parentFragmentManager.setFragmentResultListener("delete", this) { _, data ->
            val playlist = item as? Playlist ?: return@setFragmentResultListener
            DeletePlaylistBottomSheet.show(
                requireActivity(), extensionId, playlist, !viewModel.isRefreshing
            )
        }
        parentFragmentManager.setFragmentResultListener("deleted", this) { _, data ->
            if (data.getString("id") == item.id) parentFragmentManager.popBackStack()
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\media\MediaHeaderAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.media

import android.content.Context
import android.icu.text.CompactDecimalFormat
import android.text.SpannableString
import android.text.Spanned
import android.text.method.LinkMovementMethod
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.TextView
import androidx.appcompat.app.AlertDialog
import androidx.core.view.isVisible
import androidx.core.view.updateLayoutParams
import androidx.core.view.updatePaddingRelative
import androidx.fragment.app.Fragment
import androidx.fragment.app.activityViewModels
import com.google.android.material.dialog.MaterialAlertDialogBuilder
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Album
import dev.brahmkshatriya.echo.common.models.Album.Type.Book
import dev.brahmkshatriya.echo.common.models.Album.Type.Compilation
import dev.brahmkshatriya.echo.common.models.Album.Type.EP
import dev.brahmkshatriya.echo.common.models.Album.Type.LP
import dev.brahmkshatriya.echo.common.models.Album.Type.PreRelease
import dev.brahmkshatriya.echo.common.models.Album.Type.Show
import dev.brahmkshatriya.echo.common.models.Album.Type.Single
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Radio
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.databinding.ItemLineBinding
import dev.brahmkshatriya.echo.databinding.ItemMediaHeaderBinding
import dev.brahmkshatriya.echo.databinding.ItemShelfErrorBinding
import dev.brahmkshatriya.echo.extensions.MediaState
import dev.brahmkshatriya.echo.ui.common.ExceptionUtils.getFinalTitle
import dev.brahmkshatriya.echo.ui.common.ExceptionUtils.getMessage
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.ui.media.MediaFragment.Companion.getBundle
import dev.brahmkshatriya.echo.ui.player.PlayerViewModel
import dev.brahmkshatriya.echo.utils.ui.SimpleItemSpan
import dev.brahmkshatriya.echo.utils.ui.UiUtils.dpToPx
import dev.brahmkshatriya.echo.utils.ui.UiUtils.toTimeString
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimRecyclerAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class MediaHeaderAdapter(
    private val listener: Listener,
    private val fromPlayer: Boolean,
) : ScrollAnimRecyclerAdapter<MediaHeaderAdapter.ViewHolder>(), GridAdapter {

    interface Listener {
        fun onRetry(view: View)
        fun onError(view: View, error: Throwable?)
        fun onDescriptionClicked(view: View, extensionId: String?, item: EchoMediaItem?)
        fun openMediaItem(extensionId: String, item: EchoMediaItem)
        fun onFollowClicked(view: View, follow: Boolean)
        fun onSavedClicked(view: View, saved: Boolean)
        fun onLikeClicked(view: View, liked: Boolean)
        fun onPlayClicked(view: View)
        fun onRadioClicked(view: View)
        fun onShareClicked(view: View)
        fun onHideClicked(view: View, hidden: Boolean)
    }

    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) = count
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) = when (viewType) {
        0 -> Success(parent, listener, fromPlayer)
        1 -> Error(parent, listener)
        2 -> Loading(parent)
        else -> throw IllegalArgumentException("Unknown view type: $viewType")
    }

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        super.onBindViewHolder(holder, position)
        when (holder) {
            is Success -> {
                val state = result?.getOrNull() ?: return
                holder.bind(state)
            }

            is Error -> {
                val error = result?.exceptionOrNull() ?: return
                holder.bind(error)
            }

            is Loading -> {}
        }
    }

    override fun getItemCount() = 1
    override fun getItemViewType(position: Int) = when (result?.isSuccess) {
        true -> 0
        false -> 1
        null -> 2
    }

    var result: Result<MediaState.Loaded<*>>? = null
        set(value) {
            field = value
            notifyItemChanged(0)
        }

    sealed class ViewHolder(itemView: View) : ScrollAnimViewHolder(itemView)
    class Success(
        parent: ViewGroup,
        private val listener: Listener,
        private val fromPlayer: Boolean,
        private val binding: ItemMediaHeaderBinding = ItemMediaHeaderBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        ),
    ) : ViewHolder(binding.root) {
        val buttons = binding.run {
            listOf(
                followButton, playButton, savedButton, likeButton, hideButton,
                radioButton, shareButton
            )
        }

        init {
            binding.followButton.setOnClickListener {
                listener.onFollowClicked(it, binding.followButton.isChecked)
                it.isEnabled = false
            }
            binding.savedButton.setOnClickListener {
                listener.onSavedClicked(it, binding.savedButton.isChecked)
                it.isEnabled = false
            }
            binding.likeButton.setOnClickListener {
                listener.onLikeClicked(it, binding.likeButton.isChecked)
                it.isEnabled = false
            }
            binding.hideButton.setOnClickListener {
                listener.onHideClicked(it, binding.hideButton.isChecked)
                it.isEnabled = false
            }
            binding.playButton.setOnClickListener {
                listener.onPlayClicked(it)
            }
            binding.radioButton.setOnClickListener {
                listener.onRadioClicked(it)
            }
            binding.shareButton.setOnClickListener {
                listener.onShareClicked(it)
                it.isEnabled = false
            }
        }


        fun configureButtons() {
            val visible = buttons.filter { it.isVisible }
            binding.buttonGroup.isVisible = visible.isNotEmpty()
            val isNotOne = visible.size > 1
            visible.forEachIndexed { index, button ->
                button.isEnabled = true
                if (index == 0 && isNotOne) button.run {
                    updatePaddingRelative(
                        start = if (icon != null) 16.dpToPx(context) else 24.dpToPx(context),
                        end = 24.dpToPx(context)
                    )
                    iconPadding = 8.dpToPx(context)
                    text = contentDescription
                } else button.run {
                    updatePaddingRelative(start = 12.dpToPx(context), end = 12.dpToPx(context))
                    iconPadding = 0
                    text = null
                }
            }
            binding.buttonGroup.updateLayoutParams<ViewGroup.MarginLayoutParams> {
                width = if (isNotOne) ViewGroup.LayoutParams.MATCH_PARENT
                else ViewGroup.LayoutParams.WRAP_CONTENT
                bottomMargin = if (isNotOne) 0 else (-56).dpToPx(binding.root.context)
            }
            binding.description.updateLayoutParams<ViewGroup.MarginLayoutParams> {
                marginEnd = if (isNotOne) 0 else 48.dpToPx(binding.root.context)
            }
        }

        var clickEnabled = true
        var state: MediaState.Loaded<*>? = null

        fun bind(state: MediaState.Loaded<*>) = with(binding) {
            this@Success.state = state
            followButton.isVisible = state.isFollowed != null
            followButton.isChecked = state.isFollowed ?: false
            followButton.contentDescription = root.context.getString(
                if (state.isFollowed == true) R.string.unfollow else R.string.follow
            )

            savedButton.isVisible = state.isSaved != null
            savedButton.isChecked = state.isSaved ?: false
            savedButton.contentDescription = root.context.getString(
                if (state.isSaved == true) R.string.unsave else R.string.save
            )

            likeButton.isVisible = state.isLiked != null && !fromPlayer
            likeButton.isChecked = state.isLiked ?: false
            likeButton.contentDescription = root.context.getString(
                if (state.isLiked == true) R.string.unlike else R.string.like
            )

            hideButton.isVisible = state.isHidden != null
            hideButton.isChecked = state.isHidden ?: false
            hideButton.contentDescription = root.context.getString(
                if (state.isHidden == true) R.string.unhide else R.string.hide
            )

            playButton.isVisible = state.item is Track && !fromPlayer && state.item.isPlayable == Track.Playable.Yes
            radioButton.isVisible = state.showRadio
            shareButton.isVisible = state.showShare
            configureButtons()

            explicit.isVisible = state.item.isExplicit
            followers.isVisible = state.followers != null
            followers.text = state.followers?.let {
                val formatter = CompactDecimalFormat.getInstance()
                root.context.getString(R.string.x_followers, formatter.format(it))
            }
            val span =
                root.context.getSpan(true, state.extensionId, state.item) { id, item ->
                    clickEnabled = false
                    listener.openMediaItem(id, item)
                    description.post { clickEnabled = true }
                }
            description.text = span
            description.isVisible = span.isNotEmpty()
        }

        init {
            binding.run {
                description.movementMethod = LinkMovementMethod.getInstance()
                description.setOnClickListener {
                    if (clickEnabled) listener.onDescriptionClicked(
                        it,
                        state?.extensionId,
                        state?.item
                    )
                }
            }
        }
    }

    class Error(
        parent: ViewGroup,
        listener: Listener,
        private val binding: ItemShelfErrorBinding = ItemShelfErrorBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        ),
    ) : ViewHolder(binding.root) {
        var throwable: Throwable? = null

        init {
            binding.errorView.setOnClickListener {
                listener.onError(binding.error, throwable)
            }
            binding.retry.setOnClickListener {
                listener.onRetry(it)
            }
        }

        fun bind(throwable: Throwable) {
            this.throwable = throwable
            binding.error.run {
                transitionName = throwable.hashCode().toString()
                text = context.getFinalTitle(throwable)
            }
        }
    }

    class Loading(
        parent: ViewGroup,
        binding: ItemLineBinding = ItemLineBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        ),
    ) : ViewHolder(binding.root) {
        init {
            itemView.alpha = 0f
        }
    }

    companion object {
        private const val MAX_DESC_TEXT = 144
        private fun String.ellipsize() = if (length > MAX_DESC_TEXT) {
            substring(0, MAX_DESC_TEXT) + "..."
        } else this

        private const val DIVIDER = " • "
        fun Context.getSpan(
            compact: Boolean,
            extensionId: String,
            item: EchoMediaItem,
            openMediaItem: (String, EchoMediaItem) -> Unit = { a, b -> },
        ): SpannableString = when (item) {
            is EchoMediaItem.Lists -> {
                val madeBy = item.artists.joinToString(", ") { it.name }
                val span = SpannableString(buildString {
                    val firstRow = listOfNotNull(
                        getString(item.typeInt),
                        item.date?.toString(),
                    ).joinToString(DIVIDER)
                    val secondRow = listOfNotNull(
                        item.toTrackString(this@getSpan),
                        item.duration?.toTimeString()
                    ).joinToString(DIVIDER)
                    if (firstRow.isNotEmpty()) appendLine(firstRow)
                    if (secondRow.isNotEmpty()) appendLine(secondRow)
                    val desc = item.description
                    if (desc != null) {
                        appendLine()
                        appendLine(if (compact) desc.ellipsize() else desc)
                    }
                    if (madeBy.isNotEmpty()) {
                        appendLine()
                        appendLine(getString(R.string.by_x, madeBy))
                    }
                    if (item.label != null) {
                        appendLine()
                        appendLine(item.label)
                    }
                }.trimEnd('\n').trimStart('\n'))
                val madeByIndex = span.indexOf(madeBy)
                item.artists.forEach {
                    val start = span.indexOf(it.name, madeByIndex)
                    if (start != -1) {
                        val end = start + it.name.length
                        val clickableSpan = SimpleItemSpan(this) {
                            openMediaItem(extensionId, it)
                        }
                        span.setSpan(
                            clickableSpan, start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE
                        )
                    }
                }
                span
            }

            is Artist -> {
                val desc = if (compact) item.bio?.ellipsize() else item.bio
                SpannableString(desc ?: "")
            }

            is Track -> {
                SpannableString(buildString {
                    val firstRow = listOfNotNull(
                        getString(
                            when (item.type) {
                                Track.Type.Song, Track.Type.VideoSong -> R.string.song
                                Track.Type.Video, Track.Type.HorizontalVideo -> R.string.video
                                Track.Type.Podcast -> R.string.podcast
                            }
                        ),
                        item.releaseDate
                    ).joinToString(DIVIDER)
                    val secondRow = listOfNotNull(
                        item.duration?.toTimeString(),
                        if (item.plays != null) {
                            val formatter = CompactDecimalFormat.getInstance()
                            getString(R.string.x_plays, formatter.format(item.plays))
                        } else null
                    ).joinToString(DIVIDER)
                    if (firstRow.isNotEmpty()) appendLine(firstRow)
                    if (secondRow.isNotEmpty()) appendLine(secondRow)
                    val notPlayable = item.playableString(this@getSpan)
                    if (!notPlayable.isNullOrEmpty()) {
                        appendLine()
                        appendLine(notPlayable)
                    }
                    val desc = item.description
                    if (desc != null) {
                        appendLine()
                        appendLine(if (compact) desc.ellipsize() else desc)
                        appendLine()
                    }
                    val genres = item.genres.joinToString(", ")
                    if (genres.isNotEmpty()) {
                        appendLine(getString(R.string.genres_x, genres))
                    }
                    val isrc = item.isrc
                    if (isrc != null) {
                        appendLine(getString(R.string.isrc_x, isrc))
                    }
                    val label = item.album?.label
                    if (label != null) {
                        appendLine()
                        appendLine(label)
                    }
                    val lastRow = listOfNotNull(
                        item.albumDiscNumber?.let {
                            getString(R.string.disc_number_n, it)
                        },
                        item.albumOrderNumber?.let {
                            getString(R.string.album_order_n, it)
                        }
                    ).joinToString(DIVIDER)
                    if (lastRow.isNotEmpty()) {
                        appendLine()
                        appendLine(lastRow)
                    }
                }.trimStart('\n').trimEnd('\n'))
            }
        }

        fun Context.unfuckedString(
            numberStringId: Int, nStringId: Int, count: Int,
        ) = runCatching {
            resources.getQuantityString(numberStringId, count, count)
        }.getOrNull() ?: getString(nStringId, count)

        fun Fragment.getMediaHeaderListener(viewModel: MediaDetailsViewModel) = object : Listener {
            override fun onRetry(view: View) {
                viewModel.refresh()
            }

            override fun onError(view: View, error: Throwable?) {
                error ?: return
                requireActivity().getMessage(error, view).action?.handler?.invoke()
            }

            override fun openMediaItem(extensionId: String, item: EchoMediaItem) {
                openFragment<MediaFragment>(null, getBundle(extensionId, item, false))
            }

            override fun onFollowClicked(view: View, follow: Boolean) {
                viewModel.followItem(follow)
            }

            override fun onSavedClicked(view: View, saved: Boolean) {
                viewModel.saveToLibrary(saved)
            }

            override fun onLikeClicked(view: View, liked: Boolean) {
                viewModel.likeItem(liked)
            }

            override fun onHideClicked(view: View, hidden: Boolean) {
                viewModel.hideItem(hidden)
            }

            override fun onPlayClicked(view: View) {
                val (extensionId, item, loaded) = viewModel.getItem() ?: return
                val vm by activityViewModels<PlayerViewModel>()
                vm.play(extensionId, item, loaded)
            }

            override fun onRadioClicked(view: View) {
                val (extensionId, item, loaded) = viewModel.getItem() ?: return
                val vm by activityViewModels<PlayerViewModel>()
                vm.radio(extensionId, item, loaded)
            }

            override fun onShareClicked(view: View) {
                viewModel.onShare()
            }

            override fun onDescriptionClicked(
                view: View, extensionId: String?, item: EchoMediaItem?,
            ) {
                item ?: return
                extensionId ?: return
                val context = requireContext()
                var dialog: AlertDialog? = null
                val builder = MaterialAlertDialogBuilder(context)
                builder.setTitle(item.title)
                builder.setMessage(context.getSpan(false, extensionId, item) { m, n ->
                    openMediaItem(m, n)
                    dialog?.dismiss()
                })
                builder.setPositiveButton(getString(R.string.okay)) { d, _ ->
                    d.dismiss()
                }
                dialog = builder.create()
                dialog.show()
                val text = dialog.findViewById<TextView>(android.R.id.message)!!
                text.movementMethod = LinkMovementMethod.getInstance()
            }
        }

        val EchoMediaItem.Lists.typeInt
            get() = when (this) {
                is Album -> when (type) {
                    PreRelease -> R.string.pre_release
                    Single -> R.string.single
                    EP -> R.string.ep
                    LP -> R.string.lp
                    Compilation -> R.string.compilation
                    Show -> R.string.show
                    Book -> R.string.book
                    null -> R.string.album
                }

                is Playlist -> R.string.playlist
                is Radio -> R.string.radio
            }

        fun EchoMediaItem.Lists.toTrackString(context: Context) = context.run {
            val tracks = trackCount?.toInt()
            if (tracks != null) {
                when (type) {
                    PreRelease, Single, EP, LP, Compilation -> unfuckedString(
                        R.plurals.number_songs, R.string.n_songs, tracks
                    )

                    Show -> unfuckedString(
                        R.plurals.number_episodes, R.string.n_episodes, tracks
                    )

                    Book -> unfuckedString(
                        R.plurals.number_chapters, R.string.n_chapters, tracks
                    )

                    null -> unfuckedString(
                        R.plurals.number_tracks, R.string.n_tracks, tracks
                    )
                }
            } else null
        }

        fun Track.playableString(context: Context) = when (val play = isPlayable) {
            is Track.Playable.No -> context.getString(R.string.not_playable_x, play.reason)
            Track.Playable.Yes -> null
            Track.Playable.RegionLocked -> context.getString(R.string.unavailable_in_your_region)
            Track.Playable.Unreleased -> if (releaseDate != null) context.getString(
                R.string.releases_on_x, releaseDate.toString()
            ) else context.getString(R.string.not_yet_released)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\media\MediaViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.media

import androidx.lifecycle.viewModelScope
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.MediaState
import dev.brahmkshatriya.echo.extensions.cache.Cached
import dev.brahmkshatriya.echo.extensions.cache.Cached.loadMedia
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.collectLatest
import kotlinx.coroutines.flow.map
import kotlinx.coroutines.flow.merge
import kotlinx.coroutines.launch

class MediaViewModel(
    extensionLoader: ExtensionLoader,
    downloader: Downloader,
    val app: App,
    loadFeeds: Boolean,
    val extensionId: String,
    val item: EchoMediaItem,
    val loaded: Boolean,
) : MediaDetailsViewModel(
    downloader, app, loadFeeds,
    extensionLoader.music.map { list -> list.find { it.id == extensionId } }
) {

    override fun getItem(): Triple<String, EchoMediaItem, Boolean> {
        val result = itemResultFlow.value?.getOrNull()?.item
        return Triple(
            extensionId,
            result ?: item,
            loaded || result != null
        )
    }

    init {
        var force = false
        viewModelScope.launch(Dispatchers.IO) {
            listOf(extensionFlow, refreshFlow).merge().collectLatest {
                itemResultFlow.value = null
                cacheResultFlow.value = null
                cacheResultFlow.value = Cached.getMedia<EchoMediaItem>(app, extensionId, item.id)
                    .getOrNull()?.let { Result.success(it) }
                val extension = extensionFlow.value ?: return@collectLatest
                itemResultFlow.value = loadMedia(
                    app, extension, MediaState.Unloaded(extension.id, item)
                )
                force = true
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\media\more\MediaMoreBottomSheet.kt
================================================================================

package dev.brahmkshatriya.echo.ui.media.more

import android.os.Bundle
import android.view.View
import androidx.fragment.app.Fragment
import androidx.paging.LoadState
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.clients.ExtensionClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditClient
import dev.brahmkshatriya.echo.common.clients.TrackClient
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.databinding.DialogMediaMoreBinding
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.extensions.MediaState
import dev.brahmkshatriya.echo.extensions.builtin.offline.OfflineExtension
import dev.brahmkshatriya.echo.extensions.builtin.unified.UnifiedExtension.Companion.EXTENSION_ID
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.ui.common.GridAdapter.Companion.configureGridLayout
import dev.brahmkshatriya.echo.ui.download.DownloadViewModel
import dev.brahmkshatriya.echo.ui.feed.FeedLoadingAdapter
import dev.brahmkshatriya.echo.ui.feed.FeedLoadingAdapter.Companion.createListener
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.icon
import dev.brahmkshatriya.echo.ui.media.MediaFragment
import dev.brahmkshatriya.echo.ui.media.MediaViewModel
import dev.brahmkshatriya.echo.ui.media.more.MoreButton.Companion.button
import dev.brahmkshatriya.echo.ui.player.PlayerViewModel
import dev.brahmkshatriya.echo.ui.player.audiofx.AudioEffectsBottomSheet
import dev.brahmkshatriya.echo.ui.player.more.lyrics.LyricsItemAdapter
import dev.brahmkshatriya.echo.ui.player.quality.QualitySelectionBottomSheet
import dev.brahmkshatriya.echo.ui.player.sleep.SleepTimerBottomSheet
import dev.brahmkshatriya.echo.ui.playlist.delete.DeletePlaylistBottomSheet
import dev.brahmkshatriya.echo.ui.playlist.edit.EditPlaylistBottomSheet
import dev.brahmkshatriya.echo.ui.playlist.edit.EditPlaylistFragment
import dev.brahmkshatriya.echo.ui.playlist.save.SaveToPlaylistBottomSheet
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.Serializer.getSerialized
import dev.brahmkshatriya.echo.utils.Serializer.putSerialized
import kotlinx.coroutines.flow.combine
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import org.koin.androidx.viewmodel.ext.android.viewModel
import org.koin.core.parameter.parametersOf

class MediaMoreBottomSheet : BottomSheetDialogFragment(R.layout.dialog_media_more) {
    companion object {
        fun newInstance(
            contId: Int,
            extensionId: String,
            item: EchoMediaItem,
            loaded: Boolean,
            fromPlayer: Boolean = false,
            context: EchoMediaItem? = null,
            tabId: String? = null,
            pos: Int? = null,
        ) = MediaMoreBottomSheet().apply {
            arguments = Bundle().apply {
                putInt("contId", contId)
                putString("extensionId", extensionId)
                putSerialized("item", item)
                putBoolean("loaded", loaded)
                putSerialized("context", context)
                putBoolean("fromPlayer", fromPlayer)
                putString("tabId", tabId)
                putInt("pos", pos ?: -1)
            }
        }
    }

    private val args by lazy { requireArguments() }
    private val contId by lazy { args.getInt("contId", -1).takeIf { it != -1 }!! }
    private val extensionId by lazy { args.getString("extensionId")!! }
    private val item by lazy { args.getSerialized<EchoMediaItem>("item")!!.getOrThrow() }
    private val loaded by lazy { args.getBoolean("loaded") }
    private val itemContext by lazy { args.getSerialized<EchoMediaItem?>("context")?.getOrThrow() }
    private val tabId by lazy { args.getString("tabId") }
    private val pos by lazy { args.getInt("pos") }
    private val fromPlayer by lazy { args.getBoolean("fromPlayer") }
    private val delete by lazy { args.getBoolean("delete", false) }

    private val vm by viewModel<MediaViewModel> {
        parametersOf(false, extensionId, item, loaded, delete)
    }
    private val playerViewModel by activityViewModel<PlayerViewModel>()

    private val actionAdapter by lazy { MoreButtonAdapter() }
    private val headerAdapter by lazy {
        MoreHeaderAdapter({ dismiss() }, {
            openItemFragment(extensionId, item, loaded)
            dismiss()
        })
    }

    private val loadingAdapter by lazy {
        FeedLoadingAdapter(createListener { vm.refresh() }) {
            val holder = LyricsItemAdapter.Loading(it)
            holder
        }
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        val binding = DialogMediaMoreBinding.bind(view)
        observe(playerViewModel.playerState.current) {
            headerAdapter.onCurrentChanged(it)
        }
        val actionFlow =
            combine(vm.downloadsFlow, vm.uiResultFlow) { _, _ -> }
        observe(actionFlow) {
            val client = vm.extensionFlow.value?.instance?.value()?.getOrNull()
            val result = vm.uiResultFlow.value?.getOrNull()
            val downloads = vm.downloadsFlow.value.filter { it.download.finalFile != null }
            val loaded = if (result != null) true else loaded
            val list = getButtons(client, result, loaded, downloads)
            actionAdapter.submitList(list)
            headerAdapter.item = result?.item ?: item
        }
        observe(vm.itemResultFlow) { result ->
            loadingAdapter.loadState = result?.map { LoadState.NotLoading(false) }?.getOrElse {
                LoadState.Error(it)
            } ?: LoadState.Loading
        }
        configureGridLayout(
            binding.root,
            GridAdapter.Concat(
                headerAdapter,
                actionAdapter,
                loadingAdapter
            )
        )
    }

    private fun getButtons(
        client: ExtensionClient?,
        state: MediaState.Loaded<*>?,
        loaded: Boolean,
        downloads: List<Downloader.Info>
    ) = getPlayerButtons() +
            getPlayButtons(client, state?.item ?: item, loaded) +
            getPlaylistEditButtons(client, state, loaded) +
            getDownloadButtons(client, state, downloads) +
            getActionButtons(state) +
            getItemButtons(state?.item ?: item)

    private fun getPlayerButtons() = if (fromPlayer) listOf(
        button("audio_fx", R.string.audio_fx, R.drawable.ic_equalizer) {
            AudioEffectsBottomSheet().show(parentFragmentManager, null)
        },
        button("sleep_timer", R.string.sleep_timer, R.drawable.ic_snooze) {
            SleepTimerBottomSheet().show(parentFragmentManager, null)
        },
        button("quality_selection", R.string.quality_selection, R.drawable.ic_high_quality) {
            QualitySelectionBottomSheet().show(parentFragmentManager, null)
        }
    ) else listOf()

    private fun getPlayButtons(
        client: ExtensionClient?, item: EchoMediaItem, loaded: Boolean
    ) = if (client is TrackClient) listOfNotNull(
        button("play", R.string.play, R.drawable.ic_play) {
            playerViewModel.play(extensionId, item, loaded)
        },
        if (playerViewModel.queue.isNotEmpty())
            button("next", R.string.add_to_next, R.drawable.ic_playlist_play) {
                playerViewModel.addToNext(extensionId, item, loaded)
            }
        else null,
        if (playerViewModel.queue.size > 1)
            button("queue", R.string.add_to_queue, R.drawable.ic_playlist_add) {
                playerViewModel.addToQueue(extensionId, item, loaded)
            }
        else null
    ) else listOf()

    fun getPlaylistEditButtons(
        client: ExtensionClient?, state: MediaState<*>?, loaded: Boolean
    ) = run {
        if (client !is PlaylistEditClient) return@run listOf()
        val item = state?.item ?: item
        val isEditable = item is Playlist && item.isEditable
        listOfNotNull(
            if (loaded) button(
                "save_to_playlist", R.string.save_to_playlist, R.drawable.ic_library_music
            ) {
                SaveToPlaylistBottomSheet.newInstance(extensionId, item)
                    .show(parentFragmentManager, null)
            } else null,
            if (isEditable) button(
                "edit_playlist", R.string.edit_playlist, R.drawable.ic_edit_note
            ) {
                openFragment<EditPlaylistFragment>(
                    EditPlaylistFragment.getBundle(extensionId, item, loaded)
                )
            } else null,
            if (isEditable) button(
                "delete_playlist", R.string.delete_playlist, R.drawable.ic_delete
            ) {
                DeletePlaylistBottomSheet.show(requireActivity(), extensionId, item, loaded)
            } else null,
            if ((itemContext as? Playlist)?.isEditable == true && item is Track) button(
                "remove_from_playlist", R.string.remove, R.drawable.ic_cancel
            ) {
                EditPlaylistBottomSheet.newInstance(
                    extensionId, itemContext as Playlist, tabId, pos
                ).show(parentFragmentManager, null)
            } else null
        )
    }

    fun getDownloadButtons(
        client: ExtensionClient?, state: MediaState<*>?, downloads: List<Downloader.Info>
    ) = run {
        val item = state?.item ?: item
        val shouldShowDelete = when (item) {
            is Track -> downloads.any { it.download.trackId == item.id }
            else -> downloads.any { it.context?.itemId == item.id }
        }
        val downloadable =
            state != null && client is TrackClient && state.item.extras[EXTENSION_ID] != OfflineExtension.metadata.id

        listOfNotNull(
            if (downloadable) button(
                "download", R.string.download, R.drawable.ic_download_for_offline
            ) {
                val downloadViewModel by activityViewModel<DownloadViewModel>()
                downloadViewModel.addToDownload(requireActivity(), extensionId, item, itemContext)
            } else null,
            if (shouldShowDelete) button(
                "delete_download", R.string.delete_download, R.drawable.ic_scan_delete
            ) {
                val downloadViewModel by activityViewModel<DownloadViewModel>()
                downloadViewModel.deleteDownload(item)
            } else null
        )

    }

    fun getActionButtons(
        state: MediaState.Loaded<*>?,
    ) = listOfNotNull(
        if (state?.isFollowed != null) button(
            "follow", if (state.isFollowed) R.string.unfollow else R.string.follow,
            if (state.isFollowed) R.drawable.ic_check_circle_filled else R.drawable.ic_check_circle
        ) {
            vm.followItem(!state.isFollowed)
        } else null,
        if (state?.isSaved != null) button(
            "save_to_library",
            if (state.isSaved) R.string.remove_from_library else R.string.save_to_library,
            if (state.isSaved) R.drawable.ic_bookmark_filled else R.drawable.ic_bookmark_outline
        ) {
            vm.saveToLibrary(!state.isSaved)
        } else null,
        if (state?.isLiked != null) button(
            "like", if (state.isLiked) R.string.unlike else R.string.like,
            if (state.isLiked) R.drawable.ic_heart_filled_40dp else R.drawable.ic_heart_outline_40dp
        ) {
            vm.likeItem(!state.isLiked)
        } else null,
        if (state?.isHidden != null) button(
            "hide", if (state.isHidden) R.string.unhide else R.string.hide,
            if (state.isHidden) R.drawable.ic_unhide else R.drawable.ic_hide
        ) {
            vm.hideItem(!state.isHidden)
        } else null,
        if (state?.showRadio == true) button(
            "radio", R.string.radio, R.drawable.ic_sensors
        ) {
            playerViewModel.radio(extensionId, state.item, true)
        } else null,
        if (state?.showShare == true) button(
            "share", R.string.share, R.drawable.ic_share
        ) {
            vm.onShare()
        } else null
    )

    private fun getItemButtons(item: EchoMediaItem) = when (item) {
        is Track -> item.artists + listOfNotNull(item.album)
        is EchoMediaItem.Lists -> item.artists
        is Artist -> listOf()
    }.map {
        button(it.id, it.title, it.icon) {
            openItemFragment(extensionId, it)
        }
    }

    private inline fun <reified T : Fragment> openFragment(bundle: Bundle) {
        parentFragmentManager.findFragmentById(contId)!!
            .openFragment<T>(null, bundle)
    }

    private fun openItemFragment(
        extensionId: String?, item: EchoMediaItem?, loaded: Boolean = false
    ) {
        extensionId ?: return
        item ?: return
        openFragment<MediaFragment>(MediaFragment.getBundle(extensionId, item, loaded))
        dismiss()
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\media\more\MoreButton.kt
================================================================================

package dev.brahmkshatriya.echo.ui.media.more

import androidx.fragment.app.DialogFragment
import androidx.recyclerview.widget.DiffUtil

data class MoreButton(
    val id: String, val title: String, val icon: Int, val onClick: () -> Unit
) {
    object DiffCallback : DiffUtil.ItemCallback<MoreButton>() {
        override fun areItemsTheSame(oldItem: MoreButton, newItem: MoreButton) =
            oldItem.id == newItem.id

        override fun areContentsTheSame(oldItem: MoreButton, newItem: MoreButton) =
            oldItem == newItem
    }

    companion object {
        fun DialogFragment.button(
            id: String, title: String, icon: Int, onClick: () -> Unit
        ) = MoreButton(id, title, icon) {
            onClick()
            dismiss()
        }

        fun DialogFragment.button(
            id: String, title: Int, icon: Int, onClick: () -> Unit
        ) = button(id, getString(title), icon, onClick)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\media\more\MoreButtonAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.media.more

import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.recyclerview.widget.ListAdapter
import dev.brahmkshatriya.echo.databinding.ItemMoreButtonBinding
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class MoreButtonAdapter
    : ListAdapter<MoreButton, MoreButtonAdapter.ViewHolder>(MoreButton.DiffCallback), GridAdapter {
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) = ViewHolder(parent)
    override fun onBindViewHolder(holder: ViewHolder, position: Int) =
        holder.bind(getItem(position))

    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) = 1

    class ViewHolder(
        parent: ViewGroup,
        val binding: ItemMoreButtonBinding = ItemMoreButtonBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        )
    ) : ScrollAnimViewHolder(binding.root) {
        fun bind(item: MoreButton) = with(binding.root) {
            text = item.title
            setOnClickListener { item.onClick() }
            setIconResource(item.icon)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\media\more\MoreHeaderAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.media.more

import android.graphics.drawable.Animatable
import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.core.view.isVisible
import androidx.recyclerview.widget.RecyclerView
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.databinding.ItemMoreHeaderBinding
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.playback.PlayerState.Current.Companion.isPlaying
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.applyCover
import dev.brahmkshatriya.echo.ui.media.MediaHeaderAdapter.Companion.typeInt
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class MoreHeaderAdapter(
    private val onCloseClicked: () -> Unit,
    private val onItemClicked: () -> Unit
) : RecyclerView.Adapter<MoreHeaderAdapter.ViewHolder>(), GridAdapter {
    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) = count
    override fun getItemCount() = 1
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val holder = ViewHolder(parent)
        holder.binding.run {
            coverContainer.cover.clipToOutline = true
            coverContainer.root.setOnClickListener { onItemClicked() }
            closeButton.setOnClickListener { onCloseClicked() }
        }
        return holder
    }

    var item: EchoMediaItem? = null
        set(value) {
            field = value
            notifyItemChanged(0)
        }

    private var viewHolder: ViewHolder? = null
    override fun onBindViewHolder(holder: ViewHolder, position: Int) = with(holder.binding) {
        viewHolder = holder
        val item = item
        holder.bind(item)
        holder.onCurrentChanged(item, current)
    }

    class ViewHolder(
        parent: ViewGroup,
        val binding: ItemMoreHeaderBinding = ItemMoreHeaderBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        )
    ) : ScrollAnimViewHolder(binding.root) {

        fun bind(item: EchoMediaItem?) = with(binding) {
            if (item == null) return@with
            title.text = item.title
            type.text = when (item) {
                is Artist -> ""
                is EchoMediaItem.Lists -> root.context.getString(item.typeInt)
                is Track -> root.context.getString(R.string.track)
            }
            coverContainer.run { applyCover(item, cover, listBg1, listBg2, icon) }
        }

        fun onCurrentChanged(item: EchoMediaItem?, current: PlayerState.Current?) {
            binding.coverContainer.isPlaying.run {
                val isPlaying = current.isPlaying(item?.id)
                isVisible = isPlaying
                (icon as Animatable).start()
            }
        }
    }

    var current: PlayerState.Current? = null
    fun onCurrentChanged(current: PlayerState.Current?) {
        this.current = current
        viewHolder?.onCurrentChanged(item, current)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\PlayerColors.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player

import android.content.Context
import android.graphics.Bitmap
import androidx.palette.graphics.Palette
import com.google.android.material.color.MaterialColors
import dev.brahmkshatriya.echo.MainActivity.Companion.isAmoled
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.utils.ui.UiUtils.isNightMode

data class PlayerColors(
    val background: Int,
    val accent: Int,
    val onBackground: Int,
) {
    companion object {
        fun Context.getColorsFrom(bitmap: Bitmap?): PlayerColors? {
            bitmap ?: return null
            val palette = Palette.from(bitmap).generate()
            return if (!isAmoled()) {
                val lightMode = !isNightMode()
                val lightSwatch = palette.run {
                    lightVibrantSwatch ?: vibrantSwatch ?: lightMutedSwatch
                }
                val darkSwatch = palette.run {
                    darkVibrantSwatch ?: darkMutedSwatch ?: mutedSwatch
                }
                val bgSwatch = if (lightMode) lightSwatch else darkSwatch
                val accentSwatch = if (lightMode) darkSwatch else lightSwatch
                bgSwatch?.run {
                    PlayerColors(rgb, accentSwatch?.rgb ?: titleTextColor, bodyTextColor)
                }
            } else defaultPlayerColors().let { default ->
                val dominantColor = palette.run {
                    vibrantSwatch?.rgb ?: getDominantColor(0).takeIf { it != 0 }
                } ?: return null
                PlayerColors(default.background, dominantColor, default.onBackground)
            }
        }

        fun Context.defaultPlayerColors(): PlayerColors {
            val background = MaterialColors.getColor(
                this, R.attr.navBackground, 0
            )
            val primary = MaterialColors.getColor(
                this, androidx.appcompat.R.attr.colorPrimary, 0
            )
            val onSurface = MaterialColors.getColor(
                this, com.google.android.material.R.attr.colorOnSurface, 0
            )
            return PlayerColors(background, primary, onSurface)
        }

        fun getDominantColor(bitmap: Bitmap): Int {
            return Palette.from(bitmap).generate().getDominantColor(0)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\PlayerFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player

import android.content.Context
import android.content.res.ColorStateList
import android.graphics.Color
import android.graphics.Outline
import android.graphics.drawable.Animatable
import android.graphics.drawable.AnimatedVectorDrawable
import android.graphics.drawable.Drawable
import android.os.Bundle
import android.text.SpannableString
import android.text.Spanned
import android.text.method.LinkMovementMethod
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.view.ViewOutlineProvider
import android.widget.ProgressBar
import androidx.annotation.OptIn
import androidx.appcompat.content.res.AppCompatResources
import androidx.core.graphics.drawable.toBitmap
import androidx.core.net.toUri
import androidx.core.view.doOnLayout
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.lifecycle.lifecycleScope
import androidx.media3.common.C
import androidx.media3.common.MediaItem
import androidx.media3.common.Player
import androidx.media3.common.Player.REPEAT_MODE_ALL
import androidx.media3.common.Player.REPEAT_MODE_OFF
import androidx.media3.common.Player.REPEAT_MODE_ONE
import androidx.media3.common.util.UnstableApi
import androidx.media3.datasource.DefaultHttpDataSource
import androidx.media3.datasource.cache.CacheDataSource
import androidx.media3.datasource.cache.SimpleCache
import androidx.media3.exoplayer.ExoPlayer
import androidx.media3.exoplayer.source.DefaultMediaSourceFactory
import androidx.media3.ui.AspectRatioFrameLayout.RESIZE_MODE_FIT
import androidx.media3.ui.AspectRatioFrameLayout.RESIZE_MODE_ZOOM
import androidx.media3.ui.CaptionStyleCompat
import androidx.media3.ui.CaptionStyleCompat.EDGE_TYPE_OUTLINE
import com.google.android.material.bottomsheet.BottomSheetBehavior.STATE_COLLAPSED
import com.google.android.material.bottomsheet.BottomSheetBehavior.STATE_EXPANDED
import com.google.android.material.bottomsheet.BottomSheetBehavior.STATE_HIDDEN
import com.google.android.material.slider.Slider
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.databinding.FragmentPlayerBinding
import dev.brahmkshatriya.echo.playback.MediaItemUtils.background
import dev.brahmkshatriya.echo.playback.MediaItemUtils.context
import dev.brahmkshatriya.echo.playback.MediaItemUtils.extensionId
import dev.brahmkshatriya.echo.playback.MediaItemUtils.isLiked
import dev.brahmkshatriya.echo.playback.MediaItemUtils.isLoaded
import dev.brahmkshatriya.echo.playback.MediaItemUtils.showBackground
import dev.brahmkshatriya.echo.playback.MediaItemUtils.track
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.common.UiViewModel
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyHorizontalInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.isFinalState
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.setupPlayerMoreBehavior
import dev.brahmkshatriya.echo.ui.media.MediaFragment
import dev.brahmkshatriya.echo.ui.media.more.MediaMoreBottomSheet
import dev.brahmkshatriya.echo.ui.player.PlayerColors.Companion.defaultPlayerColors
import dev.brahmkshatriya.echo.ui.player.PlayerColors.Companion.getColorsFrom
import dev.brahmkshatriya.echo.ui.player.PlayerTrackAdapter.Companion.configureClicking
import dev.brahmkshatriya.echo.ui.player.quality.FormatUtils.getDetails
import dev.brahmkshatriya.echo.ui.player.quality.QualitySelectionBottomSheet
import dev.brahmkshatriya.echo.utils.ContextUtils.emit
import dev.brahmkshatriya.echo.utils.ContextUtils.getSettings
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadBlurred
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.animateVisibility
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoClearedNullable
import dev.brahmkshatriya.echo.utils.ui.CheckBoxListener
import dev.brahmkshatriya.echo.utils.ui.SimpleItemSpan
import dev.brahmkshatriya.echo.utils.ui.UiUtils.dpToPx
import dev.brahmkshatriya.echo.utils.ui.UiUtils.hideSystemUi
import dev.brahmkshatriya.echo.utils.ui.UiUtils.isLandscape
import dev.brahmkshatriya.echo.utils.ui.UiUtils.isRTL
import dev.brahmkshatriya.echo.utils.ui.UiUtils.marquee
import dev.brahmkshatriya.echo.utils.ui.UiUtils.toTimeString
import dev.brahmkshatriya.echo.utils.ui.ViewPager2Utils.registerOnUserPageChangeCallback
import dev.brahmkshatriya.echo.utils.ui.ViewPager2Utils.supportBottomSheetBehavior
import kotlinx.coroutines.launch
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import kotlin.math.abs
import kotlin.math.max
import kotlin.math.min

class PlayerFragment : Fragment() {
    private var binding by autoClearedNullable<FragmentPlayerBinding>()
    private val viewModel by activityViewModel<PlayerViewModel>()
    private val uiViewModel by activityViewModel<UiViewModel>()
    private val adapter by lazy {
        PlayerTrackAdapter(uiViewModel, viewModel.playerState.current, adapterListener)
    }

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?,
    ): View {
        binding = FragmentPlayerBinding.inflate(inflater, container, false)
        return binding!!.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        val binding = binding!!
        binding.viewPager.supportBottomSheetBehavior()
        setupPlayerMoreBehavior(uiViewModel, binding.playerMoreContainer)
        configureOutline(binding.root)
        configureCollapsing(binding)
        configureColors()
        configurePlayerControls()
        configureBackgroundPlayerView()
    }

    private val collapseHeight by lazy {
        resources.getDimension(R.dimen.collapsed_cover_size).toInt()
    }

    private fun configureOutline(view: View) {
        val padding = 8.dpToPx(requireContext())
        var currHeight = collapseHeight
        var currRound = padding.toFloat()
        var currRight = 0
        var currLeft = 0
        view.outlineProvider = object : ViewOutlineProvider() {
            override fun getOutline(view: View, outline: Outline) {
                outline.setRoundRect(
                    currLeft, 0, currRight, currHeight, currRound
                )
            }
        }
        view.clipToOutline = true

        var leftPadding = 0
        var rightPadding = 0

        val maxElevation = 4.dpToPx(requireContext()).toFloat()
        fun updateOutline() {
            val offset = max(0f, uiViewModel.playerSheetOffset.value)
            val inv = 1 - offset
            view.elevation = maxElevation * inv
            currHeight = collapseHeight + ((view.height - collapseHeight) * offset).toInt()
            currLeft = (leftPadding * inv).toInt()
            currRight = view.width - (rightPadding * inv).toInt()
            currRound = max(padding * inv, padding * uiViewModel.playerBackProgress.value * 2)
            view.invalidateOutline()
        }
        observe(uiViewModel.combined) {
            leftPadding = (if (view.context.isRTL()) it.end else it.start) + padding
            rightPadding = (if (view.context.isRTL()) it.start else it.end) + padding
            updateOutline()
        }
        observe(uiViewModel.playerBackProgress) { updateOutline() }
        observe(uiViewModel.playerSheetOffset) { updateOutline() }
        view.doOnLayout { updateOutline() }
    }

    private fun configureCollapsing(binding: FragmentPlayerBinding) {
        binding.playerCollapsedContainer.root.clipToOutline = true

        val collapsedTopPadding = 8.dpToPx(requireContext())
        var currRound = collapsedTopPadding.toFloat()
        var currTop = 0
        var currBottom = collapseHeight
        var currRight = 0
        var currLeft = 0

        val view = binding.viewPager
        view.outlineProvider = object : ViewOutlineProvider() {
            override fun getOutline(view: View, outline: Outline) {
                outline.setRoundRect(
                    currLeft, currTop, currRight, currBottom, currRound
                )
            }
        }
        view.clipToOutline = true

        val extraEndPadding = 108.dpToPx(requireContext())
        var leftPadding = 0
        var rightPadding = 0
        val isLandscape = requireContext().isLandscape()
        fun updateCollapsed() {
            val (collapsedY, offset, collapsedOffset) = uiViewModel.run {
                if (playerSheetState.value == STATE_EXPANDED) {
                    val offset = moreSheetOffset.value
                    Triple(systemInsets.value.top, offset, if (isLandscape) 0f else offset)
                } else {
                    val offset = 1 - max(0f, playerSheetOffset.value)
                    Triple(-collapsedTopPadding, offset, offset)
                }
            }
            val collapsedInv = 1 - collapsedOffset
            binding.playerCollapsedContainer.root.run {
                translationY = collapsedY - collapseHeight * collapsedInv * 2
                alpha = collapsedOffset * 2
                translationZ = -1f * collapsedInv
            }
            binding.bgCollapsed.run {
                translationY = collapsedY - collapseHeight * collapsedInv * 2
                alpha = min(1f, collapsedOffset * 2) - 0.5f
            }
            val alphaInv = 1 - min(1f, offset * 3)
            binding.expandedToolbar.run {
                translationY = collapseHeight * offset * 2
                alpha = alphaInv
                isVisible = offset < 1
                translationZ = -1f * offset
            }
            binding.playerControls.root.run {
                translationY = collapseHeight * offset * 2
                alpha = alphaInv
                isVisible = offset < 1
            }
            currTop = uiViewModel.run {
                val top = if (playerSheetState.value != STATE_EXPANDED) 0
                else collapsedTopPadding + systemInsets.value.top
                (top * max(0f, (collapsedOffset - 0.75f) * 4)).toInt()
            }
            val bot = currTop + collapseHeight
            currBottom = bot + ((view.height - bot) * collapsedInv).toInt()
            currLeft = (leftPadding * collapsedOffset).toInt()
            currRight = view.width - (rightPadding * collapsedOffset).toInt()
            currRound = collapsedTopPadding * collapsedOffset
            view.invalidateOutline()
        }

        view.doOnLayout { updateCollapsed() }
        observe(uiViewModel.combined) {
            val system = uiViewModel.systemInsets.value
            binding.constraintLayout.applyInsets(system, 64, 0)
            binding.expandedToolbar.applyInsets(system)
            val insets = uiViewModel.run {
                if (playerSheetState.value == STATE_EXPANDED) system
                else getCombined()
            }
            binding.playerCollapsedContainer.root.applyHorizontalInsets(insets)
            binding.playerControls.root.applyHorizontalInsets(
                insets,
                requireActivity().isLandscape()
            )
            val left = if (requireContext().isRTL()) system.end + extraEndPadding else system.start
            leftPadding = collapsedTopPadding + left
            val right = if (requireContext().isRTL()) system.start else system.end + extraEndPadding
            rightPadding = collapsedTopPadding + right
            updateCollapsed()
            adapter.insetsUpdated()
        }

        observe(uiViewModel.moreSheetOffset) {
            updateCollapsed()
            adapter.moreOffsetUpdated()
        }
        observe(uiViewModel.playerSheetOffset) {
            updateCollapsed()
            adapter.playerOffsetUpdated()

            viewModel.browser.value?.volume = 1 + min(0f, it)
            if (it < 1)
                requireActivity().hideSystemUi(false)
            else if (uiViewModel.playerBgVisible.value)
                requireActivity().hideSystemUi(true)
        }

        observe(uiViewModel.playerSheetState) {
            updateCollapsed()
            if (isFinalState(it)) adapter.playerSheetStateUpdated()
            if (it == STATE_HIDDEN) viewModel.clearQueue()
            else if (it == STATE_COLLAPSED) emit(uiViewModel.playerBgVisible, false)
        }

        binding.playerControls.root.doOnLayout {
            uiViewModel.playerControlsHeight.value = it.height
            adapter.playerControlsHeightUpdated()
        }
        observe(uiViewModel.playerBgVisible) {
            binding.fgContainer.animateVisibility(!it)
            binding.playerMoreContainer.animateVisibility(!it)
            requireActivity().hideSystemUi(it)
        }
        binding.bgPanel.configureClicking(adapterListener, uiViewModel)
        binding.playerCollapsedContainer.playerClose.setOnClickListener {
            uiViewModel.changePlayerState(STATE_HIDDEN)
        }
        binding.expandedToolbar.setNavigationOnClickListener {
            uiViewModel.collapsePlayer()
        }
    }

    private val adapterListener = object : PlayerTrackAdapter.Listener {
        override fun onClick() = uiViewModel.run {
            if (playerSheetState.value != STATE_EXPANDED) changePlayerState(STATE_EXPANDED)
            else {
                if (moreSheetState.value == STATE_EXPANDED) {
                    changeMoreState(STATE_COLLAPSED)
                    return
                }
                val shouldBeVisible = !playerBgVisible.value
                if (shouldBeVisible) {
                    val binding = binding ?: return@run
                    if (binding.bgImage.drawable == null && !binding.playerView.player.hasVideo())
                        return
                    changeMoreState(STATE_COLLAPSED)
                }
                changeBgVisible(shouldBeVisible)
            }
        }

        override fun onStartDoubleClick() {
            viewModel.seekToAdd(-10000)
        }

        override fun onEndDoubleClick() {
            viewModel.seekToAdd(10000)
        }
    }

    private fun configurePlayerControls() {
        val viewPager = binding!!.viewPager
        viewPager.adapter = adapter
        viewPager.registerOnUserPageChangeCallback { pos, isUser ->
            val index = viewModel.playerState.current.value?.index
            if (index != pos && isUser) viewModel.seek(pos)
        }

        fun submit() {
            adapter.submitList(viewModel.queue) {
                val index = (viewModel.playerState.current.value?.index ?: -1).takeIf { it != -1 }
                    ?: return@submitList
                val current = binding?.viewPager?.currentItem ?: 0
                val smooth = abs(index - current) <= 1
                binding?.viewPager?.setCurrentItem(index, smooth)
            }
        }

        val binding = binding!!
        binding.playerControls.trackHeart.addOnCheckedStateChangedListener(likeListener)
        observe(viewModel.playerState.current) {
            uiViewModel.run {
                if (it == null) return@run changePlayerState(STATE_HIDDEN)
                if (!isFinalState(playerSheetState.value)) return@run
                changePlayerState(
                    if (playerSheetState.value != STATE_EXPANDED) STATE_COLLAPSED
                    else STATE_EXPANDED
                )
            }
            submit()
            it?.mediaItem ?: return@observe
            binding.applyCurrent(it.mediaItem)
        }

        observe(viewModel.queueFlow) { submit() }

        val playPauseListener = CheckBoxListener { viewModel.setPlaying(it) }
        binding.playerControls.trackPlayPause
            .addOnCheckedStateChangedListener(playPauseListener)
        binding.playerCollapsedContainer.collapsedTrackPlayPause
            .addOnCheckedStateChangedListener(playPauseListener)
        observe(viewModel.isPlaying) {
            binding.run {
                playPauseListener.enabled = false
                playerControls.trackPlayPause.isChecked = it
                playerCollapsedContainer.collapsedTrackPlayPause.isChecked = it
                playPauseListener.enabled = true
            }
        }
        observe(viewModel.buffering) {
            binding.playerControls.playingIndicator.alpha = if (it) 1f else 0f
            binding.playerCollapsedContainer.collapsedPlayingIndicator.alpha = if (it) 1f else 0f
        }

        observe(viewModel.progress) { (curr, buff) ->
            binding.playerCollapsedContainer.run {
                collapsedBuffer.progress = buff.toInt()
                collapsedSeekbar.progress = curr.toInt()
            }
            binding.playerControls.run {
                if (!seekBar.isPressed) {
                    bufferBar.progress = buff.toInt()
                    seekBar.value = max(0f, min(curr.toFloat(), seekBar.valueTo))
                    trackCurrentTime.text = curr.toTimeString()
                }
            }
        }

        observe(viewModel.totalDuration) {
            val duration = it ?: viewModel.playerState.current.value?.track?.duration ?: 0
            binding.playerCollapsedContainer.run {
                collapsedSeekbar.max = duration.toInt()
                collapsedBuffer.max = duration.toInt()
            }
            binding.playerControls.run {
                bufferBar.max = duration.toInt()
                seekBar.apply {
                    value = max(0f, min(value, duration.toFloat()))
                    valueTo = 1f + duration
                }
                trackTotalTime.text = duration.toTimeString()
            }
        }


        val repeatModes = listOf(REPEAT_MODE_OFF, REPEAT_MODE_ALL, REPEAT_MODE_ONE)
        val animatedVectorDrawables = requireContext().run {
            fun asAnimated(id: Int) =
                AppCompatResources.getDrawable(this, id) as AnimatedVectorDrawable
            listOf(
                asAnimated(R.drawable.ic_repeat_one_to_repeat_off_40dp),
                asAnimated(R.drawable.ic_repeat_off_to_repeat_40dp),
                asAnimated(R.drawable.ic_repeat_to_repeat_one_40dp)
            )
        }
        val drawables = requireContext().run {
            fun asDrawable(id: Int) = AppCompatResources.getDrawable(this, id)!!
            listOf(
                asDrawable(R.drawable.ic_repeat_off_40dp),
                asDrawable(R.drawable.ic_repeat_40dp),
                asDrawable(R.drawable.ic_repeat_one_40dp),
            )
        }

        binding.playerControls.trackRepeat.icon =
            drawables[repeatModes.indexOf(viewModel.repeatMode.value)]

        fun changeRepeatDrawable(repeatMode: Int) = binding.playerControls.trackRepeat.run {
            val index = repeatModes.indexOf(repeatMode)
            icon = animatedVectorDrawables[index]
            (icon as Animatable).start()
        }

        binding.playerControls.run {
            seekBar.apply {
                addOnChangeListener { _, value, fromUser ->
                    if (fromUser) trackCurrentTime.text = value.toLong().toTimeString()
                }
                addOnSliderTouchListener(object : Slider.OnSliderTouchListener {
                    override fun onStartTrackingTouch(slider: Slider) = Unit
                    override fun onStopTrackingTouch(slider: Slider) =
                        viewModel.seekTo(slider.value.toLong())
                })
            }

            trackNext.setOnClickListener {
                viewModel.next()
                (trackNext.icon as Animatable).start()
            }
            observe(viewModel.nextEnabled) { trackNext.isEnabled = it }

            trackPrevious.setOnClickListener {
                viewModel.previous()
                (trackPrevious.icon as Animatable).start()
            }
            observe(viewModel.previousEnabled) { trackPrevious.isEnabled = it }

            val shuffleListener = CheckBoxListener { viewModel.setShuffle(it) }
            trackShuffle.addOnCheckedStateChangedListener(shuffleListener)
            observe(viewModel.shuffleMode) {
                shuffleListener.enabled = false
                trackShuffle.isChecked = it
                shuffleListener.enabled = true
            }

            trackRepeat.setOnClickListener {
                val mode = when (viewModel.repeatMode.value) {
                    REPEAT_MODE_OFF -> REPEAT_MODE_ALL
                    REPEAT_MODE_ALL -> REPEAT_MODE_ONE
                    else -> REPEAT_MODE_OFF
                }
                changeRepeatDrawable(mode)
                viewModel.setRepeat(mode)
            }
            observe(viewModel.repeatMode) { changeRepeatDrawable(it) }

            trackSubtitle.setOnClickListener {
                QualitySelectionBottomSheet().show(parentFragmentManager, null)
            }
            observe(viewModel.serverAndTracks) { (tracks, server, index) ->
                trackSubtitle.text = tracks?.getDetails(requireContext(), server, index)
                    ?.joinToString(" ⦿ ")?.takeIf { it.isNotBlank() }
            }
        }
    }

    private val likeListener = CheckBoxListener { viewModel.likeCurrent(it) }

    private fun configureColors() {
        observe(viewModel.playerState.current) { adapter.onCurrentUpdated() }
        var last: Drawable? = null
        adapter.currentDrawableListener = { drawable ->
            if (last != drawable) {
                last = drawable
                val context = requireContext()
                uiViewModel.playerDrawable.value = drawable
                val colors =
                    if (context.isDynamic()) context.getColorsFrom(drawable?.toBitmap()) else null
                uiViewModel.playerColors.value = colors
                if (context.showBackground()) binding?.bgImage?.loadBlurred(drawable, 12f)
                else binding?.bgImage?.setImageDrawable(null)
            }
        }
        val bufferView =
            binding?.playerView?.findViewById<ProgressBar>(androidx.media3.ui.R.id.exo_buffering)
        observe(uiViewModel.playerColors) {
            val context = requireContext()
            if (context.isPlayerColor() && context.isDynamic()) {
                if (uiViewModel.currentAppColor != viewModel.playerState.current.value?.track?.id) {
                    uiViewModel.currentAppColor =
                        viewModel.playerState.current.value?.track?.id
                    requireActivity().recreate()
                    return@observe
                }
            }
            val colors = it ?: context.defaultPlayerColors()
            val binding = binding!!
            adapter.onColorsUpdated()

            binding.run {
                val color = if (requireContext().isDynamic()) colors.accent
                else colors.background
                root.setBackgroundColor(color)
                val backgroundState = ColorStateList.valueOf(colors.background)
                bgGradient.imageTintList = backgroundState
                bgCollapsed.backgroundTintList = backgroundState
                bufferView?.indeterminateDrawable?.setTint(colors.accent)
                expandedToolbar.run {
                    setTitleTextColor(colors.onBackground)
                    setSubtitleTextColor(colors.onBackground)
                }
            }

            binding.playerCollapsedContainer.run {
                collapsedPlayingIndicator.setIndicatorColor(colors.accent)
                collapsedSeekbar.setIndicatorColor(colors.accent)
                collapsedBuffer.setIndicatorColor(colors.accent)
                collapsedBuffer.trackColor = colors.onBackground
            }

            binding.playerControls.run {
                seekBar.trackActiveTintList = ColorStateList.valueOf(colors.accent)
                seekBar.thumbTintList = ColorStateList.valueOf(colors.accent)
                playingIndicator.setIndicatorColor(colors.accent)
                bufferBar.setIndicatorColor(colors.accent)
                bufferBar.trackColor = colors.onBackground
                trackCurrentTime.setTextColor(colors.onBackground)
                trackTotalTime.setTextColor(colors.onBackground)
                trackTitle.setTextColor(colors.onBackground)
                trackArtist.setTextColor(colors.onBackground)
            }
        }
    }

    private fun FragmentPlayerBinding.applyCurrent(item: MediaItem) {
        val track = item.track
        val extId = item.extensionId
        expandedToolbar.run {
            val itemContext = item.context
            title = if (itemContext != null) context.getString(R.string.playing_from) else null
            subtitle = itemContext?.title
            setOnMenuItemClickListener {
                if (it.itemId != R.id.menu_more) return@setOnMenuItemClickListener false
                onMoreClicked(item)
                true
            }
        }
        playerControls.run {
            trackTitle.text = track.title
            trackTitle.marquee()
            val artists = track.artists
            val artistNames = artists.joinToString(", ") { it.name }
            val span = SpannableString(artistNames)

            artists.forEach { artist ->
                val start = artistNames.indexOf(artist.name)
                val end = start + artist.name.length
                val clickableSpan = SimpleItemSpan(trackArtist.context) {
                    openItem(extId, artist)
                }
                runCatching {
                    span.setSpan(
                        clickableSpan, start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE
                    )
                }
            }

            trackArtist.text = span
            trackArtist.movementMethod = LinkMovementMethod.getInstance()
            likeListener.enabled = false
            trackHeart.isChecked = item.isLiked
            likeListener.enabled = true
            lifecycleScope.launch {
                val isTrackClient = viewModel.isLikeClient(item.extensionId)
                trackHeart.isVisible = isTrackClient
            }
        }
    }

    private fun openItem(extension: String, item: EchoMediaItem) {
        requireActivity().openFragment<MediaFragment>(
            null, MediaFragment.getBundle(extension, item, false)
        )
    }

    private fun onMoreClicked(item: MediaItem) {
        MediaMoreBottomSheet.newInstance(
            R.id.navHostFragment, item.extensionId, item.track, item.isLoaded, true
        ).show(requireActivity().supportFragmentManager, null)
    }

    private fun Player?.hasVideo() =
        this?.currentTracks?.groups.orEmpty().any { it.type == C.TRACK_TYPE_VIDEO }

    private fun applyVideoVisibility(visible: Boolean) {
        binding?.playerView?.isVisible = visible
        binding?.bgImage?.isVisible = !visible
        if (requireContext().isLandscape()) return
        binding?.playerControls?.trackCoverPlaceHolder?.isVisible = visible
        adapter.updatePlayerVisibility(visible)
    }

    private var oldBg: Streamable.Media.Background? = null
    private var backgroundPlayer: Player? = null

    @OptIn(UnstableApi::class)
    private fun applyPlayer() {
        val mainPlayer = viewModel.browser.value
        val background = viewModel.playerState.current.value?.mediaItem?.background
        val visible = if (mainPlayer.hasVideo()) {
            binding?.playerView?.player = mainPlayer
            binding?.playerView?.resizeMode = RESIZE_MODE_FIT
            backgroundPlayer?.release()
            backgroundPlayer = null
            true
        } else if (background != null) {
            if (oldBg != background || backgroundPlayer == null) {
                oldBg = background
                backgroundPlayer?.release()
                backgroundPlayer = getPlayer(requireContext(), viewModel.cache, background)
            }
            binding?.playerView?.player = backgroundPlayer
            binding?.playerView?.resizeMode = RESIZE_MODE_ZOOM
            true
        } else {
            backgroundPlayer?.release()
            backgroundPlayer = null
            binding?.playerView?.player = null
            false
        }
        applyVideoVisibility(visible)
    }

    @OptIn(UnstableApi::class)
    private fun configureBackgroundPlayerView() {
        binding?.playerView?.subtitleView?.setStyle(
            CaptionStyleCompat(
                Color.WHITE, Color.TRANSPARENT, Color.TRANSPARENT,
                EDGE_TYPE_OUTLINE, Color.BLACK, null
            )
        )
        observe(viewModel.serverAndTracks) { applyPlayer() }
    }

    companion object {
        private fun Context.showBackground() = getSettings().showBackground()
        const val DYNAMIC_PLAYER = "dynamic_player"
        const val PLAYER_COLOR = "player_app_color"
        fun Context.isDynamic() =
            getSettings().getBoolean(DYNAMIC_PLAYER, true)

        private fun Context.isPlayerColor() =
            getSettings().getBoolean(PLAYER_COLOR, false)

        @OptIn(UnstableApi::class)
        fun getPlayer(
            context: Context, cache: SimpleCache, video: Streamable.Media.Background,
        ): ExoPlayer {
            val cacheFactory = CacheDataSource
                .Factory().setCache(cache)
                .setUpstreamDataSourceFactory(
                    DefaultHttpDataSource.Factory()
                        .setDefaultRequestProperties(video.request.headers)
                )
            val factory = DefaultMediaSourceFactory(context)
                .setDataSourceFactory(cacheFactory)
            val player = ExoPlayer.Builder(context).setMediaSourceFactory(factory).build()
            player.setMediaItem(MediaItem.fromUri(video.request.url.toUri()))
            player.repeatMode = REPEAT_MODE_ONE
            player.volume = 0f
            player.prepare()
            player.play()
            return player
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\PlayerTrackAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player

import android.graphics.Outline
import android.graphics.drawable.Drawable
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.view.ViewOutlineProvider
import androidx.core.content.res.ResourcesCompat
import androidx.core.view.doOnLayout
import androidx.core.view.updateLayoutParams
import androidx.media3.common.MediaItem
import androidx.recyclerview.widget.DiffUtil
import androidx.recyclerview.widget.ListAdapter
import androidx.recyclerview.widget.RecyclerView
import com.google.android.material.bottomsheet.BottomSheetBehavior.STATE_EXPANDED
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.databinding.ItemClickPanelsBinding
import dev.brahmkshatriya.echo.databinding.ItemPlayerTrackBinding
import dev.brahmkshatriya.echo.playback.MediaItemUtils.track
import dev.brahmkshatriya.echo.playback.MediaItemUtils.unloadedCover
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.ui.common.UiViewModel
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyHorizontalInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsets
import dev.brahmkshatriya.echo.ui.player.PlayerColors.Companion.defaultPlayerColors
import dev.brahmkshatriya.echo.utils.image.ImageUtils.getCachedDrawable
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadWithThumb
import dev.brahmkshatriya.echo.utils.ui.GestureListener
import dev.brahmkshatriya.echo.utils.ui.GestureListener.Companion.handleGestures
import dev.brahmkshatriya.echo.utils.ui.UiUtils.dpToPx
import dev.brahmkshatriya.echo.utils.ui.UiUtils.isLandscape
import dev.brahmkshatriya.echo.utils.ui.UiUtils.isRTL
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder
import kotlinx.coroutines.flow.MutableStateFlow
import kotlin.math.max

class PlayerTrackAdapter(
    private val uiViewModel: UiViewModel,
    private val current: MutableStateFlow<PlayerState.Current?>,
    private val listener: Listener
) : ListAdapter<MediaItem, PlayerTrackAdapter.ViewHolder>(DiffCallback) {

    interface Listener {
        fun onClick()
        fun onLongClick() {}
        fun onStartDoubleClick() {}
        fun onEndDoubleClick() {}
    }

    object DiffCallback : DiffUtil.ItemCallback<MediaItem>() {
        override fun areItemsTheSame(oldItem: MediaItem, newItem: MediaItem) =
            oldItem.mediaId == newItem.mediaId

        override fun areContentsTheSame(oldItem: MediaItem, newItem: MediaItem): Boolean {
            return oldItem == newItem
        }
    }

    inner class ViewHolder(
        private val binding: ItemPlayerTrackBinding
    ) : ScrollAnimViewHolder(binding.root) {

        private val context = binding.root.context

        private val collapsedPadding = 8.dpToPx(context)
        private val targetZ = collapsedPadding.toFloat()
        private val size = binding.root.resources.getDimension(R.dimen.collapsed_cover_size).toInt()
        private var targetScale = 0f
        private var targetX = 0
        private var targetY = 0

        private val cover = binding.playerTrackCoverContainer
        private var currentCoverHeight = size
        private var currCoverRound = 0f
        private val isLandscape = context.isLandscape()
        fun updateCollapsed() = uiViewModel.run {
            val insets = if (!isLandscape) systemInsets.value else getCombined()
            val targetPosX = collapsedPadding + if (context.isRTL()) insets.end else insets.start
            val targetPosY = if (playerSheetState.value != STATE_EXPANDED) 0
            else collapsedPadding + systemInsets.value.top
            targetX = targetPosX - cover.left
            targetY = targetPosY - cover.top
            currentCoverHeight = cover.height.takeIf { it > 0 } ?: currentCoverHeight
            targetScale = size.toFloat() / currentCoverHeight

            val (collapsedY, offset) = if (playerSheetState.value == STATE_EXPANDED)
                systemInsets.value.top to if (isLandscape) 0f else moreSheetOffset.value
            else -collapsedPadding to 1 - max(0f, playerSheetOffset.value)

            val inv = 1 - offset
            binding.playerCollapsed.root.run {
                translationY = collapsedY - size * inv * 2
                alpha = offset
            }
            if (isLandscape) binding.clickPanel.root.scaleX = 0.5f + 0.5f * inv
            val extraY = if (!isPlayerVisible) 0f else {
                val toMoveY = binding.playerControlsPlaceholder.top - cover.top
                toMoveY * inv
            }
            val extraX = if (!isPlayerVisible) 0f else {
                val toMoveX = binding.playerControlsPlaceholder.left - cover.left
                toMoveX * inv
            }
            cover.run {
                scaleX = if (!isPlayerVisible) 1 + (targetScale - 1) * offset else targetScale
                scaleY = scaleX
                translationX = targetX * offset + extraX
                translationY = targetY * offset + extraY
                translationZ = targetZ * (1 - offset)
                currCoverRound = collapsedPadding / scaleX
                invalidateOutline()
            }
        }

        fun updateInsets() = uiViewModel.run {
            val (v, h) = if (!isLandscape) 64 to 0 else 0 to 24
            binding.constraintLayout.applyInsets(systemInsets.value, v, h)
            val insets = if (isLandscape) getCombined() else systemInsets.value
            binding.playerCollapsed.root.applyHorizontalInsets(insets)
            binding.playerControlsPlaceholder.run {
                updateLayoutParams {
                    height = playerControlsHeight.value
                }
                doOnLayout {
                    updateCollapsed()
                    cover.doOnLayout { updateCollapsed() }
                }
            }

            updateCollapsed()
        }

        fun updateColors() {
            binding.playerCollapsed.run {
                val colors = uiViewModel.playerColors.value ?: context.defaultPlayerColors()
                collapsedTrackTitle.setTextColor(colors.onBackground)
                collapsedTrackArtist.setTextColor(colors.onBackground)
            }
        }

        private var coverDrawable: Drawable? = null
        fun applyDrawable() {
            val index = bindingAdapterPosition.takeIf { it != RecyclerView.NO_POSITION } ?: return
            val item = getItem(index) ?: return
            val curr = current.value?.mediaItem
            if (curr != item) return
            val drawable = coverDrawable
            currentDrawableListener?.invoke(drawable)
        }

        fun bind(item: MediaItem?) {
            binding.playerCollapsed.run {
                collapsedTrackTitle.text = item?.track?.title
                collapsedTrackArtist.text = item?.track?.artists?.joinToString(", ") { it.name }
            }
            val old = item?.unloadedCover?.getCachedDrawable(binding.root.context)
            item?.track?.cover.loadWithThumb(binding.playerTrackCover, old) {
                val image = it
                    ?: ResourcesCompat.getDrawable(resources, R.drawable.art_music, context.theme)
                setImageDrawable(image)
                coverDrawable = it
                applyDrawable()
            }
            updateInsets()
            updateColors()
        }

        init {
            cover.outlineProvider = object : ViewOutlineProvider() {
                override fun getOutline(view: View, outline: Outline) {
                    outline.setRoundRect(
                        0, 0, currentCoverHeight, currentCoverHeight, currCoverRound
                    )
                }
            }
            cover.clipToOutline = true
            cover.doOnLayout { updateInsets() }
            binding.clickPanel.configureClicking(listener, uiViewModel)
        }
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val inflater = LayoutInflater.from(parent.context)
        val binding = ItemPlayerTrackBinding.inflate(inflater, parent, false)
        return ViewHolder(binding)
    }

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        holder.bind(getItem(position))
    }

    var recyclerView: RecyclerView? = null
    override fun onAttachedToRecyclerView(recyclerView: RecyclerView) {
        this.recyclerView = recyclerView
    }

    override fun onDetachedFromRecyclerView(recyclerView: RecyclerView) {
        this.recyclerView = null
    }

    override fun onViewAttachedToWindow(holder: ViewHolder) {
        holder.updateInsets()
        holder.updateColors()
        holder.applyDrawable()
    }

    override fun onViewDetachedFromWindow(holder: ViewHolder) {
        holder.updateInsets()
        holder.updateColors()
        holder.applyDrawable()
    }

    private fun onEachViewHolder(block: ViewHolder.() -> Unit) {
        val recyclerView = recyclerView ?: return
        recyclerView.run {
            for (it in 0 until childCount) {
                val viewHolder = getChildViewHolder(getChildAt(it)) as? ViewHolder
                viewHolder?.block()
            }
        }
    }

    fun moreOffsetUpdated() = onEachViewHolder { updateCollapsed() }
    fun playerOffsetUpdated() = onEachViewHolder { updateCollapsed() }
    fun playerSheetStateUpdated() = onEachViewHolder { updateInsets() }
    fun insetsUpdated() = onEachViewHolder { updateInsets() }
    fun playerControlsHeightUpdated() = onEachViewHolder { updateInsets() }
    fun onColorsUpdated() = onEachViewHolder { updateColors() }
    fun onCurrentUpdated() {
        onEachViewHolder { applyDrawable() }
        if (current.value == null) currentDrawableListener?.invoke(null)
    }

    private var isPlayerVisible = false
    fun updatePlayerVisibility(visible: Boolean) {
        isPlayerVisible = visible
        onEachViewHolder { updateInsets() }
    }

    var currentDrawableListener: ((Drawable?) -> Unit)? = null

    companion object {
        fun ItemClickPanelsBinding.configureClicking(listener: Listener, uiViewModel: UiViewModel) {
            start.handleGestures(object : GestureListener {
                override val onClick = listener::onClick
                override val onLongClick = listener::onLongClick
                override val onDoubleClick: (() -> Unit)?
                    get() = if (uiViewModel.playerSheetState.value != STATE_EXPANDED) null
                    else listener::onStartDoubleClick
            })
            end.handleGestures(object : GestureListener {
                override val onClick = listener::onClick
                override val onLongClick = listener::onLongClick
                override val onDoubleClick: (() -> Unit)?
                    get() = if (uiViewModel.playerSheetState.value != STATE_EXPANDED) null
                    else listener::onEndDoubleClick
            })
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\PlayerUiListener.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player

import android.os.Handler
import android.os.Looper
import androidx.lifecycle.viewModelScope
import androidx.media3.common.C.TIME_UNSET
import androidx.media3.common.PlaybackException
import androidx.media3.common.Player
import androidx.media3.common.Timeline
import androidx.media3.common.Tracks
import androidx.media3.exoplayer.ExoPlayer
import kotlinx.coroutines.launch

class PlayerUiListener(
    private val player: Player,
    private val viewModel: PlayerViewModel
) : Player.Listener {

    init {
        updateList()
        with(viewModel) {
            tracksFlow.value = player.currentTracks
            isPlaying.value = player.isPlaying
            buffering.value = player.playbackState == Player.STATE_BUFFERING
            shuffleMode.value = player.shuffleModeEnabled
            repeatMode.value = player.repeatMode
        }
        updateNavigation()
    }

    private fun updateList() = viewModel.run {
        updateNavigation()
        queue = (0 until player.mediaItemCount).map { player.getMediaItemAt(it) }
        viewModelScope.launch { queueFlow.emit(Unit) }
    }

    private fun updateNavigation() {
        viewModel.nextEnabled.value = player.hasNextMediaItem()
        viewModel.previousEnabled.value = player.currentMediaItemIndex >= 0
    }

    private val delay = 500L
    private val threshold = 0.2f
    private val updateProgressRunnable = Runnable { updateProgress() }
    private val handler = Handler(Looper.getMainLooper()).also {
        it.post(updateProgressRunnable)
    }

    private fun updateProgress() {
        viewModel.progress.value =
            player.currentPosition to player.bufferedPosition
        viewModel.totalDuration.value = player.duration.takeIf { it != TIME_UNSET }

        handler.removeCallbacks(updateProgressRunnable)
        val playbackState = player.playbackState
        if (playbackState != ExoPlayer.STATE_IDLE && playbackState != ExoPlayer.STATE_ENDED) {
            var delayMs: Long
            if (player.playWhenReady && playbackState == ExoPlayer.STATE_READY) {
                delayMs = delay - player.currentPosition % delay
                if (delayMs < delay * threshold) {
                    delayMs += delay
                }
            } else {
                delayMs = delay
            }
            handler.postDelayed(updateProgressRunnable, delayMs)
        }
    }

    override fun onPlaybackStateChanged(playbackState: Int) {
        when (playbackState) {
            Player.STATE_BUFFERING ->
                viewModel.buffering.value = true

            Player.STATE_READY -> {
                viewModel.buffering.value = false
            }

            else -> Unit
        }
        updateProgress()
    }

    override fun onIsPlayingChanged(isPlaying: Boolean) {
        viewModel.isPlaying.value = isPlaying
    }

    override fun onPositionDiscontinuity(
        oldPosition: Player.PositionInfo, newPosition: Player.PositionInfo, reason: Int
    ) {
        updateNavigation()
        updateProgress()
        viewModel.discontinuity.value = newPosition.positionMs
    }

    override fun onTimelineChanged(timeline: Timeline, reason: Int) {
        updateList()
    }

    override fun onShuffleModeEnabledChanged(shuffleModeEnabled: Boolean) {
        viewModel.shuffleMode.value = player.shuffleModeEnabled
        updateList()
    }

    override fun onRepeatModeChanged(repeatMode: Int) {
        viewModel.repeatMode.value = player.repeatMode
        updateList()
    }

    override fun onPlayerError(error: PlaybackException) {
        viewModel.isPlaying.value = false
        viewModel.buffering.value = false
    }

    override fun onTracksChanged(tracks: Tracks) {
        viewModel.tracksFlow.value = tracks
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\PlayerViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player

import android.content.SharedPreferences
import android.os.Bundle
import androidx.annotation.OptIn
import androidx.core.os.bundleOf
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import androidx.media3.common.MediaItem
import androidx.media3.common.ThumbRating
import androidx.media3.common.TrackGroup
import androidx.media3.common.TrackSelectionOverride
import androidx.media3.common.Tracks
import androidx.media3.common.util.UnstableApi
import androidx.media3.datasource.cache.SimpleCache
import androidx.media3.session.MediaController
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.clients.LikeClient
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Message
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtension
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.isClient
import dev.brahmkshatriya.echo.extensions.MediaState
import dev.brahmkshatriya.echo.playback.MediaItemUtils
import dev.brahmkshatriya.echo.playback.MediaItemUtils.serverWithDownloads
import dev.brahmkshatriya.echo.playback.MediaItemUtils.sourceIndex
import dev.brahmkshatriya.echo.playback.MediaItemUtils.track
import dev.brahmkshatriya.echo.playback.PlayerCommands.addToNextCommand
import dev.brahmkshatriya.echo.playback.PlayerCommands.addToQueueCommand
import dev.brahmkshatriya.echo.playback.PlayerCommands.playCommand
import dev.brahmkshatriya.echo.playback.PlayerCommands.radioCommand
import dev.brahmkshatriya.echo.playback.PlayerCommands.resumeCommand
import dev.brahmkshatriya.echo.playback.PlayerCommands.sleepTimer
import dev.brahmkshatriya.echo.playback.PlayerService.Companion.getController
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.utils.ContextUtils.listenFuture
import dev.brahmkshatriya.echo.utils.Serializer.putSerialized
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.SharingStarted
import kotlinx.coroutines.flow.combine
import kotlinx.coroutines.flow.first
import kotlinx.coroutines.flow.stateIn
import kotlinx.coroutines.launch
import kotlinx.coroutines.withContext
import kotlin.math.max

@OptIn(UnstableApi::class)
class PlayerViewModel(
    val app: App,
    val playerState: PlayerState,
    val settings: SharedPreferences,
    val cache: SimpleCache,
    val extensions: ExtensionLoader,
    downloader: Downloader,
) : ViewModel() {
    private val downloadFlow = downloader.flow

    val browser = MutableStateFlow<MediaController?>(null)
    private fun withBrowser(block: suspend (MediaController) -> Unit) {
        viewModelScope.launch {
            val browser = browser.first { it != null }!!
            block(browser)
        }
    }

    var queue: List<MediaItem> = emptyList()
    val queueFlow = MutableSharedFlow<Unit>()
    private val context = app.context
    val controllerFutureRelease = getController(context) { player ->
        browser.value = player
        player.addListener(PlayerUiListener(player, this))

        if (player.mediaItemCount != 0) return@getController
        if (!settings.getBoolean(KEEP_QUEUE, true)) return@getController

        player.sendCustomCommand(resumeCommand, Bundle.EMPTY)
    }

    override fun onCleared() {
        super.onCleared()
        controllerFutureRelease()
    }

    fun play(position: Int) {
        withBrowser {
            it.seekTo(position, 0)
            it.playWhenReady = true
        }
    }

    fun seek(position: Int) {
        withBrowser { it.seekTo(position, 0) }
    }

    fun removeQueueItem(position: Int) {
        withBrowser { it.removeMediaItem(position) }
    }

    fun moveQueueItems(fromPos: Int, toPos: Int) {
        withBrowser { it.moveMediaItem(fromPos, toPos) }
    }

    fun clearQueue() {
        withBrowser { it.clearMediaItems() }
    }

    fun seekTo(pos: Long) {
        withBrowser { it.seekTo(pos) }
    }

    fun seekToAdd(position: Int) {
        withBrowser { it.seekTo(max(0, it.currentPosition + position)) }
    }

    fun setPlaying(isPlaying: Boolean) {
        withBrowser {
            it.prepare()
            it.playWhenReady = isPlaying
        }
    }

    fun next() {
        withBrowser { it.seekToNextMediaItem() }
    }

    fun previous() {
        withBrowser { it.seekToPrevious() }
    }

    fun setShuffle(isShuffled: Boolean, changeCurrent: Boolean = false) {
        withBrowser {
            it.shuffleModeEnabled = isShuffled
            if (changeCurrent) it.seekTo(0, 0)
        }
    }

    fun setRepeat(repeatMode: Int) {
        withBrowser { it.repeatMode = repeatMode }
    }

    suspend fun isLikeClient(extensionId: String): Boolean = withContext(Dispatchers.IO) {
        extensions.music.getExtension(extensionId)?.isClient<LikeClient>() ?: false
    }

    private fun createException(throwable: Throwable) {
        viewModelScope.launch { app.throwFlow.emit(throwable) }
    }

    fun likeCurrent(isLiked: Boolean) = withBrowser { controller ->
        val future = controller.setRating(ThumbRating(isLiked))
        app.context.listenFuture(future) { sessionResult ->
            sessionResult.getOrElse { createException(it) }
        }
    }

    fun setSleepTimer(timer: Long) {
        withBrowser { it.sendCustomCommand(sleepTimer, bundleOf("ms" to timer)) }
    }

    fun changeTrackSelection(trackGroup: TrackGroup, index: Int) {
        withBrowser {
            it.trackSelectionParameters = it.trackSelectionParameters
                .buildUpon()
                .clearOverride(trackGroup)
                .addOverride(TrackSelectionOverride(trackGroup, index))
                .build()
        }
    }

    private fun changeCurrent(newItem: MediaItem) {
        withBrowser { player ->
            val oldPosition = player.currentPosition
            player.replaceMediaItem(player.currentMediaItemIndex, newItem)
            player.prepare()
            player.seekTo(oldPosition)
        }
    }

    fun changeServer(server: Streamable) {
        val item = playerState.current.value?.mediaItem ?: return
        val index = item.serverWithDownloads(app.context).indexOf(server).takeIf { it != -1 }
            ?: return
        changeCurrent(MediaItemUtils.buildServer(item, index))
    }

    fun changeBackground(background: Streamable?) {
        val item = playerState.current.value?.mediaItem ?: return
        val index = item.track.backgrounds.indexOf(background)
        changeCurrent(MediaItemUtils.buildBackground(item, index))
    }

    fun changeSubtitle(subtitle: Streamable?) {
        val item = playerState.current.value?.mediaItem ?: return
        val index = item.track.subtitles.indexOf(subtitle)
        changeCurrent(MediaItemUtils.buildSubtitle(item, index))
    }

    fun changeCurrentSource(index: Int) {
        val item = playerState.current.value?.mediaItem ?: return
        changeCurrent(MediaItemUtils.buildSource(item, index))
    }

    fun setQueue(id: String, list: List<Track>, index: Int, context: EchoMediaItem?) {
        withBrowser { controller ->
            val mediaItems = list.map {
                MediaItemUtils.build(
                    app,
                    downloadFlow.value,
                    MediaState.Unloaded(id, it),
                    context
                )
            }
            controller.setMediaItems(mediaItems, index, list[index].playedDuration ?: 0)
            controller.prepare()
        }
    }

    fun radio(id: String, item: EchoMediaItem, loaded: Boolean) = viewModelScope.launch {
        app.messageFlow.emit(
            Message(app.context.getString(R.string.loading_radio_for_x, item.title))
        )
        withBrowser {
            it.sendCustomCommand(radioCommand, Bundle().apply {
                putString("extId", id)
                putSerialized("item", item)
                putBoolean("loaded", loaded)
            })
        }
    }

    fun play(id: String, item: EchoMediaItem, loaded: Boolean) = viewModelScope.launch {
        if (item !is Track) app.messageFlow.emit(
            Message(app.context.getString(R.string.playing_x, item.title))
        )
        withBrowser {
            it.sendCustomCommand(playCommand, Bundle().apply {
                putString("extId", id)
                putSerialized("item", item)
                putBoolean("loaded", loaded)
                putBoolean("shuffle", false)
            })
        }
    }

    fun shuffle(id: String, item: EchoMediaItem, loaded: Boolean) = viewModelScope.launch {
        if (item !is Track) app.messageFlow.emit(
            Message(app.context.getString(R.string.shuffling_x, item.title))
        )
        withBrowser {
            it.sendCustomCommand(playCommand, Bundle().apply {
                putString("extId", id)
                putSerialized("item", item)
                putBoolean("loaded", loaded)
                putBoolean("shuffle", true)
            })
        }
    }


    fun addToQueue(id: String, item: EchoMediaItem, loaded: Boolean) = viewModelScope.launch {
        if (item !is Track) app.messageFlow.emit(
            Message(app.context.getString(R.string.adding_x_to_queue, item.title))
        )
        withBrowser {
            it.sendCustomCommand(addToQueueCommand, Bundle().apply {
                putString("extId", id)
                putSerialized("item", item)
                putBoolean("loaded", loaded)
            })
        }
    }

    fun addToNext(id: String, item: EchoMediaItem, loaded: Boolean) = viewModelScope.launch {
        if (!(browser.value?.mediaItemCount == 0 && item is Track)) app.messageFlow.emit(
            Message(app.context.getString(R.string.adding_x_to_next, item.title))
        )
        withBrowser {
            it.sendCustomCommand(addToNextCommand, Bundle().apply {
                putString("extId", id)
                putSerialized("item", item)
                putBoolean("loaded", loaded)
            })
        }
    }

    val progress = MutableStateFlow(0L to 0L)
    val discontinuity = MutableStateFlow(0L)
    val totalDuration = MutableStateFlow<Long?>(null)

    val buffering = MutableStateFlow(false)
    val isPlaying = MutableStateFlow(false)
    val nextEnabled = MutableStateFlow(false)
    val previousEnabled = MutableStateFlow(false)
    val repeatMode = MutableStateFlow(0)
    val shuffleMode = MutableStateFlow(false)

    val tracksFlow = MutableStateFlow<Tracks?>(null)
    val serverAndTracks = tracksFlow.combine(playerState.serverChanged) { tracks, _ -> tracks }
        .combine(playerState.current) { tracks, current ->
            val server = playerState.servers[current?.mediaItem?.mediaId]?.getOrNull()
            val index = current?.mediaItem?.sourceIndex
            Triple(tracks, server, index)
        }.stateIn(viewModelScope, SharingStarted.Lazily, Triple(null, null, null))

    companion object {
        const val KEEP_QUEUE = "keep_queue"
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\audiofx\AudioEffectsBottomSheet.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player.audiofx

import android.annotation.SuppressLint
import android.content.Intent
import android.content.SharedPreferences
import android.media.audiofx.AudioEffect
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.activity.ComponentActivity
import androidx.activity.result.contract.ActivityResultContracts
import androidx.core.content.edit
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.lifecycle.viewModelScope
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.databinding.DialogPlayerAudioFxBinding
import dev.brahmkshatriya.echo.databinding.FragmentAudioFxBinding
import dev.brahmkshatriya.echo.playback.listener.EffectsListener.Companion.BASS_BOOST
import dev.brahmkshatriya.echo.playback.listener.EffectsListener.Companion.CHANGE_PITCH
import dev.brahmkshatriya.echo.playback.listener.EffectsListener.Companion.CUSTOM_EFFECTS
import dev.brahmkshatriya.echo.playback.listener.EffectsListener.Companion.PLAYBACK_SPEED
import dev.brahmkshatriya.echo.playback.listener.EffectsListener.Companion.deleteFxPrefs
import dev.brahmkshatriya.echo.playback.listener.EffectsListener.Companion.getFxPrefs
import dev.brahmkshatriya.echo.playback.listener.EffectsListener.Companion.globalFx
import dev.brahmkshatriya.echo.playback.listener.EffectsListener.Companion.speedRange
import dev.brahmkshatriya.echo.ui.player.PlayerViewModel
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.PermsUtils.registerActivityResultLauncher
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import dev.brahmkshatriya.echo.utils.ui.RulerAdapter
import kotlinx.coroutines.launch
import org.koin.androidx.viewmodel.ext.android.activityViewModel

class AudioEffectsBottomSheet : BottomSheetDialogFragment() {

    var binding by autoCleared<DialogPlayerAudioFxBinding>()

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View {
        binding = DialogPlayerAudioFxBinding.inflate(inflater, container, false)
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        val viewModel by activityViewModel<PlayerViewModel>()
        var mediaId: String? = null

        fun bind() {
            val settings = requireContext().globalFx()
            settings.edit {
                val customEffects = settings.getStringSet(CUSTOM_EFFECTS, null) ?: emptySet()
                putStringSet(CUSTOM_EFFECTS, customEffects + mediaId?.hashCode()?.toString())
            }
            binding.audioFxDescription.isVisible = mediaId != null
            val mediaSettings =
                requireContext().getFxPrefs(settings, mediaId?.hashCode()) ?: settings
            binding.audioFxFragment.bind(mediaSettings) { onEqualizerClicked() }
        }
        observe(viewModel.playerState.current) {
            mediaId = it?.mediaItem?.mediaId
            bind()
        }
        binding.topAppBar.setNavigationOnClickListener { dismiss() }
        binding.topAppBar.setOnMenuItemClickListener {
            when (it.itemId) {
                R.id.menu_refresh -> {
                    val context = requireContext()
                    val id = mediaId ?: return@setOnMenuItemClickListener false
                    context.deleteFxPrefs(id.hashCode())
                    bind()
                    true
                }

                else -> false
            }
        }
    }

    companion object {
        @SuppressLint("SetTextI18n")
        fun FragmentAudioFxBinding.bind(
            settings: SharedPreferences, onEqualizerClicked: () -> Unit
        ) {
            val speed = settings.getInt(PLAYBACK_SPEED, speedRange.indexOf(1f))
            val adapter = RulerAdapter(object : RulerAdapter.Listener<Int> {
                override fun intervalText(value: Int) = "${speedRange.getOrNull(value) ?: 1f}x"
                override fun onSelectItem(value: Int) {
                    speedValue.text = "${speedRange.getOrNull(value) ?: 1f}x"
                    settings.edit { putInt(PLAYBACK_SPEED, value) }
                }
            })

            speedRecycler.adapter = adapter
            adapter.submitList(List(speedRange.size) { index -> index to (index % 2 == 0) }, speed)

            pitchSwitch.isChecked = settings.getBoolean(CHANGE_PITCH, true)
            pitch.setOnClickListener {
                pitchSwitch.isChecked = !pitchSwitch.isChecked
            }
            pitchSwitch.setOnCheckedChangeListener { _, isChecked ->
                settings.edit { putBoolean(CHANGE_PITCH, isChecked) }
            }
            bassBoostSlider.value = settings.getInt(BASS_BOOST, 0).toFloat()
            bassBoostSlider.addOnChangeListener { _, value, _ ->
                settings.edit { putInt(BASS_BOOST, value.toInt()) }
            }
            equalizer.setOnClickListener { onEqualizerClicked() }
        }

        private fun openEqualizer(activity: ComponentActivity, sessionId: Int) {
            val intent = Intent(AudioEffect.ACTION_DISPLAY_AUDIO_EFFECT_CONTROL_PANEL).apply {
                putExtra(AudioEffect.EXTRA_PACKAGE_NAME, activity.packageName)
                putExtra(AudioEffect.EXTRA_AUDIO_SESSION, sessionId)
                putExtra(AudioEffect.EXTRA_CONTENT_TYPE, AudioEffect.CONTENT_TYPE_MUSIC)
            }
            val contract = ActivityResultContracts.StartActivityForResult()
            activity.registerActivityResultLauncher(contract) {}.launch(intent)
        }

        fun Fragment.onEqualizerClicked() {
            val viewModel by activityViewModel<PlayerViewModel>()
            val sessionId = viewModel.playerState.session.value
            runCatching { openEqualizer(requireActivity(), sessionId) }.getOrElse {
                viewModel.run { viewModelScope.launch { app.throwFlow.emit(it) } }
            }
        }
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\more\PlayerMoreFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player.more

import android.annotation.SuppressLint
import android.content.res.ColorStateList
import android.graphics.Color
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.view.children
import androidx.core.view.updatePaddingRelative
import androidx.fragment.app.Fragment
import androidx.fragment.app.add
import androidx.fragment.app.commitNow
import com.google.android.material.bottomsheet.BottomSheetBehavior
import com.google.android.material.button.MaterialButton
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.databinding.FragmentPlayerMoreBinding
import dev.brahmkshatriya.echo.ui.common.UiViewModel
import dev.brahmkshatriya.echo.ui.player.PlayerColors.Companion.defaultPlayerColors
import dev.brahmkshatriya.echo.ui.player.more.info.TrackInfoFragment
import dev.brahmkshatriya.echo.ui.player.more.lyrics.LyricsFragment
import dev.brahmkshatriya.echo.ui.player.more.upnext.QueueFragment
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import dev.brahmkshatriya.echo.utils.ui.UiUtils.dpToPx
import dev.brahmkshatriya.echo.utils.ui.UiUtils.isLandscape
import org.koin.androidx.viewmodel.ext.android.activityViewModel

class PlayerMoreFragment : Fragment() {

    private var binding by autoCleared<FragmentPlayerMoreBinding>()
    private val uiViewModel by activityViewModel<UiViewModel>()
    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
    ): View {
        binding = FragmentPlayerMoreBinding.inflate(inflater, container, false)
        return binding.root
    }

    private inline fun <reified F : Fragment> Fragment.addIfNull(): String {
        val tag = F::class.java.simpleName
        childFragmentManager.run {
            if (findFragmentByTag(tag) == null) commitNow {
                add<F>(R.id.player_more_fragment_container, tag)
            }
        }
        return tag
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        var topInset = 0
        val topMargin = requireContext().run { if (isLandscape()) 0 else 72.dpToPx(this) }
        fun updateTranslateY() {
            val offset = uiViewModel.moreSheetOffset.value
            val inverted = 1 - offset
            binding.root.translationY = -topInset * inverted
            binding.playerMoreFragmentContainer.translationY =
                (1 - offset) * 2 * uiViewModel.systemInsets.value.bottom
        }

        observe(uiViewModel.systemInsets) {
            topInset = it.top + topMargin
            view.updatePaddingRelative(top = it.top)
            updateTranslateY()
        }

        observe(uiViewModel.moreSheetOffset) {
            updateTranslateY()
            binding.buttonToggleGroupBg.alpha = it
        }

        observe(uiViewModel.moreSheetState) {
            if (it == BottomSheetBehavior.STATE_COLLAPSED) binding.buttonToggleGroup.clearChecked()
            else binding.buttonToggleGroup.check(uiViewModel.lastMoreTab)
        }

        observe(uiViewModel.playerColors) { colorsNullable ->
            val colors = colorsNullable ?: requireContext().defaultPlayerColors()
            binding.buttonToggleGroupBg.children.forEach {
                it as MaterialButton
                it.backgroundTintList = ColorStateList.valueOf(colors.background)
            }

            val textColorStateList = ColorStateList(
                arrayOf(
                    intArrayOf(android.R.attr.state_checked),
                    intArrayOf(-android.R.attr.state_checked)
                ),
                intArrayOf(
                    colors.background,
                    colors.onBackground
                )
            )
            val foregroundColorStateList = ColorStateList(
                arrayOf(
                    intArrayOf(android.R.attr.state_checked),
                    intArrayOf(-android.R.attr.state_checked)
                ),
                intArrayOf(
                    colors.onBackground,
                    Color.TRANSPARENT
                )
            )
            binding.buttonToggleGroup.children.forEach {
                it as MaterialButton
                it.setTextColor(textColorStateList)
                it.backgroundTintList = foregroundColorStateList
            }
        }

        showFragment()
        binding.buttonToggleGroup.addOnButtonCheckedListener { group, _, _ ->
            uiViewModel.run {
                val current = moreSheetState.value
                if (current != BottomSheetBehavior.STATE_COLLAPSED && current != BottomSheetBehavior.STATE_EXPANDED) return@run
                changeMoreState(
                    if (group.checkedButtonId != -1) BottomSheetBehavior.STATE_EXPANDED else BottomSheetBehavior.STATE_COLLAPSED
                )
            }
            showFragment()
        }

        @SuppressLint("ClickableViewAccessibility")
        val touchListener = View.OnTouchListener { v, _ ->
            uiViewModel.lastMoreTab = v.id
            false
        }
        binding.buttonToggleGroup.children.forEach { it.setOnTouchListener(touchListener) }
    }

    private fun showFragment() {
        val checkedId = binding.buttonToggleGroup.checkedButtonId
        val toShow = when (checkedId) {
            R.id.queue -> addIfNull<QueueFragment>()
            R.id.lyrics -> addIfNull<LyricsFragment>()
            R.id.info -> addIfNull<TrackInfoFragment>()
            else -> null
        }
        childFragmentManager.commitNow {
            childFragmentManager.fragments.forEach { fragment ->
                if (fragment.tag != toShow) hide(fragment)
                else show(fragment)
            }
            setReorderingAllowed(true)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\more\info\TrackInfoFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player.more.info

import android.os.Bundle
import android.view.View
import androidx.fragment.app.Fragment
import com.google.android.material.transition.MaterialSharedAxis
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.ui.media.MediaDetailsFragment
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.setupTransition
import org.koin.androidx.viewmodel.ext.android.viewModel

class TrackInfoFragment : Fragment(
    R.layout.fragment_player_info
), MediaDetailsFragment.Parent {
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        setupTransition(view, axis = MaterialSharedAxis.Y)
    }

    override val feedId = "player"
    override val fromPlayer = true
    override val viewModel by viewModel<TrackInfoViewModel>()
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\more\info\TrackInfoViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player.more.info

import androidx.lifecycle.viewModelScope
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.download.Downloader
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.MediaState
import dev.brahmkshatriya.echo.extensions.cache.Cached.loadMedia
import dev.brahmkshatriya.echo.playback.MediaItemUtils.extensionId
import dev.brahmkshatriya.echo.playback.MediaItemUtils.isLoaded
import dev.brahmkshatriya.echo.playback.MediaItemUtils.track
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.ui.media.MediaDetailsViewModel
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.collectLatest
import kotlinx.coroutines.flow.combine
import kotlinx.coroutines.flow.merge
import kotlinx.coroutines.launch

class TrackInfoViewModel(
    val app: App,
    extensionLoader: ExtensionLoader,
    playerState: PlayerState,
    downloader: Downloader
) : MediaDetailsViewModel(
    downloader, app, true,
    playerState.current.combine(extensionLoader.music) { current, music ->
        current?.mediaItem?.extensionId?.let { id ->
            music.find { it.id == id }
        }
    }
) {
    val currentFlow = playerState.current
    override fun getItem(): Triple<String, EchoMediaItem, Boolean>? {
        return currentFlow.value?.let { (_, item) ->
            Triple(item.extensionId, item.track, item.isLoaded)
        }
    }

    init {
        viewModelScope.launch(Dispatchers.IO) {
            listOf(playerState.current, extensionFlow, refreshFlow).merge().collectLatest {
                itemResultFlow.value = null
                val extension = extensionFlow.value ?: return@collectLatest
                val track = currentFlow.value?.mediaItem?.takeIf { it.isLoaded }?.track
                    ?: return@collectLatest
                itemResultFlow.value = loadMedia(
                    app, extension, MediaState.Unloaded(extension.id, track)
                )
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\more\lyrics\LyricAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player.more.lyrics

import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.recyclerview.widget.DiffUtil
import dev.brahmkshatriya.echo.common.models.Lyrics
import dev.brahmkshatriya.echo.databinding.ItemLoadingBinding
import dev.brahmkshatriya.echo.databinding.ItemLyricBinding
import dev.brahmkshatriya.echo.ui.common.UiViewModel
import dev.brahmkshatriya.echo.ui.feed.FeedLoadingAdapter
import dev.brahmkshatriya.echo.ui.player.PlayerColors.Companion.defaultPlayerColors
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.applyTranslationYAnimation
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimListAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class LyricAdapter(
    val uiViewModel: UiViewModel, val listener: Listener,
) : ScrollAnimListAdapter<Lyrics.Item, LyricAdapter.ViewHolder>(DiffCallback) {
    fun interface Listener {
        fun onLyricSelected(adapter: LyricAdapter, lyric: Lyrics.Item)
    }

    object DiffCallback : DiffUtil.ItemCallback<Lyrics.Item>() {
        override fun areItemsTheSame(oldItem: Lyrics.Item, newItem: Lyrics.Item) =
            oldItem.text == newItem.text

        override fun areContentsTheSame(oldItem: Lyrics.Item, newItem: Lyrics.Item) =
            oldItem == newItem
    }

    inner class ViewHolder(val binding: ItemLyricBinding) : ScrollAnimViewHolder(binding.root) {
        init {
            binding.root.setOnClickListener {
                val lyrics = getItem(bindingAdapterPosition) ?: return@setOnClickListener
                listener.onLyricSelected(this@LyricAdapter, lyrics)
            }
        }
    }

    private fun ViewHolder.updateColors() {
        binding.root.run {
            val colors = uiViewModel.playerColors.value ?: context.defaultPlayerColors()
            val alphaStrippedColor = colors.onBackground or -0x1000000
            setTextColor(alphaStrippedColor)
        }
    }

    private fun getItemOrNull(position: Int) = runCatching { getItem(position) }.getOrNull()

    private var currentPos = -1
    private fun ViewHolder.updateCurrent() {
        val currentTime = getItemOrNull(currentPos)?.startTime ?: 0
        val time = getItemOrNull(bindingAdapterPosition)?.startTime ?: 0
        binding.root.alpha = if (currentTime >= time) 1f else 0.5f
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val inflater = LayoutInflater.from(parent.context)
        val binding = ItemLyricBinding.inflate(inflater, parent, false)
        return ViewHolder(binding)
    }

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        val lyric = getItem(position) ?: return
        holder.binding.root.text = lyric.text.trim().trim('\n').ifEmpty { "♪" }
        holder.updateColors()
        holder.updateCurrent()
        holder.itemView.applyTranslationYAnimation(scrollY)
    }

    override fun onViewAttachedToWindow(holder: ViewHolder) {
        holder.updateColors()
    }

    fun updateColors() {
        onEachViewHolder { updateColors() }
    }

    fun updateCurrent(currentPos: Int) {
        this.currentPos = currentPos
        onEachViewHolder { updateCurrent() }
    }
    class Loading(
        parent: ViewGroup,
        val binding: ItemLoadingBinding = ItemLoadingBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        )
    ) : FeedLoadingAdapter.ViewHolder(binding.root)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\more\lyrics\LyricsFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player.more.lyrics

import android.annotation.SuppressLint
import android.content.Context
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.coordinatorlayout.widget.CoordinatorLayout
import androidx.core.view.ViewCompat
import androidx.core.view.WindowInsetsCompat.CONSUMED
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.lifecycle.lifecycleScope
import androidx.paging.LoadState
import androidx.paging.LoadState.Error
import androidx.paging.LoadState.NotLoading
import androidx.recyclerview.widget.ConcatAdapter
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.LinearSmoothScroller
import androidx.recyclerview.widget.RecyclerView
import com.google.android.material.behavior.HideViewOnScrollBehavior
import com.google.android.material.bottomsheet.BottomSheetBehavior
import com.google.android.material.transition.MaterialSharedAxis
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.clients.LyricsSearchClient
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.Lyrics
import dev.brahmkshatriya.echo.databinding.FragmentPlayerLyricsBinding
import dev.brahmkshatriya.echo.databinding.ItemLyricsItemBinding
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.isClient
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.ui.common.UiViewModel
import dev.brahmkshatriya.echo.ui.extensions.list.ExtensionsListBottomSheet
import dev.brahmkshatriya.echo.ui.feed.FeedLoadingAdapter
import dev.brahmkshatriya.echo.ui.feed.FeedLoadingAdapter.Companion.createListener
import dev.brahmkshatriya.echo.ui.player.PlayerColors.Companion.defaultPlayerColors
import dev.brahmkshatriya.echo.ui.player.PlayerViewModel
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadAsCircle
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.setupTransition
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import dev.brahmkshatriya.echo.utils.ui.FastScrollerHelper
import kotlinx.coroutines.Job
import kotlinx.coroutines.delay
import kotlinx.coroutines.launch
import org.koin.androidx.viewmodel.ext.android.activityViewModel


class LyricsFragment : Fragment() {

    private var binding by autoCleared<FragmentPlayerLyricsBinding>()
    private val viewModel by activityViewModel<LyricsViewModel>()
    private val playerVM by activityViewModel<PlayerViewModel>()
    private val uiViewModel by activityViewModel<UiViewModel>()

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?,
    ): View {
        binding = FragmentPlayerLyricsBinding.inflate(inflater, container, false)
        return binding.root
    }

    private var currentLyricsPos = -1
    private var currentLyrics: Lyrics.Lyric? = null
    private val lyricAdapter by lazy {
        LyricAdapter(uiViewModel) { adapter, lyric ->
            if (adapter.itemCount <= 1) return@LyricAdapter
            currentLyricsPos = -1
            playerVM.seekTo(lyric.startTime)
            updateLyrics(lyric.startTime)
        }
    }

    private val lyricsErrorAdapter by lazy {
        FeedLoadingAdapter(createListener {
            viewModel.reloadCurrent()
        }) { LyricAdapter.Loading(it) }
    }

    private var shouldAutoScroll = true
    val layoutManager by lazy {
        binding.lyricsRecyclerView.layoutManager as LinearLayoutManager
    }

    private fun updateLyrics(current: Long) {
        val lyrics = currentLyrics as? Lyrics.Timed ?: return
        val currentTime = lyrics.list.getOrNull(currentLyricsPos)?.endTime ?: -1
        if (currentTime < current || current <= 0) {
            val currentIndex = lyrics.list.indexOfLast { lyric ->
                lyric.startTime <= current
            }
            lyricAdapter.updateCurrent(currentIndex)
            if (!shouldAutoScroll) return
            binding.appBarLayout.setExpanded(false)
            slideDown()
            if (currentIndex < 0) return
            val smoothScroller = CenterSmoothScroller(requireContext())
            smoothScroller.targetPosition = currentIndex
            layoutManager.startSmoothScroll(smoothScroller)
        }
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        setupTransition(view, false, axis = MaterialSharedAxis.Y)
        FastScrollerHelper.applyTo(binding.lyricsRecyclerView)
        ViewCompat.setOnApplyWindowInsetsListener(binding.root) { _, _ -> CONSUMED }
        observe(uiViewModel.moreSheetState) {
            binding.root.keepScreenOn = it == BottomSheetBehavior.STATE_EXPANDED
        }
        binding.searchBarText.setOnMenuItemClickListener { item ->
            when (item.itemId) {
                R.id.menu_lyrics -> ExtensionsListBottomSheet.newInstance(ExtensionType.LYRICS)
                    .show(parentFragmentManager, null)
            }
            true
        }
        val menu = binding.searchBarText.menu
        val extMenu = binding.searchBarText.findViewById<View>(R.id.menu_lyrics)
        extMenu.setOnLongClickListener {
            val ext = viewModel.currentSelectionFlow.value ?: return@setOnLongClickListener false
            val all = viewModel.extensionsFlow.value
            val index = all.indexOf(ext)
            val nextIndex = (index + 1) % all.size
            if (nextIndex == index) return@setOnLongClickListener false
            viewModel.selectExtension(nextIndex)
            true
        }
        val lyricsItemAdapter = LyricsItemAdapter { lyrics ->
            viewModel.onLyricsSelected(lyrics)
            binding.searchView.hide()
        }
        GridAdapter.configureGridLayout(
            binding.searchRecyclerView,
            lyricsItemAdapter.withLoaders(this, viewModel),
        )
        observe(viewModel.currentSelectionFlow) { current ->
            binding.searchBarText.hint = current?.name
            current?.metadata?.icon.loadAsCircle(extMenu, R.drawable.ic_extension_32dp) {
                menu.findItem(R.id.menu_lyrics).icon = it
            }
            val isSearchable = current?.isClient<LyricsSearchClient>() ?: false
            binding.searchBarText.setNavigationIcon(
                when (isSearchable) {
                    true -> R.drawable.ic_search_outline
                    false -> R.drawable.ic_queue_music
                }
            )
            binding.searchView.editText.isEnabled = isSearchable
            binding.searchView.hint = if (isSearchable)
                getString(R.string.search_x, current.name)
            else current?.name
        }

        binding.searchView.editText.setOnEditorActionListener { v, _, _ ->
            viewModel.queryFlow.value = v.text.toString().trim()
            true
        }

        observe(viewModel.queryFlow) {
            binding.searchView.editText.setText(it)
        }

        observe(viewModel.pagingFlow) {
            lyricsItemAdapter.submitData(it)
        }

        var job: Job? = null
        binding.lyricsRecyclerView.addOnScrollListener(object : RecyclerView.OnScrollListener() {
            override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: Int) {
                if (dy > 0) return
                shouldAutoScroll = false
                job?.cancel()
                job = lifecycleScope.launch {
                    delay(3500)
                    shouldAutoScroll = true
                }
            }
        })

        observe(uiViewModel.playerColors) {
            lyricAdapter.updateColors()
            val colors = it ?: requireContext().defaultPlayerColors()
            binding.noLyrics.setTextColor(colors.onBackground)
        }

        binding.lyricsRecyclerView.adapter = ConcatAdapter(lyricsErrorAdapter, lyricAdapter)
        binding.lyricsRecyclerView.itemAnimator = null
        observe(viewModel.lyricsState) { state ->
            binding.noLyrics.isVisible = state == LyricsViewModel.State.Empty
            lyricsErrorAdapter.loadState = when (state) {
                LyricsViewModel.State.Initial -> LoadState.Loading
                LyricsViewModel.State.Empty -> NotLoading(true)
                LyricsViewModel.State.Loading -> LoadState.Loading
                is LyricsViewModel.State.Loaded -> state.result.fold({
                    NotLoading(true)
                }, {
                    Error(it)
                })

            }
            val lyricsItem = (state as? LyricsViewModel.State.Loaded)?.result?.getOrNull()
            binding.lyricsItem.bind(lyricsItem)
            currentLyricsPos = -1
            currentLyrics = lyricsItem?.lyrics
            val list = when (val lyrics = currentLyrics) {
                is Lyrics.Simple -> listOf(Lyrics.Item(lyrics.text, 0, 0))
                is Lyrics.Timed -> lyrics.list
                is Lyrics.WordByWord -> lyrics.list.flatten()
                null -> emptyList()
            }
            lyricAdapter.submitList(list)
        }

        observe(playerVM.progress) { updateLyrics(it.first) }
    }

    fun ItemLyricsItemBinding.bind(lyrics: Lyrics?) = root.run {
        if (lyrics == null) {
            isVisible = false
            return
        }
        isVisible = true
        setTitle(lyrics.title)
        setSubtitle(lyrics.subtitle)
        setBackgroundResource(R.color.amoled_bg)
    }

    class CenterSmoothScroller(context: Context) : LinearSmoothScroller(context) {
        override fun calculateDtToFit(
            viewStart: Int, viewEnd: Int, boxStart: Int, boxEnd: Int, snapPreference: Int,
        ): Int {
            val midPoint = boxEnd / 2
            val targetMidPoint = ((viewEnd - viewStart) / 2) + viewStart
            return midPoint - targetMidPoint
        }

        override fun getVerticalSnapPreference() = SNAP_TO_START
        override fun calculateTimeForDeceleration(dx: Int) = 650
    }

    @SuppressLint("WrongConstant")
    private fun slideDown() {
        val params = binding.lyricsItem.root.layoutParams as CoordinatorLayout.LayoutParams
        val behavior = params.behavior as HideViewOnScrollBehavior
        behavior.setViewEdge(1)
        behavior.slideOut(binding.lyricsItem.root)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\more\lyrics\LyricsItemAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player.more.lyrics

import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.paging.LoadState
import androidx.recyclerview.widget.DiffUtil
import dev.brahmkshatriya.echo.common.models.Lyrics
import dev.brahmkshatriya.echo.common.models.Tab
import dev.brahmkshatriya.echo.databinding.ItemLoadingSmallBinding
import dev.brahmkshatriya.echo.databinding.ItemShelfCategoryBinding
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.ui.feed.EmptyAdapter
import dev.brahmkshatriya.echo.ui.feed.FeedAdapter.LoadingViewHolder
import dev.brahmkshatriya.echo.ui.feed.FeedLoadingAdapter
import dev.brahmkshatriya.echo.ui.feed.FeedLoadingAdapter.Companion.createListener
import dev.brahmkshatriya.echo.ui.feed.TabsAdapter
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimPagingAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder
import kotlinx.coroutines.flow.combine

class LyricsItemAdapter(
    private val listener: Listener
) : ScrollAnimPagingAdapter<Lyrics, LyricsItemAdapter.ViewHolder>(DiffCallback), GridAdapter {

    object DiffCallback : DiffUtil.ItemCallback<Lyrics>() {
        override fun areItemsTheSame(oldItem: Lyrics, newItem: Lyrics) = oldItem.id == newItem.id
        override fun areContentsTheSame(oldItem: Lyrics, newItem: Lyrics) = oldItem == newItem
    }

    fun interface Listener {
        fun onLyricsSelected(lyrics: Lyrics)
    }

    class ViewHolder(val binding: ItemShelfCategoryBinding) : ScrollAnimViewHolder(binding.root)

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val inflater = LayoutInflater.from(parent.context)
        val binding = ItemShelfCategoryBinding.inflate(inflater, parent, false)
        binding.icon.isVisible = false
        return ViewHolder(binding)
    }

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        val lyrics = getItem(position) ?: return
        holder.binding.run {
            root.setOnClickListener { listener.onLyricsSelected(lyrics) }
            title.text = lyrics.title
            subtitle.text = lyrics.subtitle
            subtitle.isVisible = !lyrics.subtitle.isNullOrBlank()
        }
    }

    data class Loading(
        val parent: ViewGroup,
        val binding: ItemLoadingSmallBinding = ItemLoadingSmallBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        )
    ) : FeedLoadingAdapter.ViewHolder(binding.root)

    fun withLoaders(fragment: Fragment, viewModel: LyricsViewModel): GridAdapter {
        val tabs = TabsAdapter<Tab>({ title }) { view, index, tab ->
            viewModel.selectedTabIndexFlow.value = index
        }
        fragment.observe(viewModel.tabsFlow) { tabs.data = it }
        fragment.observe(viewModel.selectedTabIndexFlow) { tabs.selected = it }
        val loadStateListener = fragment.createListener { retry() }
        val header = FeedLoadingAdapter(loadStateListener) { LoadingViewHolder(it) }
        val footer = FeedLoadingAdapter(loadStateListener) { LoadingViewHolder(it) }
        val empty = EmptyAdapter()
        fragment.observe(
            loadStateFlow.combine(viewModel.shouldShowEmpty) { a, b -> a to b }
        ) { (loadStates, shouldShowEmpty) ->
            val isEmpty =
                shouldShowEmpty && itemCount == 0 && loadStates.append is LoadState.NotLoading
            empty.loadState = if (isEmpty) LoadState.Loading else LoadState.NotLoading(false)
        }
        addLoadStateListener { loadStates ->
            header.loadState = loadStates.refresh
            footer.loadState = loadStates.append
        }
        return GridAdapter.Concat(tabs, header, empty, this, footer)
    }

    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) = count

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\more\lyrics\LyricsViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player.more.lyrics

import androidx.core.content.edit
import androidx.lifecycle.viewModelScope
import androidx.media3.common.MediaItem
import androidx.paging.cachedIn
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.clients.LyricsClient
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Lyrics
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtension
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.isClient
import dev.brahmkshatriya.echo.extensions.cache.Cached
import dev.brahmkshatriya.echo.playback.MediaItemUtils.extensionId
import dev.brahmkshatriya.echo.playback.MediaItemUtils.isLoaded
import dev.brahmkshatriya.echo.playback.MediaItemUtils.track
import dev.brahmkshatriya.echo.playback.PlayerState
import dev.brahmkshatriya.echo.ui.common.PagedSource
import dev.brahmkshatriya.echo.ui.extensions.list.ExtensionListViewModel
import dev.brahmkshatriya.echo.utils.CacheUtils.getFromCache
import dev.brahmkshatriya.echo.utils.CacheUtils.saveToCache
import dev.brahmkshatriya.echo.utils.CoroutineUtils.combineTransformLatest
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.ExperimentalCoroutinesApi
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.SharingStarted.Companion.Eagerly
import kotlinx.coroutines.flow.SharingStarted.Companion.Lazily
import kotlinx.coroutines.flow.collectLatest
import kotlinx.coroutines.flow.combine
import kotlinx.coroutines.flow.distinctUntilChanged
import kotlinx.coroutines.flow.emitAll
import kotlinx.coroutines.flow.flowOn
import kotlinx.coroutines.flow.map
import kotlinx.coroutines.flow.onEach
import kotlinx.coroutines.flow.stateIn
import kotlinx.coroutines.flow.transformLatest
import kotlinx.coroutines.launch
import kotlinx.coroutines.withContext

class LyricsViewModel(
    private val app: App,
    extensionLoader: ExtensionLoader,
    playerState: PlayerState,
) : ExtensionListViewModel<Extension<*>>() {

    private val refreshFlow = MutableSharedFlow<Unit>()
    override val currentSelectionFlow = MutableStateFlow<Extension<*>?>(null)

    val queryFlow = MutableStateFlow("")
    val selectedTabIndexFlow = MutableStateFlow(-1)
    val lyricsState = MutableStateFlow<State>(State.Initial)

    private val mediaFlow = playerState.current.map { current ->
        current?.mediaItem?.takeIf { it.isLoaded }
    }.distinctUntilChanged().stateIn(viewModelScope, Eagerly, null)

    override val extensionsFlow = extensionLoader.lyrics.combine(mediaFlow) { lyrics, mediaItem ->
        val trackExtension = mediaItem?.extensionId?.let { id ->
            extensionLoader.music.getExtension(id)?.takeIf { it.isClient<LyricsClient>() }
        }
        listOfNotNull(trackExtension) + lyrics
    }.onEach { extensions ->
        currentSelectionFlow.value = null
        lyricsState.value = State.Initial
        queryFlow.value = ""
        val media = mediaFlow.value?.track?.id
        currentSelectionFlow.value = media?.let {
            val id = app.context.getFromCache<String>(media, "lyrics_ext")
                ?: app.settings.getString(LAST_LYRICS_KEY, null)
            extensions.find { it.id == id } ?: extensions.firstOrNull()
        }
        refreshFlow.emit(Unit)
    }.stateIn(viewModelScope, Eagerly, emptyList())

    override fun onExtensionSelected(extension: Extension<*>) {
        app.settings.edit { putString(LAST_LYRICS_KEY, extension.id) }
        val media = mediaFlow.value?.track?.id ?: return
        app.context.saveToCache<String>(media, extension.id, "lyrics_ext")
    }

    fun reloadCurrent() = viewModelScope.launch { refreshFlow.emit(Unit) }

    private val cachedFeed = combineTransformLatest(
        currentSelectionFlow, mediaFlow, queryFlow, refreshFlow
    ) {
        emit(null)
        val extension = it[0] as Extension<*>? ?: return@combineTransformLatest
        val item = it[1] as MediaItem? ?: return@combineTransformLatest
        val query = it[2] as String
        val result = Cached.getLyricsFeed(app, extension.id, item.extensionId, item.track, query)
        emit(result)
    }.stateIn(viewModelScope, Eagerly, null)

    private val loadedFeed = combineTransformLatest(
        currentSelectionFlow, mediaFlow, queryFlow, refreshFlow
    ) {
        emit(null)
        val extension = it[0] as Extension<*>? ?: return@combineTransformLatest
        val item = it[1] as MediaItem? ?: return@combineTransformLatest
        val query = it[2] as String
        val result = Cached.loadLyricsFeed(app, extension, item.extensionId, item.track, query)
        emit(result)
    }.stateIn(viewModelScope, Eagerly, null)

    private val feedFlow = loadedFeed.combine(cachedFeed) { loaded, cache ->
        cache to loaded
    }.stateIn(viewModelScope, Eagerly, null to null)

    val tabsFlow = feedFlow.map { (cached, loaded) ->
        val state = (loaded?.getOrNull() ?: cached?.getOrNull()) ?: return@map listOf()
        state.tabs
    }

    private suspend fun getData(
        feed: Result<Feed<Lyrics>>?, index: Int,
    ) = withContext(Dispatchers.IO) {
        feed?.mapCatching {
            val paged = it.getPagedData(it.tabs.run { getOrNull(index) ?: firstOrNull() }).pagedData
            paged
        }
    }

    private val cachedDataFlow =
        cachedFeed.combineTransformLatest(selectedTabIndexFlow) { feed, tab ->
            emit(null)
            if (feed == null) return@combineTransformLatest
            emit(getData(feed, tab))
        }.stateIn(viewModelScope, Lazily, null)

    private val loadedDataFlow =
        loadedFeed.combineTransformLatest(selectedTabIndexFlow) { feed, tab ->
            emit(null)
            if (feed == null) return@combineTransformLatest
            emit(getData(feed, tab))
        }.stateIn(viewModelScope, Lazily, null)

    private val dataFlow = loadedDataFlow.combine(cachedDataFlow) { loaded, cache ->
        cache to loaded
    }.stateIn(viewModelScope, Lazily, null to null)

    val shouldShowEmpty = dataFlow.map { (cached, loaded) ->
        val data = loaded?.getOrNull() ?: cached?.getOrNull()
        data != null
    }.stateIn(viewModelScope, Lazily, false)

    @OptIn(ExperimentalCoroutinesApi::class)
    val pagingFlow = dataFlow.transformLatest { (cached, loaded) ->
        emitAll(PagedSource(loaded, cached).flow)
    }.flowOn(Dispatchers.IO).cachedIn(viewModelScope)

    sealed interface State {
        data object Initial : State
        data object Loading : State
        data object Empty : State
        data class Loaded(val result: Result<Lyrics>) : State
    }

    fun onLyricsSelected(lyricsItem: Lyrics?) = viewModelScope.launch(Dispatchers.IO) {
        lyricsState.value = State.Loading
        if (lyricsItem == null) lyricsState.value = State.Empty else {
            val extension = currentSelectionFlow.value ?: return@launch
            lyricsState.value =
                State.Loaded(Cached.loadLyrics(app, extension, lyricsItem).map { it.fillGaps() })
        }
    }

    private fun Lyrics.fillGaps(): Lyrics {
        val lyrics = this.lyrics as? Lyrics.Timed
        return if (lyrics != null && lyrics.fillTimeGaps) {
            val new = mutableListOf<Lyrics.Item>()
            var last = 0L
            lyrics.list.forEach {
                if (it.startTime > last) {
                    new.add(Lyrics.Item("", last, it.startTime))
                }
                new.add(it)
                last = it.endTime
            }
            this.copy(lyrics = Lyrics.Timed(new))
        } else this
    }

    init {
        reloadCurrent()
        viewModelScope.launch(Dispatchers.IO) {
            dataFlow.collectLatest { (cached, loaded) ->
                if (lyricsState.value != State.Initial) return@collectLatest
                runCatching {
                    val cachedLyrics = cached?.getOrNull()?.loadAll()?.firstOrNull()
                    val loaded = loaded?.getOrNull()
                    if (loaded != null) {
                        lyricsState.value = State.Loading
                        onLyricsSelected(loaded.loadPage(null).data.firstOrNull())
                    } else if (cachedLyrics != null) {
                        onLyricsSelected(cachedLyrics)
                    }
                }
            }
        }
    }

    companion object {
        const val LAST_LYRICS_KEY = "last_lyrics_client"
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\more\upnext\QueueAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player.more.upnext

import android.annotation.SuppressLint
import android.graphics.drawable.Animatable
import android.view.LayoutInflater
import android.view.MotionEvent
import android.view.ViewGroup
import androidx.core.view.isVisible
import androidx.media3.common.MediaItem
import androidx.recyclerview.widget.DiffUtil
import androidx.recyclerview.widget.ListAdapter
import androidx.recyclerview.widget.RecyclerView
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.databinding.ItemPlaylistTrackBinding
import dev.brahmkshatriya.echo.playback.MediaItemUtils.isLoaded
import dev.brahmkshatriya.echo.playback.MediaItemUtils.track
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.subtitle
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadInto
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.applyTranslationYAnimation
import dev.brahmkshatriya.echo.utils.ui.UiUtils.marquee
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class QueueAdapter(
    private val listener: Listener,
    private val inactive: Boolean = false
) : ListAdapter<Pair<Boolean?, MediaItem>, QueueAdapter.ViewHolder>(DiffCallback) {

    object DiffCallback : DiffUtil.ItemCallback<Pair<Boolean?, MediaItem>>() {
        override fun areItemsTheSame(
            oldItem: Pair<Boolean?, MediaItem>,
            newItem: Pair<Boolean?, MediaItem>
        ) = oldItem.second.mediaId == newItem.second.mediaId

        override fun areContentsTheSame(
            oldItem: Pair<Boolean?, MediaItem>,
            newItem: Pair<Boolean?, MediaItem>
        ) = oldItem == newItem

    }

    open class Listener {
        open fun onItemClicked(position: Int) {}
        open fun onItemClosedClicked(position: Int) {}
        open fun onDragHandleTouched(viewHolder: RecyclerView.ViewHolder) {}
    }

    @SuppressLint("ClickableViewAccessibility")
    inner class ViewHolder(
        val binding: ItemPlaylistTrackBinding
    ) : ScrollAnimViewHolder(binding.root) {

        init {
            binding.playlistItemClose.setOnClickListener {
                val pos = bindingAdapterPosition
                if (pos == RecyclerView.NO_POSITION) return@setOnClickListener
                listener.onItemClosedClicked(pos)
            }

            binding.root.setOnClickListener {
                val pos = bindingAdapterPosition
                if (pos == RecyclerView.NO_POSITION) return@setOnClickListener
                listener.onItemClicked(pos)
            }

            binding.playlistItemDrag.setOnTouchListener { _, event ->
                val pos = bindingAdapterPosition
                if (pos == RecyclerView.NO_POSITION) return@setOnTouchListener false
                if (event.actionMasked != MotionEvent.ACTION_DOWN) return@setOnTouchListener false
                listener.onDragHandleTouched(this)
                true
            }
        }

    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val inflater = LayoutInflater.from(parent.context)
        return ViewHolder(ItemPlaylistTrackBinding.inflate(inflater, parent, false))
    }

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        holder.onBind(position)
        holder.itemView.applyTranslationYAnimation(scrollAmount)
    }

    private fun ViewHolder.onBind(position: Int) {
        val (current, item) = getItem(position)
        val isCurrent = current != null
        val isPlaying = current == true
        val track = item.track
        binding.bind(track)
        binding.isPlaying(isPlaying)
        binding.playlistItemClose.isVisible = !inactive
        binding.playlistItemDrag.isVisible = !inactive
        binding.playlistCurrentItem.isVisible = isCurrent
        binding.playlistProgressBar.isVisible = isCurrent && !item.isLoaded
        binding.playlistItem.alpha = if (inactive) 0.5f else 1f
    }

    private var scrollAmount: Int = 0
    private val scrollListener = object : RecyclerView.OnScrollListener() {
        override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: Int) {
            scrollAmount = dy
        }
    }

    var recyclerView: RecyclerView? = null
    override fun onAttachedToRecyclerView(recyclerView: RecyclerView) {
        this.recyclerView = recyclerView
        recyclerView.addOnScrollListener(scrollListener)
    }

    override fun onDetachedFromRecyclerView(recyclerView: RecyclerView) {
        recyclerView.removeOnScrollListener(scrollListener)
        this.recyclerView = null
    }

    companion object {
        fun ItemPlaylistTrackBinding.bind(track: Track) {
            playlistItemTitle.run {
                text = track.title
                marquee()
            }

            track.cover.loadInto(playlistItemImageView, R.drawable.art_music)
            val subtitle = track.subtitle(root.context)
            playlistItemAuthor.run {
                isVisible = !subtitle.isNullOrEmpty()
                text = subtitle
                marquee()
            }
        }

        fun ItemPlaylistTrackBinding.isPlaying(isPlaying: Boolean) {
            playlistItemNowPlaying.isVisible = isPlaying
            (playlistItemNowPlaying.drawable as Animatable).start()
        }
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\more\upnext\QueueFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player.more.upnext

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.fragment.app.Fragment
import androidx.recyclerview.widget.ItemTouchHelper
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.RecyclerView
import com.google.android.material.transition.MaterialSharedAxis
import dev.brahmkshatriya.echo.databinding.FragmentPlayerQueueBinding
import dev.brahmkshatriya.echo.ui.player.PlayerViewModel
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.setupTransition
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoClearedNullable
import org.koin.androidx.viewmodel.ext.android.activityViewModel

class QueueFragment : Fragment() {

    private var binding by autoClearedNullable<FragmentPlayerQueueBinding>()
    private val viewModel by activityViewModel<PlayerViewModel>()

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View {
        binding = FragmentPlayerQueueBinding.inflate(inflater, container, false)
        return binding!!.root
    }

    private val queueAdapter by lazy {
        QueueAdapter(object : QueueAdapter.Listener() {
            override fun onDragHandleTouched(viewHolder: RecyclerView.ViewHolder) {
                touchHelper.startDrag(viewHolder)
            }

            override fun onItemClicked(position: Int) {
                viewModel.play(position)
            }

            override fun onItemClosedClicked(position: Int) {
                viewModel.removeQueueItem(position)
            }
        })
    }

    private val touchHelper by lazy {
        ItemTouchHelper(object : ItemTouchHelper.SimpleCallback(
            ItemTouchHelper.UP or ItemTouchHelper.DOWN,
            ItemTouchHelper.START
        ) {
            override fun onMove(
                recyclerView: RecyclerView,
                viewHolder: RecyclerView.ViewHolder,
                target: RecyclerView.ViewHolder
            ): Boolean {
                val fromPos = viewHolder.bindingAdapterPosition
                val toPos = target.bindingAdapterPosition
                viewModel.moveQueueItems(fromPos, toPos)
                return true
            }

            override fun onSwiped(viewHolder: RecyclerView.ViewHolder, direction: Int) {
                val pos = viewHolder.bindingAdapterPosition
                viewModel.removeQueueItem(pos)
            }

            override fun getMovementFlags(
                recyclerView: RecyclerView,
                viewHolder: RecyclerView.ViewHolder
            ): Int {
                return makeMovementFlags(
                    ItemTouchHelper.UP or ItemTouchHelper.DOWN,
                    ItemTouchHelper.START
                )
            }
        })
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        setupTransition(view, false, axis = MaterialSharedAxis.Y)
        val recyclerView = binding!!.root
        recyclerView.adapter = queueAdapter
        touchHelper.attachToRecyclerView(recyclerView)
        val manager = recyclerView.layoutManager as LinearLayoutManager
        val screenHeight = view.resources.displayMetrics.heightPixels / 3

        fun submit() {
            val current = viewModel.playerState.current.value
            val currentIndex = current?.index
            val it = viewModel.queue.mapIndexed { index, mediaItem ->
                if (currentIndex == index) current.isPlaying to current.mediaItem
                else null to mediaItem
            }
            queueAdapter.submitList(it) {
                currentIndex ?: return@submitList
                binding?.root?.scrollToPosition(currentIndex)
            }
        }

        observe(viewModel.playerState.current) { submit() }
        observe(viewModel.queueFlow) { submit() }

        val index = viewModel.playerState.current.value?.index ?: return
        manager.scrollToPositionWithOffset(index + 1, screenHeight)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\quality\FormatUtils.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player.quality

import android.content.Context
import androidx.annotation.OptIn
import androidx.media3.common.C
import androidx.media3.common.Format
import androidx.media3.common.Tracks
import androidx.media3.common.util.UnstableApi
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Streamable

object FormatUtils {
    @OptIn(UnstableApi::class)
    private fun Format.getBitrate() =
        (bitrate / 1000).takeIf { it > 0 }?.let { " • $it kbps" } ?: ""

    private fun Format.getFrameRate() =
        frameRate.toInt().takeIf { it > 0 }?.let { " • $it fps" } ?: ""


    private fun Format.getMimeType() = when (val mime = sampleMimeType?.replace("audio/", "")) {
        "mp4a-latm" -> "AAC"
        else -> mime?.uppercase()
    }

    private fun Format.getHertz() =
        sampleRate.takeIf { it > 0 }?.let { " • $it Hz" } ?: ""

    private fun Format.getChannelCount() =
        channelCount.takeIf { it > 0 }?.let { " • ${it}ch" } ?: ""

    @OptIn(UnstableApi::class)
    fun Format.toAudioDetails() =
        "${getMimeType()}${getHertz()}${getChannelCount()}${getBitrate()}"

    fun Format.toVideoDetails() = "${height}p${getFrameRate()}${getBitrate()}"
    fun Format.toSubtitleDetails() = label ?: language ?: "Unknown"

    private fun List<Tracks.Group>.getSelectedFormat(): Format? {
        return firstNotNullOfOrNull { trackGroup ->
            val index = (0 until trackGroup.length).firstNotNullOfOrNull { i ->
                if (trackGroup.isTrackSelected(i)) i else null
            } ?: return null
            trackGroup.getTrackFormat(index)
        }
    }

    fun List<Tracks.Group>.getSelected(): Pair<List<Pair<Tracks.Group, Int>>, Int?> {
        var selected: Pair<Tracks.Group, Int>? = null
        val trackGroups = map { trackGroup ->
            (0 until trackGroup.length).map { i ->
                val pair = Pair(trackGroup, i)
                val isSelected = trackGroup.isTrackSelected(i)
                if (isSelected) selected = pair
                pair
            }
        }.flatten()
        val select = trackGroups.indexOf(selected).takeIf { it != -1 }
        return trackGroups to select
    }

    fun Tracks.getDetails(
        context: Context, server: Streamable.Media.Server?, index: Int?,
    ): List<String> {
        val audios = groups.filter { it.type == C.TRACK_TYPE_AUDIO }
        val videos = groups.filter { it.type == C.TRACK_TYPE_VIDEO }
        val subtitles = groups.filter { it.type == C.TRACK_TYPE_TEXT }
        val sourceTitle = server?.run {
            if (merged) sources.mapNotNull { it.title }
            else listOfNotNull(sources.getOrNull(index ?: -1)?.title)
        }.orEmpty()
        return sourceTitle + listOfNotNull(
            audios.getSelectedFormat()?.toAudioDetails(),
            videos.getSelectedFormat()?.toVideoDetails(),
            subtitles.getSelectedFormat()?.toSubtitleDetails()
        ).ifEmpty { listOf(context.getString(R.string.unknown_quality)) }
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\quality\QualitySelectionBottomSheet.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player.quality

import android.annotation.SuppressLint
import android.os.Bundle
import android.text.TextUtils
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.TextView
import androidx.annotation.OptIn
import androidx.core.view.isVisible
import androidx.media3.common.C
import androidx.media3.common.Format
import androidx.media3.common.Tracks
import androidx.media3.common.util.UnstableApi
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import com.google.android.material.chip.Chip
import com.google.android.material.chip.ChipGroup
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.databinding.DialogPlayerQualitySelectionBinding
import dev.brahmkshatriya.echo.playback.MediaItemUtils.backgroundIndex
import dev.brahmkshatriya.echo.playback.MediaItemUtils.serverIndex
import dev.brahmkshatriya.echo.playback.MediaItemUtils.serverWithDownloads
import dev.brahmkshatriya.echo.playback.MediaItemUtils.subtitleIndex
import dev.brahmkshatriya.echo.playback.MediaItemUtils.track
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.player.PlayerViewModel
import dev.brahmkshatriya.echo.ui.player.quality.FormatUtils.getDetails
import dev.brahmkshatriya.echo.ui.player.quality.FormatUtils.getSelected
import dev.brahmkshatriya.echo.ui.player.quality.FormatUtils.toAudioDetails
import dev.brahmkshatriya.echo.ui.player.quality.FormatUtils.toSubtitleDetails
import dev.brahmkshatriya.echo.ui.player.quality.FormatUtils.toVideoDetails
import dev.brahmkshatriya.echo.ui.settings.SettingsPlayerFragment
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import org.koin.androidx.viewmodel.ext.android.activityViewModel

class QualitySelectionBottomSheet : BottomSheetDialogFragment() {
    var binding by autoCleared<DialogPlayerQualitySelectionBinding>()
    private val viewModel by activityViewModel<PlayerViewModel>()

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?,
    ): View {
        binding = DialogPlayerQualitySelectionBinding.inflate(inflater, container, false)
        return binding.root
    }

    @SuppressLint("NotifyDataSetChanged")
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        binding.topAppBar.setNavigationOnClickListener { dismiss() }
        binding.topAppBar.setOnMenuItemClickListener {
            dismiss()
            requireActivity().openFragment<SettingsPlayerFragment>()
            true
        }

        observe(viewModel.buffering) {
            binding.progressIndicator.isVisible = it
        }
        observe(viewModel.playerState.current) { current ->
            val item = current?.mediaItem ?: return@observe
            val track = item.track
            binding.run {
                applyChips(
                    item.serverWithDownloads(requireContext()),
                    streamableServer, streamableServerGroup, item.serverIndex
                ) {
                    it ?: return@applyChips
                    viewModel.changeServer(it)
                }
                streamableServer.isVisible = true
                streamableServerGroup.isVisible = true

                applyChips(
                    listOf(null, *track.backgrounds.toTypedArray()), streamableBackgrounds,
                    streamableBackgroundGroup, item.backgroundIndex + 1
                ) {
                    viewModel.changeBackground(it)
                }

                applyChips(
                    listOf(null, *track.subtitles.toTypedArray()), streamableSubtitles,
                    streamableSubtitleGroup, item.subtitleIndex + 1
                ) {
                    viewModel.changeSubtitle(it)
                }
            }
        }

        observe(viewModel.serverAndTracks) { (tracks, server, index) ->
            val list = if (server != null && !server.merged) server.sources else listOf()
            binding.run {
                applyChips(
                    list, streamableSource, streamableSourceGroup, index,
                    { viewModel.changeCurrentSource(list.indexOf(it)) }) {
                    it.title ?: getString(R.string.quality_x, it.quality)
                }
            }
            val details = tracks?.getDetails(requireContext(), server, index)?.joinToString("\n")
            binding.streamableInfo.text = details
            binding.streamableInfo.isVisible = !details.isNullOrBlank()

            val audios = tracks?.groups?.filter { it.type == C.TRACK_TYPE_AUDIO }
            val videos = tracks?.groups?.filter { it.type == C.TRACK_TYPE_VIDEO }
            val subtitles = tracks?.groups?.filter { it.type == C.TRACK_TYPE_TEXT }

            val onClick: Chip.(Pair<Tracks.Group, Int>?) -> Unit = {
                val trackGroup = it!!.first.mediaTrackGroup
                viewModel.changeTrackSelection(trackGroup, it.second)
            }

            binding.run {
                applyChips(audios, trackAudios, trackAudiosGroup, onClick) {
                    it.toAudioDetails()
                }
                applyChips(videos, trackVideos, trackVideosGroup, onClick) {
                    it.toVideoDetails()
                }
                applyChips(subtitles, trackSubtitles, trackSubtitlesGroup, onClick) {
                    it.toSubtitleDetails()
                }
            }
        }
    }

    @OptIn(UnstableApi::class)
    private fun applyChips(
        groups: List<Tracks.Group>?,
        textView: TextView,
        chipGroup: ChipGroup,
        onClick: Chip.(Pair<Tracks.Group, Int>?) -> Unit,
        text: (Format) -> String,
    ) {
        val (trackGroups, select) = groups.orEmpty().getSelected()
        applyChips(trackGroups, textView, chipGroup, select, onClick) {
            val format = it.first.getTrackFormat(it.second)
            text(format)
        }
    }

    private fun applyChips(
        streamables: List<Streamable?>,
        textView: TextView,
        chipGroup: ChipGroup,
        selected: Int?,
        onClick: Chip.(Streamable?) -> Unit,
    ) {
        val context = chipGroup.context
        applyChips(streamables, textView, chipGroup, selected, onClick) {
            it?.let {
                it.title ?: when (it.type) {
                    Streamable.MediaType.Subtitle -> context.getString(R.string.unknown)
                    else -> context.getString(R.string.quality_x, it.quality)
                }
            } ?: context.getString(R.string.off)
        }
    }

    private fun <T> applyChips(
        list: List<T>,
        textView: TextView,
        chipGroup: ChipGroup,
        selected: Int?,
        onClick: Chip.(T) -> Unit,
        text: (T) -> String,
    ) {
        val visible = list.size > 1
        textView.isVisible = visible
        chipGroup.apply {
            isVisible = visible
            removeAllViews()
            list.forEachIndexed { index, t ->
                val chip = Chip(context)
                chip.text = text(t)
                chip.ellipsize = TextUtils.TruncateAt.MIDDLE
                chip.isCheckable = true
                addView(chip)
                if (index == selected) check(chip.id)
                chip.setOnCheckedChangeListener { _, isChecked ->
                    if (isChecked) onClick(chip, t)
                }
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\player\sleep\SleepTimerBottomSheet.kt
================================================================================

package dev.brahmkshatriya.echo.ui.player.sleep

import android.annotation.SuppressLint
import android.content.Context
import android.content.DialogInterface
import android.os.Bundle
import android.text.format.DateFormat
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.content.edit
import androidx.media3.common.C
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import com.google.android.material.timepicker.MaterialTimePicker
import com.google.android.material.timepicker.TimeFormat
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.databinding.DialogPlayerSleepTimerBinding
import dev.brahmkshatriya.echo.ui.common.SnackBarHandler.Companion.createSnack
import dev.brahmkshatriya.echo.ui.player.PlayerViewModel
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import dev.brahmkshatriya.echo.utils.ui.RulerAdapter
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import java.util.Calendar

class SleepTimerBottomSheet : BottomSheetDialogFragment() {
    var binding by autoCleared<DialogPlayerSleepTimerBinding>()
    private val viewModel by activityViewModel<PlayerViewModel>()

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
    ): View {
        binding = DialogPlayerSleepTimerBinding.inflate(inflater, container, false)
        return binding.root
    }

    private val adapter by lazy {
        RulerAdapter(object : RulerAdapter.Listener<Int> {
            override fun intervalText(value: Int) = value.toString()
            override fun onSelectItem(value: Int) {
                rulerTime = value
                binding.sleepTimerValue.text = requireContext().createString(value * 60L * 1000)
            }
        })
    }

    @SuppressLint("NotifyDataSetChanged")
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        binding.sleepTimerRecycler.adapter = adapter
        val last = viewModel.settings.getInt("sleep_timer", 5)
        adapter.submitList(timeRangeWithIntervals, last)

        binding.okay.setOnClickListener { saveAndDismiss(rulerTime) }
        binding.endOfTrack.setOnClickListener { setTimerAndDismiss(Long.MAX_VALUE) }
        binding.min15.setOnClickListener { saveAndDismiss(15) }
        binding.min30.setOnClickListener { saveAndDismiss(30) }
        binding.min45.setOnClickListener { saveAndDismiss(45) }
        binding.hr1.setOnClickListener { saveAndDismiss(60) }
        binding.hr2.setOnClickListener { saveAndDismiss(120) }

        binding.topAppBar.setNavigationOnClickListener { setTimerAndDismiss(0) }
        binding.topAppBar.setOnMenuItemClickListener {
            when (it.itemId) {
                R.id.menu_schedule -> {
                    val is24Hour = DateFormat.is24HourFormat(context)
                    val picker = MaterialTimePicker.Builder()
                        .setTimeFormat(if (is24Hour) TimeFormat.CLOCK_24H else TimeFormat.CLOCK_12H)
                        .setTitleText(getString(R.string.sleep_on_specific_time))
                        .build()
                    picker.addOnCancelListener { picker.dismiss() }
                    picker.addOnPositiveButtonClickListener {
                        val now = Calendar.getInstance()
                        val nowMin = now.get(Calendar.HOUR_OF_DAY) * 60 + now.get(Calendar.MINUTE)
                        val pickerMin = picker.hour * 60 + picker.minute
                        val time = if (pickerMin > nowMin) pickerMin - nowMin
                        else 1440 - nowMin + pickerMin
                        setTimerAndDismiss(time * 60L * 1000)
                    }
                    picker.show(childFragmentManager, null)
                    true
                }

                else -> false
            }
        }
    }

    private var timer = 0L
    private fun setTimerAndDismiss(ms: Long) {
        timer = ms
        dismiss()
    }

    private fun saveAndDismiss(mins: Int) {
        viewModel.settings.edit { putInt("sleep_timer", mins) }
        val ms = mins * 60L * 1000
        setTimerAndDismiss(ms)
    }

    override fun onDismiss(dialog: DialogInterface) {
        super.onDismiss(dialog)
        viewModel.setSleepTimer(timer)
        val message = when (timer) {
            0L -> getString(R.string.sleep_timer_cancelled)
            Long.MAX_VALUE -> {
                val until = viewModel.browser.value?.run {
                    (duration.takeIf { it != C.TIME_UNSET } ?: 0) - currentPosition
                } ?: 0
                getString(R.string.sleep_timer_set_for, requireContext().createString(until))
            }

            else -> getString(R.string.sleep_timer_set_for, requireContext().createString(timer))
        }
        createSnack(message)
    }

    private var rulerTime = 5

    companion object {
        private const val MAX = 360
        private const val MIN = 5
        private const val STEPS = 5
        private const val INTERVAL = 15

        val timeRangeWithIntervals = 0.rangeTo((MAX - MIN) / STEPS).map {
            val value = MIN + it * STEPS
            value to (value == MIN || value % INTERVAL == 0)
        }

        private fun Context.createString(ms: Long): String {
            val minutes = ms / 1000 / 60
            val hrs = minutes / 60
            val min = minutes % 60
            val str = StringBuilder()
            if (hrs > 0) str.append(
                runCatching { resources.getQuantityString(R.plurals.number_hour, hrs.toInt(), hrs) }
                    .getOrNull() ?: getString(R.string.n_hours, hrs)
            ).append(if (min > 0) " " else "")
            if (min > 0) str.append(
                runCatching { resources.getQuantityString(R.plurals.number_min, min.toInt(), min) }
                    .getOrNull() ?: getString(R.string.n_minutes, min)
            )
            return str.toString()
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\SelectableMediaAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist

import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.core.view.isVisible
import androidx.recyclerview.widget.DiffUtil
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.databinding.ItemMediaSelectableBinding
import dev.brahmkshatriya.echo.databinding.ItemSelectableHeaderBinding
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.ui.feed.viewholders.shelf.ShelfViewHolder.Companion.bind
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimListAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimRecyclerAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class SelectableMediaAdapter(
    val listener: Listener
) : ScrollAnimListAdapter<Pair<EchoMediaItem, Boolean>, SelectableMediaAdapter.ViewHolder>(
    object : DiffUtil.ItemCallback<Pair<EchoMediaItem, Boolean>>() {
        override fun areItemsTheSame(
            oldItem: Pair<EchoMediaItem, Boolean>, newItem: Pair<EchoMediaItem, Boolean>
        ) = oldItem.first.id == newItem.first.id

        override fun areContentsTheSame(
            oldItem: Pair<EchoMediaItem, Boolean>, newItem: Pair<EchoMediaItem, Boolean>
        ) = oldItem == newItem
    }
), GridAdapter {

    fun interface Listener {
        fun onItemSelected(selected: Boolean, item: EchoMediaItem)
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) = ViewHolder(parent, listener)
    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        super.onBindViewHolder(holder, position)
        holder.bind(getItem(position))
    }

    class ViewHolder(
        parent: ViewGroup,
        val listener: Listener,
        val binding: ItemMediaSelectableBinding = ItemMediaSelectableBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        )
    ) : ScrollAnimViewHolder(binding.root) {

        private var item: EchoMediaItem? = null

        init {
            binding.media.root.setOnClickListener {
                val item = item ?: return@setOnClickListener
                listener.onItemSelected(!binding.selected.isVisible, item)
            }
            binding.media.coverContainer.cover.clipToOutline = true
            binding.media.coverContainer.isPlaying.isVisible = false
        }

        fun bind(item: Pair<EchoMediaItem, Boolean>) {
            val mediaItem = item.first
            this.item = mediaItem
            binding.media.bind(mediaItem)
            binding.selected.isVisible = item.second
        }
    }

    private var header: Header? = null
    fun withHeader(selectAll: (Boolean) -> Unit): GridAdapter.Concat {
        val header = Header(selectAll)
        this.header = header
        return GridAdapter.Concat(header, this)
    }

    override fun onCurrentListChanged(
        previousList: MutableList<Pair<EchoMediaItem, Boolean>>,
        currentList: MutableList<Pair<EchoMediaItem, Boolean>>
    ) {
        header?.submitList(
            currentList.count { it.second },
            currentList.all { it.second }
        )
    }

    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) = 1

    class Header(
        private val onSelectAll: (Boolean) -> Unit
    ) : ScrollAnimRecyclerAdapter<Header.ViewHolder>(), GridAdapter {
        class ViewHolder(val binding: ItemSelectableHeaderBinding) :
            ScrollAnimViewHolder(binding.root)

        override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
            val inflater = LayoutInflater.from(parent.context)
            val binding = ItemSelectableHeaderBinding.inflate(inflater, parent, false)
            binding.root.setOnClickListener {
                onSelectAll(!binding.selectAll.isChecked)
            }
            return ViewHolder(binding)
        }

        override fun getItemCount() = 1
        private var count = 0
        private var selected = false

        fun submitList(count: Int, selected: Boolean) {
            this.count = count
            this.selected = selected
            notifyItemChanged(0)
        }

        override fun onBindViewHolder(holder: ViewHolder, position: Int) {
            super.onBindViewHolder(holder, position)
            holder.binding.selected.run {
                text = context.getString(R.string.selected_n, count)
            }
            holder.binding.selectAll.isChecked = selected
        }

        override val adapter = this
        override fun getSpanSize(position: Int, width: Int, count: Int) = count
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\create\CreatePlaylistBottomSheet.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.create

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.view.isVisible
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.databinding.DialogPlaylistCreateBinding
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.Serializer.putSerialized
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import org.koin.androidx.viewmodel.ext.android.viewModel

class CreatePlaylistBottomSheet : BottomSheetDialogFragment() {

    var binding by autoCleared<DialogPlaylistCreateBinding>()
    val viewModel by viewModel<CreatePlaylistViewModel>()

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
    ): View {
        binding = DialogPlaylistCreateBinding.inflate(inflater, container, false)
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        binding.playlistName.setOnEditorActionListener { _, _, _ ->
            binding.playlistDesc.requestFocus()
            true
        }

        binding.playlistDesc.setOnEditorActionListener { _, _, _ ->
            createPlaylist()
            true
        }

        binding.playlistCreateButton.setOnClickListener { createPlaylist() }
        binding.topAppBar.setNavigationOnClickListener { dismiss() }

        observe(viewModel.createPlaylistStateFlow) {
            when (it) {
                CreateState.CreatePlaylist -> {
                    binding.nestedScrollView.isVisible = true
                    binding.saving.root.isVisible = false
                }

                CreateState.Creating -> {
                    binding.nestedScrollView.isVisible = false
                    binding.saving.root.isVisible = true
                    binding.saving.textView.text =
                        getString(R.string.creating_x, binding.playlistName.text)
                }

                is CreateState.PlaylistCreated -> {
                    if (it.playlist != null) parentFragmentManager.setFragmentResult(
                        "createPlaylist",
                        Bundle().apply {
                            putString("extensionId", it.extensionId)
                            putSerialized("playlist", it.playlist)
                        }
                    )
                    viewModel.createPlaylistStateFlow.value = CreateState.CreatePlaylist
                    dismiss()
                }
            }
        }
    }

    private fun createPlaylist() {
        val title = binding.playlistName.text.toString()
        if (title.isEmpty()) {
            binding.playlistName.error = getString(R.string.playlist_name_empty)
            binding.playlistName.requestFocus()
            return
        }
        val desc = binding.playlistDesc.text.toString().takeIf { it.isNotBlank() }
        viewModel.createPlaylist(title, desc)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\create\CreatePlaylistViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.create

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import dev.brahmkshatriya.echo.common.clients.PlaylistEditClient
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getIf
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.launch

class CreatePlaylistViewModel(
    val app: App,
    val extensionLoader: ExtensionLoader,
) : ViewModel() {
    val createPlaylistStateFlow =
        MutableStateFlow<CreateState>(CreateState.CreatePlaylist)
    fun createPlaylist(title: String, desc: String?) {
        val extension = extensionLoader.current.value ?: return
        createPlaylistStateFlow.value = CreateState.Creating
        viewModelScope.launch(Dispatchers.IO) {
            val playlist = extension.getIf<PlaylistEditClient, Playlist>(app.throwFlow) {
                createPlaylist(title, desc)
            }
            createPlaylistStateFlow.value = CreateState.PlaylistCreated(extension.id, playlist)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\create\CreateState.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.create

import dev.brahmkshatriya.echo.common.models.Playlist

sealed class CreateState {
    data object CreatePlaylist : CreateState()
    data object Creating : CreateState()
    data class PlaylistCreated(val extensionId: String, val playlist: Playlist?) : CreateState()
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\delete\DeletePlaylistBottomSheet.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.delete

import android.os.Bundle
import android.view.View
import androidx.appcompat.app.AlertDialog
import androidx.core.os.bundleOf
import androidx.fragment.app.FragmentActivity
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import com.google.android.material.dialog.MaterialAlertDialogBuilder
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.databinding.ItemLoadingBinding
import dev.brahmkshatriya.echo.ui.common.SnackBarHandler.Companion.createSnack
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.Serializer.getSerialized
import dev.brahmkshatriya.echo.utils.Serializer.putSerialized
import org.koin.androidx.viewmodel.ext.android.viewModel
import org.koin.core.parameter.parametersOf


class DeletePlaylistBottomSheet : BottomSheetDialogFragment(R.layout.item_loading) {

    companion object {
        fun show(
            activity: FragmentActivity, extensionId: String, item: Playlist, loaded: Boolean = false
        ): AlertDialog = with(activity) {
            MaterialAlertDialogBuilder(this)
                .setTitle(getString(R.string.confirmation))
                .setMessage(getString(R.string.delete_playlist_confirmation, item.title))
                .setPositiveButton(getString(R.string.confirm)) { _, _ ->
                    newInstance(extensionId, item, loaded).show(supportFragmentManager, null)
                }
                .setNegativeButton(getString(R.string.cancel)) { dialog, _ ->
                    dialog.dismiss()
                }.show()
        }

        private fun newInstance(
            extensionId: String, item: Playlist, loaded: Boolean
        ): DeletePlaylistBottomSheet {
            return DeletePlaylistBottomSheet().apply {
                arguments = Bundle().apply {
                    putString("extensionId", extensionId)
                    putSerialized("item", item)
                    putBoolean("loaded", loaded)
                }
            }
        }
    }

    val args by lazy { requireArguments() }
    val extensionId by lazy { args.getString("extensionId")!! }
    val item by lazy { args.getSerialized<Playlist>("item")!!.getOrThrow() }
    val loaded by lazy { args.getBoolean("loaded", false) }

    val vm by viewModel<DeletePlaylistViewModel> {
        parametersOf(extensionId, item, loaded)
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        val binding = ItemLoadingBinding.bind(view)
        observe(vm.deleteStateFlow) { state ->
            val result = vm.playlistFlow.value
            val playlist = result?.getOrNull()
            val string = when (state) {
                is DeleteState.Deleted -> {
                    if (state.result.isSuccess) {
                        createSnack(getString(R.string.deleted_x, playlist?.title))
                        parentFragmentManager.setFragmentResult(
                            "deleted", bundleOf("id" to playlist?.id)
                        )
                        parentFragmentManager.setFragmentResult("reloadLibrary", Bundle.EMPTY)
                    }
                    dismiss()
                    return@observe
                }

                DeleteState.Deleting ->
                    getString(R.string.deleting_x, playlist?.title)

                DeleteState.Initial ->
                    getString(R.string.loading_x, playlist?.title)
            }
            binding.textView.text = string
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\delete\DeletePlaylistViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.delete

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import dev.brahmkshatriya.echo.common.clients.PlaylistEditClient
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getAs
import kotlinx.coroutines.ExperimentalCoroutinesApi
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.SharingStarted.Companion.Eagerly
import kotlinx.coroutines.flow.first
import kotlinx.coroutines.flow.map
import kotlinx.coroutines.flow.stateIn
import kotlinx.coroutines.flow.transformLatest
import kotlinx.coroutines.launch

@OptIn(ExperimentalCoroutinesApi::class)
class DeletePlaylistViewModel(
    extensionLoader: ExtensionLoader,
    private val app: App,
    private val extensionId: String,
    private val item: Playlist,
    private val loaded: Boolean,
) : ViewModel() {

    val extensionFlow = extensionLoader.music.map { list ->
        list.find { it.id == extensionId }
    }.stateIn(viewModelScope, Eagerly, null)

    val playlistFlow = extensionFlow.transformLatest {
        emit(null)
        if (it == null) return@transformLatest
        if (loaded) emit(Result.success(item))
        else emit(it.getAs<PlaylistEditClient, Playlist> { loadPlaylist(item) })
    }.stateIn(viewModelScope, Eagerly, null)

    private val deleteFlow = MutableSharedFlow<Unit>()
    fun delete() = viewModelScope.launch { deleteFlow.emit(Unit) }

    val deleteStateFlow = deleteFlow.transformLatest {
        emit(DeleteState.Deleting)
        val result = runCatching {
            val extension = extensionFlow.value!!
            val playlist = playlistFlow.value!!.getOrThrow()
            extension.getAs<PlaylistEditClient, Unit> { deletePlaylist(playlist) }.getOrThrow()
        }
        result.getOrElse { app.throwFlow.emit(it) }
        emit(DeleteState.Deleted(result))
    }.stateIn(viewModelScope, Eagerly, DeleteState.Initial)

    init {
        viewModelScope.launch {
            playlistFlow.first { it != null }
            delete()
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\delete\DeleteState.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.delete

sealed class DeleteState {
    data object Initial : DeleteState()
    data object Deleting : DeleteState()
    data class Deleted(val result: Result<Unit>) : DeleteState()
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\edit\EditPlaylistBottomSheet.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.edit

import android.content.Context
import android.os.Bundle
import android.view.View
import androidx.core.os.bundleOf
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.databinding.ItemLoadingBinding
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.Serializer.getSerialized
import dev.brahmkshatriya.echo.utils.Serializer.putSerialized
import org.koin.androidx.viewmodel.ext.android.viewModel
import org.koin.core.parameter.parametersOf

class EditPlaylistBottomSheet : BottomSheetDialogFragment(R.layout.item_loading) {
    companion object {
        fun newInstance(
            extensionId: String, playlist: Playlist, tabId: String?, index: Int
        ) = EditPlaylistBottomSheet().apply {
            arguments = Bundle().apply {
                putString("extensionId", extensionId)
                putSerialized("playlist", playlist)
                putString("tabId", tabId)
                putInt("removeIndex", index)
            }
        }

        fun EditPlaylistViewModel.SaveState.toText(
            playlist: Playlist, context: Context
        ) = when (this) {
            is EditPlaylistViewModel.SaveState.Performing -> when (action) {
                is EditPlaylistViewModel.Action.Add ->
                    context.getString(R.string.adding_x, tracks.joinToString(", ") { it.title })

                is EditPlaylistViewModel.Action.Move ->
                    context.getString(R.string.moving_x, tracks.first().title)

                is EditPlaylistViewModel.Action.Remove ->
                    context.getString(R.string.removing_x, tracks.joinToString(", ") { it.title })
            }

            EditPlaylistViewModel.SaveState.Saving ->
                context.getString(R.string.saving_x, playlist.title)

            EditPlaylistViewModel.SaveState.Initial -> context.getString(R.string.loading)
            is EditPlaylistViewModel.SaveState.Saved -> context.getString(R.string.loading)
        }
    }

    val args by lazy { requireArguments() }
    val extensionId by lazy { args.getString("extensionId")!! }
    val playlist by lazy { args.getSerialized<Playlist>("playlist")!!.getOrThrow() }
    val tabId by lazy { args.getString("tabId") }
    val removeIndex by lazy { args.getInt("removeIndex", -1).takeIf { it != -1 }!! }

    val vm by viewModel<EditPlaylistViewModel> {
        parametersOf(extensionId, playlist, true, tabId, removeIndex)
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        val binding = ItemLoadingBinding.bind(view)
        observe(vm.saveState) { save ->
            binding.textView.text = save.toText(playlist, requireContext())
            val save = save as? EditPlaylistViewModel.SaveState.Saved ?: return@observe
            if (save.result.isSuccess) parentFragmentManager.setFragmentResult(
                "reload", bundleOf("id" to playlist.id)
            )
            dismiss()
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\edit\EditPlaylistFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.edit

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.os.bundleOf
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.recyclerview.widget.ConcatAdapter
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Tab
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.databinding.FragmentPlaylistEditBinding
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyBackPressCallback
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsetsWithChild
import dev.brahmkshatriya.echo.ui.feed.TabsAdapter
import dev.brahmkshatriya.echo.ui.playlist.edit.EditPlaylistBottomSheet.Companion.toText
import dev.brahmkshatriya.echo.ui.playlist.edit.search.EditPlaylistSearchFragment
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.Serializer.getSerialized
import dev.brahmkshatriya.echo.utils.Serializer.putSerialized
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.setupTransition
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import dev.brahmkshatriya.echo.utils.ui.FastScrollerHelper
import dev.brahmkshatriya.echo.utils.ui.UiUtils.configureAppBar
import kotlinx.coroutines.flow.combine
import org.koin.androidx.viewmodel.ext.android.viewModel
import org.koin.core.parameter.parametersOf

class EditPlaylistFragment : Fragment() {

    companion object {
        fun getBundle(extension: String, playlist: Playlist, loaded: Boolean) = Bundle().apply {
            putString("extensionId", extension)
            putSerialized("playlist", playlist)
            putBoolean("loaded", loaded)
        }
    }

    private val args by lazy { requireArguments() }
    private val extensionId by lazy { args.getString("extensionId")!! }
    private val playlist by lazy { args.getSerialized<Playlist>("playlist")!!.getOrThrow() }
    private val loaded by lazy { args.getBoolean("loaded", false) }
    private val selectedTab by lazy { args.getString("selectedTabId").orEmpty() }

    private var binding: FragmentPlaylistEditBinding by autoCleared()
    private val vm by viewModel<EditPlaylistViewModel> {
        parametersOf(extensionId, playlist, loaded, selectedTab, -1)
    }

    private val adapter by lazy {
        val (listener, itemCallback) = PlaylistTrackAdapter.getTouchHelperAndListener(vm)
        itemCallback.attachToRecyclerView(binding.recyclerView)
        PlaylistTrackAdapter(listener)
    }

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View {
        binding = FragmentPlaylistEditBinding.inflate(inflater, container, false)
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        setupTransition(view)
        applyInsetsWithChild(binding.appBarLayout, binding.recyclerView, 96) {
            binding.fabContainer.applyInsets(it)
        }

        applyBackPressCallback()
        binding.appBarLayout.configureAppBar { offset ->
            binding.toolbarOutline.alpha = offset
            binding.toolbarIconContainer.alpha = 1 - offset
        }

        binding.toolbar.setNavigationOnClickListener {
            parentFragmentManager.popBackStack()
        }

        binding.toolbar.setOnMenuItemClickListener {
            parentFragmentManager.setFragmentResult("delete", Bundle().apply {
                putSerialized("playlist", playlist)
            })
            parentFragmentManager.popBackStack()
            true
        }

        binding.save.setOnClickListener {
            vm.save()
        }
        observe(vm.isSaveable) {
            binding.save.isEnabled = it
        }

        binding.add.setOnClickListener {
            openFragment<EditPlaylistSearchFragment>(
                it, EditPlaylistSearchFragment.getBundle(extensionId)
            )
        }
        parentFragmentManager.setFragmentResultListener("searchedTracks", this) { _, bundle ->
            val tracks = bundle.getSerialized<List<Track>>("tracks")!!.getOrNull().orEmpty().toMutableList()
            vm.edit(
                EditPlaylistViewModel.Action.Add(
                    vm.currentTracks.value?.size ?: 0, tracks
                )
            )
        }

        FastScrollerHelper.applyTo(binding.recyclerView)

        val headerAdapter = EditPlaylistHeaderAdapter(this, vm)
        val tabAdapter = TabsAdapter<Tab>({ title }) { v, index, tab ->
            vm.selectedTabFlow.value = tab
        }

        binding.recyclerView.adapter = ConcatAdapter(headerAdapter, tabAdapter, adapter)
        observe(vm.dataFlow) { headerAdapter.data = it }
        observe(vm.tabsFlow) { tabAdapter.data = it }
        observe(vm.selectedTabFlow) { tabAdapter.selected = vm.tabsFlow.value.indexOf(it) }
        observe(vm.currentTracks) { adapter.submitList(it) }

        val combined = vm.originalList.combine(vm.saveState) { a, b -> a to b }
        observe(combined) { (tracks, save) ->
            val trackLoading = tracks == null
            val saving = save != EditPlaylistViewModel.SaveState.Initial
            val loading = trackLoading || saving
            binding.recyclerView.isVisible = !loading
            binding.fabContainer.isVisible = !loading
            binding.loading.root.isVisible = loading
            binding.loading.textView.text = save.toText(playlist, requireContext())

            val save = save as? EditPlaylistViewModel.SaveState.Saved ?: return@observe
            if (save.result.isSuccess) parentFragmentManager.setFragmentResult(
                "reload", bundleOf("id" to playlist.id)
            )
            parentFragmentManager.popBackStack()
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\edit\EditPlaylistHeaderAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.edit

import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.core.view.isVisible
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.databinding.ItemEditPlaylistHeaderBinding
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadInto
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimRecyclerAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class EditPlaylistHeaderAdapter(
    private val fragment: EditPlaylistFragment,
    private val viewModel: EditPlaylistViewModel,
) : ScrollAnimRecyclerAdapter<EditPlaylistHeaderAdapter.ViewHolder>() {
    class ViewHolder(val binding: ItemEditPlaylistHeaderBinding) :
        ScrollAnimViewHolder(binding.root)

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val inflater = LayoutInflater.from(parent.context)
        val binding = ItemEditPlaylistHeaderBinding.inflate(inflater, parent, false)
        binding.playlistName.setOnEditorActionListener { v, actionId, event ->
            viewModel.nameFlow.value = v.text.toString()
            binding.playlistDescription.requestFocus()
            true
        }
        binding.playlistDescription.setOnEditorActionListener { v, actionId, event ->
            viewModel.descriptionFlow.value = v.text.toString()
            v.clearFocus()
            true
        }
        binding.coverContainer.setOnClickListener {
            viewModel.changeCover(fragment.requireActivity())
        }
        binding.removeCover.setOnClickListener {
            viewModel.coverFlow.value = EditPlaylistViewModel.CoverState.Removed
        }
        return ViewHolder(binding)
    }

    override fun getItemCount() = 1

    var data: EditPlaylistViewModel.Data? = null
        set(value) {
            field = value
            notifyItemChanged(0)
        }

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        super.onBindViewHolder(holder, position)
        val binding = holder.binding
        val (title, desc, coverEditable, cover) = data ?: return
        binding.playlistName.setText(title)
        binding.playlistDescription.setText(desc)
        binding.coverContainer.isVisible = coverEditable
        binding.removeCover.isVisible = cover != null
        cover.loadInto(binding.cover, R.drawable.art_add_photo)
    }

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\edit\EditPlaylistViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.edit

import androidx.core.net.toUri
import androidx.fragment.app.FragmentActivity
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.clients.PlaylistClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditCoverClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditorListenerClient
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.ImageHolder
import dev.brahmkshatriya.echo.common.models.ImageHolder.Companion.toResourceUriImageHolder
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Tab
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getAs
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getIf
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getOrThrow
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.isClient
import dev.brahmkshatriya.echo.extensions.InstallationUtils.openFileSelector
import dev.brahmkshatriya.echo.utils.CoroutineUtils.combineTransformLatest
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.ExperimentalCoroutinesApi
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.SharingStarted.Companion.Eagerly
import kotlinx.coroutines.flow.collectLatest
import kotlinx.coroutines.flow.combine
import kotlinx.coroutines.flow.first
import kotlinx.coroutines.flow.flowOn
import kotlinx.coroutines.flow.map
import kotlinx.coroutines.flow.stateIn
import kotlinx.coroutines.flow.transformLatest
import kotlinx.coroutines.launch
import java.io.File

@OptIn(ExperimentalCoroutinesApi::class)
class EditPlaylistViewModel(
    extensionLoader: ExtensionLoader,
    private val app: App,
    private val extensionId: String,
    private val initial: Playlist,
    private val loaded: Boolean,
    private val selectedTab: String?,
    private val removeIndex: Int,
) : ViewModel() {
    val extensionFlow = extensionLoader.music.map { list -> list.find { it.id == extensionId } }
        .stateIn(viewModelScope, Eagerly, null)

    val playlistFlow = extensionFlow.transformLatest { extension ->
        emit(null)
        if (extension == null) return@transformLatest
        emit(extension.getAs<PlaylistClient, Playlist> {
            if (!loaded) loadPlaylist(initial) else initial
        })
    }.stateIn(viewModelScope, Eagerly, null)

    private val feedFlow = playlistFlow.transformLatest { playlist ->
        emit(null)
        val extension = extensionFlow.value ?: return@transformLatest
        if (playlist == null) return@transformLatest
        emit(extension.getAs<PlaylistClient, Feed<Track>> {
            loadTracks(playlist.getOrThrow())
        })
    }

    val selectedTabFlow = MutableStateFlow<Tab?>(null)
    val tabsFlow = feedFlow.map { result ->
        val tabs = result?.getOrNull()?.tabs ?: emptyList()
        selectedTabFlow.value = tabs.find { it.id == selectedTab } ?: tabs.firstOrNull()
        tabs
    }.stateIn(viewModelScope, Eagerly, emptyList())

    val originalList = feedFlow.combineTransformLatest(selectedTabFlow) { result, tab ->
        emit(null)
        if (result == null) return@combineTransformLatest
        val extension = extensionFlow.value ?: return@combineTransformLatest
        val tracks = extension.getAs<PlaylistClient, List<Track>> {
            result.getOrThrow().getPagedData(tab).pagedData.loadAll()
        }
        emit(tracks)
    }.stateIn(viewModelScope, Eagerly, null)

    val currentTracks = MutableStateFlow<List<Track>?>(null)
    fun edit(action: Action<Track>) {
        currentTracks.value = currentTracks.value?.toMutableList()?.apply {
            runCatching {
                when (action) {
                    is Action.Add -> addAll(action.index, action.items)
                    is Action.Move -> add(action.to, removeAt(action.from))
                    is Action.Remove -> action.indexes.forEach { removeAt(it) }
                }
            }.getOrElse {
                viewModelScope.launch { app.throwFlow.emit(it) }
            }
        }
    }

    @OptIn(ExperimentalCoroutinesApi::class)
    val newActions = currentTracks.transformLatest { current ->
        emit(null)
        val list = originalList.value?.getOrNull()
        if (list == null || current == null) return@transformLatest
        emit(computeActions(list, current))
    }.flowOn(Dispatchers.IO).stateIn(viewModelScope, Eagerly, null)

    data class Data(
        val title: String,
        val desc: String?,
        val coverEditable: Boolean,
        val cover: ImageHolder?,
    )

    val nameFlow = MutableStateFlow(initial.title)
    val descriptionFlow = MutableStateFlow(initial.description)

    sealed interface CoverState {
        data object Initial : CoverState
        data object Removed : CoverState
        data class Changed(val file: File) : CoverState
    }

    val coverFlow = MutableStateFlow<CoverState>(CoverState.Initial)
    val dataFlow = combineTransformLatest(nameFlow, descriptionFlow, coverFlow, extensionFlow) {
        val title = it[0] as String
        val desc = it[1] as String?
        val cover = it[2] as CoverState
        val extension = it[3] as Extension<*>?
        emit(Data(title, desc, false, null))
        val isEditable = extension?.isClient<PlaylistEditCoverClient>() == true
        val image = when (cover) {
            is CoverState.Changed -> cover.file.toUri().toString().toResourceUriImageHolder()
            CoverState.Initial -> initial.cover
            CoverState.Removed -> null
        }
        emit(Data(title, desc, isEditable, image))
    }

    sealed interface SaveState {
        data object Initial : SaveState
        data class Performing(val action: Action<Track>, val tracks: List<Track>) : SaveState
        data object Saving : SaveState
        data class Saved(val result: Result<Unit>) : SaveState
    }

    private val saveFlow = MutableSharedFlow<Unit>()
    val isSaveable = newActions.combine(dataFlow) { actions, pair ->
        val playlist = playlistFlow.value?.getOrNull() ?: return@combine false
        if (playlist.title != pair.title) return@combine true
        if (playlist.description != pair.desc) return@combine true
        if (coverFlow.value != CoverState.Initial) return@combine true
        !actions.isNullOrEmpty()
    }

    val saveState = saveFlow.transformLatest {
        emit(SaveState.Saving)
        val saved = SaveState.Saved(runCatching {
            val playlist = playlistFlow.value!!.getOrThrow()
            val extension = extensionFlow.value!!
            if (playlist.title != nameFlow.value || playlist.description != descriptionFlow.value) {
                extension.getAs<PlaylistEditClient, Unit> {
                    editPlaylistMetadata(playlist, nameFlow.value, descriptionFlow.value)
                }.getOrThrow()
            }
            val cover = coverFlow.value
            when (cover) {
                CoverState.Initial -> {}
                CoverState.Removed -> extension.getAs<PlaylistEditCoverClient, Unit> {
                    editPlaylistCover(playlist, null)
                }

                is CoverState.Changed -> extension.getAs<PlaylistEditCoverClient, Unit> {
                    editPlaylistCover(playlist, cover.file)
                }
            }

            val newActions = newActions.value!!
            if (newActions.isEmpty()) return@runCatching

            var tracks = originalList.value!!.getOrThrow()
            val selectedTab = selectedTabFlow.value
            extension.getIf<PlaylistEditorListenerClient, Unit> {
                onEnterPlaylistEditor(playlist, tracks)
            }.getOrThrow()

            extension.getAs<PlaylistEditClient, Unit> {
                newActions.forEach { action ->
                    when (action) {
                        is Action.Add -> {
                            addTracksToPlaylist(playlist, tracks, action.index, action.items)
                            tracks =
                                loadTracks(playlist).run { getPagedData(selectedTab).pagedData }
                                    .loadAll()
                        }

                        is Action.Move -> {
                            moveTrackInPlaylist(playlist, tracks, action.from, action.to)
                            tracks = tracks.toMutableList().apply {
                                add(action.to, removeAt(action.from))
                            }
                        }

                        is Action.Remove -> {
                            removeTracksFromPlaylist(playlist, tracks, action.indexes)
                            tracks =
                                loadTracks(playlist).run { getPagedData(selectedTab).pagedData }
                                    .loadAll()
                        }
                    }
                }
            }.getOrThrow()
            extension.getIf<PlaylistEditorListenerClient, Unit> {
                onExitPlaylistEditor(playlist, tracks)
            }.getOrThrow()
        })
        saved.result.getOrThrow(app.throwFlow)
        emit(saved)
    }.stateIn(viewModelScope, Eagerly, SaveState.Initial)

    fun save() = viewModelScope.launch { saveFlow.emit(Unit) }
    fun changeCover(activity: FragmentActivity) = viewModelScope.launch {
        runCatching {
            coverFlow.value = CoverState.Changed(activity.openFileSelector(fileType = "image/*"))
        }.getOrThrow(app.throwFlow)
    }

    init {
        viewModelScope.launch {
            originalList.collectLatest {
                currentTracks.value = it?.getOrNull()
            }
        }
        viewModelScope.launch {
            if (removeIndex == -1) return@launch
            currentTracks.first { it != null }
            edit(Action.Remove(listOf(removeIndex)))
            newActions.first { it != null }
            saveFlow.emit(Unit)
        }
    }

    sealed interface Action<T> {
        data class Add<T>(val index: Int, val items: MutableList<T>) : Action<T>
        data class Remove<T>(val indexes: List<Int>) : Action<T>
        data class Move<T>(val from: Int, val to: Int) : Action<T>
    }

    companion object {
        // I am KR bbg.
        // Don't forget to subscribe to my OnlyFans at https://github.com/justfoolingaround
        fun <T> computeActions(
            old: List<T>, new: List<T>,
        ): MutableList<Action<T>> {
            val out = mutableListOf<Action<T>>()
            val before = old.toMutableList()

            val afterIds = new.map { it }.toSet()
            val removeIndexes = before.mapIndexedNotNull { index, item ->
                if (item !in afterIds) index else null
            }

            if (removeIndexes.isNotEmpty()) {
                removeIndexes.sortedDescending().forEach { before.removeAt(it) }
                out.add(Action.Remove(indexes = removeIndexes))
            }

            val additions = mutableListOf<T>()
            var addIndex = -1
            new.forEachIndexed { targetIndex, targetItem ->
                if (before.none { it == targetItem }) {
                    if (addIndex == -1) addIndex = targetIndex
                    additions.add(targetItem)
                    before.add(targetIndex, targetItem)
                } else if (additions.isNotEmpty()) {
                    out.add(Action.Add(index = addIndex, items = additions.toMutableList()))
                    additions.clear()
                    addIndex = -1
                }
            }
            if (additions.isNotEmpty()) {
                out.add(Action.Add(index = addIndex, items = additions))
            }

            val moveActions = mutableListOf<Action.Move<T>>()
            new.forEachIndexed { targetIndex, targetItem ->
                val currentIndex = before.indexOfFirst { it == targetItem }
                if (currentIndex != -1 && currentIndex != targetIndex) {
                    moveActions.add(Action.Move(from = currentIndex, to = targetIndex))
                    val item = before.removeAt(currentIndex)
                    before.add(targetIndex, item)
                }
            }

            var ind = -1
            var last: Action.Move<T>? = null
            moveActions.forEach {
                val l = last
                if (l != null) {
                    if (l.from == it.to) {
                        if (ind == -1) ind = l.from - 1
                    } else {
                        if (ind == -1) out.add(l)
                        else {
                            out.add(Action.Move(from = ind, to = l.from))
                            ind = -1
                        }
                    }
                }
                last = it
            }
            val l = last
            if (l != null) {
                if (ind != -1) out.add(Action.Move(from = ind, to = l.from))
                else out.add(l)
            }

            return out
        }
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\edit\PlaylistTrackAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.edit

import android.content.res.ColorStateList
import android.view.LayoutInflater
import android.view.MotionEvent
import android.view.ViewGroup
import androidx.core.view.isVisible
import androidx.core.view.updatePaddingRelative
import androidx.recyclerview.widget.DiffUtil
import androidx.recyclerview.widget.ItemTouchHelper
import androidx.recyclerview.widget.RecyclerView
import com.google.android.material.color.MaterialColors
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.databinding.ItemPlaylistTrackBinding
import dev.brahmkshatriya.echo.ui.player.more.upnext.QueueAdapter.Companion.bind
import dev.brahmkshatriya.echo.utils.ui.UiUtils.dpToPx
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimListAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class PlaylistTrackAdapter(
    private val listener: Listener,
) : ScrollAnimListAdapter<Track, PlaylistTrackAdapter.ViewHolder>(DiffCallback) {
    object DiffCallback : DiffUtil.ItemCallback<Track>() {
        override fun areItemsTheSame(oldItem: Track, newItem: Track) = oldItem.id == newItem.id
        override fun areContentsTheSame(oldItem: Track, newItem: Track) = oldItem == newItem
    }

    interface Listener {
        fun onTrackClicked(viewHolder: ViewHolder)
        fun onTrackClosedClicked(viewHolder: ViewHolder)
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) = ViewHolder(parent, listener)
    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        super.onBindViewHolder(holder, position)
        val track = getItem(position)
        holder.bind(track)
    }

    class ViewHolder(
        parent: ViewGroup,
        listener: Listener,
        val binding: ItemPlaylistTrackBinding = ItemPlaylistTrackBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        )
    ) : ScrollAnimViewHolder(binding.root) {
        var track: Track? = null

        init {
            binding.playlistItemClose.setOnClickListener {
                listener.onTrackClosedClicked(this)
            }
            binding.playlistItemDrag.setOnTouchListener { v, event ->
                if (event.actionMasked == MotionEvent.ACTION_DOWN) {
                    v.performClick()
                    listener.onTrackClicked(this)
                }
                true
            }
            val color = MaterialColors.getColor(binding.root, R.attr.echoBackground)
            binding.root.backgroundTintList = ColorStateList.valueOf(color)
            binding.playlistItemNowPlaying.isVisible = false
            binding.playlistItem.updatePaddingRelative(start = 24.dpToPx(binding.root.context))
        }

        fun bind(track: Track) {
            this.track = track
            binding.bind(track)
        }
    }

    companion object {
        fun getTouchHelperAndListener(
            viewModel: EditPlaylistViewModel
        ): Pair<Listener, ItemTouchHelper> {
            val callback = object : ItemTouchHelper.SimpleCallback(
                ItemTouchHelper.UP or ItemTouchHelper.DOWN, ItemTouchHelper.START
            ) {
                override fun getMovementFlags(
                    recyclerView: RecyclerView, viewHolder: RecyclerView.ViewHolder
                ): Int {
                    if (viewHolder !is ViewHolder) return 0
                    return makeMovementFlags(ItemTouchHelper.UP or ItemTouchHelper.DOWN, ItemTouchHelper.START)
                }
                override fun onMove(
                    recyclerView: RecyclerView,
                    viewHolder: RecyclerView.ViewHolder,
                    target: RecyclerView.ViewHolder
                ): Boolean {
                    if (viewHolder !is ViewHolder) return false
                    if (target !is ViewHolder) return false

                    val fromPos = viewHolder.bindingAdapterPosition
                    val toPos = target.bindingAdapterPosition
                    viewModel.edit(EditPlaylistViewModel.Action.Move(fromPos, toPos))
                    return true
                }

                override fun onSwiped(viewHolder: RecyclerView.ViewHolder, direction: Int) {
                    val pos = viewHolder.bindingAdapterPosition
                    viewModel.edit(EditPlaylistViewModel.Action.Remove(listOf(pos)))
                }
            }
            val itemTouchHelper = ItemTouchHelper(callback)
            val listener = object : Listener {
                override fun onTrackClicked(viewHolder: ViewHolder) {
                    itemTouchHelper.startDrag(viewHolder)
                }

                override fun onTrackClosedClicked(viewHolder: ViewHolder) {
                    viewModel.edit(EditPlaylistViewModel.Action.Remove(listOf(viewHolder.bindingAdapterPosition)))
                }
            }
            return listener to itemTouchHelper
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\edit\search\EditPlaylistSearchClickListener.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.edit.search

import android.view.View
import androidx.fragment.app.Fragment
import androidx.fragment.app.viewModels
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.ui.feed.FeedClickListener

class EditPlaylistSearchClickListener(fragment: Fragment) : FeedClickListener(
    fragment, fragment.parentFragmentManager, R.id.playlistSearchContainer
) {

    private val parentFragment: Fragment
        get() = fragmentManager.fragments.first().requireParentFragment()

    private val viewModel by lazy {
        parentFragment.viewModels<EditPlaylistSearchViewModel>().value
    }

    override fun onTracksClicked(
        view: View?, extensionId: String?, context: EchoMediaItem?, tracks: List<Track>?, pos: Int
    ): Boolean {
        val track = tracks?.getOrNull(pos) ?: return notFoundSnack(R.string.track)
        viewModel.addTrack(track)
        return true
    }

    override fun onMediaClicked(
        view: View?, extensionId: String?, item: EchoMediaItem?, context: EchoMediaItem?
    ) = when (item) {
        is Track -> {
            viewModel.addTrack(item)
            true
        }

        else -> super.onMediaClicked(view, extensionId, item, context)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\edit\search\EditPlaylistSearchFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.edit.search

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.activity.BackEventCompat
import androidx.activity.OnBackPressedCallback
import androidx.core.view.updatePadding
import androidx.fragment.app.Fragment
import androidx.fragment.app.viewModels
import com.google.android.material.bottomsheet.BottomSheetBehavior
import com.google.android.material.bottomsheet.BottomSheetBehavior.STATE_EXPANDED
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.databinding.FragmentPlaylistSearchBinding
import dev.brahmkshatriya.echo.ui.common.GridAdapter.Companion.configureGridLayout
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsets
import dev.brahmkshatriya.echo.ui.main.search.SearchFragment
import dev.brahmkshatriya.echo.ui.playlist.SelectableMediaAdapter
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.Serializer.putSerialized
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.setupTransition
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import dev.brahmkshatriya.echo.utils.ui.UiUtils.dpToPx

class EditPlaylistSearchFragment : Fragment() {
    companion object {
        fun getBundle(extensionId: String) = Bundle().apply {
            putString("extensionId", extensionId)
        }
    }

    private var binding by autoCleared<FragmentPlaylistSearchBinding>()
    private val viewModel by viewModels<EditPlaylistSearchViewModel>()

    private val args by lazy { requireArguments() }
    private val extensionId by lazy { args.getString("extensionId")!! }

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
    ): View {
        binding = FragmentPlaylistSearchBinding.inflate(inflater, container, false)
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        setupTransition(view)
        val behavior = BottomSheetBehavior.from(binding.bottomSheet)
        binding.bottomSheetDragHandle.setOnClickListener { behavior.state = STATE_EXPANDED }
        var topInset = 0
        applyInsets {
            topInset = it.top
            behavior.peekHeight = 72.dpToPx(requireContext()) + it.bottom
            binding.playlistSearchContainer.updatePadding(bottom = it.bottom)
            binding.recyclerView.updatePadding(top = it.top)
        }

        val backCallback = object : OnBackPressedCallback(false) {
            override fun handleOnBackStarted(backEvent: BackEventCompat) =
                behavior.startBackProgress(backEvent)

            override fun handleOnBackProgressed(backEvent: BackEventCompat) =
                behavior.updateBackProgress(backEvent)

            override fun handleOnBackPressed() = behavior.handleBackInvoked()
            override fun handleOnBackCancelled() = behavior.cancelBackProgress()
        }
        requireActivity().onBackPressedDispatcher.addCallback(viewLifecycleOwner, backCallback)

        behavior.addBottomSheetCallback(object : BottomSheetBehavior.BottomSheetCallback() {
            override fun onStateChanged(p0: View, p1: Int) {
                backCallback.isEnabled = p1 == STATE_EXPANDED
            }

            override fun onSlide(p0: View, p1: Float) {
                binding.selectedSongsLayout.translationY = p1 * topInset
                binding.recyclerView.alpha = p1
                binding.bottomSheetDragHandle.alpha = 1 - p1
            }
        })

        val searchFragment = binding.playlistSearchContainer.getFragment<SearchFragment>()
        searchFragment.arguments = Bundle().apply {
            putString("extensionId", extensionId)
            putString("feedListener", "playlist_search")
        }
        searchFragment.parentFragmentManager.addFragmentOnAttachListener { _, fragment ->
            val arguments = fragment.arguments ?: Bundle()
            arguments.putAll(searchFragment.arguments)
            fragment.arguments = arguments
        }

        val adapter = SelectableMediaAdapter { _, item ->
            viewModel.toggleTrack(item as Track)
        }
        configureGridLayout(binding.recyclerView, adapter, false)
        binding.addTracks.setOnClickListener {
            parentFragmentManager.setFragmentResult("searchedTracks", Bundle().apply {
                putSerialized("tracks", viewModel.selectedTracks.value)
            })
            viewModel.selectedTracks.value = emptyList()
            parentFragmentManager.popBackStack()
        }

        observe(viewModel.selectedTracks) { list ->
            val items = list.map {
                it to (it in viewModel.selectedTracks.value)
            }
            adapter.submitList(items)
            binding.addTracks.isEnabled = items.isNotEmpty()
            val tracks = items.size
            binding.selectedSongs.text = runCatching {
                resources.getQuantityString(R.plurals.number_songs, tracks, tracks)
            }.getOrNull() ?: getString(R.string.n_songs, tracks)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\edit\search\EditPlaylistSearchViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.edit.search

import androidx.lifecycle.ViewModel
import dev.brahmkshatriya.echo.common.models.Track
import kotlinx.coroutines.flow.MutableStateFlow

class EditPlaylistSearchViewModel : ViewModel() {

    val selectedTracks = MutableStateFlow<List<Track>>(listOf())
    fun toggleTrack(track: Track) = with(selectedTracks) {
        val mutable = selectedTracks.value.toMutableList()
        with(mutable) { if (contains(track)) remove(track) else add(track) }
        value = mutable
    }

    fun addTrack(track: Track) = with(selectedTracks) {
        if(value.contains(track)) return@with
        val mutable = selectedTracks.value.toMutableList()
        mutable.add(track)
        value = mutable
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\save\MediaItemAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.save

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.view.isVisible
import androidx.recyclerview.widget.DiffUtil
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.databinding.ItemShelfMediaBinding
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.ui.feed.viewholders.MediaViewHolder.Companion.bind
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimListAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class MediaItemAdapter(
    private val listener: Listener,
) : ScrollAnimListAdapter<MediaItemAdapter.Item, MediaItemAdapter.ViewHolder>(
    DiffCallback
), GridAdapter {

    data class Item(val extensionId: String, val item: EchoMediaItem) {
        val id = extensionId + item.id
    }

    object DiffCallback : DiffUtil.ItemCallback<Item>() {
        override fun areItemsTheSame(oldItem: Item, newItem: Item) = oldItem.id == newItem.id
        override fun areContentsTheSame(oldItem: Item, newItem: Item) = oldItem == newItem
    }

    fun interface Listener {
        fun onMediaItemClicked(view: View?, item: Item?)
    }

    class ViewHolder(
        parent: ViewGroup,
        private val listener: Listener,
        val binding: ItemShelfMediaBinding = ItemShelfMediaBinding.inflate(
            LayoutInflater.from(parent.context), parent, false
        )
    ) : ScrollAnimViewHolder(binding.root) {
        var item: Item? = null

        init {
            binding.coverContainer.cover.clipToOutline = true
            binding.root.setOnClickListener {
                listener.onMediaItemClicked(it, item)
            }
            binding.more.isVisible = false
        }

        fun bind(item: Item) {
            this.item = item
            binding.bind(item.item)
            binding.play.isVisible = false
        }
    }

    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) = count
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) = ViewHolder(parent, listener)
    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        super.onBindViewHolder(holder, position)
        val item = getItem(position) ?: return
        holder.bind(item)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\save\SaveToPlaylistBottomSheet.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.save

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.view.isVisible
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.databinding.DialogPlaylistSaveBinding
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.ui.common.GridAdapter.Companion.configureGridLayout
import dev.brahmkshatriya.echo.ui.playlist.SelectableMediaAdapter
import dev.brahmkshatriya.echo.ui.playlist.create.CreatePlaylistBottomSheet
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.Serializer.getSerialized
import dev.brahmkshatriya.echo.utils.Serializer.putSerialized
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import dev.brahmkshatriya.echo.utils.ui.UiUtils.configureBottomBar
import kotlinx.coroutines.flow.combine
import org.koin.androidx.viewmodel.ext.android.viewModel
import org.koin.core.parameter.parametersOf

class SaveToPlaylistBottomSheet : BottomSheetDialogFragment() {

    companion object {
        fun newInstance(extensionId: String, item: EchoMediaItem) =
            SaveToPlaylistBottomSheet().apply {
                arguments = Bundle().apply {
                    putString("extensionId", extensionId)
                    putSerialized("item", item)
                }
            }
    }

    private val args by lazy { requireArguments() }
    private val extensionId by lazy { args.getString("extensionId")!! }
    private val item by lazy { args.getSerialized<EchoMediaItem>("item")!!.getOrThrow() }

    private val itemAdapter by lazy {
        MediaItemAdapter { _, _ -> }
    }

    private val adapter by lazy {
        SelectableMediaAdapter { _, item ->
            viewModel.togglePlaylist(item as Playlist)
        }
    }

    private val topBarAdapter by lazy {
        TopAppBarAdapter(
            { dismiss() },
            { CreatePlaylistBottomSheet().show(parentFragmentManager, null) }
        )
    }

    private var binding by autoCleared<DialogPlaylistSaveBinding>()
    private val viewModel by viewModel<SaveToPlaylistViewModel> {
        parametersOf(extensionId, item)
    }

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?,
    ): View {
        binding = DialogPlaylistSaveBinding.inflate(inflater, container, false)
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        configureBottomBar(binding.saveCont)
        binding.save.setOnClickListener {
            viewModel.saveTracks()
        }
        itemAdapter.submitList(listOf(MediaItemAdapter.Item(extensionId, item)))
        val combined = viewModel.playlistsFlow.combine(viewModel.saveFlow) { playlists, save ->
            playlists to save
        }
        configureGridLayout(
            binding.recyclerView,
            GridAdapter.Concat(
                topBarAdapter,
                itemAdapter,
                adapter.withHeader { viewModel.toggleAll(it) },
            ),
            false
        )
        observe(combined) { (state, save) ->
            val playlistLoading = state !is SaveToPlaylistViewModel.PlaylistState.Loaded
            val saving = save != SaveToPlaylistViewModel.SaveState.Initial
            val loading = playlistLoading || saving
            binding.recyclerView.isVisible = !saving
            binding.loading.root.isVisible = loading
            binding.loading.textView.text = when (save) {
                SaveToPlaylistViewModel.SaveState.Initial -> getString(R.string.loading)
                is SaveToPlaylistViewModel.SaveState.LoadingPlaylist ->
                    getString(R.string.loading_x, save.playlist.title)

                SaveToPlaylistViewModel.SaveState.LoadingTracks -> getString(
                    R.string.loading_x,
                    item.title
                )

                is SaveToPlaylistViewModel.SaveState.Saved -> {
                    dismiss()
                    getString(R.string.not_loading)
                }

                is SaveToPlaylistViewModel.SaveState.Saving ->
                    getString(R.string.saving_x, save.playlist.title)
            }
            if (state is SaveToPlaylistViewModel.PlaylistState.Loaded) {
                if (state.list == null) {
                    dismiss()
                    return@observe
                }
                adapter.submitList(state.list)
                binding.save.isEnabled = state.list.any { it.second }
            }
        }

        parentFragmentManager.setFragmentResultListener(
            "createPlaylist", this
        ) { _, _ -> viewModel.refresh() }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\save\SaveToPlaylistViewModel.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.save

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.clients.AlbumClient
import dev.brahmkshatriya.echo.common.clients.PlaylistClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditorListenerClient
import dev.brahmkshatriya.echo.common.clients.RadioClient
import dev.brahmkshatriya.echo.common.models.Album
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Feed.Companion.loadAll
import dev.brahmkshatriya.echo.common.models.Message
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Radio
import dev.brahmkshatriya.echo.common.models.Track
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getAs
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtension
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.getExtensionOrThrow
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.collectLatest
import kotlinx.coroutines.launch

class SaveToPlaylistViewModel(
    private val extensionId: String,
    private val item: EchoMediaItem,
    private val app: App,
    extensionLoader: ExtensionLoader,
) : ViewModel() {

    private val extensions = extensionLoader.music
    private val extensionFlow = MutableStateFlow<Extension<*>?>(null)

    sealed class SaveState {
        data object Initial : SaveState()
        data object LoadingTracks : SaveState()
        data class LoadingPlaylist(val playlist: Playlist) : SaveState()
        data class Saving(val playlist: Playlist, val tracks: List<Track>) : SaveState()
        data class Saved(val success: Boolean) : SaveState()
    }

    val saveFlow = MutableStateFlow<SaveState>(SaveState.Initial)
    fun saveTracks() = viewModelScope.launch(Dispatchers.IO) {
        saveFlow.value = SaveState.LoadingTracks
        val result = runCatching {
            val extension = extensionFlow.value!!
            val playlists = when (val state = playlistsFlow.value) {
                is PlaylistState.Loaded -> state.list!!.mapNotNull { if (it.second) it.first else null }
                else -> throw IllegalStateException("Playlists not loaded")
            }
            if (playlists.isEmpty()) return@runCatching false
            saveFlow.value = SaveState.LoadingTracks
            val tracks = when (item) {
                is Album ->
                    extension.getAs<AlbumClient, List<Track>> { loadTracks(item)?.loadAll().orEmpty() }

                is Playlist ->
                    extension.getAs<PlaylistClient, List<Track>> { loadTracks(item).loadAll() }

                is Radio ->
                    extension.getAs<RadioClient, List<Track>> { loadTracks(item).loadAll() }

                is Track -> Result.success(listOf(item))
                else -> null
            }?.getOrThrow().orEmpty()
            if (tracks.isEmpty()) return@runCatching false

            playlists.forEach { playlist ->
                extension.getAs<PlaylistEditClient, Unit> {
                    saveFlow.value = SaveState.LoadingPlaylist(playlist)
                    val loaded = loadPlaylist(playlist)
                    check(loaded.isEditable)
                    val playlistTracks = loadTracks(loaded).loadAll()
                    saveFlow.value = SaveState.Saving(loaded, tracks)
                    val listener = this as? PlaylistEditorListenerClient
                    listener?.onEnterPlaylistEditor(loaded, playlistTracks)
                    addTracksToPlaylist(loaded, playlistTracks, playlistTracks.size, tracks)
                    listener?.onExitPlaylistEditor(loaded, playlistTracks + tracks)
                }.getOrThrow()
            }
            val message =
                if (playlists.size != 1) app.context.getString(R.string.saved_to_playlists)
                else app.context.getString(R.string.saved_to_x, playlists.first().title)
            app.messageFlow.emit(Message(message))
            true
        }.getOrElse {
            app.throwFlow.emit(it)
            false
        }
        saveFlow.value = SaveState.Saved(result)
    }

    sealed class PlaylistState {
        data object Initial : PlaylistState()
        data object Loading : PlaylistState()
        data class Loaded(val list: List<Pair<Playlist, Boolean>>?) : PlaylistState()
    }

    val playlistsFlow = MutableStateFlow<PlaylistState>(PlaylistState.Initial)
    private suspend fun loadPlaylists(): List<Pair<Playlist, Boolean>> {
        val extension = extensions.getExtensionOrThrow(extensionId)
        val track = item as? Track
        return extension.getAs<PlaylistEditClient, List<Pair<Playlist, Boolean>>> {
            listEditablePlaylists(track)
        }.getOrThrow()
    }

    fun refresh() {
        viewModelScope.launch(Dispatchers.IO) {
            playlistsFlow.value = PlaylistState.Loading
            val result = runCatching { loadPlaylists() }.getOrElse {
                app.throwFlow.emit(it)
                null
            }
            playlistsFlow.value = PlaylistState.Loaded(result)
        }
    }

    fun togglePlaylist(playlist: Playlist) {
        val state = playlistsFlow.value
        if (state !is PlaylistState.Loaded) return
        val newList = state.list?.toMutableList() ?: return
        val index = newList.indexOfFirst { it.first.id == playlist.id }
        if (index == -1) return
        newList[index] = newList[index].copy(second = !newList[index].second)
        playlistsFlow.value = PlaylistState.Loaded(newList)
    }

    fun toggleAll(selected: Boolean) {
        val state = playlistsFlow.value
        if (state !is PlaylistState.Loaded) return
        val newList = state.list?.map { it.copy(second = selected) } ?: return
        playlistsFlow.value = PlaylistState.Loaded(newList)
    }

    init {
        viewModelScope.launch {
            extensions.collectLatest {
                extensionFlow.value = extensions.getExtension(extensionId)
            }
        }
        viewModelScope.launch(Dispatchers.IO) {
            refresh()
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\playlist\save\TopAppBarAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.ui.playlist.save

import android.view.LayoutInflater
import android.view.ViewGroup
import dev.brahmkshatriya.echo.databinding.ItemPlaylistSaveHeaderBinding
import dev.brahmkshatriya.echo.ui.common.GridAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimRecyclerAdapter
import dev.brahmkshatriya.echo.utils.ui.scrolling.ScrollAnimViewHolder

class TopAppBarAdapter(
    private val onClose: () -> Unit,
    private val onCreateClicked: () -> Unit
) : ScrollAnimRecyclerAdapter<TopAppBarAdapter.ViewHolder>(), GridAdapter {
    inner class ViewHolder(
        val binding: ItemPlaylistSaveHeaderBinding
    ) : ScrollAnimViewHolder(binding.root) {
        init {
            binding.root.setNavigationOnClickListener {
                onClose()
            }

            binding.root.setOnMenuItemClickListener {
                onCreateClicked()
                true
            }
        }
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val inflater = LayoutInflater.from(parent.context)
        return ViewHolder(ItemPlaylistSaveHeaderBinding.inflate(inflater, parent, false))

    }

    override fun getItemCount() = 1
    override val adapter = this
    override fun getSpanSize(position: Int, width: Int, count: Int) = count
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\settings\AudioEffectsFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.settings

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.databinding.FragmentAudioFxBinding
import dev.brahmkshatriya.echo.databinding.FragmentGenericCollapsableBinding
import dev.brahmkshatriya.echo.playback.listener.EffectsListener.Companion.deleteGlobalFx
import dev.brahmkshatriya.echo.playback.listener.EffectsListener.Companion.globalFx
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyContentInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsets
import dev.brahmkshatriya.echo.ui.extensions.login.LoginFragment.Companion.bind
import dev.brahmkshatriya.echo.ui.player.audiofx.AudioEffectsBottomSheet.Companion.bind
import dev.brahmkshatriya.echo.ui.player.audiofx.AudioEffectsBottomSheet.Companion.onEqualizerClicked
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import dev.brahmkshatriya.echo.utils.ui.FastScrollerHelper

class AudioEffectsFragment : Fragment() {

    private var binding: FragmentGenericCollapsableBinding by autoCleared()
    private val fragment = AudioFxFragment()

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View {
        binding = FragmentGenericCollapsableBinding.inflate(inflater, container, false)
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        binding.bind(this)
        binding.extensionIcon.isVisible = false
        binding.toolBar.title = getString(R.string.audio_fx)
        childFragmentManager.beginTransaction().replace(R.id.genericFragmentContainer, fragment)
            .commit()

        binding.toolBar.inflateMenu(R.menu.refresh_menu)
        binding.toolBar.setOnMenuItemClickListener {
            val context = requireContext()
            context.deleteGlobalFx()
            fragment.bind()
            true
        }
    }

    class AudioFxFragment : Fragment() {
        var binding by autoCleared<FragmentAudioFxBinding>()

        override fun onCreateView(
            inflater: LayoutInflater,
            container: ViewGroup?,
            savedInstanceState: Bundle?
        ): View {
            binding = FragmentAudioFxBinding.inflate(inflater, container, false)
            return binding.root
        }

        fun bind() = binding.bind(requireContext().globalFx()) { onEqualizerClicked() }

        override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
            bind()
            binding.root.apply {
                clipToPadding = false
                applyInsets { applyContentInsets(it) }
                isVerticalScrollBarEnabled = false
                FastScrollerHelper.applyTo(this)
            }
        }
    }

    companion object {
        const val AUDIO_FX = "audio_fx"
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\settings\BaseSettingsFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.settings

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.annotation.CallSuper
import androidx.fragment.app.Fragment
import androidx.preference.PreferenceFragmentCompat
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.ImageHolder
import dev.brahmkshatriya.echo.databinding.FragmentGenericCollapsableBinding
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyBackPressCallback
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyContentInsets
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.applyInsets
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadAsCircle
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.setupTransition
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import dev.brahmkshatriya.echo.utils.ui.FastScrollerHelper
import dev.brahmkshatriya.echo.utils.ui.UiUtils.configureAppBar

abstract class BaseSettingsFragment : Fragment() {

    abstract val title: String
    abstract val icon: ImageHolder?
    abstract val creator: () -> Fragment

    var binding: FragmentGenericCollapsableBinding by autoCleared()

    final override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View {
        binding = FragmentGenericCollapsableBinding.inflate(inflater, container, false)
        return binding.root
    }

    @CallSuper
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        setupTransition(view)

        applyBackPressCallback()
        binding.appBarLayout.configureAppBar { offset ->
            binding.toolbarOutline.alpha = offset
            binding.extensionIcon.alpha = 1 - offset
        }
        binding.toolBar.setNavigationOnClickListener {
            parentFragmentManager.popBackStack()
        }

        binding.toolBar.title = title
        icon.loadAsCircle(binding.extensionIcon, R.drawable.ic_extension_32dp) {
            binding.extensionIcon.setImageDrawable(it)
        }

        childFragmentManager.beginTransaction().replace(R.id.genericFragmentContainer, creator())
            .commit()
    }

    companion object {
        fun PreferenceFragmentCompat.configure() {
            listView?.apply {
                clipToPadding = false
                applyInsets { applyContentInsets(it) }
                isVerticalScrollBarEnabled = false
                FastScrollerHelper.applyTo(this)
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\settings\SettingsBottomSheet.kt
================================================================================

package dev.brahmkshatriya.echo.ui.settings

import android.graphics.drawable.Animatable
import android.os.Build.BRAND
import android.os.Build.DEVICE
import android.os.Build.VERSION.CODENAME
import android.os.Build.VERSION.RELEASE
import android.os.Build.VERSION.SDK_INT
import android.os.Bundle
import android.view.View
import android.view.ViewGroup.LayoutParams.MATCH_PARENT
import android.view.ViewGroup.LayoutParams.WRAP_CONTENT
import android.widget.Toast
import androidx.core.view.isVisible
import androidx.core.view.updateLayoutParams
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import com.google.android.material.dialog.MaterialAlertDialogBuilder
import dev.brahmkshatriya.echo.MainApplication.Companion.getCurrentLanguage
import dev.brahmkshatriya.echo.MainApplication.Companion.languages
import dev.brahmkshatriya.echo.MainApplication.Companion.setCurrentLanguage
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.databinding.DialogSettingsBinding
import dev.brahmkshatriya.echo.extensions.db.models.UserEntity.Companion.toEntity
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.download.DownloadFragment
import dev.brahmkshatriya.echo.ui.download.DownloadViewModel
import dev.brahmkshatriya.echo.ui.extensions.ExtensionInfoFragment
import dev.brahmkshatriya.echo.ui.extensions.ExtensionInfoFragment.Companion.openLink
import dev.brahmkshatriya.echo.ui.extensions.ExtensionsViewModel
import dev.brahmkshatriya.echo.ui.extensions.add.ExtensionsAddBottomSheet
import dev.brahmkshatriya.echo.ui.extensions.list.ExtensionsListBottomSheet
import dev.brahmkshatriya.echo.ui.extensions.login.LoginUserListBottomSheet
import dev.brahmkshatriya.echo.ui.extensions.login.LoginUserListViewModel
import dev.brahmkshatriya.echo.ui.extensions.manage.ManageExtensionsFragment
import dev.brahmkshatriya.echo.ui.main.HeaderAdapter.Companion.loadBigIcon
import dev.brahmkshatriya.echo.ui.main.HeaderAdapter.Companion.setLoopedLongClick
import dev.brahmkshatriya.echo.utils.ContextUtils.appVersion
import dev.brahmkshatriya.echo.utils.ContextUtils.copyToClipboard
import dev.brahmkshatriya.echo.utils.ContextUtils.getArch
import dev.brahmkshatriya.echo.utils.ContextUtils.getSettings
import dev.brahmkshatriya.echo.utils.ContextUtils.observe
import dev.brahmkshatriya.echo.utils.ui.UiUtils.configureBottomBar
import org.koin.androidx.viewmodel.ext.android.activityViewModel
import kotlin.random.Random

class SettingsBottomSheet : BottomSheetDialogFragment(R.layout.dialog_settings) {
    private val viewModel by activityViewModel<LoginUserListViewModel>()
    private val downloadVM by activityViewModel<DownloadViewModel>()

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        val binding = DialogSettingsBinding.bind(view)

        binding.closeButton.setOnClickListener { dismiss() }
        binding.logoImage.setOnClickListener {
            binding.logoImage.setImageResource(R.drawable.art_splash_anim)
            (binding.logoImage.drawable as Animatable).start()
            when (Random.nextInt(5)) {
                0 -> Toast.makeText(it.context, "Ooo what do we have here?", Toast.LENGTH_SHORT)
                    .show()

                2 -> Toast.makeText(it.context, "Nothing to see here.", Toast.LENGTH_SHORT).show()
            }
        }
        (binding.logoImage.drawable as Animatable).start()

        binding.player.setOnClickListener {
            dismiss()
            requireActivity().openFragment<SettingsPlayerFragment>()
        }

        binding.lookAndFeel.setOnClickListener {
            dismiss()
            requireActivity().openFragment<SettingsLookFragment>()
        }

        binding.other.setOnClickListener {
            dismiss()
            requireActivity().openFragment<SettingsOtherFragment>()
        }

        binding.downloads.setOnClickListener {
            dismiss()
            requireActivity().openFragment<DownloadFragment>()
        }

        observe(downloadVM.downloadExtensions) { extensions ->
            val extension = extensions?.firstOrNull()
            binding.downloadSettings.isEnabled = extension != null
            binding.downloadSettings.setOnClickListener {
                dismiss()
                extension ?: return@setOnClickListener
                requireActivity().openFragment<ExtensionInfoFragment>(
                    null, ExtensionInfoFragment.getBundle(extension)
                )
            }
        }

        binding.manageExtension.setOnClickListener {
            dismiss()
            requireActivity().openFragment<ManageExtensionsFragment>()
        }

        binding.addExtension.setOnClickListener {
            dismiss()
            ExtensionsAddBottomSheet().show(parentFragmentManager, null)
        }

        val settings = requireContext().getSettings()
        val language = getCurrentLanguage(settings)
        val languages = mapOf("system" to getString(R.string.system)) + languages
        val langList = languages.entries.toList()
        binding.language.run {
            text = getString(R.string.language_x, languages[language])
            setOnClickListener {
                MaterialAlertDialogBuilder(context)
                    .setSingleChoiceItems(
                        langList.map { it.value }.toTypedArray(),
                        langList.indexOfFirst { it.key == language }
                    ) { dialog, which ->
                        setCurrentLanguage(settings, langList[which].key)
                        dialog.dismiss()
                    }
                    .setNegativeButton(R.string.cancel) { dialog, _ -> dialog.dismiss() }
                    .setTitle(getString(R.string.select_language))
                    .create()
                    .show()
                dismiss()
            }
        }

        binding.wiki.setOnClickListener {
            dismiss()
            requireActivity().openLink("https://wotaku.wiki/guides/music/echo")
        }

        val repo = getString(R.string.app_github_repo)
        binding.contributors.setOnClickListener {
            dismiss()
            requireActivity().openLink("https://github.com/$repo/graphs/contributors")
        }

        binding.donate.setOnClickListener {
            dismiss()
            requireActivity().openLink("https://ko-fi.com/brahmkshatriya")
        }

        binding.discord.setOnClickListener {
            dismiss()
            requireActivity().openLink("https://discord.gg/J3WvbBUU8Z")
        }

        binding.github.setOnClickListener {
            dismiss()
            requireActivity().openLink("https://github.com/$repo")
        }

        binding.telegram.setOnClickListener {
            dismiss()
            requireActivity().openLink("https://t.me/echo_extension")
        }

        binding.version.run {
            val version = appVersion()
            text = version
            setOnClickListener {
                val info = buildString {
                    appendLine("Echo Version: $version")
                    appendLine("Device: $BRAND $DEVICE")
                    appendLine("Architecture: ${getArch()}")
                    appendLine("OS Version: $CODENAME $RELEASE ($SDK_INT)")
                }
                context.copyToClipboard(getString(R.string.version), info)
            }
            setOnLongClickListener {
                val viewModel by activityViewModel<ExtensionsViewModel>()
                viewModel.update(requireActivity(), true)
                dismiss()
                true
            }
        }

        binding.shivam.setOnClickListener {
            dismiss()
            requireActivity().openLink("https://github.com/brahmkshatriya")
        }

        configureBottomBar(binding.extensionBar)
        binding.extensionsCont.setOnClickListener {
            dismiss()
            ExtensionsListBottomSheet.newInstance(ExtensionType.MUSIC)
                .show(parentFragmentManager, null)
        }

        observe(viewModel.extensionLoader.current) { ext ->
            viewModel.currentExtension.value = ext
            binding.currentExtensionSettings.setOnClickListener {
                ext ?: return@setOnClickListener
                dismiss()
                requireActivity().openFragment<ExtensionInfoFragment>(
                    null, ExtensionInfoFragment.getBundle(ext)
                )
            }
            binding.extensions.loadBigIcon(ext?.metadata?.icon, R.drawable.ic_extension_32dp)
            binding.extensionsCont.setLoopedLongClick(
                viewModel.extensionLoader.music.value.filter { it.isEnabled },
                { viewModel.extensionLoader.current.value }
            ) {
                viewModel.extensionLoader.setupMusicExtension(it, true)
            }
        }

        binding.currentAccountName.setOnClickListener {
            dismiss()
            LoginUserListBottomSheet().show(parentFragmentManager, null)
        }
        binding.accountsCont.setOnClickListener {
            dismiss()
            LoginUserListBottomSheet().show(parentFragmentManager, null)
        }
        observe(viewModel.allUsersWithClient) { (ext, isLoginClient, all) ->
            binding.extensionBar.updateLayoutParams {
                width = if (isLoginClient) MATCH_PARENT else WRAP_CONTENT
            }
            binding.currentAccountName.run {
                isVisible = isLoginClient
                text = viewModel.currentUser.value?.name ?: getString(R.string.no_account)
                setLoopedLongClick(all, { all.find { it.second } }) {
                    ext ?: return@setLoopedLongClick
                    viewModel.setLoginUser(it.first.toEntity(ext.type, ext.id))
                }
            }
            binding.accounts.loadBigIcon(
                viewModel.currentUser.value?.cover, R.drawable.ic_account_circle_32dp
            )
            binding.accountsCont.run {
                isVisible = isLoginClient
                setLoopedLongClick(all, { all.find { it.second } }) {
                    ext ?: return@setLoopedLongClick
                    viewModel.setLoginUser(it.first.toEntity(ext.type, ext.id))
                }
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\settings\SettingsLookFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.settings

import android.app.Activity
import android.content.ComponentName
import android.content.Context
import android.content.SharedPreferences
import android.content.pm.PackageManager
import android.os.Bundle
import android.view.View
import androidx.preference.Preference
import androidx.preference.PreferenceCategory
import androidx.preference.PreferenceFragmentCompat
import androidx.preference.SwitchPreferenceCompat
import dev.brahmkshatriya.echo.MainActivity
import dev.brahmkshatriya.echo.MainActivity.Companion.AMOLED_KEY
import dev.brahmkshatriya.echo.MainActivity.Companion.BACK_ANIM
import dev.brahmkshatriya.echo.MainActivity.Companion.BIG_COVER
import dev.brahmkshatriya.echo.MainActivity.Companion.COLOR_KEY
import dev.brahmkshatriya.echo.MainActivity.Companion.CUSTOM_THEME_KEY
import dev.brahmkshatriya.echo.MainActivity.Companion.THEME_KEY
import dev.brahmkshatriya.echo.MainActivity.Companion.defaultColor
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.ImageHolder.Companion.toResourceImageHolder
import dev.brahmkshatriya.echo.playback.MediaItemUtils.SHOW_BACKGROUND
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.BACKGROUND_GRADIENT
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.NAVBAR_GRADIENT
import dev.brahmkshatriya.echo.ui.player.PlayerFragment.Companion.DYNAMIC_PLAYER
import dev.brahmkshatriya.echo.utils.ContextUtils.SETTINGS_NAME
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.ANIMATIONS_KEY
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.SCROLL_ANIMATIONS_KEY
import dev.brahmkshatriya.echo.utils.ui.FastScrollerHelper.SCROLL_BAR
import dev.brahmkshatriya.echo.utils.ui.prefs.ColorListPreference
import dev.brahmkshatriya.echo.utils.ui.prefs.MaterialListPreference

class SettingsLookFragment : BaseSettingsFragment() {
    override val title get() = getString(R.string.look_and_feel)
    override val icon get() = R.drawable.ic_palette.toResourceImageHolder()
    override val creator = { LookPreference() }

    class LookPreference : PreferenceFragmentCompat() {
        override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
            super.onViewCreated(view, savedInstanceState)
            configure()
        }

        override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {
            val context = preferenceManager.context
            preferenceManager.sharedPreferencesName = SETTINGS_NAME
            preferenceManager.sharedPreferencesMode = Context.MODE_PRIVATE
            val preferences = preferenceManager.sharedPreferences ?: return

            val screen = preferenceManager.createPreferenceScreen(context)
            preferenceScreen = screen

            PreferenceCategory(context).apply {
                title = getString(R.string.colors)
                key = "colors"
                isIconSpaceReserved = false
                layoutResource = R.layout.preference_category
                screen.addPreference(this)

                MaterialListPreference(context).apply {
                    key = THEME_KEY
                    title = getString(R.string.theme)
                    summary = getString(R.string.theme_summary)
                    layoutResource = R.layout.preference
                    isIconSpaceReserved = false

                    entries = context.resources.getStringArray(R.array.themes)
                    entryValues = arrayOf("light", "dark", "system")
                    value = preferences.getString(THEME_KEY, "system")
                    addPreference(this)
                }

                SwitchPreferenceCompat(context).apply {
                    key = CUSTOM_THEME_KEY
                    title = getString(R.string.custom_theme_color)
                    summary = getString(R.string.custom_theme_color_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(true)
                    onPreferenceChangeListener = Preference.OnPreferenceChangeListener { _, it ->
                        screen.findPreference<Preference>(COLOR_KEY)?.isEnabled = it as Boolean
                        true
                    }
                    addPreference(this)
                }

                ColorListPreference(this@LookPreference).apply {
                    key = COLOR_KEY
                    setDefaultValue(context.defaultColor())
                    isEnabled = preferences.getBoolean(CUSTOM_THEME_KEY, true)
                    addPreference(this)
                }

                SwitchPreferenceCompat(context).apply {
                    key = AMOLED_KEY
                    title = getString(R.string.amoled)
                    summary = getString(R.string.amoled_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(false)
                    addPreference(this)
                }

                SwitchPreferenceCompat(context).apply {
                    key = NAVBAR_GRADIENT
                    title = getString(R.string.navbar_gradient)
                    summary = getString(R.string.navbar_gradient_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(true)
                    addPreference(this)
                }

                SwitchPreferenceCompat(context).apply {
                    key = BACKGROUND_GRADIENT
                    title = getString(R.string.background_gradient)
                    summary = getString(R.string.background_gradient_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(true)
                    addPreference(this)
                }

                SwitchPreferenceCompat(context).apply {
                    key = DYNAMIC_PLAYER
                    title = getString(R.string.dynamic_player)
                    summary = getString(R.string.dynamic_player_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(true)
                    addPreference(this)
                }
            }

            PreferenceCategory(context).apply {
                title = getString(R.string.ui)
                key = "ui"
                isIconSpaceReserved = false
                layoutResource = R.layout.preference_category
                screen.addPreference(this)

                SwitchPreferenceCompat(context).apply {
                    key = BIG_COVER
                    title = getString(R.string.big_cover)
                    summary = getString(R.string.big_cover_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(false)
                    addPreference(this)
                }

                SwitchPreferenceCompat(context).apply {
                    key = SCROLL_BAR
                    title = getString(R.string.scroll_bar)
                    summary = getString(R.string.scroll_bar_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(false)
                    addPreference(this)
                }

                SwitchPreferenceCompat(context).apply {
                    key = SHOW_BACKGROUND
                    title = getString(R.string.show_background)
                    summary = getString(R.string.show_background_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(true)
                    addPreference(this)
                }
            }

            PreferenceCategory(context).apply {
                title = getString(R.string.animation)
                key = "animation"
                isIconSpaceReserved = false
                layoutResource = R.layout.preference_category
                screen.addPreference(this)

                SwitchPreferenceCompat(context).apply {
                    key = BACK_ANIM
                    title = getString(R.string.back_animations)
                    summary = getString(R.string.back_animations_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(false)
                    addPreference(this)
                }

                SwitchPreferenceCompat(context).apply {
                    key = ANIMATIONS_KEY
                    title = getString(R.string.animations)
                    summary = getString(R.string.animations_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(true)
                    addPreference(this)
                }

                SwitchPreferenceCompat(context).apply {
                    key = SCROLL_ANIMATIONS_KEY
                    title = getString(R.string.scroll_animations)
                    summary = getString(R.string.scroll_animations_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(false)
                    addPreference(this)
                }
            }
        }

        val listener = SharedPreferences.OnSharedPreferenceChangeListener { _, key ->
            when (key) {
                THEME_KEY, CUSTOM_THEME_KEY, COLOR_KEY, AMOLED_KEY,
                BIG_COVER, NAVBAR_GRADIENT, BACKGROUND_GRADIENT,
                    -> {
                    requireActivity().recreate()
                }

                BACK_ANIM -> {
                    val pref = preferenceScreen.findPreference<SwitchPreferenceCompat>(key)
                    val enabled = pref?.isChecked == true
                    val backActivity = MainActivity.Back::class.java.name
                    val mainActivity = MainActivity::class.java.name
                    requireActivity().changeEnabledComponent(
                        if (enabled) backActivity else mainActivity,
                        if (enabled) mainActivity else backActivity
                    )
                }
            }
        }

        override fun onResume() {
            super.onResume()
            preferenceManager.sharedPreferences!!
                .registerOnSharedPreferenceChangeListener(listener)
        }

        override fun onPause() {
            super.onPause()
            preferenceManager.sharedPreferences!!
                .unregisterOnSharedPreferenceChangeListener(listener)
        }
    }

    companion object {

        fun Activity.changeEnabledComponent(enabled: String, disabled: String) {
            packageManager.setComponentEnabledSetting(
                ComponentName(this, enabled),
                PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
                PackageManager.DONT_KILL_APP
            )
            packageManager.setComponentEnabledSetting(
                ComponentName(this, disabled),
                PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
                PackageManager.DONT_KILL_APP
            )
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\settings\SettingsOtherFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.settings

import android.content.Context
import android.os.Bundle
import android.view.View
import androidx.activity.result.contract.ActivityResultContracts
import androidx.preference.PreferenceFragmentCompat
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.ImageHolder.Companion.toResourceImageHolder
import dev.brahmkshatriya.echo.ui.extensions.ExtensionsViewModel
import dev.brahmkshatriya.echo.utils.ContextUtils.SETTINGS_NAME
import dev.brahmkshatriya.echo.utils.PermsUtils.registerActivityResultLauncher
import dev.brahmkshatriya.echo.utils.exportSettings
import dev.brahmkshatriya.echo.utils.importSettings
import dev.brahmkshatriya.echo.utils.ui.prefs.SwitchLongClickPreference
import dev.brahmkshatriya.echo.utils.ui.prefs.TransitionPreference
import org.koin.androidx.viewmodel.ext.android.activityViewModel

class SettingsOtherFragment : BaseSettingsFragment() {
    override val title get() = getString(R.string.other_settings)
    override val icon get() = R.drawable.ic_more_horiz.toResourceImageHolder()
    override val creator = { OtherPreference() }

    class OtherPreference : PreferenceFragmentCompat() {

        override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
            super.onViewCreated(view, savedInstanceState)
            configure()
        }

        override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {
            val context = preferenceManager.context
            preferenceManager.sharedPreferencesName = SETTINGS_NAME
            preferenceManager.sharedPreferencesMode = Context.MODE_PRIVATE
            val screen = preferenceManager.createPreferenceScreen(context)
            preferenceScreen = screen

            SwitchLongClickPreference(context).apply {
                title = getString(R.string.check_for_updates)
                summary = getString(R.string.check_for_updates_summary)
                key = "check_for_updates"
                layoutResource = R.layout.preference_switch
                isIconSpaceReserved = false
                setDefaultValue(true)
                screen.addPreference(this)
                setOnLongClickListener {
                    val viewModel by activityViewModel<ExtensionsViewModel>()
                    viewModel.update(requireActivity(), true)
                }
            }

            TransitionPreference(context).apply {
                key = "export"
                title = getString(R.string.export_settings)
                summary = getString(R.string.export_settings_summary)
                layoutResource = R.layout.preference
                isIconSpaceReserved = false
                screen.addPreference(this)
                setOnPreferenceClickListener {
                    val contract = ActivityResultContracts.CreateDocument("application/json")
                    requireActivity().registerActivityResultLauncher(contract) { uri ->
                        uri?.let { context.exportSettings(it) }
                    }.launch("echo-settings.json")
                    true
                }
            }

            TransitionPreference(context).apply {
                key = "import"
                title = getString(R.string.import_settings)
                summary = getString(R.string.import_settings_summary)
                layoutResource = R.layout.preference
                isIconSpaceReserved = false
                screen.addPreference(this)
                setOnPreferenceClickListener {
                    val contract = ActivityResultContracts.OpenDocument()
                    requireActivity().registerActivityResultLauncher(contract) {
                        it?.let {
                            context.importSettings(it)
                            requireActivity().recreate()
                        }
                    }.launch(arrayOf("application/json"))
                    true
                }
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\ui\settings\SettingsPlayerFragment.kt
================================================================================

package dev.brahmkshatriya.echo.ui.settings


import android.content.Context
import android.os.Bundle
import android.view.View
import androidx.preference.Preference
import androidx.preference.PreferenceCategory
import androidx.preference.PreferenceFragmentCompat
import androidx.preference.SwitchPreferenceCompat
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.models.ImageHolder.Companion.toResourceImageHolder
import dev.brahmkshatriya.echo.playback.PlayerService.Companion.CACHE_SIZE
import dev.brahmkshatriya.echo.playback.PlayerService.Companion.CLOSE_PLAYER
import dev.brahmkshatriya.echo.playback.PlayerService.Companion.MORE_BRAIN_CAPACITY
import dev.brahmkshatriya.echo.playback.PlayerService.Companion.SKIP_SILENCE
import dev.brahmkshatriya.echo.playback.PlayerService.Companion.STREAM_QUALITY
import dev.brahmkshatriya.echo.playback.PlayerService.Companion.UNMETERED_STREAM_QUALITY
import dev.brahmkshatriya.echo.playback.PlayerService.Companion.streamQualities
import dev.brahmkshatriya.echo.playback.listener.PlayerRadio.Companion.AUTO_START_RADIO
import dev.brahmkshatriya.echo.ui.common.FragmentUtils.openFragment
import dev.brahmkshatriya.echo.ui.player.PlayerViewModel.Companion.KEEP_QUEUE
import dev.brahmkshatriya.echo.ui.settings.AudioEffectsFragment.Companion.AUDIO_FX
import dev.brahmkshatriya.echo.utils.ContextUtils.SETTINGS_NAME
import dev.brahmkshatriya.echo.utils.ui.prefs.MaterialListPreference
import dev.brahmkshatriya.echo.utils.ui.prefs.MaterialSliderPreference
import dev.brahmkshatriya.echo.utils.ui.prefs.TransitionPreference

class SettingsPlayerFragment : BaseSettingsFragment() {
    override val title get() = getString(R.string.player)
    override val icon get() = R.drawable.ic_play_circle.toResourceImageHolder()
    override val creator = { AudioPreference() }

    class AudioPreference : PreferenceFragmentCompat() {

        override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
            super.onViewCreated(view, savedInstanceState)
            configure()
        }

        override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {
            val context = preferenceManager.context
            preferenceManager.sharedPreferencesName = SETTINGS_NAME
            preferenceManager.sharedPreferencesMode = Context.MODE_PRIVATE
            val screen = preferenceManager.createPreferenceScreen(context)
            preferenceScreen = screen

            PreferenceCategory(context).apply {
                title = getString(R.string.playback)
                key = "playback"
                isIconSpaceReserved = false
                layoutResource = R.layout.preference_category
                screen.addPreference(this)

                TransitionPreference(context).apply {
                    key = AUDIO_FX
                    title = getString(R.string.audio_fx)
                    summary = getString(R.string.audio_fx_summary)
                    layoutResource = R.layout.preference
                    isIconSpaceReserved = false
                    addPreference(this)
                }

                MaterialListPreference(context).apply {
                    key = STREAM_QUALITY
                    title = getString(R.string.stream_quality)
                    summary = getString(R.string.stream_quality_summary)
                    entries = context.resources.getStringArray(R.array.stream_qualities)
                    entryValues = streamQualities
                    layoutResource = R.layout.preference
                    isIconSpaceReserved = false
                    setDefaultValue(streamQualities[1])
                    addPreference(this)
                }

                MaterialListPreference(context).apply {
                    key = UNMETERED_STREAM_QUALITY
                    title = getString(R.string.unmetered_stream_quality)
                    summary = getString(R.string.unmetered_stream_quality_summary)
                    entries =
                        context.resources.getStringArray(R.array.stream_qualities) + getString(R.string.off)
                    entryValues = streamQualities + "off"
                    layoutResource = R.layout.preference
                    isIconSpaceReserved = false
                    setDefaultValue("off")
                    addPreference(this)
                }
            }

            PreferenceCategory(context).apply {
                title = getString(R.string.behavior)
                key = "behavior"
                isIconSpaceReserved = false
                layoutResource = R.layout.preference_category
                screen.addPreference(this)

                SwitchPreferenceCompat(context).apply {
                    key = KEEP_QUEUE
                    title = getString(R.string.keep_queue)
                    summary = getString(R.string.keep_queue_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(true)
                    addPreference(this)
                }

                SwitchPreferenceCompat(context).apply {
                    key = CLOSE_PLAYER
                    title = getString(R.string.stop_player)
                    summary = getString(R.string.stop_player_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(false)
                    addPreference(this)
                }

                SwitchPreferenceCompat(context).apply {
                    key = SKIP_SILENCE
                    title = getString(R.string.skip_silence)
                    summary = getString(R.string.skip_silence_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(true)
                    addPreference(this)
                }

                SwitchPreferenceCompat(context).apply {
                    key = MORE_BRAIN_CAPACITY
                    title = getString(R.string.more_brain_capacity)
                    summary = getString(R.string.more_brain_capacity_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(false)
                    addPreference(this)
                }

                SwitchPreferenceCompat(context).apply {
                    key = AUTO_START_RADIO
                    title = getString(R.string.auto_start_radio)
                    summary = getString(R.string.auto_start_radio_summary)
                    layoutResource = R.layout.preference_switch
                    isIconSpaceReserved = false
                    setDefaultValue(true)
                    addPreference(this)
                }

                MaterialSliderPreference(context, 200, 1000, allowOverride = true).apply {
                    key = CACHE_SIZE
                    title = getString(R.string.cache_size)
                    summary = getString(R.string.cache_size_summary)
                    isIconSpaceReserved = false
                    setDefaultValue(250)
                    addPreference(this)
                }
            }
        }

        override fun onPreferenceTreeClick(preference: Preference): Boolean {
            val view = listView.findViewById<View>(preference.key.hashCode())
            return when (preference.key) {
                AUDIO_FX -> {
                    requireActivity().openFragment<AudioEffectsFragment>(view)
                    true
                }

                else -> false
            }
        }
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\AppShortcuts.kt
================================================================================

package dev.brahmkshatriya.echo.utils

import android.content.Context
import android.content.Intent
import android.graphics.Bitmap
import android.graphics.Canvas
import androidx.core.content.pm.ShortcutInfoCompat
import androidx.core.content.pm.ShortcutManagerCompat
import androidx.core.content.res.ResourcesCompat
import androidx.core.graphics.applyCanvas
import androidx.core.graphics.createBitmap
import androidx.core.graphics.drawable.IconCompat
import androidx.core.graphics.drawable.toBitmap
import androidx.core.net.toUri
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.extensions.ExtensionLoader
import dev.brahmkshatriya.echo.utils.image.ImageUtils.loadAsCircleDrawable
import kotlinx.coroutines.flow.collectLatest
import kotlinx.coroutines.launch
import kotlin.math.roundToInt

object AppShortcuts {
    private suspend fun Context.applyAppShortcuts(extensions: List<MusicExtension>) {
        val max = ShortcutManagerCompat.getMaxShortcutCountPerActivity(this)
        val ext = extensions.take(max)
        val shortcuts = ext.map { extension ->
            val bitmap =
                extension.metadata.icon.loadAsCircleDrawable(this)
                    ?.toBitmap()?.addPadding()
                    ?: ResourcesCompat.getDrawable(resources, R.drawable.ic_extension, theme)!!
                        .toBitmap()
            ShortcutInfoCompat.Builder(this, extension.id)
                .setShortLabel(extension.name)
                .setIcon(IconCompat.createWithBitmap(bitmap))
                .setIntent(Intent(Intent.ACTION_VIEW, "echo://music/${extension.id}".toUri()))
                .build()
        }
        ShortcutManagerCompat.removeAllDynamicShortcuts(this)
        ShortcutManagerCompat.addDynamicShortcuts(this, shortcuts)
        ShortcutManagerCompat.disableShortcuts(
            this,
            ext.filter { !it.isEnabled }.map { it.id },
            getString(R.string.disabled)
        )
    }

    private fun Bitmap.addPadding(): Bitmap {
        val percentage = 0.05f
        val max = maxOf(width, height)
        val padding = (max * percentage).roundToInt().toFloat()
        val diameter = (max + padding * 2).toInt()
        val newBitmap = createBitmap(diameter, diameter, config ?: Bitmap.Config.ARGB_8888)
        val canvas = Canvas(newBitmap)
        newBitmap.applyCanvas {
//            canvas.drawColor(getCommonColor())
            canvas.drawBitmap(this@addPadding, padding, padding, null)
        }
        return newBitmap
    }

//    private fun Bitmap.circleCrop(): Bitmap {
//        val paint = Paint(Paint.ANTI_ALIAS_FLAG or Paint.FILTER_BITMAP_FLAG)
//
//        val minSize = minOf(width, height)
//        val radius = minSize / 2f
//        val output = createBitmap(minSize, minSize, config ?: Bitmap.Config.ARGB_8888)
//        output.applyCanvas {
//            drawCircle(radius, radius, radius, paint)
//            paint.xfermode = PorterDuffXfermode(PorterDuff.Mode.SRC_IN)
//            drawBitmap(this@circleCrop, radius - width / 2f, radius - height / 2f, paint)
//        }
//
//        return output
//    }

//    private fun Bitmap.getCommonColor(): Int {
//        val pixels = IntArray(width * height)
//        getPixels(pixels, 0, width, 0, 0, width, height)
//        val percent = 32
//        val groupedColors = pixels
//            .filter { (it shr 24 and 0xFF) > 64 }
//            .groupBy { color ->
//                val r = (color shr 16 and 0xFF) / percent * percent
//                val g = (color shr 8 and 0xFF) / percent * percent
//                val b = (color and 0xFF) / percent * percent
//                (0xFF shl 24) or (r shl 16) or (g shl 8) or b
//            }
//            .mapKeys { entry -> entry.value.groupBy { it }.maxByOrNull { it.value.size }?.key }
//            .mapValues { it.value.size }
//        return groupedColors.maxByOrNull { it.value }?.key ?: 0
//    }

    fun configureAppShortcuts(loader: ExtensionLoader) {
        val scope = loader.scope
        val musicExt = loader.music
        scope.launch {
            musicExt.collectLatest {
                loader.app.context.applyAppShortcuts(it)
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\AppUpdater.kt
================================================================================

package dev.brahmkshatriya.echo.utils

import android.content.Context
import android.os.Build
import dev.brahmkshatriya.echo.BuildConfig
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.common.helpers.ContinuationCallback.Companion.await
import dev.brahmkshatriya.echo.common.models.Message
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.utils.ContextUtils.appVersion
import dev.brahmkshatriya.echo.utils.ContextUtils.getTempFile
import dev.brahmkshatriya.echo.utils.Serializer.toData
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.withContext
import kotlinx.serialization.SerialName
import kotlinx.serialization.Serializable
import okhttp3.OkHttpClient
import okhttp3.Request
import okio.use
import java.io.File
import java.util.zip.ZipFile

object AppUpdater {

    private val client = OkHttpClient()

    @Suppress("KotlinConstantConditions")
    suspend fun updateApp(app: App): File? {
        val throwableFlow = app.throwFlow
        val messageFlow = app.messageFlow
        val githubRepo = app.context.getString(R.string.app_github_repo)
        val appType = BuildConfig.BUILD_TYPE
        val version = appVersion()

        val url = runCatching {
            when (appType) {
                "stable" -> {
                    val currentVersion = version.substringBefore('_')
                    val updateUrl = "https://api.github.com/repos/$githubRepo/releases"
                    getGithubUpdateUrl(currentVersion, updateUrl, client) ?: return null
                }

                "nightly" -> {
                    val hash = version.substringBefore("(").substringAfter('_')
                    val id = getGithubWorkflowId(hash, githubRepo, client) ?: return null
                    "https://nightly.link/$githubRepo/actions/runs/$id/artifact.zip"
                }

                else -> return null
            }
        }.getOrElse {
            throwableFlow.emit(it)
            return null
        }

        messageFlow.emit(
            Message(
                app.context.run {
                    getString(R.string.downloading_update_for_x, getString(R.string.app_name))
                }
            )
        )
        return runCatching {
            val download = downloadUpdate(app.context, url, client).getOrThrow()
            if (appType == "stable") download else unzipApk(download)
        }.getOrElse {
            throwableFlow.emit(it)
            return null
        }
    }

    private val githubRegex = Regex("https://api\\.github\\.com/repos/([^/]*)/([^/]*)/")
    suspend fun getGithubUpdateUrl(
        currentVersion: String,
        updateUrl: String,
        client: OkHttpClient
    ) = run {
        val (user, repo) = githubRegex.find(updateUrl)?.destructured
            ?: throw Exception("Invalid Github URL")
        val url = "https://api.github.com/repos/$user/$repo/releases/latest"
        val request = Request.Builder().url(url).build()
        val res = runCatching {
            client.newCall(request).await().use {
                it.body.string().toData<GithubReleaseResponse>()
            }.getOrThrow()
        }.getOrElse {
            throw Exception("Failed to fetch latest release", it)
        }
        if (res.tagName != currentVersion) {
            res.assets.sortedByDescending {
                it.name.contains(Build.SUPPORTED_ABIS.first())
            }.firstOrNull {
                it.name.endsWith("apk")
            }?.browserDownloadUrl ?: throw Exception("No EApk assets found")
        } else {
            null
        }
    }

    private suspend fun getGithubWorkflowId(
        hash: String,
        githubRepo: String,
        client: OkHttpClient
    ) = runCatching {
        val url =
            "https://api.github.com/repos/$githubRepo/actions/workflows/nightly.yml/runs?per_page=1&conclusion=success"
        val request = Request.Builder().url(url).build()
        client.newCall(request).await().body.string().toData<GithubRunsResponse>().getOrThrow()
            .workflowRuns.firstOrNull { it.sha.take(7) != hash }?.id
    }.getOrElse {
        throw Exception("Failed to fetch workflow ID", it)
    }

    @Serializable
    data class GithubReleaseResponse(
        @SerialName("tag_name")
        val tagName: String,
        @SerialName("created_at")
        val createdAt: String,
        val assets: List<Asset>
    ) {
        @Serializable
        data class Asset(
            val name: String,
            @SerialName("browser_download_url")
            val browserDownloadUrl: String
        )
    }

    @Serializable
    data class GithubRunsResponse(
        @SerialName("workflow_runs")
        val workflowRuns: List<Run>
    ) {
        @Serializable
        data class Run(
            val id: Long,
            @SerialName("head_sha")
            val sha: String,
        )
    }

    suspend fun downloadUpdate(
        context: Context,
        url: String,
        client: OkHttpClient
    ) = runIOCatching {
        val request = Request.Builder().url(url).build()
        val res = client.newCall(request).await().body.byteStream()
        val file = context.getTempFile()
        res.use { input -> file.outputStream().use { output -> input.copyTo(output) } }
        file
    }

    private fun unzipApk(file: File): File {
        val zipFile = ZipFile(file)
        val apkFile = File.createTempFile("temp", ".apk", file.parentFile!!)
        zipFile.use { zip ->
            val apkEntry = zip.entries().asSequence().firstOrNull {
                !it.isDirectory && it.name.endsWith(".apk")
            } ?: throw Exception("No APK file found in the zip")
            zip.getInputStream(apkEntry).use { input ->
                apkFile.outputStream().use { output ->
                    input.copyTo(output)
                }
            }
        }
        return apkFile
    }

    suspend fun getUpdateFileUrl(
        currentVersion: String,
        updateUrl: String,
        client: OkHttpClient
    ) = runIOCatching {
        if (updateUrl.isEmpty()) return@runIOCatching null
        if (updateUrl.startsWith("https://api.github.com/repos/")) {
            getGithubUpdateUrl(currentVersion, updateUrl, client)
        } else {
            throw Exception("Unsupported update url")
        }
    }

    private suspend fun <T> runIOCatching(
        block: suspend () -> T
    ) = withContext(Dispatchers.IO) {
        runCatching { runCatching { block() }.getOrElse { throw UpdateException(it) } }
    }

    class UpdateException(override val cause: Throwable) : Exception(cause) {
        override val message: String
            get() = "Update failed: ${cause.message}"
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\CacheUtils.kt
================================================================================

package dev.brahmkshatriya.echo.utils

import android.content.Context
import dev.brahmkshatriya.echo.utils.Serializer.toData
import dev.brahmkshatriya.echo.utils.Serializer.toJson
import java.io.File

object CacheUtils {

    fun cacheDir(context: Context, folderName: String) =
        File(context.cacheDir, "context/$folderName").apply { mkdirs() }

    const val CACHE_FOLDER_SIZE = 50 * 1024 * 1024 //50MB

    inline fun <reified T> Context.saveToCache(
        id: String, data: T?, folderName: String = T::class.java.simpleName
    ) = runCatching {
        val fileName = id.hashCode().toString()
        val cacheDir = cacheDir(this, folderName)
        val file = File(cacheDir, fileName)

        var size = cacheDir.walk().sumOf { it.length().toInt() }
        while (size > CACHE_FOLDER_SIZE) {
            val files = cacheDir.listFiles()
            files?.sortBy { it.lastModified() }
            files?.firstOrNull()?.delete()
            size = cacheDir.walk().sumOf { it.length().toInt() }
        }
        file.writeText(data.toJson())
    }

    inline fun <reified T> Context.getFromCache(
        id: String, folderName: String = T::class.java.simpleName
    ): T? {
        val fileName = id.hashCode().toString()
        val cacheDir = cacheDir(this, folderName)
        val file = File(cacheDir, fileName)
        return if (file.exists()) runCatching {
            file.readText().toData<T>().getOrThrow()
        }.getOrNull() else null
    }
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ContextUtils.kt
================================================================================

package dev.brahmkshatriya.echo.utils

import android.content.ClipData
import android.content.ClipboardManager
import android.content.Context
import android.os.Build.SUPPORTED_ABIS
import androidx.core.content.ContextCompat
import androidx.lifecycle.LifecycleOwner
import androidx.lifecycle.flowWithLifecycle
import androidx.lifecycle.lifecycleScope
import com.google.common.util.concurrent.ListenableFuture
import dev.brahmkshatriya.echo.BuildConfig
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.collectLatest
import kotlinx.coroutines.launch
import java.io.File

object ContextUtils {
    fun appVersion() = BuildConfig.VERSION_NAME + " " + BuildConfig.BUILD_TYPE
    fun getArch(): String {
        SUPPORTED_ABIS.firstOrNull()?.let { return it }
        return System.getProperty("os.arch")
            ?: System.getProperty("os.product.cpu.abi")
            ?: "Unknown"
    }

    fun Context.copyToClipboard(label: String?, string: String) {
        val clipboard = getSystemService(Context.CLIPBOARD_SERVICE) as ClipboardManager
        val clip = ClipData.newPlainText(label, string)
        clipboard.setPrimaryClip(clip)
    }

    fun <T> LifecycleOwner.observe(flow: Flow<T>, block: suspend (T) -> Unit) =
        lifecycleScope.launch {
            flow.flowWithLifecycle(lifecycle).collectLatest(block)
        }

    fun <T> LifecycleOwner.collect(flow: Flow<T>, block: suspend (T) -> Unit) =
        lifecycleScope.launch {
            flow.collect {
                runCatching { block(it) }
            }
        }

    fun <T> Context.listenFuture(future: ListenableFuture<T>, block: (Result<T>) -> Unit) {
        future.addListener({
            val result = runCatching { future.get() }
            block(result)
        }, ContextCompat.getMainExecutor(this))
    }

    fun <T> LifecycleOwner.emit(flow: MutableSharedFlow<T>, value: T) {
        lifecycleScope.launch {
            flow.emit(value)
        }
    }

    const val SETTINGS_NAME = "settings"
    fun Context.getSettings() = getSharedPreferences(SETTINGS_NAME, Context.MODE_PRIVATE)!!

    private fun Context.getTempDir() = cacheDir.resolve("apks").apply { mkdirs() }
    fun Context.getTempFile(ext: String = "apk"): File =
        File.createTempFile("temp", ".$ext", getTempDir())

    fun Context.cleanupTempApks() {
        getTempDir().deleteRecursively()
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\CoroutineUtils.kt
================================================================================

package dev.brahmkshatriya.echo.utils

import android.content.Context
import androidx.core.content.ContextCompat
import com.google.common.util.concurrent.ListenableFuture
import com.google.common.util.concurrent.SettableFuture
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.ExperimentalCoroutinesApi
import kotlinx.coroutines.delay
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.FlowCollector
import kotlinx.coroutines.flow.collectLatest
import kotlinx.coroutines.flow.combine
import kotlinx.coroutines.flow.conflate
import kotlinx.coroutines.flow.transform
import kotlinx.coroutines.flow.transformLatest
import kotlinx.coroutines.launch
import kotlinx.coroutines.suspendCancellableCoroutine
import kotlin.coroutines.CoroutineContext
import kotlin.experimental.ExperimentalTypeInference

object CoroutineUtils {
    fun setDebug() {
        System.setProperty(
            kotlinx.coroutines.DEBUG_PROPERTY_NAME,
            kotlinx.coroutines.DEBUG_PROPERTY_VALUE_ON
        )
    }

    suspend fun <T, R> Flow<T>.collectWith(flow: Flow<R>, block: suspend (T, R) -> Unit) {
        this.combine(flow) { t, r -> t to r }.collectLatest { (t, r) -> block(t, r) }
    }

    fun <T> Flow<T>.throttleLatest(delayMillis: Long): Flow<T> = conflate().transform {
        emit(it)
        delay(delayMillis)
    }

    @OptIn(ExperimentalCoroutinesApi::class, ExperimentalTypeInference::class)
    inline fun <reified T, R> combineTransformLatest(
        vararg flows: Flow<T>,
        @BuilderInference noinline transform: suspend FlowCollector<R>.(Array<T>) -> Unit
    ): Flow<R> {
        return combine(*flows) { it }
            .transformLatest(transform)
    }

    @OptIn(ExperimentalTypeInference::class)
    fun <T1, T2, R> Flow<T1>.combineTransformLatest(
        flow2: Flow<T2>,
        @BuilderInference transform: suspend FlowCollector<R>.(T1, T2) -> Unit
    ): Flow<R> {
        return combineTransformLatest(this, flow2) { args ->
            @Suppress("UNCHECKED_CAST")
            transform(
                args[0] as T1,
                args[1] as T2
            )
        }
    }

    fun <T> CoroutineScope.future(
        context: CoroutineContext = Dispatchers.IO, block: suspend () -> T
    ): ListenableFuture<T> {
        val future = SettableFuture.create<T>()
        launch(context) {
            future.set(block())
        }
        return future
    }

    fun <T> CoroutineScope.futureCatching(
        context: CoroutineContext = Dispatchers.IO, block: suspend () -> T
    ): ListenableFuture<T> {
        val future = SettableFuture.create<T>()
        launch(context) {
            runCatching {
                future.set(block())
            }.getOrElse {
                future.setException(it)
            }
        }
        return future
    }


    suspend fun <T> ListenableFuture<T>.await(context: Context) = suspendCancellableCoroutine {
        it.invokeOnCancellation {
            cancel(true)
        }
        addListener({
            it.resumeWith(runCatching { get()!! })
        }, ContextCompat.getMainExecutor(context))
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\PauseTimer.kt
================================================================================

package dev.brahmkshatriya.echo.utils

import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Job
import kotlinx.coroutines.delay
import kotlinx.coroutines.launch

class PauseTimer(
    private val scope: CoroutineScope,
    private var millisInFuture: Long,
    private val onTimerFinish: () -> Unit,
) {
    private var job: Job? = null
    private var lastPauseTime: Long = System.currentTimeMillis()
    private var isTimerPaused: Boolean = true

    fun resume() {
        if (isTimerPaused) {
            val diff = System.currentTimeMillis() - lastPauseTime
            val remainingTime =  millisInFuture - diff
            if (remainingTime < 0) return
            job = scope.launch {
                delay(remainingTime)
                onTimerFinish()
            }
            isTimerPaused = false
        }
    }

    fun pause() {
        job?.cancel()
        lastPauseTime = System.currentTimeMillis()
        isTimerPaused = true
    }

    init {
        resume()
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\PermsUtils.kt
================================================================================

package dev.brahmkshatriya.echo.utils

import android.Manifest
import android.Manifest.permission.READ_MEDIA_AUDIO
import android.content.Intent
import android.content.pm.PackageManager
import android.net.Uri
import android.os.Build
import android.provider.Settings
import android.widget.Toast
import androidx.activity.ComponentActivity
import androidx.activity.result.ActivityResultCallback
import androidx.activity.result.ActivityResultLauncher
import androidx.activity.result.contract.ActivityResultContract
import androidx.activity.result.contract.ActivityResultContracts
import androidx.core.content.ContextCompat
import androidx.lifecycle.lifecycleScope
import com.google.android.material.dialog.MaterialAlertDialogBuilder
import dev.brahmkshatriya.echo.R
import kotlinx.coroutines.launch
import java.util.UUID

object PermsUtils {

    fun ComponentActivity.checkAppPermissions(onGranted: suspend () -> Unit) {
        val perms = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU) listOfNotNull(
            Triple(
                Manifest.permission.POST_NOTIFICATIONS,
                getString(R.string.notifications),
                getString(R.string.notifications_permission_summary)
            ),
            Triple(
                READ_MEDIA_AUDIO,
                getString(R.string.audio),
                getString(R.string.audio_permission_summary)
            ),
//            Triple(
//                Manifest.permission.READ_MEDIA_VIDEO,
//                getString(R.string.video),
//                getString(R.string.video_permission_summary)
//            ),
//            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.UPSIDE_DOWN_CAKE) Triple(
//                Manifest.permission.READ_MEDIA_VISUAL_USER_SELECTED,
//                getString(R.string.video),
//                getString(R.string.video_permission_summary)
//            ) else null
        ) else listOfNotNull(
            Triple(
                Manifest.permission.READ_EXTERNAL_STORAGE,
                getString(R.string.read_storage),
                getString(R.string.audio_permission_summary)
            ),
            if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.Q) Triple(
                Manifest.permission.WRITE_EXTERNAL_STORAGE,
                getString(R.string.write_storage),
                getString(R.string.write_storage_permission_summary)
            ) else null
        )
        getPermissionsLauncher(perms, onGranted = {
            if (it == READ_MEDIA_AUDIO) lifecycleScope.launch {
                onGranted()
            }
        })
    }

    private fun ComponentActivity.getPermissionsLauncher(
        perms: List<Triple<String, String, String>>,
        onCancel: (String) -> Unit = {},
        onGranted: (String) -> Unit = {},
        onRequest: (String) -> Unit = {
            Intent(Settings.ACTION_APPLICATION_DETAILS_SETTINGS).apply {
                data = Uri.fromParts("package", packageName, null)
                startActivity(this)
            }
        }
    ) = run {
        val contract = ActivityResultContracts.RequestMultiplePermissions()
        val notGranted = perms.filterNot {
            ContextCompat.checkSelfPermission(this, it.first) == PackageManager.PERMISSION_GRANTED
        }
        val launcher = if (notGranted.isNotEmpty())
            registerActivityResultLauncher(contract) { result ->
                val map = perms.associateBy { it.first }
                result.forEach { (p, granted) ->
                    val perm = map[p]!!
                    if (granted) onGranted(p)
                    else MaterialAlertDialogBuilder(this)
                        .setTitle(getString(R.string.x_permission_required, perm.second))
                        .setMessage(perm.third)
                        .setPositiveButton(getString(R.string.okay)) { _, _ -> onRequest(p) }
                        .setNegativeButton(getString(R.string.cancel)) { _, _ ->
                            Toast.makeText(
                                this,
                                getString(R.string.x_was_not_granted, perm.second),
                                Toast.LENGTH_SHORT
                            ).show()
                            onCancel(p)
                        }.show()
                }
            }
        else {
            perms.forEach { onGranted(it.first) }
            null
        }
        launcher?.launch(perms.map { it.first }.toTypedArray())
    }

    fun <I, O> ComponentActivity.registerActivityResultLauncher(
        contract: ActivityResultContract<I, O>,
        block: (O) -> Unit
    ): ActivityResultLauncher<I> {
        val key = UUID.randomUUID().toString()
        var launcher: ActivityResultLauncher<I>? = null
        val callback = ActivityResultCallback<O> {
            block.invoke(it)
            launcher?.unregister()
        }

        lifecycle.addObserver(object : androidx.lifecycle.DefaultLifecycleObserver {
            override fun onDestroy(owner: androidx.lifecycle.LifecycleOwner) {
                launcher?.unregister()
            }
        })

        launcher = activityResultRegistry.register(key, contract, callback)
        return launcher
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\PrefsUtils.kt
================================================================================

package dev.brahmkshatriya.echo.utils


import android.content.Context
import android.net.Uri
import androidx.core.content.edit
import dev.brahmkshatriya.echo.extensions.ExtensionUtils.extensionPrefId
import dev.brahmkshatriya.echo.playback.listener.EffectsListener.Companion.CUSTOM_EFFECTS
import dev.brahmkshatriya.echo.playback.listener.EffectsListener.Companion.GLOBAL_FX
import dev.brahmkshatriya.echo.utils.ContextUtils.SETTINGS_NAME
import kotlinx.serialization.json.Json
import kotlinx.serialization.json.JsonArray
import kotlinx.serialization.json.JsonElement
import kotlinx.serialization.json.JsonNull
import kotlinx.serialization.json.JsonObject
import kotlinx.serialization.json.JsonPrimitive
import kotlinx.serialization.json.booleanOrNull
import kotlinx.serialization.json.contentOrNull
import kotlinx.serialization.json.floatOrNull
import kotlinx.serialization.json.intOrNull
import kotlinx.serialization.json.longOrNull
import java.io.BufferedReader
import java.io.InputStreamReader


private fun Map<String, Any?>.toJsonElementMap(): Map<String, JsonElement> {
    return this.mapValues { (_, value) ->
        when (value) {
            is Boolean -> JsonPrimitive(value)
            is Float -> JsonPrimitive(value)
            is Int -> JsonPrimitive(value)
            is Long -> JsonPrimitive(value)
            is String -> JsonPrimitive(value)
            is Set<*> -> JsonArray(value.filterIsInstance<String>().map { JsonPrimitive(it) })
            null -> JsonNull
            else -> throw IllegalArgumentException("Unsupported type for serialization: ${value::class.java}")
        }
    }
}


fun Context.exportSettings(uri: Uri) {
    val settingsPrefs = getSharedPreferences(SETTINGS_NAME, Context.MODE_PRIVATE)
    val globalFxPrefs = getSharedPreferences(GLOBAL_FX, Context.MODE_PRIVATE)

    val settingsJson = settingsPrefs.all.toJsonElementMap()
    val globalFxJson = globalFxPrefs.all.toJsonElementMap()
    val customFxJson = globalFxPrefs.getStringSet(CUSTOM_EFFECTS, emptySet())?.map { fxName ->
        fxName to getSharedPreferences("fx_$fxName", Context.MODE_PRIVATE).all.toJsonElementMap()
    }

    val allPrefsJson = mutableMapOf(SETTINGS_NAME to settingsJson, GLOBAL_FX to globalFxJson)
    customFxJson?.forEach { (name, map) -> allPrefsJson["fx_$name"] = map }

    contentResolver.openOutputStream(uri, "w")?.use { out ->
        out.write(Json.encodeToString(allPrefsJson).toByteArray())
    }
}


fun Context.importSettings(uri: Uri) {
    val jsonString = contentResolver.openInputStream(uri)?.use { inputStream ->
        BufferedReader(InputStreamReader(inputStream)).readText()
    } ?: return

    val allPrefsJson = Json.decodeFromString<Map<String, JsonObject>>(jsonString)

    allPrefsJson.forEach { (prefName, prefMap) ->
        getSharedPreferences(prefName, Context.MODE_PRIVATE).edit {
            prefMap.forEach { (key, value) ->
                when (value) {
                    is JsonPrimitive if value.booleanOrNull != null -> putBoolean(
                        key,
                        value.booleanOrNull!!
                    )

                    is JsonPrimitive if value.intOrNull != null -> putInt(key, value.intOrNull!!)
                    is JsonPrimitive if value.longOrNull != null -> putLong(key, value.longOrNull!!)
                    is JsonPrimitive if value.floatOrNull != null -> putFloat(
                        key,
                        value.floatOrNull!!
                    )

                    is JsonPrimitive if value.isString -> putString(key, value.content)
                    is JsonArray -> putStringSet(
                        key,
                        value.mapNotNull { (it as? JsonPrimitive)?.contentOrNull }.toSet()
                    )

                    is JsonNull -> remove(key)
                    else -> throw IllegalArgumentException("Unsupported type for deserialization: ${value::class.java}")
                }
            }
        }
    }
}


fun Context.exportExtensionSettings(extensionType: String, extensionId: String, uri: Uri) {
    val prefName = extensionPrefId(extensionType, extensionId)
    val settingsPrefs = getSharedPreferences(prefName, Context.MODE_PRIVATE)
    val settingsJson = settingsPrefs.all.toJsonElementMap()

    contentResolver.openOutputStream(uri, "w")?.use { out ->
        out.write(Json.encodeToString(settingsJson).toByteArray())
    }
}


fun Context.importExtensionSettings(extensionType: String, extensionId: String, uri: Uri) {
    val jsonString = contentResolver.openInputStream(uri)?.use { inputStream ->
        BufferedReader(InputStreamReader(inputStream)).readText()
    } ?: return

    val settingsJson = Json.decodeFromString<Map<String, JsonElement>>(jsonString)
    val prefName = extensionPrefId(extensionType, extensionId)

    getSharedPreferences(prefName, Context.MODE_PRIVATE).edit {
        settingsJson.forEach { (key, value) ->
            when (value) {
                is JsonPrimitive if value.booleanOrNull != null -> putBoolean(
                    key,
                    value.booleanOrNull!!
                )

                is JsonPrimitive if value.intOrNull != null -> putInt(key, value.intOrNull!!)
                is JsonPrimitive if value.longOrNull != null -> putLong(key, value.longOrNull!!)
                is JsonPrimitive if value.floatOrNull != null -> putFloat(
                    key,
                    value.floatOrNull!!
                )

                is JsonPrimitive if value.isString -> putString(key, value.content)
                is JsonArray -> putStringSet(
                    key,
                    value.mapNotNull { (it as? JsonPrimitive)?.contentOrNull }.toSet()
                )

                is JsonNull -> remove(key)
                else -> throw IllegalArgumentException("Unsupported type for deserialization: ${value::class.java}")
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\Serializer.kt
================================================================================

package dev.brahmkshatriya.echo.utils

import android.os.Build
import android.os.Bundle
import android.os.Parcelable
import kotlinx.serialization.json.Json

object Serializer {
    val json = Json {
        ignoreUnknownKeys = true
    }

    inline fun <reified T> String.toData() = runCatching {
        json.decodeFromString<T>(this)
    }.recoverCatching {
        throw DecodingException(this, it)
    }

    inline fun <reified T> T.toJson() = json.encodeToString(this)

    inline fun <reified T> Bundle.putSerialized(key: String, value: T) {
        putString(key, value.toJson())
    }

    inline fun <reified T> Bundle.getSerialized(key: String): Result<T>? {
        return getString(key)?.toData<T>()
    }

    @Suppress("DEPRECATION")
    inline fun <reified T : Parcelable> Bundle.getParcel(key: String?) =
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU)
            getParcelable(key, T::class.java)
        else getParcelable(key)

    val Throwable.rootCause: Throwable
        get() = generateSequence(this) { it.cause }.last()

    data class DecodingException(val json: String, val error: Throwable) : Exception(error)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ShaUtils.kt
================================================================================

package dev.brahmkshatriya.echo.utils

import java.io.File
import java.security.MessageDigest

object ShaUtils {

    fun getSha256(file: File): String {
        val digest = MessageDigest.getInstance("SHA-256")
        file.inputStream().use { inputStream ->
            val buffer = ByteArray(8192)
            var bytesRead: Int
            while (inputStream.read(buffer).also { bytesRead = it } != -1) {
                digest.update(buffer, 0, bytesRead)
            }
        }
        return digest.digest().joinToString("") { "%02x".format(it) }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\image\BlurTransformation.kt
================================================================================

@file:Suppress("DEPRECATION")

package dev.brahmkshatriya.echo.utils.image

import android.content.Context
import android.graphics.Bitmap
import android.graphics.Paint
import android.renderscript.Allocation
import android.renderscript.Element
import android.renderscript.RenderScript
import android.renderscript.ScriptIntrinsicBlur
import androidx.core.graphics.applyCanvas
import androidx.core.graphics.createBitmap
import coil3.size.Size
import coil3.transform.Transformation

class BlurTransformation(
    private val context: Context,
    private val radius: Float = DEFAULT_RADIUS
) : Transformation() {

    override val cacheKey = "${BlurTransformation::class.simpleName}-$radius"

    override suspend fun transform(input: Bitmap, size: Size) =
        input.blurred(context, radius)

    companion object {
        private const val DEFAULT_RADIUS = 20f
        private const val MAX_WIDTH = 256
        fun Bitmap.blurred(
            context: Context,
            radius: Float = DEFAULT_RADIUS
        ): Bitmap {
            require(radius in 0.0..25.0) { "radius must be in [0, 25]." }

            val paint = Paint(Paint.ANTI_ALIAS_FLAG or Paint.FILTER_BITMAP_FLAG)
            val scale = width.toFloat() / MAX_WIDTH
            val scaledHeight = (height / scale).toInt()
            val output =
                createBitmap(MAX_WIDTH, scaledHeight, config ?: Bitmap.Config.ARGB_8888)
            output.applyCanvas {
                scale(1 / scale, 1 / scale)
                drawBitmap(this@blurred, 0f, 0f, paint)
            }

            var script: RenderScript? = null
            var tmpInt: Allocation? = null
            var tmpOut: Allocation? = null
            var blur: ScriptIntrinsicBlur? = null
            try {
                script = RenderScript.create(context)
                tmpInt = Allocation.createFromBitmap(
                    script,
                    output,
                    Allocation.MipmapControl.MIPMAP_NONE,
                    Allocation.USAGE_SCRIPT
                )
                tmpOut = Allocation.createTyped(script, tmpInt.type)
                blur = ScriptIntrinsicBlur.create(script, Element.U8_4(script))
                blur.setRadius(radius)
                blur.setInput(tmpInt)
                blur.forEach(tmpOut)
                tmpOut.copyTo(output)
            } finally {
                script?.destroy()
                tmpInt?.destroy()
                tmpOut?.destroy()
                blur?.destroy()
            }

            return output
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\image\ImageUtils.kt
================================================================================

package dev.brahmkshatriya.echo.utils.image

import android.content.Context
import android.graphics.drawable.Drawable
import android.view.View
import android.widget.ImageView
import androidx.core.graphics.drawable.toDrawable
import androidx.core.graphics.toColorInt
import coil3.Image
import coil3.asDrawable
import coil3.imageLoader
import coil3.load
import coil3.network.NetworkHeaders
import coil3.network.httpHeaders
import coil3.request.ImageRequest
import coil3.request.error
import coil3.request.placeholder
import coil3.request.target
import coil3.request.transformations
import coil3.transform.CircleCropTransformation
import coil3.transform.Transformation
import dev.brahmkshatriya.echo.common.models.ImageHolder

object ImageUtils {

    private fun <T> tryWith(print: Boolean = false, block: () -> T): T? {
        return try {
            block()
        } catch (e: Throwable) {
            if (print) e.printStackTrace()
            null
        }
    }

    private suspend fun <T> tryWithSuspend(print: Boolean = true, block: suspend () -> T): T? {
        return try {
            block()
        } catch (e: Throwable) {
            if (print) e.printStackTrace()
            null
        }
    }

    private fun View.enqueue(builder: ImageRequest.Builder) =
        context.imageLoader.enqueue(builder.build())

    fun ImageHolder?.loadInto(
        imageView: ImageView, placeholder: Int? = null, errorDrawable: Int? = null
    ) = tryWith {
        val request = createRequest(imageView.context, placeholder, errorDrawable)
        request.target(imageView)
        imageView.enqueue(request)
    }

    fun ImageHolder.getCachedDrawable(context: Context): Drawable? {
        val key = diskId ?: return null
        return context.imageLoader.diskCache?.openSnapshot(key)?.use {
            Drawable.createFromPath(it.data.toFile().absolutePath)
        }
    }

    fun <T : View> ImageHolder?.loadWithThumb(
        view: T, thumbnail: Drawable? = null,
        error: Int? = null, onDrawable: T.(Drawable?) -> Unit
    ) = tryWith(true) {
        tryWith(false) { onDrawable(view, thumbnail) }
        val request = createRequest(view.context, null, error)
        fun setDrawable(image: Image?) {
            val drawable = image?.asDrawable(view.resources)
            tryWith(false) { onDrawable(view, drawable) }
        }
        request.target({}, ::setDrawable, ::setDrawable)
        view.enqueue(request)
    }

    private val circleCrop = CircleCropTransformation()
    private val squareCrop = SquareCropTransformation()
    fun <T : View> ImageHolder?.loadAsCircle(
        view: T,
        placeholder: Int? = null,
        error: Int? = null,
        onDrawable: (Drawable?) -> Unit
    ) = tryWith {
        val request = createRequest(view.context, placeholder, error, circleCrop)
        fun setDrawable(image: Image?) {
            val drawable = image?.asDrawable(view.resources)
            tryWith(false) { onDrawable(drawable) }
        }
        request.target(::setDrawable, ::setDrawable, ::setDrawable)
        view.enqueue(request)
    }

    suspend fun ImageHolder?.loadDrawable(
        context: Context
    ) = tryWithSuspend {
        val request = createRequest(context, null, null)
        context.imageLoader.execute(request.build()).image?.asDrawable(context.resources)
    }

    suspend fun ImageHolder?.loadAsCircleDrawable(
        context: Context
    ) = tryWithSuspend {
        val request = createRequest(context, null, null, circleCrop)
        context.imageLoader.execute(request.build()).image?.asDrawable(context.resources)
    }

    fun ImageView.loadBlurred(drawable: Drawable?, radius: Float) = tryWith {
        if (drawable == null) setImageDrawable(null)
        load(drawable) {
            transformations(BlurTransformation(context, radius))
        }
    }

    private val ImageHolder.diskId
        get() = when (this) {
            is ImageHolder.NetworkRequestImageHolder -> request.toString().hashCode().toString()
            else -> null
        }

    private fun createRequest(
        imageHolder: ImageHolder,
        builder: ImageRequest.Builder,
    ) = imageHolder.run {
        builder.diskCacheKey(diskId)
        when (this) {
            is ImageHolder.ResourceUriImageHolder -> builder.data(uri)
            is ImageHolder.NetworkRequestImageHolder -> {
                val headerBuilder = NetworkHeaders.Builder()
                request.headers.forEach { (key, value) ->
                    headerBuilder[key] = value
                }
                builder.httpHeaders(headerBuilder.build())
                builder.data(request.url)
            }

            is ImageHolder.ResourceIdImageHolder -> builder.data(resId)
            is ImageHolder.HexColorImageHolder -> builder.data(hex.toColorInt().toDrawable())
        }
    }

    private fun ImageHolder?.createRequest(
        context: Context,
        placeholder: Int?,
        errorDrawable: Int?,
        vararg transformations: Transformation
    ): ImageRequest.Builder {
        val builder = ImageRequest.Builder(context)
        var error = errorDrawable
        if (error == null) error = placeholder

        if (this == null) {
            if (error != null) builder.data(error)
            return builder
        }
        createRequest(this, builder)
        placeholder?.let { builder.placeholder(it) }
        error?.let { builder.error(it) }
        val list = if (crop) listOf(squareCrop, *transformations) else transformations.toList()
        if (list.isNotEmpty()) builder.transformations(list)
        return builder
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\image\SquareCropTransformation.kt
================================================================================

package dev.brahmkshatriya.echo.utils.image

import android.graphics.Bitmap
import coil3.size.Size
import coil3.transform.Transformation

class SquareCropTransformation : Transformation() {
    val version = 1
    override val cacheKey = "${javaClass.simpleName}.$version"
    override suspend fun transform(input: Bitmap, size: Size): Bitmap {
        val max = input.width.coerceAtMost(input.height)
        val x = (input.width - max) / 2
        val y = (input.height - max) / 2
        return Bitmap.createBitmap(input, x, y, max, max)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\AnimationUtils.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui

import android.animation.ValueAnimator
import android.content.Context
import android.content.Context.MODE_PRIVATE
import android.view.View
import android.view.ViewGroup
import android.view.ViewPropertyAnimator
import android.view.animation.AlphaAnimation
import android.view.animation.Animation
import android.view.animation.AnimationSet
import android.view.animation.Interpolator
import android.view.animation.RotateAnimation
import android.view.animation.ScaleAnimation
import android.view.animation.TranslateAnimation
import androidx.core.animation.doOnEnd
import androidx.core.view.doOnLayout
import androidx.core.view.doOnPreDraw
import androidx.core.view.forEach
import androidx.core.view.forEachIndexed
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.interpolator.view.animation.FastOutSlowInInterpolator
import com.google.android.material.color.MaterialColors
import com.google.android.material.motion.MotionUtils
import com.google.android.material.navigation.NavigationBarView
import com.google.android.material.transition.MaterialSharedAxis
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.utils.ContextUtils.SETTINGS_NAME
import kotlin.math.absoluteValue
import kotlin.math.sign

object AnimationUtils {

    private fun startAnimation(
        view: View, animation: ViewPropertyAnimator, durationMultiplier: Float = 1f
    ) = view.run {
        clearAnimation()
        val interpolator = getInterpolator(context)
        val duration = animationDuration * durationMultiplier
        animation.setInterpolator(interpolator).setDuration(duration.toLong()).start()
    }

    private fun getInterpolator(context: Context) = MotionUtils.resolveThemeInterpolator(
        context, com.google.android.material.R.attr.motionEasingStandardInterpolator,
        FastOutSlowInInterpolator()
    )

    fun View.animateMarginTop(hide: Boolean, onEnd: (() -> Unit)? = null) {
        if (!animations) {
            isVisible = hide
            return
        }
        isVisible = true
        val fromMargin = (layoutParams as ViewGroup.MarginLayoutParams).topMargin
        val toMargin = if (hide) 0 else -height
        val fromAlpha = alpha
        val toAlpha = if (hide) 1f else 0f

        val animator = ValueAnimator.ofFloat(0f, 1f)
        animator.addUpdateListener { valueAnimator ->
            val fraction = valueAnimator.animatedFraction
            val params = layoutParams as ViewGroup.MarginLayoutParams
            params.topMargin = (fromMargin + (toMargin - fromMargin) * fraction).toInt()
            layoutParams = params
            alpha = fromAlpha + (toAlpha - fromAlpha) * fraction
        }
        animator.duration = animationDuration
        animator.interpolator = getInterpolator(context)
        animator.doOnEnd {
            isVisible = hide
            onEnd?.invoke()
        }
        animator.start()
    }

    fun NavigationBarView.animateTranslation(
        isRail: Boolean,
        isMainFragment: Boolean,
        isPlayerCollapsed: Boolean,
        animate: Boolean = true,
        action: (Float) -> Unit
    ) = doOnLayout {
        val visible = isMainFragment && isPlayerCollapsed
        val value = if (visible) 0f
        else if (isRail) -width.toFloat() else height.toFloat()
        if (animations && animate) {
            var animation = if (isRail) animate().translationX(value)
            else animate().translationY(value)
            animation = if (visible) animation.withStartAction { action(value) }
            else animation.withEndAction { action(value) }
            startAnimation(this, animation)

            val delay = if (!visible) 0L else animationDurationSmall
            menu.forEachIndexed { index, item ->
                val view = findViewById<View>(item.itemId)
                val anim = view.animate().setStartDelay(index * delay)
                if (isRail) anim.translationX(value)
                else anim.translationY(value)
                startAnimation(view, anim, 0.5f)
            }
        } else {
            if (isRail) translationX = value
            else translationY = value

            menu.forEach {
                findViewById<View>(it.itemId).apply {
                    translationX = 0f
                    translationY = 0f
                }
            }
            action(value)
        }
    }

    fun View.animateVisibility(visible: Boolean, animate: Boolean = true) {
        if (animations && animate && isVisible != visible) {
            isVisible = true
            startAnimation(
                this,
                animate().alpha(if (visible) 1f else 0f).withEndAction {
                    alpha = if (visible) 1f else 0f
                    isVisible = visible
                }
            )
        } else {
            alpha = if (visible) 1f else 0f
            isVisible = visible
        }
    }

    fun animateTranslation(view: View, old: Int, newHeight: Int) = view.run {
        if (view.animations) {
            clearAnimation()
            view.translationY = newHeight.toFloat() - old
            startAnimation(this, animate().translationY(0f))
        }
    }

    private val View.animationDuration: Long
        get() = context.applicationContext.run {
            MotionUtils.resolveThemeDuration(
                this, com.google.android.material.R.attr.motionDurationMedium1, 350
            ).toLong()
        }

    private val View.animationDurationSmall: Long
        get() = context.applicationContext.run {
            MotionUtils.resolveThemeDuration(
                this, com.google.android.material.R.attr.motionDurationShort1, 100
            ).toLong()
        }

    const val ANIMATIONS_KEY = "animations"
    const val SCROLL_ANIMATIONS_KEY = "shared_element"

    private val View.animations
        get() = context.applicationContext.run {
            getSharedPreferences(SETTINGS_NAME, MODE_PRIVATE).getBoolean(ANIMATIONS_KEY, true)
        }

    private val View.scrollAnimations
        get() = context.applicationContext.run {
            getSharedPreferences(SETTINGS_NAME, MODE_PRIVATE)
                .getBoolean(SCROLL_ANIMATIONS_KEY, false)
        }

    fun Fragment.setupTransition(
        view: View, applyBackground: Boolean = true, axis: Int = MaterialSharedAxis.Z
    ) {
        if (applyBackground) {
            val color = MaterialColors.getColor(view, R.attr.echoBackground, 0)
            view.setBackgroundColor(color)
        }

        if (view.animations) {
//        val transitionName = arguments?.getString("transitionName")
//        if (transitionName != null) {
//            view.transitionName = transitionName
//            val transition = MaterialContainerTransform().apply {
//                drawingViewId = id
//                setAllContainerColors(color)
//                duration = view.animationDuration
//            }
//            sharedElementEnterTransition = transition
//        }
            (view as? ViewGroup)?.isTransitionGroup = true
            exitTransition = MaterialSharedAxis(axis, true)
            reenterTransition = MaterialSharedAxis(axis, false)
            enterTransition = MaterialSharedAxis(axis, true)
            returnTransition = MaterialSharedAxis(axis, false)

            postponeEnterTransition()
            view.doOnPreDraw { startPostponedEnterTransition() }
        }
    }

    fun View.animatedWithAlpha(delay: Long = 0, vararg anim: Animation) {
        if (!animations) return
        val set = AnimationSet(true)
        set.interpolator = getInterpolator(context) as Interpolator
        val alpha = AlphaAnimation(0.0f, 1.0f)
        alpha.duration = animationDurationSmall
        alpha.startOffset = delay
        set.addAnimation(alpha)
        anim.forEach { set.addAnimation(it) }
        startAnimation(set)
    }

    fun View.applyTranslationAndScaleAnimation(
        amount: Int, delay: Long = 0
    ) {
        if (!animations) return
        if (!scrollAnimations) return
        val multiplier = amount.sign
        val rotateAnimation = RotateAnimation(
            5f * multiplier, 0f,
            width.toFloat() / 2, height.toFloat() / 2
        )
        rotateAnimation.duration = animationDuration
        val translate = TranslateAnimation(
            Animation.RELATIVE_TO_SELF, multiplier * 0.5f,
            Animation.RELATIVE_TO_SELF, 0f,
            Animation.RELATIVE_TO_SELF, 0f,
            Animation.RELATIVE_TO_SELF, 0f,
        )
        translate.duration = animationDuration
        val from = 1f - 0.5f * multiplier.absoluteValue
        val scale = ScaleAnimation(
            from, 1f, from, 1f,
            Animation.RELATIVE_TO_SELF, 0.5f,
            Animation.RELATIVE_TO_SELF, 0.5f
        )
        scale.duration = animationDuration
        animatedWithAlpha(delay, rotateAnimation, translate, scale)
    }

    fun View.applyTranslationYAnimation(amount: Int, delay: Long = 0) {
        if (!animations) return
        if (!scrollAnimations) return
        val multiplier = amount.sign
        val translate = TranslateAnimation(
            Animation.RELATIVE_TO_SELF, 0f,
            Animation.RELATIVE_TO_SELF, 0f,
            Animation.RELATIVE_TO_SELF, multiplier * 1.5f,
            Animation.RELATIVE_TO_SELF, 0f,
        )
        translate.duration = animationDuration
        translate.startOffset = delay
        animatedWithAlpha(delay, translate)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\AutoClearedValue.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui

import androidx.fragment.app.Fragment
import androidx.lifecycle.DefaultLifecycleObserver
import androidx.lifecycle.LifecycleOwner
import kotlin.properties.ReadWriteProperty
import kotlin.reflect.KProperty

class AutoClearedValue<T : Any>(val fragment: Fragment) : ReadWriteProperty<Fragment, T> {
    private var _value: T? = null

    init {
        fragment.addOnDestroyObserver { _value = null }
    }

    override fun getValue(thisRef: Fragment, property: KProperty<*>): T {
        return _value ?: throw IllegalStateException(
            "should never call auto-cleared-value get when it might not be available"
        )
    }

    override fun setValue(thisRef: Fragment, property: KProperty<*>, value: T) {
        _value = value
    }

    class Nullable<T : Any>(val fragment: Fragment) : ReadWriteProperty<Fragment, T?> {
        private var _value: T? = null

        override fun getValue(thisRef: Fragment, property: KProperty<*>) = _value

        override fun setValue(thisRef: Fragment, property: KProperty<*>, value: T?) {
            _value = value
        }

    }

    companion object {
        fun Fragment.addOnDestroyObserver(onDestroy: () -> Unit) {
            lifecycle.addObserver(object : DefaultLifecycleObserver {
                override fun onCreate(owner: LifecycleOwner) {
                    viewLifecycleOwnerLiveData.observe(this@addOnDestroyObserver) {
                        it?.lifecycle?.addObserver(
                            object : DefaultLifecycleObserver {
                                override fun onDestroy(owner: LifecycleOwner) {
                                    onDestroy()
                                }
                            }
                        )
                    }
                }
            })
        }

        fun <T : Any> Fragment.autoCleared() = AutoClearedValue<T>(this)
        fun <T : Any> Fragment.autoClearedNullable() = Nullable<T>(this)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\CheckBoxListener.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui

import com.google.android.material.checkbox.MaterialCheckBox

class CheckBoxListener(private val block: (Boolean) -> Unit) :
    MaterialCheckBox.OnCheckedStateChangedListener {
    var enabled = true
    private var checked = false
    private fun check(isChecked: Boolean) {
        if (checked == isChecked) return
        block(isChecked)
    }

    override fun onCheckedStateChangedListener(checkBox: MaterialCheckBox, state: Int) {
        val isChecked = checkBox.isChecked
        if (enabled) check(isChecked)
        checked = isChecked
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\FastScrollerHelper.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui

import android.view.View
import androidx.core.widget.NestedScrollView
import androidx.recyclerview.widget.RecyclerView
import dev.brahmkshatriya.echo.utils.ContextUtils.getSettings
import dev.brahmkshatriya.echo.utils.ui.UiUtils.dpToPx
import me.zhanghai.android.fastscroll.FastScroller
import me.zhanghai.android.fastscroll.FastScrollerBuilder


object FastScrollerHelper {
    const val SCROLL_BAR = "scroll_bar"
    fun View.isScrollBarEnabled() = context.getSettings().getBoolean(SCROLL_BAR, false)

    fun applyTo(view: RecyclerView): FastScroller? {
        view.isVerticalScrollBarEnabled = false
        if (!view.isScrollBarEnabled()) return null
        return FastScrollerBuilder(view).apply {
            useMd2Style()
            val pad = 8.dpToPx(view.context)
            setPadding(pad, pad, pad, pad)
        }.build()
    }

    fun applyTo(view: NestedScrollView): FastScroller? {
        view.isVerticalScrollBarEnabled = false
        if (!view.isScrollBarEnabled()) return null
        return FastScrollerBuilder(view).apply {
            useMd2Style()
            val pad = 8.dpToPx(view.context)
            setPadding(pad, pad, pad, pad)
        }.build()
    }

}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\GestureListener.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui

import android.graphics.drawable.RippleDrawable
import android.view.GestureDetector
import android.view.MotionEvent
import android.view.View
import java.util.Timer
import kotlin.concurrent.schedule

interface GestureListener {
    val onClick: () -> Unit
    val onLongClick: (() -> Unit)?
    val onDoubleClick: (() -> Unit)?

    companion object {
        fun View.handleGestures(listener: GestureListener) {
            val gestureListener = object : GestureDetector.SimpleOnGestureListener() {
                private var timer: Timer? = null
                private var beingDoubleClicked = false
                override fun onSingleTapConfirmed(e: MotionEvent): Boolean {
                    if (!beingDoubleClicked) listener.onClick()
                    else return onDoubleTap(e)
                    return true
                }

                override fun onDoubleTap(e: MotionEvent): Boolean {
                    val onDoubleClick = listener.onDoubleClick ?: return false
                    isPressed = true
                    isPressed = false
                    (background as? RippleDrawable)?.setHotspot(e.x, e.y)
                    onDoubleClick.invoke()
                    beingDoubleClicked = true
                    timer?.cancel()
                    val timer = Timer()
                    this.timer = timer
                    timer.schedule(1000) { beingDoubleClicked = false }
                    return true
                }

                override fun onLongPress(e: MotionEvent) {
                    listener.onLongClick?.invoke()
                }
            }
            val detector = GestureDetector(context, gestureListener)
            setOnTouchListener { _, event ->
                detector.onTouchEvent(event)
                performClick()
                true
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\GradientDrawable.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui

import android.R.attr.colorPrimary
import android.graphics.BitmapShader
import android.graphics.Color
import android.graphics.ComposeShader
import android.graphics.LinearGradient
import android.graphics.Matrix
import android.graphics.PorterDuff
import android.graphics.Shader
import android.graphics.drawable.Drawable
import android.graphics.drawable.PaintDrawable
import android.graphics.drawable.ShapeDrawable
import android.graphics.drawable.shapes.RectShape
import android.view.View
import androidx.core.content.res.ResourcesCompat
import androidx.core.graphics.ColorUtils
import androidx.core.graphics.drawable.toBitmap
import androidx.core.graphics.drawable.toDrawable
import com.google.android.material.color.MaterialColors
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.utils.image.BlurTransformation.Companion.blurred
import dev.brahmkshatriya.echo.utils.ui.UiUtils.isRTL

object GradientDrawable {
    fun applyNav(
        view: View,
        isRail: Boolean,
        bottom: Int = 0,
        full: Boolean = true,
    ) {
        val color = MaterialColors.getColor(view, R.attr.navBackground)
        val isRTL = !view.context.isRTL()
        view.background = PaintDrawable().apply {
            setShape(RectShape())
            shaderFactory = object : ShapeDrawable.ShaderFactory() {
                override fun resize(width: Int, height: Int): Shader {
                    val centerY = if (isRail) 1f else (height * 0.5f + bottom) / (height + bottom)
                    val startX = if (isRail) if (isRTL) width.toFloat() else 0f else width / 2f
                    val startY = if (isRail) height / 2f else 0f
                    val endX = if (isRail) if (isRTL) 0f else width.toFloat() else width / 2f
                    val endY = if (isRail) height / 2f else height.toFloat()
                    return LinearGradient(
                        startX,
                        startY,
                        endX,
                        endY,
                        intArrayOf(if (full) color else Color.TRANSPARENT, color, color),
                        floatArrayOf(0f, centerY, 1f),
                        Shader.TileMode.CLAMP
                    )
                }
            }
        }
    }

    private const val RATIO = 0.33f
    private val maxColor = Color.argb(128, 0, 0, 0)
    fun createBlurred(view: View, toBlur: Drawable?): Drawable {
        val background = MaterialColors.getColor(view, R.attr.echoBackground)
        val primary = MaterialColors.getColor(view, colorPrimary)
        if (toBlur == null) return background.toDrawable()
        val noise = ResourcesCompat.getDrawable(
            view.resources, R.drawable.grain_noise, view.context.theme
        )!!.toBitmap()
        val bitmap = toBlur.run {
            toBitmap(
                intrinsicWidth.coerceAtLeast(1),
                intrinsicHeight.coerceAtLeast(1),
            )
        }.blurred(view.context)
        return PaintDrawable().apply {
            setShape(RectShape())
            paint.shader = null
            shaderFactory = object : ShapeDrawable.ShaderFactory() {
                override fun resize(width: Int, height: Int): Shader {
                    val bitmapShader =
                        BitmapShader(bitmap, Shader.TileMode.MIRROR, Shader.TileMode.MIRROR)
                    val cropHeight = (height * RATIO).toInt().coerceAtLeast(1)
                    val scale = maxOf(
                        width.toFloat() / bitmap.width,
                        cropHeight.toFloat() / bitmap.height
                    )
                    val matrix = Matrix().apply {
                        setScale(scale, scale)
                    }
                    bitmapShader.setLocalMatrix(matrix)

                    val primaryOverlay = LinearGradient(
                        0f, 0f, 0f, height.toFloat(),
                        intArrayOf(ColorUtils.setAlphaComponent(primary, 84), Color.TRANSPARENT),
                        floatArrayOf(0f, 1f),
                        Shader.TileMode.CLAMP
                    )
                    val blurredWithPrimary = ComposeShader(
                        bitmapShader,
                        primaryOverlay,
                        PorterDuff.Mode.SRC_OVER
                    )
                    val composed = ComposeShader(
                        blurredWithPrimary,
                        LinearGradient(
                            0f,
                            0f,
                            0f,
                            height.toFloat(),
                            intArrayOf(maxColor, Color.TRANSPARENT, Color.TRANSPARENT),
                            floatArrayOf(0f, RATIO, 1f),
                            Shader.TileMode.CLAMP
                        ),
                        PorterDuff.Mode.DST_IN
                    )
                    val withNoise = ComposeShader(
                        composed,
                        BitmapShader(noise, Shader.TileMode.REPEAT, Shader.TileMode.REPEAT),
                        PorterDuff.Mode.DST_IN
                    )
                    val backgroundShader = LinearGradient(
                        0f,
                        0f,
                        0f,
                        height.toFloat(),
                        intArrayOf(background, background),
                        null,
                        Shader.TileMode.CLAMP
                    )
                    return ComposeShader(
                        backgroundShader,
                        withNoise,
                        PorterDuff.Mode.SRC_OVER
                    )
                }
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\RulerAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui

import android.annotation.SuppressLint
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.view.HapticFeedbackConstantsCompat
import androidx.core.view.doOnLayout
import androidx.core.view.marginLeft
import androidx.core.view.marginRight
import androidx.core.view.updateLayoutParams
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.PagerSnapHelper
import androidx.recyclerview.widget.RecyclerView
import com.google.android.material.R
import com.google.android.material.color.MaterialColors
import dev.brahmkshatriya.echo.databinding.ItemRulerBinding
import dev.brahmkshatriya.echo.databinding.ItemRulerEmptyBinding
import dev.brahmkshatriya.echo.utils.ui.UiUtils.dpToPx

class RulerAdapter<T>(
    private val listener: Listener<T>
) : RecyclerView.Adapter<RulerAdapter.ViewHolder>() {

    interface Listener<T> {
        fun intervalText(value: T): String
        fun onSelectItem(value: T)

        val selectedColor get() = androidx.appcompat.R.attr.colorPrimary
        val unselectedColor get() = R.attr.colorOnSurface
    }

    sealed class ViewHolder(root: View) : RecyclerView.ViewHolder(root) {
        open fun bind(position: Int) {}

        class Empty(
            parent: ViewGroup, binding: ItemRulerEmptyBinding = ItemRulerEmptyBinding.inflate(
                LayoutInflater.from(parent.context), parent, false
            )
        ) : ViewHolder(binding.root) {
            init {
                parent.doOnLayout {
                    binding.root.updateLayoutParams {
                        val itemWidth = 24.dpToPx(it.context)
                        width = (it.width - itemWidth) / 2
                    }
                }
            }
        }

        class Item<T>(
            parent: ViewGroup,
            private val getItem: (Int) -> Pair<T, Boolean>?,
            private val listener: Listener<T>,
            private val binding: ItemRulerBinding = ItemRulerBinding.inflate(
                LayoutInflater.from(parent.context), parent, false
            )
        ) : ViewHolder(binding.root) {
            override fun bind(position: Int) {
                val (value, showText) = getItem(position) ?: return
                binding.rulerText.text = if (showText) listener.intervalText(value) else ""
                unselect()
            }

            fun select() {
                binding.rulerCard.setCardBackgroundColor(
                    MaterialColors.getColor(itemView, listener.selectedColor, 0)
                )
            }

            fun unselect() {
                binding.rulerCard.setCardBackgroundColor(
                    MaterialColors.getColor(itemView, listener.unselectedColor, 0)
                )
            }
        }
    }

    override fun getItemViewType(position: Int) = when (position) {
        0, itemCount - 1 -> 0
        else -> 1
    }

    private var currentList = listOf<Pair<T, Boolean>?>(null, null)
    private fun getItem(position: Int): Pair<T, Boolean>? {
        return currentList.getOrNull(position)
    }

    override fun getItemCount() = currentList.size

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        return when (viewType) {
            0 -> ViewHolder.Empty(parent)
            else -> ViewHolder.Item(parent, ::getItem, listener)
        }
    }

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        holder.bind(position)
    }

    private var selectedIndex: Int = -1
    @SuppressLint("NotifyDataSetChanged")
    fun submitList(list: List<Pair<T, Boolean>>, selected: T) {
        currentList = buildList {
            add(null)
            addAll(list)
            add(null)
        }
        val index = list.indexOfFirst { it.first == selected }
        selectedIndex = index + 1
        notifyDataSetChanged()
    }

    private var recyclerView: RecyclerView? = null
    private var selectedVH: ViewHolder.Item<*>? = null
    private fun select() {
        val (vh, newIndex) = getMiddleItem() ?: return
        if (vh == selectedVH) return
        selectedIndex = newIndex
        selectedVH?.unselect()
        vh.select()
        selectedVH = vh
        vh.itemView.run {
            isHapticFeedbackEnabled = true
            performHapticFeedback(HapticFeedbackConstantsCompat.CLOCK_TICK)
        }
        listener.onSelectItem(getItem(newIndex)!!.first)
    }

    private val recyclerListener = object : RecyclerView.OnScrollListener() {
        override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: Int) {
            select()
        }
    }

    private fun scrollToMiddle(after: () -> Unit = {}) {
        recyclerView?.run {
            val manager = layoutManager as LinearLayoutManager
            doOnLayout {
                val itemWidth = 24.dpToPx(context)
                val pad = (width - itemWidth) / 2
                manager.scrollToPositionWithOffset(selectedIndex, pad)
                post {
                    after()
                }
            }
        }
    }

    private val snapHelper = PagerSnapHelper()
    override fun onAttachedToRecyclerView(recyclerView: RecyclerView) {
        this.recyclerView = recyclerView
        snapHelper.attachToRecyclerView(recyclerView)
        scrollToMiddle {
            select()
            recyclerView.addOnScrollListener(recyclerListener)
        }
    }

    override fun onDetachedFromRecyclerView(recyclerView: RecyclerView) {
        this.recyclerView?.removeOnScrollListener(recyclerListener)
        snapHelper.attachToRecyclerView(null)
        this.recyclerView = null
    }

    private fun getMiddleItem() = recyclerView?.run {
        val middle = width * .5f
        val layoutManager = layoutManager as LinearLayoutManager

        val firstVisibleIndex = layoutManager.findFirstVisibleItemPosition()
        val lastVisibleIndex = layoutManager.findLastVisibleItemPosition()
        val visibleIndexes = firstVisibleIndex..lastVisibleIndex

        visibleIndexes.forEach {
            if (it == 0 || it == itemCount - 1) return@forEach
            val vh = findViewHolderForLayoutPosition(it) ?: return@forEach
            val location = IntArray(2)
            vh.itemView.getLocationOnScreen(location)
            val x = location[0]
            val halfWidth = vh.itemView.run { width + marginLeft + marginRight } * .5f
            val rightSide = x + halfWidth
            val leftSide = x - halfWidth
            val isInMiddle = middle in leftSide..rightSide
            if (isInMiddle) {
                return@run vh as ViewHolder.Item<*> to it
            }
        }
        null
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\SimpleItemSpan.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui

import android.content.Context
import android.text.TextPaint
import android.text.style.ClickableSpan
import android.view.View
import dev.brahmkshatriya.echo.R

class SimpleItemSpan(
    val context: Context,
    private val onItemClicked: () -> Unit
) : ClickableSpan() {

    override fun onClick(widget: View) {
        onItemClicked()
    }

    override fun updateDrawState(ds: TextPaint) {
        super.updateDrawState(ds)
        ds.isUnderlineText = false
        context.run {
            ds.color = resources.getColor(R.color.button_player, theme)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\UiUtils.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui

import android.app.Activity
import android.content.Context
import android.content.res.Configuration.ORIENTATION_LANDSCAPE
import android.content.res.Configuration.UI_MODE_NIGHT_MASK
import android.content.res.Configuration.UI_MODE_NIGHT_NO
import android.text.TextUtils
import android.view.View
import android.view.WindowManager
import android.widget.TextView
import androidx.core.view.WindowCompat
import androidx.core.view.WindowInsetsCompat
import androidx.core.view.WindowInsetsControllerCompat
import com.google.android.material.appbar.AppBarLayout
import com.google.android.material.bottomsheet.BottomSheetBehavior
import com.google.android.material.bottomsheet.BottomSheetDialog
import com.google.android.material.bottomsheet.BottomSheetDialogFragment
import dev.brahmkshatriya.echo.ui.common.UiViewModel.Companion.BACKGROUND_GRADIENT
import dev.brahmkshatriya.echo.utils.ContextUtils.getSettings
import java.util.Locale
import kotlin.math.max
import kotlin.math.roundToLong

object UiUtils {

    fun Activity.hideSystemUi(hide: Boolean) {
        val controller = WindowCompat.getInsetsController(window, window.decorView)
        controller.systemBarsBehavior =
            WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE

        if (hide) {
            controller.hide(WindowInsetsCompat.Type.systemBars())
            window.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON)
        } else {
            controller.show(WindowInsetsCompat.Type.systemBars())
            window.clearFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON)
        }
    }

    fun AppBarLayout.configureAppBar(block: (offset: Float) -> Unit) {
        val settings = context.getSettings()
        val isGradient = settings.getBoolean(BACKGROUND_GRADIENT, true)
        val extra = if (isGradient) -191 else 0
        addOnOffsetChangedListener { _, verticalOffset ->
            val offset = -verticalOffset / totalScrollRange.toFloat()
            background?.mutate()?.alpha = max(0, extra + (offset * 255).toInt())
            runCatching { block(offset) }
        }
    }

    fun Context.isRTL() =
        resources.configuration.layoutDirection == View.LAYOUT_DIRECTION_RTL

    fun Context.isLandscape() =
        resources.configuration.orientation == ORIENTATION_LANDSCAPE

    fun Context.isNightMode() =
        resources.configuration.uiMode and UI_MODE_NIGHT_MASK != UI_MODE_NIGHT_NO

    fun Int.dpToPx(context: Context) = (this * context.resources.displayMetrics.density).toInt()

    fun Context.resolveStyledDimension(attr: Int): Int {
        val typed = theme.obtainStyledAttributes(intArrayOf(attr))
        val itemWidth = typed.getDimensionPixelSize(typed.getIndex(0), 0)
        return itemWidth
    }

    fun Long.toTimeString(): String {
        val seconds = (this.toFloat() / 1000).roundToLong()
        val minutes = seconds / 60
        val hours = minutes / 60
        return if (hours > 0) {
            String.format(Locale.ENGLISH, "%02d:%02d:%02d", hours, minutes % 60, seconds % 60)
        } else {
            String.format(Locale.ENGLISH, "%02d:%02d", minutes, seconds % 60)
        }
    }

    fun TextView.marquee() {
        isSelected = true
        ellipsize = TextUtils.TruncateAt.MARQUEE
        maxLines = 1
        marqueeRepeatLimit = -1
        setHorizontallyScrolling(true)
    }

    fun BottomSheetDialogFragment.configureBottomBar(bar: View) {
        val view = requireView()
        val dialog = requireDialog() as BottomSheetDialog
        val behavior = dialog.behavior
        val barHeight = 72.dpToPx(requireContext())
        var peek = 0
        var toScroll = 0
        var offset = 0f

        val callback = object : BottomSheetBehavior.BottomSheetCallback() {
            override fun onStateChanged(p0: View, p1: Int) {}
            override fun onSlide(p0: View, p1: Float) {
                offset = p1.coerceAtLeast(0f)
                bar.y = peek + toScroll * offset
            }
        }
        view.addOnLayoutChangeListener { v, _, _, _, _, _, _, _, _ ->
            val screen = v.height - barHeight
            peek = (behavior.peekHeight - barHeight).coerceAtMost(screen)
            toScroll = screen - peek
            bar.y = peek + toScroll * offset
        }
        behavior.addBottomSheetCallback(callback)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\ViewPager2Utils.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui

import android.view.View
import androidx.recyclerview.widget.RecyclerView
import androidx.viewpager.widget.ViewPager
import androidx.viewpager2.widget.ViewPager2
import androidx.viewpager2.widget.ViewPager2.OnPageChangeCallback

object ViewPager2Utils {

    fun ViewPager2.supportBottomSheetBehavior() {
        val recycler = getChildAt(0) as RecyclerView
        recycler.run {
            isNestedScrollingEnabled = false
            overScrollMode = View.OVER_SCROLL_NEVER
        }
    }

    fun ViewPager2.registerOnUserPageChangeCallback(
        listener: (position: Int, userInitiated: Boolean) -> Unit
    ) {
        var previousState: Int = -1
        var userScrollChange = false
        registerOnPageChangeCallback(object : OnPageChangeCallback() {

            override fun onPageSelected(position: Int) {
                listener(position, userScrollChange)
            }

            override fun onPageScrollStateChanged(state: Int) {
                if (previousState == ViewPager.SCROLL_STATE_DRAGGING &&
                    state == ViewPager.SCROLL_STATE_SETTLING
                ) {
                    userScrollChange = true
                } else if (previousState == ViewPager.SCROLL_STATE_SETTLING &&
                    state == ViewPager.SCROLL_STATE_IDLE
                ) {
                    userScrollChange = false
                }
                previousState = state
            }
        })
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\prefs\ColorListPreference.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui.prefs

import android.annotation.SuppressLint
import android.content.SharedPreferences
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.content.edit
import androidx.core.view.isVisible
import androidx.fragment.app.Fragment
import androidx.preference.Preference
import androidx.preference.PreferenceViewHolder
import androidx.recyclerview.widget.RecyclerView
import com.google.android.material.card.MaterialCardView
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.databinding.ItemColorCardBinding

class ColorListPreference(val fragment: Fragment, var listener: Listener? = null) :
    Preference(fragment.requireContext()) {

    fun interface Listener {
        fun onColorSelected(color: Int)
    }

    private lateinit var colorCardAdapter: ColorCardAdapter
    private lateinit var sharedPreferences: SharedPreferences

    init {
        layoutResource = R.layout.preference_color_list
    }

    private var defaultValue: Int? = null
    override fun onSetInitialValue(defaultValue: Any?) {
        this.defaultValue = defaultValue as? Int
    }

    @SuppressLint("NotifyDataSetChanged")
    override fun onBindViewHolder(holder: PreferenceViewHolder) {
        super.onBindViewHolder(holder)
        val view: View = holder.itemView
        view.alpha = if (isEnabled) 1f else 0.66f

        sharedPreferences = preferenceManager.sharedPreferences!!
        val addColorCard: MaterialCardView = view.findViewById(R.id.addColor)
        val recentColorsRecyclerView: RecyclerView = view.findViewById(R.id.recentColors)

        colorCardAdapter = ColorCardAdapter(getSavedColors(), adapterListener)
        recentColorsRecyclerView.adapter = colorCardAdapter

        addColorCard.setOnClickListener {
            if (!isEnabled) return@setOnClickListener
            ColorPickerDialog().show(fragment.parentFragmentManager, null)
        }

        fragment.parentFragmentManager
            .setFragmentResultListener("colorPicker", fragment) { _, bundle ->
                val color = bundle.getInt("color").takeIf { it != -1 }
                    ?: return@setFragmentResultListener
                addColor(color)
                colorCardAdapter.colors = getSavedColors()
                colorCardAdapter.notifyDataSetChanged()
            }
    }

    private val adapterListener = object : ColorCardAdapter.Listener {
        @SuppressLint("NotifyDataSetChanged")
        override fun onColorSelected(color: Int) {
            if (!isEnabled) return
            saveSelectedColor(color)
            colorCardAdapter.colors = getSavedColors()
            colorCardAdapter.notifyDataSetChanged()
            listener?.onColorSelected(color)
        }

        @SuppressLint("NotifyDataSetChanged")
        override fun onColorRemoved(color: Int): Boolean {
            if (!isEnabled) return false
            removeColor(color)
            colorCardAdapter.colors = getSavedColors()
            colorCardAdapter.notifyDataSetChanged()
            return true
        }
    }

    class ColorCardAdapter(var colors: List<Pair<Boolean, Int>>, val listener: Listener) :
        RecyclerView.Adapter<ColorCardAdapter.ViewHolder>() {
        interface Listener {
            fun onColorSelected(color: Int)
            fun onColorRemoved(color: Int): Boolean
        }

        inner class ViewHolder(val binding: ItemColorCardBinding) :
            RecyclerView.ViewHolder(binding.root) {
            init {
                binding.root.setOnClickListener {
                    listener.onColorSelected(colors[bindingAdapterPosition].second)
                }
                binding.root.setOnLongClickListener {
                    listener.onColorRemoved(colors[bindingAdapterPosition].second)
                }
            }
        }

        override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
            val inflater = LayoutInflater.from(parent.context)
            val binding = ItemColorCardBinding.inflate(inflater, parent, false)
            return ViewHolder(binding)
        }

        override fun getItemCount() = colors.size

        override fun onBindViewHolder(holder: ViewHolder, position: Int) {
            val color = colors[position]
            holder.binding.root.setCardBackgroundColor(color.second)
            holder.binding.colorSelected.isVisible = color.first
        }

    }

    private fun getSelectedColor(): Int? {
        val color = sharedPreferences.getInt(key, defaultValue ?: -1)
        return color.takeIf { it != -1 }
    }

    private fun saveSelectedColor(color: Int?) {
        sharedPreferences.edit {
            putInt(key, color ?: -1)
        }
    }

    private fun getSavedColors(): List<Pair<Boolean, Int>> {
        val selectedColor = getSelectedColor()
        val colorString = sharedPreferences.getString("${key}_colors", "")
            ?.split(",").orEmpty()
            .map { it.toIntOrNull() } - selectedColor
        val colors = colorString.mapNotNull { it?.let { false to it } }
        return listOfNotNull(selectedColor?.let { true to it }) + colors
    }

    private fun List<Pair<Boolean, Int>>.inString() = joinToString(",") { it.second.toString() }

    private fun addColor(color: Int) {
        val colorList = getSavedColors().toMutableList()
        colorList.add(false to color)
        sharedPreferences.edit {
            putString("${key}_colors", colorList.inString())
        }
    }

    private fun removeColor(color: Int) {
        val colorList = getSavedColors().toMutableList()
        colorList.removeAll { it.second == color }
        sharedPreferences.edit {
            putString("${key}_colors", colorList.inString())
        }
    }

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\prefs\ColorPickerDialog.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui.prefs

import android.graphics.Color
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.fragment.app.DialogFragment
import com.madrapps.pikolo.listeners.OnColorSelectionListener
import dev.brahmkshatriya.echo.databinding.DialogColorPickerBinding
import dev.brahmkshatriya.echo.utils.ui.AutoClearedValue.Companion.autoCleared
import kotlin.random.Random

class ColorPickerDialog : DialogFragment() {

    var binding by autoCleared<DialogColorPickerBinding>()
    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
    ): View {
        binding = DialogColorPickerBinding.inflate(inflater, container, false)
        return binding.root
    }

    var currentColor: Int? = null
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        binding.colorPickerView.setColorSelectionListener(object : OnColorSelectionListener {
            override fun onColorSelected(color: Int) {
                currentColor = color
                binding.colorCard.setCardBackgroundColor(color)
            }

            override fun onColorSelectionEnd(color: Int) {}
            override fun onColorSelectionStart(color: Int) {}
        })
        binding.addColorButton.setOnClickListener { dismiss() }
        binding.randomColorButton.setOnClickListener { setColor(generateRandomColor()) }
        setColor(generateRandomColor())
    }

    private fun setColor(color: Int){
        currentColor = color
        binding.colorCard.setCardBackgroundColor(color)
        binding.colorPickerView.setColor(color)
    }

    private fun generateRandomColor(): Int {
        val red = Random.nextInt(256)
        val green = Random.nextInt(256)
        val blue = Random.nextInt(256)
        return Color.rgb(red, green, blue)
    }

    override fun onDestroy() {
        super.onDestroy()
        parentFragmentManager.setFragmentResult("colorPicker", Bundle().apply {
            putInt("color", currentColor!!)
        })
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\prefs\LoadingPreference.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui.prefs

import android.content.Context
import androidx.preference.Preference
import dev.brahmkshatriya.echo.R

class LoadingPreference(context: Context) : Preference(context) {
    init {
        layoutResource = R.layout.item_loading
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\prefs\LongClickPreference.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui.prefs

import android.content.Context
import androidx.preference.Preference
import androidx.preference.PreferenceViewHolder

open class LongClickPreference(context:Context) : Preference(context) {
    private var onLongClickListener: (() -> Unit)? = null

    fun setOnLongClickListener(listener: () -> Unit) {
        onLongClickListener = listener
    }
    override fun onBindViewHolder(holder: PreferenceViewHolder) {
        super.onBindViewHolder(holder)

        val listener = onLongClickListener ?: return
        holder.itemView.setOnLongClickListener {
            listener.invoke()
            true
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\prefs\MaterialListPreference.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui.prefs

import android.content.Context
import androidx.preference.ListPreference
import com.google.android.material.dialog.MaterialAlertDialogBuilder
import dev.brahmkshatriya.echo.R

class MaterialListPreference(context: Context) : ListPreference(context) {

    private var customSummary: CharSequence? = null

    override fun onSetInitialValue(defaultValue: Any?) {
        super.onSetInitialValue(defaultValue)
        customSummary = summary
        updateSummary()
    }

    override fun onClick() {
        MaterialAlertDialogBuilder(context)
            .setSingleChoiceItems(entries, entryValues.indexOf(value)) { dialog, index ->
                if (callChangeListener(entryValues[index].toString())) runCatching {
                    setValueIndex(index)
                    updateSummary()
                }
                dialog.dismiss()
            }
            .setNegativeButton(R.string.cancel) { dialog, _ -> dialog.dismiss() }.setTitle(title)
            .create()
            .show()
    }

    private fun updateSummary() {
        val value = context.getString(R.string.value)
        val entry = entry.takeIf { !it.isNullOrEmpty() } ?: context.getString(R.string.value_not_set)
        val sum = customSummary?.let { "\n\n$it" } ?: ""
        summary = "$value : $entry$sum"
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\prefs\MaterialMultipleChoicePreference.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui.prefs

import android.content.Context
import androidx.preference.MultiSelectListPreference
import com.google.android.material.dialog.MaterialAlertDialogBuilder
import dev.brahmkshatriya.echo.R

class MaterialMultipleChoicePreference(context: Context) : MultiSelectListPreference(context) {

    private var customSummary: CharSequence? = null

    override fun onSetInitialValue(defaultValue: Any?) {
        super.onSetInitialValue(defaultValue)
        customSummary = summary
        updateSummary()
    }

    override fun onClick() {
        val selectedIndices = BooleanArray(entries.size) { index ->
            values.contains(entryValues.getOrNull(index))
        }

        MaterialAlertDialogBuilder(context)
            .setMultiChoiceItems(entries, selectedIndices) { _, which, isChecked ->
                val value = entryValues.getOrNull(which)
                if (isChecked && value != null) {
                    values.add(value.toString())
                } else {
                    values.remove(value)
                }
            }
            .setPositiveButton(R.string.okay) { dialog, _ ->
                if (callChangeListener(values)) {
                    setValues(values.toSet())
                    updateSummary()
                }
                dialog.dismiss()
            }
            .setNegativeButton(R.string.cancel) { dialog, _ -> dialog.dismiss() }
            .setTitle(title)
            .create()
            .show()
    }

    private fun updateSummary() {
        val value = context.getString(R.string.value)
        val entry = values.takeIf { it.isNotEmpty() }?.joinToString(", ") { v ->
            val index = entryValues.indexOf(v)
            if (index >= 0) entries.getOrNull(index).toString() else v
        } ?: context.getString(R.string.value_not_set)
        val sum = customSummary?.let { "\n\n$it" } ?: ""
        summary = "$value : $entry$sum"
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\prefs\MaterialSliderPreference.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui.prefs

import android.app.AlertDialog
import android.content.Context
import android.widget.EditText
import androidx.preference.Preference
import androidx.preference.PreferenceViewHolder
import com.google.android.material.dialog.MaterialAlertDialogBuilder
import com.google.android.material.slider.Slider
import dev.brahmkshatriya.echo.R
import kotlin.math.max
import kotlin.math.min

class MaterialSliderPreference(
    context: Context,
    private val from: Int,
    private val to: Int,
    private val steps: Int? = null,
    private val allowOverride: Boolean = false
) : Preference(context) {
    init {
        layoutResource = R.layout.preference_slider
    }

    private var customSummary: CharSequence? = null
    private var defaultValue: Int? = null

    override fun onSetInitialValue(defaultValue: Any?) {
        customSummary = summary
        this.defaultValue = defaultValue as? Int
        updateSummary()
    }

    override fun onBindViewHolder(holder: PreferenceViewHolder) {
        super.onBindViewHolder(holder)
        val slider = holder.itemView.findViewById<Slider>(R.id.preferences_slider)
        val current = getPersistedInt(defaultValue ?: from)
        val min = if (allowOverride) min(from, current) else from
        slider.valueFrom = min.toFloat()
        val max = if (allowOverride) max(to, current) else to
        slider.valueTo = max.toFloat()
        slider.value = min(max(current, min), max).toFloat()
        slider.stepSize = steps?.toFloat() ?: 1f

        slider.addOnChangeListener { _, value, byUser ->
            persistInt(value.toInt())
            slider.post {
                runCatching {
                    updateSummary()
                    if (allowOverride && !dialogOpened && byUser && value == slider.valueTo)
                        showOverrideDialog(slider, value)
                }
            }
        }

        if (allowOverride) holder.itemView.setOnClickListener {
            showOverrideDialog(slider, slider.value)
        }
    }

    private var dialogOpened = false
    private fun showOverrideDialog(slider: Slider, value: Float) {
        dialogOpened = true
        val dialog = MaterialAlertDialogBuilder(context)
            .setView(R.layout.item_edit_text)
            .setPositiveButton(R.string.okay, null)
            .setNegativeButton(R.string.cancel, null)
            .setTitle(title)
            .create()

        dialog.setOnShowListener {
            val editText = dialog.findViewById<EditText>(R.id.edit_text)
            editText?.inputType = android.text.InputType.TYPE_CLASS_NUMBER
            editText?.setText(value.toInt().toString())
            editText?.hint = customSummary

            dialog.getButton(AlertDialog.BUTTON_POSITIVE).setOnClickListener {
                val newMaxValue = editText?.text?.toString()?.toIntOrNull()
                if (newMaxValue != null && (allowOverride || newMaxValue in from..to)) {
                    slider.valueTo = newMaxValue.toFloat()
                    slider.value = newMaxValue.toFloat()
                    dialog.dismiss()
                } else {
                    editText?.error = context.getString(R.string.error_x, if (!allowOverride) "$from - $to" else "")

                }
            }

            dialog.getButton(AlertDialog.BUTTON_NEGATIVE).setOnClickListener {
                dialog.dismiss()
            }
        }
        dialog.setOnDismissListener { dialogOpened = false }
        dialog.show()
    }

    private fun updateSummary() {
        val value = context.getString(R.string.value)
        val entry = getPersistedInt(defaultValue ?: 0)
        val sum = customSummary?.let { "\n\n$it" } ?: ""
        summary = "$value : $entry$sum".trimIndent()
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\prefs\MaterialTextInputPreference.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui.prefs

import android.content.Context
import android.widget.EditText
import androidx.appcompat.app.AlertDialog
import androidx.preference.EditTextPreference
import com.google.android.material.dialog.MaterialAlertDialogBuilder
import dev.brahmkshatriya.echo.R

class MaterialTextInputPreference(context: Context) : EditTextPreference(context) {

    private var customSummary: CharSequence? = null

    override fun onSetInitialValue(defaultValue: Any?) {
        super.onSetInitialValue(defaultValue)
        customSummary = summary
        updateSummary()
    }


    override fun onClick() {
        val dialog = MaterialAlertDialogBuilder(context)
            .setView(R.layout.item_edit_text)
            .setPositiveButton(R.string.okay, null)
            .setNegativeButton(R.string.cancel, null)
            .setTitle(title)
            .create()

        dialog.setOnShowListener {
            val editText = dialog.findViewById<EditText>(R.id.edit_text)
            editText?.setText(text)
            editText?.hint = customSummary

            dialog.getButton(AlertDialog.BUTTON_POSITIVE).setOnClickListener {
                val newText = editText?.text?.toString()
                if (callChangeListener(newText)) {
                    text = newText
                    updateSummary()
                    dialog.dismiss()
                }
            }

            dialog.getButton(AlertDialog.BUTTON_NEGATIVE).setOnClickListener {
                dialog.dismiss()
            }
        }

        dialog.show()
    }

    private fun updateSummary() {
        val value = context.getString(R.string.value)
        val entry = text.takeIf { !it.isNullOrEmpty() } ?: context.getString(R.string.value_not_set)
        val sum = customSummary?.let { "\n\n$it" } ?: ""
        summary = "$value : $entry$sum"
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\prefs\SwitchLongClickPreference.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui.prefs

import android.content.Context
import androidx.preference.PreferenceViewHolder
import androidx.preference.SwitchPreferenceCompat

class SwitchLongClickPreference(context: Context) : SwitchPreferenceCompat(context) {
    private var onLongClickListener: (() -> Unit)? = null

    fun setOnLongClickListener(listener: () -> Unit) {
        onLongClickListener = listener
    }

    override fun onBindViewHolder(holder: PreferenceViewHolder) {
        super.onBindViewHolder(holder)

        val listener = onLongClickListener ?: return
        holder.itemView.setOnLongClickListener {
            listener.invoke()
            true
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\prefs\TransitionPreference.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui.prefs

import android.content.Context
import androidx.preference.Preference
import androidx.preference.PreferenceViewHolder

class TransitionPreference(
    context: Context
) : Preference(context) {
    override fun onBindViewHolder(holder: PreferenceViewHolder) {
        super.onBindViewHolder(holder)
        holder.itemView.id = key.hashCode()
        holder.itemView.transitionName = key
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\scrolling\ScrollAnimListAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui.scrolling

import androidx.recyclerview.widget.DiffUtil
import androidx.recyclerview.widget.ListAdapter
import androidx.recyclerview.widget.RecyclerView
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.applyTranslationYAnimation

abstract class ScrollAnimListAdapter<T : Any, VH : ScrollAnimViewHolder>(
    diffCallback: DiffUtil.ItemCallback<T>
) : ListAdapter<T, VH>(diffCallback) {

    override fun onBindViewHolder(holder: VH, position: Int) {
        holder.itemView.applyTranslationYAnimation(scrollY)
    }

    var recyclerView: RecyclerView? = null
    override fun onAttachedToRecyclerView(recyclerView: RecyclerView) {
        this.recyclerView = recyclerView
        recyclerView.addOnScrollListener(scrollListener)
    }

    override fun onDetachedFromRecyclerView(recyclerView: RecyclerView) {
        recyclerView.removeOnScrollListener(scrollListener)
        this.recyclerView = null
    }

    var scrollY: Int = 0
    val scrollListener = object : RecyclerView.OnScrollListener() {
        override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: Int) {
            scrollY = dy
            onEachViewHolder { scrollAmount = dy }
        }
    }

    @Suppress("UNCHECKED_CAST")
    fun onEachViewHolder(action: VH.() -> Unit) {
        recyclerView?.let { rv ->
            for (i in 0 until rv.childCount) {
                val holder = rv.getChildViewHolder(rv.getChildAt(i)) as? VH
                if (holder?.bindingAdapter == this) holder.action()
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\scrolling\ScrollAnimLoadStateAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui.scrolling

import androidx.annotation.CallSuper
import androidx.paging.LoadState
import androidx.paging.LoadStateAdapter
import androidx.recyclerview.widget.RecyclerView
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.applyTranslationYAnimation

abstract class ScrollAnimLoadStateAdapter<T: ScrollAnimViewHolder> : LoadStateAdapter<T>() {

    @CallSuper
    override fun onBindViewHolder(holder: T, loadState: LoadState) {
        holder.itemView.applyTranslationYAnimation(scrollY)
    }

    var recyclerView: RecyclerView? = null
    override fun onAttachedToRecyclerView(recyclerView: RecyclerView) {
        this.recyclerView = recyclerView
        recyclerView.addOnScrollListener(scrollListener)
    }

    override fun onDetachedFromRecyclerView(recyclerView: RecyclerView) {
        recyclerView.removeOnScrollListener(scrollListener)
        this.recyclerView = null
    }

    var scrollY: Int = 0
    val scrollListener = object : RecyclerView.OnScrollListener() {
        override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: Int) {
            scrollY = dy
            onEachViewHolder { scrollAmount = dy }
        }
    }

    @Suppress("UNCHECKED_CAST")
    fun onEachViewHolder(action: T.() -> Unit) {
        recyclerView?.let { rv ->
            for (i in 0 until rv.childCount) {
                val holder = rv.getChildViewHolder(rv.getChildAt(i)) as? T
                if (holder?.bindingAdapter == this) holder.action()
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\scrolling\ScrollAnimPagingAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui.scrolling

import androidx.paging.PagingDataAdapter
import androidx.recyclerview.widget.DiffUtil
import androidx.recyclerview.widget.RecyclerView
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.applyTranslationYAnimation

abstract class ScrollAnimPagingAdapter<T : Any, VH : ScrollAnimViewHolder>(
    diffCallback: DiffUtil.ItemCallback<T>
) : PagingDataAdapter<T, VH>(diffCallback) {

    override fun onBindViewHolder(holder: VH, position: Int) {
        holder.itemView.applyTranslationYAnimation(scrollY)
    }

    var recyclerView: RecyclerView? = null
    override fun onAttachedToRecyclerView(recyclerView: RecyclerView) {
        this.recyclerView = recyclerView
        recyclerView.addOnScrollListener(scrollListener)
    }

    override fun onDetachedFromRecyclerView(recyclerView: RecyclerView) {
        recyclerView.removeOnScrollListener(scrollListener)
        this.recyclerView = null
    }

    var scrollY: Int = 0
    val scrollListener = object : RecyclerView.OnScrollListener() {
        override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: Int) {
            scrollY = dy
            onEachViewHolder { scrollAmount = dy }
        }
    }

    @Suppress("UNCHECKED_CAST")
    fun onEachViewHolder(action: VH.() -> Unit) {
        recyclerView?.let { rv ->
            for (i in 0 until rv.childCount) {
                val holder = rv.getChildViewHolder(rv.getChildAt(i)) as? VH
                if (holder?.bindingAdapter == this) holder.action()
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\scrolling\ScrollAnimRecyclerAdapter.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui.scrolling

import androidx.annotation.CallSuper
import androidx.recyclerview.widget.RecyclerView
import dev.brahmkshatriya.echo.utils.ui.AnimationUtils.applyTranslationYAnimation

abstract class ScrollAnimRecyclerAdapter<T: ScrollAnimViewHolder> : RecyclerView.Adapter<T>() {

    @CallSuper
    override fun onBindViewHolder(holder: T, position: Int) {
        holder.itemView.applyTranslationYAnimation(scrollY)
    }

    var recyclerView: RecyclerView? = null
    override fun onAttachedToRecyclerView(recyclerView: RecyclerView) {
        this.recyclerView = recyclerView
        recyclerView.addOnScrollListener(scrollListener)
    }

    override fun onDetachedFromRecyclerView(recyclerView: RecyclerView) {
        recyclerView.removeOnScrollListener(scrollListener)
        this.recyclerView = null
    }

    var scrollY: Int = 0
    val scrollListener = object : RecyclerView.OnScrollListener() {
        override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: Int) {
            scrollY = dy
            onEachViewHolder { scrollAmount = dy }
        }
    }

    @Suppress("UNCHECKED_CAST")
    fun onEachViewHolder(action: T.() -> Unit) {
        recyclerView?.let { rv ->
            for (i in 0 until rv.childCount) {
                val holder = rv.getChildViewHolder(rv.getChildAt(i)) as? T
                if (holder?.bindingAdapter == this) holder.action()
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\utils\ui\scrolling\ScrollAnimViewHolder.kt
================================================================================

package dev.brahmkshatriya.echo.utils.ui.scrolling

import android.view.View
import androidx.recyclerview.widget.RecyclerView

abstract class ScrollAnimViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {
    var scrollAmount: Int = 0
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\widget\BaseWidget.kt
================================================================================

package dev.brahmkshatriya.echo.widget

import android.app.PendingIntent
import android.appwidget.AppWidgetManager
import android.appwidget.AppWidgetProvider
import android.content.ComponentName
import android.content.Context
import android.content.Intent
import android.graphics.Bitmap
import android.os.Bundle
import android.widget.RemoteViews
import androidx.core.os.bundleOf
import androidx.media3.common.Player
import androidx.media3.session.MediaController
import dev.brahmkshatriya.echo.R
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.extensions.MediaState
import dev.brahmkshatriya.echo.playback.MediaItemUtils.state
import dev.brahmkshatriya.echo.playback.PlayerCommands.likeCommand
import dev.brahmkshatriya.echo.playback.PlayerCommands.repeatCommand
import dev.brahmkshatriya.echo.playback.PlayerCommands.repeatOffCommand
import dev.brahmkshatriya.echo.playback.PlayerCommands.repeatOneCommand
import dev.brahmkshatriya.echo.playback.PlayerCommands.resumeCommand
import dev.brahmkshatriya.echo.playback.PlayerCommands.unlikeCommand
import dev.brahmkshatriya.echo.playback.PlayerService.Companion.getPendingIntent
import dev.brahmkshatriya.echo.playback.ResumptionUtils.recoverIndex
import dev.brahmkshatriya.echo.playback.ResumptionUtils.recoverTracks
import org.koin.core.component.KoinComponent
import org.koin.core.component.inject

abstract class BaseWidget : AppWidgetProvider(), KoinComponent {
    abstract val clazz: Class<*>
    private val key by lazy { clazz.name }

    private val app by inject<App>()
    override fun onEnabled(context: Context) {
        println("Widget enabled $this")
        ControllerHelper.register(app, key) {
            updateWidgets(app.context)
        }
    }

    override fun onDisabled(context: Context) {
        println("Widget disabled $this")
        ControllerHelper.unregister(key)
    }

    override fun onUpdate(
        context: Context?, appWidgetManager: AppWidgetManager?, appWidgetIds: IntArray?,
    ) {
        println("Widget update ${appWidgetIds?.toList()} $this")
    }

    override fun onReceive(context: Context?, intent: Intent?) {
        ControllerHelper.register(app, key) {
            updateWidgets(app.context)
        }
        val controller = ControllerHelper.controller ?: return
        println("Controller is $controller")
        when (intent?.action) {
            ACTION_PLAY_PAUSE -> controller.run {
                prepare()
                playWhenReady = !playWhenReady
            }

            ACTION_PREVIOUS -> controller.seekToPrevious()
            ACTION_NEXT -> controller.seekToNext()
            ACTION_LIKE -> controller.sendCustomCommand(likeCommand, Bundle.EMPTY)
            ACTION_UNLIKE -> controller.sendCustomCommand(unlikeCommand, Bundle.EMPTY)
            ACTION_REPEAT -> controller.sendCustomCommand(repeatCommand, Bundle.EMPTY)
            ACTION_REPEAT_OFF -> controller.sendCustomCommand(repeatOffCommand, Bundle.EMPTY)
            ACTION_REPEAT_ONE -> controller.sendCustomCommand(repeatOneCommand, Bundle.EMPTY)
            ACTION_RESUME -> controller.run {
                sendCustomCommand(resumeCommand, bundleOf("cleared" to false))
                playWhenReady = true
            }

            else -> super.onReceive(context, intent)
        }
    }


    override fun onAppWidgetOptionsChanged(
        context: Context?,
        appWidgetManager: AppWidgetManager?,
        appWidgetId: Int,
        newOptions: Bundle?,
    ) {
        context ?: return
        appWidgetManager ?: return
        ControllerHelper.register(app, key) {
            updateWidgets(app.context)
        }
        val controller = ControllerHelper.controller
        val image = ControllerHelper.image
        val views = updatedViews(controller, image, context, appWidgetId)
        appWidgetManager.updateAppWidget(appWidgetId, views)
    }

    fun updateWidgets(context: Context) {
        val controller = ControllerHelper.controller
        val image = ControllerHelper.image
        val appWidgetManager = AppWidgetManager.getInstance(context)
        val appWidgetIds = appWidgetManager.getAppWidgetIds(
            ComponentName(context, clazz)
        )
        appWidgetIds.forEach { appWidgetId ->
            val views = updatedViews(controller, image, context, appWidgetId)
            appWidgetManager.updateAppWidget(appWidgetId, views)
        }
    }

    abstract fun updatedViews(
        controller: MediaController?, image: Bitmap?, context: Context, appWidgetId: Int,
    ): RemoteViews

    companion object {
        const val ACTION_PLAY_PAUSE = "dev.brahmkshatriya.echo.widget.PLAY_PAUSE"
        const val ACTION_PREVIOUS = "dev.brahmkshatriya.echo.widget.PREVIOUS"
        const val ACTION_NEXT = "dev.brahmkshatriya.echo.widget.NEXT"
        const val ACTION_LIKE = "dev.brahmkshatriya.echo.widget.LIKE"
        const val ACTION_UNLIKE = "dev.brahmkshatriya.echo.widget.UNLIKE"
        const val ACTION_REPEAT = "dev.brahmkshatriya.echo.widget.REPEAT"
        const val ACTION_REPEAT_OFF = "dev.brahmkshatriya.echo.widget.REPEAT_OFF"
        const val ACTION_REPEAT_ONE = "dev.brahmkshatriya.echo.widget.REPEAT_ONE"
        const val ACTION_RESUME = "dev.brahmkshatriya.echo.widget.RESUME"

        fun Context.createIntent(clazz: Class<*>, action: String) = PendingIntent.getBroadcast(
            this, 0, Intent(this, clazz).apply {
                this.action = action
            }, PendingIntent.FLAG_IMMUTABLE or PendingIntent.FLAG_UPDATE_CURRENT
        )!!

        fun updateView(
            clazz: Class<*>,
            controller: MediaController?,
            image: Bitmap?,
            context: Context,
            views: RemoteViews,
        ) {
            val current = controller?.currentMediaItem
            val item = current?.state ?: context.run {
                val list = recoverTracks().orEmpty()
                val index = recoverIndex() ?: 0
                list.getOrNull(index)?.first
            }
            val title = item?.item?.title
            val artist = item?.item?.artists?.takeIf { it.isNotEmpty() }
                ?.joinToString(", ") { it.name }
            views.setTextViewText(R.id.trackTitle, title ?: context.getString(R.string.so_empty))
            views.setTextViewText(
                R.id.trackArtist,
                artist ?: context.getString(R.string.unknown).takeIf { title != null }
            )
            val image = image?.run { copy(config ?: Bitmap.Config.ARGB_8888, false) }
            if (image == null) views.setImageViewResource(R.id.trackCover, R.drawable.art_music)
            else views.setImageViewBitmap(R.id.trackCover, image)

            views.setOnClickPendingIntent(android.R.id.background, getPendingIntent(context))

            val isPlaying = if (current != null) controller.playWhenReady else false
            views.setOnClickPendingIntent(
                R.id.playPauseButton, context.createIntent(
                    clazz,
                    if (current != null) {
                        if (isPlaying) ACTION_PLAY_PAUSE else ACTION_PLAY_PAUSE
                    } else ACTION_RESUME
                )
            )
            views.setFloat(R.id.playPauseButton, "setAlpha", if (item != null) 1f else 0.5f)

            views.setImageViewResource(
                R.id.playPauseButton,
                if (isPlaying) R.drawable.ic_pause_48dp else R.drawable.ic_play_48dp
            )

            views.setOnClickPendingIntent(
                R.id.nextButton, context.createIntent(clazz, ACTION_NEXT)
            )
            views.setFloat(
                R.id.nextButton,
                "setAlpha",
                if (controller?.hasNextMediaItem() == true) 1f else 0.5f
            )
            views.setOnClickPendingIntent(
                R.id.previousButton, context.createIntent(clazz, ACTION_PREVIOUS)
            )
            views.setFloat(
                R.id.previousButton,
                "setAlpha",
                if ((controller?.currentMediaItemIndex ?: -1) >= 0) 1f else 0.5f
            )

            val isLiked = (item as? MediaState.Loaded)?.isLiked ?: false
            views.setOnClickPendingIntent(
                R.id.likeButton,
                context.createIntent(clazz, if (isLiked) ACTION_UNLIKE else ACTION_LIKE)
            )
            views.setImageViewResource(
                R.id.likeButton,
                if (isLiked) R.drawable.ic_favorite_filled_20dp else R.drawable.ic_favorite_20dp
            )

            val repeatMode = controller?.repeatMode ?: 0
            views.setOnClickPendingIntent(
                R.id.repeatButton, context.createIntent(
                    clazz,
                    when (repeatMode) {
                        Player.REPEAT_MODE_OFF -> ACTION_REPEAT
                        Player.REPEAT_MODE_ALL -> ACTION_REPEAT_ONE
                        else -> ACTION_REPEAT_OFF
                    }
                )
            )

            views.setImageViewResource(
                R.id.repeatButton, when (repeatMode) {
                    Player.REPEAT_MODE_OFF -> R.drawable.ic_repeat_20dp
                    Player.REPEAT_MODE_ONE -> R.drawable.ic_repeat_one_20dp
                    else -> R.drawable.ic_repeat_on_20dp
                }
            )
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\widget\ControllerHelper.kt
================================================================================

package dev.brahmkshatriya.echo.widget

import android.graphics.Bitmap
import androidx.media3.session.MediaController
import dev.brahmkshatriya.echo.di.App
import dev.brahmkshatriya.echo.playback.PlayerService.Companion.getController

object ControllerHelper {

    var controller: MediaController? = null
    var callback: (() -> Unit)? = null
    var image: Bitmap? = null
    var listener: WidgetPlayerListener? = null

    val map = mutableMapOf<String, () -> Unit>()
    fun register(app: App, key: String, updateCallback: () -> Unit) {
        map[key] = updateCallback
        if (callback != null) return
        callback = getController(app.context) {
            controller = it
            val playerListener = WidgetPlayerListener { img ->
                image = img
                updateWidgets()
            }
            listener = playerListener
            it.addListener(playerListener)
            playerListener.controller = it
            updateWidgets()
        }
    }

    fun unregister(key: String) {
        map.remove(key)
        if (map.isNotEmpty()) return
        callback?.invoke()
        controller = null
        listener?.removed()
        listener = null
        image = null
    }

    fun updateWidgets() {
        map.values.forEach { it() }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\widget\WidgetCircle.kt
================================================================================

package dev.brahmkshatriya.echo.widget

import android.content.Context
import android.graphics.Bitmap
import android.widget.RemoteViews
import androidx.media3.session.MediaController
import dev.brahmkshatriya.echo.R

class WidgetCircle : BaseWidget() {
    override val clazz = this::class.java
    override fun updatedViews(
        controller: MediaController?, image: Bitmap?, context: Context, appWidgetId: Int
    ): RemoteViews {
        val packageName = context.packageName
        val view = RemoteViews(packageName, R.layout.widget_circle)
        updateView(clazz, controller, image, context, view)
        return view
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\widget\WidgetHorizontal.kt
================================================================================

package dev.brahmkshatriya.echo.widget

import android.content.Context
import android.graphics.Bitmap
import android.os.Build
import android.util.SizeF
import android.widget.RemoteViews
import androidx.media3.session.MediaController
import dev.brahmkshatriya.echo.R

class WidgetHorizontal : BaseWidget() {

    override val clazz: Class<*> = this::class.java
    override fun updatedViews(
        controller: MediaController?, image: Bitmap?, context: Context, appWidgetId: Int
    ): RemoteViews {
        val packageName = context.packageName
        val narrowShort = RemoteViews(packageName, R.layout.widget_horizontal_narrow_short)
        val narrowTall = RemoteViews(packageName, R.layout.widget_horizontal_narrow_tall)
        val wideShort = RemoteViews(packageName, R.layout.widget_horizontal_wide_short)
        val wideTall = RemoteViews(packageName, R.layout.widget_horizontal_wide_tall)

        val views = if (Build.VERSION.SDK_INT < Build.VERSION_CODES.S) {
            updateView(clazz, controller, image, context, narrowShort)
            narrowShort
        } else {
            val widgetLayout = mapOf(
                SizeF(0f, 0f) to narrowShort,
                SizeF(0f, 128f) to narrowTall,
                SizeF(360f, 0f) to wideShort,
                SizeF(360f, 128f) to wideTall,
            )
            widgetLayout.forEach { (_, u) ->
                updateView(clazz, controller, image, context, u)
            }
            RemoteViews(widgetLayout)
        }
        return views
    }

}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\widget\WidgetPlayerListener.kt
================================================================================

package dev.brahmkshatriya.echo.widget

import android.graphics.Bitmap
import android.os.Bundle
import androidx.media3.common.MediaItem
import androidx.media3.common.MediaMetadata
import androidx.media3.common.Player
import androidx.media3.common.Timeline
import androidx.media3.session.MediaController
import androidx.media3.session.SessionResult
import com.google.common.util.concurrent.ListenableFuture
import com.google.common.util.concurrent.MoreExecutors
import dev.brahmkshatriya.echo.playback.PlayerCommands.imageCommand
import dev.brahmkshatriya.echo.utils.Serializer.getParcel

class WidgetPlayerListener(
    private val update: (Bitmap?) -> Unit
) : Player.Listener {

    var controller: MediaController? = null
    private var result: ListenableFuture<SessionResult>? = null
    private var image: Bitmap? = null
    private fun getImage() {
        result?.cancel(true)
        val future = controller?.sendCustomCommand(imageCommand, Bundle.EMPTY)
        future?.addListener({
            val result = future.get()
            if (result?.resultCode == SessionResult.RESULT_SUCCESS) {
                image = result.extras.getParcel<Bitmap>("image")
                update(image)
            }
        }, MoreExecutors.directExecutor())
        result = future
    }

    fun removed() {
        result?.cancel(true)
        result = null
        controller?.removeListener(this)
        controller = null
    }

    override fun onMediaItemTransition(mediaItem: MediaItem?, reason: Int) {
        getImage()
    }

    override fun onMediaMetadataChanged(mediaMetadata: MediaMetadata) {
        getImage()
        update(image)
    }

    override fun onTimelineChanged(timeline: Timeline, reason: Int) {
        update(image)
    }

    override fun onPlaybackStateChanged(playbackState: Int) {
        update(image)
    }

    override fun onIsPlayingChanged(isPlaying: Boolean) {
        update(image)
    }

    override fun onIsLoadingChanged(isLoading: Boolean) {
        update(image)
    }

    override fun onRepeatModeChanged(repeatMode: Int) {
        update(image)
    }

    override fun onPositionDiscontinuity(
        oldPosition: Player.PositionInfo, newPosition: Player.PositionInfo, reason: Int
    ) {
        update(image)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\java\dev\brahmkshatriya\echo\widget\WidgetVertical.kt
================================================================================

package dev.brahmkshatriya.echo.widget

import android.content.Context
import android.graphics.Bitmap
import android.os.Build
import android.util.SizeF
import android.widget.RemoteViews
import androidx.media3.session.MediaController
import dev.brahmkshatriya.echo.R

class WidgetVertical : BaseWidget() {

    override val clazz: Class<*> = this::class.java
    override fun updatedViews(
        controller: MediaController?, image: Bitmap?, context: Context, appWidgetId: Int
    ): RemoteViews {
        val packageName = context.packageName
        val large = RemoteViews(packageName, R.layout.widget_vertical_large)
        val small = RemoteViews(packageName, R.layout.widget_vertical_small)

        val views = if (Build.VERSION.SDK_INT < Build.VERSION_CODES.S) {
            updateView(clazz, controller, image, context, small)
            small
        } else {
            val widgetLayout = mapOf(
                SizeF(0f, 0f) to small,
                SizeF(256f, 128f) to large,
            )
            widgetLayout.forEach { (_, u) ->
                updateView(clazz, controller, image, context, u)
            }
            RemoteViews(widgetLayout)
        }
        return views
    }

}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\resources.properties
================================================================================

unqualifiedResLocale=en

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\color\button_player_more.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:alpha="0.5" android:color="?colorSecondaryContainer" android:state_checked="true" android:state_enabled="true" />
    <item android:color="@android:color/transparent" />
</selector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\color\button_player_ripple.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:alpha="0.15" android:color="@color/amoled_fg" android:state_enabled="false" />
    <item android:alpha="0.33" android:color="@color/amoled_fg" />
</selector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\color\button_player.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:color="@color/amoled_fg" android:alpha="@dimen/material_emphasis_disabled"  android:state_enabled="false" />
    <item android:color="@color/amoled_fg" />
</selector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\color\nav_bar_icon.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:color="?navBarForeground" android:state_checked="true" />
    <item android:color="?colorControlNormal" />
</selector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\anim_bookmark.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<animated-selector
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/state_on"
        android:drawable="@drawable/ic_bookmark_filled"
        android:state_checked="true"/>

    <item android:id="@+id/state_off"
        android:drawable="@drawable/ic_bookmark_outline"
        android:state_checked="false"
        />
    <transition
        android:drawable="@drawable/ic_bookmark_anim"
        android:fromId="@+id/state_off"
        android:toId="@+id/state_on"
        />
</animated-selector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\anim_check_circle.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<animated-selector
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/state_on"
        android:drawable="@drawable/ic_check_circle_filled"
        android:state_checked="true"/>

    <item android:id="@+id/state_off"
        android:drawable="@drawable/ic_check_circle"
        android:state_checked="false"
        />
</animated-selector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\anim_heart_40dp.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<animated-selector
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/state_on"
        android:drawable="@drawable/ic_heart_filled_40dp"
        android:state_checked="true"/>

    <item android:id="@+id/state_off"
        android:drawable="@drawable/ic_heart_outline_40dp"
        android:state_checked="false"
        />
    <transition
        android:drawable="@drawable/ic_heart_filled_to_outline_40dp"
        android:fromId="@+id/state_on"
        android:toId="@+id/state_off"
        />
    <transition
        android:drawable="@drawable/ic_heart_outline_to_filled_40dp"
        android:fromId="@+id/state_off"
        android:toId="@+id/state_on"
        />
</animated-selector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\anim_hide.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<animated-selector
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/state_on"
        android:drawable="@drawable/ic_unhide"
        android:state_checked="true"/>

    <item android:id="@+id/state_off"
        android:drawable="@drawable/ic_hide"
        android:state_checked="false"
        />
</animated-selector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\anim_home.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<animated-selector
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/state_on"
        android:drawable="@drawable/ic_home_filled"
        android:state_checked="true"/>

    <item android:id="@+id/state_off"
        android:drawable="@drawable/ic_home_outline"
        android:state_checked="false"
        />
    <transition
        android:drawable="@drawable/ic_home_anim"
        android:fromId="@+id/state_off"
        android:toId="@+id/state_on"
        />
</animated-selector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\anim_now_playing.xml
================================================================================

<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="24dp"
            android:height="24dp"
            android:viewportWidth="24"
            android:viewportHeight="24">
            <group android:name="middle">
                <path
                    android:name="path_1"
                    android:pathData="M 12 20 C 11.47 20 10.961 19.789 10.586 19.414 C 10.211 19.039 10 18.53 10 18 L 10 6 C 10.002 5.471 10.214 4.965 10.588 4.592 C 10.963 4.219 11.47 4.009 11.999 4.008 C 12.527 4.008 13.035 4.217 13.41 4.59 C 13.599 4.772 13.749 4.992 13.851 5.234 C 13.952 5.477 14.003 5.737 14 6 L 14 18 C 14 18.53 13.789 19.039 13.414 19.414 C 13.039 19.789 12.53 20 12 20 Z"
                    android:fillColor="#000000"
                    android:strokeWidth="1"/>
            </group>
            <group
                android:name="first"
                android:pivotX="24"
                android:pivotY="24"
                android:translateX="-6">
                <path
                    android:name="path_2"
                    android:pathData="M 12 20 C 11.47 20 10.961 19.789 10.586 19.414 C 10.211 19.039 10 18.53 10 18 L 10 16 C 10.002 15.471 10.214 14.965 10.588 14.592 C 10.963 14.219 11.47 14.009 11.999 14.008 C 12.527 14.008 13.035 14.217 13.41 14.59 C 13.599 14.772 13.749 14.992 13.851 15.234 C 13.952 15.477 14.003 15.737 14 16 L 14 18 C 14 18.53 13.789 19.039 13.414 19.414 C 13.039 19.789 12.53 20 12 20 Z M 12 20 C 11.47 20 10.961 19.789 10.586 19.414 C 10.211 19.039 10 18.53 10 18 L 10 16 C 10.002 15.471 10.214 14.965 10.588 14.592 C 10.963 14.219 11.47 14.009 11.999 14.008 C 12.527 14.008 13.035 14.217 13.41 14.59 C 13.599 14.772 13.749 14.992 13.851 15.234 C 13.952 15.477 14.003 15.737 14 16 L 14 18 C 14 18.53 13.789 19.039 13.414 19.414 C 13.039 19.789 12.53 20 12 20 L 12 20"
                    android:fillColor="#000000"
                    android:strokeWidth="1"/>
            </group>
            <group
                android:name="last"
                android:pivotX="24"
                android:pivotY="24"
                android:translateX="6">
                <path
                    android:name="path_3"
                    android:pathData="M 12 20 C 11.47 20 10.961 19.789 10.586 19.414 C 10.211 19.039 10 18.53 10 18 L 10 16 C 10.002 15.471 10.214 14.965 10.588 14.592 C 10.963 14.219 11.47 14.009 11.999 14.008 C 12.527 14.008 13.035 14.217 13.41 14.59 C 13.599 14.772 13.749 14.992 13.851 15.234 C 13.952 15.477 14.003 15.737 14 16 L 14 18 C 14 18.53 13.789 19.039 13.414 19.414 C 13.039 19.789 12.53 20 12 20 Z M 12 20 C 11.47 20 10.961 19.789 10.586 19.414 C 10.211 19.039 10 18.53 10 18 L 10 16 C 10.002 15.471 10.214 14.965 10.588 14.592 C 10.963 14.219 11.47 14.009 11.999 14.008 C 12.527 14.008 13.035 14.217 13.41 14.59 C 13.599 14.772 13.749 14.992 13.851 15.234 C 13.952 15.477 14.003 15.737 14 16 L 14 18 C 14 18.53 13.789 19.039 13.414 19.414 C 13.039 19.789 12.53 20 12 20 L 12 20"
                    android:fillColor="#000000"
                    android:strokeWidth="1"/>
            </group>
        </vector>
    </aapt:attr>
    <target android:name="path_1">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:duration="400"
                    android:valueFrom="M 12 20 C 11.47 20 10.961 19.789 10.586 19.414 C 10.211 19.039 10 18.53 10 18 L 10 6 C 10.002 5.471 10.214 4.965 10.588 4.592 C 10.963 4.219 11.47 4.009 11.999 4.008 C 12.527 4.008 13.035 4.217 13.41 4.59 C 13.599 4.772 13.749 4.992 13.851 5.234 C 13.952 5.477 14.003 5.737 14 6 L 14 18 C 14 18.53 13.789 19.039 13.414 19.414 C 13.039 19.789 12.53 20 12 20 Z M 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 L 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 L 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 L 12 17.004"
                    android:valueTo="M 12 20 C 11.47 20 10.961 19.789 10.586 19.414 C 10.211 19.039 10 18.53 10 18 L 10 16 C 10.002 15.471 10.214 14.965 10.588 14.592 C 10.963 14.219 11.47 14.009 11.999 14.008 C 12.527 14.008 13.035 14.217 13.41 14.59 C 13.599 14.772 13.749 14.992 13.851 15.234 C 13.952 15.477 14.003 15.737 14 16 L 14 18 C 14 18.53 13.789 19.039 13.414 19.414 C 13.039 19.789 12.53 20 12 20 Z M 12 20 C 11.47 20 10.961 19.789 10.586 19.414 C 10.211 19.039 10 18.53 10 18 L 10 16 C 10.002 15.471 10.214 14.965 10.588 14.592 C 10.963 14.219 11.47 14.009 11.999 14.008 C 12.527 14.008 13.035 14.217 13.41 14.59 C 13.599 14.772 13.749 14.992 13.851 15.234 C 13.952 15.477 14.003 15.737 14 16 L 14 18 C 14 18.53 13.789 19.039 13.414 19.414 C 13.039 19.789 12.53 20 12 20 L 12 20"
                    android:valueType="pathType"
                    android:repeatMode="reverse"
                    android:repeatCount="infinite"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="path_2">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:duration="400"
                    android:repeatMode="reverse"
                    android:repeatCount="infinite"
                    android:valueFrom="M 12 20 C 11.47 20 10.961 19.789 10.586 19.414 C 10.211 19.039 10 18.53 10 18 L 10 16 C 10.002 15.471 10.214 14.965 10.588 14.592 C 10.963 14.219 11.47 14.009 11.999 14.008 C 12.527 14.008 13.035 14.217 13.41 14.59 C 13.599 14.772 13.749 14.992 13.851 15.234 C 13.952 15.477 14.003 15.737 14 16 L 14 18 C 14 18.53 13.789 19.039 13.414 19.414 C 13.039 19.789 12.53 20 12 20 Z M 12 20 C 11.47 20 10.961 19.789 10.586 19.414 C 10.211 19.039 10 18.53 10 18 L 10 16 C 10.002 15.471 10.214 14.965 10.588 14.592 C 10.963 14.219 11.47 14.009 11.999 14.008 C 12.527 14.008 13.035 14.217 13.41 14.59 C 13.599 14.772 13.749 14.992 13.851 15.234 C 13.952 15.477 14.003 15.737 14 16 L 14 18 C 14 18.53 13.789 19.039 13.414 19.414 C 13.039 19.789 12.53 20 12 20 L 12 20"
                    android:valueTo="M 12 20 C 11.47 20 10.961 19.789 10.586 19.414 C 10.211 19.039 10 18.53 10 18 L 10 6 C 10.002 5.471 10.214 4.965 10.588 4.592 C 10.963 4.219 11.47 4.009 11.999 4.008 C 12.527 4.008 13.035 4.217 13.41 4.59 C 13.599 4.772 13.749 4.992 13.851 5.234 C 13.952 5.477 14.003 5.737 14 6 L 14 18 C 14 18.53 13.789 19.039 13.414 19.414 C 13.039 19.789 12.53 20 12 20 Z M 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 L 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 L 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 L 12 17.004"
                    android:valueType="pathType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="path_3">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:duration="300"
                    android:repeatMode="reverse"
                    android:repeatCount="infinite"
                    android:valueFrom="M 12 20 C 11.47 20 10.961 19.789 10.586 19.414 C 10.211 19.039 10 18.53 10 18 L 10 16 C 10.002 15.471 10.214 14.965 10.588 14.592 C 10.963 14.219 11.47 14.009 11.999 14.008 C 12.527 14.008 13.035 14.217 13.41 14.59 C 13.599 14.772 13.749 14.992 13.851 15.234 C 13.952 15.477 14.003 15.737 14 16 L 14 18 C 14 18.53 13.789 19.039 13.414 19.414 C 13.039 19.789 12.53 20 12 20 Z M 14 18 C 14 18.53 13.789 19.039 13.414 19.414 C 13.039 19.789 12.53 20 12 20 L 12 20 C 11.47 20 10.961 19.789 10.586 19.414 C 10.211 19.039 10 18.53 10 18 L 10 16 C 10.002 15.471 10.214 14.965 10.588 14.592 C 10.963 14.219 11.47 14.009 11.999 14.008 C 12.527 14.008 13.035 14.217 13.41 14.59 C 13.599 14.772 13.749 14.992 13.851 15.234 C 13.952 15.477 14.003 15.737 14 16 L 14 18"
                    android:valueTo="M 12 20 C 11.47 20 10.961 19.789 10.586 19.414 C 10.211 19.039 10 18.53 10 18 L 10 6 C 10.002 5.471 10.214 4.965 10.588 4.592 C 10.963 4.219 11.47 4.009 11.999 4.008 C 12.527 4.008 13.035 4.217 13.41 4.59 C 13.599 4.772 13.749 4.992 13.851 5.234 C 13.952 5.477 14.003 5.737 14 6 L 14 18 C 14 18.53 13.789 19.039 13.414 19.414 C 13.039 19.789 12.53 20 12 20 Z M 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 L 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 L 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 C 12 17.004 12 17.004 12 17.004 L 12 17.004"
                    android:valueType="pathType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\anim_play_pause_48dp.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<animated-selector
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/state_on"
        android:drawable="@drawable/ic_pause_48dp"
        android:state_checked="true"/>

    <item android:id="@+id/state_off"
        android:drawable="@drawable/ic_play_48dp"
        android:state_checked="false"
        />

    <transition
        android:drawable="@drawable/ic_pause_to_play_48dp_anim"
        android:fromId="@+id/state_on"
        android:toId="@+id/state_off"
        />
    <transition
        android:drawable="@drawable/ic_play_to_pause_48dp_anim"
        android:fromId="@+id/state_off"
        android:toId="@+id/state_on"
        />
</animated-selector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\anim_play_pause.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<animated-selector
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/state_on"
        android:drawable="@drawable/ic_pause"
        android:state_checked="true"/>

    <item android:id="@+id/state_off"
        android:drawable="@drawable/ic_play"
        android:state_checked="false"
        />
    <transition
        android:drawable="@drawable/ic_pause_to_play_anim"
        android:fromId="@+id/state_on"
        android:toId="@+id/state_off"
        />
    <transition
        android:drawable="@drawable/ic_play_to_pause_anim"
        android:fromId="@+id/state_off"
        android:toId="@+id/state_on"
        />
</animated-selector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\anim_search.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<animated-selector
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/state_on"
        android:drawable="@drawable/ic_search_filled"
        android:state_checked="true"/>

    <item android:id="@+id/state_off"
        android:drawable="@drawable/ic_search_outline"
        android:state_checked="false"
        />
    <transition
        android:drawable="@drawable/ic_search_anim"
        android:fromId="@+id/state_off"
        android:toId="@+id/state_on"
        />
</animated-selector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\anim_shuffle.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<animated-selector
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/state_on"
        android:drawable="@drawable/ic_shuffle_on_40dp"
        android:state_checked="true"/>

    <item android:id="@+id/state_off"
        android:drawable="@drawable/ic_shuffle_40dp"
        android:state_checked="false"
        />
</animated-selector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\app_widget_gradient_background.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
        android:angle="90"
        android:endColor="#00000000"
        android:startColor="#000000"
        android:type="linear" />
</shape>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\app_widget_image_background.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <corners android:radius="28dp" />
    <solid android:color="?android:attr/colorBackground" />
</shape>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\app_widget_inner_view_background.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <corners android:radius="24dp" />
</shape>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\art_add_photo.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="48dp"
    android:height="48dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
    <group
        android:pivotX="480"
        android:pivotY="480"
        android:scaleX="0.5"
        android:scaleY="0.5">

        <path
            android:fillColor="#e3e3e3"
            android:pathData="M480,480ZM180,840q-24,0 -42,-18t-18,-42v-600q0,-24 18,-42t42,-18h335q12.75,0 21.38,8.68 8.62,8.67 8.62,21.5 0,12.82 -8.62,21.32 -8.63,8.5 -21.38,8.5L180,180v600h600v-335q0,-12.75 8.68,-21.38 8.67,-8.62 21.5,-8.62 12.82,0 21.32,8.62 8.5,8.63 8.5,21.38v335q0,24 -18,42t-42,18L180,840ZM240,678h480L576,486 449,653l-94,-124 -115,149ZM693,268h-58q-12.75,0 -21.37,-8.68 -8.63,-8.67 -8.63,-21.5 0,-12.82 8.63,-21.32 8.62,-8.5 21.37,-8.5h58v-58q0,-12.75 8.68,-21.38 8.67,-8.62 21.5,-8.62 12.82,0 21.32,8.62 8.5,8.63 8.5,21.38v58h57q12.75,0 21.38,8.68 8.62,8.67 8.62,21.5 0,12.82 -8.62,21.32 -8.63,8.5 -21.38,8.5h-57v57q0,12.75 -8.68,21.37 -8.67,8.63 -21.5,8.63 -12.82,0 -21.32,-8.63 -8.5,-8.62 -8.5,-21.37v-57Z" />
    </group>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\art_album.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="128dp"
    android:height="128dp"
    android:tint="?attr/colorControlNormal"
    android:viewportWidth="48"
    android:viewportHeight="48">
  <path
      android:fillColor="#FF000000"
      android:pathData="M24,28.7c1.3,0 2.4,-0.5 3.4,-1.4c0.9,-0.9 1.4,-2 1.4,-3.3c0,-1.3 -0.5,-2.5 -1.4,-3.4c-0.9,-0.9 -2.1,-1.4 -3.4,-1.4c-1.3,0 -2.4,0.5 -3.3,1.4c-0.9,0.9 -1.3,2.1 -1.3,3.4c0,1.3 0.5,2.4 1.4,3.3C21.6,28.2 22.7,28.7 24,28.7zM24,25.3c-0.4,0 -0.7,-0.1 -0.9,-0.4s-0.4,-0.5 -0.4,-0.9s0.1,-0.7 0.4,-0.9c0.2,-0.2 0.5,-0.4 0.9,-0.4s0.7,0.1 0.9,0.4c0.2,0.2 0.4,0.5 0.4,0.9s-0.1,0.7 -0.4,0.9C24.7,25.2 24.4,25.3 24,25.3zM24,36c-1.7,0 -3.2,-0.3 -4.7,-1c-1.5,-0.6 -2.7,-1.5 -3.8,-2.6c-1.1,-1.1 -1.9,-2.4 -2.6,-3.8s-1,-3 -1,-4.7c0,-1.7 0.3,-3.2 1,-4.7c0.6,-1.5 1.5,-2.7 2.6,-3.8c1.1,-1.1 2.4,-1.9 3.8,-2.6c1.4,-0.6 3,-0.9 4.6,-0.9c1.7,0 3.2,0.3 4.7,0.9c1.5,0.6 2.7,1.5 3.8,2.6c1.1,1.1 1.9,2.4 2.6,3.8s0.9,3 0.9,4.7c0,1.7 -0.3,3.2 -0.9,4.6c-0.6,1.4 -1.5,2.7 -2.6,3.8c-1.1,1.1 -2.4,2 -3.8,2.6C27.2,35.7 25.7,36 24,36zM24,34.6c2.9,0 5.4,-1 7.5,-3.1c2.1,-2.1 3.1,-4.6 3.1,-7.5c0,-2.9 -1,-5.4 -3.1,-7.5s-4.6,-3.1 -7.5,-3.1c-2.9,0 -5.4,1 -7.5,3.1c-2.1,2.1 -3.1,4.6 -3.1,7.5c0,2.9 1,5.4 3.1,7.5C18.6,33.6 21.1,34.6 24,34.6z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\art_artist.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="128dp"
    android:height="128dp"
    android:tint="?attr/colorControlNormal"
    android:viewportWidth="48"
    android:viewportHeight="48">
  <path
      android:fillColor="#FF000000"
      android:pathData="M31.2,33.4c-0.9,0 -1.6,-0.3 -2.1,-0.8c-0.5,-0.5 -0.8,-1.2 -0.8,-2c0,-0.8 0.3,-1.5 0.8,-2c0.5,-0.5 1.2,-0.8 2,-0.8c0.4,0 0.7,0.1 1,0.2c0.3,0.1 0.5,0.2 0.6,0.4v-6.3c0,-0.3 0.1,-0.6 0.3,-0.8c0.2,-0.2 0.5,-0.3 0.8,-0.3h1.7c0.3,0 0.5,0.1 0.7,0.3c0.2,0.2 0.3,0.5 0.3,0.7c0,0.3 -0.1,0.5 -0.3,0.7c-0.2,0.2 -0.4,0.3 -0.7,0.3H34v7.6c0,0.8 -0.3,1.5 -0.8,2.1C32.7,33.1 32,33.4 31.2,33.4zM12.5,32.3v-1.2c0,-0.6 0.2,-1.1 0.5,-1.6c0.3,-0.5 0.8,-0.9 1.4,-1.2c1.4,-0.6 2.7,-1.1 3.8,-1.4c1.2,-0.3 2.4,-0.4 3.6,-0.4c0.8,0 1.7,0.1 2.4,0.2c0.8,0.1 1.5,0.3 2.2,0.6c-0.2,0.1 -0.4,0.3 -0.6,0.5c-0.2,0.2 -0.3,0.4 -0.4,0.5c-0.5,-0.1 -1.1,-0.2 -1.7,-0.3c-0.6,-0.1 -1.3,-0.1 -1.9,-0.1c-1.2,0 -2.3,0.1 -3.4,0.4s-2.2,0.7 -3.4,1.3c-0.4,0.2 -0.7,0.4 -0.9,0.7c-0.2,0.3 -0.2,0.6 -0.2,0.9V32h11.3c0,0.3 0.1,0.6 0.2,0.8c0.1,0.2 0.2,0.4 0.4,0.6H13.6c-0.3,0 -0.6,-0.1 -0.8,-0.3C12.6,32.9 12.5,32.6 12.5,32.3zM21.8,23.1c-1.2,0 -2.1,-0.4 -2.9,-1.1c-0.8,-0.8 -1.1,-1.7 -1.1,-2.9c0,-1.2 0.4,-2.1 1.1,-2.9c0.8,-0.7 1.7,-1.1 2.9,-1.1c1.2,0 2.1,0.4 2.9,1.1c0.8,0.7 1.1,1.7 1.1,2.9c0,1.2 -0.4,2.1 -1.1,2.9C23.9,22.8 23,23.1 21.8,23.1zM21.8,21.7c0.7,0 1.4,-0.3 1.9,-0.8c0.5,-0.5 0.8,-1.1 0.8,-1.9s-0.3,-1.4 -0.8,-1.9c-0.5,-0.5 -1.1,-0.8 -1.9,-0.8c-0.7,0 -1.4,0.3 -1.9,0.8c-0.5,0.5 -0.8,1.1 -0.8,1.9s0.3,1.4 0.8,1.9C20.5,21.5 21.1,21.7 21.8,21.7z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\art_brand.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:drawable="@drawable/art_shivam"
        android:gravity="center" />
    <item>
        <shape>
            <size
                android:width="200dp"
                android:height="48dp" />
        </shape>
    </item>
</layer-list>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\art_edit_note.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="48dp"
    android:height="48dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M190,550q-12.75,0 -21.37,-8.68 -8.63,-8.67 -8.63,-21.5 0,-12.82 8.63,-21.32 8.62,-8.5 21.37,-8.5h240q12.75,0 21.38,8.68 8.62,8.67 8.62,21.5 0,12.82 -8.62,21.32 -8.63,8.5 -21.38,8.5L190,550ZM190,385q-12.75,0 -21.37,-8.68 -8.63,-8.67 -8.63,-21.5 0,-12.82 8.63,-21.32 8.62,-8.5 21.37,-8.5h410q12.75,0 21.38,8.68 8.62,8.67 8.62,21.5 0,12.82 -8.62,21.32 -8.63,8.5 -21.38,8.5L190,385ZM190,220q-12.75,0 -21.37,-8.68 -8.63,-8.67 -8.63,-21.5 0,-12.82 8.63,-21.32 8.62,-8.5 21.37,-8.5h410q12.75,0 21.38,8.68 8.62,8.67 8.62,21.5 0,12.82 -8.62,21.32 -8.63,8.5 -21.38,8.5L190,220ZM520,770v-81q0,-5.57 2,-10.78 2,-5.22 7,-10.22l211.61,-210.77q9.11,-9.12 20.25,-13.18Q772,440 783,440q12,0 23,4.5t20,13.5l37,37q9,9 13,20t4,22q0,11 -4.5,22.5t-13.58,20.62L652,791q-5,5 -10.22,7 -5.21,2 -10.78,2h-81q-12.75,0 -21.37,-8.63Q520,782.75 520,770ZM820,537 L783,500 820,537ZM580,740h38l121,-122 -18,-19 -19,-18 -122,121v38ZM721,599 L702,581 739,618 721,599Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\art_library_music.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="128dp"
    android:height="128dp"
    android:tint="?attr/colorControlNormal"
    android:viewportWidth="48"
    android:viewportHeight="48">
  <path
      android:fillColor="#FF000000"
      android:pathData="M24.2,28c0.8,0 1.5,-0.3 2,-0.8c0.6,-0.6 0.9,-1.2 0.9,-2v-8.1h2.7c0.3,0 0.5,-0.1 0.7,-0.3c0.2,-0.2 0.3,-0.4 0.3,-0.7c0,-0.3 -0.1,-0.5 -0.3,-0.7c-0.2,-0.2 -0.4,-0.3 -0.7,-0.3h-2.9c-0.3,0 -0.5,0.1 -0.7,0.3c-0.2,0.2 -0.3,0.4 -0.3,0.7v7c-0.2,-0.2 -0.5,-0.4 -0.8,-0.5c-0.3,-0.1 -0.6,-0.2 -0.9,-0.2c-0.8,0 -1.4,0.3 -2,0.8c-0.5,0.5 -0.8,1.2 -0.8,2c0,0.8 0.3,1.4 0.8,2C22.7,27.7 23.4,28 24.2,28zM18.1,31.5c-0.6,0 -1.2,-0.2 -1.6,-0.7c-0.4,-0.4 -0.7,-1 -0.7,-1.6V13.6c0,-0.6 0.2,-1.1 0.7,-1.6c0.4,-0.4 1,-0.7 1.6,-0.7h15.7c0.6,0 1.1,0.2 1.6,0.7c0.4,0.4 0.7,1 0.7,1.6v15.7c0,0.6 -0.2,1.1 -0.7,1.6s-1,0.7 -1.6,0.7C33.8,31.5 18.1,31.5 18.1,31.5zM18.1,30.1h15.7c0.2,0 0.4,-0.1 0.6,-0.3c0.2,-0.2 0.3,-0.4 0.3,-0.6V13.6c0,-0.2 -0.1,-0.4 -0.3,-0.6c-0.2,-0.2 -0.4,-0.3 -0.6,-0.3H18.1c-0.2,0 -0.4,0.1 -0.6,0.3c-0.2,0.2 -0.3,0.4 -0.3,0.6v15.7c0,0.2 0.1,0.4 0.3,0.6C17.7,30 17.9,30.1 18.1,30.1zM14.3,35.3c-0.6,0 -1.2,-0.2 -1.6,-0.7c-0.4,-0.4 -0.7,-1 -0.7,-1.6V16.7c0,-0.2 0.1,-0.4 0.2,-0.5c0.1,-0.1 0.3,-0.2 0.5,-0.2c0.2,0 0.4,0.1 0.5,0.2c0.1,0.1 0.2,0.3 0.2,0.5v16.4c0,0.2 0.1,0.4 0.3,0.6c0.2,0.2 0.4,0.3 0.6,0.3h16.4c0.2,0 0.4,0.1 0.5,0.2c0.1,0.1 0.2,0.3 0.2,0.5c0,0.2 -0.1,0.4 -0.2,0.5c-0.1,0.1 -0.3,0.2 -0.5,0.2H14.3zM17.3,12.8v17.3V12.8z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\art_music.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="128dp"
    android:height="128dp"
    android:tint="?attr/colorControlNormal"
    android:viewportWidth="48"
    android:viewportHeight="48">
  <path
      android:fillColor="#FF000000"
      android:pathData="M21,36c-1.3,0 -2.4,-0.5 -3.3,-1.4s-1.4,-2 -1.4,-3.3c0,-1.3 0.5,-2.4 1.4,-3.3c0.9,-0.9 2,-1.4 3.3,-1.4c0.6,0 1.1,0.1 1.7,0.3c0.5,0.2 1,0.5 1.4,0.9V13.2c0,-0.3 0.1,-0.6 0.4,-0.9c0.2,-0.2 0.5,-0.4 0.9,-0.4h5.1c0.3,0 0.6,0.1 0.9,0.4c0.2,0.2 0.4,0.5 0.4,0.9v1.5c0,0.4 -0.1,0.7 -0.4,0.9c-0.3,0.2 -0.5,0.4 -0.9,0.4h-4.7v15.4c0,1.3 -0.5,2.4 -1.4,3.3C23.4,35.5 22.3,36 21,36z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\art_problem.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="48dp"
    android:height="48dp"
    android:tint="?attr/colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M261,638q12,0 21,-9t9,-21q0,-12 -9,-21t-21,-9q-12,0 -21,9t-9,21q0,12 9,21t21,9ZM261.17,508q12.82,0 21.33,-8.63T291,478v-131q0,-12.75 -8.68,-21.38 -8.68,-8.63 -21.5,-8.63 -12.82,0 -21.33,8.63T231,347v131q0,12.75 8.68,21.38 8.68,8.63 21.5,8.63ZM440,588h259q12.75,0 21.38,-8.68 8.63,-8.68 8.63,-21.5 0,-12.82 -8.63,-21.33T699,528L440,528q-12.75,0 -21.38,8.68 -8.63,8.68 -8.63,21.5 0,12.82 8.63,21.33T440,588ZM440,417h259q12.75,0 21.38,-8.68 8.63,-8.68 8.63,-21.5 0,-12.82 -8.63,-21.33T699,357L440,357q-12.75,0 -21.38,8.68 -8.63,8.68 -8.63,21.5 0,12.82 8.63,21.33T440,417ZM132,800q-24,0 -42,-18t-18,-42v-520q0,-24 18,-42t42,-18h696q24,0 42,18t18,42v520q0,24 -18,42t-42,18L132,800ZM132,740h696v-520L132,220v520ZM132,740v-520,520Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\art_sensors.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="128dp"
    android:height="128dp"
    android:tint="?attr/colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
    <path
        android:fillColor="#e8eaed"
        android:pathData="M157.77,480q0,61.54 21.04,115.19 21.04,53.66 58.34,95.89 5.93,8.38 6.31,16.73 0.39,8.34 -6.77,15.5 -6.38,7.15 -15.34,5.77 -8.97,-1.39 -16.12,-8 -42.46,-48.16 -66.85,-109.43Q114,550.38 114,480t24.38,-131.15q24.39,-60.77 66.85,-109.93 7.15,-6.61 16.12,-8 8.96,-1.38 15.34,4.77 7.16,7.16 6.77,16 -0.38,8.85 -6.31,16.23 -37.3,44 -58.34,97.66 -21.04,53.65 -21.04,114.42ZM317.77,480q0,27.54 8.54,52.31 8.54,24.77 24.84,45.54 4.16,7.84 3.93,16.69 -0.23,8.84 -5.62,16 -7.15,7.15 -16.27,6.27 -9.11,-0.89 -14.27,-9.27 -22.23,-26.16 -33.57,-58.16Q274,517.38 274,480q0,-37.38 11.35,-69.38 11.34,-32 33.57,-59.16 4.16,-7.38 13.89,-8.27 9.73,-0.88 16.88,5.27 6.16,6.39 6.39,16.12 0.23,9.73 -4.7,17.57 -16.3,20.77 -24.96,45.04 -8.65,24.27 -8.65,52.81ZM480,526q-19.08,0 -32.54,-13.46T434,480q0,-19.08 13.46,-33.04T480,433q19.08,0 33.04,13.96T527,480q0,19.08 -13.96,32.54T480,526ZM643.23,480q0,-28.54 -9.04,-52.81 -9.04,-24.27 -25.34,-45.04 -4.16,-7.84 -4.81,-16.69 -0.66,-8.84 6.5,-16 7.15,-7.15 16.77,-6.27 9.61,0.89 13.77,8.27 22.23,27.16 34.07,59.16Q687,442.62 687,480q0,37.38 -11.85,69.15 -11.84,31.77 -34.07,58.16 -5.16,7.61 -14.39,8.88 -9.23,1.27 -15.38,-5.88 -7.16,-7.16 -7.39,-15.89 -0.23,-8.73 4.7,-16.57 16.3,-20.77 25.46,-45.54 9.15,-24.77 9.15,-52.31ZM803.23,480q0,-60.77 -21.54,-114.42 -21.54,-53.66 -57.84,-97.66 -6.93,-7.38 -6.81,-16.23 0.11,-8.84 7.27,-15.23 6.15,-7.15 14.84,-5.65 8.7,1.5 15.62,8.11 42.46,49.39 67.35,110.16Q847,409.85 847,480q0,70.15 -24.88,131.42 -24.89,61.27 -67.35,109.66 -6.92,6.61 -16,8 -9.08,1.38 -15.46,-5.77 -7.16,-6.16 -6.77,-15 0.38,-8.85 7.31,-17.23 36.3,-43 57.84,-96.66 21.54,-53.65 21.54,-114.42Z" />
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\art_shivam.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="48dp"
    android:height="48dp"
    android:alpha="0.33"
    android:tint="@color/amoled_fg"
    android:viewportWidth="720"
    android:viewportHeight="720">
    <path
        android:fillColor="#FF000000"
        android:pathData="M326.1,399.4c-44.1,0 -88.3,-0.1 -132.4,-0.1c93.4,-119.9 186.9,-239.7 280.3,-359.6C424.7,159.6 375.4,279.5 326.1,399.4z" />
    <path
        android:fillColor="#FF000000"
        android:pathData="M396.8,321c44.1,0 88.3,0.1 132.4,0.1c-93.4,119.9 -186.9,239.7 -280.3,359.6C298.2,560.7 347.5,440.9 396.8,321z" />
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\art_splash_anim.xml
================================================================================

<animated-vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="24dp"
            android:height="24dp"
            android:viewportWidth="24"
            android:viewportHeight="24">
            <group
                android:pivotX="12"
                android:pivotY="12"
                android:scaleX="0.6"
                android:scaleY="0.6">
                <group
                    android:name="bg"
                    android:pivotX="12"
                    android:pivotY="12">
                    <path android:pathData="M 12 2 C 9.349 2 6.803 3.055 4.929 4.929 C 3.055 6.803 2 9.349 2 12 C 2 14.651 3.055 17.197 4.929 19.071 C 6.803 20.945 9.349 22 12 22 C 14.651 22 17.197 20.945 19.071 19.071 C 20.945 17.197 22 14.651 22 12 C 22 9.349 20.945 6.803 19.071 4.929 C 17.197 3.055 14.651 2 12 2 Z">
                        <aapt:attr name="android:fillColor">
                            <gradient
                                android:centerX="7"
                                android:centerY="7"
                                android:gradientRadius="16"
                                android:type="radial">
                                <item
                                    android:color="@color/app_color_highlight"
                                    android:offset="0" />
                                <item
                                    android:color="@color/app_color_shadow"
                                    android:offset="1" />
                            </gradient>
                        </aapt:attr>
                    </path>
                </group>
                <group
                    android:name="group"
                    android:pivotX="11"
                    android:pivotY="16">
                    <group
                        android:name="media"
                        android:pivotX="12"
                        android:pivotY="12">
                        <group
                            android:name="play"
                            android:pivotX="12"
                            android:pivotY="12">
                            <path
                                android:name="note"
                                android:fillColor="#1d1d1b"
                                android:pathData="M 15.594 12.703 L 10.807 15.467 C 10.642 15.562 10.448 15.596 10.26 15.563 C 10.072 15.53 9.902 15.432 9.779 15.286 C 9.656 15.14 9.589 14.955 9.589 14.764 L 9.589 9.236 C 9.589 9.045 9.656 8.86 9.779 8.714 C 9.902 8.568 10.072 8.47 10.26 8.437 C 10.448 8.404 10.642 8.438 10.807 8.533 L 15.594 11.297 C 15.759 11.392 15.886 11.543 15.951 11.722 C 16.016 11.902 16.016 12.098 15.951 12.278 C 15.886 12.457 15.759 12.608 15.594 12.703 Z"
                                android:strokeWidth="1" />
                        </group>
                        <path
                            android:name="path_5"
                            android:fillAlpha="0"
                            android:fillColor="#1d1d1b"
                            android:pathData="M 13.213 10.616 C 13.069 10.608 12.93 10.556 12.817 10.467 C 12.703 10.377 12.62 10.255 12.579 10.116 L 12.043 8.116 C 12.015 8.039 12.012 7.955 12.037 7.877 C 12.062 7.798 12.111 7.73 12.179 7.683 C 12.246 7.636 12.327 7.613 12.409 7.616 C 12.553 7.624 12.692 7.677 12.805 7.766 C 12.919 7.856 13.002 7.978 13.043 8.116 L 13.579 10.116 C 13.607 10.193 13.61 10.278 13.585 10.356 C 13.561 10.435 13.511 10.503 13.443 10.55 C 13.376 10.597 13.295 10.62 13.213 10.616 Z"
                            android:strokeWidth="1" />
                        <path
                            android:name="path_6"
                            android:fillColor="#1d1d1b"
                            android:pathData="M 13.749 12.611 C 13.605 12.603 13.466 12.551 13.353 12.462 C 13.239 12.372 13.156 12.25 13.115 12.111 C 13.086 12.034 13.084 11.95 13.109 11.872 C 13.133 11.793 13.183 11.725 13.251 11.678 C 13.318 11.631 13.399 11.608 13.481 11.611 C 13.625 11.619 13.764 11.672 13.877 11.761 C 13.991 11.851 14.074 11.973 14.115 12.111 C 14.143 12.188 14.146 12.273 14.121 12.351 C 14.097 12.43 14.047 12.498 13.979 12.545 C 13.912 12.592 13.831 12.615 13.749 12.611 Z"
                            android:strokeWidth="1" />
                    </group>
                </group>
                <group
                    android:name="ring"
                    android:pivotX="12"
                    android:pivotY="12">
                    <path
                        android:name="path"
                        android:fillColor="#1d1d1b"
                        android:pathData="M 20.49 3.51 C 18.526 1.54 15.938 0.312 13.17 0.036 C 10.402 -0.239 7.622 0.454 5.308 1.997 C 2.993 3.54 1.285 5.839 0.475 8.5 C -0.335 11.161 -0.196 14.023 0.867 16.593 C 1.929 19.164 3.852 21.288 6.304 22.6 C 8.757 23.913 11.59 24.334 14.319 23.793 C 17.047 23.251 19.505 21.779 21.27 19.629 C 23.035 17.479 24 14.782 24 12 C 24.003 10.423 23.695 8.862 23.093 7.405 C 22.49 5.948 21.606 4.624 20.49 3.51 Z M 20.43 13.29 C 20.253 13.453 20.111 13.65 20.015 13.871 C 19.918 14.091 19.869 14.329 19.87 14.57 C 19.868 14.75 19.895 14.929 19.95 15.1 C 20.006 15.271 20.033 15.45 20.03 15.63 C 20.029 16.027 19.892 16.411 19.643 16.72 C 19.394 17.029 19.047 17.244 18.66 17.33 C 18.334 17.401 18.036 17.564 17.8 17.8 C 17.564 18.036 17.401 18.334 17.33 18.66 C 17.244 19.047 17.029 19.394 16.72 19.643 C 16.411 19.892 16.027 20.029 15.63 20.03 C 15.45 20.033 15.271 20.006 15.1 19.95 C 14.929 19.895 14.75 19.868 14.57 19.87 C 14.329 19.869 14.091 19.918 13.871 20.015 C 13.65 20.111 13.453 20.253 13.29 20.43 C 13.071 20.67 12.79 20.844 12.478 20.933 C 12.165 21.022 11.835 21.022 11.522 20.933 C 11.21 20.844 10.929 20.67 10.71 20.43 C 10.547 20.253 10.35 20.111 10.129 20.015 C 9.909 19.918 9.671 19.869 9.43 19.87 C 9.25 19.868 9.071 19.895 8.9 19.95 C 8.729 20.006 8.55 20.033 8.37 20.03 C 7.973 20.029 7.589 19.892 7.28 19.643 C 6.971 19.394 6.756 19.047 6.67 18.66 C 6.599 18.334 6.436 18.036 6.2 17.8 C 5.964 17.564 5.666 17.401 5.34 17.33 C 4.953 17.244 4.606 17.029 4.357 16.72 C 4.108 16.411 3.971 16.027 3.97 15.63 C 3.967 15.45 3.994 15.271 4.05 15.1 C 4.105 14.929 4.132 14.75 4.13 14.57 C 4.131 14.329 4.082 14.091 3.985 13.871 C 3.889 13.65 3.747 13.453 3.57 13.29 C 3.33 13.071 3.156 12.79 3.067 12.478 C 2.978 12.165 2.978 11.835 3.067 11.522 C 3.156 11.21 3.33 10.929 3.57 10.71 C 3.747 10.547 3.889 10.35 3.985 10.129 C 4.082 9.909 4.131 9.671 4.13 9.43 C 4.132 9.25 4.105 9.071 4.05 8.9 C 3.994 8.729 3.967 8.55 3.97 8.37 C 3.971 7.973 4.108 7.589 4.357 7.28 C 4.606 6.971 4.953 6.756 5.34 6.67 C 5.666 6.599 5.964 6.436 6.2 6.2 C 6.436 5.964 6.599 5.666 6.67 5.34 C 6.756 4.953 6.971 4.606 7.28 4.357 C 7.589 4.108 7.973 3.971 8.37 3.97 C 8.55 3.967 8.729 3.994 8.9 4.05 C 9.071 4.105 9.25 4.132 9.43 4.13 C 9.671 4.131 9.909 4.082 10.129 3.985 C 10.35 3.889 10.547 3.747 10.71 3.57 C 10.929 3.33 11.21 3.156 11.522 3.067 C 11.835 2.978 12.165 2.978 12.478 3.067 C 12.79 3.156 13.071 3.33 13.29 3.57 C 13.513 3.816 13.803 3.992 14.124 4.077 C 14.445 4.163 14.784 4.153 15.1 4.05 C 15.271 3.994 15.45 3.967 15.63 3.97 C 16.027 3.971 16.411 4.108 16.72 4.357 C 17.029 4.606 17.244 4.953 17.33 5.34 C 17.401 5.666 17.564 5.964 17.8 6.2 C 18.036 6.436 18.334 6.599 18.66 6.67 C 19.047 6.756 19.394 6.971 19.643 7.28 C 19.892 7.589 20.029 7.973 20.03 8.37 C 20.033 8.55 20.006 8.729 19.95 8.9 C 19.895 9.071 19.868 9.25 19.87 9.43 C 19.869 9.671 19.918 9.909 20.015 10.129 C 20.111 10.35 20.253 10.547 20.43 10.71 C 20.67 10.929 20.844 11.21 20.933 11.522 C 21.022 11.835 21.022 12.165 20.933 12.478 C 20.844 12.79 20.67 13.071 20.43 13.29 Z"
                        android:strokeWidth="1" />
                </group>
            </group>
        </vector>
    </aapt:attr>
    <target android:name="ring">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="1200"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="rotation"
                    android:valueFrom="0"
                    android:valueTo="120"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="1200"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="rotation"
                    android:startOffset="1200"
                    android:valueFrom="0"
                    android:valueTo="120"
                    android:valueType="floatType" />
            </set>
        </aapt:attr>
    </target>
    <target android:name="note">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="400"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="pathData"
                    android:startOffset="200"
                    android:valueFrom="M 10.26 15.563 C 10.448 15.596 10.642 15.562 10.807 15.467 C 11.339 15.16 11.871 14.853 12.403 14.546 C 12.935 14.239 13.466 13.931 13.998 13.624 C 14.53 13.317 15.062 13.01 15.594 12.703 C 15.594 12.703 15.594 12.703 15.594 12.703 L 15.594 12.703 C 15.759 12.608 15.886 12.457 15.951 12.278 C 16.016 12.098 16.016 11.902 15.951 11.722 C 15.886 11.543 15.759 11.392 15.594 11.297 C 13.998 10.376 12.403 9.454 10.807 8.533 C 10.642 8.438 10.448 8.404 10.26 8.437 C 10.072 8.47 9.902 8.568 9.779 8.714 C 9.656 8.86 9.589 9.045 9.589 9.236 C 9.589 11.079 9.589 12.921 9.589 14.764 C 9.589 14.955 9.656 15.14 9.779 15.286 C 9.902 15.432 10.072 15.53 10.26 15.563"
                    android:valueTo="M 11.767 14.487 C 12.15 14.522 12.535 14.469 12.894 14.332 C 13.253 14.196 13.577 13.979 13.84 13.7 C 13.838 13.697 13.836 13.695 13.834 13.692 C 13.842 13.686 13.85 13.68 13.858 13.674 C 13.912 13.606 13.966 13.539 14.02 13.471 L 14.668 12.679 C 14.806 12.506 14.883 12.294 14.888 12.074 C 14.893 11.853 14.826 11.637 14.697 11.459 C 14.456 11.127 14.216 10.795 13.975 10.463 C 13.634 10.025 13.158 9.712 12.62 9.574 C 12.082 9.436 11.513 9.481 11.004 9.702 C 10.494 9.922 10.072 10.307 9.805 10.794 C 9.538 11.28 9.441 11.843 9.528 12.391 C 9.616 12.939 9.883 13.443 10.289 13.823 C 10.694 14.202 11.214 14.436 11.767 14.487 C 11.767 14.487 11.767 14.487 11.767 14.487"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="400"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="pathData"
                    android:startOffset="1600"
                    android:valueFrom="M 11.767 14.487 C 12.15 14.522 12.535 14.469 12.894 14.332 C 13.253 14.196 13.577 13.979 13.84 13.7 C 13.838 13.697 13.836 13.695 13.834 13.692 C 13.842 13.686 13.85 13.68 13.858 13.674 C 13.912 13.606 13.966 13.539 14.02 13.471 L 14.668 12.679 C 14.806 12.506 14.883 12.294 14.888 12.074 C 14.893 11.853 14.826 11.637 14.697 11.459 C 14.456 11.127 14.216 10.795 13.975 10.463 C 13.634 10.025 13.158 9.712 12.62 9.574 C 12.082 9.436 11.513 9.481 11.004 9.702 C 10.494 9.922 10.072 10.307 9.805 10.794 C 9.538 11.28 9.441 11.843 9.528 12.391 C 9.616 12.939 9.883 13.443 10.289 13.823 C 10.694 14.202 11.214 14.436 11.767 14.487 C 11.767 14.487 11.767 14.487 11.767 14.487"
                    android:valueTo="M 10.26 15.563 C 10.448 15.596 10.642 15.562 10.807 15.467 C 11.339 15.16 11.871 14.853 12.403 14.546 C 12.935 14.239 13.466 13.931 13.998 13.624 C 14.53 13.317 15.062 13.01 15.594 12.703 C 15.594 12.703 15.594 12.703 15.594 12.703 L 15.594 12.703 C 15.759 12.608 15.886 12.457 15.951 12.278 C 16.016 12.098 16.016 11.902 15.951 11.722 C 15.886 11.543 15.759 11.392 15.594 11.297 C 13.998 10.376 12.403 9.454 10.807 8.533 C 10.642 8.438 10.448 8.404 10.26 8.437 C 10.072 8.47 9.902 8.568 9.779 8.714 C 9.656 8.86 9.589 9.045 9.589 9.236 C 9.589 11.079 9.589 12.921 9.589 14.764 C 9.589 14.955 9.656 15.14 9.779 15.286 C 9.902 15.432 10.072 15.53 10.26 15.563"
                    android:valueType="pathType" />
            </set>
        </aapt:attr>
    </target>
    <target android:name="play">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="400"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="rotation"
                    android:startOffset="400"
                    android:valueFrom="0"
                    android:valueTo="-52"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="400"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="translateY"
                    android:startOffset="400"
                    android:valueFrom="0"
                    android:valueTo="2"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="300"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="rotation"
                    android:startOffset="1700"
                    android:valueFrom="-52"
                    android:valueTo="0"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="300"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="translateY"
                    android:startOffset="1700"
                    android:valueFrom="2"
                    android:valueTo="0"
                    android:valueType="floatType" />
            </set>
        </aapt:attr>
    </target>
    <target android:name="media">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="200"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="translateX"
                    android:startOffset="700"
                    android:valueFrom="0"
                    android:valueTo="-0.5"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="300"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="scaleX"
                    android:startOffset="700"
                    android:valueFrom="1"
                    android:valueTo="1.05"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="300"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="scaleY"
                    android:startOffset="700"
                    android:valueFrom="1"
                    android:valueTo="1.05"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="200"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="scaleX"
                    android:startOffset="1000"
                    android:valueFrom="1.05"
                    android:valueTo="1"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="200"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="scaleY"
                    android:startOffset="1000"
                    android:valueFrom="1.05"
                    android:valueTo="1"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="300"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="scaleY"
                    android:startOffset="1700"
                    android:valueFrom="1"
                    android:valueTo="1.05"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="301"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="scaleX"
                    android:startOffset="1700"
                    android:valueFrom="1"
                    android:valueTo="1.05"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="200"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="scaleX"
                    android:startOffset="2000"
                    android:valueFrom="1.05"
                    android:valueTo="1"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="200"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="scaleY"
                    android:startOffset="2000"
                    android:valueFrom="1.05"
                    android:valueTo="1"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="200"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="translateX"
                    android:startOffset="1500"
                    android:valueFrom="-0.5"
                    android:valueTo="0"
                    android:valueType="floatType" />
            </set>
        </aapt:attr>
    </target>
    <target android:name="path_5">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="200"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="pathData"
                    android:startOffset="800"
                    android:valueFrom="M 13.602 10.236 C 13.601 10.195 13.593 10.155 13.579 10.116 L 13.311 9.116 C 13.222 8.783 13.132 8.449 13.043 8.116 C 13.002 7.978 12.919 7.856 12.805 7.766 C 12.692 7.677 12.553 7.624 12.409 7.616 C 12.327 7.613 12.246 7.636 12.179 7.683 C 12.111 7.73 12.062 7.798 12.037 7.877 C 12.012 7.955 12.015 8.039 12.043 8.116 L 12.579 10.116 C 12.62 10.255 12.703 10.377 12.817 10.467 C 12.93 10.556 13.069 10.608 13.213 10.616 L 13.213 10.616 C 13.295 10.62 13.376 10.597 13.443 10.55 C 13.511 10.503 13.561 10.435 13.585 10.356 C 13.598 10.317 13.603 10.276 13.602 10.236"
                    android:valueTo="M 16.595 10.383 C 16.617 10.313 16.615 10.237 16.589 10.168 L 16.026 8.065 C 15.989 7.94 15.914 7.831 15.813 7.751 C 15.711 7.67 15.587 7.624 15.458 7.616 C 14.425 7.616 13.392 7.616 12.359 7.616 C 12.285 7.613 12.212 7.634 12.152 7.676 C 12.092 7.718 12.047 7.779 12.025 7.85 C 12.003 7.92 12.005 7.995 12.031 8.065 L 12.594 10.168 C 12.631 10.292 12.706 10.402 12.807 10.482 C 12.909 10.562 13.033 10.609 13.162 10.616 L 16.261 10.616 C 16.261 10.616 16.261 10.616 16.261 10.616 C 16.335 10.62 16.408 10.599 16.468 10.557 C 16.528 10.514 16.573 10.453 16.595 10.383"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="200"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="fillAlpha"
                    android:startOffset="0"
                    android:valueFrom="0"
                    android:valueTo="0"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="200"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="fillAlpha"
                    android:startOffset="800"
                    android:valueFrom="1"
                    android:valueTo="1"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="200"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="pathData"
                    android:startOffset="1400"
                    android:valueFrom="M 16.595 10.383 C 16.617 10.313 16.615 10.237 16.589 10.168 L 16.026 8.065 C 15.989 7.94 15.914 7.831 15.813 7.751 C 15.711 7.67 15.587 7.624 15.458 7.616 C 14.425 7.616 13.392 7.616 12.359 7.616 C 12.285 7.613 12.212 7.634 12.152 7.676 C 12.092 7.718 12.047 7.779 12.025 7.85 C 12.003 7.92 12.005 7.995 12.031 8.065 L 12.594 10.168 C 12.631 10.292 12.706 10.402 12.807 10.482 C 12.909 10.562 13.033 10.609 13.162 10.616 L 16.261 10.616 C 16.261 10.616 16.261 10.616 16.261 10.616 C 16.335 10.62 16.408 10.599 16.468 10.557 C 16.528 10.514 16.573 10.453 16.595 10.383"
                    android:valueTo="M 13.602 10.236 C 13.601 10.195 13.593 10.155 13.579 10.116 L 13.311 9.116 C 13.222 8.783 13.132 8.449 13.043 8.116 C 13.002 7.978 12.919 7.856 12.805 7.766 C 12.692 7.677 12.553 7.624 12.409 7.616 C 12.327 7.613 12.246 7.636 12.179 7.683 C 12.111 7.73 12.062 7.798 12.037 7.877 C 12.012 7.955 12.015 8.039 12.043 8.116 L 12.579 10.116 C 12.62 10.255 12.703 10.377 12.817 10.467 C 12.93 10.556 13.069 10.608 13.213 10.616 L 13.213 10.616 C 13.295 10.62 13.376 10.597 13.443 10.55 C 13.511 10.503 13.561 10.435 13.585 10.356 C 13.598 10.317 13.603 10.276 13.602 10.236"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="200"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="fillAlpha"
                    android:startOffset="1600"
                    android:valueFrom="0"
                    android:valueTo="0"
                    android:valueType="floatType" />
            </set>
        </aapt:attr>
    </target>
    <target android:name="path_6">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="200"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="pathData"
                    android:startOffset="600"
                    android:valueFrom="M 13.749 12.611 C 13.605 12.603 13.466 12.551 13.353 12.462 C 13.239 12.372 13.156 12.25 13.115 12.111 C 13.086 12.034 13.084 11.95 13.109 11.872 C 13.133 11.793 13.183 11.725 13.251 11.678 C 13.273 11.662 13.297 11.649 13.322 11.639 C 13.347 11.629 13.373 11.621 13.4 11.617 C 13.426 11.612 13.454 11.61 13.481 11.611 C 13.625 11.619 13.764 11.672 13.877 11.761 C 13.991 11.851 14.074 11.973 14.115 12.111 C 14.143 12.188 14.146 12.273 14.121 12.351 C 14.097 12.43 14.047 12.498 13.979 12.545 C 13.912 12.592 13.831 12.615 13.749 12.611 Z"
                    android:valueTo="M 13.749 12.616 C 13.605 12.608 13.466 12.556 13.353 12.467 C 13.239 12.377 13.156 12.255 13.115 12.116 C 12.758 10.783 12.4 9.449 12.043 8.116 C 12.015 8.039 12.012 7.955 12.037 7.877 C 12.061 7.798 12.111 7.73 12.179 7.683 C 12.246 7.636 12.327 7.613 12.409 7.616 C 12.553 7.624 12.692 7.677 12.805 7.766 C 12.919 7.856 13.002 7.978 13.043 8.116 C 13.4 9.449 13.758 10.783 14.115 12.116 C 14.143 12.193 14.146 12.278 14.121 12.356 C 14.096 12.435 14.047 12.503 13.979 12.55 C 13.912 12.597 13.831 12.62 13.749 12.616 Z"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="200"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="pathData"
                    android:startOffset="1600"
                    android:valueFrom="M 13.749 12.616 C 13.605 12.608 13.466 12.556 13.353 12.467 C 13.239 12.377 13.156 12.255 13.115 12.116 C 12.758 10.783 12.4 9.449 12.043 8.116 C 12.015 8.039 12.012 7.955 12.037 7.877 C 12.061 7.798 12.111 7.73 12.179 7.683 C 12.246 7.636 12.327 7.613 12.409 7.616 C 12.553 7.624 12.692 7.677 12.805 7.766 C 12.919 7.856 13.002 7.978 13.043 8.116 C 13.4 9.449 13.758 10.783 14.115 12.116 C 14.143 12.193 14.146 12.278 14.121 12.356 C 14.096 12.435 14.047 12.503 13.979 12.55 C 13.912 12.597 13.831 12.62 13.749 12.616 Z"
                    android:valueTo="M 13.749 12.611 C 13.605 12.603 13.466 12.551 13.353 12.462 C 13.239 12.372 13.156 12.25 13.115 12.111 C 13.086 12.034 13.084 11.95 13.109 11.872 C 13.133 11.793 13.183 11.725 13.251 11.678 C 13.273 11.662 13.297 11.649 13.322 11.639 C 13.347 11.629 13.373 11.621 13.4 11.617 C 13.426 11.612 13.454 11.61 13.481 11.611 C 13.625 11.619 13.764 11.672 13.877 11.761 C 13.991 11.851 14.074 11.973 14.115 12.111 C 14.143 12.188 14.146 12.273 14.121 12.351 C 14.097 12.43 14.047 12.498 13.979 12.545 C 13.912 12.592 13.831 12.615 13.749 12.611 Z"
                    android:valueType="pathType" />
            </set>
        </aapt:attr>
    </target>
    <target android:name="group">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="200"
                    android:interpolator="@android:anim/overshoot_interpolator"
                    android:propertyName="rotation"
                    android:startOffset="800"
                    android:valueFrom="0"
                    android:valueTo="-5"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="400"
                    android:interpolator="@android:anim/overshoot_interpolator"
                    android:propertyName="rotation"
                    android:startOffset="1000"
                    android:valueFrom="-5"
                    android:valueTo="0"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="300"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="rotation"
                    android:startOffset="1700"
                    android:valueFrom="0"
                    android:valueTo="3"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="400"
                    android:interpolator="@android:interpolator/fast_out_slow_in"
                    android:propertyName="rotation"
                    android:startOffset="2000"
                    android:valueFrom="3"
                    android:valueTo="0"
                    android:valueType="floatType" />
            </set>
        </aapt:attr>
    </target>
    <target android:name="bg">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="2400"
                    android:interpolator="@android:interpolator/anticipate_overshoot"
                    android:propertyName="rotation"
                    android:valueFrom="0"
                    android:valueTo="360"
                    android:valueType="floatType" />
            </set>
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\art_twelve_sided_cookie.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="320"
    android:viewportHeight="320">
    <group
        android:pivotX="180"
        android:pivotY="180"
        android:scaleX="0.90"
        android:scaleY="0.90">

        <path
            android:fillColor="#D0BCFF"
            android:pathData="M136.7,9.85C137.24,9.32 137.51,9.05 137.74,8.83C150.25,-2.94 169.75,-2.94 182.26,8.83C182.49,9.05 182.76,9.32 183.3,9.85C183.63,10.16 183.79,10.32 183.94,10.47C191.95,18.11 203.28,21.14 214.03,18.53C214.24,18.48 214.46,18.42 214.9,18.31C215.63,18.12 216,18.03 216.31,17.95C233.02,14.01 249.92,23.76 254.86,40.21C254.95,40.52 255.05,40.88 255.26,41.61C255.38,42.05 255.44,42.27 255.5,42.48C258.61,53.09 266.91,61.39 277.52,64.5C277.73,64.56 277.95,64.62 278.39,64.74C279.12,64.95 279.48,65.05 279.79,65.14C296.24,70.08 305.99,86.98 302.05,103.69C301.97,104 301.88,104.37 301.69,105.1C301.58,105.54 301.52,105.76 301.47,105.97C298.86,116.72 301.89,128.05 309.53,136.06C309.68,136.21 309.84,136.37 310.15,136.7C310.68,137.24 310.95,137.51 311.17,137.74C322.94,150.25 322.94,169.75 311.17,182.26C310.95,182.49 310.68,182.76 310.15,183.3C309.84,183.63 309.68,183.79 309.53,183.94C301.89,191.95 298.86,203.28 301.47,214.03C301.52,214.24 301.58,214.46 301.69,214.9C301.88,215.63 301.97,216 302.05,216.31C305.99,233.02 296.24,249.92 279.79,254.86C279.48,254.95 279.12,255.05 278.39,255.26C277.95,255.38 277.73,255.44 277.52,255.5C266.91,258.61 258.61,266.91 255.5,277.52C255.44,277.73 255.38,277.95 255.26,278.39C255.05,279.12 254.95,279.48 254.86,279.79C249.92,296.24 233.02,305.99 216.31,302.05C216,301.97 215.63,301.88 214.9,301.69C214.46,301.58 214.24,301.52 214.03,301.47C203.28,298.86 191.95,301.89 183.94,309.53C183.79,309.68 183.63,309.84 183.3,310.15C182.76,310.68 182.49,310.95 182.26,311.17C169.75,322.94 150.25,322.94 137.74,311.17C137.51,310.95 137.24,310.68 136.7,310.15C136.37,309.84 136.21,309.68 136.06,309.53C128.05,301.89 116.72,298.86 105.97,301.47C105.76,301.52 105.54,301.58 105.1,301.69C104.37,301.88 104,301.97 103.69,302.05C86.98,305.99 70.08,296.24 65.14,279.79C65.05,279.48 64.95,279.12 64.74,278.39C64.62,277.95 64.56,277.73 64.5,277.52C61.39,266.91 53.09,258.61 42.48,255.5C42.27,255.44 42.05,255.38 41.61,255.26C40.88,255.05 40.52,254.95 40.21,254.86C23.76,249.92 14.01,233.02 17.95,216.31C18.03,216 18.12,215.63 18.31,214.9C18.42,214.46 18.48,214.24 18.53,214.03C21.14,203.28 18.11,191.95 10.47,183.94C10.32,183.79 10.16,183.63 9.85,183.3C9.32,182.76 9.05,182.49 8.83,182.26C-2.94,169.75 -2.94,150.25 8.83,137.74C9.05,137.51 9.32,137.24 9.85,136.7C10.16,136.37 10.32,136.21 10.47,136.06C18.11,128.05 21.14,116.72 18.53,105.97C18.48,105.76 18.42,105.54 18.31,105.1C18.12,104.37 18.03,104 17.95,103.69C14.01,86.98 23.76,70.08 40.21,65.14C40.52,65.05 40.88,64.95 41.61,64.74C42.05,64.62 42.27,64.56 42.48,64.5C53.09,61.39 61.39,53.09 64.5,42.48C64.56,42.27 64.62,42.05 64.74,41.61C64.95,40.88 65.05,40.52 65.14,40.21C70.08,23.76 86.98,14.01 103.69,17.95C104,18.03 104.37,18.12 105.1,18.31C105.54,18.42 105.76,18.48 105.97,18.53C116.72,21.14 128.05,18.11 136.06,10.47C136.21,10.32 136.37,10.16 136.7,9.85Z" />
    </group>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\dialog_bg.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android"
    android:insetLeft="16dp"
    android:insetRight="16dp">
    <shape android:shape="rectangle">
        <corners android:radius="24dp" />
        <solid android:color="?navBackground" />
    </shape>
</inset>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\gradient_track.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
        android:centerX="0.5"
        android:centerY="0.33"
        android:gradientRadius="@dimen/max_cover_size"
        android:endColor="#D8FFFFFF"
        android:startColor="#25FFFFFF"
        android:type="radial" />
</shape>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_account_circle_32dp.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/ic_account_circle"
    android:inset="4dp" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_account_circle.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M234,684q51,-39 114,-61.5T480,600q69,0 132,22.5T726,684q35,-41 54.5,-93T800,480q0,-133 -93.5,-226.5T480,160q-133,0 -226.5,93.5T160,480q0,59 19.5,111t54.5,93ZM480,520q-59,0 -99.5,-40.5T340,380q0,-59 40.5,-99.5T480,240q59,0 99.5,40.5T620,380q0,59 -40.5,99.5T480,520ZM480,880q-83,0 -156,-31.5T197,763q-54,-54 -85.5,-127T80,480q0,-83 31.5,-156T197,197q54,-54 127,-85.5T480,80q83,0 156,31.5T763,197q54,54 85.5,127T880,480q0,83 -31.5,156T763,763q-54,54 -127,85.5T480,880ZM480,800q53,0 100,-15.5t86,-44.5q-39,-29 -86,-44.5T480,680q-53,0 -100,15.5T294,740q39,29 86,44.5T480,800ZM480,440q26,0 43,-17t17,-43q0,-26 -17,-43t-43,-17q-26,0 -43,17t-17,43q0,26 17,43t43,17ZM480,380ZM480,740Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_add_20dp.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="20dp"
    android:height="20dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M444,516L276,516q-15.3,0 -25.65,-10.29 -10.35,-10.29 -10.35,-25.5Q240,465 250.35,454.5 260.7,444 276,444h168v-168q0,-15.3 10.29,-25.65 10.29,-10.35 25.5,-10.35Q495,240 505.5,250.35 516,260.7 516,276v168h168q15.3,0 25.65,10.29 10.35,10.29 10.35,25.5Q720,495 709.65,505.5 699.3,516 684,516L516,516v168q0,15.3 -10.29,25.65 -10.29,10.35 -25.5,10.35Q465,720 454.5,709.65 444,699.3 444,684v-168Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_add_circle.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M440,520v120q0,17 11.5,28.5T480,680q17,0 28.5,-11.5T520,640v-120h120q17,0 28.5,-11.5T680,480q0,-17 -11.5,-28.5T640,440L520,440v-120q0,-17 -11.5,-28.5T480,280q-17,0 -28.5,11.5T440,320v120L320,440q-17,0 -28.5,11.5T280,480q0,17 11.5,28.5T320,520h120ZM480,880q-83,0 -156,-31.5T197,763q-54,-54 -85.5,-127T80,480q0,-83 31.5,-156T197,197q54,-54 127,-85.5T480,80q83,0 156,31.5T763,197q54,54 85.5,127T880,480q0,83 -31.5,156T763,763q-54,54 -127,85.5T480,880ZM480,800q134,0 227,-93t93,-227q0,-134 -93,-227t-227,-93q-134,0 -227,93t-93,227q0,134 93,227t227,93ZM480,480Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_album.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M480,660q75,0 127.5,-52.5T660,480q0,-75 -52.5,-127.5T480,300q-75,0 -127.5,52.5T300,480q0,75 52.5,127.5T480,660ZM480,520q-17,0 -28.5,-11.5T440,480q0,-17 11.5,-28.5T480,440q17,0 28.5,11.5T520,480q0,17 -11.5,28.5T480,520ZM480,880q-83,0 -156,-31.5T197,763q-54,-54 -85.5,-127T80,480q0,-83 31.5,-156T197,197q54,-54 127,-85.5T480,80q83,0 156,31.5T763,197q54,54 85.5,127T880,480q0,83 -31.5,156T763,763q-54,54 -127,85.5T480,880ZM480,800q134,0 227,-93t93,-227q0,-134 -93,-227t-227,-93q-134,0 -227,93t-93,227q0,134 93,227t227,93ZM480,480Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_article.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M200,840q-33,0 -56.5,-23.5T120,760v-560q0,-33 23.5,-56.5T200,120h560q33,0 56.5,23.5T840,200v560q0,33 -23.5,56.5T760,840L200,840ZM200,760h560v-560L200,200v560ZM200,200v560,-560ZM320,680h200q17,0 28.5,-11.5T560,640q0,-17 -11.5,-28.5T520,600L320,600q-17,0 -28.5,11.5T280,640q0,17 11.5,28.5T320,680ZM320,520h320q17,0 28.5,-11.5T680,480q0,-17 -11.5,-28.5T640,440L320,440q-17,0 -28.5,11.5T280,480q0,17 11.5,28.5T320,520ZM320,360h320q17,0 28.5,-11.5T680,320q0,-17 -11.5,-28.5T640,280L320,280q-17,0 -28.5,11.5T280,320q0,17 11.5,28.5T320,360Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_artist.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?attr/colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M700,800q-42,0 -71,-29t-29,-71q0,-42 29,-71t71,-29q8,0 18,1.5t22,6.5v-168q0,-17 11.5,-28.5T780,400h60q17,0 28.5,11.5T880,440q0,17 -11.5,28.5T840,480h-40v220q0,42 -29,71t-71,29ZM120,760v-72q0,-35 17.5,-63t46.5,-43q62,-31 126,-46.5T440,520q42,0 83.5,6.5T607,546q-20,12 -36,29t-28,37q-26,-6 -51.5,-9t-51.5,-3q-57,0 -112,14t-108,40q-9,5 -14.5,14t-5.5,20v32h321q2,20 9.5,40t20.5,40L160,800q-17,0 -28.5,-11.5T120,760ZM440,480q-66,0 -113,-47t-47,-113q0,-66 47,-113t113,-47q66,0 113,47t47,113q0,66 -47,113t-113,47ZM440,400q33,0 56.5,-23.5T520,320q0,-33 -23.5,-56.5T440,240q-33,0 -56.5,23.5T360,320q0,33 23.5,56.5T440,400ZM440,320ZM440,720Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_autorenew.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
    <path
        android:fillColor="#e3e3e3"
        android:pathData="M240,482q0,16 2,31.5t7,30.5q5,17 -1,32.5T227,599q-16,8 -31.5,1.5T175,577q-8,-23 -11.5,-47t-3.5,-48q0,-134 93,-228t227,-94h7l-36,-36q-11,-11 -11,-28t11,-28q11,-11 28,-11t28,11l104,104q12,12 12,28t-12,28L507,332q-11,11 -28,11t-28,-11q-11,-11 -11,-28t11,-28l36,-36h-7q-100,0 -170,70.5T240,482ZM720,478q0,-16 -2,-31.5t-7,-30.5q-5,-17 1,-32.5t21,-22.5q16,-8 31.5,-1.5T785,383q8,23 11.5,47t3.5,48q0,134 -93,228t-227,94h-7l36,36q11,11 11,28t-11,28q-11,11 -28,11t-28,-11L349,788q-12,-12 -12,-28t12,-28l104,-104q11,-11 28,-11t28,11q11,11 11,28t-11,28l-36,36h7q100,0 170,-70.5T720,478Z" />
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_back.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?attr/colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="m313,520 l196,196q12,12 11.5,28T508,772q-12,11 -28,11.5T452,772L188,508q-6,-6 -8.5,-13t-2.5,-15q0,-8 2.5,-15t8.5,-13l264,-264q11,-11 27.5,-11t28.5,11q12,12 12,28.5T508,245L313,440h447q17,0 28.5,11.5T800,480q0,17 -11.5,28.5T760,520L313,520Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_bookmark_anim.xml
================================================================================

<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="960dp"
            android:height="960dp"
            android:viewportWidth="960"
            android:viewportHeight="960">
            <path
                android:name="path"
                android:pathData="M 480 720 L 312 792 Q 272 809 236 785.5 Q 200 762 200 719 L 200 200 Q 200 167 223.5 143.5 Q 247 120 280 120 L 680 120 Q 713 120 736.5 143.5 Q 760 167 760 200 L 760 719 Q 760 762 724 785.5 Q 688 809 648 792 L 480 720 Z M 480 632 L 680 718 L 680 200 L 280 200 L 280 718 L 480 632 Z M 480 200 L 280 200 L 680 200 L 480 200 Z"
                android:fillColor="#FF000000"/>
            <clip-path
                android:name="mask"
                android:pathData="M 480 720 L 312 792 Q 272 809 236 785.5 Q 200 762 200 719 L 200 200 Q 200 167 223.5 143.5 Q 247 120 280 120 L 680 120 Q 713 120 736.5 143.5 Q 760 167 760 200 L 760 719 Q 760 762 724 785.5 Q 688 809 648 792 L 480 720 Z"/>
            <group
                android:name="group"
                android:translateY="-720">
                <path
                    android:name="path_1"
                    android:pathData="M 480 720 L 312 792 Q 272 809 236 785.5 Q 200 762 200 719 L 200 200 Q 200 167 223.5 143.5 Q 247 120 280 120 L 680 120 Q 713 120 736.5 143.5 Q 760 167 760 200 L 760 719 Q 760 762 724 785.5 Q 688 809 648 792 L 480 720 Z"
                    android:fillColor="#FF000000"/>
            </group>
        </vector>
    </aapt:attr>
    <target android:name="group">
        <aapt:attr name="android:animation">
            <objectAnimator
                android:propertyName="translateY"
                android:duration="300"
                android:valueFrom="-640"
                android:valueTo="0"
                android:valueType="floatType"
                android:interpolator="@android:interpolator/fast_out_slow_in"/>
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_bookmark_filled.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="m480,720 l-168,72q-40,17 -76,-6.5T200,719v-519q0,-33 23.5,-56.5T280,120h400q33,0 56.5,23.5T760,200v519q0,43 -36,66.5t-76,6.5l-168,-72Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_bookmark_outline.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="m480,720 l-168,72q-40,17 -76,-6.5T200,719v-519q0,-33 23.5,-56.5T280,120h400q33,0 56.5,23.5T760,200v519q0,43 -36,66.5t-76,6.5l-168,-72ZM480,632 L680,718v-518L280,200v518l200,-86ZM480,200L280,200h400,-200Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_cancel.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="m480,536 l116,116q11,11 28,11t28,-11q11,-11 11,-28t-11,-28L536,480l116,-116q11,-11 11,-28t-11,-28q-11,-11 -28,-11t-28,11L480,424 364,308q-11,-11 -28,-11t-28,11q-11,11 -11,28t11,28l116,116 -116,116q-11,11 -11,28t11,28q11,11 28,11t28,-11l116,-116ZM480,880q-83,0 -156,-31.5T197,763q-54,-54 -85.5,-127T80,480q0,-83 31.5,-156T197,197q54,-54 127,-85.5T480,80q83,0 156,31.5T763,197q54,54 85.5,127T880,480q0,83 -31.5,156T763,763q-54,54 -127,85.5T480,880ZM480,800q134,0 227,-93t93,-227q0,-134 -93,-227t-227,-93q-134,0 -227,93t-93,227q0,134 93,227t227,93ZM480,480Z"
      android:fillColor="#e3e3e3"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_check_20dp.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="20dp"
    android:height="20dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="m389,591 l299,-299q10.91,-11 25.45,-11Q728,281 739,292t11,25.58q0,14.58 -10.61,25.19L415,668q-10.91,11 -25.45,11Q375,679 364,668L221,525q-11,-11 -11,-25.5t11,-25.5q11,-11 25.67,-11 14.66,0 25.33,11l117,117Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_check_circle_filled.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="m424,552 l-86,-86q-11,-11 -28,-11t-28,11q-11,11 -11,28t11,28l114,114q12,12 28,12t28,-12l226,-226q11,-11 11,-28t-11,-28q-11,-11 -28,-11t-28,11L424,552ZM480,880q-83,0 -156,-31.5T197,763q-54,-54 -85.5,-127T80,480q0,-83 31.5,-156T197,197q54,-54 127,-85.5T480,80q83,0 156,31.5T763,197q54,54 85.5,127T880,480q0,83 -31.5,156T763,763q-54,54 -127,85.5T480,880Z"
      android:fillColor="#e3e3e3"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_check_circle.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="m424,552 l-86,-86q-11,-11 -28,-11t-28,11q-11,11 -11,28t11,28l114,114q12,12 28,12t28,-12l226,-226q11,-11 11,-28t-11,-28q-11,-11 -28,-11t-28,11L424,552ZM480,880q-83,0 -156,-31.5T197,763q-54,-54 -85.5,-127T80,480q0,-83 31.5,-156T197,197q54,-54 127,-85.5T480,80q83,0 156,31.5T763,197q54,54 85.5,127T880,480q0,83 -31.5,156T763,763q-54,54 -127,85.5T480,880ZM480,800q134,0 227,-93t93,-227q0,-134 -93,-227t-227,-93q-134,0 -227,93t-93,227q0,134 93,227t227,93ZM480,480Z"
      android:fillColor="#e3e3e3"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_chevron_forward.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
    <group android:translateX="64">
        <path
            android:fillColor="#e3e3e3"
            android:pathData="M504,480 L348,324q-11,-11 -11,-28t11,-28q11,-11 28,-11t28,11l184,184q6,6 8.5,13t2.5,15q0,8 -2.5,15t-8.5,13L404,692q-11,11 -28,11t-28,-11q-11,-11 -11,-28t11,-28l156,-156Z" />
    </group>

</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_close_small.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M480,536 L364,652q-11,11 -28,11t-28,-11q-11,-11 -11,-28t11,-28l116,-116 -116,-115q-11,-11 -11,-28t11,-28q11,-11 28,-11t28,11l116,116 115,-116q11,-11 28,-11t28,11q12,12 12,28.5T651,365L535,480l116,116q11,11 11,28t-11,28q-12,12 -28.5,12T595,652L480,536Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_close.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?attr/colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M480,536 L284,732q-11,11 -28,11t-28,-11q-11,-11 -11,-28t11,-28l196,-196 -196,-196q-11,-11 -11,-28t11,-28q11,-11 28,-11t28,11l196,196 196,-196q11,-11 28,-11t28,11q11,11 11,28t-11,28L536,480l196,196q11,11 11,28t-11,28q-11,11 -28,11t-28,-11L480,536Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_copy.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M360,720q-33,0 -56.5,-23.5T280,640v-480q0,-33 23.5,-56.5T360,80h360q33,0 56.5,23.5T800,160v480q0,33 -23.5,56.5T720,720L360,720ZM360,640h360v-480L360,160v480ZM200,880q-33,0 -56.5,-23.5T120,800v-560h80v560h440v80L200,880ZM360,640v-480,480Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_delete.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M280,840q-33,0 -56.5,-23.5T200,760v-520q-17,0 -28.5,-11.5T160,200q0,-17 11.5,-28.5T200,160h160q0,-17 11.5,-28.5T400,120h160q17,0 28.5,11.5T600,160h160q17,0 28.5,11.5T800,200q0,17 -11.5,28.5T760,240v520q0,33 -23.5,56.5T680,840L280,840ZM680,240L280,240v520h400v-520ZM400,680q17,0 28.5,-11.5T440,640v-280q0,-17 -11.5,-28.5T400,320q-17,0 -28.5,11.5T360,360v280q0,17 11.5,28.5T400,680ZM560,680q17,0 28.5,-11.5T600,640v-280q0,-17 -11.5,-28.5T560,320q-17,0 -28.5,11.5T520,360v280q0,17 11.5,28.5T560,680ZM280,240v520,-520Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_discord.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="160"
    android:viewportHeight="160">

    <path
        android:fillColor="#FF000000"
        android:pathData="M97.8,32c-1.2,2.2 -2.3,4.5 -3.4,6.8c-9.6,-1.4 -19.4,-1.4 -29,0c-1,-2.3 -2.1,-4.6 -3.4,-6.8c-9,1.5 -17.8,4.2 -26.1,8.1c-16.5,24.5 -21,48.3 -18.8,71.8c9.7,7.1 20.5,12.6 32.1,16.1c2.6,-3.5 4.9,-7.2 6.9,-11.1c-3.7,-1.4 -7.3,-3.1 -10.8,-5.2c0.9,-0.7 1.8,-1.3 2.7,-2c20.3,9.5 43.8,9.5 64.1,0c0.9,0.7 1.7,1.4 2.7,2c-3.5,2 -7.1,3.8 -10.8,5.2c2,3.9 4.3,7.6 6.9,11.1c11.5,-3.5 22.4,-8.9 32.1,-16.1c2.6,-27.3 -4.5,-50.9 -18.8,-71.9C115.7,36.3 106.9,33.6 97.8,32L97.8,32zM59,97.4c-6.2,0 -11.4,-5.7 -11.4,-12.7c0,-7 5,-12.7 11.4,-12.7s11.5,5.7 11.4,12.7C70.2,91.7 65.3,97.4 59,97.4zM101,97.4c-6.3,0 -11.4,-5.7 -11.4,-12.7c0,-7 5,-12.7 11.4,-12.7s11.5,5.7 11.4,12.7C112.3,91.7 107.4,97.4 101,97.4z" />

</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_download_for_offline.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?attr/colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M320,680h320q17,0 28.5,-11.5T680,640q0,-17 -11.5,-28.5T640,600L320,600q-17,0 -28.5,11.5T280,640q0,17 11.5,28.5T320,680ZM440,406 L404,371q-11,-11 -27.5,-11T348,372q-11,11 -11,28t11,28l104,104q12,12 28,12t28,-12l104,-104q11,-11 11.5,-27.5T612,372q-11,-11 -27.5,-11.5T556,371l-36,35v-126q0,-17 -11.5,-28.5T480,240q-17,0 -28.5,11.5T440,280v126ZM480,880q-83,0 -156,-31.5T197,763q-54,-54 -85.5,-127T80,480q0,-83 31.5,-156T197,197q54,-54 127,-85.5T480,80q83,0 156,31.5T763,197q54,54 85.5,127T880,480q0,83 -31.5,156T763,763q-54,54 -127,85.5T480,880ZM480,800q134,0 227,-93t93,-227q0,-134 -93,-227t-227,-93q-134,0 -227,93t-93,227q0,134 93,227t227,93ZM480,480Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_downloading.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?attr/colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M392,870q-137,-31 -224.5,-140T80,480q0,-141 87.5,-250T392,90q19,-5 33.5,7t14.5,32q0,14 -8,25t-22,14q-110,25 -180,112t-70,200q0,113 70,200t180,112q14,3 22,14t8,25q0,20 -14.5,32T392,870ZM568,870q-19,5 -33.5,-7T520,831q0,-14 8,-25t22,-14q27,-6 52.5,-16.5T651,750q11,-8 24.5,-6t23.5,12q14,14 12,32.5T693,818q-29,18 -60.5,31T568,870ZM756,700q-10,-10 -12,-23.5t6,-24.5q15,-23 25.5,-49t16.5,-53q3,-14 14,-21.5t25,-7.5q20,0 32,14.5t7,33.5q-8,33 -21,64.5T818,694q-11,16 -29.5,18T756,700ZM831,440q-14,0 -25,-8t-14,-22q-6,-27 -16.5,-52.5T750,309q-8,-12 -6,-25.5t12,-23.5q14,-14 32.5,-12t29.5,19q18,29 31,60.5t21,64.5q5,19 -7,33.5T831,440ZM651,210q-23,-15 -48.5,-25.5T550,168q-14,-3 -22,-14t-8,-25q0,-20 14.5,-32t33.5,-7q33,8 64.5,21t60.5,31q17,11 19,29.5T700,204q-10,10 -23.5,12t-25.5,-6ZM519,525l74,-74q12,-12 29,-12t29,12q12,12 11.5,29T650,509L507,652q-11,11 -28,11t-28,-11L306,506q-12,-12 -11.5,-28.5T307,449q12,-12 28.5,-12t28.5,12l75,76v-205q0,-17 11.5,-28.5T479,280q17,0 28.5,11.5T519,320v205Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_drag_20dp.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="20dp"
    android:height="20dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M228.29,600Q213,600 202.5,589.71q-10.5,-10.29 -10.5,-25.5Q192,549 202.34,538.5q10.35,-10.5 25.64,-10.5h503.73Q747,528 757.5,538.29q10.5,10.29 10.5,25.5Q768,579 757.66,589.5 747.31,600 732.02,600L228.29,600ZM228.29,432Q213,432 202.5,421.71q-10.5,-10.29 -10.5,-25.5Q192,381 202.34,370.5q10.35,-10.5 25.64,-10.5h503.73Q747,360 757.5,370.29q10.5,10.29 10.5,25.5Q768,411 757.66,421.5 747.31,432 732.02,432L228.29,432Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_edit_note.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M200,560q-17,0 -28.5,-11.5T160,520q0,-17 11.5,-28.5T200,480h200q17,0 28.5,11.5T440,520q0,17 -11.5,28.5T400,560L200,560ZM200,400q-17,0 -28.5,-11.5T160,360q0,-17 11.5,-28.5T200,320h360q17,0 28.5,11.5T600,360q0,17 -11.5,28.5T560,400L200,400ZM200,240q-17,0 -28.5,-11.5T160,200q0,-17 11.5,-28.5T200,160h360q17,0 28.5,11.5T600,200q0,17 -11.5,28.5T560,240L200,240ZM520,760v-66q0,-8 3,-15.5t9,-13.5l209,-208q9,-9 20,-13t22,-4q12,0 23,4.5t20,13.5l37,37q8,9 12.5,20t4.5,22q0,11 -4,22.5T863,580L655,788q-6,6 -13.5,9t-15.5,3h-66q-17,0 -28.5,-11.5T520,760ZM820,537 L783,500 820,537ZM580,740h38l121,-122 -18,-19 -19,-18 -122,121v38ZM721,599 L702,581 739,618 721,599Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_email.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M480,880q-83,0 -156,-31.5T197,763q-54,-54 -85.5,-127T80,480q0,-83 31.5,-156T197,197q54,-54 127,-85.5T480,80q83,0 156,31.5T763,197q54,54 85.5,127T880,480v58q0,59 -40.5,100.5T740,680q-35,0 -66,-15t-52,-43q-29,29 -65.5,43.5T480,680q-83,0 -141.5,-58.5T280,480q0,-83 58.5,-141.5T480,280q83,0 141.5,58.5T680,480v58q0,26 17,44t43,18q26,0 43,-18t17,-44v-58q0,-134 -93,-227t-227,-93q-134,0 -227,93t-93,227q0,134 93,227t227,93h160q17,0 28.5,11.5T680,840q0,17 -11.5,28.5T640,880L480,880ZM480,600q50,0 85,-35t35,-85q0,-50 -35,-85t-85,-35q-50,0 -85,35t-35,85q0,50 35,85t85,35Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_equalizer.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M240,800q-33,0 -56.5,-23.5T160,720v-160q0,-33 23.5,-56.5T240,480q33,0 56.5,23.5T320,560v160q0,33 -23.5,56.5T240,800ZM480,800q-33,0 -56.5,-23.5T400,720v-480q0,-33 23.5,-56.5T480,160q33,0 56.5,23.5T560,240v480q0,33 -23.5,56.5T480,800ZM720,800q-33,0 -56.5,-23.5T640,720v-280q0,-33 23.5,-56.5T720,360q33,0 56.5,23.5T800,440v280q0,33 -23.5,56.5T720,800Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_expand_more.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M480,598q-8,0 -15,-2.5t-13,-8.5L268,403q-11,-11 -11,-28t11,-28q11,-11 28,-11t28,11l156,156 156,-156q11,-11 28,-11t28,11q11,11 11,28t-11,28L508,587q-6,6 -13,8.5t-15,2.5Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_explicit.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M360,680h240v-80L440,600v-80h160v-80L440,440v-80h160v-80L360,280v400ZM200,840q-33,0 -56.5,-23.5T120,760v-560q0,-33 23.5,-56.5T200,120h560q33,0 56.5,23.5T840,200v560q0,33 -23.5,56.5T760,840L200,840Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_extension_32dp.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android"
    android:tint="?attr/colorControlActivated"
    android:drawable="@drawable/ic_extension"
    android:inset="4dp" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_extension.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="40dp"
    android:height="40dp"
    android:tint="?attr/colorControlActivated"
    android:viewportWidth="960"
    android:viewportHeight="960">
    <group
        android:pivotX="480"
        android:pivotY="480">
        <path
            android:fillColor="#FF000000"
            android:pathData="M160,560q-33,0 -56.5,-23.5T80,480q0,-33 23.5,-56.5T160,400q33,0 56.5,23.5T240,480q0,33 -23.5,56.5T160,560ZM198,704 L316,586q11,-11 28,-11t28,11q11,11 11,28t-11,28L254,760q-11,11 -28,11t-28,-11q-11,-11 -11,-28t11,-28ZM318,372L200,254q-11,-11 -11,-28t11,-28q11,-11 28,-11t28,11l118,118q11,11 11,28t-11,28q-11,11 -28,11t-28,-11ZM480,880q-33,0 -56.5,-23.5T400,800q0,-33 23.5,-56.5T480,720q33,0 56.5,23.5T560,800q0,33 -23.5,56.5T480,880ZM480,240q-33,0 -56.5,-23.5T400,160q0,-33 23.5,-56.5T480,80q33,0 56.5,23.5T560,160q0,33 -23.5,56.5T480,240ZM586,316 L706,198q11,-11 27.5,-11.5T762,198q11,11 11,28t-11,28L643,373q-12,12 -28.5,12T586,373q-11,-12 -11.5,-28.5T586,316ZM706,760L588,642q-11,-11 -11,-28t11,-28q11,-11 28,-11t28,11l118,118q11,11 11,28t-11,28q-11,11 -28,11t-28,-11ZM800,560q-33,0 -56.5,-23.5T720,480q0,-33 23.5,-56.5T800,400q33,0 56.5,23.5T880,480q0,33 -23.5,56.5T800,560Z" />
    </group>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_favorite_20dp.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="20dp"
    android:height="20dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M480,790q-13,0 -25.5,-4.5T431,771l-59,-54q-109,-97 -192.5,-189.5T96,326q0,-88.02 59.85,-147.01Q215.7,120 305,120q51.2,0 96.6,21.5Q447,163 480,203q35,-40 79.66,-61.5t95.02,-21.5Q744,120 804,178.99T864,326q0,109 -83.5,201.5T588,717l-59,54q-11,10 -23.5,14.5T480,790ZM446,278q-24,-41 -60,-63.5T305,192q-58.71,0 -97.86,38Q168,268 168,326.39 168,377 204,433t86,109.5Q340,596 393,642t87,76q34,-30 87,-76t103,-99.5Q720,489 756,433t36,-106.61Q792,268 752.86,230q-39.15,-38 -97.86,-38 -45,0 -81.5,22.5T513,278q-5,10 -14.05,14.5t-19,4.5q-9.95,0 -19.45,-4.5T446,278ZM480,455Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_favorite_filled_20dp.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="20dp"
    android:height="20dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M480,790q-13,0 -25.5,-4.5T431,771l-59,-54q-109,-97 -192.5,-189.5T96,326q0,-88 60,-147t149,-59q51,0 96.5,21.5T480,203q35,-40 79.5,-61.5T655,120q89,0 149,59t60,147q0,109 -83.5,201.5T588,717l-59,54q-11,10 -23.5,14.5T480,790Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_files.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="32dp"
    android:height="32dp"
    android:viewportWidth="960"
    android:viewportHeight="960">

    <path
        android:fillColor="#111"
        android:pathData="M146.67,800q-27.5,0 -47.09,-19.58Q80,760.83 80,733.33v-426.66q0,-27.5 19.58,-47.09Q119.17,240 146.67,240L396,240l80,-80h337.33q27.5,0 47.09,19.58Q880,199.17 880,226.67v506.66q0,27.5 -19.58,47.09Q840.83,800 813.33,800L146.67,800ZM210.33,520L440,520v-229.67L210.33,520ZM146.67,489.33 L329.33,306.67L146.67,306.67v182.66ZM146.67,586.67v146.66h666.66v-506.66L506.67,226.67L506.67,520q0,27.5 -19.59,47.08 -19.58,19.59 -47.08,19.59L146.67,586.67ZM446.67,446.67Z" />

</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_github.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="116"
    android:viewportHeight="116">

    <path
        android:fillColor="#FF000000"
        android:pathData="M57.9,10C30.8,10 9,32 9,59.2C9,81 23,99.4 42.4,105.9c2.4,0.5 3.3,-1.1 3.3,-2.4c0,-1.1 -0.1,-5.1 -0.1,-9.1c-13.6,2.9 -16.4,-5.9 -16.4,-5.9c-2.2,-5.7 -5.4,-7.2 -5.4,-7.2c-4.4,-3 0.3,-3 0.3,-3c4.9,0.3 7.5,5.1 7.5,5.1c4.4,7.5 11.4,5.4 14.2,4.1c0.4,-3.2 1.7,-5.4 3.1,-6.6c-10.8,-1.1 -22.2,-5.4 -22.2,-24.3c0,-5.4 1.9,-9.8 5,-13.2c-0.5,-1.2 -2.2,-6.3 0.5,-13c0,0 4.1,-1.3 13.4,5.1c4,-1.1 8.1,-1.6 12.2,-1.6c4.1,0 8.3,0.6 12.2,1.6c9.3,-6.4 13.4,-5.1 13.4,-5.1c2.7,6.8 1,11.8 0.5,13c3.2,3.4 5,7.8 5,13.2c0,18.9 -11.4,23.1 -22.3,24.3c1.8,1.5 3.3,4.5 3.3,9.1c0,6.6 -0.1,11.9 -0.1,13.5c0,1.3 0.9,2.9 3.3,2.4c19.4,-6.5 33.4,-24.9 33.4,-46.7C106.7,32 84.8,10 57.9,10z" />

</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_heart_filled_40dp.xml
================================================================================

<vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="vector"
    android:width="28dp"
    android:height="28dp"
    android:viewportWidth="40"
    android:viewportHeight="40">
    <group
        android:name="group_2"
        android:pivotX="20"
        android:pivotY="20">
        <path
            android:name="path"
            android:pathData="M 20 34.1 C 19.7 34.1 19.3 34 19 33.9 C 18.7 33.8 18.4 33.6 18.1 33.3 L 15.7 31.1 C 12.4 28.1 9.5 25.1 7.1 22.3 C 4.7 19.5 3.4 16.5 3.4 13.3 C 3.4 10.8 4.3 8.6 6 6.9 C 7.7 5.2 9.8 4.3 12.3 4.3 C 13.7 4.3 15.1 4.6 16.5 5.3 C 17.8 6.1 19 7.1 20 8.5 C 21.1 7.1 22.3 6.1 23.6 5.4 C 24.9 4.7 26.3 4.4 27.7 4.4 C 30.2 4.4 32.3 5.3 34 7 C 35.7 8.7 36.6 10.8 36.6 13.4 C 36.6 16.6 35.4 19.6 32.9 22.4 C 30.4 25.2 27.5 28.2 24.2 31.2 L 21.8 33.4 C 21.6 33.6 21.3 33.8 20.9 34 C 20.7 34 20.3 34.1 20 34.1 Z"
            android:fillColor="#000"
            android:strokeWidth="1"/>
    </group>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_heart_filled_to_outline_40dp.xml
================================================================================

<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="28dp"
            android:height="28dp"
            android:viewportWidth="40"
            android:viewportHeight="40">
            <group
                android:name="group_2"
                android:pivotX="20"
                android:pivotY="20">
                <group
                    android:name="group_1"
                    android:pivotX="20"
                    android:pivotY="34">
                    <path
                        android:name="path"
                        android:pathData="M 36.7 13.3 C 36.7 16.5 35.5 19.5 33 22.3 C 30.5 25.1 27.6 28.1 24.3 31.1 L 21.9 33.3 C 21.7 33.5 21.4 33.7 21 33.9 C 20.7 34 20.3 34.1 20 34.1 L 21.6 28 L 18.7 25 L 24.1 18.1 L 15.9 14 L 20 8.5 C 21.1 7.1 22.3 6.1 23.6 5.4 C 24.9 4.7 26.3 4.4 27.7 4.4 C 30.2 4.4 32.3 5.3 34 6.9 C 35.8 8.7 36.7 10.8 36.7 13.3 Z"
                        android:fillColor="#000"
                        android:strokeWidth="1"/>
                </group>
                <group
                    android:name="group"
                    android:pivotX="20"
                    android:pivotY="34">
                    <path
                        android:name="path_1"
                        android:pathData="M 18.7 25 L 21.6 28 L 20 34.1 C 19.7 34.1 19.3 34 19 33.9 C 18.7 33.8 18.4 33.6 18.1 33.3 L 15.7 31.1 C 12.4 28.1 9.6 25.2 7.1 22.3 C 4.6 19.5 3.4 16.5 3.4 13.3 C 3.4 10.8 4.3 8.6 6 6.9 C 7.7 5.2 9.8 4.4 12.3 4.4 C 13.7 4.4 15.1 4.7 16.5 5.4 C 17.8 6.1 19 7.1 20 8.5 L 15.9 14 L 24.1 18.1 L 18.7 25 Z"
                        android:fillColor="#000"
                        android:strokeWidth="1"/>
                </group>
                <path
                    android:name="path_2"
                    android:pathData="M 20 34.1 C 19.7 34.1 19.3 34 19 33.9 C 18.7 33.8 18.4 33.6 18.1 33.3 L 15.7 31.1 C 12.4 28.1 9.5 25.1 7.1 22.3 C 4.7 19.5 3.4 16.5 3.4 13.3 C 3.4 10.8 4.3 8.6 6 6.9 C 7.7 5.2 9.8 4.3 12.3 4.3 C 13.7 4.3 15.1 4.6 16.5 5.3 C 17.8 6.1 19 7.1 20 8.5 C 21.1 7.1 22.3 6.1 23.6 5.4 C 24.9 4.7 26.3 4.4 27.7 4.4 C 30.2 4.4 32.3 5.3 34 7 C 35.7 8.7 36.6 10.8 36.6 13.4 C 36.6 16.6 35.4 19.6 32.9 22.4 C 30.4 25.2 27.5 28.2 24.2 31.2 L 21.8 33.4 C 21.5 33.7 21.3 33.8 20.9 34 C 20.7 34 20.3 34.1 20 34.1 Z M 18.8 11.4 C 18 10.2 17 9.1 15.9 8.4 C 14.8 7.6 13.5 7.2 12.2 7.2 C 10.4 7.2 9 7.8 7.8 8.9 C 6.7 10.1 6.1 11.5 6.1 13.3 C 6.1 14.8 6.6 16.5 7.7 18.2 C 8.8 19.9 10 21.6 11.5 23.2 C 13 24.8 14.5 26.3 16.1 27.7 C 17.7 29.1 19 30.3 20 31.2 C 21 30.3 22.3 29.1 23.9 27.7 C 25.5 26.3 27 24.8 28.5 23.1 C 30 21.5 31.2 19.8 32.3 18.1 C 33.4 16.4 33.9 14.8 33.9 13.2 C 33.9 11.4 33.3 10 32.2 8.8 C 31 7.6 29.6 7.1 27.8 7.1 C 26.4 7.1 25.2 7.5 24.1 8.2 C 23 9 22 10 21.2 11.3 C 21 11.5 20.9 11.7 20.7 11.8 C 20.5 11.9 20.3 12 20 12 C 19.7 12 19.5 11.9 19.3 11.8 C 19.1 11.9 18.9 11.7 18.8 11.4 Z"
                    android:fillColor="#000"
                    android:strokeWidth="1"/>
            </group>
        </vector>
    </aapt:attr>
    <target android:name="group">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="rotation"
                    android:startOffset="150"
                    android:duration="450"
                    android:valueFrom="0"
                    android:valueTo="-22"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/overshoot_interpolator"/>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:startOffset="150"
                    android:duration="450"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:startOffset="150"
                    android:duration="450"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="group_2">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:duration="100"
                    android:valueFrom="1"
                    android:valueTo="1.05"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="1.05"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:duration="100"
                    android:valueFrom="1"
                    android:valueTo="1.05"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="1.05"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="group_1">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="rotation"
                    android:duration="500"
                    android:valueFrom="0"
                    android:valueTo="8"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/overshoot_interpolator"/>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:startOffset="150"
                    android:duration="350"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:startOffset="150"
                    android:duration="350"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_heart_outline_40dp.xml
================================================================================

<vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="vector"
    android:width="28dp"
    android:height="28dp"
    android:viewportWidth="40"
    android:viewportHeight="40">
    <group
        android:name="group_2"
        android:pivotX="20"
        android:pivotY="20">
        <path
            android:name="path_2"
            android:pathData="M 20 34.1 C 19.7 34.1 19.3 34 19 33.9 C 18.7 33.8 18.4 33.6 18.1 33.3 L 15.7 31.1 C 12.4 28.1 9.5 25.1 7.1 22.3 C 4.7 19.5 3.4 16.5 3.4 13.3 C 3.4 10.8 4.3 8.6 6 6.9 C 7.7 5.2 9.8 4.3 12.3 4.3 C 13.7 4.3 15.1 4.6 16.5 5.3 C 17.8 6.1 19 7.1 20 8.5 C 21.1 7.1 22.3 6.1 23.6 5.4 C 24.9 4.7 26.3 4.4 27.7 4.4 C 30.2 4.4 32.3 5.3 34 7 C 35.7 8.7 36.6 10.8 36.6 13.4 C 36.6 16.6 35.4 19.6 32.9 22.4 C 30.4 25.2 27.5 28.2 24.2 31.2 L 21.8 33.4 C 21.5 33.7 21.3 33.8 20.9 34 C 20.7 34 20.3 34.1 20 34.1 Z M 18.8 11.4 C 18 10.2 17 9.1 15.9 8.4 C 14.8 7.6 13.5 7.2 12.2 7.2 C 10.4 7.2 9 7.8 7.8 8.9 C 6.7 10.1 6.1 11.5 6.1 13.3 C 6.1 14.8 6.6 16.5 7.7 18.2 C 8.8 19.9 10 21.6 11.5 23.2 C 13 24.8 14.5 26.3 16.1 27.7 C 17.7 29.1 19 30.3 20 31.2 C 21 30.3 22.3 29.1 23.9 27.7 C 25.5 26.3 27 24.8 28.5 23.1 C 30 21.5 31.2 19.8 32.3 18.1 C 33.4 16.4 33.9 14.8 33.9 13.2 C 33.9 11.4 33.3 10 32.2 8.8 C 31 7.6 29.6 7.1 27.8 7.1 C 26.4 7.1 25.2 7.5 24.1 8.2 C 23 9 22 10 21.2 11.3 C 21 11.5 20.9 11.7 20.7 11.8 C 20.5 11.9 20.3 12 20 12 C 19.7 12 19.5 11.9 19.3 11.8 C 19.1 11.9 18.9 11.7 18.8 11.4 Z"
            android:fillColor="#000"
            android:strokeWidth="1"/>
    </group>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_heart_outline_to_filled_40dp.xml
================================================================================

<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="28dp"
            android:height="28dp"
            android:viewportWidth="40"
            android:viewportHeight="40">
            <group
                android:name="group_2"
                android:pivotX="20"
                android:pivotY="20">
                <path
                    android:name="path_2"
                    android:pathData="M 20 34.1 C 19.7 34.1 19.3 34 19 33.9 C 18.7 33.8 18.4 33.6 18.1 33.3 L 15.7 31.1 C 12.4 28.1 9.5 25.1 7.1 22.3 C 4.7 19.5 3.4 16.5 3.4 13.3 C 3.4 10.8 4.3 8.6 6 6.9 C 7.7 5.2 9.8 4.3 12.3 4.3 C 13.7 4.3 15.1 4.6 16.5 5.3 C 17.8 6.1 19 7.1 20 8.5 C 21.1 7.1 22.3 6.1 23.6 5.4 C 24.9 4.7 26.3 4.4 27.7 4.4 C 30.2 4.4 32.3 5.3 34 7 C 35.7 8.7 36.6 10.8 36.6 13.4 C 36.6 16.6 35.4 19.6 32.9 22.4 C 30.4 25.2 27.5 28.2 24.2 31.2 L 21.8 33.4 C 21.5 33.7 21.3 33.8 20.9 34 C 20.7 34 20.3 34.1 20 34.1 Z M 18.8 11.4 C 18 10.2 17 9.1 15.9 8.4 C 14.8 7.6 13.5 7.2 12.2 7.2 C 10.4 7.2 9 7.8 7.8 8.9 C 6.7 10.1 6.1 11.5 6.1 13.3 C 6.1 14.8 6.6 16.5 7.7 18.2 C 8.8 19.9 10 21.6 11.5 23.2 C 13 24.8 14.5 26.3 16.1 27.7 C 17.7 29.1 19 30.3 20 31.2 C 21 30.3 22.3 29.1 23.9 27.7 C 25.5 26.3 27 24.8 28.5 23.1 C 30 21.5 31.2 19.8 32.3 18.1 C 33.4 16.4 33.9 14.8 33.9 13.2 C 33.9 11.4 33.3 10 32.2 8.8 C 31 7.6 29.6 7.1 27.8 7.1 C 26.4 7.1 25.2 7.5 24.1 8.2 C 23 9 22 10 21.2 11.3 C 21 11.5 20.9 11.7 20.7 11.8 C 20.5 11.9 20.3 12 20 12 C 19.7 12 19.5 11.9 19.3 11.8 C 19.1 11.9 18.9 11.7 18.8 11.4 Z"
                    android:fillColor="#000"
                    android:strokeWidth="1"/>
                <group
                    android:name="group"
                    android:pivotX="20"
                    android:pivotY="34">
                    <path
                        android:name="path"
                        android:pathData="M 20 34.1 C 19.7 34.1 19.3 34 19 33.9 C 18.7 33.8 18.4 33.6 18.1 33.3 L 15.7 31.1 C 12.4 28.1 9.5 25.1 7.1 22.3 C 4.7 19.5 3.4 16.5 3.4 13.3 C 3.4 10.8 4.3 8.6 6 6.9 C 7.7 5.2 9.8 4.3 12.3 4.3 C 13.7 4.3 15.1 4.6 16.5 5.3 C 17.8 6.1 19 7.1 20 8.5 C 21.1 7.1 22.3 6.1 23.6 5.4 C 24.9 4.7 26.3 4.4 27.7 4.4 C 30.2 4.4 32.3 5.3 34 7 C 35.7 8.7 36.6 10.8 36.6 13.4 C 36.6 16.6 35.4 19.6 32.9 22.4 C 30.4 25.2 27.5 28.2 24.2 31.2 L 21.8 33.4 C 21.6 33.6 21.3 33.8 20.9 34 C 20.7 34 20.3 34.1 20 34.1 Z"
                        android:fillColor="#000"
                        android:strokeWidth="1"/>
                </group>
            </group>
        </vector>
    </aapt:attr>
    <target android:name="group_2">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:startOffset="300"
                    android:duration="100"
                    android:valueFrom="1"
                    android:valueTo="1.05"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:startOffset="400"
                    android:duration="100"
                    android:valueFrom="1.05"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:startOffset="300"
                    android:duration="100"
                    android:valueFrom="1"
                    android:valueTo="1.05"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:startOffset="400"
                    android:duration="100"
                    android:valueFrom="1.05"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="group">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:duration="500"
                    android:valueFrom="0"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:duration="500"
                    android:valueFrom="0"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_hide.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="m763,876 l-63,-62q-49,32 -104.5,49T480,880q-83,0 -156,-31.5T197,763q-54,-54 -85.5,-127T80,480q0,-60 17,-115.5T146,260l-63,-63q-12,-12 -12,-28.5T83,140q12,-12 28.5,-12t28.5,12l680,680q12,12 12,28t-12,28q-12,12 -28.5,12T763,876ZM480,800q43,0 83.5,-11t78.5,-33L204,318q-22,38 -33,78.5T160,480q0,133 93.5,226.5T480,800ZM480,160q-33,0 -64.5,6.5T354,186q-16,7 -32,2t-24,-19q-8,-14 -3.5,-30t19.5,-23q39,-18 80.5,-27t85.5,-9q83,0 156,31.5T763,197q54,54 85.5,127T880,480q0,44 -9,85.5T844,646q-7,15 -23,19.5t-30,-3.5q-14,-8 -19,-24t2,-32q13,-30 19.5,-61.5T800,480q0,-133 -93.5,-226.5T480,160ZM537,423ZM423,537Z"
      android:fillColor="#e3e3e3"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_high_quality.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M590,600v30q0,13 8.5,21.5T620,660q13,0 21.5,-8.5T650,630v-30h30q17,0 28.5,-11.5T720,560v-160q0,-17 -11.5,-28.5T680,360L560,360q-17,0 -28.5,11.5T520,400v160q0,17 11.5,28.5T560,600h30ZM300,520h80v50q0,13 8.5,21.5T410,600q13,0 21.5,-8.5T440,570v-180q0,-13 -8.5,-21.5T410,360q-13,0 -21.5,8.5T380,390v70h-80v-70q0,-13 -8.5,-21.5T270,360q-13,0 -21.5,8.5T240,390v180q0,13 8.5,21.5T270,600q13,0 21.5,-8.5T300,570v-50ZM580,540v-120h80v120h-80ZM160,800q-33,0 -56.5,-23.5T80,720v-480q0,-33 23.5,-56.5T160,160h640q33,0 56.5,23.5T880,240v480q0,33 -23.5,56.5T800,800L160,800ZM160,720h640v-480L160,240v480ZM160,720v-480,480Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_history.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M480,840q-126,0 -223,-76.5T131,568q-4,-15 6,-27.5t27,-14.5q16,-2 29,6t18,24q24,90 99,147t170,57q117,0 198.5,-81.5T760,480q0,-117 -81.5,-198.5T480,200q-69,0 -129,32t-101,88h70q17,0 28.5,11.5T360,360q0,17 -11.5,28.5T320,400L160,400q-17,0 -28.5,-11.5T120,360v-160q0,-17 11.5,-28.5T160,160q17,0 28.5,11.5T200,200v54q51,-64 124.5,-99T480,120q75,0 140.5,28.5t114,77q48.5,48.5 77,114T840,480q0,75 -28.5,140.5t-77,114q-48.5,48.5 -114,77T480,840ZM520,464 L620,564q11,11 11,28t-11,28q-11,11 -28,11t-28,-11L452,508q-6,-6 -9,-13.5t-3,-15.5v-159q0,-17 11.5,-28.5T480,280q17,0 28.5,11.5T520,320v144Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_home_anim.xml
================================================================================

<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="960dp"
            android:height="960dp"
            android:viewportWidth="960"
            android:viewportHeight="960">
            <clip-path
                android:name="mask"
                android:pathData="M 160 760 L 160 400 Q 160 381 168.5 364 Q 177 347 192 336 L 432 156 Q 453 140 480 140 Q 507 140 528 156 L 768 336 Q 783 347 791.5 364 Q 800 381 800 400 L 800 760 Q 800 793 776.5 816.5 Q 753 840 720 840 L 600 840 Q 583 840 571.5 828.5 Q 560 817 560 800 L 560 600 Q 560 583 548.5 571.5 Q 537 560 520 560 L 440 560 Q 423 560 411.5 571.5 Q 400 583 400 600 L 400 800 Q 400 817 388.5 828.5 Q 377 840 360 840 L 240 840 Q 207 840 183.5 816.5 Q 160 793 160 760 Z"/>
            <path
                android:name="path_1"
                android:pathData="M 240 760 L 360 760 L 360 560 Q 360 543 371.5 531.5 Q 383 520 400 520 L 560 520 Q 577 520 588.5 531.5 Q 600 543 600 560 L 600 760 L 720 760 L 720 400 L 480 220 L 240 400 L 240 760 Z M 160 760 L 160 400 Q 160 381 168.5 364 Q 177 347 192 336 L 432 156 Q 453 140 480 140 Q 507 140 528 156 L 768 336 Q 783 347 791.5 364 Q 800 381 800 400 L 800 760 Q 800 793 776.5 816.5 Q 753 840 720 840 L 560 840 Q 543 840 531.5 828.5 Q 520 817 520 800 L 520 600 L 440 600 L 440 800 Q 440 817 428.5 828.5 Q 417 840 400 840 L 240 840 Q 207 840 183.5 816.5 Q 160 793 160 760 Z M 480 490 Z"
                android:fillColor="#FF000000"/>
            <group
                android:name="group"
                android:translateY="640">
                <path
                    android:name="path"
                    android:pathData="M 160 760 L 160 400 Q 160 381 168.5 364 Q 177 347 192 336 L 432 156 Q 453 140 480 140 Q 507 140 528 156 L 768 336 Q 783 347 791.5 364 Q 800 381 800 400 L 800 760 Q 800 793 776.5 816.5 Q 753 840 720 840 L 600 840 Q 583 840 571.5 828.5 Q 560 817 560 800 L 560 600 Q 560 583 548.5 571.5 Q 537 560 520 560 L 440 560 Q 423 560 411.5 571.5 Q 400 583 400 600 L 400 800 Q 400 817 388.5 828.5 Q 377 840 360 840 L 240 840 Q 207 840 183.5 816.5 Q 160 793 160 760 Z"
                    android:fillColor="#FF000000"/>
            </group>
        </vector>
    </aapt:attr>
    <target android:name="group">
        <aapt:attr name="android:animation">
            <objectAnimator
                android:propertyName="translateY"
                android:startOffset="51"
                android:duration="300"
                android:valueFrom="640"
                android:valueTo="0"
                android:valueType="floatType"
                android:interpolator="@android:interpolator/fast_out_slow_in"/>
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_home_filled.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M160,760v-360q0,-19 8.5,-36t23.5,-28l240,-180q21,-16 48,-16t48,16l240,180q15,11 23.5,28t8.5,36v360q0,33 -23.5,56.5T720,840L600,840q-17,0 -28.5,-11.5T560,800v-200q0,-17 -11.5,-28.5T520,560h-80q-17,0 -28.5,11.5T400,600v200q0,17 -11.5,28.5T360,840L240,840q-33,0 -56.5,-23.5T160,760Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_home_outline.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M240,760h120v-200q0,-17 11.5,-28.5T400,520h160q17,0 28.5,11.5T600,560v200h120v-360L480,220 240,400v360ZM160,760v-360q0,-19 8.5,-36t23.5,-28l240,-180q21,-16 48,-16t48,16l240,180q15,11 23.5,28t8.5,36v360q0,33 -23.5,56.5T720,840L560,840q-17,0 -28.5,-11.5T520,800v-200h-80v200q0,17 -11.5,28.5T400,840L240,840q-33,0 -56.5,-23.5T160,760ZM480,490Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_incognito.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="24"
    android:viewportHeight="24">
    <path
        android:fillColor="#FF000000"
        android:pathData="M17.06,13C15.2,13 13.64,14.33 13.24,16.1C12.29,15.69 11.42,15.8 10.76,16.09C10.35,14.31 8.79,13 6.94,13C4.77,13 3,14.79 3,17C3,19.21 4.77,21 6.94,21C9,21 10.68,19.38 10.84,17.32C11.18,17.08 12.07,16.63 13.16,17.34C13.34,19.39 15,21 17.06,21C19.23,21 21,19.21 21,17C21,14.79 19.23,13 17.06,13M6.94,19.86C5.38,19.86 4.13,18.58 4.13,17S5.39,14.14 6.94,14.14C8.5,14.14 9.75,15.42 9.75,17S8.5,19.86 6.94,19.86M17.06,19.86C15.5,19.86 14.25,18.58 14.25,17S15.5,14.14 17.06,14.14C18.62,14.14 19.88,15.42 19.88,17S18.61,19.86 17.06,19.86M22,10.5H2V12H22V10.5M15.53,2.63C15.31,2.14 14.75,1.88 14.22,2.05L12,2.79L9.77,2.05L9.72,2.04C9.19,1.89 8.63,2.17 8.43,2.68L6,9H18L15.56,2.68L15.53,2.63Z" />
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_info.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M480,680q17,0 28.5,-11.5T520,640v-160q0,-17 -11.5,-28.5T480,440q-17,0 -28.5,11.5T440,480v160q0,17 11.5,28.5T480,680ZM480,360q17,0 28.5,-11.5T520,320q0,-17 -11.5,-28.5T480,280q-17,0 -28.5,11.5T440,320q0,17 11.5,28.5T480,360ZM480,880q-83,0 -156,-31.5T197,763q-54,-54 -85.5,-127T80,480q0,-83 31.5,-156T197,197q54,-54 127,-85.5T480,80q83,0 156,31.5T763,197q54,54 85.5,127T880,480q0,83 -31.5,156T763,763q-54,54 -127,85.5T480,880ZM480,800q134,0 227,-93t93,-227q0,-134 -93,-227t-227,-93q-134,0 -227,93t-93,227q0,134 93,227t227,93ZM480,480Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_input.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M160,800q-33,0 -56.5,-23.5T80,720v-80q0,-17 11.5,-28.5T120,600q17,0 28.5,11.5T160,640v80h640v-480L160,240v80q0,17 -11.5,28.5T120,360q-17,0 -28.5,-11.5T80,320v-80q0,-33 23.5,-56.5T160,160h640q33,0 56.5,23.5T880,240v480q0,33 -23.5,56.5T800,800L160,800ZM487,520L120,520q-17,0 -28.5,-11.5T80,480q0,-17 11.5,-28.5T120,440h367l-55,-54q-12,-11 -11.5,-27.5T432,330q12,-12 28.5,-12.5T489,329l123,123q12,12 12,28t-12,28L489,631q-12,12 -28.5,12T432,631q-11,-12 -11.5,-28.5T432,574l55,-54Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_keyboard_arrow_down.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M480,599q-8,0 -15,-2.5t-13,-8.5L268,404q-11,-11 -11,-28t11,-28q11,-11 28,-11t28,11l156,156 156,-156q11,-11 28,-11t28,11q11,11 11,28t-11,28L508,588q-6,6 -13,8.5t-15,2.5Z"
      android:fillColor="#e3e3e3"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_language.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M480,880q-82,0 -155,-31.5t-127.5,-86Q143,708 111.5,635T80,480q0,-83 31.5,-155.5t86,-127Q252,143 325,111.5T480,80q83,0 155.5,31.5t127,86q54.5,54.5 86,127T880,480q0,82 -31.5,155t-86,127.5q-54.5,54.5 -127,86T480,880ZM480,798q26,-36 45,-75t31,-83L404,640q12,44 31,83t45,75ZM376,782q-18,-33 -31.5,-68.5T322,640L204,640q29,50 72.5,87t99.5,55ZM584,782q56,-18 99.5,-55t72.5,-87L638,640q-9,38 -22.5,73.5T584,782ZM170,560h136q-3,-20 -4.5,-39.5T300,480q0,-21 1.5,-40.5T306,400L170,400q-5,20 -7.5,39.5T160,480q0,21 2.5,40.5T170,560ZM386,560h188q3,-20 4.5,-39.5T580,480q0,-21 -1.5,-40.5T574,400L386,400q-3,20 -4.5,39.5T380,480q0,21 1.5,40.5T386,560ZM654,560h136q5,-20 7.5,-39.5T800,480q0,-21 -2.5,-40.5T790,400L654,400q3,20 4.5,39.5T660,480q0,21 -1.5,40.5T654,560ZM638,320h118q-29,-50 -72.5,-87T584,178q18,33 31.5,68.5T638,320ZM404,320h152q-12,-44 -31,-83t-45,-75q-26,36 -45,75t-31,83ZM204,320h118q9,-38 22.5,-73.5T376,178q-56,18 -99.5,55T204,320Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_launcher_background.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="40"
    android:viewportHeight="40">
  <path
      android:pathData="M0,0h40v40h-40z">
    <aapt:attr name="android:fillColor">
      <gradient 
          android:centerX="16"
          android:centerY="16"
          android:gradientRadius="16"
          android:type="radial">
        <item android:offset="0" android:color="@color/app_color_highlight"/>
        <item android:offset="1" android:color="@color/app_color_shadow"/>
      </gradient>
    </aapt:attr>
  </path>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_launcher_foreground.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="40"
    android:viewportHeight="40">
  <path
      android:pathData="M23.594,20.703l-4.787,2.764a0.812,0.812 0,0 1,-1.218 -0.703V17.236a0.812,0.812 0,0 1,1.218 -0.703l4.787,2.764A0.812,0.812 0,0 1,23.594 20.703Z"
      android:fillColor="#2F3233"/>
  <path
      android:pathData="M0,0V40H40V0ZM28.43,21.29a1.725,1.725 0,0 0,-0.56 1.28,1.666 1.666,0 0,0 0.08,0.53 1.625,1.625 0,0 1,0.08 0.53,1.747 1.747,0 0,1 -1.37,1.7 1.742,1.742 0,0 0,-1.33 1.33,1.747 1.747,0 0,1 -1.7,1.37 1.625,1.625 0,0 1,-0.53 -0.08,1.666 1.666,0 0,0 -0.53,-0.08 1.725,1.725 0,0 0,-1.28 0.56,1.745 1.745,0 0,1 -2.58,0 1.725,1.725 0,0 0,-1.28 -0.56,1.666 1.666,0 0,0 -0.53,0.08 1.625,1.625 0,0 1,-0.53 0.08,1.747 1.747,0 0,1 -1.7,-1.37 1.742,1.742 0,0 0,-1.33 -1.33,1.747 1.747,0 0,1 -1.37,-1.7 1.625,1.625 0,0 1,0.08 -0.53,1.666 1.666,0 0,0 0.08,-0.53 1.725,1.725 0,0 0,-0.56 -1.28,1.745 1.745,0 0,1 0,-2.58 1.725,1.725 0,0 0,0.56 -1.28,1.666 1.666,0 0,0 -0.08,-0.53 1.625,1.625 0,0 1,-0.08 -0.53,1.747 1.747,0 0,1 1.37,-1.7 1.742,1.742 0,0 0,1.33 -1.33,1.747 1.747,0 0,1 1.7,-1.37 1.625,1.625 0,0 1,0.53 0.08,1.666 1.666,0 0,0 0.53,0.08 1.725,1.725 0,0 0,1.28 -0.56,1.745 1.745,0 0,1 2.58,0 1.723,1.723 0,0 0,1.81 0.48,1.625 1.625,0 0,1 0.53,-0.08 1.747,1.747 0,0 1,1.7 1.37,1.742 1.742,0 0,0 1.33,1.33 1.747,1.747 0,0 1,1.37 1.7,1.625 1.625,0 0,1 -0.08,0.53 1.666,1.666 0,0 0,-0.08 0.53,1.725 1.725,0 0,0 0.56,1.28 1.745,1.745 0,0 1,0 2.58Z"
      android:fillColor="#2F3233"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_launcher_monochrome.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/ic_mono"
    android:insetTop="24dp"
    android:insetLeft="24dp"
    android:insetRight="24dp"
    android:insetBottom="24dp" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_library_music.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M500,600q42,0 71,-29t29,-71v-220h80q17,0 28.5,-11.5T720,240q0,-17 -11.5,-28.5T680,200h-80q-17,0 -28.5,11.5T560,240v180q-13,-10 -28,-15t-32,-5q-42,0 -71,29t-29,71q0,42 29,71t71,29ZM320,720q-33,0 -56.5,-23.5T240,640v-480q0,-33 23.5,-56.5T320,80h480q33,0 56.5,23.5T880,160v480q0,33 -23.5,56.5T800,720L320,720ZM320,640h480v-480L320,160v480ZM160,880q-33,0 -56.5,-23.5T80,800v-520q0,-17 11.5,-28.5T120,240q17,0 28.5,11.5T160,280v520h520q17,0 28.5,11.5T720,840q0,17 -11.5,28.5T680,880L160,880ZM320,160v480,-480Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_login.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M520,840q-17,0 -28.5,-11.5T480,800q0,-17 11.5,-28.5T520,760h240v-560L520,200q-17,0 -28.5,-11.5T480,160q0,-17 11.5,-28.5T520,120h240q33,0 56.5,23.5T840,200v560q0,33 -23.5,56.5T760,840L520,840ZM447,520L160,520q-17,0 -28.5,-11.5T120,480q0,-17 11.5,-28.5T160,440h287l-75,-75q-11,-11 -11,-27t11,-28q11,-12 28,-12.5t29,11.5l143,143q12,12 12,28t-12,28L429,651q-12,12 -28.5,11.5T372,650q-11,-12 -10.5,-28.5T373,594l74,-74Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_logout.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M200,840q-33,0 -56.5,-23.5T120,760v-560q0,-33 23.5,-56.5T200,120h240q17,0 28.5,11.5T480,160q0,17 -11.5,28.5T440,200L200,200v560h240q17,0 28.5,11.5T480,800q0,17 -11.5,28.5T440,840L200,840ZM687,520L400,520q-17,0 -28.5,-11.5T360,480q0,-17 11.5,-28.5T400,440h287l-75,-75q-11,-11 -11,-27t11,-28q11,-12 28,-12.5t29,11.5l143,143q12,12 12,28t-12,28L669,651q-12,12 -28.5,11.5T612,650q-11,-12 -10.5,-28.5T613,594l74,-74Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_mono.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="18dp"
    android:height="18dp"
    android:viewportWidth="18"
    android:viewportHeight="18">
  <path
      android:pathData="M18,9a1.747,1.747 0,0 0,-0.57 -1.29,1.725 1.725,0 0,1 -0.56,-1.28 1.666,1.666 0,0 1,0.08 -0.53,1.625 1.625,0 0,0 0.08,-0.53 1.747,1.747 0,0 0,-1.37 -1.7,1.742 1.742,0 0,1 -1.33,-1.33A1.747,1.747 0,0 0,12.63 0.97a1.625,1.625 0,0 0,-0.53 0.08A1.723,1.723 0,0 1,10.29 0.57a1.745,1.745 0,0 0,-2.58 0,1.725 1.725,0 0,1 -1.28,0.56 1.666,1.666 0,0 1,-0.53 -0.08A1.625,1.625 0,0 0,5.37 0.97a1.747,1.747 0,0 0,-1.7 1.37A1.742,1.742 0,0 1,2.34 3.67,1.747 1.747,0 0,0 0.97,5.37a1.625,1.625 0,0 0,0.08 0.53,1.666 1.666,0 0,1 0.08,0.53A1.725,1.725 0,0 1,0.57 7.71a1.745,1.745 0,0 0,0 2.58,1.725 1.725,0 0,1 0.56,1.28 1.666,1.666 0,0 1,-0.08 0.53,1.625 1.625,0 0,0 -0.08,0.53 1.747,1.747 0,0 0,1.37 1.7,1.742 1.742,0 0,1 1.33,1.33 1.747,1.747 0,0 0,1.7 1.37,1.625 1.625,0 0,0 0.53,-0.08 1.666,1.666 0,0 1,0.53 -0.08,1.725 1.725,0 0,1 1.28,0.56 1.745,1.745 0,0 0,2.58 0,1.725 1.725,0 0,1 1.28,-0.56 1.666,1.666 0,0 1,0.53 0.08,1.625 1.625,0 0,0 0.53,0.08 1.747,1.747 0,0 0,1.7 -1.37,1.742 1.742,0 0,1 1.33,-1.33 1.747,1.747 0,0 0,1.37 -1.7,1.625 1.625,0 0,0 -0.08,-0.53 1.666,1.666 0,0 1,-0.08 -0.53,1.725 1.725,0 0,1 0.56,-1.28A1.747,1.747 0,0 0,18 9ZM12.59,9.7L7.81,12.47a0.816,0.816 0,0 1,-1.22 -0.71L6.59,6.24a0.816,0.816 0,0 1,1.22 -0.71L12.59,8.3A0.8,0.8 0,0 1,12.59 9.7Z"
      android:fillColor="#fff"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_more_horiz.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorOnSurface"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M240,560q-33,0 -56.5,-23.5T160,480q0,-33 23.5,-56.5T240,400q33,0 56.5,23.5T320,480q0,33 -23.5,56.5T240,560ZM480,560q-33,0 -56.5,-23.5T400,480q0,-33 23.5,-56.5T480,400q33,0 56.5,23.5T560,480q0,33 -23.5,56.5T480,560ZM720,560q-33,0 -56.5,-23.5T640,480q0,-33 23.5,-56.5T720,400q33,0 56.5,23.5T800,480q0,33 -23.5,56.5T720,560Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_music.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="48dp"
    android:height="48dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M398.15,810.31q-54.04,0 -91.71,-37.67t-37.67,-91.71q0,-54.04 37.67,-91.71 37.67,-37.67 91.71,-37.67 23.92,0 46.54,7.65 22.62,7.65 39.08,24.5v-400.31q0,-14.04 9.92,-23.86 9.92,-9.83 24.09,-9.83h139.81q14.17,0 24.41,9.83 10.23,9.83 10.23,23.86v40.23q0,15.04 -10.33,24.87t-24.36,9.83h-130v422.61q0,54.04 -38.17,91.71 -38.17,37.67 -91.21,37.67Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_numbers.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="m360,640 l-33,131q-3,13 -13,21t-24,8q-19,0 -31,-15t-7,-33l28,-112L171,640q-20,0 -32,-15.5t-7,-34.5q3,-14 14,-22t25,-8h129l40,-160L231,400q-20,0 -32,-15.5t-7,-34.5q3,-14 14,-22t25,-8h129l33,-131q3,-13 13,-21t24,-8q19,0 31,15t7,33l-28,112h160l33,-131q3,-13 13,-21t24,-8q19,0 31,15t7,33l-28,112h109q20,0 32,15.5t7,34.5q-3,14 -14,22t-25,8L660,400l-40,160h109q20,0 32,15.5t7,34.5q-3,14 -14,22t-25,8L600,640l-33,131q-3,13 -13,21t-24,8q-19,0 -31,-15t-7,-33l28,-112L360,640ZM380,560h160l40,-160L420,400l-40,160Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_offline_files.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="48dp"
    android:height="48dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">

    <group
        android:pivotX="480"
        android:pivotY="480"
        android:scaleX="0.5"
        android:scaleY="0.5">

        <path
            android:fillColor="#e3e3e3"
            android:pathData="M160,800q-33,0 -56.5,-23.5T80,720v-480q0,-33 23.5,-56.5T160,160h240l80,80h320q33,0 56.5,23.5T880,320v400q0,33 -23.5,56.5T800,800L160,800ZM160,720h640v-400L447,320l-80,-80L160,240v480ZM160,720v-480,480Z" />
    </group>

</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_offline.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle">
            <solid android:color="@color/app_color" />
            <size
                android:width="48dp"
                android:height="48dp" />
        </shape>
    </item>
    <item
        android:width="32dp"
        android:height="32dp"
        android:drawable="@drawable/ic_files"
        android:gravity="center" />
</layer-list>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_palette.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorOnSurface"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M480,880q-82,0 -155,-31.5t-127.5,-86Q143,708 111.5,635T80,480q0,-83 32.5,-156t88,-127Q256,143 330,111.5T488,80q80,0 151,27.5t124.5,76q53.5,48.5 85,115T880,442q0,115 -70,176.5T640,680h-74q-9,0 -12.5,5t-3.5,11q0,12 15,34.5t15,51.5q0,50 -27.5,74T480,880ZM480,480ZM260,520q26,0 43,-17t17,-43q0,-26 -17,-43t-43,-17q-26,0 -43,17t-17,43q0,26 17,43t43,17ZM380,360q26,0 43,-17t17,-43q0,-26 -17,-43t-43,-17q-26,0 -43,17t-17,43q0,26 17,43t43,17ZM580,360q26,0 43,-17t17,-43q0,-26 -17,-43t-43,-17q-26,0 -43,17t-17,43q0,26 17,43t43,17ZM700,520q26,0 43,-17t17,-43q0,-26 -17,-43t-43,-17q-26,0 -43,17t-17,43q0,26 17,43t43,17ZM480,800q9,0 14.5,-5t5.5,-13q0,-14 -15,-33t-15,-57q0,-42 29,-67t71,-25h70q66,0 113,-38.5T800,442q0,-121 -92.5,-201.5T488,160q-136,0 -232,93t-96,227q0,133 93.5,226.5T480,800Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_password.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M120,680h720q17,0 28.5,11.5T880,720q0,17 -11.5,28.5T840,760L120,760q-17,0 -28.5,-11.5T80,720q0,-17 11.5,-28.5T120,680ZM160,458 L141,492q-6,11 -18,14t-23,-3q-11,-6 -14,-18t3,-23l19,-34L70,428q-13,0 -21.5,-8.5T40,398q0,-13 8.5,-21.5T70,368h38l-19,-32q-6,-11 -3,-23t14,-18q11,-6 23,-3t18,14l19,32 19,-32q6,-11 18,-14t23,3q11,6 14,18t-3,23l-19,32h38q13,0 21.5,8.5T280,398q0,13 -8.5,21.5T250,428h-38l19,34q6,11 3,23t-14,18q-11,6 -23,3t-18,-14l-19,-34ZM480,458 L461,492q-6,11 -18,14t-23,-3q-11,-6 -14,-18t3,-23l19,-34h-38q-13,0 -21.5,-8.5T360,398q0,-13 8.5,-21.5T390,368h38l-19,-32q-6,-11 -3,-23t14,-18q11,-6 23,-3t18,14l19,32 19,-32q6,-11 18,-14t23,3q11,6 14,18t-3,23l-19,32h38q13,0 21.5,8.5T600,398q0,13 -8.5,21.5T570,428h-38l19,34q6,11 3,23t-14,18q-11,6 -23,3t-18,-14l-19,-34ZM800,458 L781,492q-6,11 -18,14t-23,-3q-11,-6 -14,-18t3,-23l19,-34h-38q-13,0 -21.5,-8.5T680,398q0,-13 8.5,-21.5T710,368h38l-19,-32q-6,-11 -3,-23t14,-18q11,-6 23,-3t18,14l19,32 19,-32q6,-11 18,-14t23,3q11,6 14,18t-3,23l-19,32h38q13,0 21.5,8.5T920,398q0,13 -8.5,21.5T890,428h-38l19,34q6,11 3,23t-14,18q-11,6 -23,3t-18,-14l-19,-34Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_pause_48dp.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="48dp"
    android:height="48dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M615,760q-24.75,0 -42.38,-17.63T555,700v-440q0,-24.75 17.63,-42.38T615,200h55q24.75,0 42.38,17.63T730,260v440q0,24.75 -17.63,42.38T670,760h-55ZM290,760q-24.75,0 -42.38,-17.63T230,700v-440q0,-24.75 17.63,-42.38T290,200h55q24.75,0 42.38,17.63T405,260v440q0,24.75 -17.63,42.38T345,760h-55Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_pause_to_play_48dp_anim.xml
================================================================================

<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="48dp"
            android:height="48dp"
            android:viewportWidth="960"
            android:viewportHeight="960">
            <group
                android:name="group"
                android:pivotX="480"
                android:pivotY="480">
                <path
                    android:name="path_2"
                    android:pathData="M 615 760 Q 590.25 760 572.62 742.37 Q 554.99 724.74 555 700 L 555 260 Q 555 235.25 572.63 217.62 Q 590.26 199.99 615 200 L 670 200 Q 694.75 200 712.38 217.63 Q 730.01 235.26 730 260 L 730 700 Q 730 724.75 712.37 742.38 Q 694.74 760.01 670 760 L 615 760 Z M 290 760 Q 265.25 760 247.62 742.37 Q 229.99 724.74 230 700 L 230 260 Q 230 235.25 247.63 217.62 Q 265.26 199.99 290 200 L 345 200 Q 369.75 200 387.38 217.63 Q 405.01 235.26 405 260 L 405 700 Q 405 724.75 387.37 742.38 Q 369.74 760.01 345 760 L 290 760 Z"
                    android:fillColor="#FF000000"/>
            </group>
        </vector>
    </aapt:attr>
    <target android:name="group">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="rotation"
                    android:duration="300"
                    android:valueFrom="0"
                    android:valueTo="90"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:duration="150"
                    android:valueFrom="1"
                    android:valueTo="1.25"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:duration="150"
                    android:valueFrom="1"
                    android:valueTo="1.25"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:startOffset="150"
                    android:duration="150"
                    android:valueFrom="1.25"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:startOffset="150"
                    android:duration="150"
                    android:valueFrom="1.25"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="path_2">
        <aapt:attr name="android:animation">
            <objectAnimator
                android:propertyName="pathData"
                android:duration="300"
                android:valueFrom="M 712.38 217.63 Q 694.75 200 670 200 Q 642.5 200 615 200 Q 590.26 199.99 572.63 217.62 Q 555 235.25 555 260 Q 555 480 555 700 Q 554.99 724.74 572.62 742.37 Q 590.25 760 615 760 Q 615 760 615 760 Q 642.5 760 670 760 Q 694.74 760.01 712.37 742.38 Q 730 724.75 730 700 Q 730 480 730 260 Q 730.01 235.26 712.38 217.63 M 387.37 742.38 Q 405 724.75 405 700 Q 405 480 405 260 Q 405.01 235.26 387.38 217.63 Q 369.75 200 345 200 Q 317.5 200 290 200 Q 265.26 199.99 247.63 217.62 Q 230 235.25 230 260 Q 230 480 230 700 Q 229.99 724.74 247.62 742.37 Q 265.25 760 290 760 Q 290 760 290 760 Q 317.5 760 345 760 Q 369.74 760.01 387.37 742.38"
                android:valueTo="M 728 594 Q 615 417 502 240 Q 497 233 491 229.5 Q 485 226 477 226 Q 476.643 295 476.286 364 Q 475.929 433 475.571 502 Q 475.214 571 474.857 640 Q 588.428 640 702 640 Q 702 640 702 640 Q 716 640 724 631 Q 732 622 732 610 Q 732 606 731 602 Q 730.5 600 729.75 598 Q 729 596 728 594 M 474.857 640 Q 475.928 433 477 226 Q 469 226 463 229.5 Q 457 233 452 240 Q 423.75 284.25 395.5 328.5 Q 367.25 372.75 339 417 Q 310.75 461.25 282.5 505.5 Q 254.25 549.75 226 594 Q 224 598 223 602 Q 222 606 222 610 Q 222 622 230 631 Q 238 640 252 640 Q 307.714 640 363.429 640 Q 419.143 640 474.857 640"
                android:valueType="pathType"
                android:interpolator="@android:interpolator/fast_out_slow_in"/>
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_pause_to_play_anim.xml
================================================================================

<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="24dp"
            android:height="24dp"
            android:viewportWidth="24"
            android:viewportHeight="24">
            <group
                android:name="group"
                android:pivotX="12"
                android:pivotY="12">
                <group
                    android:name="group_1"
                    android:pivotX="12"
                    android:pivotY="12"
                    android:rotation="270">
                    <path
                        android:name="path_1"
                        android:pathData="M 7 6 C 5.9 6 5 6.9 5 8 L 5 8 C 5 9.1 5.9 10 7 10 L 12 10 L 17 10 C 18.1 10 19 9.1 19 8 C 19 6.9 18.1 6 17 6 C 13.667 6 10.333 6 7 6 M 7 14 C 5.9 14 5 14.9 5 16 C 5 17.1 5.9 18 7 18 L 17 18 C 18.1 18 19 17.1 19 16 C 19 14.9 18.1 14 17 14 L 17 14 L 12 14 L 7 14"
                        android:fillColor="#000"/>
                </group>
            </group>
        </vector>
    </aapt:attr>
    <target android:name="path_1">
        <aapt:attr name="android:animation">
            <objectAnimator
                android:propertyName="pathData"
                android:duration="300"
                android:valueFrom="M 7 6 C 5.9 6 5 6.9 5 8 L 5 8 C 5 9.1 5.9 10 7 10 L 12 10 L 17 10 C 18.1 10 19 9.1 19 8 C 19 6.9 18.1 6 17 6 C 13.667 6 10.333 6 7 6 M 7 14 C 5.9 14 5 14.9 5 16 C 5 17.1 5.9 18 7 18 L 17 18 C 18.1 18 19 17.1 19 16 C 19 14.9 18.1 14 17 14 L 17 14 L 12 14 L 7 14"
                android:valueTo="M 8 6.82 C 8 6.82 8 6.82 8 6.82 L 8 6.82 C 8 8.518 8 10.216 8 11.915 L 10.285 11.928 L 18.145 11.975 C 18.137 11.659 17.982 11.345 17.68 11.15 C 14.967 9.427 12.253 7.703 9.54 5.98 C 8.87 5.55 8 6.03 8 6.82 M 8 11.915 C 8 13.67 8 15.425 8 17.18 C 8 17.97 8.87 18.45 9.54 18.02 L 17.68 12.84 C 17.998 12.64 18.152 12.307 18.145 11.975 C 17.057 11.969 15.969 11.962 14.881 11.956 L 13.283 11.946 L 11.618 11.936 L 8 11.915"
                android:valueType="pathType"
                android:interpolator="@android:interpolator/fast_out_slow_in"/>
        </aapt:attr>
    </target>
    <target android:name="group">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="rotation"
                    android:duration="300"
                    android:valueFrom="0"
                    android:valueTo="90"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:duration="150"
                    android:valueFrom="1"
                    android:valueTo="1.2"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:duration="150"
                    android:valueFrom="1"
                    android:valueTo="1.2"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:startOffset="150"
                    android:duration="150"
                    android:valueFrom="1.2"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:startOffset="150"
                    android:duration="150"
                    android:valueFrom="1.2"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_pause.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M640,760q-33,0 -56.5,-23.5T560,680v-400q0,-33 23.5,-56.5T640,200q33,0 56.5,23.5T720,280v400q0,33 -23.5,56.5T640,760ZM320,760q-33,0 -56.5,-23.5T240,680v-400q0,-33 23.5,-56.5T320,200q33,0 56.5,23.5T400,280v400q0,33 -23.5,56.5T320,760Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_person.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M480,480q-66,0 -113,-47t-47,-113q0,-66 47,-113t113,-47q66,0 113,47t47,113q0,66 -47,113t-113,47ZM160,720v-32q0,-34 17.5,-62.5T224,582q62,-31 126,-46.5T480,520q66,0 130,15.5T736,582q29,15 46.5,43.5T800,688v32q0,33 -23.5,56.5T720,800L240,800q-33,0 -56.5,-23.5T160,720ZM240,720h480v-32q0,-11 -5.5,-20T700,654q-54,-27 -109,-40.5T480,600q-56,0 -111,13.5T260,654q-9,5 -14.5,14t-5.5,20v32ZM480,400q33,0 56.5,-23.5T560,320q0,-33 -23.5,-56.5T480,240q-33,0 -56.5,23.5T400,320q0,33 23.5,56.5T480,400ZM480,320ZM480,720Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_play_48dp.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="48dp"
    android:height="48dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M320,702v-450q0,-14 9,-22t21,-8q4,0 8,1t8,3l354,226q7,5 10.5,11t3.5,14q0,8 -3.5,14T720,502L366,728q-4,2 -8,3t-8,1q-12,0 -21,-8t-9,-22Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_play_circle.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorOnSurface"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="m426,630 l195,-125q14,-9 14,-25t-14,-25L426,330q-15,-10 -30.5,-1.5T380,355v250q0,18 15.5,26.5T426,630ZM480,880q-83,0 -156,-31.5T197,763q-54,-54 -85.5,-127T80,480q0,-83 31.5,-156T197,197q54,-54 127,-85.5T480,80q83,0 156,31.5T763,197q54,54 85.5,127T880,480q0,83 -31.5,156T763,763q-54,54 -127,85.5T480,880ZM480,800q134,0 227,-93t93,-227q0,-134 -93,-227t-227,-93q-134,0 -227,93t-93,227q0,134 93,227t227,93ZM480,480Z"
      android:fillColor="#e3e3e3"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_play_to_pause_48dp_anim.xml
================================================================================

<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="48dp"
            android:height="48dp"
            android:viewportWidth="960"
            android:viewportHeight="960">
            <group
                android:name="group"
                android:pivotX="480"
                android:pivotY="480">
                <path
                    android:name="path_1"
                    android:pathData="M 320 702 L 320 252 Q 320 238 329 230 Q 338 222 350 222 Q 354 222 358 223 Q 362 224 366 226 L 720 452 Q 727 457 730.5 463 Q 734 469 734 477 Q 734 485 730.5 491 Q 727 497 720 502 L 366 728 Q 362 730 358 731 Q 354 732 350 732 Q 338 732 329 724 Q 320 716 320 702 Z"
                    android:fillColor="#FF000000"/>
            </group>
        </vector>
    </aapt:attr>
    <target android:name="path_1">
        <aapt:attr name="android:animation">
            <objectAnimator
                android:propertyName="pathData"
                android:duration="300"
                android:valueFrom="M 366 728 L 720 502 Q 727 497 730.5 491 Q 734 485 734 477 L 596 476.286 Q 527 475.929 458 475.571 Q 389 475.214 320 474.857 L 320 702 Q 320 702 320 702 Q 320 716 329 724 Q 338 732 350 732 Q 354 732 358 731 Q 360 730.5 362 729.75 Q 364 729 366 728 M 320 474.857 L 734 477 Q 734 469 730.5 463 Q 727 457 720 452 L 631.5 395.5 Q 587.25 367.25 543 339 Q 498.75 310.75 454.5 282.5 L 366 226 Q 362 224 358 223 Q 354 222 350 222 Q 338 222 329 230 Q 320 238 320 252 Q 320 307.714 320 363.429 Q 320 419.143 320 474.857"
                android:valueTo="M 260 730 L 700 730 Q 724.74 730.01 742.37 712.38 Q 760 694.75 760 670 L 760 615 Q 760.01 590.26 742.38 572.63 Q 724.75 555 700 555 L 260 555 Q 235.26 554.99 217.63 572.62 Q 200 590.25 200 615 Q 200 615 200 615 Q 200 642.5 200 670 Q 199.99 694.74 217.62 712.37 Q 235.25 730 260 730 M 260 405 L 700 405 Q 724.74 405.01 742.37 387.38 Q 760 369.75 760 345 L 760 290 Q 760.01 265.26 742.38 247.63 Q 724.75 230 700 230 L 260 230 Q 235.26 229.99 217.63 247.62 Q 200 265.25 200 290 Q 200 290 200 290 Q 200 317.5 200 345 Q 199.99 369.74 217.62 387.37 Q 235.25 405 260 405"
                android:valueType="pathType"
                android:interpolator="@android:interpolator/fast_out_slow_in"/>
        </aapt:attr>
    </target>
    <target android:name="group">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="rotation"
                    android:duration="300"
                    android:valueFrom="0"
                    android:valueTo="90"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:duration="150"
                    android:valueFrom="1"
                    android:valueTo="1.25"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:duration="150"
                    android:valueFrom="1"
                    android:valueTo="1.25"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:startOffset="150"
                    android:duration="150"
                    android:valueFrom="1.25"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:startOffset="150"
                    android:duration="150"
                    android:valueFrom="1.25"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_play_to_pause_anim.xml
================================================================================

<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="24dp"
            android:height="24dp"
            android:viewportWidth="24"
            android:viewportHeight="24">
            <group
                android:name="group"
                android:pivotX="12"
                android:pivotY="12">
                <path
                    android:name="path_1"
                    android:pathData="M 8 6.82 L 8 17.18 C 8 17.97 8.87 18.45 9.54 18.02 L 17.68 12.84 C 18.3 12.45 18.3 11.55 17.68 11.15 L 9.54 5.98 C 8.87 5.55 8 6.03 8 6.82 Z"
                    android:fillColor="#000"/>
            </group>
        </vector>
    </aapt:attr>
    <target android:name="path_1">
        <aapt:attr name="android:animation">
            <objectAnimator
                android:propertyName="pathData"
                android:duration="300"
                android:valueFrom="M 8 6.82 C 8 6.82 8 6.82 8 6.82 L 8 6.82 C 8 8.518 8 10.216 8 11.915 L 10.285 11.928 L 18.145 11.975 C 18.137 11.659 17.982 11.345 17.68 11.15 C 14.967 9.427 12.253 7.703 9.54 5.98 C 8.87 5.55 8 6.03 8 6.82 M 8 11.915 C 8 13.67 8 15.425 8 17.18 C 8 17.97 8.87 18.45 9.54 18.02 L 17.68 12.84 C 17.998 12.64 18.152 12.307 18.145 11.975 C 17.057 11.969 15.969 11.962 14.881 11.956 L 13.283 11.946 L 11.618 11.936 L 8 11.915"
                android:valueTo="M 7 6 C 5.9 6 5 6.9 5 8 L 5 8 C 5 9.1 5.9 10 7 10 L 12 10 L 17 10 C 18.1 10 19 9.1 19 8 C 19 6.9 18.1 6 17 6 C 13.667 6 10.333 6 7 6 M 7 14 C 5.9 14 5 14.9 5 16 C 5 17.1 5.9 18 7 18 L 17 18 C 18.1 18 19 17.1 19 16 C 19 14.9 18.1 14 17 14 L 17 14 L 12 14 L 7 14"
                android:valueType="pathType"
                android:interpolator="@android:interpolator/fast_out_slow_in"/>
        </aapt:attr>
    </target>
    <target android:name="group">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="rotation"
                    android:duration="300"
                    android:valueFrom="0"
                    android:valueTo="90"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:duration="150"
                    android:valueFrom="1"
                    android:valueTo="1.2"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:duration="150"
                    android:valueFrom="1"
                    android:valueTo="1.2"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:startOffset="150"
                    android:duration="150"
                    android:valueFrom="1.2"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:startOffset="150"
                    android:duration="150"
                    android:valueFrom="1.2"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_play.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M320,687v-414q0,-17 12,-28.5t28,-11.5q5,0 10.5,1.5T381,239l326,207q9,6 13.5,15t4.5,19q0,10 -4.5,19T707,514L381,721q-5,3 -10.5,4.5T360,727q-16,0 -28,-11.5T320,687Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_playlist_add.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
    <path
        android:fillColor="#FF000000"
        android:pathData="M160,640q-17,0 -28.5,-11.5T120,600q0,-17 11.5,-28.5T160,560h200q17,0 28.5,11.5T400,600q0,17 -11.5,28.5T360,640L160,640ZM160,480q-17,0 -28.5,-11.5T120,440q0,-17 11.5,-28.5T160,400h360q17,0 28.5,11.5T560,440q0,17 -11.5,28.5T520,480L160,480ZM160,320q-17,0 -28.5,-11.5T120,280q0,-17 11.5,-28.5T160,240h360q17,0 28.5,11.5T560,280q0,17 -11.5,28.5T520,320L160,320ZM680,800q-17,0 -28.5,-11.5T640,760v-120L520,640q-17,0 -28.5,-11.5T480,600q0,-17 11.5,-28.5T520,560h120v-120q0,-17 11.5,-28.5T680,400q17,0 28.5,11.5T720,440v120h120q17,0 28.5,11.5T880,600q0,17 -11.5,28.5T840,640L720,640v120q0,17 -11.5,28.5T680,800Z" />
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_playlist_play.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M160,640q-17,0 -28.5,-11.5T120,600q0,-17 11.5,-28.5T160,560h240q17,0 28.5,11.5T440,600q0,17 -11.5,28.5T400,640L160,640ZM160,480q-17,0 -28.5,-11.5T120,440q0,-17 11.5,-28.5T160,400h400q17,0 28.5,11.5T600,440q0,17 -11.5,28.5T560,480L160,480ZM160,320q-17,0 -28.5,-11.5T120,280q0,-17 11.5,-28.5T160,240h400q17,0 28.5,11.5T600,280q0,17 -11.5,28.5T560,320L160,320ZM671,819q-5,3 -10,3t-10,-2q-5,-2 -8,-6.5t-3,-10.5v-246q0,-6 3,-10.5t8,-6.5q5,-2 10,-2t10,3l184,122q5,3 7,7.5t2,9.5q0,5 -2,9.5t-7,7.5L671,819Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_queue_music.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
    <path
        android:fillColor="#FF000000"
        android:pathData="M640,800q-50,0 -85,-35t-35,-85q0,-50 35,-85t85,-35q11,0 21,1.5t19,6.5v-288q0,-17 11.5,-28.5T720,240h120q17,0 28.5,11.5T880,280q0,17 -11.5,28.5T840,320h-80v360q0,50 -35,85t-85,35ZM160,640q-17,0 -28.5,-11.5T120,600q0,-17 11.5,-28.5T160,560h240q17,0 28.5,11.5T440,600q0,17 -11.5,28.5T400,640L160,640ZM160,480q-17,0 -28.5,-11.5T120,440q0,-17 11.5,-28.5T160,400h400q17,0 28.5,11.5T600,440q0,17 -11.5,28.5T560,480L160,480ZM160,320q-17,0 -28.5,-11.5T120,280q0,-17 11.5,-28.5T160,240h400q17,0 28.5,11.5T600,280q0,17 -11.5,28.5T560,320L160,320Z" />
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_refresh.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M480,800q-134,0 -227,-93t-93,-227q0,-134 93,-227t227,-93q69,0 132,28.5T720,270v-70q0,-17 11.5,-28.5T760,160q17,0 28.5,11.5T800,200v200q0,17 -11.5,28.5T760,440L560,440q-17,0 -28.5,-11.5T520,400q0,-17 11.5,-28.5T560,360h128q-32,-56 -87.5,-88T480,240q-100,0 -170,70t-70,170q0,100 70,170t170,70q68,0 124.5,-34.5T692,593q8,-14 22.5,-19.5t29.5,-0.5q16,5 23,21t-1,30q-41,80 -117,128t-169,48Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_repeat_20dp.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="20dp"
    android:height="20dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="m282,756 l31.78,31.78Q325,799 325,813.5q0,14.5 -10.52,25.5 -11.48,11 -25.98,11t-25.45,-10.91l-94.01,-93.64q-5.48,-5.45 -7.76,-11.81Q159,727.27 159,720q0,-7.27 2.28,-13.64 2.28,-6.36 7.76,-11.81l94.01,-93.64Q274,590 288.5,590t25.98,11Q325,612 325,626.5t-11.22,25.72L282,684h414v-120q0,-15.3 10.29,-25.65Q716.58,528 731.79,528t25.71,10.35Q768,548.7 768,564v120q0,29.7 -21.15,50.85Q725.7,756 696,756L282,756ZM678,276L264,276v120q0,15.3 -10.29,25.65Q243.42,432 228.21,432t-25.71,-10.35Q192,411.3 192,396v-120q0,-29.7 21.15,-50.85Q234.3,204 264,204h414l-31.78,-31.78Q635,161 635,146.5q0,-14.5 10.52,-25.5 11.48,-11 25.98,-11t25.45,10.91l94.01,93.64q5.48,5.45 7.76,11.81Q801,232.73 801,240q0,7.27 -2.28,13.64 -2.28,6.36 -7.76,11.81l-94.01,93.64Q686,370 672,369.5T646.52,358Q636,347 636,332.5t10.96,-25.46L678,276Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_repeat_40dp.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="vector"
    android:width="40dp"
    android:height="40dp"
    android:viewportWidth="40"
    android:viewportHeight="40">
    <group android:name="group_1">
        <path
            android:name="middle2"
            android:pathData="M 9.7 30 L 30.3 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <path
            android:name="end2"
            android:pathData="M 30.3 23.3 L 30.3 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <path
            android:name="start2"
            android:pathData="M 9.7 30 L 9.7 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <group
            android:name="group2"
            android:pivotX="10.2788"
            android:pivotY="29.9834">
            <path
                android:name="arrow2"
                android:pathData="M 12.7 25.2 L 7.9 30 L 12.6 34.7"
                android:strokeWidth="2.5"
                android:strokeColor="#000000"
                android:strokeLineCap="round"
                android:strokeLineJoin="round"
                android:strokeMiterLimit="10" />
        </group>
    </group>
    <group
        android:name="group_2"
        android:pivotX="20"
        android:pivotY="20"
        android:rotation="180">
        <path
            android:name="middle"
            android:pathData="M 9.7 30 L 30.3 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <path
            android:name="end"
            android:pathData="M 30.3 23.3 L 30.3 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <path
            android:name="start"
            android:pathData="M 9.7 30 L 9.7 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <group
            android:name="group"
            android:pivotX="10.2788"
            android:pivotY="29.9834">
            <path
                android:name="arrow"
                android:pathData="M 12.7 25.2 L 7.9 30 L 12.6 34.7"
                android:strokeWidth="2.5"
                android:strokeColor="#000000"
                android:strokeLineCap="round"
                android:strokeLineJoin="round"
                android:strokeMiterLimit="10" />
        </group>
    </group>
</vector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_repeat_off_40dp.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="vector"
    android:width="40dp"
    android:height="40dp"
    android:viewportWidth="40"
    android:viewportHeight="40">
    <path
        android:name="path_7"
        android:pathData="M 5.2 5.2 L 34.8 34.8"
        android:strokeWidth="2.5"
        android:strokeAlpha="1"
        android:strokeColor="#000000"
        android:strokeLineCap="round"
        android:strokeLineJoin="round"
        android:strokeMiterLimit="10" />
    <group android:name="group_1">
        <path
            android:name="middle2"
            android:pathData="M 9.7 30 L 30.3 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <path
            android:name="end2"
            android:pathData="M 30.3 23.3 L 30.3 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <path
            android:name="start2"
            android:pathData="M 9.7 30 L 9.7 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <group
            android:name="group2"
            android:pivotX="10.2788"
            android:pivotY="29.9834">
            <path
                android:name="arrow2"
                android:pathData="M 12.7 25.2 L 7.9 30 L 12.6 34.7"
                android:strokeWidth="2.5"
                android:strokeColor="#000000"
                android:strokeLineCap="round"
                android:strokeLineJoin="round"
                android:strokeMiterLimit="10" />
        </group>
    </group>
    <group
        android:name="group_2"
        android:pivotX="20"
        android:pivotY="20"
        android:rotation="180">
        <path
            android:name="middle"
            android:pathData="M 9.7 30 L 30.3 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <path
            android:name="end"
            android:pathData="M 30.3 23.3 L 30.3 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <path
            android:name="start"
            android:pathData="M 9.7 30 L 9.7 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <group
            android:name="group"
            android:pivotX="10.2788"
            android:pivotY="29.9834">
            <path
                android:name="arrow"
                android:pathData="M 12.7 25.2 L 7.9 30 L 12.6 34.7"
                android:strokeWidth="2.5"
                android:strokeColor="#000000"
                android:strokeLineCap="round"
                android:strokeLineJoin="round"
                android:strokeMiterLimit="10" />
        </group>
    </group>
</vector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_repeat_off_to_repeat_40dp.xml
================================================================================

<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="40dp"
            android:height="40dp"
            android:viewportWidth="40"
            android:viewportHeight="40">
            <path
                android:name="path_7"
                android:pathData="M 5.2 5.2 L 34.8 34.8"
                android:strokeColor="#000000"
                android:strokeWidth="2.5"
                android:strokeAlpha="1"
                android:strokeLineCap="round"
                android:strokeLineJoin="round"
                android:strokeMiterLimit="10"/>
            <group android:name="group_1">
                <path
                    android:name="middle2"
                    android:pathData="M 9.7 30 L 30.3 30"
                    android:strokeColor="#000000"
                    android:strokeWidth="2.5"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10"/>
                <path
                    android:name="end2"
                    android:pathData="M 30.3 23.3 L 30.3 30"
                    android:strokeColor="#000000"
                    android:strokeWidth="2.5"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10"/>
                <path
                    android:name="start2"
                    android:pathData="M 9.7 30 L 9.7 30"
                    android:strokeColor="#000000"
                    android:strokeWidth="2.5"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10"/>
                <group
                    android:name="group2"
                    android:pivotX="10.2788"
                    android:pivotY="29.9834">
                    <path
                        android:name="arrow2"
                        android:pathData="M 12.7 25.2 L 7.9 30 L 12.6 34.7"
                        android:strokeColor="#000000"
                        android:strokeWidth="2.5"
                        android:strokeLineCap="round"
                        android:strokeLineJoin="round"
                        android:strokeMiterLimit="10"/>
                </group>
            </group>
            <group
                android:name="group_2"
                android:pivotX="20"
                android:pivotY="20"
                android:rotation="180">
                <path
                    android:name="middle"
                    android:pathData="M 9.7 30 L 30.3 30"
                    android:strokeColor="#000000"
                    android:strokeWidth="2.5"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10"/>
                <path
                    android:name="end"
                    android:pathData="M 30.3 23.3 L 30.3 30"
                    android:strokeColor="#000000"
                    android:strokeWidth="2.5"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10"/>
                <path
                    android:name="start"
                    android:pathData="M 9.7 30 L 9.7 30"
                    android:strokeColor="#000000"
                    android:strokeWidth="2.5"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10"/>
                <group
                    android:name="group"
                    android:pivotX="10.2788"
                    android:pivotY="29.9834">
                    <path
                        android:name="arrow"
                        android:pathData="M 12.7 25.2 L 7.9 30 L 12.6 34.7"
                        android:strokeColor="#000000"
                        android:strokeWidth="2.5"
                        android:strokeLineCap="round"
                        android:strokeLineJoin="round"
                        android:strokeMiterLimit="10"/>
                </group>
            </group>
        </vector>
    </aapt:attr>
    <target android:name="group2">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="rotation"
                    android:duration="100"
                    android:valueFrom="0"
                    android:valueTo="90"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateX"
                    android:duration="100"
                    android:valueFrom="0"
                    android:valueTo="-0.5"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateY"
                    android:duration="100"
                    android:valueFrom="0"
                    android:valueTo="-7"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateY"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="-7"
                    android:valueTo="-14"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateY"
                    android:startOffset="200"
                    android:duration="50"
                    android:valueFrom="-14"
                    android:valueTo="-20"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="rotation"
                    android:startOffset="225"
                    android:duration="50"
                    android:valueFrom="90"
                    android:valueTo="180"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateX"
                    android:startOffset="250"
                    android:duration="100"
                    android:valueFrom="-0.5"
                    android:valueTo="19.5"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="end2">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:duration="100"
                    android:valueFrom="M 30.3 23.3 L 30.3 30"
                    android:valueTo="M 30.3 30 L 30.3 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="strokeAlpha"
                    android:startOffset="99"
                    android:duration="1"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="250"
                    android:duration="100"
                    android:valueFrom="M 9.7 10 L 9.7 10"
                    android:valueTo="M 30 10 L 9.7 10"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="strokeAlpha"
                    android:startOffset="250"
                    android:duration="1"
                    android:valueFrom="0"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="start2">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:duration="100"
                    android:valueFrom="M 9.7 30 L 9.7 30"
                    android:valueTo="M 9.7 23.3 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="M 9.7 23.3 L 9.7 30"
                    android:valueTo="M 9.7 14.7 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="200"
                    android:duration="50"
                    android:valueFrom="M 9.7 14.7 L 9.7 30"
                    android:valueTo="M 9.7 10 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="250"
                    android:duration="100"
                    android:valueFrom="M 9.7 10 L 9.7 30"
                    android:valueTo="M 9.7 10 L 9.7 17.7"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="middle2">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="M 9.7 30 L 30.3 30"
                    android:valueTo="M 9.7 30 L 17.3 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="200"
                    android:duration="50"
                    android:valueFrom="M 9.7 30 L 17.3 30"
                    android:valueTo="M 9.7 30 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="strokeAlpha"
                    android:startOffset="249"
                    android:duration="1"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="group">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="rotation"
                    android:duration="100"
                    android:valueFrom="0"
                    android:valueTo="90"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateX"
                    android:duration="100"
                    android:valueFrom="0"
                    android:valueTo="-0.5"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateY"
                    android:duration="100"
                    android:valueFrom="0"
                    android:valueTo="-7"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateY"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="-7"
                    android:valueTo="-14"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateY"
                    android:startOffset="200"
                    android:duration="50"
                    android:valueFrom="-14"
                    android:valueTo="-20"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="rotation"
                    android:startOffset="225"
                    android:duration="50"
                    android:valueFrom="90"
                    android:valueTo="180"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateX"
                    android:startOffset="250"
                    android:duration="100"
                    android:valueFrom="-0.5"
                    android:valueTo="19.5"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="end">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:duration="100"
                    android:valueFrom="M 30.3 23.3 L 30.3 30"
                    android:valueTo="M 30.3 30 L 30.3 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="strokeAlpha"
                    android:startOffset="99"
                    android:duration="1"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="250"
                    android:duration="100"
                    android:valueFrom="M 9.7 10 L 9.7 10"
                    android:valueTo="M 30 10 L 9.7 10"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="strokeAlpha"
                    android:startOffset="250"
                    android:duration="1"
                    android:valueFrom="0"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="start">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:duration="100"
                    android:valueFrom="M 9.7 30 L 9.7 30"
                    android:valueTo="M 9.7 23.3 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="M 9.7 23.3 L 9.7 30"
                    android:valueTo="M 9.7 14.7 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="200"
                    android:duration="50"
                    android:valueFrom="M 9.7 14.7 L 9.7 30"
                    android:valueTo="M 9.7 10 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="250"
                    android:duration="100"
                    android:valueFrom="M 9.7 10 L 9.7 30"
                    android:valueTo="M 9.7 10 L 9.7 17.7"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="middle">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="M 9.7 30 L 30.3 30"
                    android:valueTo="M 9.7 30 L 17.3 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="200"
                    android:duration="50"
                    android:valueFrom="M 9.7 30 L 17.3 30"
                    android:valueTo="M 9.7 30 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="strokeAlpha"
                    android:startOffset="249"
                    android:duration="1"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="path_7">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:duration="400"
                    android:valueFrom="M 5.2 5.2 L 34.8 34.8"
                    android:valueTo="M 34.8 34.8 L 34.8 34.8"
                    android:valueType="pathType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="strokeAlpha"
                    android:startOffset="300"
                    android:duration="100"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_repeat_on_20dp.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="20dp"
    android:height="20dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M120,912q-29.7,0 -50.85,-21.15Q48,869.7 48,840v-720q0,-29.7 21.15,-50.85Q90.3,48 120,48h720q29.7,0 50.85,21.15Q912,90.3 912,120v720q0,29.7 -21.15,50.85Q869.7,912 840,912L120,912ZM282,756h414q29.7,0 50.85,-21.15Q768,713.7 768,684v-120q0,-15.3 -10.29,-25.65Q747.42,528 732.21,528t-25.71,10.35Q696,548.7 696,564v120L282,684l31.04,-31.78Q324,641 324,626.5q0,-14.5 -10.52,-25.5Q302,590 288,590t-24.95,10.91l-94.01,93.64q-5.48,5.45 -7.76,11.81Q159,712.73 159,720q0,7.22 2.28,13.53 2.28,6.32 7.76,11.73l94.01,92.91Q274,849 288.5,849t25.98,-11Q325,827 325,813t-11.22,-25.22L282,756ZM678,276 L646.96,307.78Q636,319 636,333.5q0,14.5 10.52,25.5Q658,370 672,370t24.95,-10.91l94.01,-93.64q5.48,-5.45 7.76,-11.81Q801,247.27 801,240q0,-7.27 -2.26,-13.64 -2.26,-6.36 -7.69,-11.81l-93.19,-93.64Q687,110 672.5,110t-25.98,11Q636,132 635.5,146.55 635,161.09 646,172l32,32L264,204q-29.7,0 -50.85,21.15Q192,246.3 192,276v120q0,15.3 10.29,25.65Q212.58,432 227.79,432t25.71,-10.35Q264,411.3 264,396v-120h414Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_repeat_one_20dp.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="20dp"
    android:height="20dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M120,912q-29.7,0 -50.85,-21.15Q48,869.7 48,840v-720q0,-29.7 21.15,-50.85Q90.3,48 120,48h720q29.7,0 50.85,21.15Q912,90.3 912,120v720q0,29.7 -21.15,50.85Q869.7,912 840,912L120,912ZM282,756h414q29.7,0 50.85,-21.15Q768,713.7 768,684v-120q0,-15.3 -10.29,-25.65Q747.42,528 732.21,528t-25.71,10.35Q696,548.7 696,564v120L282,684l31.04,-31.78Q324,641 324,626.5q0,-14.5 -10.52,-25.5Q302,590 288,590t-24.95,10.91l-94.01,93.64q-5.48,5.45 -7.76,11.81Q159,712.73 159,720q0,7.22 2.28,13.53 2.28,6.32 7.76,11.73l94.01,92.91Q274,849 288.5,849t25.98,-11Q325,827 325,813t-11.22,-25.22L282,756ZM678,276 L646.96,307.78Q636,319 636,333.5q0,14.5 10.52,25.5Q658,370 672,370t24.95,-10.91l94.01,-93.64q5.48,-5.45 7.76,-11.81Q801,247.27 801,240q0,-7.27 -2.26,-13.64 -2.26,-6.36 -7.69,-11.81l-93.19,-93.64Q687,110 672.5,110t-25.98,11Q636,132 635.5,146.55 635,161.09 646,172l32,32L264,204q-29.7,0 -50.85,21.15Q192,246.3 192,276v120q0,15.3 10.29,25.65Q212.58,432 227.79,432t25.71,-10.35Q264,411.3 264,396v-120h414ZM480,431.94v119.69q0,10.37 6.8,17.37 6.8,7 17.2,7 10.4,0 17.2,-6.8 6.8,-6.8 6.8,-17.2v-132q0,-15.3 -10.35,-25.65Q507.3,384 492,384h-36q-10.4,0 -17.2,6.8 -6.8,6.8 -6.8,17.2 0,10.37 6.8,17.16 6.8,6.78 17.2,6.78h24Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_repeat_one_40dp.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="vector"
    android:width="40dp"
    android:height="40dp"
    android:viewportWidth="40"
    android:viewportHeight="40">
    <path
        android:name="path_7"
        android:pathData="M 5.2 5.2 L 34.8 34.8"
        android:strokeWidth="2.5"
        android:strokeAlpha="0"
        android:strokeColor="#000000"
        android:strokeLineCap="round"
        android:strokeLineJoin="round"
        android:strokeMiterLimit="10" />
    <group android:name="group_1">
        <path
            android:name="middle1"
            android:pathData="M 9.7 30 L 30.3 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <path
            android:name="end2"
            android:pathData="M 30.3 23.3 L 30.3 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <path
            android:name="start2"
            android:pathData="M 9.7 30 L 9.7 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <group
            android:name="group2"
            android:pivotX="10.2788"
            android:pivotY="29.9834">
            <path
                android:name="arrow2"
                android:pathData="M 12.7 25.2 L 7.9 30 L 12.6 34.7"
                android:strokeWidth="2.5"
                android:strokeColor="#000000"
                android:strokeLineCap="round"
                android:strokeLineJoin="round"
                android:strokeMiterLimit="10" />
        </group>
    </group>
    <group
        android:name="group_2"
        android:pivotX="20"
        android:pivotY="20"
        android:rotation="180">
        <path
            android:name="middle"
            android:pathData="M 9.7 30 L 30.3 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <path
            android:name="end"
            android:pathData="M 30.3 23.3 L 30.3 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <path
            android:name="start"
            android:pathData="M 9.7 30 L 9.7 30"
            android:strokeWidth="2.5"
            android:strokeColor="#000000"
            android:strokeLineCap="round"
            android:strokeLineJoin="round"
            android:strokeMiterLimit="10" />
        <group
            android:name="group"
            android:pivotX="10.2788"
            android:pivotY="29.9834">
            <path
                android:name="arrow"
                android:pathData="M 12.7 25.2 L 7.9 30 L 12.6 34.7"
                android:strokeWidth="2.5"
                android:strokeColor="#000000"
                android:strokeLineCap="round"
                android:strokeLineJoin="round"
                android:strokeMiterLimit="10" />
        </group>
    </group>
    <group android:name="group_3">
        <path
            android:name="path_1"
            android:fillColor="#000"
            android:pathData="M 19.3 17.2 L 18 17.2 C 17.7 17.2 17.4 17.1 17.2 16.9 C 17 16.7 16.9 16.4 16.9 16.1 C 16.9 15.8 17 15.5 17.2 15.3 C 17.4 15.1 17.7 15 18 15 L 20.1 15 C 20.5 15 20.8 15.1 21.1 15.4 C 21.4 15.7 21.5 16 21.5 16.4 L 21.5 23.9 C 21.5 24.2 21.4 24.5 21.2 24.7 C 21 24.9 20.7 25 20.4 25 C 20.1 25 19.8 24.9 19.6 24.7 C 19.4 24.5 19.3 24.2 19.3 23.9 L 19.3 17.2 Z"
            android:strokeWidth="1" />
    </group>
</vector>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_repeat_one_to_repeat_off_40dp.xml
================================================================================

<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="40dp"
            android:height="40dp"
            android:viewportWidth="40"
            android:viewportHeight="40">
            <path
                android:name="path_7"
                android:pathData="M 5.2 5.2 L 34.8 34.8"
                android:strokeColor="#000000"
                android:strokeWidth="2.5"
                android:strokeLineCap="round"
                android:strokeAlpha="0"
                android:strokeLineJoin="round"
                android:strokeMiterLimit="10"/>
            <group android:name="group_1">
                <path
                    android:name="middle1"
                    android:pathData="M 9.7 30 L 30.3 30"
                    android:strokeColor="#000000"
                    android:strokeWidth="2.5"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10"/>
                <path
                    android:name="end2"
                    android:pathData="M 30.3 23.3 L 30.3 30"
                    android:strokeColor="#000000"
                    android:strokeWidth="2.5"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10"/>
                <path
                    android:name="start2"
                    android:pathData="M 9.7 30 L 9.7 30"
                    android:strokeColor="#000000"
                    android:strokeWidth="2.5"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10"/>
                <group
                    android:name="group2"
                    android:pivotX="10.2788"
                    android:pivotY="29.9834">
                    <path
                        android:name="arrow2"
                        android:pathData="M 12.7 25.2 L 7.9 30 L 12.6 34.7"
                        android:strokeColor="#000000"
                        android:strokeWidth="2.5"
                        android:strokeLineCap="round"
                        android:strokeLineJoin="round"
                        android:strokeMiterLimit="10"/>
                </group>
            </group>
            <group
                android:name="group_2"
                android:pivotX="20"
                android:pivotY="20"
                android:rotation="180">
                <path
                    android:name="middle"
                    android:pathData="M 9.7 30 L 30.3 30"
                    android:strokeColor="#000000"
                    android:strokeWidth="2.5"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10"/>
                <path
                    android:name="end"
                    android:pathData="M 30.3 23.3 L 30.3 30"
                    android:strokeColor="#000000"
                    android:strokeWidth="2.5"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10"/>
                <path
                    android:name="start"
                    android:pathData="M 9.7 30 L 9.7 30"
                    android:strokeColor="#000000"
                    android:strokeWidth="2.5"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10"/>
                <group
                    android:name="group"
                    android:pivotX="10.2788"
                    android:pivotY="29.9834">
                    <path
                        android:name="arrow"
                        android:pathData="M 12.7 25.2 L 7.9 30 L 12.6 34.7"
                        android:strokeColor="#000000"
                        android:strokeWidth="2.5"
                        android:strokeLineCap="round"
                        android:strokeLineJoin="round"
                        android:strokeMiterLimit="10"/>
                </group>
            </group>
            <group android:name="group_3">
                <path
                    android:name="path_1"
                    android:pathData="M 19.3 17.2 L 18 17.2 C 17.7 17.2 17.4 17.1 17.2 16.9 C 17 16.7 16.9 16.4 16.9 16.1 C 16.9 15.8 17 15.5 17.2 15.3 C 17.4 15.1 17.7 15 18 15 L 20.1 15 C 20.5 15 20.8 15.1 21.1 15.4 C 21.4 15.7 21.5 16 21.5 16.4 L 21.5 23.9 C 21.5 24.2 21.4 24.5 21.2 24.7 C 21 24.9 20.7 25 20.4 25 C 20.1 25 19.8 24.9 19.6 24.7 C 19.4 24.5 19.3 24.2 19.3 23.9 L 19.3 17.2 Z"
                    android:fillColor="#000"
                    android:strokeWidth="1"/>
            </group>
        </vector>
    </aapt:attr>
    <target android:name="group">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="rotation"
                    android:duration="100"
                    android:valueFrom="0"
                    android:valueTo="90"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateX"
                    android:duration="100"
                    android:valueFrom="0"
                    android:valueTo="-0.5"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateY"
                    android:duration="100"
                    android:valueFrom="0"
                    android:valueTo="-7"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateY"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="-7"
                    android:valueTo="-14"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateY"
                    android:startOffset="200"
                    android:duration="50"
                    android:valueFrom="-14"
                    android:valueTo="-20"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="rotation"
                    android:startOffset="225"
                    android:duration="50"
                    android:valueFrom="90"
                    android:valueTo="180"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateX"
                    android:startOffset="250"
                    android:duration="100"
                    android:valueFrom="-0.5"
                    android:valueTo="19.5"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="end">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:duration="100"
                    android:valueFrom="M 30.3 23.3 L 30.3 30"
                    android:valueTo="M 30.3 30 L 30.3 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="strokeAlpha"
                    android:startOffset="99"
                    android:duration="1"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="250"
                    android:duration="100"
                    android:valueFrom="M 9.7 10 L 9.7 10"
                    android:valueTo="M 30 10 L 9.7 10"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="strokeAlpha"
                    android:startOffset="250"
                    android:duration="1"
                    android:valueFrom="0"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="start">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:duration="100"
                    android:valueFrom="M 9.7 30 L 9.7 30"
                    android:valueTo="M 9.7 23.3 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="M 9.7 23.3 L 9.7 30"
                    android:valueTo="M 9.7 14.7 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="200"
                    android:duration="50"
                    android:valueFrom="M 9.7 14.7 L 9.7 30"
                    android:valueTo="M 9.7 10 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="250"
                    android:duration="100"
                    android:valueFrom="M 9.7 10 L 9.7 30"
                    android:valueTo="M 9.7 10 L 9.7 17.7"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="middle">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="M 9.7 30 L 30.3 30"
                    android:valueTo="M 9.7 30 L 17.3 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="200"
                    android:duration="50"
                    android:valueFrom="M 9.7 30 L 17.3 30"
                    android:valueTo="M 9.7 30 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="strokeAlpha"
                    android:startOffset="249"
                    android:duration="1"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="group2">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="rotation"
                    android:duration="100"
                    android:valueFrom="0"
                    android:valueTo="90"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateX"
                    android:duration="100"
                    android:valueFrom="0"
                    android:valueTo="-0.5"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateY"
                    android:duration="100"
                    android:valueFrom="0"
                    android:valueTo="-7"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateY"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="-7"
                    android:valueTo="-14"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateY"
                    android:startOffset="200"
                    android:duration="50"
                    android:valueFrom="-14"
                    android:valueTo="-20"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="rotation"
                    android:startOffset="225"
                    android:duration="50"
                    android:valueFrom="90"
                    android:valueTo="180"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="translateX"
                    android:startOffset="250"
                    android:duration="100"
                    android:valueFrom="-0.5"
                    android:valueTo="19.5"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="end2">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:duration="100"
                    android:valueFrom="M 30.3 23.3 L 30.3 30"
                    android:valueTo="M 30.3 30 L 30.3 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="strokeAlpha"
                    android:startOffset="99"
                    android:duration="1"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="250"
                    android:duration="100"
                    android:valueFrom="M 9.7 10 L 9.7 10"
                    android:valueTo="M 30 10 L 9.7 10"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="strokeAlpha"
                    android:startOffset="250"
                    android:duration="1"
                    android:valueFrom="0"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="start2">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:duration="100"
                    android:valueFrom="M 9.7 30 L 9.7 30"
                    android:valueTo="M 9.7 23.3 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="M 9.7 23.3 L 9.7 30"
                    android:valueTo="M 9.7 14.7 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="200"
                    android:duration="50"
                    android:valueFrom="M 9.7 14.7 L 9.7 30"
                    android:valueTo="M 9.7 10 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="250"
                    android:duration="100"
                    android:valueFrom="M 9.7 10 L 9.7 30"
                    android:valueTo="M 9.7 10 L 9.7 17.7"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="middle1">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="M 9.7 30 L 30.3 30"
                    android:valueTo="M 9.7 30 L 17.3 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="pathData"
                    android:startOffset="200"
                    android:duration="50"
                    android:valueFrom="M 9.7 30 L 17.3 30"
                    android:valueTo="M 9.7 30 L 9.7 30"
                    android:valueType="pathType"
                    android:interpolator="@android:anim/linear_interpolator"/>
                <objectAnimator
                    android:propertyName="strokeAlpha"
                    android:startOffset="249"
                    android:duration="1"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/linear_interpolator"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="group_3">
        <aapt:attr name="android:animation">
            <objectAnimator
                android:propertyName="translateY"
                android:duration="400"
                android:valueFrom="0"
                android:valueTo="-10"
                android:valueType="floatType"
                android:interpolator="@android:interpolator/fast_out_slow_in"/>
        </aapt:attr>
    </target>
    <target android:name="path_1">
        <aapt:attr name="android:animation">
            <objectAnimator
                android:propertyName="fillAlpha"
                android:duration="400"
                android:valueFrom="1"
                android:valueTo="0"
                android:valueType="floatType"
                android:interpolator="@android:interpolator/fast_out_slow_in"/>
        </aapt:attr>
    </target>
    <target android:name="path_7">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="pathData"
                    android:duration="400"
                    android:valueFrom="M 5.2 5.2 L 5.2 5.2"
                    android:valueTo="M 5.2 5.2 L 34.8 34.8"
                    android:valueType="pathType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="strokeAlpha"
                    android:duration="100"
                    android:valueFrom="0"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_repeat_to_repeat_one_40dp.xml
================================================================================

<animated-vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="40dp"
            android:height="40dp"
            android:viewportWidth="40"
            android:viewportHeight="40">
            <group android:name="group_1">
                <path
                    android:name="middle2"
                    android:pathData="M 9.7 30 L 30.3 30"
                    android:strokeWidth="2.5"
                    android:strokeColor="#000000"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10" />
                <path
                    android:name="end2"
                    android:pathData="M 30.3 23.3 L 30.3 30"
                    android:strokeWidth="2.5"
                    android:strokeColor="#000000"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10" />
                <path
                    android:name="start2"
                    android:pathData="M 9.7 30 L 9.7 30"
                    android:strokeWidth="2.5"
                    android:strokeColor="#000000"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10" />
                <group
                    android:name="group2"
                    android:pivotX="10.2788"
                    android:pivotY="29.9834">
                    <path
                        android:name="arrow2"
                        android:pathData="M 12.7 25.2 L 7.9 30 L 12.6 34.7"
                        android:strokeWidth="2.5"
                        android:strokeColor="#000000"
                        android:strokeLineCap="round"
                        android:strokeLineJoin="round"
                        android:strokeMiterLimit="10" />
                </group>
            </group>
            <group
                android:name="group_2"
                android:pivotX="20"
                android:pivotY="20"
                android:rotation="180">
                <path
                    android:name="middle"
                    android:pathData="M 9.7 30 L 30.3 30"
                    android:strokeWidth="2.5"
                    android:strokeColor="#000000"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10" />
                <path
                    android:name="end"
                    android:pathData="M 30.3 23.3 L 30.3 30"
                    android:strokeWidth="2.5"
                    android:strokeColor="#000000"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10" />
                <path
                    android:name="start"
                    android:pathData="M 9.7 30 L 9.7 30"
                    android:strokeWidth="2.5"
                    android:strokeColor="#000000"
                    android:strokeLineCap="round"
                    android:strokeLineJoin="round"
                    android:strokeMiterLimit="10" />
                <group
                    android:name="group"
                    android:pivotX="10.2788"
                    android:pivotY="29.9834">
                    <path
                        android:name="arrow"
                        android:pathData="M 12.7 25.2 L 7.9 30 L 12.6 34.7"
                        android:strokeWidth="2.5"
                        android:strokeColor="#000000"
                        android:strokeLineCap="round"
                        android:strokeLineJoin="round"
                        android:strokeMiterLimit="10" />
                </group>
            </group>
            <group android:name="group_3">
                <path
                    android:name="path_1"
                    android:fillColor="#000"
                    android:pathData="M 19.3 17.2 L 18 17.2 C 17.7 17.2 17.4 17.1 17.2 16.9 C 17 16.7 16.9 16.4 16.9 16.1 C 16.9 15.8 17 15.5 17.2 15.3 C 17.4 15.1 17.7 15 18 15 L 20.1 15 C 20.5 15 20.8 15.1 21.1 15.4 C 21.4 15.7 21.5 16 21.5 16.4 L 21.5 23.9 C 21.5 24.2 21.4 24.5 21.2 24.7 C 21 24.9 20.7 25 20.4 25 C 20.1 25 19.8 24.9 19.6 24.7 C 19.4 24.5 19.3 24.2 19.3 23.9 L 19.3 17.2 Z"
                    android:strokeWidth="1"
                    android:strokeAlpha="0" />
            </group>
        </vector>
    </aapt:attr>
    <target android:name="group2">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="rotation"
                    android:valueFrom="0"
                    android:valueTo="90"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="translateX"
                    android:valueFrom="0"
                    android:valueTo="-0.5"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="translateY"
                    android:valueFrom="0"
                    android:valueTo="-7"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="translateY"
                    android:startOffset="100"
                    android:valueFrom="-7"
                    android:valueTo="-14"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="50"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="translateY"
                    android:startOffset="200"
                    android:valueFrom="-14"
                    android:valueTo="-20"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="50"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="rotation"
                    android:startOffset="225"
                    android:valueFrom="90"
                    android:valueTo="180"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="translateX"
                    android:startOffset="250"
                    android:valueFrom="-0.5"
                    android:valueTo="19.5"
                    android:valueType="floatType" />
            </set>
        </aapt:attr>
    </target>
    <target android:name="end2">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:valueFrom="M 30.3 23.3 L 30.3 30"
                    android:valueTo="M 30.3 30 L 30.3 30"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="1"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="strokeAlpha"
                    android:startOffset="99"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:startOffset="250"
                    android:valueFrom="M 9.7 10 L 9.7 10"
                    android:valueTo="M 30 10 L 9.7 10"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="1"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="strokeAlpha"
                    android:startOffset="250"
                    android:valueFrom="0"
                    android:valueTo="1"
                    android:valueType="floatType" />
            </set>
        </aapt:attr>
    </target>
    <target android:name="start2">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:valueFrom="M 9.7 30 L 9.7 30"
                    android:valueTo="M 9.7 23.3 L 9.7 30"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:startOffset="100"
                    android:valueFrom="M 9.7 23.3 L 9.7 30"
                    android:valueTo="M 9.7 14.7 L 9.7 30"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="50"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:startOffset="200"
                    android:valueFrom="M 9.7 14.7 L 9.7 30"
                    android:valueTo="M 9.7 10 L 9.7 30"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:startOffset="250"
                    android:valueFrom="M 9.7 10 L 9.7 30"
                    android:valueTo="M 9.7 10 L 9.7 17.7"
                    android:valueType="pathType" />
            </set>
        </aapt:attr>
    </target>
    <target android:name="middle2">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:startOffset="100"
                    android:valueFrom="M 9.7 30 L 30.3 30"
                    android:valueTo="M 9.7 30 L 17.3 30"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="50"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:startOffset="200"
                    android:valueFrom="M 9.7 30 L 17.3 30"
                    android:valueTo="M 9.7 30 L 9.7 30"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="1"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="strokeAlpha"
                    android:startOffset="249"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType" />
            </set>
        </aapt:attr>
    </target>
    <target android:name="group">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="rotation"
                    android:valueFrom="0"
                    android:valueTo="90"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="translateX"
                    android:valueFrom="0"
                    android:valueTo="-0.5"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="translateY"
                    android:valueFrom="0"
                    android:valueTo="-7"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="translateY"
                    android:startOffset="100"
                    android:valueFrom="-7"
                    android:valueTo="-14"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="50"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="translateY"
                    android:startOffset="200"
                    android:valueFrom="-14"
                    android:valueTo="-20"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="50"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="rotation"
                    android:startOffset="225"
                    android:valueFrom="90"
                    android:valueTo="180"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="translateX"
                    android:startOffset="250"
                    android:valueFrom="-0.5"
                    android:valueTo="19.5"
                    android:valueType="floatType" />
            </set>
        </aapt:attr>
    </target>
    <target android:name="end">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:valueFrom="M 30.3 23.3 L 30.3 30"
                    android:valueTo="M 30.3 30 L 30.3 30"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="1"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="strokeAlpha"
                    android:startOffset="99"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType" />
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:startOffset="250"
                    android:valueFrom="M 9.7 10 L 9.7 10"
                    android:valueTo="M 30 10 L 9.7 10"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="1"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="strokeAlpha"
                    android:startOffset="250"
                    android:valueFrom="0"
                    android:valueTo="1"
                    android:valueType="floatType" />
            </set>
        </aapt:attr>
    </target>
    <target android:name="start">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:valueFrom="M 9.7 30 L 9.7 30"
                    android:valueTo="M 9.7 23.3 L 9.7 30"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:startOffset="100"
                    android:valueFrom="M 9.7 23.3 L 9.7 30"
                    android:valueTo="M 9.7 14.7 L 9.7 30"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="50"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:startOffset="200"
                    android:valueFrom="M 9.7 14.7 L 9.7 30"
                    android:valueTo="M 9.7 10 L 9.7 30"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:startOffset="250"
                    android:valueFrom="M 9.7 10 L 9.7 30"
                    android:valueTo="M 9.7 10 L 9.7 17.7"
                    android:valueType="pathType" />
            </set>
        </aapt:attr>
    </target>
    <target android:name="middle">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:duration="100"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:startOffset="100"
                    android:valueFrom="M 9.7 30 L 30.3 30"
                    android:valueTo="M 9.7 30 L 17.3 30"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="50"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="pathData"
                    android:startOffset="200"
                    android:valueFrom="M 9.7 30 L 17.3 30"
                    android:valueTo="M 9.7 30 L 9.7 30"
                    android:valueType="pathType" />
                <objectAnimator
                    android:duration="1"
                    android:interpolator="@android:anim/linear_interpolator"
                    android:propertyName="strokeAlpha"
                    android:startOffset="249"
                    android:valueFrom="1"
                    android:valueTo="0"
                    android:valueType="floatType" />
            </set>
        </aapt:attr>
    </target>
    <target android:name="group_3">
        <aapt:attr name="android:animation">
            <objectAnimator
                android:duration="400"
                android:interpolator="@android:interpolator/fast_out_slow_in"
                android:propertyName="translateY"
                android:valueFrom="10"
                android:valueTo="0"
                android:valueType="floatType" />
        </aapt:attr>
    </target>
    <target android:name="path_1">
        <aapt:attr name="android:animation">
            <objectAnimator
                android:duration="400"
                android:interpolator="@android:interpolator/fast_out_slow_in"
                android:propertyName="fillAlpha"
                android:valueFrom="0"
                android:valueTo="1"
                android:valueType="floatType" />
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_save.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M200,840q-33,0 -56.5,-23.5T120,760v-560q0,-33 23.5,-56.5T200,120h447q16,0 30.5,6t25.5,17l114,114q11,11 17,25.5t6,30.5v447q0,33 -23.5,56.5T760,840L200,840ZM760,314L646,200L200,200v560h560v-446ZM480,720q50,0 85,-35t35,-85q0,-50 -35,-85t-85,-35q-50,0 -85,35t-35,85q0,50 35,85t85,35ZM280,400h280q17,0 28.5,-11.5T600,360v-80q0,-17 -11.5,-28.5T560,240L280,240q-17,0 -28.5,11.5T240,280v80q0,17 11.5,28.5T280,400ZM200,314v446,-560 114Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_scan_delete.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M600,360h120L520,160v120q0,33 23.5,56.5T600,360ZM720,777 L664,832q-11,11 -27.5,11.5T608,832q-11,-11 -11,-28t11,-28l56,-56 -56,-56q-11,-11 -11,-28t11,-28q11,-11 28,-11t28,11l56,56 56,-56q11,-11 27.5,-11.5T832,608q11,11 11,28t-11,28l-55,56 55,56q11,11 11.5,27.5T832,832q-11,11 -28,11t-28,-11l-56,-55ZM240,880q-33,0 -56.5,-23.5T160,800v-640q0,-33 23.5,-56.5T240,80h287q16,0 30.5,6t25.5,17l194,194q11,11 17,25.5t6,30.5v109q0,12 -9.5,19t-21.5,4q-59,-13 -117,4t-102,61q-32,32 -51,75.5T480,719q0,29 7,58t21,55q9,17 1,32.5T484,880L240,880Z"
      android:fillColor="#e3e3e3"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_schedule.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M520,464v-144q0,-17 -11.5,-28.5T480,280q-17,0 -28.5,11.5T440,320v159q0,8 3,15.5t9,13.5l132,132q11,11 28,11t28,-11q11,-11 11,-28t-11,-28L520,464ZM480,880q-83,0 -156,-31.5T197,763q-54,-54 -85.5,-127T80,480q0,-83 31.5,-156T197,197q54,-54 127,-85.5T480,80q83,0 156,31.5T763,197q54,54 85.5,127T880,480q0,83 -31.5,156T763,763q-54,54 -127,85.5T480,880ZM480,480ZM480,800q133,0 226.5,-93.5T800,480q0,-133 -93.5,-226.5T480,160q-133,0 -226.5,93.5T160,480q0,133 93.5,226.5T480,800Z"
      android:fillColor="#000000"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_search_anim.xml
================================================================================

<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="24dp"
            android:height="24dp"
            android:viewportWidth="24"
            android:viewportHeight="24">
            <path
                android:name="path_1"
                android:pathData="M 15.85 15.85 L 19 19"
                android:fillColor="#000"
                android:strokeColor="#000"
                android:strokeWidth="2.5"
                android:strokeLineCap="round"/>
            <group
                android:name="group"
                android:pivotX="11"
                android:pivotY="11"
                android:scaleX="0"
                android:scaleY="0">
                <path
                    android:name="path_2"
                    android:pathData="M 15 11 C 15 12.06 14.578 13.079 13.828 13.828 C 13.079 14.578 12.06 15 11 15 C 9.94 15 8.921 14.578 8.172 13.828 C 7.422 13.079 7 12.06 7 11 C 7 9.94 7.422 8.921 8.172 8.172 C 8.921 7.422 9.94 7 11 7 C 11.316 7.001 11.632 7.038 11.94 7.11 C 11.602 7.246 11.324 7.501 11.16 7.827 C 10.996 8.153 10.957 8.528 11.049 8.881 C 11.141 9.233 11.359 9.541 11.661 9.745 C 11.963 9.949 12.33 10.036 12.692 9.989 C 13.054 9.943 13.386 9.766 13.627 9.491 C 13.868 9.217 14 8.865 14 8.5 C 14.011 8.447 14.011 8.393 14 8.34 C 14.647 9.074 15.003 10.021 15 11 Z"
                    android:fillColor="#000"/>
            </group>
            <path
                android:name="path_3"
                android:pathData="M 11 6 C 12.326 6 13.598 6.527 14.536 7.464 C 15.473 8.402 16 9.674 16 11 C 16 12.326 15.473 13.598 14.536 14.536 C 13.598 15.473 12.326 16 11 16 C 9.674 16 8.402 15.473 7.464 14.536 C 6.527 13.598 6 12.326 6 11 C 6 9.674 6.527 8.402 7.464 7.464 C 8.402 6.527 9.674 6 11 6 M 11 4 C 9.144 4 7.363 4.738 6.05 6.05 C 4.738 7.363 4 9.144 4 11 C 4 12.856 4.738 14.637 6.05 15.95 C 7.363 17.262 9.144 18 11 18 C 12.856 18 14.637 17.262 15.95 15.95 C 17.262 14.637 18 12.856 18 11 C 18 9.771 17.677 8.564 17.062 7.5 C 16.448 6.436 15.564 5.552 14.5 4.938 C 13.436 4.323 12.229 4 11 4 Z"
                android:fillColor="#000"/>
        </vector>
    </aapt:attr>
    <target android:name="path_3">
        <aapt:attr name="android:animation">
            <objectAnimator
                android:propertyName="pathData"
                android:duration="300"
                android:valueFrom="M 11 6 C 12.326 6 13.598 6.527 14.536 7.464 C 15.473 8.402 16 9.674 16 11 C 16 12.326 15.473 13.598 14.536 14.536 C 13.598 15.473 12.326 16 11 16 C 9.674 16 8.402 15.473 7.464 14.536 C 6.527 13.598 6 12.326 6 11 C 6 9.674 6.527 8.402 7.464 7.464 C 8.402 6.527 9.674 6 11 6 M 11 4 C 9.144 4 7.363 4.738 6.05 6.05 C 4.738 7.363 4 9.144 4 11 C 4 12.856 4.738 14.637 6.05 15.95 C 7.363 17.262 9.144 18 11 18 C 12.856 18 14.637 17.262 15.95 15.95 C 17.262 14.637 18 12.856 18 11 C 18 9.771 17.677 8.564 17.062 7.5 C 16.448 6.436 15.564 5.552 14.5 4.938 C 13.436 4.323 12.229 4 11 4 Z"
                android:valueTo="M 11 5.5 C 12.458 5.5 13.858 6.08 14.889 7.111 C 15.92 8.142 16.5 9.542 16.5 11 C 16.5 12.458 15.92 13.858 14.889 14.889 C 13.858 15.92 12.458 16.5 11 16.5 C 9.542 16.5 8.142 15.92 7.111 14.889 C 6.08 13.858 5.5 12.458 5.5 11 C 5.503 9.543 6.083 8.144 7.114 7.114 C 8.144 6.083 9.543 5.503 11 5.5 M 11 4 C 9.144 4 7.363 4.738 6.05 6.05 C 4.738 7.363 4 9.144 4 11 C 4 12.856 4.738 14.637 6.05 15.95 C 7.363 17.262 9.144 18 11 18 C 12.856 18 14.637 17.262 15.95 15.95 C 17.262 14.637 18 12.856 18 11 C 18 9.771 17.677 8.564 17.062 7.5 C 16.448 6.436 15.564 5.552 14.5 4.938 C 13.436 4.323 12.229 4 11 4 Z"
                android:valueType="pathType"
                android:interpolator="@android:interpolator/fast_out_slow_in"/>
        </aapt:attr>
    </target>
    <target android:name="group">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:duration="300"
                    android:valueFrom="0"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/overshoot_interpolator"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:duration="300"
                    android:valueFrom="0"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/overshoot_interpolator"/>
            </set>
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_search_filled.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24">
  <path
      android:pathData="M11,5.5A5.5,5.5 0,1 1,5.5 11,5.51 5.51,0 0,1 11,5.5M11,4a7,7 0,1 0,7 7,7 7,0 0,0 -7,-7Z"
      android:fillColor="#000"/>
  <path
      android:pathData="M15.85,15.85L19,19"
      android:strokeWidth="2.5"
      android:fillColor="#000"
      android:strokeColor="#000"
      android:strokeLineCap="round"/>
  <path
      android:fillColor="#000"
      android:pathData="M15,11a4,4 0,1 1,-4 -4,4.17 4.17,0 0,1 0.94,0.11A1.5,1.5 0,1 0,14 8.5a0.41,0.41 0,0 0,0 -0.16A4,4 0,0 1,15 11Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_search_outline.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24">
  <path
      android:pathData="M11,6a5,5 0,1 1,-5 5,5 5,0 0,1 5,-5m0,-2a7,7 0,1 0,7 7,7 7,0 0,0 -7,-7Z"
      android:fillColor="#000"/>
  <path
      android:pathData="M15.85,15.85L19,19"
      android:strokeWidth="2.5"
      android:fillColor="#000"
      android:strokeColor="#000"
      android:strokeLineCap="round"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_sensors.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
    <path
        android:fillColor="#e8eaed"
        android:pathData="M160,480q0,56 17,105.5t49,89.5q11,14 11,30.5T225,734q-12,12 -29,11.5T168,731q-42,-52 -65,-115.5T80,480q0,-72 23,-136t65,-115q11,-14 28,-14.5t29,11.5q12,12 12,28.5T226,285q-32,41 -49,90.5T160,480ZM320,480q0,23 6,43.5t17,38.5q9,14 8.5,31T339,622q-12,12 -29,11.5T284,619q-21,-29 -32.5,-65T240,480q0,-39 11.5,-74.5T284,341q10,-14 26.5,-14t28.5,12q12,12 12.5,28.5T343,398q-11,18 -17,38.5t-6,43.5ZM480,560q-33,0 -56.5,-23.5T400,480q0,-33 23.5,-56.5T480,400q33,0 56.5,23.5T560,480q0,33 -23.5,56.5T480,560ZM640,480q0,-23 -6,-43.5T617,398q-9,-14 -8,-31t13,-29q12,-12 28,-11.5t26,14.5q21,29 32.5,64.5T720,480q0,38 -11.5,74T676,619q-9,14 -26,14t-29,-12q-12,-12 -12.5,-28.5T617,562q11,-18 17,-38.5t6,-43.5ZM800,480q0,-56 -17,-105.5T734,285q-11,-14 -11.5,-30.5T734,226q12,-12 29.5,-11.5T792,229q42,51 65,115t23,136q0,72 -23,135.5T792,731q-11,14 -28,14.5T735,734q-12,-12 -12,-28.5t11,-30.5q32,-41 49,-90.5T800,480Z" />
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_settings_outline_32dp.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/ic_settings_outline"
    android:inset="4dp" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_settings_outline.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
    <group
        android:pivotX="480"
        android:pivotY="480"
        android:scaleX="0.95"
        android:scaleY="0.95">
        <path
            android:fillColor="#e3e3e3"
            android:pathData="M433,880q-27,0 -46.5,-18T363,818l-9,-66q-13,-5 -24.5,-12T307,725l-62,26q-25,11 -50,2t-39,-32l-47,-82q-14,-23 -8,-49t27,-43l53,-40q-1,-7 -1,-13.5v-27q0,-6.5 1,-13.5l-53,-40q-21,-17 -27,-43t8,-49l47,-82q14,-23 39,-32t50,2l62,26q11,-8 23,-15t24,-12l9,-66q4,-26 23.5,-44t46.5,-18h94q27,0 46.5,18t23.5,44l9,66q13,5 24.5,12t22.5,15l62,-26q25,-11 50,-2t39,32l47,82q14,23 8,49t-27,43l-53,40q1,7 1,13.5v27q0,6.5 -2,13.5l53,40q21,17 27,43t-8,49l-48,82q-14,23 -39,32t-50,-2l-60,-26q-11,8 -23,15t-24,12l-9,66q-4,26 -23.5,44T527,880h-94ZM440,800h79l14,-106q31,-8 57.5,-23.5T639,633l99,41 39,-68 -86,-65q5,-14 7,-29.5t2,-31.5q0,-16 -2,-31.5t-7,-29.5l86,-65 -39,-68 -99,42q-22,-23 -48.5,-38.5T533,266l-13,-106h-79l-14,106q-31,8 -57.5,23.5T321,327l-99,-41 -39,68 86,64q-5,15 -7,30t-2,32q0,16 2,31t7,30l-86,65 39,68 99,-42q22,23 48.5,38.5T427,694l13,106ZM482,620q58,0 99,-41t41,-99q0,-58 -41,-99t-99,-41q-59,0 -99.5,41T342,480q0,58 40.5,99t99.5,41ZM480,480Z" />
    </group>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_share.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M680,880q-50,0 -85,-35t-35,-85q0,-6 3,-28L282,568q-16,15 -37,23.5t-45,8.5q-50,0 -85,-35t-35,-85q0,-50 35,-85t85,-35q24,0 45,8.5t37,23.5l281,-164q-2,-7 -2.5,-13.5T560,200q0,-50 35,-85t85,-35q50,0 85,35t35,85q0,50 -35,85t-85,35q-24,0 -45,-8.5T598,288L317,452q2,7 2.5,13.5t0.5,14.5q0,8 -0.5,14.5T317,508l281,164q16,-15 37,-23.5t45,-8.5q50,0 85,35t35,85q0,50 -35,85t-85,35Z"
      android:fillColor="#e3e3e3"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_shuffle_40dp.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="28dp"
    android:height="28dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M685.33,733.33 L527,575.67 574,528l159.34,158v-81.33q0,-14.17 9.62,-23.75t23.83,-9.58q14.22,0 23.72,9.58 9.5,9.58 9.5,23.75v162q0,14.17 -9.58,23.75 -9.58,9.58 -23.75,9.58L604,800q-14.17,0 -23.75,-9.62 -9.58,-9.62 -9.58,-23.83 0,-14.22 9.58,-23.72 9.58,-9.5 23.75,-9.5h81.33ZM733.33,274L217.33,790q-9.67,9.67 -23.33,9.33 -13.67,-0.33 -23.33,-10Q161,779.67 161,766q0,-13.67 9.67,-23.33l516,-516L604,226.67q-14.17,0 -23.75,-9.62 -9.58,-9.62 -9.58,-23.83 0,-14.22 9.58,-23.72 9.58,-9.5 23.75,-9.5h162.67q14.17,0 23.75,9.58 9.58,9.58 9.58,23.75v162q0,14.17 -9.62,23.75t-23.83,9.58q-14.22,0 -23.72,-9.58 -9.5,-9.58 -9.5,-23.75v-81.33ZM385.67,432.33l-216,-215.67Q160,207 160,193t9.67,-23.67q9.67,-9.67 23.23,-9.67 13.57,0 23.43,9.67L433,385l-47.33,47.33Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_shuffle_on_40dp.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="28dp"
    android:height="28dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M106.67,920q-27,0 -46.83,-19.83T40,853.33L40,106q0,-26.33 19.83,-46.5 19.83,-20.17 46.83,-20.17L854,39.33q26.33,0 46.5,20.17 20.17,20.17 20.17,46.5v747.33q0,27 -20.17,46.83Q880.33,920 854,920L106.67,920ZM685.33,733.33L604,733.33q-14.33,0 -23.83,9.5 -9.5,9.5 -9.5,23.83 0,14.33 9.5,23.83 9.5,9.5 23.83,9.5h162.67q14.33,0 23.83,-9.5 9.5,-9.5 9.5,-23.83v-162q0,-14.33 -9.5,-23.83 -9.5,-9.5 -23.83,-9.5 -14.33,0 -23.83,9.5 -9.5,9.5 -9.5,23.83v81.33L574,528 527,575.67l158.33,157.67ZM733.33,274v81.33q0,14.33 9.5,23.83 9.5,9.5 23.83,9.5 14.33,0 23.83,-9.5 9.5,-9.5 9.5,-23.83v-162q0,-14.33 -9.5,-23.83 -9.5,-9.5 -23.83,-9.5L604,160q-14.33,0 -23.83,9.5 -9.5,9.5 -9.5,23.83 0,14.33 9.5,23.83 9.5,9.5 23.83,9.5h82.67l-516,516Q161,752.33 161,766q0,13.67 9.67,23.33 9.67,9.67 23.33,10 13.67,0.33 23.33,-9.33l516,-516ZM385.67,432.33 L433,385 216.33,169.33q-10,-9.67 -23.5,-9.67t-23.17,9.67Q160,179 160,193q0,14 9.67,23.67l216,215.67Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_shuffle.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:fillColor="#FF000000"
      android:pathData="M664,720 L537,593l57,-57 126,126v-62q0,-17 11.5,-28.5T760,560q17,0 28.5,11.5T800,600v160q0,17 -11.5,28.5T760,800L600,800q-17,0 -28.5,-11.5T560,760q0,-17 11.5,-28.5T600,720h64ZM720,296L243.65,772.35Q233,783 216,783t-28,-11q-11,-11 -11,-28t11,-28l476,-476h-64q-17,0 -28.5,-11.5T560,200q0,-17 11.5,-28.5T600,160h160q17,0 28.5,11.5T800,200v160q0,17 -11.5,28.5T760,400q-17,0 -28.5,-11.5T720,360v-64ZM367,423 L188,244q-11,-11 -11,-28t11,-28q11.25,-11 28.13,-11T244,188l179,179 -56,56Z"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_skip_next_40dp.xml
================================================================================

<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="40dp"
            android:height="40dp"
            android:viewportWidth="40"
            android:viewportHeight="40">
            <clip-path
                android:name="mask"
                android:pathData="M 10.3 10 L 29.5 10 C 30.2 10 30.8 10.6 30.8 11.3 L 30.8 28.7 C 30.8 29.4 30.2 30 29.5 30 L 10.4 30 C 9.7 30 9.1 29.4 9.1 28.7 L 9.1 11.4 C 9 10.6 9.6 10 10.3 10 Z"/>
            <group
                android:name="group_2"
                android:pivotX="20"
                android:pivotY="20"
                android:rotation="180">
                <path
                    android:name="path"
                    android:pathData="M 9.2 28.6 L 9.2 11.4 C 9.2 11 9.3 10.7 9.6 10.4 C 9.9 10.1 10.2 10 10.6 10 C 11 10 11.3 10.1 11.6 10.4 C 11.9 10.7 12 11 12 11.4 L 12 28.6 C 12 29 11.9 29.3 11.6 29.6 C 11.3 29.9 11 30 10.6 30 C 10.2 30 9.9 29.9 9.6 29.6 C 9.3 29.3 9.2 29 9.2 28.6 Z"
                    android:fillColor="#000"
                    android:strokeWidth="1"/>
                <group
                    android:name="group"
                    android:pivotX="30.8333"
                    android:pivotY="20">
                    <path
                        android:name="path_1"
                        android:pathData="M 28.7 28.5 L 17.9 21.1 C 17.7 21 17.5 20.8 17.4 20.6 C 17.3 20.4 17.3 20.2 17.3 20 C 17.3 19.8 17.3 19.6 17.4 19.4 C 17.5 19.2 17.7 19 17.9 18.9 L 28.7 11.5 C 28.8 11.4 28.9 11.3 29.1 11.3 C 29.2 11.3 29.4 11.2 29.5 11.2 C 29.9 11.2 30.2 11.3 30.5 11.6 C 30.8 11.9 30.9 12.2 30.9 12.6 L 30.9 27.4 C 30.9 27.8 30.8 28.2 30.5 28.4 C 30.2 28.7 29.9 28.8 29.5 28.8 C 29.4 28.8 29.2 28.8 29.1 28.7 C 28.9 28.7 28.8 28.6 28.7 28.5 Z"
                        android:fillColor="#000"
                        android:strokeWidth="1"/>
                </group>
                <group
                    android:name="group_1"
                    android:pivotX="30.8333"
                    android:pivotY="20">
                    <path
                        android:name="path_2"
                        android:pathData="M 28.7 28.5 L 17.9 21.1 C 17.7 21 17.5 20.8 17.4 20.6 C 17.3 20.4 17.3 20.2 17.3 20 C 17.3 19.8 17.3 19.6 17.4 19.4 C 17.5 19.2 17.7 19 17.9 18.9 L 28.7 11.5 C 28.8 11.4 28.9 11.3 29.1 11.3 C 29.2 11.3 29.4 11.2 29.5 11.2 C 29.9 11.2 30.2 11.3 30.5 11.6 C 30.8 11.9 30.9 12.2 30.9 12.6 L 30.9 27.4 C 30.9 27.8 30.8 28.2 30.5 28.4 C 30.2 28.7 29.9 28.8 29.5 28.8 C 29.4 28.8 29.2 28.8 29.1 28.7 C 28.9 28.7 28.8 28.6 28.7 28.5 Z"
                        android:fillColor="#000"
                        android:strokeWidth="1"/>
                </group>
            </group>
        </vector>
    </aapt:attr>
    <target android:name="group">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="translateX"
                    android:duration="300"
                    android:valueFrom="0"
                    android:valueTo="-19"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:duration="300"
                    android:valueFrom="1"
                    android:valueTo="0.75"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:duration="300"
                    android:valueFrom="1"
                    android:valueTo="0.75"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="group_1">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:duration="300"
                    android:valueFrom="0"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/overshoot_interpolator"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:duration="300"
                    android:valueFrom="0"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/overshoot_interpolator"/>
                <objectAnimator
                    android:propertyName="translateX"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="0"
                    android:valueTo="-1"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/accelerate_decelerate_interpolator"/>
                <objectAnimator
                    android:propertyName="translateX"
                    android:startOffset="200"
                    android:duration="100"
                    android:valueFrom="-1"
                    android:valueTo="0"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/accelerate_decelerate_interpolator"/>
            </set>
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_skip_previous_40dp.xml
================================================================================

<animated-vector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt">
    <aapt:attr name="android:drawable">
        <vector
            android:name="vector"
            android:width="40dp"
            android:height="40dp"
            android:viewportWidth="40"
            android:viewportHeight="40">
            <clip-path
                android:name="mask"
                android:pathData="M 29.7 30 L 10.5 30 C 9.8 30 9.2 29.4 9.2 28.7 L 9.2 11.3 C 9.2 10.6 9.8 10 10.5 10 L 29.6 10 C 30.3 10 30.9 10.6 30.9 11.3 L 30.9 28.6 C 31 29.4 30.4 30 29.7 30 Z"/>
            <group
                android:name="group_2"
                android:pivotX="20"
                android:pivotY="20">
                <path
                    android:name="path"
                    android:pathData="M 9.2 28.6 L 9.2 11.4 C 9.2 11 9.3 10.7 9.6 10.4 C 9.9 10.1 10.2 10 10.6 10 C 11 10 11.3 10.1 11.6 10.4 C 11.9 10.7 12 11 12 11.4 L 12 28.6 C 12 29 11.9 29.3 11.6 29.6 C 11.3 29.9 11 30 10.6 30 C 10.2 30 9.9 29.9 9.6 29.6 C 9.3 29.3 9.2 29 9.2 28.6 Z"
                    android:fillColor="#000"
                    android:strokeWidth="1"/>
                <group
                    android:name="group"
                    android:pivotX="30.8333"
                    android:pivotY="20">
                    <path
                        android:name="path_1"
                        android:pathData="M 28.7 28.5 L 17.9 21.1 C 17.7 21 17.5 20.8 17.4 20.6 C 17.3 20.4 17.3 20.2 17.3 20 C 17.3 19.8 17.3 19.6 17.4 19.4 C 17.5 19.2 17.7 19 17.9 18.9 L 28.7 11.5 C 28.8 11.4 28.9 11.3 29.1 11.3 C 29.2 11.3 29.4 11.2 29.5 11.2 C 29.9 11.2 30.2 11.3 30.5 11.6 C 30.8 11.9 30.9 12.2 30.9 12.6 L 30.9 27.4 C 30.9 27.8 30.8 28.2 30.5 28.4 C 30.2 28.7 29.9 28.8 29.5 28.8 C 29.4 28.8 29.2 28.8 29.1 28.7 C 28.9 28.7 28.8 28.6 28.7 28.5 Z"
                        android:fillColor="#000"
                        android:strokeWidth="1"/>
                </group>
                <group
                    android:name="group_1"
                    android:pivotX="30.8333"
                    android:pivotY="20">
                    <path
                        android:name="path_2"
                        android:pathData="M 28.7 28.5 L 17.9 21.1 C 17.7 21 17.5 20.8 17.4 20.6 C 17.3 20.4 17.3 20.2 17.3 20 C 17.3 19.8 17.3 19.6 17.4 19.4 C 17.5 19.2 17.7 19 17.9 18.9 L 28.7 11.5 C 28.8 11.4 28.9 11.3 29.1 11.3 C 29.2 11.3 29.4 11.2 29.5 11.2 C 29.9 11.2 30.2 11.3 30.5 11.6 C 30.8 11.9 30.9 12.2 30.9 12.6 L 30.9 27.4 C 30.9 27.8 30.8 28.2 30.5 28.4 C 30.2 28.7 29.9 28.8 29.5 28.8 C 29.4 28.8 29.2 28.8 29.1 28.7 C 28.9 28.7 28.8 28.6 28.7 28.5 Z"
                        android:fillColor="#000"
                        android:strokeWidth="1"/>
                </group>
            </group>
        </vector>
    </aapt:attr>
    <target android:name="group">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="translateX"
                    android:duration="300"
                    android:valueFrom="0"
                    android:valueTo="-19"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:duration="300"
                    android:valueFrom="1"
                    android:valueTo="0.75"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:duration="300"
                    android:valueFrom="1"
                    android:valueTo="0.75"
                    android:valueType="floatType"
                    android:interpolator="@android:interpolator/fast_out_slow_in"/>
            </set>
        </aapt:attr>
    </target>
    <target android:name="group_1">
        <aapt:attr name="android:animation">
            <set>
                <objectAnimator
                    android:propertyName="scaleX"
                    android:duration="300"
                    android:valueFrom="0"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/overshoot_interpolator"/>
                <objectAnimator
                    android:propertyName="scaleY"
                    android:duration="300"
                    android:valueFrom="0"
                    android:valueTo="1"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/overshoot_interpolator"/>
                <objectAnimator
                    android:propertyName="translateX"
                    android:startOffset="100"
                    android:duration="100"
                    android:valueFrom="0"
                    android:valueTo="-1"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/accelerate_decelerate_interpolator"/>
                <objectAnimator
                    android:propertyName="translateX"
                    android:startOffset="200"
                    android:duration="100"
                    android:valueFrom="-1"
                    android:valueTo="0"
                    android:valueType="floatType"
                    android:interpolator="@android:anim/accelerate_decelerate_interpolator"/>
            </set>
        </aapt:attr>
    </target>
</animated-vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_snooze.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="m468,566 l107,-120q1,-1 5,-14v-16q0,-13 -8.5,-21.5T550,386L410,386q-13,0 -21.5,8.5T380,416q0,13 8.5,21.5T410,446h84L385,568q-1,1 -5,14v14q0,13 8.5,21.5T410,626h140q13,0 21.5,-8.5T580,596q0,-13 -8.5,-21.5T550,566h-82ZM480,880q-75,0 -140.5,-28.5t-114,-77q-48.5,-48.5 -77,-114T120,520q0,-75 28.5,-140.5t77,-114q48.5,-48.5 114,-77T480,160q75,0 140.5,28.5t114,77q48.5,48.5 77,114T840,520q0,75 -28.5,140.5t-77,114q-48.5,48.5 -114,77T480,880ZM480,520ZM82,292q-11,-11 -11,-28t11,-28l114,-114q11,-11 28,-11t28,11q11,11 11,28t-11,28L138,292q-11,11 -28,11t-28,-11ZM878,292q-11,11 -28,11t-28,-11L708,178q-11,-11 -11,-28t11,-28q11,-11 28,-11t28,11l114,114q11,11 11,28t-11,28ZM480,800q117,0 198.5,-81.5T760,520q0,-117 -81.5,-198.5T480,240q-117,0 -198.5,81.5T200,520q0,117 81.5,198.5T480,800Z"
      android:fillColor="#e8eaed"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_sort.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:tint="?colorControlNormal"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="M160,720q-17,0 -28.5,-11.5T120,680q0,-17 11.5,-28.5T160,640h160q17,0 28.5,11.5T360,680q0,17 -11.5,28.5T320,720L160,720ZM160,520q-17,0 -28.5,-11.5T120,480q0,-17 11.5,-28.5T160,440h400q17,0 28.5,11.5T600,480q0,17 -11.5,28.5T560,520L160,520ZM160,320q-17,0 -28.5,-11.5T120,280q0,-17 11.5,-28.5T160,240h640q17,0 28.5,11.5T840,280q0,17 -11.5,28.5T800,320L160,320Z"
      android:fillColor="#000"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_telegram.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android" android:height="24dp" android:viewportHeight="1000" android:viewportWidth="1000" android:width="24dp">
      
    <path android:fillColor="#FF000000" android:pathData="M831.7,277.9c-10,105.5 -53.5,361.3 -75.6,479.4c-9.3,50 -27.7,66.7 -45.6,68.4c-38.7,3.6 -68.1,-25.6 -105.6,-50.1c-58.7,-38.4 -91.9,-62.4 -148.8,-100c-65.9,-43.3 -23.2,-67.2 14.4,-106.1c9.9,-10.3 180.4,-165.4 183.8,-179.5c0.4,-1.7 0.8,-8.3 -3.1,-11.7c-3.9,-3.5 -9.6,-2.3 -13.7,-1.3c-5.9,1.3 -99.6,63.3 -281.2,185.9c-26.7,18.3 -50.7,27.2 -72.3,26.7c-23.9,-0.5 -69.6,-13.5 -103.6,-24.5c-41.7,-13.6 -74.9,-20.8 -72,-43.7c1.5,-12 18,-24.3 49.6,-36.8c194.4,-84.7 324,-140.6 388.9,-167.5c185.2,-77.1 223.6,-90.4 248.7,-90.8c5.5,-0.1 17.9,1.3 25.9,7.7c6.7,5.5 8.7,12.8 9.5,18C831.4,256.9 832.5,268.7 831.7,277.9z" android:strokeColor="#000000" android:strokeWidth="1"/>
    
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_translate.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="m603,758 l-34,97q-4,11 -14,18t-22,7q-20,0 -32.5,-16.5T496,827l152,-402q5,-11 15,-18t22,-7h30q12,0 22,7t15,18l152,403q8,19 -4,35.5T868,880q-13,0 -22.5,-7T831,854l-34,-96L603,758ZM362,559 L188,732q-11,11 -27.5,11.5T132,732q-11,-11 -11,-28t11,-28l174,-174q-35,-35 -63.5,-80T190,320h84q20,39 40,68t48,58q33,-33 68.5,-92.5T484,240L80,240q-17,0 -28.5,-11.5T40,200q0,-17 11.5,-28.5T80,160h240v-40q0,-17 11.5,-28.5T360,80q17,0 28.5,11.5T400,120v40h240q17,0 28.5,11.5T680,200q0,17 -11.5,28.5T640,240h-76q-21,72 -63,148t-83,116l96,98 -30,82 -122,-125ZM628,688h144l-72,-204 -72,204Z"
      android:fillColor="#e3e3e3"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ic_unhide.xml
================================================================================

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="960"
    android:viewportHeight="960">
  <path
      android:pathData="m763,876 l-63,-62q-49,32 -104.5,49T480,880q-83,0 -156,-31.5T197,763q-54,-54 -85.5,-127T80,480q0,-60 17,-115.5T146,260l-63,-63q-12,-12 -12,-28.5T83,140q12,-12 28.5,-12t28.5,12l680,680q12,12 12,28t-12,28q-12,12 -28.5,12T763,876ZM767,653L307,193q-18,-18 -14.5,-43t26.5,-36q38,-17 78.5,-25.5T480,80q83,0 156,31.5T763,197q54,54 85.5,127T880,480q0,42 -8.5,82.5T846,641q-11,23 -35.5,27T767,653Z"
      android:fillColor="#e3e3e3"/>
</vector>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ripple_44dp.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<ripple xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:color="@color/button_player_ripple"
    android:radius="22dp"
    tools:ignore="PrivateResource" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ripple_60dp.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<ripple xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:color="@color/button_player_ripple"
    android:radius="30dp"
    tools:ignore="PrivateResource" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ripple_68dp.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<ripple xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:color="@color/button_player_ripple"
    android:radius="34dp"
    tools:ignore="PrivateResource" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\ripple_item_container.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<ripple xmlns:android="http://schemas.android.com/apk/res/android"
    android:color="?attr/colorControlHighlight">
    <item android:id="@android:id/mask">
        <shape android:shape="rectangle">
            <solid android:color="@color/white" />
            <corners android:radius="?itemCorner" />
        </shape>
    </item>
</ripple>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\rounded_rectangle_24dp.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#FF000000" />
    <corners android:radius="24dp" />
</shape>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\rounded_rectangle_cover_profile.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="?attr/colorSurfaceContainerHighest" />
    <corners android:radius="10000dp" />
</shape>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\rounded_rectangle_cover.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="?colorSurfaceContainerHighest" />
    <corners android:radius="?itemCorner" />
</shape>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\shape_rounded_4dp.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<corners android:radius="4dp" />
</shape>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\shape_rounded_item_corner.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<corners android:radius="?itemCorner" />
</shape>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable\tab_indicator.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:left="8dp"
        android:right="8dp">
        <shape
            android:shape="rectangle">
            <solid android:color="@android:color/white"/>
            <corners
                android:radius="2dp"/>
            <size android:height="2dp"/>
        </shape>
    </item>
</layer-list>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\drawable-land\gradient_track.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
        android:centerY="0.5"
        android:centerX="0.25"
        android:gradientRadius="@dimen/max_cover_size"
        android:endColor="#D9FFFFFF"
        android:startColor="#26FFFFFF"
        android:type="radial" />
</shape>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\activity_main.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/coordinatorLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <androidx.fragment.app.FragmentContainerView
        android:id="@+id/hiddenWebViewContainer"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:visibility="invisible" />

    <androidx.fragment.app.FragmentContainerView
        android:id="@+id/navHostFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:layout="@layout/fragment_home" />

    <androidx.fragment.app.FragmentContainerView
        android:id="@+id/playerFragmentContainer"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:behavior_hideable="true"
        app:behavior_peekHeight="@dimen/bottom_player_peek_height"
        app:layout_behavior="com.google.android.material.bottomsheet.BottomSheetBehavior"
        tools:layout="@layout/fragment_player" />

    <com.google.android.material.bottomnavigation.BottomNavigationView
        android:id="@+id/navView"
        style="@style/NavView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:minHeight="@dimen/nav_height"
        app:menu="@menu/nav_menu" />

</androidx.coordinatorlayout.widget.CoordinatorLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\dialog_color_picker.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="24dp"
        android:layout_marginTop="24dp"
        android:text="@string/choose_a_color"
        android:textAlignment="center"
        android:textAppearance="?attr/textAppearanceHeadlineSmall" />

    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="16dp">

        <com.google.android.material.card.MaterialCardView
            android:id="@+id/colorCard"
            android:layout_width="64dp"
            android:layout_height="64dp"
            android:layout_gravity="center"
            app:cardCornerRadius="32dp" />

        <com.madrapps.pikolo.HSLColorPicker
            android:id="@+id/colorPickerView"
            android:layout_width="match_parent"
            android:layout_height="256dp"
            app:arc_width="4dp"
            app:indicator_radius="14dp"
            app:indicator_stroke_color="?colorSurface"
            app:indicator_stroke_width="6dp"
            app:lightness_radius_offset="40dp"
            app:saturation_radius_offset="40dp" />
    </FrameLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="24dp"
        android:layout_marginBottom="24dp"
        android:orientation="horizontal">

        <Button
            android:id="@+id/randomColorButton"
            style="@style/Widget.Material3.Button.TextButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/random"
            app:icon="@drawable/ic_palette" />

        <View
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="match_parent"/>

        <Button
            android:id="@+id/addColorButton"
            style="@style/Widget.Material3.Button.TextButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="end"
            android:text="@string/add"
            app:icon="@drawable/ic_add_circle"
            app:iconGravity="end" />

    </LinearLayout>
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\dialog_extension_add.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <androidx.core.widget.NestedScrollView
        android:id="@+id/nestedScrollView"
        android:layout_width="match_parent"
        android:fillViewport="true"
        android:layout_height="match_parent">

        <LinearLayout
            android:gravity="center"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:clipToPadding="false"
            android:orientation="vertical"
            android:padding="24dp">

            <com.google.android.material.appbar.MaterialToolbar
                android:id="@+id/topAppBar"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginStart="-20dp"
                android:layout_marginTop="-24dp"
                android:layout_marginEnd="-20dp"
                android:background="@null"
                android:paddingStart="0dp"
                android:paddingEnd="4dp"
                app:navigationIcon="@drawable/ic_close"
                app:title="@string/add_extensions"
                app:titleCentered="true" />

            <com.google.android.material.button.MaterialButtonToggleGroup
                android:id="@+id/installationTypeGroup"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginVertical="16dp"
                app:checkedButton="@+id/linkAdd"
                app:selectionRequired="true"
                app:singleSelection="true">

                <Button
                    android:id="@+id/linkAdd"
                    style="?attr/materialButtonOutlinedStyle"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:minHeight="64dp"
                    android:text="@string/link" />

                <Button
                    android:id="@+id/fileAdd"
                    style="?attr/materialButtonOutlinedStyle"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:minHeight="64dp"
                    android:text="@string/file" />
            </com.google.android.material.button.MaterialButtonToggleGroup>


            <com.google.android.material.textfield.TextInputLayout
                android:id="@+id/textInputLayout"
                style="@style/TextInput">

                <com.google.android.material.textfield.TextInputEditText
                    android:id="@+id/editText"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:hint="@string/link_or_code"
                    android:inputType="text"
                    android:singleLine="true" />

            </com.google.android.material.textfield.TextInputLayout>

            <com.google.android.material.button.MaterialButton
                android:id="@+id/installButton"
                style="@style/Widget.Material3.Button.UnelevatedButton"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:minHeight="64dp"
                android:text="@string/add" />

        </LinearLayout>

    </androidx.core.widget.NestedScrollView>

    <include
        android:visibility="gone"
        android:id="@+id/loading"
        layout="@layout/item_loading"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="48dp" />

</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\dialog_extension_installer.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>

<androidx.core.widget.NestedScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/scrollView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:clipToPadding="false"
        android:orientation="vertical"
        android:padding="24dp">

        <com.google.android.material.appbar.MaterialToolbar
            android:id="@+id/topAppBar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginStart="-20dp"
            android:layout_marginTop="-24dp"
            android:layout_marginEnd="-20dp"
            android:background="@null"
            android:paddingStart="0dp"
            android:paddingEnd="4dp"
            app:navigationIcon="@drawable/ic_close"
            app:title="@string/extension_installer"
            app:titleCentered="true" />

        <ImageView
            android:id="@+id/extensionIcon"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:layout_marginTop="16dp"
            android:contentDescription="@string/extension"
            app:srcCompat="@drawable/ic_extension_32dp" />

        <TextView
            android:id="@+id/extensionTitle"
            style="@style/TextAppearance.Material3.TitleLarge"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="16dp"
            android:textSize="28sp"
            tools:text="@string/extension" />

        <TextView
            android:id="@+id/extensionDetails"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="16dp"
            android:textAppearance="@style/TextAppearance.Material3.BodyLarge"
            tools:text="Tracker Extension [APK]\nid • version • author" />

        <TextView
            android:id="@+id/extensionDescription"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            android:alpha="0.66"
            android:ellipsize="end"
            tools:text="@tools:sample/lorem" />

        <TextView
            android:id="@+id/installationTypeTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dp"
            android:text="@string/installation_type"
            android:textAppearance="?attr/textAppearanceHeadlineSmall" />

        <TextView
            android:id="@+id/installationTypeSummary"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dp"
            android:alpha="0.66"
            android:text="@string/installation_type_summary" />

        <TextView
            android:id="@+id/installationTypeLinks"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dp"
            android:layout_marginHorizontal="16dp"
            tools:text="https://bruh.com\nhttps://lmfoa.com" />

        <TextView
            android:id="@+id/installationTypeWarning"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dp"
            android:text="@string/installation_type_warning"
            android:textColor="?colorError" />

        <com.google.android.material.button.MaterialButtonToggleGroup
            android:id="@+id/installationTypeGroup"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="16dp"
            app:checkedButton="@+id/appInstall"
            app:selectionRequired="true"
            app:singleSelection="true">

            <Button
                android:id="@+id/appInstall"
                style="?attr/materialButtonOutlinedStyle"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:minHeight="64dp"
                android:text="@string/app" />

            <Button
                android:id="@+id/fileInstall"
                style="?attr/materialButtonOutlinedStyle"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:minHeight="64dp"
                android:text="@string/file" />
        </com.google.android.material.button.MaterialButtonToggleGroup>

        <com.google.android.material.button.MaterialButton
            android:id="@+id/installButton"
            style="@style/Widget.Material3.Button.UnelevatedButton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="12dp"
            android:minHeight="64dp"
            android:text="@string/install" />

    </LinearLayout>
</androidx.core.widget.NestedScrollView>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\dialog_extensions_add_list.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.recyclerview.widget.RecyclerView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
    tools:listitem="@layout/item_extension_add" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\dialog_extensions_list.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.core.widget.NestedScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:orientation="vertical"
        android:paddingBottom="16dp">

        <com.google.android.material.appbar.MaterialToolbar
            android:id="@+id/topAppBar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginHorizontal="4dp"
            android:background="@null"
            android:paddingStart="0dp"
            android:paddingEnd="4dp"
            app:menu="@menu/settings_menu"
            app:navigationIcon="@drawable/ic_close"
            app:title="@string/extensions"
            app:titleCentered="true" />

        <com.google.android.material.progressindicator.CircularProgressIndicator
            android:id="@+id/progressIndicator"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:indeterminate="true"
            android:visibility="gone" />

        <com.google.android.material.button.MaterialButtonToggleGroup
            android:id="@+id/buttonToggleGroup"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginHorizontal="24dp"
            android:layout_marginBottom="16dp"
            android:orientation="vertical"
            app:selectionRequired="true"
            app:singleSelection="true" />

        <com.google.android.material.button.MaterialButtonGroup
            style="@style/Widget.Material3.MaterialButtonGroup.Connected"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginHorizontal="24dp"
            android:orientation="horizontal"
            android:spacing="4dp">

            <com.google.android.material.button.MaterialButton
                android:id="@+id/manageExtension"
                style="@style/Widget.Material3.Button.TonalButton"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:enabled="false"
                android:minHeight="64dp"
                android:text="@string/manage"
                app:icon="@drawable/ic_extension" />

            <com.google.android.material.button.MaterialButton
                android:id="@+id/addExtension"
                style="@style/Widget.Material3.Button.UnelevatedButton"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:minHeight="64dp"
                android:text="@string/add"
                app:icon="@drawable/ic_add_circle" />

        </com.google.android.material.button.MaterialButtonGroup>

    </LinearLayout>

</androidx.core.widget.NestedScrollView>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\dialog_login_user_list.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.core.widget.NestedScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:clipToPadding="false"
        android:orientation="vertical"
        android:padding="24dp">

        <com.google.android.material.appbar.MaterialToolbar
            android:id="@+id/title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginStart="-20dp"
            android:layout_marginTop="-24dp"
            android:layout_marginEnd="-20dp"
            android:background="@null"
            android:paddingStart="0dp"
            android:paddingEnd="4dp"
            app:menu="@menu/incognito_menu"
            app:navigationIcon="@drawable/ic_close"
            app:title="@string/select_x_account"
            app:titleCentered="true" />

        <include
            android:id="@+id/accountListLoading"
            layout="@layout/item_loading"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_margin="48dp"
            android:layout_weight="1" />

        <com.google.android.material.button.MaterialButtonToggleGroup
            android:id="@+id/accountListToggleGroup"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            android:orientation="vertical"
            app:selectionRequired="true"
            app:singleSelection="true" />


        <com.google.android.material.button.MaterialButtonGroup
            style="@style/Widget.Material3.MaterialButtonGroup.Connected"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:spacing="4dp">

            <com.google.android.material.button.MaterialButton
                android:id="@+id/logout"
                style="@style/Widget.Material3.Button.TonalButton"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:enabled="false"
                android:minHeight="64dp"
                app:icon="@drawable/ic_logout"
                android:text="@string/logout" />

            <com.google.android.material.button.MaterialButton
                android:id="@+id/addAccount"
                style="@style/Widget.Material3.Button.UnelevatedButton"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:minHeight="64dp"
                app:icon="@drawable/ic_add_circle"
                android:text="@string/add" />

        </com.google.android.material.button.MaterialButtonGroup>
    </LinearLayout>


</androidx.core.widget.NestedScrollView>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\dialog_media_more.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.recyclerview.widget.RecyclerView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:clipToPadding="false"
    android:paddingHorizontal="20dp"
    android:paddingBottom="20dp"
    app:layoutManager="androidx.recyclerview.widget.GridLayoutManager"
    tools:background="?navBackground"
    tools:itemCount="10"
    tools:listitem="@layout/item_more_button"
    tools:spanCount="3" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\dialog_player_audio_fx.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:fitsSystemWindows="false"
    android:layout_height="wrap_content">

    <com.google.android.material.appbar.AppBarLayout
        android:id="@+id/appBarLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:liftOnScroll="false"
        android:background="@android:color/transparent"
        android:paddingHorizontal="4dp">

        <com.google.android.material.appbar.MaterialToolbar
            android:id="@+id/topAppBar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@null"
            android:paddingStart="0dp"
            android:paddingEnd="4dp"
            app:layout_scrollFlags="scroll|snap"
            app:menu="@menu/refresh_menu"
            app:navigationIcon="@drawable/ic_close"
            app:title="@string/audio_fx"
            app:titleCentered="true" />

        <TextView
            android:id="@+id/audioFxDescription"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginHorizontal="24dp"
            android:alpha="0.66"
            android:gravity="center"
            android:text="@string/audio_fx_desc"
            android:textColor="?attr/colorOnSurface"
            app:layout_scrollFlags="scroll|snap" />

    </com.google.android.material.appbar.AppBarLayout>

    <include
        android:id="@+id/audioFxFragment"
        layout="@layout/fragment_audio_fx"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:layout_behavior="@string/appbar_scrolling_view_behavior" />

</androidx.coordinatorlayout.widget.CoordinatorLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\dialog_player_quality_selection.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.core.widget.NestedScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipToPadding="false"
        android:orientation="vertical"
        android:padding="24dp">

        <com.google.android.material.appbar.MaterialToolbar
            android:id="@+id/topAppBar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginStart="-20dp"
            android:layout_marginTop="-24dp"
            android:layout_marginEnd="-20dp"
            android:background="@null"
            android:paddingStart="0dp"
            android:paddingEnd="4dp"
            app:menu="@menu/settings_menu"
            app:navigationIcon="@drawable/ic_close"
            app:title="@string/quality_selection"
            app:titleCentered="true" />

        <com.google.android.material.progressindicator.LinearProgressIndicator
            android:id="@+id/progressIndicator"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginStart="-24dp"
            android:layout_marginEnd="-24dp"
            android:indeterminate="true" />

        <TextView
            android:id="@+id/streamableInfo"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:paddingVertical="8dp"
            tools:text="@tools:sample/full_names" />

        <TextView
            android:id="@+id/streamable_server"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingVertical="8dp"
            android:text="@string/servers"
            android:textStyle="bold" />

        <com.google.android.material.chip.ChipGroup
            android:id="@+id/streamable_server_group"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:selectionRequired="true"
            app:singleSelection="true" />

        <TextView
            android:id="@+id/streamableSource"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingVertical="8dp"
            android:text="@string/sources"
            android:textStyle="bold" />

        <com.google.android.material.chip.ChipGroup
            android:id="@+id/streamableSourceGroup"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:selectionRequired="true"
            app:singleSelection="true" />

        <TextView
            android:id="@+id/streamableBackgrounds"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingVertical="8dp"
            android:text="@string/backgrounds"
            android:textStyle="bold" />

        <com.google.android.material.chip.ChipGroup
            android:id="@+id/streamableBackgroundGroup"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:selectionRequired="true"
            app:singleSelection="true" />

        <TextView
            android:id="@+id/streamableSubtitles"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingVertical="8dp"
            android:text="@string/subtitles"
            android:textStyle="bold" />

        <com.google.android.material.chip.ChipGroup
            android:id="@+id/streamableSubtitleGroup"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:selectionRequired="true"
            app:singleSelection="true" />

        <TextView
            android:id="@+id/trackAudios"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingVertical="8dp"
            android:text="@string/audio_selection"
            android:textStyle="bold" />

        <com.google.android.material.chip.ChipGroup
            android:id="@+id/trackAudiosGroup"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:selectionRequired="true"
            app:singleSelection="true" />

        <TextView
            android:id="@+id/trackVideos"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingVertical="8dp"
            android:text="@string/video_selection"
            android:textStyle="bold" />

        <com.google.android.material.chip.ChipGroup
            android:id="@+id/trackVideosGroup"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:selectionRequired="true"
            app:singleSelection="true" />

        <TextView
            android:id="@+id/trackSubtitles"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingVertical="8dp"
            android:text="@string/subtitle_selection"
            android:textStyle="bold" />

        <com.google.android.material.chip.ChipGroup
            android:id="@+id/trackSubtitlesGroup"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:selectionRequired="true"
            app:singleSelection="true" />

    </LinearLayout>
</androidx.core.widget.NestedScrollView>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\dialog_player_sleep_timer.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.core.widget.NestedScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipToPadding="false"
        android:orientation="vertical"
        android:padding="24dp">

        <com.google.android.material.appbar.MaterialToolbar
            android:id="@+id/topAppBar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginStart="-20dp"
            android:layout_marginTop="-24dp"
            android:layout_marginEnd="-20dp"
            android:background="@null"
            android:paddingStart="0dp"
            android:paddingEnd="4dp"
            app:menu="@menu/sleep_timer_menu"
            app:navigationIcon="@drawable/ic_close"
            app:title="@string/sleep_timer"
            app:titleCentered="true" />

        <TextView
            android:id="@+id/sleepTimerDescription"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="24dp"
            android:alpha="0.66"
            android:gravity="center"
            android:text="@string/sleep_timer_desc"
            android:textColor="?attr/colorOnSurface" />

        <TextView
            android:id="@+id/sleepTimerValue"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:textColor="?colorPrimary"
            android:textSize="18sp"
            app:drawableBottomCompat="@drawable/ic_expand_more"
            app:drawableTint="?colorPrimary"
            tools:text="1 hour" />

        <com.bosphere.fadingedgelayout.FadingEdgeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dp"
            android:layout_marginBottom="16dp"
            app:fel_edge="left|right"
            app:fel_size_left="80dp"
            app:fel_size_right="80dp">

            <androidx.recyclerview.widget.RecyclerView
                android:id="@+id/sleepTimerRecycler"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                tools:listitem="@layout/item_ruler" />

        </com.bosphere.fadingedgelayout.FadingEdgeLayout>

        <com.google.android.material.button.MaterialButtonGroup
            style="@style/Widget.Material3.MaterialButtonGroup.Connected"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="-4dp"
            android:spacing="4dp">

            <Button
                android:id="@+id/min15"
                style="@style/TertiaryButton"
                android:text="@string/_15min" />

            <Button
                android:id="@+id/min30"
                style="@style/TertiaryButton"
                android:text="@string/_30min" />

            <Button
                android:id="@+id/min45"
                style="@style/TertiaryButton"
                android:text="@string/_45min" />

            <Button
                android:id="@+id/hr1"
                style="@style/TertiaryButton"
                android:text="@string/_1hr" />

            <Button
                android:id="@+id/hr2"
                style="@style/TertiaryButton"
                android:text="@string/_2hr" />

        </com.google.android.material.button.MaterialButtonGroup>

        <com.google.android.material.button.MaterialButtonGroup
            style="@style/Widget.Material3.MaterialButtonGroup.Connected"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:spacing="4dp">

            <com.google.android.material.button.MaterialButton
                android:id="@+id/endOfTrack"
                style="@style/Widget.Material3.Button.TonalButton"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:minHeight="64dp"
                android:text="@string/end_of_track" />

            <com.google.android.material.button.MaterialButton
                android:id="@+id/okay"
                style="@style/Widget.Material3.Button.UnelevatedButton"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:minHeight="64dp"
                android:text="@string/okay" />
        </com.google.android.material.button.MaterialButtonGroup>

    </LinearLayout>
</androidx.core.widget.NestedScrollView>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\dialog_playlist_create.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <androidx.core.widget.NestedScrollView
        android:id="@+id/nestedScrollView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:clipToPadding="false"
        android:fillViewport="true">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:gravity="center"
            android:orientation="vertical"
            android:padding="24dp">

            <com.google.android.material.appbar.MaterialToolbar
                android:id="@+id/topAppBar"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginStart="-20dp"
                android:layout_marginTop="-24dp"
                android:layout_marginEnd="-20dp"
                android:background="@null"
                android:paddingStart="0dp"
                android:paddingEnd="4dp"
                app:navigationIcon="@drawable/ic_close"
                app:title="@string/create_playlist"
                app:titleCentered="true" />

            <com.google.android.material.textfield.TextInputLayout
                style="@style/TextInput"
                android:hint="@string/playlist_name"
                app:startIconDrawable="@drawable/ic_queue_music">

                <com.google.android.material.textfield.TextInputEditText
                    android:id="@+id/playlistName"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:inputType="text"
                    android:singleLine="true" />

            </com.google.android.material.textfield.TextInputLayout>

            <com.google.android.material.textfield.TextInputLayout
                style="@style/TextInput"
                android:hint="@string/playlist_description"
                app:startIconDrawable="@drawable/ic_article">

                <com.google.android.material.textfield.TextInputEditText
                    android:id="@+id/playlistDesc"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:inputType="text"
                    android:singleLine="true" />

            </com.google.android.material.textfield.TextInputLayout>

            <com.google.android.material.button.MaterialButton
                android:id="@+id/playlistCreateButton"
                style="@style/Widget.Material3.Button.UnelevatedButton"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:minHeight="64dp"
                android:text="@string/create" />
        </LinearLayout>
    </androidx.core.widget.NestedScrollView>

    <include
        android:id="@+id/saving"
        layout="@layout/item_loading"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="48dp" />

</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\dialog_playlist_save.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:background="?navBackground">

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipToPadding="false"
        android:paddingHorizontal="20dp"
        android:paddingBottom="72dp"
        android:visibility="visible"
        app:layoutManager="androidx.recyclerview.widget.GridLayoutManager"
        app:spanCount="3"
        tools:itemCount="16"
        tools:listitem="@layout/item_shelf_lists_media"
        tools:visibility="visible" />

    <include
        android:id="@+id/loading"
        layout="@layout/item_loading"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginHorizontal="48dp"
        android:layout_marginVertical="80dp"
        android:visibility="visible" />

    <FrameLayout
        android:id="@+id/saveCont"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="20dp"
        android:layout_marginBottom="12dp"
        android:background="@drawable/rounded_rectangle_cover_profile"
        android:backgroundTint="?echoBackground"
        android:elevation="2dp"
        android:gravity="end"
        tools:layout_gravity="bottom|end">

        <com.google.android.material.button.MaterialButton
            android:id="@+id/save"
            style="@style/Widget.Material3.Button.UnelevatedButton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginHorizontal="4dp"
            android:ellipsize="middle"
            android:maxLines="1"
            android:minHeight="64dp"
            android:text="@string/save"
            app:icon="@drawable/ic_save" />

    </FrameLayout>

</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\dialog_settings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:background="?navBackground">

    <androidx.core.widget.NestedScrollView
        android:id="@+id/nestedScrollView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:layout_behavior="@string/appbar_scrolling_view_behavior">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:clipToPadding="false"
            android:orientation="vertical"
            android:paddingHorizontal="20dp"
            android:paddingBottom="72dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginStart="-20dp"
                android:layout_marginEnd="-20dp"
                android:clipToPadding="false"
                android:gravity="center"
                android:paddingHorizontal="20dp">

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="-12dp"
                    android:layout_marginTop="12dp"
                    android:layout_marginBottom="20dp"
                    android:layout_weight="1"
                    android:clipToPadding="false"
                    android:orientation="vertical"
                    android:paddingHorizontal="16dp">

                    <com.google.android.material.button.MaterialButton
                        android:id="@+id/closeButton"
                        style="@style/Widget.Material3Expressive.Button.IconButton.Outlined"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="-16dp"
                        app:icon="@drawable/ic_close"
                        app:strokeWidth="0dp" />

                    <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="@string/app_name"
                        android:textAppearance="@style/TextAppearance.Material3.BodySmall"
                        android:textSize="28sp" />

                    <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="@string/app_desc" />

                </LinearLayout>

                <ImageView
                    android:id="@+id/logoImage"
                    android:layout_width="96dp"
                    android:layout_height="96dp"
                    android:layout_marginStart="-12dp"
                    android:layout_marginTop="-12dp"
                    android:layout_marginEnd="-12dp"
                    android:layout_marginBottom="-12dp"
                    android:contentDescription="@string/app_name"
                    android:src="@drawable/art_splash_anim" />
            </LinearLayout>

            <View
                style="@style/AppBarOutline"
                android:layout_marginStart="-20dp"
                android:layout_marginEnd="-20dp"
                android:layout_marginBottom="20dp"
                android:alpha="1"
                app:layout_anchor="@id/appBarLayout"
                app:layout_anchorGravity="bottom" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginHorizontal="20dp"
                android:layout_marginBottom="12dp"
                android:text="@string/settings"
                android:textAppearance="?attr/textAppearanceTitleSmall"
                android:textColor="?attr/colorOnSurfaceVariant" />

            <com.google.android.material.button.MaterialButtonGroup
                style="@style/Widget.Material3.MaterialButtonGroup.Connected"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="12dp"
                android:orientation="vertical"
                android:spacing="-4dp">

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/player"
                    style="@style/SideBarButton"
                    android:text="@string/player"
                    app:icon="@drawable/ic_play_circle" />

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/lookAndFeel"
                    style="@style/SideBarButton"
                    android:text="@string/look_and_feel"
                    app:icon="@drawable/ic_palette" />

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/other"
                    style="@style/SideBarButton"
                    android:text="@string/other"
                    app:icon="@drawable/ic_more_horiz" />
            </com.google.android.material.button.MaterialButtonGroup>

            <com.google.android.material.button.MaterialButtonGroup
                style="@style/Widget.Material3.MaterialButtonGroup.Connected"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:spacing="-4dp">

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/downloads"
                    style="@style/SideBarButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:text="@string/downloads"
                    app:icon="@drawable/ic_download_for_offline" />


                <com.google.android.material.button.MaterialButton
                    android:id="@+id/downloadSettings"
                    style="@style/IconButtonTonal"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="0"
                    android:minHeight="64dp"
                    android:paddingStart="16dp"
                    android:paddingEnd="20dp"
                    app:icon="@drawable/ic_settings_outline"
                    app:iconSize="24dp" />

            </com.google.android.material.button.MaterialButtonGroup>

            <com.google.android.material.button.MaterialButtonGroup
                style="@style/Widget.Material3.MaterialButtonGroup.Connected"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:spacing="-4dp">

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/manageExtension"
                    style="@style/SideBarButton"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:text="@string/extensions"
                    app:icon="@drawable/ic_extension" />

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/addExtension"
                    style="@style/IconButtonTertiary"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="0"
                    android:minHeight="64dp"
                    android:paddingStart="16dp"
                    android:paddingEnd="20dp"
                    app:icon="@drawable/ic_add_circle"
                    app:iconSize="24dp" />
            </com.google.android.material.button.MaterialButtonGroup>

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginHorizontal="20dp"
                android:layout_marginBottom="12dp"
                android:text="@string/about"
                android:textAppearance="?attr/textAppearanceTitleSmall"
                android:textColor="?attr/colorOnSurfaceVariant" />

            <com.google.android.material.button.MaterialButtonGroup
                style="@style/Widget.Material3.MaterialButtonGroup.Connected"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:spacing="-4dp">

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/language"
                    style="@style/SideBarButton"
                    android:text="@string/language_x"
                    app:icon="@drawable/ic_translate" />

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/wiki"
                    style="@style/SideBarButton"
                    android:text="@string/guide"
                    app:icon="@drawable/ic_info" />

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/contributors"
                    style="@style/SideBarButton"
                    android:text="@string/contributors"
                    app:icon="@drawable/ic_person" />

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/donate"
                    style="@style/SideBarButton"
                    android:backgroundTint="?colorSecondary"
                    android:text="@string/donate"
                    android:textColor="?colorOnSecondary"
                    app:icon="@drawable/ic_heart_filled_40dp"
                    app:iconTint="?colorOnSecondary" />
            </com.google.android.material.button.MaterialButtonGroup>


            <com.google.android.material.button.MaterialButtonGroup
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:layout_gravity="center"
                android:layout_marginTop="12dp"
                android:gravity="center"
                android:orientation="horizontal"
                android:spacing="0dp">

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/discord"
                    style="@style/IconButtonTonalBig"
                    android:contentDescription="Discord"
                    app:icon="@drawable/ic_discord"
                    tools:ignore="HardcodedText" />

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/github"
                    style="@style/IconButtonTonalBig"
                    android:contentDescription="Github"
                    app:icon="@drawable/ic_github"
                    tools:ignore="HardcodedText" />

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/telegram"
                    style="@style/IconButtonTonalBig"
                    android:contentDescription="Telegram"
                    app:icon="@drawable/ic_telegram"
                    tools:ignore="HardcodedText" />

            </com.google.android.material.button.MaterialButtonGroup>

            <TextView
                android:id="@+id/version"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:ellipsize="end"
                android:gravity="center"
                android:maxLines="3"
                android:paddingVertical="20dp"
                android:text="@string/version"
                android:textAlignment="center" />

            <ImageView
                android:id="@+id/shivam"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="24dp"
                android:src="@drawable/art_shivam"
                tools:ignore="ContentDescription" />
        </LinearLayout>

    </androidx.core.widget.NestedScrollView>

    <LinearLayout
        android:id="@+id/extensionBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="end"
        android:layout_marginHorizontal="8dp"
        android:layout_marginBottom="8dp"
        android:background="@drawable/rounded_rectangle_cover_profile"
        android:backgroundTint="?echoBackground"
        android:elevation="2dp"
        android:gravity="end"
        android:padding="8dp"
        tools:layout_gravity="bottom|end">

        <com.google.android.material.card.MaterialCardView
            android:id="@+id/accountsCont"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="4dp"
            app:cardBackgroundColor="?navBackground"
            app:cardCornerRadius="24dp"
            app:contentPadding="4dp">

            <ImageView
                android:id="@+id/accounts"
                android:layout_width="32dp"
                android:layout_height="32dp"
                android:contentDescription="@string/extensions"
                android:src="@drawable/ic_account_circle_32dp" />
        </com.google.android.material.card.MaterialCardView>

        <com.google.android.material.button.MaterialButton
            android:id="@+id/currentAccountName"
            style="@style/IconButtonOutlined"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="start|center_vertical"
            android:paddingStart="16dp"
            android:paddingEnd="8dp"
            android:text="@string/no_account"
            app:icon="@drawable/ic_keyboard_arrow_down"
            app:iconGravity="end"
            app:iconTint="?colorControlActivated"
            app:strokeWidth="0dp" />

        <com.google.android.material.card.MaterialCardView
            android:id="@+id/extensionsCont"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="4dp"
            app:cardBackgroundColor="?navBackground"
            app:cardCornerRadius="24dp"
            app:contentPadding="4dp">

            <ImageView
                android:id="@+id/extensions"
                android:layout_width="32dp"
                android:layout_height="32dp"
                android:contentDescription="@string/extensions"
                android:src="@drawable/ic_extension_32dp" />
        </com.google.android.material.card.MaterialCardView>

        <com.google.android.material.button.MaterialButton
            android:id="@+id/currentExtensionSettings"
            style="@style/IconButtonTonal"
            app:icon="@drawable/ic_settings_outline" />
    </LinearLayout>

</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\dialog_sort.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.core.widget.NestedScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipToPadding="false"
        android:orientation="vertical"
        android:padding="24dp">

        <com.google.android.material.appbar.MaterialToolbar
            android:id="@+id/topAppBar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginStart="-20dp"
            android:layout_marginTop="-24dp"
            android:layout_marginEnd="-20dp"
            android:background="@null"
            android:paddingStart="0dp"
            android:paddingEnd="4dp"
            app:menu="@menu/refresh_menu"
            app:navigationIcon="@drawable/ic_close"
            app:title="@string/sort_and_filter"
            app:titleCentered="true" />

        <com.google.android.material.progressindicator.LinearProgressIndicator
            android:id="@+id/progressIndicator"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginStart="-24dp"
            android:layout_marginEnd="-24dp"
            android:indeterminate="true" />

        <LinearLayout
            android:id="@+id/reversedContainer"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginStart="-24dp"
            android:layout_marginEnd="-24dp"
            android:background="?selectableItemBackground"
            android:baselineAligned="false"
            android:gravity="center"
            android:orientation="horizontal"
            android:paddingHorizontal="24dp"
            android:paddingVertical="8dp">

            <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/reversed"
                android:textColor="?attr/colorOnSurface"
                android:textSize="18sp" />

            <com.google.android.material.materialswitch.MaterialSwitch
                android:id="@+id/reversedSwitch"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:clickable="false" />

        </LinearLayout>

        <TextView
            android:id="@+id/sort"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingVertical="8dp"
            android:text="@string/sort"
            android:textStyle="bold" />

        <com.google.android.material.chip.ChipGroup
            android:id="@+id/sort_chip_group"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:chipSpacingHorizontal="8dp"
            app:chipSpacingVertical="-8dp"
            app:singleSelection="true" />

        <TextView
            android:id="@+id/filter"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingVertical="8dp"
            android:text="@string/filter"
            android:textStyle="bold" />

        <com.google.android.material.chip.ChipGroup
            android:id="@+id/filter_group"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />


        <LinearLayout
            android:id="@+id/save_container"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginStart="-24dp"
            android:layout_marginEnd="-24dp"
            android:background="?selectableItemBackground"
            android:baselineAligned="false"
            android:gravity="center"
            android:orientation="horizontal"
            android:paddingHorizontal="16dp"
            android:paddingVertical="8dp">

            <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="end"
                android:textSize="18sp"
                android:text="@string/save"
                android:textColor="?attr/colorOnSurface" />

            <com.google.android.material.checkbox.MaterialCheckBox
                android:id="@+id/save_checkbox"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:clickable="false" />

        </LinearLayout>

        <com.google.android.material.button.MaterialButton
            android:id="@+id/apply"
            style="@style/Widget.Material3.Button.UnelevatedButton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:minHeight="64dp"
            android:text="@string/apply" />
    </LinearLayout>

</androidx.core.widget.NestedScrollView>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_audio_fx.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<me.zhanghai.android.fastscroll.FastScrollNestedScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginVertical="24dp"
        android:clipToPadding="false"
        android:orientation="vertical">

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginHorizontal="24dp"
            android:text="@string/playback_speed"
            android:textColor="?attr/colorOnSurface"
            android:textSize="18sp" />

        <TextView
            android:id="@+id/speedValue"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:textColor="?colorPrimary"
            android:textSize="18sp"
            app:drawableBottomCompat="@drawable/ic_expand_more"
            app:drawableTint="?colorPrimary"
            tools:text="1x" />

        <com.bosphere.fadingedgelayout.FadingEdgeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginHorizontal="24dp"
            android:layout_marginTop="8dp"
            app:fel_edge="left|right"
            app:fel_size_left="80dp"
            app:fel_size_right="80dp">

            <androidx.recyclerview.widget.RecyclerView
                android:id="@+id/speed_recycler"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                tools:listitem="@layout/item_ruler" />

        </com.bosphere.fadingedgelayout.FadingEdgeLayout>

        <LinearLayout
            android:id="@+id/pitch"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="?selectableItemBackground"
            android:baselineAligned="false"
            android:orientation="horizontal"
            android:paddingVertical="20dp">

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_marginHorizontal="24dp"
                android:layout_weight="1"
                android:gravity="center_vertical"
                android:minHeight="44sp"
                android:orientation="vertical">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/change_pitch_with_speed"
                    android:textColor="?attr/colorOnSurface"
                    android:textSize="18sp" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:alpha="0.66"
                    android:textColor="?attr/colorOnSurfaceVariant"
                    android:text="@string/change_pitch_with_speed_desc" />

            </LinearLayout>

            <com.google.android.material.materialswitch.MaterialSwitch
                android:id="@+id/pitchSwitch"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_marginEnd="24dp"
                android:clickable="false" />

        </LinearLayout>

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginHorizontal="24dp"
            android:layout_marginTop="8dp"
            android:text="@string/bass_boost"
            android:textColor="?attr/colorOnSurface"
            android:textSize="18sp" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginHorizontal="24dp"
            android:alpha="0.66"
            android:textColor="?attr/colorOnSurfaceVariant"
            android:text="@string/bass_boost_desc" />

        <com.google.android.material.slider.Slider
            android:id="@+id/bassBoostSlider"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginHorizontal="8dp"
            android:layout_marginVertical="8dp"
            android:stepSize="1"
            android:value="0"
            android:valueFrom="0"
            android:valueTo="10" />

        <LinearLayout
            android:id="@+id/equalizer"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="?selectableItemBackground"
            android:baselineAligned="false"
            android:orientation="vertical"
            android:paddingHorizontal="24dp"
            android:paddingVertical="20dp">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/equalizer"
                android:textColor="?attr/colorOnSurface"
                android:textSize="18sp" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:alpha="0.66"
                android:textColor="?attr/colorOnSurfaceVariant"
                android:text="@string/equalizer_summary" />
        </LinearLayout>
    </LinearLayout>


</me.zhanghai.android.fastscroll.FastScrollNestedScrollView>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_download.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/coordinatorLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <com.google.android.material.appbar.AppBarLayout
        android:id="@+id/appBarLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:fitsSystemWindows="true">

        <com.google.android.material.appbar.CollapsingToolbarLayout
            style="@style/EchoCollapsingBar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:expandedSubtitleTextAppearance="@style/TextAppearance.Material3.BodyLarge"
            app:maxLines="2">

            <FrameLayout
                android:id="@+id/iconContainer"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:paddingHorizontal="24dp"
                android:paddingVertical="64dp">

                <ImageView
                    android:id="@+id/extensionIcon"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:contentDescription="@string/downloads"
                    app:srcCompat="@drawable/ic_downloading" />

            </FrameLayout>

            <com.google.android.material.appbar.MaterialToolbar
                android:id="@+id/toolBar"
                style="@style/Toolbar"
                app:title="@string/downloads" />

        </com.google.android.material.appbar.CollapsingToolbarLayout>

    </com.google.android.material.appbar.AppBarLayout>

    <View
        android:id="@+id/toolbarOutline"
        style="@style/AppBarOutline"
        app:layout_anchor="@id/appBarLayout"
        app:layout_anchorGravity="bottom" />

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipToPadding="false"
        android:paddingHorizontal="20dp"
        android:paddingTop="12dp"
        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
        app:layout_behavior="@string/appbar_scrolling_view_behavior"
        tools:listitem="@layout/item_download" />

    <FrameLayout
        android:id="@+id/fabContainer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="end|bottom">

        <com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton
            android:id="@+id/fabCancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="24dp"
            android:text="@string/cancel_all"
            app:icon="@drawable/ic_close" />

    </FrameLayout>

</androidx.coordinatorlayout.widget.CoordinatorLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_exception.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/coordinatorLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fitsSystemWindows="true">

    <com.google.android.material.appbar.AppBarLayout
        android:id="@+id/appBarLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:fitsSystemWindows="true">

        <com.google.android.material.appbar.CollapsingToolbarLayout
            style="@style/EchoCollapsingBar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:maxLines="5">

            <FrameLayout
                android:id="@+id/exceptionIconContainer"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:paddingHorizontal="24dp"
                android:paddingVertical="64dp">

                <ImageView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:contentDescription="@string/error_x"
                    android:src="@drawable/art_problem" />

            </FrameLayout>

            <com.google.android.material.appbar.MaterialToolbar
                android:id="@+id/exceptionMessage"
                style="@style/Toolbar"
                tools:title="@tools:sample/lorem/random" />

        </com.google.android.material.appbar.CollapsingToolbarLayout>

    </com.google.android.material.appbar.AppBarLayout>

    <View
        android:id="@+id/toolbarOutline"
        style="@style/AppBarOutline"
        app:layout_anchor="@id/appBarLayout"
        app:layout_anchorGravity="bottom" />


    <androidx.core.widget.NestedScrollView
        android:id="@+id/nestedScrollView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipToPadding="false"
        app:layout_behavior="@string/appbar_scrolling_view_behavior">

        <HorizontalScrollView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

            <TextView
                android:id="@+id/exceptionDetails"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingHorizontal="24dp"
                android:paddingVertical="12dp"
                android:textIsSelectable="true"
                tools:text="@tools:sample/lorem/random"
                android:typeface="monospace" />

        </HorizontalScrollView>

    </androidx.core.widget.NestedScrollView>

    <FrameLayout
        android:id="@+id/fabContainer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="end|bottom">

        <com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton
            android:id="@+id/fabCopy"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="24dp"
            android:text="@string/str_copy"
            app:icon="@drawable/ic_copy" />

    </FrameLayout>

</androidx.coordinatorlayout.widget.CoordinatorLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_extension_login_custom_input.xml
================================================================================

<androidx.core.widget.NestedScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/customInputContainer"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true"
    app:layout_behavior="@string/appbar_scrolling_view_behavior">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="24dp"
        android:layout_marginVertical="24dp"
        android:orientation="vertical">

        <LinearLayout
            android:id="@+id/customInput"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" />

        <Button
            android:id="@+id/loginCustomSubmit"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="end"
            android:minHeight="64dp"
            android:text="@string/login"
            app:icon="@drawable/ic_login"
            app:iconGravity="textStart" />

    </LinearLayout>
</androidx.core.widget.NestedScrollView>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_extension_login_selector.xml
================================================================================

<androidx.core.widget.NestedScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:clipToPadding="false"
    android:fillViewport="true"
    android:paddingVertical="8dp">

    <com.google.android.material.button.MaterialButtonToggleGroup
        android:id="@+id/loginToggleGroup"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="24dp"
        android:orientation="vertical"
        app:selectionRequired="true"
        app:singleSelection="true" />
</androidx.core.widget.NestedScrollView>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_generic_collapsable.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/coordinatorLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fitsSystemWindows="true">

    <com.google.android.material.appbar.AppBarLayout
        android:id="@+id/appBarLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:fitsSystemWindows="true">

        <com.google.android.material.appbar.CollapsingToolbarLayout
            style="@style/EchoCollapsingBar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:expandedSubtitleTextAppearance="@style/TextAppearance.Material3.BodyLarge"
            app:maxLines="2">

            <FrameLayout
                android:id="@+id/iconContainer"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:paddingHorizontal="24dp"
                android:paddingVertical="64dp">

                <ImageView
                    android:id="@+id/extensionIcon"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:contentDescription="@string/settings"
                    app:srcCompat="@drawable/ic_extension_32dp" />

            </FrameLayout>

            <com.google.android.material.appbar.MaterialToolbar
                android:id="@+id/toolBar"
                style="@style/Toolbar"
                app:title="@string/settings" />

        </com.google.android.material.appbar.CollapsingToolbarLayout>

    </com.google.android.material.appbar.AppBarLayout>

    <View
        android:id="@+id/toolbarOutline"
        style="@style/AppBarOutline"
        android:alpha="1"
        app:layout_anchor="@id/appBarLayout"
        app:layout_anchorGravity="bottom" />

    <androidx.fragment.app.FragmentContainerView
        android:id="@+id/genericFragmentContainer"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipToPadding="false"
        app:layout_behavior="@string/appbar_scrolling_view_behavior" />

    <include
        android:id="@+id/loading"
        layout="@layout/item_loading"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:visibility="gone" />

</androidx.coordinatorlayout.widget.CoordinatorLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_home.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="dev.brahmkshatriya.echo.ui.main.HomeFragment">

    <androidx.swiperefreshlayout.widget.SwipeRefreshLayout
        android:id="@+id/swipeRefresh"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <androidx.recyclerview.widget.RecyclerView
            android:id="@+id/recycler_view"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:clipToPadding="false"
            android:contentDescription="@string/home"
            android:orientation="vertical"
            android:paddingHorizontal="20dp"
            android:paddingVertical="8dp"
            app:layoutManager="androidx.recyclerview.widget.GridLayoutManager"
            tools:listitem="@layout/item_shelf_lists" />

    </androidx.swiperefreshlayout.widget.SwipeRefreshLayout>

    <FrameLayout
        android:id="@+id/appBarOutline"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="?navBackground"
        android:paddingTop="12dp">

        <View
            android:layout_width="match_parent"
            android:layout_height="1dp"
            android:background="?colorOutlineVariant" />
    </FrameLayout>
</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_library.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="dev.brahmkshatriya.echo.ui.main.LibraryFragment">

    <androidx.swiperefreshlayout.widget.SwipeRefreshLayout
        android:id="@+id/swipeRefresh"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <androidx.recyclerview.widget.RecyclerView
            android:id="@+id/recyclerView"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:clipToPadding="false"
            android:contentDescription="@string/home"
            android:orientation="vertical"
            android:paddingHorizontal="20dp"
            android:paddingVertical="8dp"
            app:layoutManager="androidx.recyclerview.widget.GridLayoutManager"
            tools:listitem="@layout/item_shelf_lists" />

    </androidx.swiperefreshlayout.widget.SwipeRefreshLayout>

    <FrameLayout
        android:id="@+id/appBarOutline"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="?navBackground"
        android:paddingTop="12dp">

        <View
            android:layout_width="match_parent"
            android:layout_height="1dp"
            android:background="?colorOutlineVariant" />
    </FrameLayout>

    <FrameLayout
        android:id="@+id/createPlaylistContainer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|end"
        android:clipToPadding="false">

        <com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton
            android:id="@+id/createPlaylist"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/create"
            android:maxLines="2"
            app:icon="@drawable/ic_playlist_add"
            android:layout_margin="24dp" />
    </FrameLayout>
</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_main.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.fragment.app.FragmentContainerView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/main_fragment_container_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:layout="@layout/fragment_home" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_manage_extensions.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/coordinatorLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <com.google.android.material.appbar.AppBarLayout
        android:id="@+id/appBarLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:liftOnScrollTargetViewId="@id/recyclerView">

        <com.google.android.material.appbar.MaterialToolbar
            android:id="@+id/toolBar"
            android:layout_width="match_parent"
            android:layout_height="?attr/actionBarSize"
            android:layout_marginHorizontal="8dp"
            app:layout_scrollEffect="compress"
            app:layout_scrollFlags="scroll|enterAlwaysCollapsed|snap"
            app:navigationIcon="@drawable/ic_back"
            app:menu="@menu/update_menu"
            app:title="@string/extensions" />

        <com.google.android.material.tabs.TabLayout
            android:id="@+id/tabLayout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

    </com.google.android.material.appbar.AppBarLayout>

    <View
        android:id="@+id/appBarOutline"
        style="@style/AppBarOutline"
        app:layout_anchor="@id/appBarLayout"
        app:layout_anchorGravity="bottom" />

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipToPadding="false"
        android:contentDescription="@string/home"
        android:orientation="vertical"
        android:paddingVertical="24dp"
        tools:listitem="@layout/item_extension"
        app:layout_behavior="@string/appbar_scrolling_view_behavior"
        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager" />

    <FrameLayout
        android:id="@+id/fabContainer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="end|bottom">

        <com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton
            android:id="@+id/fabAddExtensions"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="24dp"
            android:text="@string/add"
            app:icon="@drawable/ic_add_circle" />

    </FrameLayout>

</androidx.coordinatorlayout.widget.CoordinatorLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_media_details.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.swiperefreshlayout.widget.SwipeRefreshLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/swipeRefresh"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipToPadding="false"
        android:paddingHorizontal="20dp"
        android:paddingTop="8dp"
        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
        tools:listitem="@layout/item_media_header" />

</androidx.swiperefreshlayout.widget.SwipeRefreshLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_media.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/coordinatorLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fitsSystemWindows="true">

    <com.google.android.material.appbar.AppBarLayout
        android:id="@+id/appBarLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:fitsSystemWindows="true">

        <com.google.android.material.appbar.CollapsingToolbarLayout
            android:id="@+id/collapsingToolbar"
            style="@style/EchoCollapsingBar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:expandedTitleMarginEnd="24dp"
            app:expandedTitleMarginStart="64dp"
            app:maxLines="3">

            <ImageView
                android:id="@+id/endIcon"
                android:layout_width="24dp"
                android:layout_height="24dp"
                android:layout_gravity="bottom"
                android:layout_marginHorizontal="24dp"
                android:layout_marginVertical="16dp"
                android:importantForAccessibility="no"
                app:srcCompat="@drawable/ic_album"
                app:tint="?colorOnSurface" />

            <androidx.constraintlayout.widget.ConstraintLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:paddingHorizontal="24dp"
                android:paddingTop="64dp"
                android:paddingBottom="80dp">

                <androidx.cardview.widget.CardView
                    android:id="@+id/coverContainer"
                    style="@style/ItemCover"
                    tools:ignore="MissingConstraints">

                    <ImageView
                        android:id="@+id/cover"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:importantForAccessibility="no"
                        tools:ignore="ImageContrastCheck" />

                </androidx.cardview.widget.CardView>

            </androidx.constraintlayout.widget.ConstraintLayout>


            <com.google.android.material.appbar.MaterialToolbar
                android:id="@+id/toolBar"
                style="@style/Toolbar"
                android:background="@android:color/transparent"
                app:menu="@menu/more_menu"
                tools:title="@tools:sample/full_names" />

        </com.google.android.material.appbar.CollapsingToolbarLayout>

    </com.google.android.material.appbar.AppBarLayout>

    <View
        android:id="@+id/appbarOutline"
        style="@style/AppBarOutline"
        app:layout_anchor="@id/appBarLayout"
        app:layout_anchorGravity="bottom" />

    <androidx.fragment.app.FragmentContainerView
        android:id="@+id/mediaFragmentContainer"
        android:name="dev.brahmkshatriya.echo.ui.media.MediaDetailsFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:layout_behavior="@string/appbar_scrolling_view_behavior"
        tools:layout="@layout/fragment_media_details" />

    <FrameLayout
        android:id="@+id/fabContainer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="end|bottom">

        <com.google.android.material.floatingactionbutton.FloatingActionButton
            android:id="@+id/fabEditPlaylist"
            style="?floatingActionButtonPrimaryStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="24dp"
            android:contentDescription="@string/edit_playlist"
            app:srcCompat="@drawable/ic_edit_note" />

    </FrameLayout>

</androidx.coordinatorlayout.widget.CoordinatorLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_player_info.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.fragment.app.FragmentContainerView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/playerInfoContainer"
    android:name="dev.brahmkshatriya.echo.ui.media.MediaDetailsFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:layout="@layout/fragment_media_details" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_player_lyrics.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:keepScreenOn="true">

    <com.bosphere.fadingedgelayout.FadingEdgeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:fel_edge="bottom|top"
        app:fel_size_bottom="80dp"
        app:fel_size_top="80dp"
        app:layout_behavior="@string/appbar_scrolling_view_behavior">

        <androidx.recyclerview.widget.RecyclerView
            android:id="@+id/lyricsRecyclerView"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:clipToPadding="false"
            android:paddingVertical="72dp"
            app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
            tools:listitem="@layout/item_lyric" />

    </com.bosphere.fadingedgelayout.FadingEdgeLayout>

    <com.google.android.material.appbar.AppBarLayout
        android:id="@+id/appBarLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:backgroundTint="@android:color/transparent"
        android:clipToPadding="false"
        app:liftOnScroll="false"
        app:liftOnScrollColor="@android:color/transparent">

        <com.google.android.material.search.SearchBar
            android:id="@+id/searchBarText"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginHorizontal="2dp"
            android:layout_marginVertical="6dp"
            android:hint="@string/search"
            android:paddingEnd="4dp"
            app:backgroundTint="@color/amoled_bg"
            app:layout_scrollFlags="scroll|enterAlways"
            app:menu="@menu/lyrics_menu"
            app:navigationIcon="@drawable/ic_search_outline"
            tools:ignore="RtlSymmetry" />

    </com.google.android.material.appbar.AppBarLayout>

    <TextView
        android:id="@+id/noLyrics"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:alpha="0.66"
        android:text="@string/no_lyrics"
        android:textAlignment="center"
        android:textAppearance="@style/TextAppearance.Material3.HeadlineSmall"
        android:textColor="@color/amoled_fg"
        android:visibility="gone" />

    <include
        android:id="@+id/lyricsItem"
        layout="@layout/item_lyrics_item"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        app:layout_behavior="com.google.android.material.behavior.HideViewOnScrollBehavior" />

    <com.google.android.material.search.SearchView
        android:id="@+id/searchView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:hint="@string/search"
        app:backgroundTint="@color/amoled_bg"
        app:layout_anchor="@id/searchBarText"
        tools:visibility="gone">

        <androidx.recyclerview.widget.RecyclerView
            android:id="@+id/searchRecyclerView"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="?navBackground"
            android:clipToPadding="false"
            android:padding="4dp"
            app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager" />

    </com.google.android.material.search.SearchView>
</androidx.coordinatorlayout.widget.CoordinatorLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_player_more.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:translationY="0dp">

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="8dp"
        android:layout_marginTop="@dimen/player_more_top_margin"
        android:layout_marginBottom="-2dp">

        <com.google.android.material.button.MaterialButtonToggleGroup
            android:id="@+id/buttonToggleGroupBg"
            style="@style/PlayerMoreToggleGroup"
            android:alpha="0">

            <com.google.android.material.button.MaterialButton style="@style/PlayerMoreBackgroundButton" />

            <com.google.android.material.button.MaterialButton style="@style/PlayerMoreBackgroundButton" />

            <com.google.android.material.button.MaterialButton style="@style/PlayerMoreBackgroundButton" />
        </com.google.android.material.button.MaterialButtonToggleGroup>

        <com.google.android.material.button.MaterialButtonToggleGroup
            android:id="@+id/buttonToggleGroup"
            style="@style/PlayerMoreToggleGroup"
            app:singleSelection="true">

            <com.google.android.material.button.MaterialButton
                android:id="@+id/queue"
                style="@style/PlayerMoreSelected"
                android:text="@string/up_next" />

            <com.google.android.material.button.MaterialButton
                android:id="@+id/lyrics"
                style="@style/PlayerMoreSelected"
                android:text="@string/lyrics"
                app:backgroundTint="@color/button_player_more" />

            <com.google.android.material.button.MaterialButton
                android:id="@+id/info"
                style="@style/PlayerMoreSelected"
                android:text="@string/info" />
        </com.google.android.material.button.MaterialButtonToggleGroup>
    </FrameLayout>

    <com.google.android.material.card.MaterialCardView
        android:id="@+id/viewCard"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="8dp"
        android:clipToPadding="false"
        android:padding="0dp"
        app:cardBackgroundColor="@android:color/transparent"
        app:contentPadding="0dp"
        app:shapeAppearanceOverlay="@style/PlayerMoreBottomShape"
        app:strokeWidth="0dp">

        <androidx.fragment.app.FragmentContainerView
            android:id="@+id/player_more_fragment_container"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            tools:layout="@layout/fragment_player_queue" />
    </com.google.android.material.card.MaterialCardView>
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_player_queue.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.recyclerview.widget.RecyclerView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="?echoBackground"
    android:backgroundTint="#54FFFFFF"
    android:backgroundTintMode="multiply"
    android:clipToPadding="false"
    android:paddingVertical="4dp"
    app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
    tools:listitem="@layout/item_playlist_track">

</androidx.recyclerview.widget.RecyclerView>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_player.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <FrameLayout
        android:id="@+id/bg_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:translationZ="-2dp">

        <com.flaviofaria.kenburnsview.KenBurnsView
            android:id="@+id/bg_image"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            app:layout_constraintBottom_toTopOf="@+id/bg_gradient"
            app:layout_constraintHorizontal_bias="0.5"
            app:layout_constraintTop_toTopOf="parent" />

        <androidx.media3.ui.PlayerView
            android:id="@+id/player_view"
            android:background="@color/black"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:clickable="false"
            android:visibility="gone"
            app:use_controller="false"
            app:show_buffering="always" />

        <include
            android:id="@+id/bgPanel"
            layout="@layout/item_click_panels" />

    </FrameLayout>

    <FrameLayout
        android:id="@+id/fg_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <ImageView
            android:id="@+id/bg_gradient"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:importantForAccessibility="no"
            android:translationZ="-2dp"
            app:layout_constraintBottom_toTopOf="@+id/view_pager"
            app:layout_constraintHorizontal_bias="0.5"
            app:layout_constraintTop_toBottomOf="@+id/bg_image"
            app:srcCompat="@drawable/gradient_track"
            app:tint="?echoBackground" />

        <View
            android:id="@+id/bg_collapsed"
            android:layout_width="match_parent"
            android:layout_height="@dimen/collapsed_cover_size"
            android:layout_margin="8dp"
            android:alpha="0.5"
            android:background="@drawable/shape_rounded_item_corner"
            android:backgroundTint="?colorSurfaceContainerHigh"
            android:translationZ="-1dp" />

        <androidx.viewpager2.widget.ViewPager2
            android:id="@+id/view_pager"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

        <!--        <include layout="@layout/item_player_track"/>-->

        <com.google.android.material.appbar.MaterialToolbar
            android:id="@+id/expanded_toolbar"
            style="@style/PlayerToolbarStyle" />

        <androidx.constraintlayout.widget.ConstraintLayout
            android:id="@+id/constraint_layout"
            style="@style/PlayerExpandedConstraintLayout">

            <View
                android:id="@+id/player_track_cover_placeholder"
                style="@style/PlayerTrackCoverContainer"
                app:layout_constraintBottom_toTopOf="@id/player_controls"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="parent" />

            <include
                android:id="@+id/player_controls"
                layout="@layout/item_player_controls"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_marginBottom="-16dp"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toBottomOf="@+id/player_track_cover_placeholder"
                app:layout_constraintWidth_max="640dp" />
        </androidx.constraintlayout.widget.ConstraintLayout>

        <include
            android:id="@+id/player_collapsed_container"
            layout="@layout/item_player_collapsed_controls" />

    </FrameLayout>

    <androidx.fragment.app.FragmentContainerView
        android:id="@+id/player_more_container"
        android:name="dev.brahmkshatriya.echo.ui.player.more.PlayerMoreFragment"
        style="@style/Widget.Material3.BottomSheet"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipToPadding="false"
        android:outlineProvider="none"
        app:backgroundTint="@android:color/transparent"
        app:behavior_hideable="false"
        app:behavior_peekHeight="@dimen/player_info_peek_height"
        app:layout_behavior="com.google.android.material.bottomsheet.BottomSheetBehavior"
        tools:layout="@layout/fragment_player_more"
        tools:layout_marginTop="-72dp" />

</androidx.coordinatorlayout.widget.CoordinatorLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_playlist_edit.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/coordinatorLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <com.google.android.material.appbar.AppBarLayout
        android:id="@+id/appBarLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <com.google.android.material.appbar.CollapsingToolbarLayout
            style="@style/EchoCollapsingBar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

            <FrameLayout
                android:id="@+id/toolbarIconContainer"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:paddingHorizontal="24dp"
                android:paddingVertical="64dp">

                <ImageView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:contentDescription="@string/edit_playlist"
                    android:src="@drawable/art_edit_note"
                    app:tint="?attr/colorOnSurface" />

            </FrameLayout>

            <com.google.android.material.appbar.MaterialToolbar
                android:id="@+id/toolbar"
                style="@style/Toolbar"
                app:menu="@menu/delete_menu"
                app:title="@string/edit_playlist" />

        </com.google.android.material.appbar.CollapsingToolbarLayout>

    </com.google.android.material.appbar.AppBarLayout>

    <View
        android:id="@+id/toolbarOutline"
        style="@style/AppBarOutline"
        android:alpha="0"
        app:layout_anchor="@id/appBarLayout"
        app:layout_anchorGravity="bottom" />

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:clipToPadding="false"
        android:paddingTop="12dp"
        android:paddingBottom="96dp"
        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
        app:layout_behavior="com.google.android.material.appbar.AppBarLayout$ScrollingViewBehavior"
        tools:itemCount="1"
        tools:listitem="@layout/item_edit_playlist_header" />

    <include
        android:id="@+id/loading"
        layout="@layout/item_loading"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:layout_behavior="com.google.android.material.appbar.AppBarLayout$ScrollingViewBehavior" />


    <FrameLayout
        android:id="@+id/fabContainer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center|bottom"
        android:clipToPadding="false">

        <com.google.android.material.card.MaterialCardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginHorizontal="20dp"
            android:layout_marginBottom="12dp"
            android:translationZ="8dp"
            app:cardBackgroundColor="?navBackground"
            app:cardCornerRadius="40dp"
            app:strokeWidth="0dp">

            <com.google.android.material.button.MaterialButtonGroup
                style="@style/Widget.Material3.MaterialButtonGroup.Connected"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginHorizontal="4dp"
                android:spacing="4dp">

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/add"
                    style="@style/Widget.Material3.Button.TonalButton"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:ellipsize="middle"
                    android:maxLines="1"
                    android:minHeight="64dp"
                    android:text="@string/add_song"
                    app:icon="@drawable/ic_add_circle" />

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/save"
                    style="@style/Widget.Material3.Button.UnelevatedButton"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:ellipsize="middle"
                    android:maxLines="1"
                    android:minHeight="64dp"
                    android:text="@string/save"
                    app:icon="@drawable/ic_save" />

            </com.google.android.material.button.MaterialButtonGroup>

        </com.google.android.material.card.MaterialCardView>
    </FrameLayout>
</androidx.coordinatorlayout.widget.CoordinatorLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_playlist_search.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <androidx.fragment.app.FragmentContainerView
        android:id="@+id/playlistSearchContainer"
        android:name="dev.brahmkshatriya.echo.ui.main.search.SearchFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginBottom="72dp" />

    <LinearLayout
        android:id="@+id/bottomSheet"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="?navBackground"
        android:clipToPadding="false"
        android:orientation="vertical"
        android:outlineProvider="none"
        app:behavior_hideable="false"
        app:behavior_peekHeight="72dp"
        app:layout_behavior="com.google.android.material.bottomsheet.BottomSheetBehavior">

        <com.google.android.material.bottomsheet.BottomSheetDragHandleView
            android:id="@+id/bottomSheetDragHandle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

        <LinearLayout
            android:id="@+id/selectedSongsLayout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="-40dp"
            android:layout_marginBottom="8dp"
            android:paddingHorizontal="24dp">

            <TextView
                android:id="@+id/selectedSongs"
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:gravity="center_vertical"
                android:textAppearance="?attr/textAppearanceTitleLarge"
                android:textSize="18sp" />

            <com.google.android.material.button.MaterialButton
                android:id="@+id/addTracks"
                style="@style/Widget.Material3Expressive.Button"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:contentDescription="@string/add"
                android:minHeight="58dp"
                android:text="@string/add"
                app:icon="@drawable/ic_add_circle" />

        </LinearLayout>

        <androidx.recyclerview.widget.RecyclerView
            android:id="@+id/recyclerView"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:clipToPadding="false"
            android:paddingHorizontal="20dp"
            app:layoutManager="androidx.recyclerview.widget.GridLayoutManager"
            app:spanCount="3"
            tools:listitem="@layout/item_media_selectable" />

    </LinearLayout>

</androidx.coordinatorlayout.widget.CoordinatorLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_recycler_with_refresh.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.swiperefreshlayout.widget.SwipeRefreshLayout android:id="@+id/swipeRefresh"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools">

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recycler_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipToPadding="false"
        android:contentDescription="@string/home"
        android:orientation="vertical"
        android:paddingHorizontal="20dp"
        android:paddingVertical="8dp"
        app:layoutManager="androidx.recyclerview.widget.GridLayoutManager"
        tools:listitem="@layout/item_shelf_lists" />

</androidx.swiperefreshlayout.widget.SwipeRefreshLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_search.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="dev.brahmkshatriya.echo.ui.main.HomeFragment">

    <androidx.swiperefreshlayout.widget.SwipeRefreshLayout
        android:id="@+id/swipeRefresh"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <androidx.recyclerview.widget.RecyclerView
            android:id="@+id/recycler_view"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:clipToPadding="false"
            android:contentDescription="@string/home"
            android:orientation="vertical"
            android:paddingHorizontal="20dp"
            android:paddingVertical="8dp"
            app:layoutManager="androidx.recyclerview.widget.GridLayoutManager"
            tools:listitem="@layout/item_shelf_lists" />

    </androidx.swiperefreshlayout.widget.SwipeRefreshLayout>

    <FrameLayout
        android:id="@+id/appBarOutline"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="?navBackground"
        android:paddingTop="12dp">

        <View
            android:layout_width="match_parent"
            android:layout_height="1dp"
            android:background="?colorOutlineVariant" />
    </FrameLayout>

    <com.google.android.material.search.SearchView
        android:id="@+id/quickSearchView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:elevation="1dp"
        android:hint="@string/search"
        app:backHandlingEnabled="true"
        app:backgroundTint="?navBackground"
        app:closeIcon="@drawable/ic_close"
        app:searchHintIcon="@drawable/ic_back">

        <androidx.recyclerview.widget.RecyclerView
            android:id="@+id/quickSearchRecyclerView"
            android:background="?echoBackground"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:clipToPadding="false"
            android:contentDescription="@string/search"
            android:orientation="vertical"
            app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager" />

    </com.google.android.material.search.SearchView>
</androidx.coordinatorlayout.widget.CoordinatorLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\fragment_webview.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <com.telefonica.nestedscrollwebview.NestedScrollWebView
        android:id="@+id/webview"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <com.google.android.material.progressindicator.LinearProgressIndicator
        android:id="@+id/progress"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:indeterminate="true" />
</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_click_panels.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <View
        android:id="@+id/start"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="?attr/selectableItemBackground" />

    <View
        android:id="@+id/end"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="?attr/selectableItemBackground" />

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_color_card.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<com.google.android.material.card.MaterialCardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    style="@style/Selectable"
    android:layout_width="48dp"
    android:layout_height="48dp"
    android:layout_marginHorizontal="8dp"
    app:cardCornerRadius="24dp"
    tools:cardBackgroundColor="#00bbff">

    <FrameLayout
        android:id="@+id/colorSelected"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <View
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:alpha="0.6"
            android:background="?colorSurfaceContainer" />

        <ImageView
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:layout_gravity="center"
            android:importantForAccessibility="no"
            app:srcCompat="@drawable/ic_check_20dp"
            app:tint="?colorOnSurface" />

    </FrameLayout>

</com.google.android.material.card.MaterialCardView>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_download_task.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginHorizontal="8dp"
    android:background="@drawable/shape_rounded_item_corner"
    android:backgroundTint="?navBackground"
    android:gravity="center_vertical"
    android:minHeight="44sp"
    android:orientation="horizontal"
    android:paddingHorizontal="16dp"
    android:paddingVertical="8dp">

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical">

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="?attr/colorOnSurface"
            tools:text="Title" />

        <TextView
            android:id="@+id/subtitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:alpha="0.66"
            android:textColor="?attr/colorOnSurfaceVariant"
            tools:text="Summary" />
    </LinearLayout>

    <com.google.android.material.progressindicator.CircularProgressIndicator
        android:id="@+id/progressBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        app:showAnimationBehavior="none" />
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_download.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginStart="-12dp"
    android:layout_marginEnd="-12dp"
    android:orientation="vertical"
    android:paddingVertical="4dp">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:minHeight="44sp"
        android:orientation="horizontal">

        <ImageView
            android:id="@+id/extensionIcon"
            android:layout_width="28dp"
            android:layout_height="28dp"
            android:layout_margin="16dp"
            android:importantForAccessibility="no"
            android:src="@drawable/ic_extension" />

        <ImageView
            android:id="@+id/imageView"
            android:layout_width="64dp"
            android:layout_height="64dp"
            android:background="@drawable/rounded_rectangle_cover"
            android:importantForAccessibility="no" />

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginHorizontal="12dp"
            android:layout_weight="1"
            android:orientation="vertical">

            <TextView
                android:id="@+id/title"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="?attr/colorOnSurface"
                tools:text="Title" />

            <TextView
                android:id="@+id/subtitle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:alpha="0.66"
                android:ellipsize="end"
                android:maxLines="2"
                android:textColor="?attr/colorOnSurfaceVariant"
                tools:text="Summary" />
        </LinearLayout>

        <com.google.android.material.button.MaterialButton
            android:id="@+id/retry"
            style="?attr/materialIconButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/remove"
            android:padding="8dp"
            app:icon="@drawable/ic_refresh"
            app:iconSize="24dp"
            app:iconTint="?colorOnSurface" />

        <com.google.android.material.button.MaterialButton
            android:id="@+id/remove"
            style="?attr/materialIconButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/remove"
            android:padding="8dp"
            app:icon="@drawable/ic_close"
            app:iconSize="24dp"
            app:iconTint="?colorOnSurface" />

    </LinearLayout>

    <TextView
        android:id="@+id/exception"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dp"
        android:layout_marginHorizontal="16dp"
        android:background="@drawable/rounded_rectangle_cover"
        android:backgroundTint="?navBackground"
        android:ellipsize="end"
        android:textColor="?colorError"
        android:maxLines="2"
        android:paddingVertical="12dp"
        android:paddingHorizontal="16dp"
        tools:text="@tools:sample/lorem/random" />
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_edit_playlist_header.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <androidx.constraintlayout.widget.ConstraintLayout
        android:id="@+id/coverContainer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:clipToPadding="false"
        android:paddingHorizontal="24dp"
        android:paddingVertical="8dp">

        <androidx.cardview.widget.CardView
            style="@style/ItemCover"
            tools:ignore="MissingConstraints">

            <ImageView
                android:id="@+id/cover"
                style="@style/Selectable"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:importantForAccessibility="no"
                tools:ignore="ImageContrastCheck" />

            <com.google.android.material.button.MaterialButton
                android:id="@+id/removeCover"
                style="@style/IconButtonOutlined"
                android:layout_gravity="bottom|end"
                android:layout_margin="12dp"
                android:contentDescription="@string/add"
                android:padding="12dp"
                android:paddingStart="12dp"
                android:paddingEnd="12dp"
                app:icon="@drawable/ic_cancel" />

        </androidx.cardview.widget.CardView>

    </androidx.constraintlayout.widget.ConstraintLayout>


    <com.google.android.material.textfield.TextInputLayout
        style="@style/TextInput"
        android:layout_marginHorizontal="24dp"
        android:hint="@string/playlist_name"
        app:startIconDrawable="@drawable/ic_queue_music">

        <com.google.android.material.textfield.TextInputEditText
            android:id="@+id/playlistName"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:inputType="text"
            android:singleLine="true" />

    </com.google.android.material.textfield.TextInputLayout>


    <com.google.android.material.textfield.TextInputLayout
        style="@style/TextInput"
        android:layout_marginHorizontal="24dp"
        android:hint="@string/playlist_description"
        app:startIconDrawable="@drawable/ic_article">

        <com.google.android.material.textfield.TextInputEditText
            android:id="@+id/playlistDescription"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:inputType="text"
            android:singleLine="true" />

    </com.google.android.material.textfield.TextInputLayout>

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_edit_text.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="16dp">

    <com.google.android.material.textfield.TextInputEditText
        android:id="@+id/edit_text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:importantForAutofill="no"
        android:textSize="20sp"
        android:hint="@string/settings"
        android:inputType="text" />

</LinearLayout>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_extension_add_footer.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<com.google.android.material.button.MaterialButton xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/Widget.Material3.Button.UnelevatedButton"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="24dp"
    android:minHeight="64dp"
    android:text="@string/add" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_extension_add_header.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <com.google.android.material.appbar.MaterialToolbar
        android:id="@+id/toolBar"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginEnd="-64dp"
        android:layout_weight="1"
        android:background="@null"
        app:navigationIcon="@drawable/ic_close"
        app:title="@string/add_extensions"
        app:titleCentered="true" />

    <com.google.android.material.checkbox.MaterialCheckBox
        android:id="@+id/selectAll"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="false"
        android:layout_marginEnd="16dp"
        android:layout_marginVertical="8dp" />
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_extension_add.xml
================================================================================

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    style="@style/Selectable"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="8dp"
    android:orientation="horizontal">

    <FrameLayout
        android:id="@+id/itemContainer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingHorizontal="8dp">

        <ImageView
            android:id="@+id/itemExtension"
            android:layout_width="32dp"
            android:layout_height="@dimen/collapsed_cover_size"
            android:layout_marginHorizontal="8dp"
            android:contentDescription="@string/extension"
            android:scaleType="fitCenter"
            app:srcCompat="@drawable/ic_extension_32dp" />

    </FrameLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="@dimen/collapsed_cover_size"
        android:baselineAligned="false"
        android:gravity="center"
        android:orientation="horizontal">

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:baselineAligned="false"
            android:gravity="center"
            android:orientation="vertical">

            <TextView
                android:id="@+id/extensionName"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:maxLines="1"
                android:textStyle="bold"
                tools:text="@tools:sample/full_names" />

            <TextView
                android:id="@+id/extensionSubtitle"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:maxLines="1"
                tools:text="@tools:sample/cities" />
        </LinearLayout>

        <com.google.android.material.checkbox.MaterialCheckBox
            android:id="@+id/extensionSwitch"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="8dp"
            android:checked="true"
            android:padding="8dp" />
    </LinearLayout>
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_extension_button.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<com.google.android.material.button.MaterialButton xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/OutlinedButton"
    app:icon="@drawable/ic_extension_32dp"
    app:iconSize="32dp"
    app:iconPadding="16dp"
    android:paddingStart="16dp"
    android:paddingEnd="16dp"
    app:iconTint="?colorControlActivated" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_extension.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    style="@style/Selectable"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginHorizontal="24dp"
    android:layout_marginVertical="4dp"
    android:background="@drawable/shape_rounded_item_corner"
    android:backgroundTint="@color/amoled_fg_semi"
    android:orientation="horizontal"
    android:paddingHorizontal="8dp">

    <FrameLayout
        android:id="@+id/itemContainer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <ImageView
            android:id="@+id/itemExtension"
            android:layout_width="32dp"
            android:layout_height="@dimen/collapsed_cover_size"
            android:layout_marginHorizontal="8dp"
            android:contentDescription="@string/extension"
            android:scaleType="fitCenter"
            app:srcCompat="@drawable/ic_extension_32dp" />

    </FrameLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="@dimen/collapsed_cover_size"
        android:baselineAligned="false"
        android:gravity="center"
        android:orientation="horizontal">

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:baselineAligned="false"
            android:gravity="center"
            android:orientation="vertical"
            android:padding="8dp">

            <TextView
                android:id="@+id/extensionName"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:maxLines="1"
                android:textStyle="bold"
                tools:text="@tools:sample/full_names" />

            <TextView
                android:id="@+id/extensionVersion"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:maxLines="1"
                tools:text="@tools:sample/cities" />
        </LinearLayout>

        <com.google.android.material.button.MaterialButton
            android:id="@+id/extensionUse"
            style="@style/IconButtonTonal"
            android:contentDescription="@string/extension"
            app:icon="@drawable/ic_chevron_forward" />

        <com.google.android.material.button.MaterialButton
            android:id="@+id/extensionDrag"
            style="@style/IconButtonTransparent"
            app:icon="@drawable/ic_drag_20dp" />
    </LinearLayout>
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_feed_buttons.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <LinearLayout
        android:id="@+id/buttonGroup"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dp"
        android:layout_marginBottom="12dp"
        android:spacing="0dp">

        <com.google.android.material.button.MaterialButton
            android:id="@+id/shuffleButton"
            style="@style/IconButtonTertiary"
            android:background="@drawable/art_twelve_sided_cookie"
            android:contentDescription="@string/shuffle"
            app:icon="@drawable/ic_shuffle" />

        <com.google.android.material.button.MaterialButton
            android:id="@+id/playButton"
            style="@style/Widget.Material3Expressive.Button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ellipsize="end"
            android:insetLeft="4dp"
            android:insetRight="4dp"
            android:maxLines="1"
            android:paddingStart="16dp"
            android:paddingEnd="24dp"
            android:text="@string/play"
            android:textAppearance="@style/TextAppearance.Material3.BodyMedium.Emphasized"
            app:icon="@drawable/ic_play"
            app:iconSize="24dp" />

        <View
            android:id="@+id/buttonPadding"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:visibility="invisible" />

        <com.google.android.material.button.MaterialButton
            android:id="@+id/searchToggleButton"
            style="@style/IconButton"
            android:checkable="true"
            android:checked="true"
            android:contentDescription="@string/search"
            app:icon="@drawable/ic_search_outline"
            app:materialThemeOverlay="@style/TabButtonOverlay" />

        <com.google.android.material.button.MaterialButton
            android:id="@+id/sortToggleButton"
            style="@style/IconButtonOutlined"
            android:contentDescription="@string/sort"
            android:scaleX="-1"
            app:icon="@drawable/ic_sort" />
    </LinearLayout>

    <LinearLayout
        android:visibility="gone"
        android:id="@+id/searchBarContainer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="-12dp"
        android:layout_marginBottom="12dp"
        android:alpha="1"
        android:gravity="end|center_vertical"
        android:orientation="horizontal"
        android:translationZ="-1dp">

        <FrameLayout
            android:id="@+id/searchContainer"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginEnd="-48dp"
            android:layout_weight="1">

            <com.google.android.material.textfield.TextInputLayout
                android:id="@+id/searchLayout"
                style="@style/Widget.Material3.TextInputEditText.OutlinedBox"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/search"
                android:paddingVertical="0dp"
                android:paddingStart="0dp"
                android:paddingEnd="0dp"
                app:boxBackgroundColor="@color/amoled_fg_semi"
                app:boxCornerRadiusBottomEnd="24dp"
                app:boxCornerRadiusBottomStart="24dp"
                app:boxCornerRadiusTopEnd="24dp"
                app:boxCornerRadiusTopStart="24dp"
                app:boxStrokeWidth="0dp"
                app:boxStrokeWidthFocused="1dp"
                app:startIconDrawable="@drawable/ic_search_outline">

                <com.google.android.material.textfield.TextInputEditText
                    android:id="@+id/searchBarText"
                    android:layout_width="match_parent"
                    android:layout_height="48dp"
                    android:inputType="text"
                    android:padding="0dp"
                    android:singleLine="true" />

            </com.google.android.material.textfield.TextInputLayout>
        </FrameLayout>

        <com.google.android.material.button.MaterialButton
            android:id="@+id/searchClose"
            style="@style/IconButtonTransparent"
            android:layout_gravity="bottom"
            android:contentDescription="@string/close"
            app:icon="@drawable/ic_close_small" />

    </LinearLayout>

    <com.google.android.material.chip.ChipGroup
        android:id="@+id/chipGroup"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="4dp"
        android:layout_marginTop="-12dp"
        android:layout_marginBottom="12dp" />

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_input.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<com.google.android.material.textfield.TextInputLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    style="@style/TextInput"
    app:startIconTint="?colorControlNormal">

    <com.google.android.material.textfield.TextInputEditText
        android:id="@+id/editText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:inputType="text"
        android:singleLine="true" />

</com.google.android.material.textfield.TextInputLayout>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_line.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<View xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/toolbarOutline"
    style="@style/AppBarOutline"
    android:layout_marginStart="-20dp"
    android:layout_marginTop="24dp"
    android:layout_marginEnd="-20dp"
    android:layout_marginBottom="12dp"
    android:alpha="0.5" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_loading_small.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="vertical"
    android:paddingVertical="24dp">

    <com.google.android.material.loadingindicator.LoadingIndicator
        android:id="@+id/progress"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:indeterminate="true"
        app:containerColor="?colorPrimaryInverse" />

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_loading.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="vertical"
    android:paddingVertical="48dp">

    <com.google.android.material.loadingindicator.LoadingIndicator
        android:id="@+id/progress"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:indeterminate="true"
        app:indicatorSize="64dp" />

    <TextView
        android:id="@+id/textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="24dp"
        android:maxWidth="240dp"
        android:text="@string/loading"
        android:textAlignment="center"
        android:textAppearance="@style/TextAppearance.Material3.DisplaySmall"
        android:textSize="22sp" />

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_login_user.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical">

    <LinearLayout
        android:id="@+id/userContainer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:clipToPadding="false"
        android:gravity="center_vertical"
        android:orientation="horizontal"
        android:paddingHorizontal="24dp"
        android:paddingVertical="16dp">

        <androidx.cardview.widget.CardView
            app:cardCornerRadius="64dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

            <ImageView
                android:id="@+id/currentUserAvatar"
                tools:srcCompat="@tools:sample/avatars"
                android:layout_width="64dp"
                android:layout_height="64dp"
                android:importantForAccessibility="no" />

        </androidx.cardview.widget.CardView>

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:gravity="center_vertical"
            android:orientation="vertical"
            android:paddingHorizontal="16dp">

            <TextView
                android:id="@+id/currentUserName"
                tools:text="@tools:sample/full_names"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" />

            <TextView
                android:id="@+id/currentUserSubTitle"
                tools:text="@tools:sample/lorem"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:alpha="0.66" />

        </LinearLayout>

    </LinearLayout>

    <LinearLayout
        android:id="@+id/notLoggedInContainer"
        android:visibility="gone"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:clipToPadding="false"
        android:gravity="center_vertical"
        android:orientation="horizontal"
        android:paddingHorizontal="24dp"
        android:paddingVertical="16dp">

        <TextView
            android:id="@+id/notLoggedIn"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:alpha="0.66"
            android:gravity="center"
            android:minHeight="64dp"
            android:text="@string/not_logged_in"
            android:textAppearance="@style/TextAppearance.Material3.BodyMedium" />

    </LinearLayout>

    <HorizontalScrollView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:scrollbars="none">

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:clipToPadding="false"
            android:orientation="horizontal"
            android:paddingHorizontal="20dp">

            <Button
                android:id="@+id/login"
                style="@style/DialogHorizontalButton"
                app:icon="@drawable/ic_login"
                android:text="@string/login" />

            <Button
                android:id="@+id/logout"
                style="@style/DialogHorizontalButton"
                app:icon="@drawable/ic_logout"
                android:text="@string/logout" />

            <Button
                android:id="@+id/switchAccount"
                style="@style/DialogHorizontalButton"
                app:icon="@drawable/ic_account_circle"
                android:text="@string/switch_account" />

            <Button
                android:id="@+id/incognito"
                style="@style/DialogHorizontalButton"
                app:icon="@drawable/ic_incognito"
                android:text="@string/incognito" />
        </LinearLayout>
    </HorizontalScrollView>

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_lyric.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    style="@style/Selectable"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingHorizontal="24dp"
    android:paddingVertical="8dp"
    android:textAppearance="@style/TextAppearance.Material3.HeadlineMedium"
    android:textColor="@color/amoled_fg"
    tools:text="@tools:sample/cities" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_lyrics_item.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<com.google.android.material.appbar.MaterialToolbar xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    style="@style/Selectable"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:clipToPadding="false"
    android:minHeight="72dp"
    android:paddingVertical="8dp"
    app:subtitleTextAppearance="@null"
    app:subtitleTextColor="?colorOutline"
    app:titleMarginStart="24dp"
    app:titleMarginTop="0dp"
    app:titleTextAppearance="@style/TextAppearance.AppCompat.Medium"
    tools:subtitle="Source: Bruh"
    tools:title="Nice Track" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_main_header.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginStart="-20dp"
    android:layout_marginEnd="-20dp"
    android:layout_marginBottom="4dp"
    android:clipToPadding="false"
    android:gravity="center"
    android:paddingHorizontal="20dp">

    <com.google.android.material.card.MaterialCardView
        android:id="@+id/extensionsCont"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="4dp"
        app:cardBackgroundColor="?navBackground"
        app:cardCornerRadius="24dp"
        app:contentPadding="4dp">

        <ImageView
            android:id="@+id/extensions"
            android:layout_width="32dp"
            android:layout_height="32dp"
            android:contentDescription="@string/extensions"
            android:src="@drawable/ic_extension_32dp" />
    </com.google.android.material.card.MaterialCardView>

    <TextView
        android:id="@+id/title"
        android:layout_width="0dp"
        android:layout_height="48dp"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:autoSizeMaxTextSize="22sp"
        android:autoSizeTextType="uniform"
        android:ellipsize="end"
        android:gravity="center"
        android:maxLines="2"
        android:text="@string/app_name"
        android:textAppearance="@style/TextAppearance.Material3.ActionBar.Title"
        tools:targetApi="26" />

    <com.google.android.material.card.MaterialCardView
        android:id="@+id/accountsCont"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="4dp"
        app:cardBackgroundColor="?navBackground"
        app:cardCornerRadius="24dp"
        app:contentPadding="4dp">

        <ImageView
            android:id="@+id/accounts"
            android:layout_width="32dp"
            android:layout_height="32dp"
            android:contentDescription="@string/extensions"
            android:src="@drawable/ic_account_circle_32dp" />
    </com.google.android.material.card.MaterialCardView>

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_media_header.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingTop="8dp">

    <HorizontalScrollView
        android:id="@+id/buttonGroup"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="end"
        android:layout_marginBottom="-56dp"
        android:scrollbars="none">

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="8dp">

            <com.google.android.material.button.MaterialButton
                android:id="@+id/followButton"
                style="@style/IconButtonOutlined"
                android:checkable="true"
                android:checked="false"
                android:paddingStart="24dp"
                android:paddingEnd="24dp"
                android:text="@string/follow"
                app:icon="@drawable/anim_check_circle"
                android:visibility="gone"
                app:iconPadding="8dp" />

            <com.google.android.material.button.MaterialButton
                android:id="@+id/savedButton"
                style="@style/IconButtonOutlined"
                android:checkable="true"
                android:checked="false"
                android:contentDescription="@string/save"
                android:visibility="gone"
                app:icon="@drawable/anim_bookmark" />

            <com.google.android.material.button.MaterialButton
                android:id="@+id/playButton"
                style="@style/IconButton"
                android:contentDescription="@string/play"
                android:textAppearance="@style/TextAppearance.Material3.BodyMedium.Emphasized"
                android:visibility="gone"
                app:icon="@drawable/ic_play"
                app:iconSize="24dp" />

            <com.google.android.material.button.MaterialButton
                android:id="@+id/likeButton"
                style="@style/IconButtonTertiary"
                android:checkable="true"
                android:checked="false"
                android:contentDescription="@string/like"
                android:visibility="gone"
                app:icon="@drawable/anim_heart_40dp" />

            <com.google.android.material.button.MaterialButton
                android:id="@+id/hideButton"
                style="@style/IconButtonTonal"
                android:checkable="true"
                android:checked="false"
                android:contentDescription="@string/hide"
                app:icon="@drawable/anim_hide" />

            <com.google.android.material.button.MaterialButton
                android:id="@+id/radioButton"
                android:visibility="gone"
                style="@style/IconButtonTonal"
                android:contentDescription="@string/radio"
                app:icon="@drawable/ic_sensors" />

            <com.google.android.material.button.MaterialButton
                android:id="@+id/shareButton"
                style="@style/IconButtonOutlined"
                android:contentDescription="@string/share"
                android:visibility="gone"
                app:icon="@drawable/ic_share" />

        </LinearLayout>
    </HorizontalScrollView>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <TextView
            android:id="@+id/explicit"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="4dp"
            android:drawablePadding="2dp"
            android:gravity="center"
            android:padding="2dp"
            android:text="@string/explicit"
            android:visibility="gone"
            app:drawableStartCompat="@drawable/ic_explicit"
            app:drawableTint="?colorOnSurface" />

        <TextView
            android:id="@+id/followers"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginHorizontal="2dp"
            android:padding="2dp"
            android:text="@string/x_followers"
            android:visibility="gone" />

    </LinearLayout>

    <TextView
        android:id="@+id/description"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginEnd="48dp"
        android:minHeight="48dp"
        android:paddingHorizontal="4dp"
        android:paddingBottom="8dp"
        android:textColor="?colorOnSurfaceVariant"
        android:textColorLink="?colorPrimary"
        tools:text="@tools:sample/lorem/random[5]" />

</LinearLayout>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_media_selectable.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingVertical="4dp">

    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        tools:ignore="UselessParent">

        <include
            android:id="@+id/media"
            layout="@layout/item_shelf_lists_media" />

        <FrameLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="end"
            android:clipToPadding="false">

            <androidx.cardview.widget.CardView
                android:id="@+id/selected"
                android:layout_width="20dp"
                android:layout_height="20dp"
                android:layout_gravity="end"
                android:layout_margin="8dp"
                android:translationZ="1dp"
                app:cardBackgroundColor="@color/amoled_bg"
                app:cardCornerRadius="12dp">

                <ImageView
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:importantForAccessibility="no"
                    android:src="@drawable/ic_check_20dp"
                    app:tint="@color/amoled_fg" />

            </androidx.cardview.widget.CardView>

        </FrameLayout>

    </FrameLayout>
</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_more_button.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<com.google.android.material.button.MaterialButton xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    style="@style/IconButtonOutlined"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ellipsize="end"
    android:insetLeft="4dp"
    android:insetTop="4dp"
    android:insetRight="4dp"
    android:insetBottom="4dp"
    android:padding="12dp"
    app:backgroundTint="?echoBackground"
    android:textAppearance="@style/TextAppearance.Material3.BodySmall"
    app:iconGravity="textTop"
    app:iconPadding="8dp"
    app:materialSizeOverlay="@style/SizeOverlay.Material3Expressive.Button.Xsmall.Square"
    app:strokeWidth="0dp"
    tools:icon="@drawable/ic_artist"
    tools:text="@tools:sample/lorem/random" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_more_header.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginStart="-20dp"
    android:layout_marginEnd="-20dp"
    android:baselineAligned="false"
    android:clipToPadding="false"
    android:paddingHorizontal="24dp"
    android:paddingBottom="20dp">

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginStart="-16dp"
        android:layout_marginTop="12dp"
        android:layout_weight="1"
        android:clipToPadding="false"
        android:orientation="vertical"
        android:paddingHorizontal="16dp">

        <com.google.android.material.button.MaterialButton
            android:id="@+id/closeButton"
            style="@style/Widget.Material3Expressive.Button.IconButton.Outlined"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginStart="-16dp"
            app:icon="@drawable/ic_close"
            app:strokeWidth="0dp" />

        <TextView
            android:id="@+id/title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textSize="28sp"
            tools:text="@tools:sample/full_names" />

        <TextView
            android:id="@+id/type"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/app_desc" />

    </LinearLayout>

    <include
        android:id="@+id/coverContainer"
        layout="@layout/item_shelf_media_cover_big"
        android:layout_width="?itemCoverSize"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp" />

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_player_collapsed_controls.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/player_collapsed_container"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="8dp"
    android:background="@drawable/shape_rounded_item_corner">

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="@dimen/collapsed_cover_size"
        android:layout_gravity="end"
        android:padding="8dp">

        <FrameLayout
            android:id="@+id/collapsedPlayPauseContainer"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center">

            <com.google.android.material.progressindicator.CircularProgressIndicator
                android:id="@+id/collapsedPlayingIndicator"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_gravity="center"
                android:clickable="false"
                android:indeterminate="true"
                app:indicatorSize="36dp" />

            <com.google.android.material.checkbox.MaterialCheckBox
                android:id="@+id/collapsedTrackPlayPause"
                android:layout_width="48dp"
                android:layout_height="48dp"
                android:background="@drawable/ripple_44dp"
                android:button="@drawable/anim_play_pause"
                android:contentDescription="@string/play"
                app:buttonTint="@color/button_player" />

        </FrameLayout>

        <com.google.android.material.button.MaterialButton
            android:id="@+id/player_close"
            style="?attr/materialIconButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/close"
            android:padding="8dp"
            android:background="@drawable/ripple_44dp"
            app:icon="@drawable/ic_close"
            app:iconSize="24dp"
            app:iconTint="@color/button_player"
            tools:ignore="DuplicateClickableBoundsCheck" />
    </LinearLayout>

    <com.google.android.material.progressindicator.LinearProgressIndicator
        android:id="@+id/collapsed_buffer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:alpha="0.5"
        android:progress="40"
        app:indicatorColor="?attr/colorTertiary"
        app:indicatorTrackGapSize="0dp"
        app:trackColor="?attr/colorOnSurface"
        app:trackThickness="2dp" />

    <com.google.android.material.progressindicator.LinearProgressIndicator
        android:id="@+id/collapsed_seekbar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:progress="20"
        app:indicatorColor="?attr/colorTertiary"
        app:trackColor="@android:color/transparent"
        app:trackThickness="2dp" />
</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_player_collapsed.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    style="@style/Selectable"
    android:layout_width="match_parent"
    android:layout_height="@dimen/collapsed_cover_size">

    <LinearLayout
        android:id="@+id/collapsedPlayerInfo"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:baselineAligned="false"
        android:gravity="center"
        android:orientation="horizontal">

        <View
            android:layout_width="@dimen/collapsed_cover_size"
            android:layout_height="@dimen/collapsed_cover_size" />

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_marginStart="16dp"
            android:layout_weight="1"
            android:baselineAligned="false"
            android:gravity="center"
            android:orientation="vertical">

            <TextView
                android:id="@+id/collapsedTrackTitle"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:ellipsize="marquee"
                android:maxLines="1"
                android:textColor="?attr/colorOnSurface"
                android:textStyle="bold"
                tools:text="@tools:sample/lorem/random" />

            <TextView
                android:id="@+id/collapsedTrackArtist"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:ellipsize="marquee"
                android:maxLines="1"
                android:textColor="?attr/colorOnSurface"
                tools:text="@tools:sample/lorem/random" />
        </LinearLayout>

        <View
            android:layout_width="112dp"
            android:layout_height="@dimen/collapsed_cover_size" />
    </LinearLayout>
</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_player_controls.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/shape_rounded_item_corner"
    android:clipToPadding="false"
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:clipToPadding="false"
        android:gravity="center"
        android:paddingHorizontal="24dp"
        android:translationZ="1dp">

        <View
            android:id="@+id/trackCoverPlaceHolder"
            android:layout_width="@dimen/collapsed_cover_size"
            android:layout_height="match_parent"
            android:layout_marginEnd="12dp"
            android:visibility="gone" />

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical">

            <TextView
                android:id="@+id/trackTitle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ellipsize="marquee"
                android:gravity="bottom"
                android:maxLines="1"
                android:minHeight="32dp"
                android:textSize="20sp"
                android:textStyle="bold"
                tools:text="Bruh" />

            <TextView
                android:id="@+id/trackArtist"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ellipsize="end"
                android:maxLines="2"
                android:paddingBottom="8dp"
                android:textColorLink="@color/button_player"
                android:textSize="16sp"
                tools:text="@tools:sample/lorem/random" />
        </LinearLayout>

        <com.google.android.material.checkbox.MaterialCheckBox
            android:id="@+id/trackHeart"
            android:layout_width="64dp"
            android:layout_height="64dp"
            android:layout_marginEnd="-20dp"
            android:background="@drawable/ripple_60dp"
            android:button="@drawable/anim_heart_40dp"
            android:contentDescription="@string/like"
            app:buttonTint="@color/button_player" />

    </LinearLayout>

    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="-40dp"
        android:clipToPadding="false"
        android:paddingHorizontal="12dp"
        android:translationZ="-1dp">

        <FrameLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

            <com.google.android.material.progressindicator.LinearProgressIndicator
                android:id="@+id/bufferBar"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_marginHorizontal="12dp"
                android:alpha="0.5"
                android:progress="40"
                app:indicatorColor="?attr/colorTertiary"
                app:indicatorTrackGapSize="0dp"
                app:trackColor="?attr/colorOnSurface"
                app:trackThickness="2dp" />

            <com.google.android.material.slider.Slider
                android:id="@+id/seekBar"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginStart="-3dp"
                android:layout_marginEnd="-3dp"
                android:contentDescription="@string/seekbar"
                android:paddingVertical="38dp"
                android:value="0.5"
                app:labelBehavior="gone"
                app:minTouchTargetSize="90dp"
                app:thumbColor="?attr/colorTertiary"
                app:thumbHeight="20dp"
                app:thumbWidth="20dp"
                app:trackColorActive="?attr/colorTertiary"
                app:trackColorInactive="@android:color/transparent"
                app:trackHeight="2dp"
                app:trackStopIndicatorSize="0dp" />
        </FrameLayout>

        <TextView
            android:id="@+id/trackCurrentTime"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:layout_marginTop="24dp"
            android:elevation="1dp"
            android:maxLines="1"
            android:padding="12dp"
            tools:text="00:00" />

        <TextView
            android:id="@+id/trackTotalTime"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="end|bottom"
            android:alpha="0.66"
            android:elevation="1dp"
            android:maxLines="1"
            android:padding="12dp"
            tools:text="00:00" />
    </FrameLayout>

    <androidx.constraintlayout.widget.ConstraintLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="-16dp"
        android:paddingHorizontal="4dp">

        <com.google.android.material.checkbox.MaterialCheckBox
            android:id="@+id/trackShuffle"
            android:layout_width="64dp"
            android:layout_height="64dp"
            android:background="@drawable/ripple_60dp"
            android:button="@drawable/anim_shuffle"
            android:contentDescription="@string/shuffle"
            android:elevation="2dp"
            android:outlineProvider="none"
            app:buttonTint="@color/button_player"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintHorizontal_bias="0.0"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent" />

        <com.google.android.material.button.MaterialButton
            android:id="@+id/trackPrevious"
            style="?attr/materialIconButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/ripple_60dp"
            android:contentDescription="@string/previous"
            android:enabled="false"

            android:outlineProvider="none"
            app:elevation="1dp"
            app:icon="@drawable/ic_skip_previous_40dp"
            app:iconSize="40dp"
            app:iconTint="@color/button_player"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toStartOf="@+id/playPauseContainer"
            app:layout_constraintStart_toEndOf="@+id/trackShuffle"
            app:layout_constraintTop_toTopOf="parent" />

        <FrameLayout
            android:id="@+id/playPauseContainer"
            android:layout_width="72dp"
            android:layout_height="72dp"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent">

            <com.google.android.material.progressindicator.CircularProgressIndicator
                android:id="@+id/playingIndicator"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:clickable="false"
                android:indeterminate="true"
                app:indicatorSize="64dp" />

            <com.google.android.material.checkbox.MaterialCheckBox
                android:id="@+id/trackPlayPause"
                android:layout_width="72dp"
                android:layout_height="72dp"
                android:background="@drawable/ripple_68dp"
                android:button="@drawable/anim_play_pause_48dp"
                android:checked="true"
                android:contentDescription="@string/play"
                app:buttonTint="@color/button_player"
                tools:ignore="DuplicateSpeakableTextCheck" />
        </FrameLayout>

        <com.google.android.material.button.MaterialButton
            android:id="@+id/trackNext"
            style="?attr/materialIconButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/ripple_60dp"
            android:contentDescription="@string/next"
            android:enabled="false"
            android:outlineProvider="none"
            app:elevation="1dp"
            app:icon="@drawable/ic_skip_next_40dp"
            app:iconSize="40dp"
            app:iconTint="@color/button_player"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toStartOf="@id/trackRepeat"
            app:layout_constraintStart_toEndOf="@id/playPauseContainer"
            app:layout_constraintTop_toTopOf="parent" />

        <com.google.android.material.button.MaterialButton
            android:id="@+id/trackRepeat"
            style="?attr/materialIconButtonStyle"
            android:layout_width="64dp"
            android:layout_height="64dp"
            android:background="@drawable/ripple_60dp"
            android:contentDescription="@string/repeat"
            android:elevation="2dp"
            android:outlineProvider="none"
            android:padding="12dp"
            app:icon="@drawable/ic_repeat_to_repeat_one_40dp"
            app:iconSize="32dp"
            app:iconTint="@color/amoled_fg"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintHorizontal_bias="1.0"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent" />

    </androidx.constraintlayout.widget.ConstraintLayout>

    <TextView
        android:id="@+id/trackSubtitle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginHorizontal="48dp"
        android:layout_marginBottom="8dp"
        android:ellipsize="end"
        android:gravity="center"
        android:maxLines="2"
        android:minHeight="40sp"
        android:textAppearance="@style/TextAppearance.AppCompat.Small"
        android:textColor="@color/amoled_fg"
        android:textSize="16sp"
        tools:text="@tools:sample/lorem/random" />
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_player_track.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <include
        android:id="@+id/player_collapsed"
        layout="@layout/item_player_collapsed"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="8dp" />

    <androidx.constraintlayout.widget.ConstraintLayout
        android:id="@+id/constraint_layout"
        style="@style/PlayerExpandedConstraintLayout">

        <FrameLayout
            android:id="@+id/player_track_cover_container"
            style="@style/PlayerTrackCoverContainer"
            app:layout_constraintBottom_toTopOf="@id/player_controls_placeholder"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent">

            <ImageView
                android:id="@+id/player_track_cover"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="?colorSurfaceContainerHighest"
                android:importantForAccessibility="no" />

        </FrameLayout>

        <View
            android:id="@+id/player_controls_placeholder"
            android:layout_width="match_parent"
            android:layout_height="107dp"
            android:layout_marginHorizontal="24dp"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@+id/player_track_cover_container" />

    </androidx.constraintlayout.widget.ConstraintLayout>

    <include
        android:id="@+id/click_panel"
        layout="@layout/item_click_panels" />
</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_playlist_save_header.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<com.google.android.material.appbar.MaterialToolbar xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/topAppBar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginStart="-16dp"
    android:layout_marginEnd="-16dp"
    android:background="@null"
    android:paddingStart="0dp"
    android:paddingEnd="4dp"
    app:layout_scrollFlags="scroll|snap"
    app:menu="@menu/create_playlist_menu"
    app:navigationIcon="@drawable/ic_close"
    app:title="@string/save_to_playlist"
    app:titleCentered="true" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_playlist_track.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginVertical="4dp"
    android:background="@drawable/shape_rounded_item_corner"
    android:backgroundTint="?navBackground">

    <View
        android:id="@+id/playlistCurrentItem"
        android:layout_width="match_parent"
        android:layout_height="@dimen/collapsed_cover_size"
        android:alpha="0.15"
        android:visibility="gone"
        android:background="@drawable/shape_rounded_item_corner"
        android:backgroundTint="?colorPrimary" />

    <LinearLayout
        android:id="@+id/playlistItem"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <androidx.cardview.widget.CardView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            app:cardCornerRadius="?itemCorner">

            <ImageView
                android:id="@+id/playlistItemImageView"
                android:layout_width="@dimen/collapsed_cover_size"
                android:layout_height="@dimen/collapsed_cover_size"
                android:background="?attr/colorSurfaceContainerHigh"
                android:importantForAccessibility="no"
                android:scaleType="fitCenter"
                tools:src="@tools:sample/avatars" />

            <ImageView
                android:id="@+id/playlistItemNowPlaying"
                android:layout_width="@dimen/collapsed_cover_size"
                android:layout_height="@dimen/collapsed_cover_size"
                android:alpha="0.66"
                android:background="@color/amoled_bg"
                android:importantForAccessibility="no"
                android:scaleType="center"
                app:srcCompat="@drawable/anim_now_playing"
                app:tint="@color/amoled_fg" />
        </androidx.cardview.widget.CardView>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="@dimen/collapsed_cover_size"
            android:layout_marginEnd="8dp"
            android:baselineAligned="false"
            android:gravity="center"
            android:orientation="horizontal">

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_marginStart="16dp"
                android:layout_weight="1"
                android:baselineAligned="false"
                android:gravity="center_vertical"
                android:orientation="vertical">

                <TextView
                    android:id="@+id/playlistItemTitle"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:ellipsize="marquee"
                    android:maxLines="1"
                    tools:text="Nice Track Title" />

                <TextView
                    android:id="@+id/playlistItemAuthor"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:alpha="0.66"
                    android:ellipsize="marquee"
                    android:maxLines="1"
                    tools:text="Author" />
            </LinearLayout>

            <FrameLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">

                <com.google.android.material.progressindicator.CircularProgressIndicator
                    android:id="@+id/playlistProgressBar"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:indeterminate="true"
                    android:visibility="gone"
                    app:indicatorColor="?attr/colorTertiary" />

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/playlistItemClose"
                    style="?attr/materialIconButtonStyle"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:contentDescription="@string/remove"
                    android:padding="8dp"
                    app:icon="@drawable/ic_close_small"
                    app:iconSize="24dp"
                    app:iconTint="?colorOnSurface" />
            </FrameLayout>

            <com.google.android.material.button.MaterialButton
                android:id="@+id/playlistItemDrag"
                style="?attr/materialIconButtonStyle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="8dp"
                app:icon="@drawable/ic_drag_20dp"
                app:iconSize="24dp"
                app:iconTint="?colorOnSurface" />

        </LinearLayout>
    </LinearLayout>
</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_quick_search_media.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    style="@style/Selectable"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center">

    <androidx.cardview.widget.CardView
        android:id="@+id/coverContainer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="8dp"
        app:cardBackgroundColor="?colorSurfaceContainer"
        app:cardCornerRadius="?itemCorner">

        <ImageView
            android:id="@+id/cover"
            android:layout_width="64dp"
            android:layout_height="64dp"
            android:importantForAccessibility="no"
            tools:src="@tools:sample/avatars" />

    </androidx.cardview.widget.CardView>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginHorizontal="12dp"
        android:layout_weight="1"
        android:orientation="vertical">

        <TextView
            android:id="@+id/title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:ellipsize="end"
            android:maxLines="2"
            android:textSize="16sp"
            tools:ignore="TextSizeCheck"
            tools:text="@tools:sample/full_names" />

        <TextView
            android:id="@+id/subtitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:alpha="0.66"
            android:ellipsize="end"
            android:maxLines="2"
            tools:text="@tools:sample/first_names" />

    </LinearLayout>

    <com.google.android.material.button.MaterialButton
        android:id="@+id/insert"
        style="?attr/materialIconButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/more"
        android:padding="12dp"
        android:rotation="45"
        app:icon="@drawable/ic_back"
        app:iconSize="24dp"
        app:iconTint="?colorOnSurface" />

    <com.google.android.material.button.MaterialButton
        android:id="@+id/delete"
        style="?attr/materialIconButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="4dp"
        android:contentDescription="@string/close"
        android:padding="12dp"
        app:icon="@drawable/ic_close"
        app:iconSize="24dp"
        app:iconTint="?colorOnSurface" />
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_quick_search_query.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    style="@style/Selectable"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center">

    <androidx.cardview.widget.CardView
        android:id="@+id/history"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="8dp"
        app:cardBackgroundColor="?colorSurfaceContainer"
        app:cardCornerRadius="24dp"
        app:contentPadding="6dp">

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:importantForAccessibility="no"
            android:src="@drawable/ic_history" />

    </androidx.cardview.widget.CardView>

    <TextView
        android:id="@+id/query"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        tools:text="@tools:sample/full_names" />

    <com.google.android.material.button.MaterialButton
        android:id="@+id/insert"
        style="?attr/materialIconButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/more"
        android:padding="12dp"
        android:rotation="45"
        app:icon="@drawable/ic_back"
        app:iconSize="24dp"
        app:iconTint="?colorOnSurface" />

    <com.google.android.material.button.MaterialButton
        android:id="@+id/delete"
        style="?attr/materialIconButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="4dp"
        android:contentDescription="@string/close"
        android:padding="12dp"
        app:icon="@drawable/ic_close"
        app:iconSize="24dp"
        app:iconTint="?colorOnSurface" />
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_ruler_empty.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<View xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="64dp"
    android:layout_height="match_parent" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_ruler.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="64dp"
    android:clipToPadding="false"
    android:layout_marginStart="-20dp"
    android:layout_marginEnd="-20dp"
    android:layout_height="wrap_content"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:gravity="center"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <androidx.cardview.widget.CardView
        android:id="@+id/rulerCard"
        android:layout_marginHorizontal="11dp"
        android:layout_marginVertical="8dp"
        android:layout_width="2dp"
        app:cardBackgroundColor="?colorOnSurface"
        android:layout_height="44dp" />

    <TextView
        android:id="@+id/rulerText"
        tools:text=""
        android:gravity="center"
        android:alpha="0.66"
        android:maxLines="1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_search_bar.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<com.google.android.material.search.SearchBar xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/searchBar"
    android:layout_width="match_parent"
    android:layout_height="48dp"
    android:layout_marginVertical="8dp"
    android:hint="@string/search"
    android:paddingStart="0dp"
    android:paddingEnd="12dp"
    app:backgroundTint="@color/amoled_bg_semi"
    app:defaultMarginsEnabled="false"
    app:navigationIcon="@drawable/ic_search_outline"
    app:strokeColor="?colorSurfaceContainerHighest"
    app:strokeWidth="1dp" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_selectable_header.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginStart="-20dp"
    android:layout_marginEnd="-20dp"
    android:layout_marginBottom="8dp"
    android:background="?selectableItemBackground">

    <TextView
        android:id="@+id/selected"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="8dp"
        android:layout_weight="1"
        android:padding="16dp"
        android:textSize="18sp"
        tools:text="@string/selected_n" />

    <com.google.android.material.checkbox.MaterialCheckBox
        android:id="@+id/selectAll"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginEnd="8dp"
        android:checked="true"
        android:clickable="false" />

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_shelf_category.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/titleCard"
    style="@style/Selectable"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="4dp"
    app:cardBackgroundColor="@color/amoled_fg_semi">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:baselineAligned="false"
        android:clipToPadding="false"
        android:gravity="center"
        android:minHeight="64dp"
        android:orientation="horizontal"
        android:padding="8dp">

        <ImageView
            android:id="@+id/icon"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:background="@drawable/shape_rounded_4dp"
            android:clipToOutline="true"
            android:importantForAccessibility="no"
            tools:src="@tools:sample/avatars"
            tools:targetApi="31" />

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginHorizontal="8dp"
            android:layout_weight="1"
            android:orientation="vertical">

            <TextView
                android:id="@+id/title"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:ellipsize="marquee"
                android:maxLines="1"
                android:textSize="16sp"
                tools:ignore="TextSizeCheck"
                tools:text="@tools:sample/full_names" />

            <TextView
                android:id="@+id/subtitle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:alpha="0.66"
                android:ellipsize="end"
                android:maxLines="1"
                tools:text="@tools:sample/first_names" />

        </LinearLayout>
    </LinearLayout>
</androidx.cardview.widget.CardView>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_shelf_empty.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="vertical"
    android:paddingVertical="48dp">

    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <View
            android:layout_width="120sp"
            android:layout_height="120sp"
            android:background="@drawable/rounded_rectangle_cover_profile"
            android:backgroundTint="?navBarForeground" />

        <View
            android:layout_gravity="center"
            android:layout_width="108sp"
            android:layout_height="108sp"
            android:background="@drawable/art_twelve_sided_cookie"
            android:backgroundTint="?navBarBackground" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:maxLines="1"
            android:text="@string/crying_af"
            android:textSize="36sp"
            android:textAppearance="@style/TextAppearance.Material3.DisplayMedium"
            android:textColor="?navBarForeground"
            android:typeface="monospace" />
    </FrameLayout>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="24dp"
        android:textSize="16sp"
        android:text="@string/so_empty" />

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_shelf_error.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_marginVertical="48dp"
    android:gravity="center"
    android:orientation="vertical">

    <TextView
        android:id="@+id/error"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="24dp"
        android:maxLines="2"
        android:ellipsize="end"
        android:gravity="center"
        tools:text="@tools:sample/lorem/random" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <com.google.android.material.button.MaterialButton
            android:id="@+id/errorView"
            style="@style/Widget.Material3.Button.IconButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/view"
            app:icon="@drawable/art_problem"
            app:iconPadding="8dp" />

        <com.google.android.material.button.MaterialButton
            android:id="@+id/retry"
            style="@style/Widget.Material3.Button.IconButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/refresh"
            app:icon="@drawable/ic_refresh"
            app:iconPadding="8dp" />
    </LinearLayout>
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_shelf_header.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:layout_marginStart="-20dp"
    android:layout_marginEnd="-20dp"
    android:paddingHorizontal="20dp"
    android:clipToPadding="false"
    android:layout_marginVertical="4dp"
    android:minHeight="48dp">

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="4dp"
        android:layout_marginVertical="8dp"
        android:layout_weight="1"
        android:orientation="vertical">

        <TextView
            android:id="@+id/title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:ellipsize="end"
            android:maxLines="1"
            android:textSize="20sp"
            tools:ignore="TextSizeCheck"
            tools:text="@tools:sample/full_names" />

        <TextView
            android:id="@+id/subtitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:alpha="0.66"
            android:ellipsize="end"
            android:maxLines="1"
            android:visibility="gone"
            tools:text="@tools:sample/first_names" />

    </LinearLayout>


    <com.google.android.material.button.MaterialButton
        android:id="@+id/shuffle"
        style="@style/IconButtonSecondary"
        android:contentDescription="@string/shuffle"
        app:icon="@drawable/ic_shuffle" />

    <com.google.android.material.button.MaterialButton
        android:id="@+id/more"
        android:layout_marginEnd="-8dp"
        style="@style/IconButtonTransparent"
        android:contentDescription="@string/more"
        android:scaleX="-1"
        app:icon="@drawable/ic_back" />
</LinearLayout>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_shelf_lists_media.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    style="@style/Selectable"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:clipToPadding="false"
    android:orientation="vertical"
    android:padding="4dp">

    <include
        android:id="@+id/coverContainer"
        layout="@layout/item_shelf_media_cover_big" />

    <TextView
        android:id="@+id/title"
        android:layout_width="?itemCoverSize"
        android:layout_height="wrap_content"
        android:ellipsize="end"
        android:gravity="center_vertical"
        android:maxLines="2"
        tools:text="@tools:sample/full_names" />

    <TextView
        android:id="@+id/subtitle"
        android:layout_width="?itemCoverSize"
        android:layout_height="wrap_content"
        android:alpha="0.66"
        android:ellipsize="end"
        android:gravity="center_vertical"
        android:maxLines="2"
        android:textSize="12sp"
        tools:text="@tools:sample/full_names" />

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_shelf_lists_three_tracks.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="240dp"
    android:layout_height="match_parent"
    android:clipToPadding="false"
    android:orientation="vertical"
    android:paddingEnd="12dp"
    tools:ignore="RtlSymmetry">

    <include
        android:id="@+id/track1"
        layout="@layout/item_shelf_media" />

    <include
        android:id="@+id/track2"
        layout="@layout/item_shelf_media" />

    <include
        android:id="@+id/track3"
        layout="@layout/item_shelf_media" />

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_shelf_lists.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.recyclerview.widget.RecyclerView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginStart="-20dp"
    android:layout_marginEnd="-20dp"
    android:clipToPadding="false"
    android:orientation="horizontal"
    android:paddingHorizontal="20dp"
    android:paddingBottom="12dp"
    app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
    tools:listitem="@layout/item_shelf_lists_media" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_shelf_login_required.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginVertical="48dp"
    android:gravity="center"
    android:orientation="vertical">

    <TextView
        android:id="@+id/error"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="24dp"
        android:maxLines="2"
        android:text="@string/x_login_required" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <com.google.android.material.button.MaterialButton
            android:id="@+id/login"
            style="@style/Widget.Material3.Button.IconButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/login"
            app:icon="@drawable/ic_login"
            app:iconPadding="8dp" />
    </LinearLayout>
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_shelf_media_cover_big.xml
================================================================================

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="?itemCoverSize"
    android:layout_height="wrap_content"
    android:layout_marginTop="-4dp"
    android:clipToPadding="false"
    android:paddingVertical="4dp">

    <View
        android:id="@+id/listBg2"
        android:layout_width="match_parent"
        android:layout_height="24dp"
        android:layout_marginHorizontal="8dp"
        android:layout_marginTop="-4dp"
        android:alpha="0.15"
        android:background="@drawable/rounded_rectangle_cover"
        android:backgroundTint="@color/amoled_fg" />

    <View
        android:id="@+id/listBg1"
        android:layout_width="match_parent"
        android:layout_height="24dp"
        android:layout_marginHorizontal="3dp"
        android:layout_marginTop="-2dp"
        android:alpha="0.25"
        android:background="@drawable/rounded_rectangle_cover"
        android:backgroundTint="@color/amoled_fg" />

    <ImageView
        android:id="@+id/cover"
        android:layout_width="?itemCoverSize"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:background="@drawable/rounded_rectangle_cover"
        android:importantForAccessibility="no"
        tools:clipToOutline="true"
        tools:src="@tools:sample/avatars[2]" />

    <ImageView
        android:id="@+id/icon"
        android:layout_width="24dp"
        android:layout_height="24dp"
        android:layout_gravity="bottom"
        android:layout_margin="4dp"
        android:alpha="0.66"
        android:background="@drawable/rounded_rectangle_24dp"
        android:backgroundTint="?navBackground"
        android:importantForAccessibility="no"
        android:padding="4dp"
        android:scaleType="centerInside"
        android:src="@drawable/ic_queue_music"
        app:tint="?attr/colorOnSurface" />

    <com.google.android.material.button.MaterialButton
        android:id="@+id/isPlaying"
        style="@style/SmallNowPlayingButton" />

</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_shelf_media_cover.xml
================================================================================

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="@dimen/collapsed_cover_size"
    android:layout_height="wrap_content"
    android:clipToPadding="false"
    android:paddingVertical="4dp">

    <View
        android:id="@+id/listBg2"
        android:layout_width="match_parent"
        android:layout_height="24dp"
        android:layout_marginHorizontal="6dp"
        android:layout_marginTop="-4dp"
        android:alpha="0.15"
        android:background="@drawable/rounded_rectangle_cover"
        android:backgroundTint="@color/amoled_fg" />

    <View
        android:id="@+id/listBg1"
        android:layout_width="match_parent"
        android:layout_height="24dp"
        android:layout_marginHorizontal="2.5dp"
        android:layout_marginTop="-2.5dp"
        android:alpha="0.25"
        android:background="@drawable/rounded_rectangle_cover"
        android:backgroundTint="@color/amoled_fg" />

    <ImageView
        android:id="@+id/cover"
        android:layout_width="@dimen/collapsed_cover_size"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:background="@drawable/rounded_rectangle_cover"
        android:importantForAccessibility="no"
        tools:clipToOutline="true"
        tools:src="@tools:sample/avatars[2]" />

    <ImageView
        android:id="@+id/icon"
        android:layout_width="24dp"
        android:layout_height="24dp"
        android:layout_gravity="bottom"
        android:layout_margin="4dp"
        android:alpha="0.66"
        android:background="@drawable/rounded_rectangle_24dp"
        android:backgroundTint="?navBackground"
        android:importantForAccessibility="no"
        android:padding="4dp"
        android:scaleType="centerInside"
        android:src="@drawable/ic_queue_music"
        app:tint="?attr/colorOnSurface" />

    <com.google.android.material.button.MaterialButton
        android:id="@+id/isPlaying"
        android:visibility="gone"
        style="@style/SmallNowPlayingButton" />

</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_shelf_media_grid.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    style="@style/Selectable"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="4dp">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:baselineAligned="false"
        android:clipToPadding="false"
        android:orientation="horizontal"
        android:layout_marginTop="-4dp"
        android:layout_marginBottom="-4dp"
        android:paddingVertical="4dp">

        <include
            android:id="@+id/coverContainer"
            layout="@layout/item_shelf_media_cover"
            android:layout_width="@dimen/collapsed_cover_size"
            android:layout_height="wrap_content"
            android:layout_marginTop="-4dp"
            android:layout_marginBottom="-4dp" />

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginStart="8dp"
            android:layout_weight="1"
            android:orientation="vertical">

            <TextView
                android:id="@+id/title"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:ellipsize="end"
                android:maxLines="2"
                android:textSize="14sp"
                tools:ignore="TextSizeCheck"
                tools:text="@tools:sample/full_names" />

            <TextView
                android:id="@+id/subtitle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:alpha="0.66"
                android:ellipsize="end"
                android:maxLines="2"
                android:visibility="gone"
                tools:text="@tools:sample/first_names" />

        </LinearLayout>
    </LinearLayout>

</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_shelf_media.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    style="@style/Selectable"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginStart="-20dp"
    android:layout_marginEnd="-20dp"
    android:baselineAligned="false"
    android:clipToPadding="false"
    android:gravity="center"
    android:orientation="horizontal"
    android:paddingHorizontal="24dp"
    android:paddingVertical="4dp">

    <include
        android:id="@+id/coverContainer"
        layout="@layout/item_shelf_media_cover"
        android:layout_width="@dimen/collapsed_cover_size"
        android:layout_height="wrap_content"
        android:layout_marginTop="-4dp"
        android:layout_marginBottom="-4dp" />

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginHorizontal="8dp"
        android:layout_weight="1"
        android:orientation="vertical">

        <TextView
            android:id="@+id/title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:ellipsize="end"
            android:maxLines="2"
            android:textSize="16sp"
            tools:ignore="TextSizeCheck"
            tools:text="@tools:sample/full_names" />

        <TextView
            android:id="@+id/subtitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:alpha="0.66"
            android:ellipsize="end"
            android:maxLines="2"
            tools:text="@tools:sample/first_names" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginEnd="-12dp">

        <com.google.android.material.button.MaterialButton
            android:id="@+id/play"
            style="@style/IconButton"
            android:contentDescription="@string/play"
            android:visibility="gone"
            app:icon="@drawable/ic_play" />

        <com.google.android.material.button.MaterialButton
            android:id="@+id/more"
            style="@style/IconButtonTransparent"
            android:contentDescription="@string/more"
            app:icon="@drawable/ic_more_horiz" />
    </LinearLayout>
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_shelf_not_loading.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginVertical="48dp"
    android:gravity="center"
    android:orientation="vertical">

    <TextView
        android:id="@+id/error"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="24dp"
        android:maxLines="2"
        android:text="@string/not_loading" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <com.google.android.material.button.MaterialButton
            android:id="@+id/retry"
            style="@style/Widget.Material3.Button.IconButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/refresh"
            app:icon="@drawable/ic_refresh"
            app:iconPadding="8dp" />
    </LinearLayout>
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_shelf_video_horizontal.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    style="@style/Selectable"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="4dp"
    android:orientation="vertical">

    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <ImageView
            android:id="@+id/cover"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:adjustViewBounds="true"
            android:background="@drawable/shape_rounded_4dp"
            android:importantForAccessibility="no"
            android:scaleType="fitCenter"
            tools:clipToOutline="true"
            tools:src="@tools:sample/backgrounds/scenic" />

        <com.google.android.material.button.MaterialButton
            android:id="@+id/more"
            style="@style/IconButtonOutlined"
            app:backgroundTint="?colorSurfaceContainerHigh"
            android:layout_gravity="end"
            android:contentDescription="@string/more"
            app:icon="@drawable/ic_more_horiz" />
    </FrameLayout>

    <com.google.android.material.button.MaterialButton
        android:id="@+id/isPlaying"
        style="@style/SmallNowPlayingButton"
        android:layout_marginHorizontal="24dp"
        android:layout_marginTop="-40dp"
        android:layout_marginBottom="8dp"
        android:visibility="gone" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:orientation="horizontal"
        android:paddingTop="8dp">

        <ImageView
            android:id="@+id/artistCover"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:layout_marginEnd="8dp"
            android:background="@drawable/rounded_rectangle_cover_profile"
            android:importantForAccessibility="no" />

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginEnd="4dp"
            android:layout_weight="1"
            android:orientation="vertical">

            <TextView
                android:id="@+id/title"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:ellipsize="end"
                android:maxLines="2"
                android:textSize="16sp"
                tools:ignore="TextSizeCheck"
                tools:text="@tools:sample/full_names" />

            <TextView
                android:id="@+id/subtitle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:alpha="0.66"
                android:ellipsize="end"
                android:maxLines="2"
                tools:text="@tools:sample/first_names" />

        </LinearLayout>

    </LinearLayout>
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_shelf_video.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    style="@style/Selectable"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginStart="-20dp"
    android:layout_marginEnd="-20dp"
    android:clipToPadding="false"
    android:orientation="vertical"
    android:paddingHorizontal="24dp"
    android:paddingVertical="4dp">

    <ImageView
        android:id="@+id/cover"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:adjustViewBounds="true"
        android:background="@drawable/shape_rounded_4dp"
        android:importantForAccessibility="no"
        android:scaleType="fitCenter"
        tools:clipToOutline="true"
        tools:src="@tools:sample/backgrounds/scenic" />

    <com.google.android.material.button.MaterialButton
        android:id="@+id/isPlaying"
        style="@style/SmallNowPlayingButton"
        android:layout_marginHorizontal="24dp"
        android:layout_marginTop="-40dp"
        android:layout_marginBottom="8dp"
        android:visibility="gone" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginStart="-20dp"
        android:layout_marginEnd="-20dp"
        android:clipToPadding="false"
        android:gravity="center"
        android:orientation="horizontal"
        android:paddingHorizontal="20dp"
        android:paddingTop="8dp">

        <ImageView
            android:id="@+id/artistCover"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:layout_marginEnd="8dp"
            android:background="@drawable/rounded_rectangle_cover_profile"
            android:importantForAccessibility="no" />

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginEnd="4dp"
            android:layout_weight="1"
            android:orientation="vertical">

            <TextView
                android:id="@+id/title"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:ellipsize="end"
                android:maxLines="2"
                android:textSize="16sp"
                tools:ignore="TextSizeCheck"
                tools:text="@tools:sample/full_names" />

            <TextView
                android:id="@+id/subtitle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:alpha="0.66"
                android:ellipsize="end"
                android:maxLines="2"
                tools:text="@tools:sample/first_names" />

        </LinearLayout>

        <com.google.android.material.button.MaterialButton
            android:id="@+id/more"
            style="@style/IconButtonTransparent"
            android:layout_marginEnd="-12dp"
            android:contentDescription="@string/more"
            app:icon="@drawable/ic_more_horiz" />
    </LinearLayout>
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_tab_container.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginStart="-20dp"
    android:layout_marginEnd="-20dp"
    android:paddingHorizontal="24dp"
    android:clipToPadding="false"
    android:scrollbars="none">

    <com.google.android.material.button.MaterialButtonGroup
        android:id="@+id/buttonGroup"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginVertical="4dp"
        android:spacing="4dp"/>

</HorizontalScrollView>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\item_tab.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<com.google.android.material.button.MaterialButton xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    style="@style/Widget.Material3Expressive.Button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:checkable="true"
    android:checked="false"
    android:minWidth="0dp"
    app:materialThemeOverlay="@style/TabButtonOverlay"
    app:toggleCheckedStateOnClick="true"
    tools:text="@tools:sample/first_names" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\preference_category.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/title"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textStyle="bold"
    android:textColor="?attr/colorPrimary"
    android:padding="24dp"/>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\preference_color_list.xml
================================================================================

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:clipToPadding="false"
    android:orientation="horizontal"
    android:paddingHorizontal="16dp"
    android:paddingVertical="20dp">

    <com.google.android.material.card.MaterialCardView
        android:id="@+id/addColor"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_marginHorizontal="8dp"
        app:cardBackgroundColor="?colorSurfaceContainer"
        app:cardCornerRadius="24dp">

        <ImageView
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:layout_gravity="center"
            android:contentDescription="@string/add_color"
            app:srcCompat="@drawable/ic_add_20dp"
            app:tint="?colorOnSurface" />
    </com.google.android.material.card.MaterialCardView>

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recentColors"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/custom_colors"
        android:orientation="horizontal"
        android:requiresFadingEdge="horizontal"
        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
        tools:listitem="@layout/item_color_card" />

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\preference_common.xml
================================================================================

<merge xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools">

    <FrameLayout
        android:id="@android:id/icon_frame"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_marginStart="24dp"
        android:visibility="gone">

        <ImageView
            android:id="@android:id/icon"
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:importantForAccessibility="no"
            app:tint="?attr/colorPrimary"
            tools:src="@drawable/ic_delete" />

    </FrameLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="24dp"
        android:layout_weight="1"
        android:gravity="center_vertical"
        android:minHeight="44sp"
        android:orientation="vertical">

        <TextView
            android:id="@android:id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="?attr/colorOnSurface"
            android:textSize="18sp"
            tools:text="Title" />

        <TextView
            android:id="@android:id/summary"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:alpha="0.66"
            android:textColor="?attr/colorOnSurfaceVariant"
            tools:text="Summary" />

    </LinearLayout>

</merge>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\preference_extension_info.xml
================================================================================

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:clipToPadding="false"
    android:orientation="vertical"
    android:paddingHorizontal="24dp">

    <LinearLayout
        android:id="@+id/extensionEnabled"
        style="@style/Selectable"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginStart="-16dp"
        android:layout_marginEnd="-16dp"
        android:gravity="center"
        android:minHeight="64dp"
        android:orientation="horizontal"
        android:paddingHorizontal="16dp"
        android:paddingVertical="8dp">

        <TextView
            android:id="@+id/extensionEnabledText"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:textColor="?attr/colorOnSurface"
            android:textSize="18sp"
            tools:text="Enabled" />

        <com.google.android.material.materialswitch.MaterialSwitch
            android:id="@+id/extensionEnabledSwitch"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:clickable="false" />

    </LinearLayout>

    <TextView
        android:id="@+id/extensionDetails"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dp"
        android:textAppearance="@style/TextAppearance.Material3.BodyLarge"
        tools:text="Tracker Extension [APK]\nid • version • author" />

    <TextView
        android:id="@+id/extensionDescription"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="8dp"
        android:alpha="0.66"
        android:ellipsize="end"
        tools:text="@tools:sample/lorem" />

    <include
        android:id="@+id/extensionLoginUser"
        layout="@layout/item_login_user"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginVertical="16dp"
        android:layout_marginStart="-24dp"
        android:layout_marginEnd="-24dp" />

    <View
        android:id="@+id/toolbarOutline"
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:layout_marginStart="-24dp"
        android:layout_marginTop="8dp"
        android:layout_marginEnd="-24dp"
        android:alpha="0.66"
        android:background="?attr/colorOutline" />

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\preference_slider.xml
================================================================================

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingVertical="12dp">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:paddingVertical="8dp">

        <include
            android:id="@android:id/icon_frame"
            layout="@layout/preference_common" />
    </LinearLayout>

    <com.google.android.material.slider.Slider
        android:id="@+id/preferences_slider"
        android:layout_width="match_parent"
        android:value="0.4"
        android:layout_marginHorizontal="8dp"
        android:layout_height="wrap_content" />
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\preference_switch.xml
================================================================================

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="?selectableItemBackground"
    android:baselineAligned="false"
    android:orientation="horizontal"
    android:paddingVertical="20dp">

    <include
        android:id="@android:id/icon_frame"
        layout="@layout/preference_common" />

    <com.google.android.material.materialswitch.MaterialSwitch
        android:id="@+id/switchWidget"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_marginEnd="24dp"
        android:clickable="false" />

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\preference.xml
================================================================================

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="?selectableItemBackground"
    android:baselineAligned="false"
    android:orientation="horizontal"
    android:paddingVertical="20dp">

    <include
        android:id="@android:id/icon_frame"
        layout="@layout/preference_common" />

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\widget_circle.xml
================================================================================

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="vertical"
    android:theme="@style/Default"
    tools:background="@tools:sample/backgrounds/scenic[5]"
    tools:padding="108dp">

    <FrameLayout
        android:id="@android:id/background"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        tools:ignore="UselessParent">

        <ImageView
            android:id="@+id/trackCover"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="12dp"
            android:adjustViewBounds="true"
            android:background="@drawable/rounded_rectangle_cover_profile"
            android:backgroundTint="?navBackground"
            android:clipToOutline="true"
            android:importantForAccessibility="no"
            android:scaleType="centerCrop"
            android:src="@drawable/art_music"
            tools:ignore="UnusedAttribute" />

        <ImageView
            android:id="@+id/playPauseButton"
            android:layout_width="72dp"
            android:layout_height="72dp"
            android:layout_gravity="bottom|end"
            android:layout_marginEnd="-3dp"
            android:layout_marginBottom="-3dp"
            android:background="@drawable/art_twelve_sided_cookie"
            android:backgroundTint="@color/material_dynamic_primary40"
            android:contentDescription="@string/play"
            android:padding="18dp"
            android:src="@drawable/ic_play_48dp"
            android:tint="@color/material_dynamic_primary90"
            tools:ignore="UseAppTint" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:layout_marginBottom="8dp"
            android:background="@drawable/rounded_rectangle_cover_profile"
            android:backgroundTint="@android:color/transparent"
            android:clipToOutline="true"
            tools:ignore="UnusedAttribute">

            <ImageView
                android:id="@+id/previousButton"
                android:layout_width="48dp"
                android:layout_height="48dp"
                android:layout_marginEnd="2dp"
                android:background="@drawable/shape_rounded_item_corner"
                android:backgroundTint="@color/material_dynamic_tertiary50"
                android:contentDescription="@string/previous"
                android:padding="8dp"
                android:src="@drawable/ic_skip_previous_40dp"
                android:tint="@color/material_dynamic_tertiary90"
                tools:ignore="UseAppTint" />

            <ImageView
                android:id="@+id/nextButton"
                android:layout_width="48dp"
                android:layout_height="48dp"
                android:background="@drawable/shape_rounded_item_corner"
                android:backgroundTint="@color/material_dynamic_tertiary50"
                android:contentDescription="@string/next"
                android:padding="8dp"
                android:src="@drawable/ic_skip_next_40dp"
                android:tint="@color/material_dynamic_tertiary90"
                tools:ignore="UseAppTint" />
        </LinearLayout>
    </FrameLayout>
</FrameLayout>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\widget_horizontal_narrow_short.xml
================================================================================

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/rounded_rectangle_cover_profile"
    android:backgroundTint="#73000000"
    android:baselineAligned="false"
    android:theme="@style/Default">

    <FrameLayout
        android:id="@android:id/background"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_margin="8dp"
        android:background="@drawable/rounded_rectangle_cover_profile"
        android:clipToOutline="true"
        tools:ignore="UnusedAttribute">

        <ImageView
            android:id="@+id/trackCover"
            android:layout_width="64dp"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:background="?navBackground"
            android:importantForAccessibility="no"
            android:scaleType="centerCrop"
            android:src="@drawable/art_music" />
    </FrameLayout>

    <FrameLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:clipToPadding="false"
        android:gravity="center">

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:background="@drawable/rounded_rectangle_cover_profile"
            android:backgroundTint="@color/material_dynamic_primary60"
            android:clipToOutline="true"
            tools:ignore="UnusedAttribute">

            <ImageView
                android:id="@+id/previousButton"
                android:layout_width="48dp"
                android:layout_height="48dp"
                android:layout_marginEnd="50dp"
                android:contentDescription="@string/previous"
                android:padding="8dp"
                android:src="@drawable/ic_skip_previous_40dp"
                android:tint="@color/material_dynamic_primary90"
                tools:ignore="UseAppTint" />

            <ImageView
                android:id="@+id/nextButton"
                android:layout_width="48dp"
                android:layout_height="48dp"
                android:contentDescription="@string/next"
                android:padding="8dp"
                android:src="@drawable/ic_skip_next_40dp"
                android:tint="@color/material_dynamic_primary90"
                tools:ignore="UseAppTint" />
        </LinearLayout>

        <ImageView
            android:id="@+id/playPauseButton"
            android:layout_width="68dp"
            android:layout_height="68dp"
            android:layout_gravity="center"
            android:layout_marginTop="-3dp"
            android:layout_marginBottom="-3dp"
            android:background="@drawable/art_twelve_sided_cookie"
            android:backgroundTint="@color/material_dynamic_primary40"
            android:contentDescription="@string/play"
            android:padding="16dp"
            android:src="@drawable/ic_play_48dp"
            android:tint="@color/material_dynamic_primary90"
            tools:ignore="UseAppTint" />
    </FrameLayout>
</LinearLayout>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\widget_horizontal_narrow_tall.xml
================================================================================

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/app_widget_image_background"
    android:backgroundTint="#73000000"
    android:baselineAligned="false"
    android:theme="@style/Default">

    <FrameLayout
        android:id="@android:id/background"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_margin="8dp"
        android:background="@drawable/app_widget_inner_view_background"
        android:clipToOutline="true"
        tools:ignore="UnusedAttribute">

        <ImageView
            android:id="@+id/trackCover"
            android:layout_width="128dp"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:background="?navBackground"
            android:importantForAccessibility="no"
            android:scaleType="centerCrop"
            android:src="@drawable/art_music" />
    </FrameLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="vertical"
        android:paddingHorizontal="8dp"
        android:paddingVertical="8dp">

        <TextView
            android:id="@+id/trackTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:maxLines="2"
            android:text="@string/song"
            android:textColor="@color/white"
            android:textSize="20sp" />

        <TextView
            android:id="@+id/trackArtist"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:maxLines="2"
            android:text="@string/artists"
            android:textColor="#9EFFFFFF"
            android:textSize="16sp" />


        <FrameLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="4dp">

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:background="@drawable/rounded_rectangle_cover_profile"
                android:backgroundTint="@color/material_dynamic_primary60"
                android:clipToOutline="true"
                tools:ignore="UnusedAttribute">

                <ImageView
                    android:id="@+id/previousButton"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:layout_marginEnd="50dp"
                    android:contentDescription="@string/previous"
                    android:padding="8dp"
                    android:src="@drawable/ic_skip_previous_40dp"
                    android:tint="@color/material_dynamic_primary90"
                    tools:ignore="UseAppTint" />

                <ImageView
                    android:id="@+id/nextButton"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:contentDescription="@string/next"
                    android:padding="8dp"
                    android:src="@drawable/ic_skip_next_40dp"
                    android:tint="@color/material_dynamic_primary90"
                    tools:ignore="UseAppTint" />
            </LinearLayout>

            <ImageView
                android:id="@+id/playPauseButton"
                android:layout_width="68dp"
                android:layout_height="68dp"
                android:layout_gravity="center"
                android:layout_marginTop="-3dp"
                android:layout_marginBottom="-3dp"
                android:background="@drawable/art_twelve_sided_cookie"
                android:backgroundTint="@color/material_dynamic_primary40"
                android:contentDescription="@string/play"
                android:padding="16dp"
                android:src="@drawable/ic_play_48dp"
                android:tint="@color/material_dynamic_primary90"
                tools:ignore="UseAppTint" />
        </FrameLayout>

    </LinearLayout>

</LinearLayout>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\widget_horizontal_wide_short.xml
================================================================================

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/rounded_rectangle_cover_profile"
    android:backgroundTint="#73000000"
    android:baselineAligned="false"
    android:theme="@style/Default">

    <FrameLayout
        android:id="@android:id/background"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_margin="8dp"
        android:background="@drawable/rounded_rectangle_cover_profile"
        android:clipToOutline="true"
        tools:ignore="UnusedAttribute">

        <ImageView
            android:id="@+id/trackCover"
            android:layout_width="64dp"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:background="?navBackground"
            android:importantForAccessibility="no"
            android:scaleType="centerCrop"
            android:src="@drawable/art_music" />

    </FrameLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:clipToPadding="false"
        android:gravity="center">

        <ImageView
            android:id="@+id/repeatButton"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:layout_margin="4dp"
            android:background="@drawable/rounded_rectangle_cover_profile"
            android:backgroundTint="@color/material_dynamic_primary50"
            android:contentDescription="@string/repeat"
            android:padding="12dp"
            android:src="@drawable/ic_repeat_20dp"
            android:tint="@color/material_dynamic_primary90"
            tools:ignore="UseAppTint" />

        <FrameLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:background="@drawable/rounded_rectangle_cover_profile"
                android:backgroundTint="@color/material_dynamic_primary60"
                android:clipToOutline="true"
                tools:ignore="UnusedAttribute">

                <ImageView
                    android:id="@+id/previousButton"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:layout_marginEnd="50dp"
                    android:contentDescription="@string/previous"
                    android:padding="8dp"
                    android:src="@drawable/ic_skip_previous_40dp"
                    android:tint="@color/material_dynamic_primary90"
                    tools:ignore="UseAppTint" />

                <ImageView
                    android:id="@+id/nextButton"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:contentDescription="@string/next"
                    android:padding="8dp"
                    android:src="@drawable/ic_skip_next_40dp"
                    android:tint="@color/material_dynamic_primary90"
                    tools:ignore="UseAppTint" />
            </LinearLayout>

            <ImageView
                android:id="@+id/playPauseButton"
                android:layout_width="68dp"
                android:layout_height="68dp"
                android:layout_gravity="center"
                android:layout_marginTop="-3dp"
                android:layout_marginBottom="-3dp"
                android:background="@drawable/art_twelve_sided_cookie"
                android:backgroundTint="@color/material_dynamic_primary40"
                android:contentDescription="@string/play"
                android:padding="16dp"
                android:src="@drawable/ic_play_48dp"
                android:tint="@color/material_dynamic_primary90"
                tools:ignore="UseAppTint" />
        </FrameLayout>

        <ImageView
            android:id="@+id/likeButton"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:layout_margin="4dp"
            android:background="@drawable/rounded_rectangle_cover_profile"
            android:backgroundTint="@color/material_dynamic_tertiary50"
            android:contentDescription="@string/like"
            android:padding="12dp"
            android:src="@drawable/ic_favorite_20dp"
            android:tint="@color/material_dynamic_tertiary90"
            tools:ignore="UseAppTint" />
    </LinearLayout>

</LinearLayout>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\widget_horizontal_wide_tall.xml
================================================================================

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/app_widget_image_background"
    android:backgroundTint="#73000000"
    android:baselineAligned="false"
    android:theme="@style/Default">

    <FrameLayout
        android:id="@android:id/background"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_margin="8dp"
        android:background="@drawable/app_widget_inner_view_background"
        android:clipToOutline="true"
        tools:ignore="UnusedAttribute">

        <ImageView
            android:id="@+id/trackCover"
            android:layout_width="128dp"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:background="?navBackground"
            android:importantForAccessibility="no"
            android:scaleType="centerCrop"
            android:src="@drawable/art_music" />

    </FrameLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="vertical"
        android:paddingVertical="8dp">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="horizontal">

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:orientation="vertical"
                android:paddingHorizontal="8dp">

                <TextView
                    android:id="@+id/trackTitle"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:maxLines="2"
                    android:text="@string/song"
                    android:textColor="@color/white"
                    android:textSize="20sp" />

                <TextView
                    android:id="@+id/trackArtist"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:maxLines="2"
                    android:text="@string/artists"
                    android:textColor="#9EFFFFFF"
                    android:textSize="16sp" />

            </LinearLayout>

            <ImageView
                android:id="@+id/likeButton"
                android:layout_width="48dp"
                android:layout_height="48dp"
                android:layout_marginEnd="16dp"
                android:background="@drawable/rounded_rectangle_cover_profile"
                android:backgroundTint="@color/material_dynamic_tertiary50"
                android:contentDescription="@string/like"
                android:padding="12dp"
                android:src="@drawable/ic_favorite_20dp"
                android:tint="@color/material_dynamic_tertiary90"
                tools:ignore="UseAppTint" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="4dp"
            android:clipToPadding="false"
            android:gravity="center">


            <ImageView
                android:id="@+id/repeatButton"
                android:layout_width="48dp"
                android:layout_height="48dp"
                android:layout_margin="4dp"
                android:background="@drawable/rounded_rectangle_cover_profile"
                android:backgroundTint="@color/material_dynamic_primary50"
                android:contentDescription="@string/repeat"
                android:padding="12dp"
                android:src="@drawable/ic_repeat_20dp"
                android:tint="@color/material_dynamic_primary90"
                tools:ignore="UseAppTint" />

            <FrameLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginEnd="16dp">

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:background="@drawable/rounded_rectangle_cover_profile"
                    android:backgroundTint="@color/material_dynamic_primary60"
                    android:clipToOutline="true"
                    tools:ignore="UnusedAttribute">

                    <ImageView
                        android:id="@+id/previousButton"
                        android:layout_width="48dp"
                        android:layout_height="48dp"
                        android:layout_marginEnd="50dp"
                        android:contentDescription="@string/previous"
                        android:padding="8dp"
                        android:src="@drawable/ic_skip_previous_40dp"
                        android:tint="@color/material_dynamic_primary90"
                        tools:ignore="UseAppTint" />

                    <ImageView
                        android:id="@+id/nextButton"
                        android:layout_width="48dp"
                        android:layout_height="48dp"
                        android:contentDescription="@string/next"
                        android:padding="8dp"
                        android:src="@drawable/ic_skip_next_40dp"
                        android:tint="@color/material_dynamic_primary90"
                        tools:ignore="UseAppTint" />
                </LinearLayout>

                <ImageView
                    android:id="@+id/playPauseButton"
                    android:layout_width="68dp"
                    android:layout_height="68dp"
                    android:layout_gravity="center"
                    android:layout_marginTop="-3dp"
                    android:layout_marginBottom="-3dp"
                    android:background="@drawable/art_twelve_sided_cookie"
                    android:backgroundTint="@color/material_dynamic_primary40"
                    android:contentDescription="@string/play"
                    android:padding="16dp"
                    android:src="@drawable/ic_play_48dp"
                    android:tint="@color/material_dynamic_primary90"
                    tools:ignore="UseAppTint" />
            </FrameLayout>

        </LinearLayout>
    </LinearLayout>

</LinearLayout>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\widget_vertical_large.xml
================================================================================

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:orientation="vertical"
    android:theme="@style/Default"
    tools:ignore="UnusedAttribute">

    <FrameLayout
        android:id="@android:id/background"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:background="@drawable/app_widget_image_background"
        android:clipToOutline="true">

        <ImageView
            android:id="@+id/trackCover"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:importantForAccessibility="no"
            android:scaleType="centerCrop"
            android:src="@drawable/art_music" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:background="@drawable/app_widget_gradient_background"
            android:backgroundTint="#D3000000"
            android:orientation="vertical"
            android:paddingHorizontal="24dp"
            android:paddingTop="48dp"
            android:paddingBottom="36dp">

            <TextView
                android:id="@+id/trackTitle"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:maxLines="2"
                android:text="@string/song"
                android:textColor="@color/white"
                android:textSize="20sp" />

            <TextView
                android:id="@+id/trackArtist"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:maxLines="2"
                android:text="@string/artists"
                android:textColor="#9EFFFFFF"
                android:textSize="16sp" />

        </LinearLayout>
    </FrameLayout>


    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="-32dp"
        android:layout_marginBottom="4dp"
        android:clipToPadding="false"
        android:gravity="center"
        android:paddingHorizontal="4dp">

        <ImageView
            android:id="@+id/repeatButton"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:layout_margin="4dp"
            android:background="@drawable/rounded_rectangle_cover_profile"
            android:backgroundTint="@color/material_dynamic_primary50"
            android:contentDescription="@string/repeat"
            android:padding="12dp"
            android:src="@drawable/ic_repeat_20dp"
            android:tint="@color/material_dynamic_primary90"
            tools:ignore="UseAppTint" />

        <FrameLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:background="@drawable/rounded_rectangle_cover_profile"
                android:backgroundTint="@color/material_dynamic_primary60"
                android:clipToOutline="true"
                tools:ignore="UnusedAttribute">

                <ImageView
                    android:id="@+id/previousButton"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:layout_marginEnd="56dp"
                    android:contentDescription="@string/previous"
                    android:padding="8dp"
                    android:src="@drawable/ic_skip_previous_40dp"
                    android:tint="@color/material_dynamic_primary90"
                    tools:ignore="UseAppTint" />

                <ImageView
                    android:id="@+id/nextButton"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:contentDescription="@string/next"
                    android:padding="8dp"
                    android:src="@drawable/ic_skip_next_40dp"
                    android:tint="@color/material_dynamic_primary90"
                    tools:ignore="UseAppTint" />
            </LinearLayout>

            <ImageView
                android:id="@+id/playPauseButton"
                android:layout_width="68dp"
                android:layout_height="68dp"
                android:layout_gravity="center"
                android:layout_marginTop="-3dp"
                android:layout_marginBottom="-3dp"
                android:background="@drawable/art_twelve_sided_cookie"
                android:backgroundTint="@color/material_dynamic_primary40"
                android:contentDescription="@string/play"
                android:padding="16dp"
                android:src="@drawable/ic_play_48dp"
                android:tint="@color/material_dynamic_primary90"
                tools:ignore="UseAppTint" />
        </FrameLayout>

        <ImageView
            android:id="@+id/likeButton"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:layout_margin="4dp"
            android:background="@drawable/rounded_rectangle_cover_profile"
            android:backgroundTint="@color/material_dynamic_tertiary50"
            android:contentDescription="@string/like"
            android:padding="12dp"
            android:src="@drawable/ic_favorite_20dp"
            android:tint="@color/material_dynamic_tertiary90"
            tools:ignore="UseAppTint" />
    </LinearLayout>
</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout\widget_vertical_small.xml
================================================================================

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:orientation="vertical"
    android:theme="@style/Default"
    tools:ignore="UnusedAttribute">

    <FrameLayout
        android:id="@android:id/background"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:background="@drawable/app_widget_image_background"
        android:clipToOutline="true">

        <ImageView
            android:id="@+id/trackCover"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:importantForAccessibility="no"
            android:scaleType="centerCrop"
            android:src="@drawable/art_music" />

    </FrameLayout>

    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="-32dp"
        android:layout_marginBottom="4dp"
        android:clipToPadding="false"
        android:paddingHorizontal="4dp">

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:background="@drawable/rounded_rectangle_cover_profile"
            android:backgroundTint="@color/material_dynamic_primary60"
            android:clipToOutline="true"
            tools:ignore="UnusedAttribute">

            <ImageView
                android:id="@+id/previousButton"
                android:layout_width="48dp"
                android:layout_height="48dp"
                android:layout_marginEnd="48dp"
                android:contentDescription="@string/previous"
                android:padding="8dp"
                android:src="@drawable/ic_skip_previous_40dp"
                android:tint="@color/material_dynamic_primary90"
                tools:ignore="UseAppTint" />

            <ImageView
                android:id="@+id/nextButton"
                android:layout_width="48dp"
                android:layout_height="48dp"
                android:contentDescription="@string/next"
                android:padding="8dp"
                android:src="@drawable/ic_skip_next_40dp"
                android:tint="@color/material_dynamic_primary90"
                tools:ignore="UseAppTint" />
        </LinearLayout>

        <ImageView
            android:id="@+id/playPauseButton"
            android:layout_width="68dp"
            android:layout_height="68dp"
            android:layout_gravity="center"
            android:layout_marginTop="-3dp"
            android:layout_marginBottom="-3dp"
            android:background="@drawable/art_twelve_sided_cookie"
            android:backgroundTint="@color/material_dynamic_primary40"
            android:contentDescription="@string/play"
            android:padding="16dp"
            android:src="@drawable/ic_play_48dp"
            android:tint="@color/material_dynamic_primary90"
            tools:ignore="UseAppTint" />
    </FrameLayout>

</LinearLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout-land\activity_main.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/coordinatorLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <androidx.fragment.app.FragmentContainerView
        android:id="@+id/hiddenWebViewContainer"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:visibility="invisible" />

    <androidx.fragment.app.FragmentContainerView
        android:id="@+id/navHostFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:layout="@layout/fragment_home"
        tools:layout_marginStart="64dp" />

    <com.google.android.material.navigationrail.NavigationRailView
        android:id="@+id/navView"
        style="@style/NavView"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:minWidth="@dimen/nav_width"
        app:elevation="0dp"
        app:itemMinHeight="64dp"
        app:menu="@menu/nav_menu"
        app:menuGravity="center" />

    <androidx.fragment.app.FragmentContainerView
        android:id="@+id/playerFragmentContainer"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:outlineProvider="none"
        app:behavior_hideable="true"
        app:behavior_peekHeight="@dimen/bottom_player_peek_height"
        app:layout_behavior="com.google.android.material.bottomsheet.BottomSheetBehavior"
        tools:layout="@layout/fragment_player" />

</androidx.coordinatorlayout.widget.CoordinatorLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout-land\fragment_player.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <FrameLayout
        android:id="@+id/bg_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:translationZ="-2dp">

        <com.flaviofaria.kenburnsview.KenBurnsView
            android:id="@+id/bg_image"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            app:layout_constraintBottom_toTopOf="@+id/bg_gradient"
            app:layout_constraintHorizontal_bias="0.5"
            app:layout_constraintTop_toTopOf="parent" />

        <androidx.media3.ui.PlayerView
            android:id="@+id/player_view"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:clickable="false"
            android:visibility="gone"
            app:show_buffering="always"
            app:use_controller="false" />

        <include
            android:id="@+id/bgPanel"
            layout="@layout/item_click_panels" />

    </FrameLayout>

    <FrameLayout
        android:id="@+id/fg_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <ImageView
            android:id="@+id/bg_gradient"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:importantForAccessibility="no"
            android:translationZ="-2dp"
            app:layout_constraintBottom_toTopOf="@+id/view_pager"
            app:layout_constraintHorizontal_bias="0.5"
            app:layout_constraintTop_toBottomOf="@+id/bg_image"
            app:srcCompat="@drawable/gradient_track"
            app:tint="?echoBackground" />

        <View
            android:id="@+id/bg_collapsed"
            android:layout_width="match_parent"
            android:layout_height="@dimen/collapsed_cover_size"
            android:layout_margin="8dp"
            android:background="@drawable/shape_rounded_item_corner"
            android:backgroundTint="?colorSurfaceContainerHigh"
            android:translationZ="-1dp" />

        <androidx.viewpager2.widget.ViewPager2
            android:id="@+id/view_pager"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:baselineAligned="false">

            <androidx.constraintlayout.widget.ConstraintLayout
                android:id="@+id/constraint_layout"
                style="@style/PlayerExpandedConstraintLayout">

                <View
                    android:id="@+id/player_track_cover_placeholder"
                    style="@style/PlayerTrackCoverContainer"
                    app:layout_constraintBottom_toBottomOf="parent"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent" />

            </androidx.constraintlayout.widget.ConstraintLayout>

            <androidx.coordinatorlayout.widget.CoordinatorLayout
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="1">

                <com.google.android.material.appbar.MaterialToolbar
                    android:id="@+id/expanded_toolbar"
                    style="@style/PlayerToolbarStyle" />

                <include
                    android:id="@+id/player_controls"
                    layout="@layout/item_player_controls"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center" />

                <androidx.fragment.app.FragmentContainerView
                    android:id="@+id/player_more_container"
                    android:name="dev.brahmkshatriya.echo.ui.player.more.PlayerMoreFragment"
                    style="@style/Widget.Material3.BottomSheet"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:clipToPadding="false"
                    android:outlineProvider="none"
                    app:backgroundTint="@android:color/transparent"
                    app:behavior_hideable="false"
                    app:behavior_peekHeight="@dimen/player_info_peek_height"
                    app:layout_behavior="com.google.android.material.bottomsheet.BottomSheetBehavior"
                    tools:layout="@layout/fragment_player_more" />

            </androidx.coordinatorlayout.widget.CoordinatorLayout>

        </LinearLayout>

        <include
            android:id="@+id/player_collapsed_container"
            layout="@layout/item_player_collapsed_controls" />

    </FrameLayout>

</androidx.coordinatorlayout.widget.CoordinatorLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\layout-land\item_player_track.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <include
        android:id="@+id/player_collapsed"
        layout="@layout/item_player_collapsed"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="8dp" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:baselineAligned="false">

        <androidx.constraintlayout.widget.ConstraintLayout
            android:id="@+id/constraint_layout"
            style="@style/PlayerExpandedConstraintLayout">

            <FrameLayout
                android:id="@+id/player_track_cover_container"
                style="@style/PlayerTrackCoverContainer"
                android:background="?echoBackground"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="parent">

                <ImageView
                    android:id="@+id/player_track_cover"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:background="?colorSurfaceContainerHighest"
                    android:importantForAccessibility="no" />
            </FrameLayout>

        </androidx.constraintlayout.widget.ConstraintLayout>

        <View
            android:id="@+id/player_controls_placeholder"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1" />

    </LinearLayout>

    <include
        android:id="@+id/click_panel"
        layout="@layout/item_click_panels" />
</FrameLayout>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\menu\create_playlist_menu.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <item
        android:id="@+id/menu_create_playlist"
        android:icon="@drawable/ic_playlist_add"
        android:title="@string/create_playlist"
        app:showAsAction="ifRoom" />

</menu>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\menu\delete_menu.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <item
        android:id="@+id/menu_delete"
        android:icon="@drawable/ic_delete"
        android:title="@string/delete"
        app:showAsAction="ifRoom" />

</menu>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\menu\extensions_menu.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <item
        android:id="@+id/menu_repo"
        android:icon="@drawable/ic_language"
        android:title="@string/extension"
        app:showAsAction="ifRoom" />

    <item
        android:id="@+id/menu_update"
        android:icon="@drawable/ic_autorenew"
        android:title="@string/check_for_updates"
        app:showAsAction="ifRoom" />

    <item
        android:id="@+id/menu_uninstall"
        android:icon="@drawable/ic_delete"
        android:title="@string/delete"
        app:showAsAction="ifRoom" />
</menu>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\menu\incognito_menu.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <item
        android:id="@+id/menu_incognito"
        android:icon="@drawable/ic_incognito"
        android:title="@string/incognito"
        app:showAsAction="ifRoom" />

</menu>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\menu\lyrics_menu.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">
    <item
        android:id="@+id/menu_lyrics"
        android:icon="@drawable/ic_extension_32dp"
        android:title="@string/extensions"
        app:showAsAction="ifRoom" />
</menu>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\menu\more_menu.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <item
        android:id="@+id/menu_more"
        android:icon="@drawable/ic_more_horiz"
        android:title="@string/more"
        app:showAsAction="ifRoom" />

</menu>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\menu\nav_menu.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/homeFragment"
        android:icon="@drawable/anim_home"
        android:title="@string/home" />

    <item
        android:id="@+id/searchFragment"
        android:icon="@drawable/anim_search"
        android:title="@string/search" />

    <item
        android:id="@+id/libraryFragment"
        android:icon="@drawable/anim_bookmark"
        android:title="@string/library" />

</menu>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\menu\refresh_menu.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <item
        android:id="@+id/menu_refresh"
        android:icon="@drawable/ic_refresh"
        android:title="@string/reset"
        app:showAsAction="ifRoom" />

</menu>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\menu\settings_menu.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:android="http://schemas.android.com/apk/res/android">

    <item
        android:id="@+id/menu_settings"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:icon="@drawable/ic_settings_outline"
        android:title="@string/settings"
        app:showAsAction="ifRoom" />
</menu>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\menu\sleep_timer_menu.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <item
        android:id="@+id/menu_schedule"
        android:icon="@drawable/ic_schedule"
        android:title="@string/sleep_timer"
        app:showAsAction="ifRoom" />

</menu>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\menu\update_menu.xml
================================================================================

<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">


    <item
        android:id="@+id/menu_update"
        android:icon="@drawable/ic_autorenew"
        android:title="@string/check_for_updates"
        app:showAsAction="ifRoom" />

</menu>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\mipmap-anydpi-v26\ic_launcher.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@drawable/ic_launcher_background"/>
    <foreground android:drawable="@drawable/ic_launcher_foreground"/>
    <monochrome android:drawable="@drawable/ic_launcher_monochrome"/>
</adaptive-icon>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values\attributes.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <attr name="navBackground" format="reference|color" />
    <attr name="echoBackground" format="reference|color" />
    <attr name="navBarForeground" format="color" />
    <attr name="navBarBackground" format="color" />
    <attr name="itemCoverSize" format="dimension" />
    <attr name="itemCorner" format="dimension" />
</resources>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values\colors.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="black">#FF000000</color>
    <color name="white">#FFFFFFFF</color>
    <color name="app_color">#22bbff</color>
    <color name="app_color_highlight">#BFD5FF</color>
    <color name="app_color_shadow">#22bbff</color>
    <color name="amoled_bg">@color/white</color>
    <color name="amoled_bg_semi">#54FFFFFF</color>
    <color name="amoled_fg">@color/black</color>
    <color name="amoled_fg_semi">#14000000</color>
</resources>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values\dimens.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <dimen name="collapsed_cover_size">64dp</dimen>
    <dimen name="max_cover_size">384dp</dimen>
    <dimen name="bottom_player_peek_height">136dp</dimen>
    <dimen name="nav_width">@dimen/collapsed_cover_size</dimen>
    <dimen name="nav_height">@dimen/collapsed_cover_size</dimen>
    <dimen name="player_info_peek_height">@dimen/nav_height</dimen>
    <dimen name="player_more_top_margin">78dp</dimen>
</resources>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values\strings.xml
================================================================================

<resources>
    <string name="app_name" translatable="false">Echo</string>
    <string name="app_github_repo" translatable="false">brahmkshatriya/echo</string>
    <string name="okay">Okay</string>
    <string name="cancel">Cancel</string>
    <string name="back">Back</string>
    <string name="feed">Feed</string>
    <string name="x_permission_required">%1$s Permission Required</string>
    <string name="x_was_not_granted">%1$s was not granted</string>
    <string name="audio">Audio</string>
    <string name="audio_permission_summary">To access your local music library</string>
    <string name="read_storage">Read Storage</string>
    <string name="write_storage">Write Storage</string>
    <string name="write_storage_permission_summary">To create and edit local playlists</string>
    <string name="notifications">Notifications</string>
    <string name="notifications_permission_summary">To show notification for downloads and music</string>
    <string name="remove">Remove</string>
    <string name="more_by_x">More by %1$s</string>
    <string name="songs">Songs</string>
    <string name="albums">Albums</string>
    <string name="x_radio">%1$s Radio</string>
    <string name="cached_songs">Cached Songs</string>
    <string name="cache_playlist_warning">Experimental Feature. Anything except listening to them is not supported.</string>
    <string name="artists">Artists</string>
    <string name="recently_added">Recently Added</string>
    <string name="refresh_library_on_reload">Refresh Library on Reload</string>
    <string name="refresh_library_on_reload_summary">Scan the device every time the feed is loaded</string>
    <string name="duration_filter">Duration Filter</string>
    <string name="duration_filter_summary">Filter out audio files with duration(in seconds) less than the value</string>
    <string name="blacklist_folders">Blacklist Folders</string>
    <string name="blacklist_folders_summary">Folders to exclude from the library</string>
    <string name="blacklist_folder_keywords">Blacklist Folder Keywords</string>
    <string name="blacklist_folder_keywords_summary">Keywords to blacklist folders, use comma for separator</string>
    <string name="saved">Saved</string>
    <string name="tabs">Tabs</string>
    <string name="show_tabs">Show Tabs</string>
    <string name="show_tab_summary">will show tabs of the extensions as category</string>
    <string name="unified_liked_playlist_summary">Your liked tracks from various extensions</string>
    <string name="n_items">%1$d Items</string>
    <string name="item">Item</string>
    <plurals name="number_items">
        <item quantity="one">%1$d Item</item>
        <item quantity="other">%1$d Items</item>
    </plurals>
    <string name="playlist_liked">Liked</string>
    <string name="playlist_liked_desc">Your liked tracks</string>
    <string name="unknown">Unknown</string>
    <string name="like">Like</string>
    <string name="unlike">Unlike</string>
    <string name="repeat_one">Repeat One</string>
    <string name="repeat_off">Repeat Off</string>
    <string name="repeat_all">Repeat All</string>
    <string name="home">Home</string>
    <string name="search">Search</string>
    <string name="library">Library</string>
    <string name="more">More</string>
    <string name="extension">Extension</string>
    <string name="downloading_x">Downloading %1$s</string>
    <string name="cancel_all">Cancel All</string>
    <string name="download_progress">Download Progress</string>
    <string name="downloads">Downloads</string>

    <string name="downloaded_x">Downloaded %1$s</string>

    <string name="logout_and_login">Logout and Login</string>
    <string name="login">Login</string>
    <string name="view">View</string>

    <string name="extension_out_of_date">Out of date</string>
    <string name="no_internet">No Internet</string>
    <string name="error_loading_extension_from_x">Error loading extension from %1$s</string>
    <string name="extension_x_not_found">Extension %1$s not found</string>
    <string name="required_extensions_missing_x">Required extensions missing: %1$s</string>
    <string name="x_login_required">%1$s login required</string>
    <string name="x_is_not_supported_in_x">%1$s is not supported in %2$s</string>
    <string name="account_session_expired_in_x">Account session expired in %1$s</string>
    <string name="error_x">Error: %1$s</string>
    <string name="str_copy">Copy</string>
    <string name="extensions">Extensions</string>
    <string name="choose_a_color">Choose a color</string>
    <string name="random">Random</string>
    <string name="add">Add</string>
    <string name="loading">Loading…</string>

    <string name="settings">Settings</string>
    <string name="value">Value</string>
    <string name="value_not_set">Not Set</string>

    <string name="playback">Playback</string>

    <string name="audio_fx">Audio Effects</string>
    <string name="audio_fx_summary">Effects applied for all songs</string>
    <string name="audio_fx_desc">Change the audio effects for the current track.</string>
    <string name="reset">Reset</string>
    <string name="playback_speed">Playback Speed</string>
    <string name="change_pitch_with_speed">Change pitch with speed</string>
    <string name="bass_boost">Bass Boost</string>
    <string name="bass_boost_desc">Larger value may distort the sound.</string>
    <string name="change_pitch_with_speed_desc">Get that slow-motion sound</string>
    <string name="equalizer">Equalizer</string>
    <string name="equalizer_summary">Open the device equalizer settings</string>

    <string name="stream_quality">Stream Quality</string>
    <string name="stream_quality_summary">Select the default quality of the stream</string>
    <string name="x_specific_quality_summary">%1$s specific stream quality, will override the default stream quality selection</string>

    <string-array name="stream_qualities">
        <item>Highest</item>
        <item>Medium</item>
        <item>Lowest</item>
    </string-array>

    <string name="unmetered_stream_quality">Unmetered Stream Quality</string>
    <string name="unmetered_stream_quality_summary">The quality of the stream when connected to an unmetered network. This will override the default stream quality.</string>

    <string name="behavior">Behavior</string>

    <string name="keep_queue">Keep Player Queue</string>
    <string name="keep_queue_summary">Recover the player queue, when you reopen the app.</string>

    <string name="stop_player">Stop player</string>
    <string name="stop_player_summary">Stop the player, when the app is removed from recents</string>

    <string name="skip_silence">Skip Silence</string>
    <string name="skip_silence_summary">Skip silent part in the song, to provide gapless playback.</string>

    <string name="auto_start_radio">Auto Start Radio</string>
    <string name="auto_start_radio_summary">Automatically add related songs of track in the playlist, to have an infinite queue</string>

    <string name="cache_size">Cache Size</string>
    <string name="cache_size_summary">Size in MB to cache audio and video</string>

    <string name="version">Version</string>
    <string name="select_language">Select Language</string>
    <string name="system">System</string>
    <string name="check_for_updates">Check for Updates</string>
    <string name="check_for_updates_summary">Look for new updates of both app and extensions, when you open the app.</string>

    <string name="install">Install</string>
    <string name="app">App</string>
    <string name="file">File</string>
    <string name="installation_type">Installation Type</string>
    <string name="installation_type_summary">App installation will allow the following links to open in Echo:</string>
    <string name="installation_type_warning">Not available if you install the extension as a File.</string>
    <string name="could_not_find_the_file">Could not find the file.</string>
    <string name="extension_installer">Extension Installer</string>
    <string name="extension_installed_successfully">Extension installed successfully.</string>
    <string name="extension_uninstalled_successfully">Extension uninstalled successfully.</string>
    <string name="allow_opening_links">Allow opening links</string>
    <string name="open_links_instruction">To allow opening these links, you need to:\n- Scroll down and click on \"Open by Default\"\n- Click on \"+ Add Link\"</string>
    <string name="downloading_update_for_x">Downloading update for %1$s</string>
    <string name="extension_updated_successfully">%1$s updated successfully</string>
    <string name="link">Link</string>
    <string name="link_or_code">Link or Code</string>
    <string name="list_is_empty">List is empty</string>
    <string name="extension_installed">%1$s (Installed)</string>
    <string name="add_extensions">Add Extensions</string>
    <string name="invalid_extension_list">Invalid extensions list</string>
    <string name="checking_for_updates">Checking for updates</string>

    <string name="look_and_feel">Look and Feel</string>

    <string name="ui">UI</string>

    <string name="theme">Theme</string>
    <string name="theme_summary">Want to be blind?</string>
    <string-array name="themes">
        <item>Light</item>
        <item>Dark</item>
        <item>System</item>
    </string-array>

    <string name="custom_theme_color">Custom Theme Color</string>
    <string name="custom_theme_color_summary">Use a custom theme color, instead of system theme.</string>
    <string name="add_color">Add color</string>
    <string name="custom_colors">Custom Colors</string>

    <string name="amoled">AMOLED</string>
    <string name="amoled_summary">Pitch Black, Pure Black</string>

    <string name="navbar_gradient">Gradient Navbar</string>
    <string name="navbar_gradient_summary">Navbar gradually becomes transparent</string>

    <string name="dynamic_player">Dynamic Player Color</string>
    <string name="dynamic_player_summary">Apply color to the player based on the Track Artwork</string>

    <string name="show_background">Show Background</string>
    <string name="show_background_summary">Background video or blurred artwork of track in player</string>

    <string name="colors">Colors</string>
    <string name="scroll_bar">Scroll Bar</string>
    <string name="scroll_bar_summary">Scrollbar on the side for faster access (might be glitchy)</string>

    <string name="animation">Animation</string>

    <string name="back_animations">Back Animations</string>
    <string name="back_animations_summary">Can cause visual bug due to android, but you can just open recents to fix it.</string>

    <string name="animations">Animations</string>
    <string name="animations_summary">Feeling too much stutter? turning this off, might help</string>

    <string name="refresh">Refresh</string>
    <string name="x_disabled">%1$s (Disabled)</string>
    <string name="by_x">By %1$s</string>
    <string name="music">Music</string>
    <string name="tracker">Tracker</string>
    <string name="lyrics">Lyrics</string>
    <string name="misc">Misc</string>
    <string name="x_extensions">%1$s Extensions</string>
    <string name="x_extension">%1$s Extension</string>
    <string name="enabled">Enabled</string>
    <string name="disabled">Disabled</string>
    <string name="error_updating_extension">Error while updating</string>

    <string name="no_user_found">No user found</string>
    <string name="select_x_account">Select %1$s account</string>
    <string name="add_extension">Add Extension</string>
    <string name="webview">Webview</string>
    <string name="logout">Logout</string>
    <string name="switch_account">Switch Account</string>
    <string name="incognito">Incognito</string>
    <string name="not_logged_in">Not logged in</string>
    <string name="x_login">%1$s Login</string>
    <string name="x_is_required">%1$s is required</string>
    <string name="regex_invalid">%1$s is invalid, please follow the regex: %2$s</string>

    <string name="playing_from">Playing From</string>
    <string name="up_next">Up Next</string>
    <string name="info">Info</string>
    <string name="seekbar">Seekbar</string>
    <string name="shuffle">Shuffle</string>
    <string name="previous">Previous</string>
    <string name="play">Play</string>
    <string name="next">Next</string>
    <string name="repeat">Repeat</string>
    <string name="close">Close</string>
    <string name="no_lyrics">No Lyrics</string>

    <string name="sleep_timer">Sleep Timer</string>
    <string name="end_of_track">End of Track</string>
    <string name="_15min">15m</string>
    <string name="_30min">30m</string>
    <string name="_45min">45m</string>
    <string name="_1hr">1h</string>
    <string name="_2hr">2h</string>
    <string name="sleep_timer_desc">Set a sleep timer to stop playback after a certain amount of time</string>
    <string name="sleep_on_specific_time">Sleep on specific time</string>
    <string name="sleep_timer_cancelled">Sleep timer cancelled</string>
    <string name="sleep_timer_set_for">Sleep timer set for %1$s</string>
    <string name="search_x">Search %1$s</string>
    <string name="n_hours">%1$d hours</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d Hour</item>
        <item quantity="other">%1$d Hours</item>
    </plurals>
    <string name="n_minutes">%1$d minutes</string>
    <plurals name="number_min">
        <item quantity="one">%1$d Min</item>
        <item quantity="other">%1$d Mins</item>
    </plurals>

    <string name="servers">Servers</string>
    <string name="sources">Sources</string>
    <string name="backgrounds">Backgrounds</string>
    <string name="subtitles">Subtitles</string>
    <string name="audio_selection">Audio Selection</string>
    <string name="video_selection">Video Selection</string>
    <string name="subtitle_selection">Subtitle Selection</string>
    <string name="quality_selection">Quality Selection</string>
    <string name="quality_x">Quality %1$d</string>
    <string name="off">Off</string>
    <string name="unknown_quality">Unknown Quality</string>

    <string name="crying_af" translatable="false">;-;</string>
    <string name="so_empty">So empty…</string>
    <string name="not_loading">Not Loading</string>
    <string name="n_dot_x" translatable="false">%1$d. %2$s</string>

    <string name="share">Share</string>
    <string name="sharing_x">Sharing %1$s</string>

    <string name="save_to_library">Save to library</string>
    <string name="saved_x_to_library">Saved %1$s to library</string>
    <string name="remove_from_library">Remove from library</string>
    <string name="removed_x_from_library">Removed %1$s from library</string>

    <string name="radio">Radio</string>
    <string name="download">Download</string>

    <string name="follow">Follow</string>
    <string name="following_x">Following %1$s</string>
    <string name="followed_x">Followed %1$s</string>
    <string name="unfollow">Unfollow</string>
    <string name="unfollowing_x">Unfollowing %1$s</string>
    <string name="unfollowed_x">Unfollowed %1$s</string>

    <string name="liking_x">Liking %1$s</string>
    <string name="liked_x">Liked %1$s</string>
    <string name="unliking_x">Unliked %1$s</string>
    <string name="unliked_x">Unliked %1$s</string>

    <string name="hiding_x">Hiding %1$s</string>
    <string name="unhiding_x">Unhiding %1$s</string>
    <string name="hidden_x">Hidden %1$s</string>
    <string name="unhidden_x">Unhidden %1$s</string>

    <string name="save_to_playlist">Save to playlist</string>
    <string name="delete_playlist">Delete playlist</string>
    <string name="add_to_next">Add to next</string>
    <string name="add_to_queue">Add to queue</string>
    <string name="loading_radio_for_x">Loading radio for %1$s</string>
    <string name="playing_x">Playing %1$s</string>
    <string name="adding_x_to_queue">Adding %1$s to queue</string>
    <string name="adding_x_to_next">Adding %1$s to next</string>
    <string name="background_gradient">Background Gradient</string>
    <string name="background_gradient_summary">A gradient color tint in  background depending on the context</string>
    <string name="all">All</string>
    <string name="edit_playlist">Edit Playlist</string>
    <string name="more_brain_capacity">More Brain Capacity</string>
    <string name="more_brain_capacity_summary">Enabling this, can help fix audio lag and increase battery usage (Disables the audio offloading).</string>

    <string name="track">Track</string>
    <string name="tracks">Tracks</string>
    <string name="sort">Sort</string>
    <string name="explicit">Explicit</string>
    <string name="x_plays">%1$s Plays</string>
    <string name="x_followers">%1$s Followers</string>
    <string name="n_songs">%1$d Songs</string>
    <string name="n_episodes">%1$d Episodes</string>
    <string name="n_chapters">%1$d Chapters</string>
    <string name="n_tracks">%1$d Tracks</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d Song</item>
        <item quantity="other">%1$d Songs</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d Episode</item>
        <item quantity="other">%1$d Episodes</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d Chapter</item>
        <item quantity="other">%1$d Chapters</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d Track</item>
        <item quantity="other">%1$d Tracks</item>
    </plurals>
    <string name="shuffling_x">Shuffling %1$s</string>
    <string name="copying_the_error">Copying the error</string>
    <string name="sort_and_filter">Sort and Filter</string>
    <string name="filter">Filter</string>
    <string name="reversed">Reversed</string>
    <string name="apply">Apply</string>
    <string name="save">Save</string>
    <string name="unsave">Unsave</string>
    <string name="sort_title">Title</string>
    <string name="sort_date">Date</string>
    <string name="sort_date_added">Date Added</string>
    <string name="sort_duration">Duration</string>
    <string name="sort_subtitle">Subtitle</string>

    <string name="scroll_animations">Scroll Animations</string>
    <string name="scroll_animations_summary">Animations when you scroll stuff</string>
    <string name="delete">Delete</string>
    <string name="playlist_name">Playlist Name</string>
    <string name="playlist_description">Playlist Description</string>
    <string name="create_playlist">Create Playlist</string>
    <string name="create">Create</string>
    <string name="add_song">Add Song</string>
    <string name="creating_x">Creating %1$s</string>
    <string name="playlist_name_empty">Playlist name is empty</string>
    <string name="x_created">%1$s created</string>
    <string name="deleting_x">Deleting %1$s</string>
    <string name="deleted_x">Deleted %1$s</string>
    <string name="loading_x">Loading %1s</string>
    <string name="saving_x">Saving %1$s</string>
    <string name="saved_to_x">Saved to %1$s</string>
    <string name="saved_to_playlists">Saved to playlists</string>
    <string name="selected_n">Selected %1$d</string>
    <string name="adding_x">Adding %1$s</string>
    <string name="moving_x">Moving %1$s</string>
    <string name="removing_x">Removing %1$s</string>

    <string name="no_download_extension">No download extension found, use code \"echodown\" to get it.</string>
    <string name="nothing_to_download_in_x">Nothing to download in %1$s</string>
    <string name="download_started">Download Started</string>
    <string name="merging_x">Merging %1$s</string>
    <string name="tagging_x">Tagging %1$s</string>

    <string name="apply_player_color_to_app">Apply Player Color to the Entire App</string>
    <string name="apply_player_color_to_app_summary">LAG ALERT!!!</string>
    <string name="delete_download">Delete Download</string>
    <string name="removed_x_from_downloads">Removed %1$s from Downloads</string>
    <string name="download_complete">Download Complete</string>

    <string name="app_widget_description">Echo on your home screen!</string>
    <string name="opening_webview_x">Opening Webview: %1$s</string>
    <string name="no_update_available_for_x">No update available for %1$s</string>
    <string name="other">Other</string>
    <string name="player">Player</string>
    <string name="about">About</string>
    <string name="language_x">Language: %1$s</string>
    <string name="guide">Guide</string>
    <string name="donate">Donate</string>
    <string name="contributors">Contributors</string>
    <string name="app_desc">Just a music player.</string>
    <string name="manage">Manage</string>
    <string name="no_account">No Account</string>
    <string name="other_settings">Other Settings</string>

    <string name="no_x_found">No %1$s found</string>
    <string name="playlist">Playlist</string>
    <string name="album">Album</string>
    <string name="pre_release">Pre Release</string>
    <string name="single">Single</string>
    <string name="ep">EP</string>
    <string name="lp">LP</string>
    <string name="compilation">Compilation</string>
    <string name="show">Show</string>
    <string name="book">Book</string>
    <string name="song">Song</string>
    <string name="podcast">Podcast</string>
    <string name="video">Video</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="genres_x">Genres: %1$s</string>
    <string name="disc_number_n">Disc Number: %1$d</string>
    <string name="album_order_n">Album Order Number: %1$d</string>
    <string name="confirmation">Confirmation</string>
    <string name="delete_playlist_confirmation">Are you sure you want to delete %1$s?</string>
    <string name="confirm">Confirm</string>
    <string name="big_cover">Bigger Covers</string>
    <string name="big_cover_summary">Good for devices with larger screens</string>
    <string name="unhide">Unhide</string>
    <string name="hide">Hide</string>
    <string name="no_last_played_track_found">No last played track found.</string>
    <string name="not_yet_released">Not yet released</string>
    <string name="releases_on_x">Releases on %1$s</string>
    <string name="unavailable_in_your_region">Unavailable in your region</string>
    <string name="not_playable_x">Not playable: %1$s</string>

    <string name="currently_playing">Currently Playing</string>
    <string name="circle">Circle</string>
    <string name="horizontal">Horizontal</string>
    <string name="vertical">Vertical</string>
    <string name="export_settings">Export Settings</string>
    <string name="export_settings_summary">Export settings to a file</string>
    <string name="exported_to">Exported to %1$s</string>
    <string name="import_settings">Import Settings</string>
    <string name="import_settings_summary">Import settings from a file</string>
</resources>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values\styles.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:tools="http://schemas.android.com/tools">

    <style name="EchoActionButton" parent="Widget.AppCompat.ActionButton">
        <item name="android:paddingStart">4dp</item>
        <item name="android:paddingEnd">4dp</item>
    </style>

    <style name="EchoDialog" parent="ThemeOverlay.Material3.Dialog.Alert">
        <item name="android:windowBackground">@drawable/dialog_bg</item>
    </style>

    <style name="EchoAlertDialog" parent="ThemeOverlay.Material3.MaterialAlertDialog">
        <item name="alertDialogStyle">@style/EchoDialogStyle</item>
    </style>

    <style name="EchoDialogStyle" parent="MaterialAlertDialog.Material3">
        <item name="backgroundTint">?navBackground</item>
    </style>

    <style name="EchoBottomSheetDialog" parent="ThemeOverlay.Material3.BottomSheetDialog">
        <item name="bottomSheetStyle">@style/EchoBottomSheetStyle</item>
        <item name="android:navigationBarColor">@android:color/transparent</item>
    </style>

    <style name="EchoBottomSheetStyle" parent="Widget.Material3.BottomSheet">
        <item name="backgroundTint">?navBackground</item>
        <item name="behavior_peekHeight">512dp</item>
    </style>

    <style name="TopCollapsingBar" parent="Widget.Material3.CollapsingToolbar.Large">
        <!--        <item name="contentScrim">?navBackground</item>-->
        <item name="expandedTitleMarginBottom">20dp</item>
        <item name="expandedTitleMarginEnd">24dp</item>
        <item name="expandedTitleMarginStart">24dp</item>
        <item name="titleCollapseMode">scale</item>
        <item name="layout_scrollFlags">scroll|exitUntilCollapsed|snap</item>
    </style>

    <style name="EchoCollapsingBar" parent="TopCollapsingBar" />

    <style name="EchoCardView">
        <item name="cardCornerRadius">?itemCorner</item>
        <item name="cardBackgroundColor">?echoBackground</item>
    </style>

    <style name="EchoAppBarLayout" parent="Widget.Material3.AppBarLayout">
        <item name="android:background">?navBackground</item>
        <item name="liftOnScrollColor">@android:color/transparent</item>
    </style>

    <style name="Toolbar" parent="Widget.Material3.Toolbar">
        <item name="android:layout_marginStart">8dp</item>
        <item name="android:layout_marginEnd">8dp</item>
        <item name="android:paddingEnd">4dp</item>
        <item name="android:layout_width">match_parent</item>
        <item name="android:layout_height">?actionBarSize</item>
        <item name="android:background">@android:color/transparent</item>
        <item name="layout_collapseMode">pin</item>
        <item name="navigationContentDescription">@string/back</item>
        <item name="navigationIcon">@drawable/ic_back</item>
    </style>

    <style name="EchoSnackBar" parent="Widget.Material3.Snackbar">
        <item name="shapeAppearance">@style/ShapeAppearance.Material3.Corner.Small</item>
    </style>

    <style name="BottomNavbarActiveIndicator" parent="Widget.Material3.BottomNavigationView.ActiveIndicator">
        <item name="android:width">56dp</item>
        <item name="android:height">32dp</item>
        <item name="android:color">?navBarBackground</item>
    </style>

    <style name="NavView" parent="Widget.Material3.BottomNavigationView">
        <item name="backgroundTint">?attr/navBackground</item>
        <item name="itemActiveIndicatorStyle">@style/BottomNavbarActiveIndicator</item>
        <item name="itemTextAppearanceActiveBoldEnabled">false</item>
        <item name="itemTextAppearanceActive">@style/TextAppearance.Material3.BodySmall</item>
        <item name="itemTextAppearanceInactive">@style/TextAppearance.Material3.BodySmall</item>
        <item name="itemIconTint">@color/nav_bar_icon</item>
        <item name="labelVisibilityMode">labeled</item>
        <item name="itemPaddingBottom">6dp</item>
        <item name="itemPaddingTop">8dp</item>
        <item name="activeIndicatorLabelPadding">2dp</item>
        <item name="itemMinHeight">@dimen/nav_height</item>
        <item name="android:paddingTop">0dp</item>
        <item name="android:paddingBottom">0dp</item>
    </style>

    <style name="AppBarOutline">
        <item name="android:outlineProvider">none</item>
        <item name="android:layout_width">match_parent</item>
        <item name="android:layout_height">1dp</item>
        <item name="android:layout_marginTop">-1dp</item>
        <item name="android:translationZ">1dp</item>
        <item name="android:alpha">0</item>
        <item name="android:background">@color/amoled_fg_semi</item>
    </style>

    <style name="EchoTabLayout" parent="Widget.Material3.TabLayout">
        <item name="android:background">@android:color/transparent</item>
        <item name="android:clipToPadding">false</item>
        <item name="android:paddingStart">16dp</item>
        <item name="android:paddingEnd">16dp</item>
        <item name="tabIndicator">@drawable/tab_indicator</item>
        <item name="tabGravity">start</item>
        <item name="tabIndicatorFullWidth">true</item>
        <item name="tabMinWidth">0dp</item>
        <item name="tabMode">scrollable</item>
        <item name="tabPaddingEnd">16dp</item>
        <item name="tabPaddingStart">16dp</item>
        <item name="tabUnboundedRipple">true</item>
    </style>

    <style name="EchoCircularProgressIndicator" parent="Widget.Material3.CircularProgressIndicator">
        <item name="showAnimationBehavior">outward</item>
    </style>

    <style name="EchoLinearProgressIndicator" parent="Widget.Material3.LinearProgressIndicator">
        <item name="showAnimationBehavior">outward</item>
    </style>

    <style name="TextInput" parent="Widget.MaterialComponents.TextInputLayout.OutlinedBox.Dense">
        <item name="android:layout_width">match_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="errorEnabled">true</item>
        <item name="boxCornerRadiusBottomEnd">8dp</item>
        <item name="boxCornerRadiusBottomStart">8dp</item>
        <item name="boxCornerRadiusTopEnd">8dp</item>
        <item name="boxCornerRadiusTopStart">8dp</item>
    </style>

    <style name="OutlinedButton" parent="Widget.Material3.Button.OutlinedButton">
        <item name="android:layout_width">match_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:gravity">start|center_vertical</item>
        <item name="android:insetTop">0dp</item>
        <item name="android:insetBottom">0dp</item>
        <item name="android:minHeight">64dp</item>
        <item name="android:paddingStart">24dp</item>
        <item name="android:paddingEnd">24dp</item>
        <item name="android:textSize">16sp</item>
        <item name="iconPadding">24dp</item>
    </style>

    <style name="Selectable">
        <item name="android:focusable">true</item>
        <item name="android:foreground">@drawable/ripple_item_container</item>
    </style>

    <style name="DialogHorizontalButton" parent="Widget.Material3.Button.TonalButton">
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_marginStart">4dp</item>
        <item name="android:layout_marginEnd">4dp</item>
        <item name="android:layout_marginTop">4dp</item>
        <item name="android:layout_marginBottom">4dp</item>
        <item name="iconSize">20dp</item>
    </style>

    <style name="PlayerMoreTopShape" parent="ShapeAppearance.Material3.Corner.None">
        <item name="cornerFamily">rounded</item>
        <item name="cornerSizeTopRight">8dp</item>
        <item name="cornerSizeTopLeft">8dp</item>
        <item name="cornerSizeBottomRight">8dp</item>
        <item name="cornerSizeBottomLeft">8dp</item>
    </style>

    <style name="PlayerMoreBottomShape" parent="ShapeAppearance.Material3.Corner.None">
        <item name="cornerFamily">rounded</item>
        <item name="cornerSizeTopRight">8dp</item>
        <item name="cornerSizeTopLeft">8dp</item>
        <item name="cornerSizeBottomRight">8dp</item>
        <item name="cornerSizeBottomLeft">8dp</item>
    </style>

    <style name="PlayerMoreSelected" parent="Widget.Material3.Button.OutlinedButton">
        <item name="android:layout_width">0dp</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_weight">1</item>
        <item name="android:insetTop">0dp</item>
        <item name="android:insetBottom">0dp</item>
        <item name="android:minHeight">48dp</item>
        <item name="strokeWidth">0dp</item>
        <item name="backgroundTint">@color/button_player_more</item>
    </style>

    <style name="PlayerMoreBackgroundButton" parent="PlayerMoreSelected">
        <item name="android:clickable">false</item>
        <item name="android:enabled">false</item>
        <item name="strokeWidth">0dp</item>
        <item name="backgroundTint">?echoBackground</item>
    </style>

    <style name="PlayerMoreToggleGroup">
        <item name="android:layout_width">match_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:clickable">false</item>
        <item name="android:spacing">6dp</item>
        <item name="innerCornerSize">8dp</item>
        <item name="shapeAppearance">@style/PlayerMoreTopShape</item>
    </style>

    <style name="PlayerTheme" parent="Default">
        <item name="colorControlNormal">@color/amoled_fg</item>
        <item name="colorControlActivated">@color/amoled_fg</item>
        <item name="colorControlHighlight">@color/amoled_fg</item>
    </style>

    <style name="PlayerToolbarStyle">
        <item name="android:theme">@style/PlayerTheme</item>
        <item name="android:layout_width">match_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_marginStart">4dp</item>
        <item name="android:layout_marginEnd">12dp</item>
        <item name="menu">@menu/more_menu</item>
        <item name="navigationIcon">@drawable/ic_expand_more</item>
        <item name="navigationIconTint">@color/amoled_fg</item>
        <item name="navigationContentDescription">@string/close</item>
        <item name="subtitle">@string/extensions</item>
        <item name="subtitleCentered">true</item>
        <item name="subtitleTextAppearance">@style/TextAppearance.Material3.TitleMedium</item>
        <item name="subtitleTextColor">@color/button_player</item>
        <item name="title">@string/playing_from</item>
        <item name="titleCentered">true</item>
        <item name="titleTextAppearance">@style/TextAppearance.AppCompat.Small</item>
        <item name="titleTextColor">?colorOnSurface</item>
    </style>

    <style name="BasePlayerTrackCoverContainer">
        <item name="android:layout_width">0dp</item>
        <item name="android:layout_height">0dp</item>
        <item name="android:orientation">vertical</item>
        <item name="android:transformPivotX">0dp</item>
        <item name="android:transformPivotY">0dp</item>
        <item name="layout_constraintDimensionRatio">1,1</item>
        <item name="layout_constraintHeight_min">@dimen/collapsed_cover_size</item>
        <item name="layout_constraintWidth_min">@dimen/collapsed_cover_size</item>
        <item name="layout_constraintHeight_max">@dimen/max_cover_size</item>
        <item name="layout_constraintWidth_max">@dimen/max_cover_size</item>
    </style>

    <style name="PlayerTrackCoverContainer" parent="BasePlayerTrackCoverContainer">
        <item name="android:layout_marginStart">24dp</item>
        <item name="android:layout_marginEnd">24dp</item>
        <item name="android:layout_marginTop">8dp</item>
        <item name="android:layout_marginBottom">8dp</item>
    </style>

    <style name="PlayerExpandedConstraintLayout">
        <item name="android:layout_width">match_parent</item>
        <item name="android:layout_height">match_parent</item>
        <item name="android:clipToPadding">false</item>
        <item name="android:paddingTop">64dp</item>
        <item name="android:paddingBottom">64dp</item>
        <item name="layout_constraintVertical_chainStyle">spread</item>
    </style>

    <style name="TertiaryButton" parent="Widget.Material3.Button.TonalButton">
        <item name="android:layout_width">0dp</item>
        <item name="android:layout_weight">1</item>
        <item name="android:minHeight">64dp</item>
        <item name="android:padding">0dp</item>
        <item name="android:layout_height">wrap_content</item>
    </style>

    <style name="IconButton" parent="Widget.Material3Expressive.Button.IconButton">
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:textSize">14sp</item>
    </style>

    <style name="IconButtonTertiary" parent="IconButton">
        <item name="materialThemeOverlay">@style/ButtonTertiaryOverlay</item>
    </style>

    <style name="IconButtonSecondary" parent="IconButton">
        <item name="materialThemeOverlay">@style/ButtonSecondaryOverlay</item>
    </style>

    <style name="ButtonTertiaryOverlay">
        <item name="colorContainer">?colorTertiary</item>
        <item name="colorContainerChecked">?colorTertiary</item>
        <item name="colorContainerUnchecked">?colorTertiaryContainer</item>
        <item name="colorOnContainer">?colorOnTertiary</item>
        <item name="colorOnContainerChecked">?colorOnTertiary</item>
        <item name="colorOnContainerUnchecked">?colorOnTertiaryContainer</item>
    </style>

    <style name="ButtonSecondaryOverlay">
        <item name="colorContainer">?colorSecondary</item>
        <item name="colorContainerChecked">?colorSecondary</item>
        <item name="colorContainerUnchecked">?colorSecondaryContainer</item>
        <item name="colorOnContainer">?colorOnSecondary</item>
        <item name="colorOnContainerChecked">?colorOnSecondary</item>
        <item name="colorOnContainerUnchecked">?colorOnSecondaryContainer</item>
    </style>

    <style name="IconButtonTonal" parent="Widget.Material3Expressive.Button.IconButton.Tonal">
        <item name="android:maxLines">1</item>
        <item name="android:ellipsize">end</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:textSize">14sp</item>
    </style>

    <style name="IconButtonTonalBig" parent="IconButtonTonal">
        <item name="android:paddingStart">4dp</item>
        <item name="android:paddingEnd">4dp</item>
        <item name="android:paddingTop">4dp</item>
        <item name="android:paddingBottom">4dp</item>
        <item name="iconSize">32dp</item>
    </style>

    <style name="IconButtonOutlined" parent="Widget.Material3Expressive.Button.IconButton.Outlined">
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:textSize">14sp</item>
        <item name="materialThemeOverlay">@style/ButtonOutlinedOverlay</item>
    </style>

    <style name="IconButtonTransparent" parent="Widget.Material3Expressive.Button.IconButton.Outlined">
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:textSize">14sp</item>
        <item name="strokeWidth">0dp</item>
        <item name="backgroundTint">@android:color/transparent</item>
    </style>

    <style name="IconButtonOutlinedBig" parent="IconButtonOutlined">
        <item name="android:paddingStart">4dp</item>
        <item name="android:paddingEnd">4dp</item>
        <item name="android:paddingTop">4dp</item>
        <item name="android:paddingBottom">4dp</item>
        <item name="iconSize">32dp</item>
    </style>

    <style name="ButtonOutlinedOverlay" parent="ThemeOverlay.Material3Expressive.Button.Outlined">
        <item name="colorContainerUnchecked">?navBackground</item>
        <item name="colorContainer">?navBackground</item>
    </style>

    <style name="TabButtonOverlay" parent="ThemeOverlay.Material3Expressive.Button.Filled">
        <item name="colorContainerChecked">
            @macro/m3_comp_button_outlined_selected_container_color
        </item>
        <item name="colorOnContainerChecked">
            @macro/m3_comp_button_outlined_selected_icon_color
        </item>
        <item name="colorContainerUnchecked">
            @color/amoled_fg_semi
        </item>
    </style>

    <style name="SideBarButton" parent="Widget.Material3Expressive.Button.OutlinedButton">
        <item name="android:layout_width">match_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:gravity">start|center_vertical</item>
        <item name="iconPadding">16dp</item>
        <item name="android:paddingStart">20dp</item>
        <item name="android:paddingEnd">20dp</item>
        <item name="android:insetLeft">4dp</item>
        <item name="android:insetRight">4dp</item>
        <item name="android:minHeight">64dp</item>
        <item name="android:maxLines">1</item>
        <item name="android:ellipsize">end</item>
        <item name="android:layout_marginBottom">12dp</item>
        <item name="strokeWidth">0dp</item>
        <item name="android:backgroundTint">?colorSurfaceContainerHigh</item>
    </style>


    <style name="NowPlayingButton" parent="Widget.Material3.Button.IconButton">
        <item name="android:tooltipText" tools:ignore="NewApi">@string/currently_playing</item>
        <item name="android:contentDescription">@string/currently_playing</item>
        <item name="icon">@drawable/anim_now_playing</item>
        <item name="iconTint">?colorOnSurface</item>
        <item name="iconSize">24dp</item>
    </style>

    <style name="SmallNowPlayingButton" parent="NowPlayingButton">
        <item name="android:layout_gravity">bottom|end</item>
        <item name="android:layout_width">32dp</item>
        <item name="android:layout_height">32dp</item>
        <item name="android:alpha">0.66</item>
        <item name="android:padding">3dp</item>
        <item name="iconPadding">0dp</item>
        <item name="iconSize">18dp</item>
        <item name="backgroundTint">@color/amoled_bg</item>
    </style>

    <style name="ItemCover">
        <item name="android:layout_width">0dp</item>
        <item name="android:layout_height">0dp</item>
        <item name="cardBackgroundColor">?attr/colorSurfaceContainerHigh</item>
        <item name="layout_constraintDimensionRatio">1,1</item>
        <item name="layout_constraintEnd_toEndOf">parent</item>
        <item name="layout_constraintHeight_max">@dimen/max_cover_size</item>
        <item name="layout_constraintStart_toStartOf">parent</item>
        <item name="layout_constraintTop_toTopOf">parent</item>
        <item name="layout_constraintWidth_max">@dimen/max_cover_size</item>
    </style>
</resources>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values\themes.xml
================================================================================

<resources xmlns:tools="http://schemas.android.com/tools">

    <style name="Base.Theme.Echo" parent="Theme.Material3Expressive.DynamicColors.DayNight.NoActionBar">
        <item name="android:windowSplashScreenBackground" tools:targetApi="s">
            @color/amoled_bg
        </item>
        <item name="android:windowSplashScreenAnimatedIcon" tools:targetApi="s">
            @drawable/art_splash_anim
        </item>
        <item name="android:windowSplashScreenAnimationDuration" tools:targetApi="s">900</item>
        <item name="android:windowSplashScreenBehavior" tools:targetApi="TIRAMISU">
            icon_preferred
        </item>
        <item name="android:windowSplashScreenBrandingImage" tools:targetApi="s">
            @drawable/art_brand
        </item>
        <item name="android:colorBackground">?echoBackground</item>
        <item name="snackbarStyle">@style/EchoSnackBar</item>
        <item name="android:dialogTheme">@style/EchoDialog</item>
        <item name="materialAlertDialogTheme">@style/EchoAlertDialog</item>
        <item name="bottomSheetDialogTheme">@style/EchoBottomSheetDialog</item>
        <item name="appBarLayoutStyle">@style/EchoAppBarLayout</item>
        <item name="actionButtonStyle">@style/EchoActionButton</item>
        <item name="collapsingToolbarLayoutStyle">@style/EchoCollapsingBar</item>
        <item name="cardViewStyle">@style/EchoCardView</item>
        <item name="tabStyle">@style/EchoTabLayout</item>
        <item name="circularProgressIndicatorStyle">@style/EchoCircularProgressIndicator</item>
        <item name="linearProgressIndicatorStyle">@style/EchoLinearProgressIndicator</item>

        <item name="echoBackground">?colorSurface</item>
        <item name="navBackground">?colorSurfaceContainer</item>

        <item name="itemCoverSize">96dp</item>
        <item name="itemCorner">8dp</item>
    </style>

    <style name="Default" parent="Base.Theme.Echo">
        <item name="navBarForeground">?colorSecondary</item>
        <item name="navBarBackground">?colorPrimaryInverse</item>
    </style>

    <style name="Amoled" parent="Default">
        <item name="echoBackground">@color/amoled_bg</item>
        <item name="navBackground">?colorSurfaceContainerLowest</item>
    </style>

    <style name="BigCover" parent="Default">
        <item name="itemCoverSize">128dp</item>
    </style>

    <style name="AmoledBigCover" parent="Amoled">
        <item name="itemCoverSize">128dp</item>
    </style>
</resources>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-ar\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">حسناً</string>
    <string name="cancel">إلغاء</string>
    <string name="back">رجوع</string>
    <string name="feed">الخلاصة</string>
    <string name="x_permission_required">مطلوب إلأذن %1$s</string>
    <string name="x_was_not_granted">لم يتم منح %1$s</string>
    <string name="audio">صوت</string>
    <string name="audio_permission_summary">للوصول إلى مكتبة الموسيقى المحلية الخاصة بك</string>
    <string name="read_storage">قراءة التخزين</string>
    <string name="write_storage">كتابة التخزين</string>
    <string name="write_storage_permission_summary">لإنشاء قوائم التشغيل المحلية وتحريرها</string>
    <string name="notifications">إشعارات</string>
    <string name="notifications_permission_summary">لإظهار الإشعارات الخاصة بالتنزيلات والموسيقى</string>
    <string name="remove">حذف</string>
    <string name="more_by_x">المزيد من %1$s</string>
    <string name="songs">الأغاني</string>
    <string name="albums">الألبومات</string>
    <string name="x_radio">راديو %1$s</string>
    <string name="cached_songs">الأغاني المخزنة مؤقتًا</string>
    <string name="cache_playlist_warning">ميزة تجريبية. لا يُدعم أي شيء سوى الاستماع إليها.</string>
    <string name="artists">الفنانون</string>
    <string name="recently_added">تمت إضافتها مؤخرًا</string>
    <string name="refresh_library_on_reload">تحديث المكتبة عند إعادة التحميل</string>
    <string name="refresh_library_on_reload_summary">مسح الجهاز في كل مرة يتم فيها تحميل الخلاصة</string>
    <string name="duration_filter">فلتر المدة</string>
    <string name="duration_filter_summary">تصفية ملفات الصوت التي تكون مدتها (بالثواني) أقل من القيمة</string>
    <string name="blacklist_folders">مجلدات القائمة المحظورة</string>
    <string name="blacklist_folders_summary">المجلدات التي يجب استبعادها من المكتبة</string>
    <string name="blacklist_folder_keywords">كلمات رئيسية لمجلد القائمة المحظورة</string>
    <string name="blacklist_folder_keywords_summary">كلمات رئيسية لإدراج المجلدات في القائمة المحظورة، استخدم الفاصلة للفصل</string>
    <string name="saved">حفظت</string>
    <string name="tabs">علامات التبويب</string>
    <string name="show_tabs">إظهار علامات التبويب</string>
    <string name="show_tab_summary">سيتم عرض علامات تبويب الامتدادات كفئة</string>
    <string name="unified_liked_playlist_summary">المسارات المفضلة لديك من ملحقات مختلفة</string>
    <string name="n_items">%1$d عناصر</string>
    <string name="item">عنصر</string>
    <plurals name="number_items">
        <item quantity="zero">لا شيء</item>
        <item quantity="one">%1$d عنصر</item>
        <item quantity="two">%1$d عنصرين</item>
        <item quantity="few">%1$d بعض العناصر</item>
        <item quantity="many">%1$d أكثر من عنصر</item>
        <item quantity="other">%1$d عناصر أخرى</item>
    </plurals>
    <string name="playlist_liked">المفضلة</string>
    <string name="playlist_liked_desc">المسارات المفضلة لديك</string>
    <string name="unknown">مجهول</string>
    <string name="like">أعجاب</string>
    <string name="unlike">غير معجب</string>
    <string name="repeat_one">كرر مرة</string>
    <string name="repeat_off">إيقاف التكرار</string>
    <string name="repeat_all">تكرار الكل</string>
    <string name="home">الرئيسية</string>
    <string name="search">البحث</string>
    <string name="library">المكتبة</string>
    <string name="more">المزيد</string>
    <string name="extension">امتداد</string>
    <string name="downloading_x">جاري تنزيل %1$s</string>
    <string name="cancel_all">إلغاء الكل</string>
    <string name="download_progress">تقدم التنزيل</string>
    <string name="downloads">التنزيلات</string>
    <string name="downloaded_x">تم تنزيل %1$s</string>
    <string name="logout_and_login">تسجيل الخروج وتسجيل الدخول</string>
    <string name="login">تسجيل الدخول</string>
    <string name="view">مشاهدة</string>
    <string name="extension_out_of_date">خارج عن الخدمة</string>
    <string name="no_internet">لا يوجد إنترنت</string>
    <string name="error_loading_extension_from_x">حدث خطأ أثناء تحميل الامتداد من %1$s</string>
    <string name="extension_x_not_found">لم يتم العثور على الامتداد %1$s</string>
    <string name="required_extensions_missing_x">الامتدادات المطلوبة مفقودة: %1$s</string>
    <string name="x_login_required">مطلوب تسجيل الدخول %1$s</string>
    <string name="x_is_not_supported_in_x">%1$s غير مدعوم في %2$s</string>
    <string name="account_session_expired_in_x">انتهت جلسة الحساب في %1$s</string>
    <string name="error_x">خطأ: %1$s</string>
    <string name="str_copy">نسخ</string>
    <string name="extensions">الإمتدادات</string>
    <string name="choose_a_color">اختر لونًا</string>
    <string name="random">عشوائي</string>
    <string name="add">أضافة</string>
    <string name="loading">تحميل…</string>
    <string name="settings">إلاعدادات</string>
    <string name="value">القيمة</string>
    <string name="value_not_set">غير محدد</string>
    <string name="playback">تشغيل مرة أخرى</string>
    <string name="audio_fx">المؤثرات الصوتية</string>
    <string name="audio_fx_summary">تم تطبيق التأثيرات على جميع الأغاني</string>
    <string name="audio_fx_desc">تغيير المؤثرات الصوتية للمسار الحالي.</string>
    <string name="reset">إعادة ضبط</string>
    <string name="playback_speed">سرعة التشغيل</string>
    <string name="change_pitch_with_speed">تغيير درجة الصوت مع السرعة</string>
    <string name="bass_boost">تعزيز الجهير</string>
    <string name="bass_boost_desc">قد تؤدي القيمة الأكبر إلى تشويه الصوت.</string>
    <string name="change_pitch_with_speed_desc">احصل على صوت الحركة البطيئة</string>
    <string name="equalizer">المعادل</string>
    <string name="equalizer_summary">افتح إعدادات المعادل الخاصة للجهاز</string>
    <string name="stream_quality">جودة البث</string>
    <string name="stream_quality_summary">حدد جودة البث الافتراضية</string>
    <string name="x_specific_quality_summary">جودة البث المحددة %1$s، ستتجاوز اختيار جودة البث الافتراضي</string>
    <string name="unmetered_stream_quality">جودة البث غير المقاسة</string>
    <string name="unmetered_stream_quality_summary">جودة البث عند الاتصال بشبكة غير محدودة. سيؤدي هذا إلى تجاوز جودة البث الافتراضية.</string>
    <string name="behavior">سلوك</string>
    <string name="keep_queue">حافظ على قائمة انتظار المشغل</string>
    <string name="keep_queue_summary">استعادة قائمة انتظار المشغل، عند إعادة فتح التطبيق.</string>
    <string name="stop_player">إيقاف التشغيل</string>
    <string name="stop_player_summary">أوقف التشغيل عند إزالة التطبيق من التطبيقات الأخيرة</string>
    <string name="skip_silence">تخطي لحظة الصمت</string>
    <string name="skip_silence_summary">قم بتخطي الجزء الصامت في الأغنية، لتوفير تشغيل بدون فجوات.</string>
    <string name="auto_start_radio">بدء تشغيل الراديو تلقائيًا</string>
    <string name="auto_start_radio_summary">أضف تلقائيًا الأغاني ذات الصلة بالمسار في قائمة التشغيل، للحصول على قائمة انتظار غير محدودة</string>
    <string name="cache_size">حجم ذاكرة التخزين المؤقت</string>
    <string name="cache_size_summary">الحجم بالميجابايت لتخزين الصوت والفيديو مؤقتًا</string>
    <string name="version">الإصدار</string>
    <string name="select_language">اختر اللغة</string>
    <string name="system">النظام</string>
    <string name="check_for_updates">التحقق من التحديثات</string>
    <string name="check_for_updates_summary">ابحث عن التحديثات الجديدة للتطبيق والإمتدادات، عند فتح التطبيق.</string>
    <string name="install">ثبت</string>
    <string name="app">التطبيق</string>
    <string name="file">ملف</string>
    <string name="installation_type">نوع التثبيت</string>
    <string name="installation_type_summary">سيسمح تثبيت التطبيق بفتح الروابط التالية في Echo:</string>
    <string name="installation_type_warning">غير متاح إذا قمت بتثبيت الامتداد كملف.</string>
    <string name="could_not_find_the_file">تعذر العثور على الملف.</string>
    <string name="extension_installer">مثبت الامتداد</string>
    <string name="extension_installed_successfully">تم تثبيت الامتداد بنجاح.</string>
    <string name="extension_uninstalled_successfully">تم إلغاء تثبيت الامتداد بنجاح.</string>
    <string name="allow_opening_links">السماح بفتح الروابط</string>
    <string name="open_links_instruction">لفتح هذه الروابط، عليك اتباع الخطوات التالية:\n- مرر للأسفل وانقر على \"فتح افتراضيًا\"\n- انقر على \"+ إضافة رابط\"</string>
    <string name="downloading_update_for_x">جاري تنزيل التحديث لـ %1$s</string>
    <string name="extension_updated_successfully">تم تحديث %1$s بنجاح</string>
    <string name="link">رابط</string>
    <string name="link_or_code">الرابط أو كود</string>
    <string name="list_is_empty">القائمة فارغة</string>
    <string name="extension_installed">%1$s (تم التثبيت)</string>
    <string name="add_extensions">إضافة امتدادات</string>
    <string name="invalid_extension_list">قائمة امتدادات غير صالحة</string>
    <string name="checking_for_updates">تحقق من التحديثات</string>
    <string name="look_and_feel">الشكل والتخصيص</string>
    <string name="ui">واجهة المستخدم</string>
    <string name="theme">الشكل</string>
    <string name="theme_summary">الا تهتم لتغيير الشكل؟</string>
    <string name="custom_theme_color">تخصيص لون الشكل</string>
    <string name="custom_theme_color_summary">استخدم لونًا مخصصًا للسمة، بدلاً من سمة النظام.</string>
    <string name="add_color">إضافة لون</string>
    <string name="custom_colors">الألوان المخصصة</string>
    <string name="amoled">أموليد</string>
    <string name="amoled_summary">أسود قاتم، أسود نقي</string>
    <string name="navbar_gradient">شريط التنقل المتدرج</string>
    <string name="navbar_gradient_summary">شريط التنقل يصبح شفافًا تدريجيًا</string>
    <string name="dynamic_player">لون المشغل الديناميكي</string>
    <string name="dynamic_player_summary">طبق اللون الخاص بغلاف الاغنية المشغلة على المشغل</string>
    <string name="show_background">إظهار الخلفية</string>
    <string name="show_background_summary">فيديو الخلفية او الغلاف الضبابي الخاص بالاغنية على المشغل</string>
    <string name="animation">حركات</string>
    <string name="back_animations">تنقلات الرجوع للخلف</string>
    <string name="back_animations_summary">قد يتسبب ذلك في حدوث خلل بصري بسبب نظام Android، ولكن يمكنك فقط فتح التطبيقات الأخيرة لإصلاحه.</string>
    <string name="animations">تنقلات</string>
    <string name="enabled">مفعل</string>
    <string name="disabled">معطل</string>
    <string name="error_updating_extension">حدث خطأ اثناء التحديث</string>
    <string name="no_user_found">اسم المستخدم غير موجود</string>
    <string name="select_x_account">اختر %1$s الحساب</string>
    <string name="add_extension">اضافة امتداد</string>
    <string name="webview">عارض الويب</string>
    <string name="logout">تسجيل الخروج</string>
    <string name="switch_account">تبديل الحساب</string>
    <string name="incognito">تصفح مخفي</string>
    <string name="not_logged_in">لم يتم تسجيل الدخول</string>
    <string name="x_login">%1$s تسجيل الدخول</string>
    <string name="x_is_required">%1$s مطلوب</string>
    <string name="regex_invalid">%1$s غير صالح، المرجو اتباع التعابير النمطية: %2$s</string>
    <string name="playing_from">يشغل من خلالـ</string>
    <string name="up_next">اعلى التالي</string>
    <string name="info">معلومات</string>
    <string name="seekbar">شريط التتبع</string>
    <string name="shuffle">تشغيل عشوائي</string>
    <string name="previous">السابق</string>
    <string name="play">تشغيل</string>
    <string name="next">التالي</string>
    <string name="repeat">اعد التشغيل</string>
    <string name="close">اغلق</string>
    <string name="no_lyrics">لا توجد كلمات</string>
    <string name="sleep_timer">مؤقت النوم</string>
    <string name="end_of_track">نهاية الاغنية</string>
    <string name="_15min">15 دقيقة</string>
    <string name="_30min">30د</string>
    <string name="_45min">45د</string>
    <string name="_1hr">1س</string>
    <string name="_2hr">2س</string>
    <string name="sleep_timer_desc">قم بتحديد مؤقت النوم لايقاف الصوت بعد مدة معينة</string>
    <string name="sleep_on_specific_time">النوم على وقت محدد</string>
    <string name="sleep_timer_cancelled">مؤقت النوم تم ايقافه</string>
    <string name="sleep_timer_set_for">مؤقت النوم تم اعداده لـ%1$s</string>
    <string name="search_x">البحث %1$s</string>
    <string name="n_hours">%1$d ساعات</string>
    <plurals name="number_hour">
        <item quantity="zero">%1$d ساعة</item>
        <item quantity="one">%1$d ساعة</item>
        <item quantity="two">%1$d ساعتين</item>
        <item quantity="few">%1$d ساعات</item>
        <item quantity="many">%1$d ساعات</item>
        <item quantity="other">%1$d ساعة</item>
    </plurals>
    <string name="n_minutes">%1$d دقائق</string>
    <plurals name="number_min">
        <item quantity="zero">%1$d دقيقة</item>
        <item quantity="one">%1$d دقيقة</item>
        <item quantity="two">%1$d دقيقتان</item>
        <item quantity="few">%1$d دقائق</item>
        <item quantity="many">%1$d دقائق</item>
        <item quantity="other">%1$d دقائق</item>
    </plurals>
    <string name="servers">سيرفورات</string>
    <string name="sources">مصادر</string>
    <string name="backgrounds">خلفيات</string>
    <string name="subtitles">الترجمة</string>
    <string name="audio_selection">اختيار الصوت</string>
    <string name="video_selection">اختيار الفيديو</string>
    <string name="subtitle_selection">اختيار الترجمة</string>
    <string name="quality_selection">اختيار الجودة</string>
    <string name="quality_x">%1$d الجودة</string>
    <string name="off">متوقف</string>
    <string name="unknown_quality">جودة غير معروفة</string>
    <string name="so_empty">فارغ جدا…</string>
    <string name="not_loading">لا يتم التحميل</string>
    <string name="share">مشاركة</string>
    <string name="sharing_x">مشاركة %1$s</string>
    <string name="save_to_library">حفظ في المكتبة</string>
    <string name="saved_x_to_library">تم حفظ%1$s في المكتبة</string>
    <string name="remove_from_library">ازل من المكتبة</string>
    <string name="removed_x_from_library">تمت ازالة %1$s من المكتبة</string>
    <string name="radio">راديو</string>
    <string name="download">تنزيل</string>
    <string name="follow">متابعة</string>
    <string name="following_x">متابع %1$s</string>
    <string name="followed_x">تمت المتابعة %1$s</string>
    <string name="unfollow">الغاء المتابعة</string>
    <string name="unfollowing_x">الغاء متابعة %1$s</string>
    <string name="unfollowed_x">تم الغاء المتابعة %1$s</string>
    <string name="liking_x">اعجاب %1$s</string>
    <string name="liked_x">معجب %1$s</string>
    <string name="unliking_x">غير معجب %1$s</string>
    <string name="unliked_x">الغاء الاعجاب %1$s</string>
    <string name="hiding_x">اخفاء %1$s</string>
    <string name="unhiding_x">ازالة الاخفاء %1$s</string>
    <string name="hidden_x">مخفي %1$s</string>
    <string name="unhidden_x">غير مخفي %1$s</string>
    <string name="save_to_playlist">حفظ لقائمة التشغيل</string>
    <string name="delete_playlist">حذف قائمة التشغيل</string>
    <string name="add_to_next">اضافة للتالي</string>
    <string name="add_to_queue">اضافة لقائمة الانتظار</string>
    <string name="loading_radio_for_x">جاري تحميل الراديو %1$s</string>
    <string name="playing_x">تشغيل %1$s</string>
    <string name="adding_x_to_queue">اضافة %1$s لقائمة الانتظار</string>
    <string name="adding_x_to_next">اضافة %1$s للتالي</string>
    <string name="background_gradient">خلفية متدرجة</string>
    <string name="background_gradient_summary">خلفية لون متدرجة تعتمد على السياق</string>
    <string name="all">الكل</string>
    <string name="edit_playlist">تعديل قائمة التشغيل</string>
    <string name="more_brain_capacity">المزيد من مساحة المخ</string>
    <string name="more_brain_capacity_summary">تفعيل هذا، يمكن أن يساعد في إصلاح تأخر الصوت وزيادة استهلاك البطارية (يعطّل ميزة نقل الصوت خارج المعالج).</string>
    <string name="track">اغنيه</string>
    <string name="tracks">اغاني</string>
    <string name="sort">فرز</string>
    <string name="explicit">غير منقحة</string>
    <string name="x_plays">%1$s مرة تشغيل</string>
    <string name="x_followers">%1$s متابع</string>
    <string name="n_songs">%1$d اغنية</string>
    <string name="n_episodes">%1$d حلقات</string>
    <string name="n_chapters">%1$d فصول</string>
    <string name="n_tracks">%1$d اغاني</string>
    <plurals name="number_songs">
        <item quantity="zero">%1$d اغنية</item>
        <item quantity="one">%1$d اغنية</item>
        <item quantity="two">%1$d اغنيتان</item>
        <item quantity="few">%1$d اغنيات</item>
        <item quantity="many">%1$d اغاني</item>
        <item quantity="other">%1$d اغنية</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="zero">%1$d حلقة</item>
        <item quantity="one">%1$d حلقة</item>
        <item quantity="two">%1$d حلقتان</item>
        <item quantity="few">%1$d حلقات</item>
        <item quantity="many">%1$d حلقة</item>
        <item quantity="other">%1$d حلقة</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="zero">%1$d فصل</item>
        <item quantity="one">%1$d فصل</item>
        <item quantity="two">%1$d فصلان</item>
        <item quantity="few">%1$d فصول</item>
        <item quantity="many">%1$d فصلا</item>
        <item quantity="other">%1$d فصلا</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="zero">%1$d اغنية</item>
        <item quantity="one">%1$d اغنية</item>
        <item quantity="two">%1$d اغنيتان</item>
        <item quantity="few">%1$d اغنيات</item>
        <item quantity="many">%1$d اغنية</item>
        <item quantity="other">%1$d اغنية</item>
    </plurals>
    <string name="shuffling_x">يشغل عشوائيا %1$s</string>
    <string name="copying_the_error">انسخ الخطأ</string>
    <string name="sort_and_filter">فرز وترتيب</string>
    <string name="filter">ترتيب</string>
    <string name="reversed">معكوس</string>
    <string name="apply">تطبيق</string>
    <string name="save">حفظ</string>
    <string name="unsave">ازالة الحفظ</string>
    <string name="sort_title">عنوان</string>
    <string name="sort_date">تاريخ</string>
    <string name="sort_date_added">تاريخ الاضافة</string>
    <string name="sort_duration">المدة</string>
    <string name="sort_subtitle">ترجمة</string>
    <string name="scroll_animations">انتقالات التصفح</string>
    <string name="scroll_animations_summary">انتقالات عندما تتصفح الاشياء</string>
    <string name="delete">قم بالحذف</string>
    <string name="playlist_name">اسم قائمة التشغيل</string>
    <string name="playlist_description">وصف قائمة التشغيل</string>
    <string name="create_playlist">انشاء قائمة التشغيل</string>
    <string name="create">انشاء</string>
    <string name="add_song">اضافة اغنية</string>
    <string name="creating_x">انشاء %1$s</string>
    <string name="playlist_name_empty">اسم قائمة التشغيل فارغ</string>
    <string name="x_created">%1$s تم انشاء</string>
    <string name="deleting_x">حذف %1$s</string>
    <string name="deleted_x">تم حذف %1$s</string>
    <string name="loading_x">يتم تحميل %1s</string>
    <string name="saving_x">يتم حفظ %1$s</string>
    <string name="saved_to_x">تم الحفظ في %1$s</string>
    <string name="saved_to_playlists">تم الحفظ في قوائم التشغيل</string>
    <string name="selected_n">اختيار %1$d</string>
    <string name="adding_x">اضافة %1$s</string>
    <string name="moving_x">نقل %1$s</string>
    <string name="removing_x">ازالة %1$s</string>
    <string name="no_download_extension">لم يتم العثور على امتداد للتحميل، استخدم الكود \"echodown\" للحصول عليه.</string>
    <string name="nothing_to_download_in_x">لا يوجد شيء للتحميل في %1$s</string>
    <string name="download_started">ابتدأ التحميل</string>
    <string name="merging_x">دمج %1$s</string>
    <string name="tagging_x">وسم %1$s</string>
    <string name="apply_player_color_to_app">طبق لون المشغل على التطبيق بالكامل</string>
    <string name="apply_player_color_to_app_summary">انذار بالتعليق!!!</string>
    <string name="delete_download">احذف التحميل</string>
    <string name="removed_x_from_downloads">ازالة %1$s من قائمة التحميل</string>
    <string name="download_complete">اكتمل التحميل</string>
    <string name="app_widget_description">ايكو على شاشتك الرئيسية!</string>
    <string name="opening_webview_x">افتح المتصفح: %1$s</string>
    <string name="no_update_available_for_x">لا يوجد تحديث متوفر لـ %1$s</string>
    <string name="other">آخر</string>
    <string name="player">مشغل</string>
    <string name="about">حول</string>
    <string name="language_x">لغة: %1$s</string>
    <string name="guide">توجيهات استخدام</string>
    <string name="donate">قم بالتبرع</string>
    <string name="contributors">المساهمون</string>
    <string name="app_desc">مجرد مشغل موسيقى.</string>
    <string name="manage">ادارة</string>
    <string name="no_account">لا يوجد حساب</string>
    <string name="other_settings">اعدادات اخرى</string>
    <string name="no_x_found">لم يعثر على %1$s</string>
    <string name="playlist">قائمة التشغيل</string>
    <string name="album">البوم</string>
    <string name="pre_release">اصدار مسبق</string>
    <string name="single">سينجل</string>
    <string name="ep">اي بي</string>
    <string name="lp">ال بي</string>
    <string name="compilation">تجميعة</string>
    <string name="show">عرض</string>
    <string name="book">كتاب</string>
    <string name="song">اغنية</string>
    <string name="podcast">بودكاست</string>
    <string name="video">فيديو</string>
    <string name="isrc_x">اي اس ار سي %1$s</string>
    <string name="genres_x">النوع الموسيقي: %1$s</string>
    <string name="disc_number_n">ترقيم الشريط: %1$d</string>
    <string name="album_order_n">ترقيم الالبوم: %1$d</string>
    <string name="confirmation">التأكيد</string>
    <string name="delete_playlist_confirmation">هل انت متأكد من رغبتك في حذف %1$s؟</string>
    <string name="confirm">تأكيد</string>
    <string name="big_cover">اغلفة اكبر</string>
    <string name="big_cover_summary">جيدة للاجهزة ذات حجم الشاشة الاكبر</string>
    <string name="unhide">اظهار</string>
    <string name="hide">اخفاء</string>
    <string name="no_last_played_track_found">لا وجود لاخر اغنية تم تشغيلها.</string>
    <string name="not_yet_released">لم يتم اصداره بعد</string>
    <string name="releases_on_x">سيتم اصداره في %1$s</string>
    <string name="unavailable_in_your_region">غير متوفر في منطقتك</string>
    <string name="not_playable_x">غير قابل للتشغيل: %1$s</string>
    <string name="animations_summary">هل تشعر بتلعثم شديد؟ قد يساعدك إيقاف هذا</string>
    <string name="refresh">تحديث</string>
    <string name="x_disabled">%1$s (معطل)</string>
    <string name="by_x">بواسطة %1$s</string>
    <string name="music">الموسيقى</string>
    <string name="tracker">متتبع</string>
    <string name="lyrics">كلمات</string>
    <string name="misc">متنوع</string>
    <string name="x_extensions">امتدادات %1$s</string>
    <string name="x_extension">امتداد %1$s</string>
    <string name="colors">الألوان</string>
    <string name="scroll_bar">شريط التمرير</string>
    <string name="scroll_bar_summary">شريط التمرير على الجانب للوصول بشكل أسرع (قد يكون به خلل)</string>
    <string name="currently_playing">اللعب حاليا</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-as\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="loading_x">%1s ল’ড হৈ আছে</string>
    <string name="okay">ঠিক আছে</string>
    <string name="video">ভিডিঅ’</string>
    <string name="remove">আঁতৰাওক</string>
    <string name="more_by_x">%1$sৰ আৰু অধিক</string>
    <string name="x_radio">%1$s ৰেডিঅ’</string>
    <string name="tabs">টেব</string>
    <string name="playlist_liked_desc">আপোনাৰ পছন্দৰ গান</string>
    <string name="repeat_one">একক ৰিপিট</string>
    <string name="logout_and_login">লগআউট আৰু লগইন</string>
    <string name="login">লগইন</string>
    <string name="error_loading_extension_from_x">%1$s পৰা এক্সটেনশ্যন লোড কৰাত ত্ৰুটি</string>
    <string name="error_x">ত্ৰুটি: %1$s</string>
    <string name="value_not_set">ছেট কৰা নাই</string>
    <string name="behavior">বিহেভিয়াৰ</string>
    <string name="theme">থিম</string>
    <string name="x_disabled">%1$s (ডিজেবল্ড)</string>
    <string name="x_extensions">%1$s এক্সটেনশ্যনসমূহ</string>
    <string name="x_extension">%1$s এক্সটেনশ্যন</string>
    <string name="error_updating_extension">আপডেট কৰোঁতে ত্ৰুটি</string>
    <string name="x_login">%1$s লগইন</string>
    <string name="sleep_timer_cancelled">চ্লিপ টাইমাৰ কেনছেল কৰা হ’ল</string>
    <string name="search_x">%1$s চাৰ্চ কৰক</string>
    <string name="off">অফ</string>
    <string name="so_empty">বৰ খালী…</string>
    <string name="removed_x_from_library">%1$s লাইব্ৰেৰীৰ পৰা আঁতৰোৱা হ’ল</string>
    <string name="hiding_x">%1$s হাইড কৰা হৈছে</string>
    <string name="unhiding_x">%1$s আনহাইড কৰা হৈছে</string>
    <string name="add_to_next">নেক্সটত যোগ কৰক</string>
    <string name="background_gradient_summary">কণ্টেক্সটৰ ওপৰত নিৰ্ভৰ কৰি বেকগ্ৰাউণ্ডত ৰঙৰ গ্ৰেডিয়েণ্ট</string>
    <string name="reversed">ৰিভাৰ্চ</string>
    <string name="apply">এপ্লাই</string>
    <string name="scroll_animations">স্ক্ৰল এনিমেশ্যন</string>
    <string name="delete">ডিলিট</string>
    <string name="selected_n">ছিলেক্ট কৰা %1$d</string>
    <string name="adding_x">%1$s যোগ কৰা হৈছে</string>
    <string name="moving_x">%1$s মুভ কৰা হৈছে</string>
    <string name="merging_x">%1$s মাৰ্জ কৰা হৈছে</string>
    <string name="x_permission_required">%1$s পাৰ্মিছনৰ প্ৰয়োজন</string>
    <string name="x_was_not_granted">%1$s দিয়া হোৱা নাই</string>
    <string name="audio_permission_summary">আপোনাৰ স্থানীয় মিউজিক লাইব্ৰেৰীত প্ৰৱেশৰ বাবে</string>
    <string name="cancel">কেনছেল</string>
    <string name="back">পিছলৈ</string>
    <string name="audio">অডিঅ’</string>
    <string name="songs">গানসমূহ</string>
    <string name="albums">এলবামসমূহ</string>
    <string name="cached_songs">কেশ্ব কৰা গান</string>
    <string name="read_storage">ষ্ট’ৰেজ পঢ়ক</string>
    <string name="write_storage">ষ্ট’ৰেজ লিখক</string>
    <string name="x_is_required">%1$sৰ প্ৰয়োজন</string>
    <string name="write_storage_permission_summary">স্থানীয় প্লেলিষ্ট সৃষ্টি আৰু সম্পাদনাৰ বাবে</string>
    <string name="notifications">নোটিফিকেশ্যন</string>
    <string name="artists">শিল্পী</string>
    <string name="recently_added">শেহতীয়াকৈ যোগ কৰা</string>
    <string name="refresh_library_on_reload">পুনৰ লোডত লাইব্ৰেৰী ৰিফ্ৰেশ কৰক</string>
    <string name="refresh_library_on_reload_summary">প্ৰতিবাৰ ফিড লোড হোৱাৰ সময়ত ডিভাইচ স্কেন কৰক</string>
    <string name="duration_filter">সময় ফিল্টাৰ</string>
    <string name="duration_filter_summary">নিৰ্দিষ্ট মানতকৈ কম সময়ৰ (ছেকেণ্ডত) অডিঅ’ ফাইল ফিল্টাৰ কৰক</string>
    <string name="blacklist_folders">ব্লেকলিষ্ট ফ’ল্ডাৰ</string>
    <string name="blacklist_folders_summary">লাইব্ৰেৰীৰ পৰা বাদ দিবলগীয়া ফ’ল্ডাৰ</string>
    <string name="blacklist_folder_keywords">ব্লেকলিষ্ট ফ’ল্ডাৰৰ কীৱৰ্ড</string>
    <string name="blacklist_folder_keywords_summary">ফ’ল্ডাৰ ব্লেকলিষ্ট কৰিবলৈ কীৱৰ্ড, কমাৰে পৃথক কৰক</string>
    <string name="saved">ছেভ কৰা হ’ল</string>
    <string name="show_tabs">টেব দেখুৱাওক</string>
    <string name="show_tab_summary">এক্সটেনশ্যনৰ টেবসমূহক কেটেগৰী হিচাপে দেখুৱাব</string>
    <string name="unknown">অজান</string>
    <string name="like">লাইক</string>
    <string name="unlike">আনলাইক</string>
    <string name="home">হোম</string>
    <string name="search">চাৰ্চ</string>
    <string name="library">লাইব্ৰেৰী</string>
    <string name="more">অধিক</string>
    <string name="extension">এক্সটেনশ্যন</string>
    <string name="downloading_x">%1$s ডাউনলোড হৈ আছে</string>
    <string name="cancel_all">সকলো কেনছেল কৰক</string>
    <string name="download_progress">ডাউনলোডৰ প্ৰগ্ৰেছ</string>
    <string name="downloads">ডাউনলোডসমূহ</string>
    <string name="downloaded_x">%1$s ডাউনলোড কৰা হ’ল</string>
    <string name="view">চাওক</string>
    <string name="extension_out_of_date">আপডেট নোহোৱা</string>
    <string name="no_internet">ইণ্টাৰনেট নাই</string>
    <string name="str_copy">কপি</string>
    <string name="extensions">এক্সটেনশ্যনসমূহ</string>
    <string name="choose_a_color">এটা ৰং বাছক</string>
    <string name="random">ৰেণ্ডম</string>
    <string name="add">যোগ কৰক</string>
    <string name="loading">লোডিং…</string>
    <string name="settings">ছেটিং</string>
    <string name="value">মান</string>
    <string name="playback">প্লেবেক</string>
    <string name="audio_fx">অডিঅ’ ইফেক্ট</string>
    <string name="audio_fx_summary">সকলো গানৰ বাবে প্ৰয়োগ কৰা ইফেক্ট</string>
    <string name="audio_fx_desc">বৰ্তমানৰ গানৰ বাবে অডিঅ’ ইফেক্ট সলনি কৰক।</string>
    <string name="reset">ৰিছেট</string>
    <string name="playback_speed">প্লেবেকৰ গতি</string>
    <string name="change_pitch_with_speed">গতিৰ সৈতে পিচ সলনি কৰক</string>
    <string name="bass_boost">বেছ বুষ্ট</string>
    <string name="bass_boost_desc">অধিক মানে শব্দ বিকৃত হ’ব পাৰে।</string>
    <string name="change_pitch_with_speed_desc">গতিৰ সৈতে পিচ সলনি কৰি লাহে শব্দ পাওক</string>
    <string name="equalizer">ইকুৱালাইজাৰ</string>
    <string name="equalizer_summary">ডিভাইচৰ ইকুৱালাইজাৰ ছেটিং খোলক</string>
    <string name="stream_quality">ষ্ট্ৰীমৰ কোৱালিটি</string>
    <string name="stream_quality_summary">ষ্ট্ৰীমৰ ডিফল্ট কোৱালিটি বাছক</string>
    <string name="keep_queue">প্লেয়াৰৰ কিউ ৰাখক</string>
    <string name="keep_queue_summary">এপ পুনৰ খোলাৰ সময়ত প্লেয়াৰৰ কিউ পুনৰুদ্ধাৰ কৰক।</string>
    <string name="stop_player">প্লেয়াৰ ষ্টপ কৰক</string>
    <string name="stop_player_summary">এপক ৰিচেণ্টৰ পৰা আঁতৰোৱাৰ সময়ত প্লেয়াৰ ষ্টপ কৰক</string>
    <string name="skip_silence">চাইলেঞ্চ এৰি যাওক</string>
    <string name="skip_silence_summary">গানৰ নীৰৱ অংশ এৰি ফাঁকবিহীন প্লেবেক প্ৰদান কৰক।</string>
    <string name="auto_start_radio">অটো ষ্টাৰ্ট ৰেডিঅ’</string>
    <string name="auto_start_radio_summary">প্লেলিষ্টত গানৰ সম্পৰ্কিত গান অটোমেটিকভাৱে যোগ কৰক, যাতে ইনফিনিট কিউ থাকে</string>
    <string name="cache_size">কেশ্বৰ চাইজ</string>
    <string name="cache_size_summary">অডিঅ’ আৰু ভিডিঅ’ কেশ্বৰ বাবে MBত চাইজ</string>
    <string name="version">ভাৰ্চন</string>
    <string name="system">চিষ্টেম</string>
    <string name="notifications_permission_summary">ডাউনলোড আৰু মিউজিকৰ বাবে নোটিফিকেশ্যন দেখুৱাবলৈ</string>
    <string name="install">ইনষ্টল কৰক</string>
    <string name="app">এপ</string>
    <string name="file">ফাইল</string>
    <string name="installation_type">ইনষ্টলেশ্যনৰ টাইপ</string>
    <string name="installation_type_summary">এপ ইনষ্টলেশ্যনে তলৰ লিংকবোৰ Echoত খোলাৰ পাৰ্মিছন দিব:</string>
    <string name="installation_type_warning">যদি আপুনি এক্সটেনশ্যন ফাইল হিচাপে ইনষ্টল কৰে তেন্তে উপলব্ধ নহয়।</string>
    <string name="could_not_find_the_file">ফাইলটো বিচাৰি পোৱা নগ’ল।</string>
    <string name="extension_installer">এক্সটেনশ্যন ইনষ্টলাৰ</string>
    <string name="extension_installed_successfully">এক্সটেনশ্যন সফলভাৱে ইনষ্টলড কৰা হ’ল।</string>
    <string name="extension_uninstalled_successfully">এক্সটেনশ্যন সফলভাৱে আনইনষ্টলড কৰা হ’ল।</string>
    <string name="allow_opening_links">লিংক খোলাৰ পাৰ্মিছন দিয়ক</string>
    <string name="unified_liked_playlist_summary">বিভিন্ন এক্সটেনশ্যনৰ পৰা আপোনাৰ পছন্দৰ গান</string>
    <string name="n_items">%1$d আইটেম</string>
    <string name="playlist_liked">পছন্দ কৰা</string>
    <string name="repeat_off">ৰিপিট অফ</string>
    <string name="repeat_all">সকলো ৰিপিট</string>
    <string name="extension_x_not_found">এক্সটেনশ্যন %1$s পোৱা নগ’ল</string>
    <string name="required_extensions_missing_x">প্ৰয়োজনীয় এক্সটেনশ্যন অনুপস্থিত: %1$s</string>
    <string name="x_login_required">%1$s লগইনৰ প্ৰয়োজন</string>
    <string name="x_is_not_supported_in_x">%1$s %2$sত সমৰ্থিত নহয়</string>
    <string name="account_session_expired_in_x">%1$sত একাউণ্টৰ ছেছনৰ ম্যাদ উকলি গ’ল</string>
    <string name="by_x">%1$s দ্বাৰা</string>
    <string name="select_x_account">%1$s একাউণ্ট বাছক</string>
    <string name="servers">চাৰ্ভাৰ</string>
    <string name="quality_selection">কোৱালিটি ছিলেকশ্যন</string>
    <string name="quality_x">কোৱালিটি %1$d</string>
    <string name="unknown_quality">অজান কোৱালিটি</string>
    <string name="sharing_x">%1$s শ্বেয়াৰ কৰা হৈছে</string>
    <string name="saved_x_to_library">%1$s লাইব্ৰেৰীত ছেভ কৰা হ’ল</string>
    <string name="open_links_instruction">এই লিংকবোৰ খোলাৰ পাৰ্মিছন দিবলৈ, আপুনি:\n- তললৈ স্ক্ৰল কৰি “ডিফল্টভাৱে খোলক”ত ক্লিক কৰক\n- “+ লিংক যোগ কৰক”ত ক্লিক কৰক</string>
    <string name="extension_updated_successfully">%1$s সফলভাৱে আপডেট কৰা হ’ল</string>
    <string name="link">লিংক</string>
    <string name="link_or_code">লিংক বা ক’ড</string>
    <string name="list_is_empty">লিষ্ট খালী</string>
    <string name="following_x">%1$s ফ’ল’ কৰা হৈছে</string>
    <string name="extension_installed">%1$s (ইনষ্টলড)</string>
    <string name="add_extensions">এক্সটেনশ্যনসমূহ যোগ কৰক</string>
    <string name="invalid_extension_list">ইনভেলিড এক্সটেনশ্যন লিষ্ট</string>
    <string name="followed_x">%1$s ফ’ল’ কৰা হ’ল</string>
    <string name="unfollowing_x">%1$s আনফ’ল’ কৰা হৈছে</string>
    <string name="look_and_feel">লুক এণ্ড ফিল</string>
    <string name="ui">ইউআই</string>
    <string name="theme_summary">অন্ধ হ’ব বিচাৰে?</string>
    <string name="custom_theme_color">কাষ্টম থিম ৰং</string>
    <string name="unfollowed_x">%1$s আনফ’ল’ কৰা হ’ল</string>
    <string name="liking_x">%1$s লাইক কৰা হৈছে</string>
    <string name="liked_x">%1$s লাইক কৰা হ’ল</string>
    <string name="unliking_x">%1$s আনলাইক কৰা হৈছে</string>
    <string name="unliked_x">%1$s আনলাইক কৰা হ’ল</string>
    <string name="loading_radio_for_x">%1$s বাবে ৰেডিঅ’ লোড হৈছে</string>
    <string name="playing_x">%1$s প্লে হৈছে</string>
    <string name="adding_x_to_queue">%1$s কিউত যোগ কৰা হৈছে</string>
    <string name="custom_theme_color_summary">চিষ্টেম থিমৰ পৰিবৰ্তে কাষ্টম থিমৰ ৰং ব্যৱহাৰ কৰক।</string>
    <string name="add_color">ৰং যোগ কৰক</string>
    <string name="custom_colors">কাষ্টম ৰং</string>
    <string name="amoled">এমোলেড</string>
    <string name="amoled_summary">পিচ ব্লেক, পিওৰ ব্লেক</string>
    <string name="navbar_gradient">গ্ৰেডিয়েণ্ট নেভবাৰ</string>
    <string name="adding_x_to_next">%1$s নেক্সটত যোগ কৰা হৈছে</string>
    <string name="navbar_gradient_summary">নেভবাৰ ক্ৰমান্বয়ে ট্ৰান্সপাৰেণ্ট হৈ পৰে</string>
    <string name="dynamic_player">ডাইনামিক প্লেয়াৰ ৰং</string>
    <string name="background_gradient">বেকগ্ৰাউণ্ড গ্ৰেডিয়েণ্ট</string>
    <string name="all">অল</string>
    <string name="more_brain_capacity">ম’ৰ ব্ৰেইন কেপাচিটি</string>
    <string name="dynamic_player_summary">গানৰ আৰ্টৱৰ্কৰ ওপৰত ভিত্তি কৰি প্লেয়াৰত ৰং এপ্লাই কৰক</string>
    <string name="show_background">বেকগ্ৰাউণ্ড দেখুৱাওক</string>
    <string name="show_background_summary">প্লেয়াৰত গানৰ বেকগ্ৰাউণ্ড ভিডিঅ’ বা ব্লাৰ কৰা আৰ্টৱৰ্ক</string>
    <string name="animation">এনিমেশ্যন</string>
    <string name="animations">এনিমেশ্যনসমূহ</string>
    <string name="animations_summary">বেছি ষ্টাটাৰ অনুভৱ কৰিছেনে? ইয়াক অফ কৰিলে হেল্প কৰিব পাৰে</string>
    <string name="refresh">ৰিফ্ৰেশ</string>
    <string name="music">মিউজিক</string>
    <string name="tracker">ট্ৰেকাৰ</string>
    <string name="lyrics">লিৰিক্স</string>
    <string name="misc">মিচলেনিয়াছ</string>
    <string name="enabled">এনেবল কৰা</string>
    <string name="disabled">ডিজেবল কৰা</string>
    <string name="no_user_found">কোনো ইউজাৰ পোৱা নগ’ল</string>
    <string name="add_extension">এক্সটেনশ্যন যোগ কৰক</string>
    <string name="webview">ৱেবভিউ</string>
    <string name="logout">লগআউট</string>
    <string name="switch_account">একাউণ্ট চুইচ কৰক</string>
    <string name="incognito">ইনকগনিটো</string>
    <string name="not_logged_in">লগইন কৰা নাই</string>
    <string name="playing_from">ইয়াৰ পৰা প্লে হৈছে</string>
    <string name="up_next">আপ নেক্সট</string>
    <string name="info">ইনফ’</string>
    <string name="seekbar">চিকবাৰ</string>
    <string name="shuffle">শ্বাফল</string>
    <string name="previous">প্ৰিভিয়াছ</string>
    <string name="play">প্লে</string>
    <string name="next">নেক্সট</string>
    <string name="repeat">ৰিপিট</string>
    <string name="close">ক্ল’জ</string>
    <string name="no_lyrics">লিৰিক্স নাই</string>
    <string name="sleep_timer">চ্লিপ টাইমাৰ</string>
    <string name="end_of_track">ট্ৰেকৰ শেষ</string>
    <string name="_15min">১৫ মিনিট</string>
    <string name="_30min">৩০ মিনিট</string>
    <string name="_45min">৪৫ মিনিট</string>
    <string name="_1hr">১ ঘণ্টা</string>
    <string name="_2hr">২ ঘণ্টা</string>
    <string name="sleep_timer_desc">নিৰ্দিষ্ট সময়ৰ পিছত প্লেবেক ষ্টপ কৰিবলৈ চ্লিপ টাইমাৰ ছেট কৰক</string>
    <string name="sleep_on_specific_time">নিৰ্দিষ্ট সময়ত চ্লিপ</string>
    <string name="sleep_timer_set_for">%1$s বাবে চ্লিপ টাইমাৰ ছেট কৰা হ’ল</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d ঘণ্টা</item>
        <item quantity="other">%1$d ঘণ্টাসমূহ</item>
    </plurals>
    <plurals name="number_min">
        <item quantity="one">%1$d মিনিট</item>
        <item quantity="other">%1$d মিনিট</item>
    </plurals>
    <string name="sources">ছ’ৰ্চ</string>
    <string name="backgrounds">বেকগ্ৰাউণ্ড</string>
    <string name="subtitles">ছাবটাইটেলসমুহ</string>
    <string name="audio_selection">অডিঅ’ ছিলেকশ্যন</string>
    <string name="video_selection">ভিডিঅ’ ছিলেকশ্যন</string>
    <string name="subtitle_selection">ছাবটাইটেল ছিলেকশ্যন</string>
    <string name="not_loading">লোড হৈ আছে</string>
    <string name="share">শ্বেয়াৰ</string>
    <string name="save_to_library">লাইব্ৰেৰীত ছেভ কৰক</string>
    <string name="remove_from_library">লাইব্ৰেৰীৰ পৰা আঁতৰাওক</string>
    <string name="radio">ৰেডিঅ’</string>
    <string name="download">ডাউনলোড</string>
    <string name="follow">ফ’ল’</string>
    <string name="unfollow">আনফ’ল’</string>
    <string name="hide">হাইড</string>
    <string name="unhide">আনহাইড</string>
    <string name="save_to_playlist">প্লেলিষ্টত ছেভ কৰক</string>
    <string name="delete_playlist">প্লেলিষ্ট ডিলিট কৰক</string>
    <string name="add_to_queue">কিউত যোগ কৰক</string>
    <string name="edit_playlist">প্লেলিষ্ট এডিট কৰক</string>
    <string name="sort">চৰ্ট</string>
    <string name="explicit">এক্সপ্লিচিট</string>
    <string name="save">ছেভ</string>
    <string name="sort_title">টাইটেল</string>
    <string name="sort_date">ডেট</string>
    <string name="sort_duration">ডিউৰেশ্যন</string>
    <string name="sort_subtitle">ছাবটাইটেল</string>
    <string name="playlist_name">প্লেলিষ্টৰ নাম</string>
    <string name="playlist_description">প্লেলিষ্টৰ বৰ্ণনা</string>
    <string name="create_playlist">প্লেলিষ্ট সৃষ্টি কৰক</string>
    <string name="create">সৃষ্টি</string>
    <string name="playlist_name_empty">প্লেলিষ্টৰ নাম খালী</string>
    <string name="saved_to_playlists">প্লেলিষ্টত ছেভ কৰা হ’ল</string>
    <string name="nothing_to_download_in_x">%1$sত ডাউনলোড কৰিবলৈ একো নাই</string>
    <string name="download_started">ডাউনলোড ষ্টাৰ্ট হৈছে</string>
    <string name="cache_playlist_warning">পৰীক্ষামূলক ফিচাৰ। শুনাৰ বাহিৰে আন কোনো কাৰ্য সমৰ্থিত নহয়।</string>
    <string name="no_download_extension">কোনো ডাউনলোড এক্সটেনশ্যন পোৱা নগ’ল, “echodown” ক’ড ব্যৱহাৰ কৰক।</string>
    <string name="x_plays">%1$s প্লে</string>
    <string name="x_followers">%1$s ফ’ল’ৱাৰ</string>
    <string name="shuffling_x">%1$s শ্বাফল কৰা হৈছে</string>
    <string name="copying_the_error">ত্ৰুটি কপি কৰা হৈছে</string>
    <string name="sort_and_filter">চৰ্ট আৰু ফিল্টাৰ</string>
    <string name="filter">ফিল্টাৰ</string>
    <string name="scroll_animations_summary">স্ক্ৰল কৰোঁতে এনিমেশ্যন</string>
    <string name="add_song">গান যোগ কৰক</string>
    <string name="creating_x">%1$s ক্ৰিয়েট কৰা হৈছে</string>
    <string name="x_created">%1$s সৃষ্টি কৰা হ’ল</string>
    <string name="deleting_x">%1$s ডিলিট কৰা হৈছে</string>
    <string name="deleted_x">%1$s ডিলিট কৰা হ’ল</string>
    <string name="saving_x">%1$s ছেভ কৰা হৈছে</string>
    <string name="saved_to_x">%1$sত ছেভ কৰা হ’ল</string>
    <string name="removing_x">%1$s আঁতৰোৱা হৈছে</string>
    <string name="tagging_x">%1$s টেগ কৰা হৈছে</string>
    <string name="more_brain_capacity_summary">ইয়াক এনেবল কৰিলে অডিঅ’ লেগ ফিক্স কৰাত হেল্প কৰিব পাৰে আৰু বেটাৰীৰ ইউজ বঢ়াব পাৰে (অডিঅ’ অফলোডিং ডিজেবল কৰে)।</string>
    <string name="downloading_update_for_x">%1$s বাবে আপডেট ডাউনলোড হৈ আছে</string>
    <string name="apply_player_color_to_app_summary">লেগ এলাৰ্ট!!!</string>
    <string name="apply_player_color_to_app">প্লেয়াৰৰ ৰং সমগ্ৰ এপত এপ্লাই কৰক</string>
    <string name="delete_download">ডাউনলোড ডিলিট কৰক</string>
    <string name="removed_x_from_downloads">ডাউনলোডৰ পৰা %1$s আঁতৰোৱা হ’ল</string>
    <string name="download_complete">ডাউনলোড কম্প্লিট</string>
    <string name="app_widget_description">আপোনাৰ হোম স্ক্ৰীনত Echo!</string>
    <string name="feed">ফিড</string>
    <string name="item">আইটেম</string>
    <plurals name="number_items">
        <item quantity="one">%1$d আইটেম</item>
        <item quantity="other">%1$d আইটেমসমূহ</item>
    </plurals>
    <string name="x_specific_quality_summary">%1$s নিৰ্দিষ্ট ষ্ট্ৰীম কোৱালিটি, ডিফল্ট ষ্ট্ৰীম কোৱালিটিৰ নিৰ্বাচনক ওৱাৰৰাইড কৰিব</string>
    <string name="unmetered_stream_quality">আনমিটাৰড ষ্ট্ৰীম কোৱালিটি</string>
    <string name="unmetered_stream_quality_summary">আনমিটাৰড নেটৱৰ্কৰ সৈতে সংযোগ থাকিলে ষ্ট্ৰীমৰ কোৱালিটি। ই ডিফল্ট ষ্ট্ৰীম কোৱালিটিক ওৱাৰৰাইড কৰিব।</string>
    <string name="select_language">ভাষা বাছক</string>
    <string name="check_for_updates">আপডেটৰ বাবে চেক কৰক</string>
    <string name="check_for_updates_summary">এপ আৰু এক্সটেনশ্যনৰ নতুন আপডেটৰ বাবে পৰীক্ষা কৰক, যেতিয়া এপ খোলা হয়।</string>
    <string name="checking_for_updates">আপডেটৰ বাবে চেক কৰা হৈ আছে</string>
    <string name="back_animations">বেক এনিমেশ্যন</string>
    <string name="back_animations_summary">এণ্ড্ৰইডৰ বাবে ভিজুৱেল বাগ হ’ব পাৰে, কিন্তু ৰিচেণ্ট খোলাৰ দ্বাৰা ঠিক কৰিব পাৰি।</string>
    <string name="regex_invalid">%1$s ইনভেলিড, অনুগ্ৰহ কৰি ৰেজেক্স ফ’ল’ কৰক: %2$s</string>
    <string name="n_hours">%1$d ঘণ্টা</string>
    <string name="n_minutes">%1$d মিনিট</string>
    <string name="hidden_x">%1$s হাইড কৰা হ’ল</string>
    <string name="unhidden_x">%1$s আনহাইড কৰা হ’ল</string>
    <string name="track">ট্ৰেক</string>
    <string name="tracks">ট্ৰেকসমূহ</string>
    <string name="n_songs">%1$d গান</string>
    <string name="n_episodes">%1$d এপিচ’ড</string>
    <string name="n_chapters">%1$d চেপ্টাৰ</string>
    <string name="n_tracks">%1$d ট্ৰেক</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d গান</item>
        <item quantity="other">%1$d গানসমূহ</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d এপিচ’ড</item>
        <item quantity="other">%1$d এপিচ’ডসমূহ</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d চেপ্টাৰ</item>
        <item quantity="other">%1$d চেপ্টাৰসমূহ</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d ট্ৰেক</item>
        <item quantity="other">%1$d ট্ৰেকসমূহ</item>
    </plurals>
    <string name="unsave">আনছেভ</string>
    <string name="sort_date_added">যোগ কৰা ডেট</string>
    <string name="opening_webview_x">ৱেবভিউ খোলা হৈছে: %1$s</string>
    <string name="no_update_available_for_x">%1$s বাবে কোনো আপডেট উপলব্ধ নাই</string>
    <string name="other">অন্যান্য</string>
    <string name="player">প্লেয়াৰ</string>
    <string name="about">এবাউট</string>
    <string name="language_x">ভাষা: %1$s</string>
    <string name="guide">গাইড</string>
    <string name="donate">ড’নেট</string>
    <string name="contributors">কণ্ট্ৰিবিউটৰ</string>
    <string name="app_desc">মাত্ৰ এটা মিউজিক প্লেয়াৰ।</string>
    <string name="manage">মেনেজ</string>
    <string name="no_account">কোনো একাউণ্ট নাই</string>
    <string name="other_settings">অন্যান্য ছেটিং</string>
    <string name="no_x_found">কোনো %1$s পোৱা নগ’ল</string>
    <string name="playlist">প্লেলিষ্ট</string>
    <string name="album">এলবাম</string>
    <string name="pre_release">প্ৰি-ৰিলিজ</string>
    <string name="single">চিংগল</string>
    <string name="ep">ইপি</string>
    <string name="lp">এলপি</string>
    <string name="compilation">কম্পাইলেশ্যন</string>
    <string name="show">শ্ব’</string>
    <string name="book">বুক</string>
    <string name="song">গান</string>
    <string name="podcast">পডকাষ্ট</string>
    <string name="isrc_x">আইএছআৰচি: %1$s</string>
    <string name="genres_x">জেনৰ: %1$s</string>
    <string name="disc_number_n">ডিস্ক নম্বৰ: %1$d</string>
    <string name="album_order_n">এলবাম অৰ্ডাৰ নম্বৰ: %1$d</string>
    <string name="confirmation">কনফাৰ্মেশ্যন</string>
    <string name="delete_playlist_confirmation">আপুনি %1$s ডিলিট কৰিবলৈ শ্বিওৰ নেকি?</string>
    <string name="confirm">কনফাৰ্ম</string>
    <string name="big_cover">বিগ কভাৰ</string>
    <string name="big_cover_summary">ডাঙৰ স্ক্ৰীনৰ ডিভাইচৰ বাবে ভাল</string>
    <string name="no_last_played_track_found">শেষৰ প্লে কৰা ট্ৰেক পোৱা নগ’ল।</string>
    <string name="not_yet_released">এতিয়াও ৰিলিজ হোৱা নাই</string>
    <string name="releases_on_x">%1$sত ৰিলিজ হ’ব</string>
    <string name="unavailable_in_your_region">আপোনাৰ ৰিজিয়নত উপলব্ধ নহয়</string>
    <string name="not_playable_x">প্লে কৰিব নোৱাৰি: %1$s</string>
    <string name="colors">ৰংবোৰ</string>
    <string name="scroll_bar">স্ক্ৰ’ল বাৰ</string>
    <string name="scroll_bar_summary">দ্ৰুত প্ৰৱেশৰ বাবে কাষৰ স্ক্ৰ’লবাৰ (গ্লিচি হ’ব পাৰে)</string>
    <string name="currently_playing">বৰ্তমান বাজি থকা</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-b+be+Latn\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">Akiej</string>
    <string name="cancel">Skasavać</string>
    <string name="back">Nazad</string>
    <string name="feed">Stužka</string>
    <string name="x_permission_required">Patrebna dazvalennie %1$s</string>
    <string name="x_was_not_granted">%1$s nie było dadziena</string>
    <string name="audio">Aŭdyjo</string>
    <string name="audio_permission_summary">Kab atrymać dostup da vašaj łakalnaj biblijateki muzyki</string>
    <string name="read_storage">Pračytać schovišča</string>
    <string name="write_storage">Zapisać u schovišča</string>
    <string name="write_storage_permission_summary">Kab stvarać albo zmianiać łakalnyja płejlisty</string>
    <string name="notifications">Paviedamlenni</string>
    <string name="notifications_permission_summary">Kab pakazać paviedamlenni dla spampavanniaŭ i muzyki</string>
    <string name="remove">Vydalić</string>
    <string name="more_by_x">Bolej ad %1$s</string>
    <string name="songs">Piesni</string>
    <string name="albums">Albomy</string>
    <string name="x_radio">Radyjo %1$s</string>
    <string name="cached_songs">Kešavanyja piesni</string>
    <string name="cache_playlist_warning">Ekspierymientalnaja funkcyja. Usio, akramia prasłuchvannia, nie padtrymlivajecca.</string>
    <string name="artists">Vykanaŭcy</string>
    <string name="recently_added">Niadaŭna dadana</string>
    <string name="refresh_library_on_reload">Adnavić biblijateku pry pierazahruzcy</string>
    <string name="refresh_library_on_reload_summary">Skanavać pryładu štoraz pry zahruzcy stužki</string>
    <string name="duration_filter">Filtr praciahłasci</string>
    <string name="duration_filter_summary">Filtravać aŭdyjofajły z praciahłasciu mienš za značennie (u siekundach)</string>
    <string name="blacklist_folders">Čorny spis tečak</string>
    <string name="blacklist_folders_summary">Tečki da vyniatku z biblijateki</string>
    <string name="blacklist_folder_keywords">Klučavyja słovy dla čornaha spisu tečak</string>
    <string name="blacklist_folder_keywords_summary">Klučavyja słovy dla tečak čornaha spisu, vykarystoŭvajcie kosku jak padzielnik</string>
    <string name="saved">Zachavanaje</string>
    <string name="tabs">Układki</string>
    <string name="show_tabs">Pakazać układki</string>
    <string name="show_tab_summary">Pakazać układki pašyrenniaŭ jak katehorii</string>
    <string name="unified_liked_playlist_summary">Vašy ŭlubionyja treki z roznych pašyrenniaŭ</string>
    <string name="n_items">%1$d elemientaŭ</string>
    <string name="item">Elemient</string>
    <plurals name="number_items">
        <item quantity="one">%1$d elemient</item>
        <item quantity="few">%1$d elemienty</item>
        <item quantity="many">%1$d elemientaŭ</item>
        <item quantity="other">%1$d elemientaŭ</item>
    </plurals>
    <string name="playlist_liked">Ulubionyja</string>
    <string name="playlist_liked_desc">Vašy ŭlubionyja treki</string>
    <string name="unknown">Nieviadoma</string>
    <string name="like">Palubić</string>
    <string name="unlike">Razlubić</string>
    <string name="repeat_one">Paŭtaryć adzin raz</string>
    <string name="repeat_off">Paŭtor vyklučany</string>
    <string name="repeat_all">Paŭtarać usio</string>
    <string name="home">Hałoŭnaja</string>
    <string name="search">Pošuk</string>
    <string name="library">Biblijateka</string>
    <string name="more">Bolš</string>
    <string name="extension">Pašyrennie</string>
    <string name="downloading_x">Spampavannie %1$s</string>
    <string name="cancel_all">Skasavać usio</string>
    <string name="download_progress">Prahres spampavannia</string>
    <string name="downloads">Spampavanni</string>
    <string name="downloaded_x">Spampavana %1$s</string>
    <string name="logout_and_login">Vychad i ŭvachod</string>
    <string name="login">Uvachod</string>
    <string name="view">Prahladzieć</string>
    <string name="extension_out_of_date">Sastareła</string>
    <string name="no_internet">Adsutničaje dałučennie da internetu</string>
    <string name="error_loading_extension_from_x">Pamyłka spampavannia pašyrennia z %1$s</string>
    <string name="extension_x_not_found">Pašyrennie %1$s nie znojdziena</string>
    <string name="required_extensions_missing_x">Adsutničajuć nieabchodnyja pašyrenni: %1$s</string>
    <string name="x_login_required">Patrebien uvachod u %1$s</string>
    <string name="x_is_not_supported_in_x">%1$s nie padtrymlivajecca ŭ %2$s</string>
    <string name="account_session_expired_in_x">Sesija akaŭnta zakančvajecca ŭ %1$s</string>
    <string name="error_x">Pamyłka: %1$s</string>
    <string name="str_copy">Skapijavać</string>
    <string name="extensions">Pašyrenni</string>
    <string name="choose_a_color">Vybrać koler</string>
    <string name="random">Vypadkova</string>
    <string name="add">Dadać</string>
    <string name="loading">Zahruzka…</string>
    <string name="settings">Nałady</string>
    <string name="value">Značennie</string>
    <string name="value_not_set">Nie ŭstalavana</string>
    <string name="playback">Prajhravannie</string>
    <string name="audio_fx">Aŭdyjo-efiekty</string>
    <string name="audio_fx_summary">Efiekty dastasoŭvajucca da ŭsich piesień</string>
    <string name="audio_fx_desc">Zmianić aŭdyjo-efiekty dla biahučaha treku.</string>
    <string name="reset">Skinuć</string>
    <string name="playback_speed">Chutkasć prajhravannia</string>
    <string name="change_pitch_with_speed">Zmianiać vyšyniu tonu z chutkaściu</string>
    <string name="bass_boost">Uzmacniennie basaŭ</string>
    <string name="bass_boost_desc">Bolš vysokaje značennie moža pryvieści da skaženniaŭ huku.</string>
    <string name="change_pitch_with_speed_desc">Atrymajcie zapavoleny huk</string>
    <string name="equalizer">Ekvałajzier</string>
    <string name="equalizer_summary">Adkryć nałady ekvałajziera pryłady</string>
    <string name="stream_quality">Jakasć prajhravannia</string>
    <string name="stream_quality_summary">Vybrać asnoŭnuju jakasć prajhravannia</string>
    <string name="x_specific_quality_summary">Kankretnaja jakasć prajhravannia %1$s, zamienić vybar asnoŭnaj jakasci prajhravannia</string>
    <string name="unmetered_stream_quality">Nieabmežavanaja jakasć prajhravannia</string>
    <string name="unmetered_stream_quality_summary">Jakasć prajhravannia pry dałuczenni da nielimitavanaj sietki. Heta zamienić asnoŭnuju jakasć prajhravannia.</string>
    <string name="behavior">Pavodziny</string>
    <string name="keep_queue">Trymać čarhu płejera</string>
    <string name="keep_queue_summary">Adnavić čarhu płejera, kali vy znovu adkryjecie dadatak.</string>
    <string name="stop_player">Spynić płejer</string>
    <string name="stop_player_summary">Spynić płejer, kali dadatak budzie prybrany z Niadaŭnich</string>
    <string name="skip_silence">Prapuscić cišyniu</string>
    <string name="skip_silence_summary">Prapuscić cichuju častku piesni, kab zabiaspiečyć prajhravannie biez propuskaŭ.</string>
    <string name="auto_start_radio">Aŭtazapusk radyjo</string>
    <string name="auto_start_radio_summary">Aŭtamatyčna dadavać zviazanyja piesni treku ŭ płejlist, kab mieć biaskoncuju čarhu</string>
    <string name="cache_size">Vieličynia kešu</string>
    <string name="cache_size_summary">Vieličynia ŭ MB dla kešavannia aŭdyjo i videa</string>
    <string name="version">Viersija</string>
    <string name="select_language">Vybrać movu</string>
    <string name="system">Sistema</string>
    <string name="check_for_updates">Pravieryć na najaŭnasć abnaŭlenniaŭ</string>
    <string name="check_for_updates_summary">Šukajcie novyja abnaŭlenni jak dadatku, tak i pašyrenniaŭ, kali vy adkryvajecie dadatak.</string>
    <string name="install">Zainstalavać</string>
    <string name="app">Dadatak</string>
    <string name="file">Fajł</string>
    <string name="installation_type">Typ instalavannia</string>
    <string name="installation_type_summary">Instalavannie dadatku dazvolić adkryccio nastupnych spasyłak u Echo:</string>
    <string name="installation_type_warning">Niedastupna, kali vy instalujecie pašyrennie ŭ vyhladzie fajłu.</string>
    <string name="could_not_find_the_file">Nie atrymałasia znajsci fajł.</string>
    <string name="extension_installer">Instalavač pašyrenniaŭ</string>
    <string name="extension_installed_successfully">Pašyrennie zainstalavana paspiachova.</string>
    <string name="extension_uninstalled_successfully">Pašyrennie vydalena paspiachova.</string>
    <string name="allow_opening_links">Dazvolić adkryccio spasyłak</string>
    <string name="open_links_instruction">Kab dazvolić adkryccio hetych spasyłak, patrebna:\n- Prakrucić uniz i nacisnuć \"Adkryć pa zmaŭčanni\"\n- Nacisnuć na \"+ Dadać spasyłku\"</string>
    <string name="downloading_update_for_x">Spampavannie abnaŭlennia dla %1$s</string>
    <string name="extension_updated_successfully">%1$s abnoŭlena paspiachova</string>
    <string name="link">Spasyłka</string>
    <string name="link_or_code">Spasyłka ci kod</string>
    <string name="list_is_empty">Spis pusty</string>
    <string name="extension_installed">%1$s (Zainstalavana)</string>
    <string name="add_extensions">Dadać pašyrenni</string>
    <string name="invalid_extension_list">Spis niedazvolenych pašyrenniaŭ</string>
    <string name="checking_for_updates">Praverka abnaŭlenniaŭ</string>
    <string name="look_and_feel">Wyhlad i pačucci</string>
    <string name="ui">Interfiejs</string>
    <string name="theme">Tema</string>
    <string name="theme_summary">Chočacie być slapym?</string>
    <string name="custom_theme_color">Ułasny koler temy</string>
    <string name="custom_theme_color_summary">Vykarystoŭvaje ŭłasny koler temy zamiest sistemnaha.</string>
    <string name="add_color">Dadać koler</string>
    <string name="custom_colors">Ułasnyja kolery</string>
    <string name="amoled">AMOLED</string>
    <string name="amoled_summary">Sapraŭdny čorny</string>
    <string name="navbar_gradient">Hradyjentnaja navihacyjnaja panel</string>
    <string name="navbar_gradient_summary">Navihacyjnaja panel pastupova rabicca prazrystaju</string>
    <string name="dynamic_player">Dynamičny koler płejera</string>
    <string name="dynamic_player_summary">Dastasuje koler płejeru na padstavie vokładki treka</string>
    <string name="show_background">Pakazać fon</string>
    <string name="show_background_summary">Fonavaje videa albo razmyta vokladka treku ŭ płejerie</string>
    <string name="colors">Kolery</string>
    <string name="scroll_bar">Pałasa prakrutki</string>
    <string name="scroll_bar_summary">Pałasa prakrutki ŭzboč dla chutkaha dostupu (moža pracavać z pamyłkami)</string>
    <string name="animation">Animacyja</string>
    <string name="back_animations">Animacyi zvarotu</string>
    <string name="back_animations_summary">Moža vyklikać vizualnuju pamyłku na Android, ale vy možacie prosta adkryć Niadaŭnija, kab heta vypravić.</string>
    <string name="animations">Animacyi</string>
    <string name="animations_summary">Adčuvajecie zatrymki dadatku? Adkluczycie heta, moža dapamahčy</string>
    <string name="refresh">Abnavić</string>
    <string name="x_disabled">%1$s (Adklučana)</string>
    <string name="by_x">Ad %1$s</string>
    <string name="music">Muzyka</string>
    <string name="tracker">Trekier</string>
    <string name="lyrics">Tekst</string>
    <string name="misc">Roznaje</string>
    <string name="x_extensions">Pašyrenni (%1$s)</string>
    <string name="x_extension">Pašyrennie %1$s</string>
    <string name="enabled">Uklučana</string>
    <string name="disabled">Vyklučana</string>
    <string name="error_updating_extension">Pamyłka padčas abnaŭlennia</string>
    <string name="no_user_found">Karystač nie znojdzieny</string>
    <string name="select_x_account">Vybieracie akaŭnt %1$s</string>
    <string name="add_extension">Dadać pašyrennie</string>
    <string name="webview">WebView</string>
    <string name="logout">Wyjsci z akaŭntu</string>
    <string name="switch_account">Zmianić akaŭnt</string>
    <string name="incognito">Inkohnita</string>
    <string name="not_logged_in">Uvachod nie vykanany</string>
    <string name="x_login">Uvajsci ŭ %1$s</string>
    <string name="x_is_required">Patrebna %1$s</string>
    <string name="regex_invalid">%1$s niedapuščalny, kali łaska, vykarystoŭvajcie farmat: %2$s</string>
    <string name="playing_from">Prajhrajecca z</string>
    <string name="up_next">Što dalej</string>
    <string name="info">Infarmacyja</string>
    <string name="seekbar">Panel pošuku</string>
    <string name="shuffle">Pieramiašać</string>
    <string name="previous">Papiaredni</string>
    <string name="play">Prajhrać</string>
    <string name="next">Nastupny</string>
    <string name="repeat">Paŭtarać</string>
    <string name="close">Zakryć</string>
    <string name="no_lyrics">Niama tekstu</string>
    <string name="sleep_timer">Tajmier snu</string>
    <string name="end_of_track">Kaniec treka</string>
    <string name="_15min">15 chv.</string>
    <string name="_30min">30 chv.</string>
    <string name="_45min">45 chv.</string>
    <string name="_1hr">1 h.</string>
    <string name="_2hr">2 h.</string>
    <string name="sleep_timer_desc">Ustaluje tajmier snu, kab spynić prajhravannie praz niekatory čas</string>
    <string name="sleep_on_specific_time">Son u pryznačany čas</string>
    <string name="sleep_timer_cancelled">Tajmier snu skasavany</string>
    <string name="sleep_timer_set_for">Tajmier snu ustalavany na %1$s</string>
    <string name="search_x">Znajsci %1$s</string>
    <string name="n_hours">%1$d hadzin</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d hadzina</item>
        <item quantity="few">%1$d hadziny</item>
        <item quantity="many">%1$d hadzin</item>
        <item quantity="other">%1$d hadzin</item>
    </plurals>
    <string name="n_minutes">%1$d chvilin</string>
    <plurals name="number_min">
        <item quantity="one">%1$d chvilina</item>
        <item quantity="few">%1$d chviliny</item>
        <item quantity="many">%1$d chvilin</item>
        <item quantity="other">%1$d chvilin</item>
    </plurals>
    <string name="servers">Sierviery</string>
    <string name="sources">Krynicy</string>
    <string name="backgrounds">Fony</string>
    <string name="subtitles">Subtytry</string>
    <string name="audio_selection">Vybar aŭdyjo</string>
    <string name="video_selection">Vybar videa</string>
    <string name="subtitle_selection">Vybar subtytraŭ</string>
    <string name="quality_selection">Vybar jakasci</string>
    <string name="quality_x">Jakasć: %1$d</string>
    <string name="off">Vykl.</string>
    <string name="unknown_quality">Nieviadomaja jakasć</string>
    <string name="so_empty">Tak pusta…</string>
    <string name="not_loading">Nie zahružajecca</string>
    <string name="share">Padzialicca</string>
    <string name="sharing_x">Pamien %1$s</string>
    <string name="save_to_library">Zachavać u biblijateku</string>
    <string name="saved_x_to_library">%1$s zachavana u biblijateku</string>
    <string name="remove_from_library">Vydalić z biblijateki</string>
    <string name="removed_x_from_library">%1$s vydalena z biblijateki</string>
    <string name="radio">Radyjo</string>
    <string name="download">Spampavać</string>
    <string name="follow">Padpisacca</string>
    <string name="following_x">Padpisannie na %1$s</string>
    <string name="followed_x">Padpisana na %1$s</string>
    <string name="unfollow">Adpisacca</string>
    <string name="unfollowing_x">Adpisannie ad %1$s</string>
    <string name="unfollowed_x">Adpisana ad %1$s</string>
    <string name="liking_x">Dadannie %1$s va Ŭlubionyja</string>
    <string name="liked_x">%1$s dadana va Ŭlubionyja</string>
    <string name="unliking_x">Vydalennie %1$s z Ŭlubionych</string>
    <string name="unliked_x">%1$s vydalena z Ŭlubionych</string>
    <string name="hiding_x">Chavannie %1$s</string>
    <string name="unhiding_x">Pakaz %1$s</string>
    <string name="hidden_x">%1$s schavana</string>
    <string name="unhidden_x">%1$s pakazana</string>
    <string name="save_to_playlist">Zachavać u płejlist</string>
    <string name="delete_playlist">Vydalić płejlist</string>
    <string name="add_to_next">Dadać da nastupnaha</string>
    <string name="add_to_queue">Dadać u čarhu</string>
    <string name="loading_radio_for_x">Zahruzka radyjo dla %1$s</string>
    <string name="playing_x">Hraje %1$s</string>
    <string name="adding_x_to_queue">Dadannie %1$s u čarhu</string>
    <string name="adding_x_to_next">Dadannie %1$s nastupnym</string>
    <string name="background_gradient">Hradyjent fona</string>
    <string name="background_gradient_summary">Hradyjentnaje kalarovaje adciennie fonu ŭ zaležnasci ad kantekstu</string>
    <string name="all">Usio</string>
    <string name="edit_playlist">Redahavać płejlist</string>
    <string name="more_brain_capacity">Bolš mahčymasciaŭ mozhu</string>
    <string name="more_brain_capacity_summary">Uklučennie hetaj funkcyi moža vypravić zatrymku huku, ale pavialičvaje raschod batarei (Adklučaje razhruzku huku).</string>
    <string name="track">Trek</string>
    <string name="tracks">Treki</string>
    <string name="sort">Sartavać</string>
    <string name="explicit">Uzrostavaje abmiežavannie</string>
    <string name="x_plays">%1$s prasłuchoŭvanniaŭ</string>
    <string name="x_followers">%1$s padpisčykaŭ</string>
    <string name="n_songs">%1$d piesień</string>
    <string name="n_episodes">%1$d epizodaŭ</string>
    <string name="n_chapters">%1$d častak</string>
    <string name="n_tracks">%1$d trekaŭ</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d piesnia</item>
        <item quantity="few">%1$d piesni</item>
        <item quantity="many">%1$d piesień</item>
        <item quantity="other">%1$d piesień</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d epizod</item>
        <item quantity="few">%1$d epizody</item>
        <item quantity="many">%1$d epizodaŭ</item>
        <item quantity="other">%1$d epizodaŭ</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d častka</item>
        <item quantity="few">%1$d častki</item>
        <item quantity="many">%1$d častak</item>
        <item quantity="other">%1$d častak</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d trek</item>
        <item quantity="few">%1$d treki</item>
        <item quantity="many">%1$d trekaŭ</item>
        <item quantity="other">%1$d trekaŭ</item>
    </plurals>
    <string name="shuffling_x">Pieramiešvannie %1$s</string>
    <string name="copying_the_error">Kapijavannie pamyłki</string>
    <string name="sort_and_filter">Sartavannie i filtracyja</string>
    <string name="filter">Filtr</string>
    <string name="reversed">U zvarotnym paradku</string>
    <string name="apply">Dastasavać</string>
    <string name="save">Zachavać</string>
    <string name="unsave">Nie zachoŭvać</string>
    <string name="sort_title">Nazva</string>
    <string name="sort_date">Data</string>
    <string name="sort_date_added">Data dadannia</string>
    <string name="sort_duration">Praciahłasć</string>
    <string name="sort_subtitle">Subtytry</string>
    <string name="scroll_animations">Animacyi prakrutki</string>
    <string name="scroll_animations_summary">Animacyi pry prakrutcy elemientaŭ</string>
    <string name="delete">Vydalić</string>
    <string name="playlist_name">Nazva płejlista</string>
    <string name="playlist_description">Apisannie płejlista</string>
    <string name="create_playlist">Stvaryć płejlist</string>
    <string name="create">Stvaryć</string>
    <string name="add_song">Dadać piesniu</string>
    <string name="creating_x">Stvarennie %1$s</string>
    <string name="playlist_name_empty">Nazva płejlista pusta</string>
    <string name="x_created">%1$s stvorany</string>
    <string name="deleting_x">Vydalennie %1$s</string>
    <string name="deleted_x">%1$s vydaleny</string>
    <string name="loading_x">Zahruzka %1s</string>
    <string name="saving_x">Zachavannie %1$s</string>
    <string name="saved_to_x">Zachavana ŭ %1$s</string>
    <string name="saved_to_playlists">Zachavana ŭ płejlisty</string>
    <string name="selected_n">Vybrana %1$d</string>
    <string name="adding_x">Dadannie %1$s</string>
    <string name="moving_x">Pieramiaščennie %1$s</string>
    <string name="removing_x">Vydalennie %1$s</string>
    <string name="no_download_extension">Pašyrennia dla spampavannia nie znojdziena. Skarystajciesia kodam \"echodown\", kab atrymać jaho.</string>
    <string name="nothing_to_download_in_x">Niama čaho spampoŭvać u %1$s</string>
    <string name="download_started">Spampavannie pačałosia</string>
    <string name="merging_x">Zliccio %1$s</string>
    <string name="tagging_x">Tehiravannie %1$s</string>
    <string name="apply_player_color_to_app">Dastasavać koler płejera da ŭsiaho dadatku</string>
    <string name="apply_player_color_to_app_summary">PAPIAREDŽANNIE PRA ZATRYMKI!!!</string>
    <string name="delete_download">Vydalić spampavannie</string>
    <string name="removed_x_from_downloads">%1$s vydalena z spampavanniaŭ</string>
    <string name="download_complete">Spampavannie zavieršana</string>
    <string name="app_widget_description">Echo na haloŭnym ekranie!</string>
    <string name="opening_webview_x">Adkryccio WebView: %1$s</string>
    <string name="no_update_available_for_x">Niama dastupnych abnaŭlenniaŭ dla %1$s</string>
    <string name="other">Inšaje</string>
    <string name="player">Płejer</string>
    <string name="about">Pra dadatak</string>
    <string name="language_x">Mova: %1$s</string>
    <string name="guide">Dapamožnik</string>
    <string name="donate">Achviaravannie</string>
    <string name="contributors">Udzielniki</string>
    <string name="app_desc">Prosta muzyčny płejer.</string>
    <string name="manage">Kiravać</string>
    <string name="no_account">Niama akaŭntu</string>
    <string name="other_settings">Inšyja nałady</string>
    <string name="no_x_found">%1$s nie znajdziena</string>
    <string name="playlist">Płejlist</string>
    <string name="album">Albom</string>
    <string name="pre_release">Papiaredniaja viersija</string>
    <string name="single">Sinhł</string>
    <string name="ep">Mini-albom</string>
    <string name="lp">Poŭnafarmatny albom</string>
    <string name="compilation">Kampilacyja</string>
    <string name="show">Pakazać</string>
    <string name="book">Kniha</string>
    <string name="song">Piesnia</string>
    <string name="podcast">Padkast</string>
    <string name="video">Videa</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="genres_x">Žanry: %1$s</string>
    <string name="disc_number_n">Numar dyska: %1$d</string>
    <string name="album_order_n">Paradkavy numar u albomie: %1$d</string>
    <string name="confirmation">Pacvierdžannie</string>
    <string name="delete_playlist_confirmation">Vy ŭpeŭnieny, što chočacie vydalić %1$s?</string>
    <string name="confirm">Pacvierdzić</string>
    <string name="big_cover">Bolś vialikija vokładki</string>
    <string name="big_cover_summary">Dobra padychodzić dla pryład z vialikimi ekranami</string>
    <string name="unhide">Pakazać</string>
    <string name="hide">Schavać</string>
    <string name="no_last_played_track_found">Apošni prajhrany trek nie znojdzieny.</string>
    <string name="not_yet_released">Jašče nie vypuščana</string>
    <string name="releases_on_x">Vychodzić %1$s</string>
    <string name="unavailable_in_your_region">Niedastupna ŭ vašym rehijonie</string>
    <string name="not_playable_x">Niemahčyma prajhrać: %1$s</string>
    <string name="currently_playing">Zaraz hraje</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-be\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">Акей</string>
    <string name="cancel">Скасаваць</string>
    <string name="back">Назад</string>
    <string name="x_permission_required">Патрэбна дазваленне %1$s</string>
    <string name="x_was_not_granted">%1$s не было дадзена</string>
    <string name="audio">Аўдыё</string>
    <string name="audio_permission_summary">Каб атрымаць доступ да вашай лакальнай бібліятэкі музыкі</string>
    <string name="read_storage">Прачытаць сховішча</string>
    <string name="write_storage">Запісаць у сховішча</string>
    <string name="write_storage_permission_summary">Каб ствараць альбо змяняць лакальныя плэйлісты</string>
    <string name="notifications">Паведамленні</string>
    <string name="notifications_permission_summary">Каб паказаць паведамленні для спампаванняў і музыкі</string>
    <string name="remove">Выдаліць</string>
    <string name="more_by_x">Болей ад %1$s</string>
    <string name="songs">Песні</string>
    <string name="albums">Альбомы</string>
    <string name="x_radio">Радыё %1$s</string>
    <string name="cached_songs">Кэшаваныя песні</string>
    <string name="cache_playlist_warning">Эксперыментальная функцыя. Усё, акрамя праслухвання, не падтрымліваецца.</string>
    <string name="artists">Выканаўцы</string>
    <string name="recently_added">Нядаўна дадана</string>
    <string name="refresh_library_on_reload">Аднавіць бібліятэку пры перазагрузцы</string>
    <string name="refresh_library_on_reload_summary">Сканаваць прыладу штораз пры загрузцы стужкі</string>
    <string name="duration_filter">Фільтр працягласці</string>
    <string name="duration_filter_summary">Фільтраваць аўдыёфайлы з працягласцю менш за значэнне (у секундах)</string>
    <string name="blacklist_folders">Чорны спіс тэчак</string>
    <string name="feed">Стужка</string>
    <string name="blacklist_folders_summary">Тэчкі да вынятку з бібліятэкі</string>
    <string name="blacklist_folder_keywords">Ключавыя словы для чорнага спісу тэчак</string>
    <string name="blacklist_folder_keywords_summary">Ключавыя словы для тэчак чорнага спісу, выкарыстоўвайце коску як падзельнік</string>
    <string name="saved">Захаванае</string>
    <string name="tabs">Укладкі</string>
    <string name="show_tabs">Паказаць укладкі</string>
    <string name="show_tab_summary">Паказываць укладкі пашырэнняў як катэгоріі</string>
    <string name="unified_liked_playlist_summary">Вашы ўлюбёныя трэкі з розных пашырэнняў</string>
    <string name="n_items">%1$d элементаў</string>
    <string name="item">Элемент</string>
    <plurals name="number_items">
        <item quantity="one">%1$d элемент</item>
        <item quantity="few">%1$d элементы</item>
        <item quantity="many">%1$d элементаў</item>
        <item quantity="other">%1$d элементаў</item>
    </plurals>
    <string name="playlist_liked">Улюбёныя</string>
    <string name="playlist_liked_desc">Вашы ўлюбёныя трэкі</string>
    <string name="unknown">Невядома</string>
    <string name="like">Палюбіць</string>
    <string name="unlike">Разлюбіць</string>
    <string name="repeat_one">Паўтарыць адзін раз</string>
    <string name="repeat_off">Паўтор выключаны</string>
    <string name="repeat_all">Паўтараць усё</string>
    <string name="home">Галоўная</string>
    <string name="search">Пошук</string>
    <string name="library">Бібліятэка</string>
    <string name="more">Больш</string>
    <string name="extension">Пашырэнне</string>
    <string name="downloading_x">Спампаванне %1$s</string>
    <string name="cancel_all">Скасаваць усё</string>
    <string name="download_progress">Прагрэс спампавання</string>
    <string name="downloads">Спампаванні</string>
    <string name="downloaded_x">Спампавана %1$s</string>
    <string name="logout_and_login">Выхад і ўваход</string>
    <string name="login">Уваход</string>
    <string name="view">Праглядзець</string>
    <string name="extension_out_of_date">Састарэла</string>
    <string name="no_internet">Адсутнічае далучэнне да інтэрнэту</string>
    <string name="error_loading_extension_from_x">Памылка спампавання пашырэння з %1$s</string>
    <string name="extension_x_not_found">Пашырэнне %1$s не знайдзена</string>
    <string name="required_extensions_missing_x">Адсутнічаюць неабходныя пашырэнні: %1$s</string>
    <string name="x_login_required">Патрэбен уваход у %1$s</string>
    <string name="x_is_not_supported_in_x">%1$s не падтрымліваецца ў %2$s</string>
    <string name="account_session_expired_in_x">Сесія акаўнта заканчваецца ў %1$s</string>
    <string name="error_x">Памылка: %1$s</string>
    <string name="str_copy">Скапіяваць</string>
    <string name="extensions">Пашырэнні</string>
    <string name="choose_a_color">Выбраць колер</string>
    <string name="random">Выпадкова</string>
    <string name="add">Дадаць</string>
    <string name="loading">Загрузка…</string>
    <string name="settings">Налады</string>
    <string name="value">Значэнне</string>
    <string name="value_not_set">Не ўсталявана</string>
    <string name="playback">Прайграванне</string>
    <string name="audio_fx">Аўдыё-эфекты</string>
    <string name="audio_fx_summary">Эфекты дастасоўваюцца да ўсіх песень</string>
    <string name="audio_fx_desc">Змяніць аўдыё-эфекты для бягучага трэку.</string>
    <string name="reset">Скінуць</string>
    <string name="playback_speed">Хуткасць прайгравання</string>
    <string name="change_pitch_with_speed">Змяняць вышыню тону з хуткасцю</string>
    <string name="bass_boost">Узмацненне басаў</string>
    <string name="bass_boost_desc">Больш высокае значэнне можа прывесці да скажэнняў гуку.</string>
    <string name="change_pitch_with_speed_desc">Атрымайце запаволены гук</string>
    <string name="equalizer">Эквалайзер</string>
    <string name="equalizer_summary">Адкрыць налады эквалайзера прылады</string>
    <string name="stream_quality">Якасць прайгравання</string>
    <string name="stream_quality_summary">Выбраць асноўную якасць прайгравання</string>
    <string name="x_specific_quality_summary">Канкрэтная якасць прайгравання %1$s, заменіць выбар асноўнай якасці прайгравання</string>
    <string name="unmetered_stream_quality">Неабмежаваная якасць прайгравання</string>
    <string name="unmetered_stream_quality_summary">Якасць прайгравання пры далучэнні да нелімітаванай сеткі. Гэта заменіць асноўную якасць прайгравання.</string>
    <string name="behavior">Паводзіны</string>
    <string name="keep_queue">Трымаць чаргу плэера</string>
    <string name="keep_queue_summary">Аднавіць чаргу плэера, калі вы знову адкрыеце дадатак.</string>
    <string name="stop_player">Спыніць плэер</string>
    <string name="stop_player_summary">Спыніць плэер, калі дадатак будзе прыбраны з Нядаўніх</string>
    <string name="skip_silence">Прапусціць цішыню</string>
    <string name="skip_silence_summary">Прапусціць ціхую частку песні, каб забяспечыць прайграванне без пропускаў.</string>
    <string name="auto_start_radio">Аўтазапуск радыё</string>
    <string name="auto_start_radio_summary">Аўтаматычна дадаваць звязаныя песні трэку ў плэйліст, каб мець бясконцую чаргу</string>
    <string name="cache_size">Велічыня кэшу</string>
    <string name="cache_size_summary">Велічыня ў МБ для кэшавання аўдыё і відэа</string>
    <string name="version">Версія</string>
    <string name="select_language">Выбраць мову</string>
    <string name="system">Сістэма</string>
    <string name="check_for_updates">Праверыць на наяўнасць абнаўленняў</string>
    <string name="check_for_updates_summary">Шукайце новыя абнаўленні як дадатку, так і пашырэнняў, калі вы адкрываеце дадатак.</string>
    <string name="install">Заінсталяваць</string>
    <string name="app">Дадатак</string>
    <string name="file">Файл</string>
    <string name="installation_type">Тып інсталявання</string>
    <string name="installation_type_summary">Інсталяванне дадатку дазволіць адкрыццё наступных спасылак у Echo:</string>
    <string name="installation_type_warning">Недаступна, калі вы інсталюеце пашырэнне ў выглядзе файлу.</string>
    <string name="could_not_find_the_file">Не атрымалася знайсці файл.</string>
    <string name="extension_installer">Інсталявач пашырэнняў</string>
    <string name="extension_installed_successfully">Пашырэнне заінсталявана паспяхова.</string>
    <string name="extension_uninstalled_successfully">Пашырэнне выдалена паспяхова.</string>
    <string name="allow_opening_links">Дазволіць адркыццё спасылак</string>
    <string name="open_links_instruction">Как дазволіць адкрыццё гэтых спасылак, патрэбна:\n- Пракруціць уніз і націснуць \"Адкрыць па змаўчанні\"\n- Націснуць на \"+ Дадаць спасылку\"</string>
    <string name="downloading_update_for_x">Спампаванне абнаўлення для %1$s</string>
    <string name="extension_updated_successfully">%1$s абноўлена паспяхова</string>
    <string name="link">Спасылка</string>
    <string name="link_or_code">Спасылка ці код</string>
    <string name="list_is_empty">Спіс пусты</string>
    <string name="extension_installed">%1$s (Заінсталявана)</string>
    <string name="add_extensions">Дадаць пашырэнні</string>
    <string name="invalid_extension_list">Спіс недазволеных пашырэнняў</string>
    <string name="checking_for_updates">Праверка абнаўленняў</string>
    <string name="look_and_feel">Выгляд і пачуцці</string>
    <string name="ui">Інтэрфейс</string>
    <string name="theme">Тэма</string>
    <string name="theme_summary">Хочаце быць сляпым?</string>
    <string name="custom_theme_color">Уласны колер тэмы</string>
    <string name="custom_theme_color_summary">Выкарыстоўвае ўласны колер тэмы замест сістэмнага.</string>
    <string name="add_color">Дадаць колер</string>
    <string name="custom_colors">Уласныя колеры</string>
    <string name="amoled">AMOLED</string>
    <string name="amoled_summary">Сапраўдны чорны</string>
    <string name="navbar_gradient">Градыентная навігацыйная панэль</string>
    <string name="navbar_gradient_summary">Навігацыйная панэль паступова рабіцца празрыстаю</string>
    <string name="dynamic_player">Дынамічны колер плэера</string>
    <string name="dynamic_player_summary">Дастасуе колер плэеру на падставе вокладкі трэка</string>
    <string name="show_background">Паказаць фон</string>
    <string name="show_background_summary">Фонавае відэа альбо размыта вокладка трэку ў плэере</string>
    <string name="animation">Анімацыя</string>
    <string name="back_animations">Анімацыі звароту</string>
    <string name="back_animations_summary">Можа выклікаць візуальную памылку на Android, але вы можаце проста адкрыць Нядаўнія, каб гэта выправіць.</string>
    <string name="animations">Анімацыі</string>
    <string name="animations_summary">Адчуваеце затрымкі дадатку? Адключыце гэта, можа дапамагчы</string>
    <string name="refresh">Абнавіць</string>
    <string name="x_disabled">%1$s (Адключана)</string>
    <string name="by_x">Ад %1$s</string>
    <string name="music">Музыка</string>
    <string name="tracker">Трэкер</string>
    <string name="lyrics">Тэкст</string>
    <string name="misc">Рознае</string>
    <string name="x_extensions">Пашырэнні (%1$s)</string>
    <string name="x_extension">Пашырэнне %1$s</string>
    <string name="enabled">Уключана</string>
    <string name="disabled">Выключана</string>
    <string name="error_updating_extension">Памылка падчас абнаўлення</string>
    <string name="no_user_found">Карыстач не знойдзены</string>
    <string name="select_x_account">Выбераце акаўнт %1$s</string>
    <string name="add_extension">Дадаць пашырэнне</string>
    <string name="webview">WebView</string>
    <string name="logout">Выйсці з акаўнту</string>
    <string name="switch_account">Змяніць акаўнт</string>
    <string name="incognito">Інкогніта</string>
    <string name="not_logged_in">Уваход не выкананы</string>
    <string name="x_login">Увайсці ў %1$s</string>
    <string name="x_is_required">Патрэбна %1$s</string>
    <string name="regex_invalid">%1$s недапушчальны, калі ласка, выкарыстоўвайце фармат: %2$s</string>
    <string name="playing_from">Прайграецца з</string>
    <string name="up_next">Што далей</string>
    <string name="info">Інфармацыя</string>
    <string name="seekbar">Панэль пошуку</string>
    <string name="shuffle">Перамяшаць</string>
    <string name="previous">Папярэдні</string>
    <string name="play">Прайграць</string>
    <string name="next">Наступны</string>
    <string name="repeat">Паўтараць</string>
    <string name="close">Закрыць</string>
    <string name="no_lyrics">Няма тэксту</string>
    <string name="sleep_timer">Таймер сну</string>
    <string name="end_of_track">Канец трэка</string>
    <string name="_15min">15 хв.</string>
    <string name="_30min">30 хв.</string>
    <string name="_45min">45 хв.</string>
    <string name="_1hr">1 гадз.</string>
    <string name="_2hr">2 гадз.</string>
    <string name="sleep_timer_desc">Усталюе таймер сну, каб спыніць прайграванне праз некаторы час</string>
    <string name="sleep_on_specific_time">Сон у прызначаны час</string>
    <string name="sleep_timer_cancelled">Таймер сну скасаваны</string>
    <string name="sleep_timer_set_for">Таймер сну усталяваны на %1$s</string>
    <string name="search_x">Знайсці %1$s</string>
    <string name="n_hours">%1$d гадзін</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d гадзіна</item>
        <item quantity="few">%1$d гадзіны</item>
        <item quantity="many">%1$d гадзін</item>
        <item quantity="other">%1$d гадзін</item>
    </plurals>
    <string name="n_minutes">%1$d хвілін</string>
    <plurals name="number_min">
        <item quantity="one">%1$d хвіліна</item>
        <item quantity="few">%1$d хвіліны</item>
        <item quantity="many">%1$d хвілін</item>
        <item quantity="other">%1$d хвілін</item>
    </plurals>
    <string name="servers">Серверы</string>
    <string name="sources">Крыніцы</string>
    <string name="backgrounds">Фоны</string>
    <string name="subtitles">Субтытры</string>
    <string name="audio_selection">Выбар аўдыё</string>
    <string name="video_selection">Выбар відэа</string>
    <string name="subtitle_selection">Выбар субтытраў</string>
    <string name="quality_selection">Выбар якасці</string>
    <string name="quality_x">Якасць: %1$d</string>
    <string name="off">Выкл.</string>
    <string name="unknown_quality">Невядомая якасць</string>
    <string name="so_empty">Так пуста…</string>
    <string name="not_loading">Не загружаецца</string>
    <string name="share">Падзяліцца</string>
    <string name="sharing_x">Памен %1$s</string>
    <string name="save_to_library">Захаваць у бібліятэку</string>
    <string name="saved_x_to_library">%1$s захавана ў бібліятэку</string>
    <string name="remove_from_library">Выдаліць з бібліятэкі</string>
    <string name="removed_x_from_library">%1$s выдалена з бібліятэкі</string>
    <string name="radio">Радыё</string>
    <string name="download">Спампаваць</string>
    <string name="follow">Падпісацца</string>
    <string name="following_x">Падпісанне на %1$s</string>
    <string name="followed_x">Падпісана на %1$s</string>
    <string name="unfollow">Адпісацца</string>
    <string name="unfollowing_x">Адпісанне ад %1$s</string>
    <string name="unfollowed_x">Адпісана ад %1$s</string>
    <string name="liking_x">Даданне %1$s ва Ўлюбёныя</string>
    <string name="liked_x">%1$s дадана ва Ўлюбёныя</string>
    <string name="unliking_x">Выдаленне %1$s з Ўлюбёных</string>
    <string name="unliked_x">%1$s выдалена з Ўлюбёных</string>
    <string name="hiding_x">Хаванне %1$s</string>
    <string name="unhiding_x">Паказ %1$s</string>
    <string name="hidden_x">%1$s схавана</string>
    <string name="unhidden_x">%1$s паказана</string>
    <string name="save_to_playlist">Захаваць у плэйліст</string>
    <string name="delete_playlist">Выдаліць плэйліст</string>
    <string name="add_to_next">Дадаць да наступнага</string>
    <string name="add_to_queue">Дадаць у чаргу</string>
    <string name="loading_radio_for_x">Загрузка радыё для %1$s</string>
    <string name="playing_x">Грае %1$s</string>
    <string name="adding_x_to_queue">Даданне %1$s у чаргу</string>
    <string name="adding_x_to_next">Даданне %1$s наступным</string>
    <string name="background_gradient">Градыент фона</string>
    <string name="background_gradient_summary">Градыентнае каляровае адценне фону ў залежнасці ад кантэксту</string>
    <string name="all">Усё</string>
    <string name="edit_playlist">Редагаваць плэйліст</string>
    <string name="more_brain_capacity">Больш магчымасцяў мозгу</string>
    <string name="more_brain_capacity_summary">Уключэнне гэтай функцыі можа выправіць затрымку гуку, але павялічвае расход батарэі (Адключае разгрузку гуку).</string>
    <string name="track">Трэк</string>
    <string name="tracks">Трэкі</string>
    <string name="sort">Сартаваць</string>
    <string name="explicit">Узроставае абмежаванне</string>
    <string name="x_plays">%1$s праслухоўванняў</string>
    <string name="x_followers">%1$s падпісчыкаў</string>
    <string name="n_songs">%1$d песень</string>
    <string name="n_episodes">%1$d эпізодаў</string>
    <string name="n_chapters">%1$d частак</string>
    <string name="n_tracks">%1$d трэкаў</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d песня</item>
        <item quantity="few">%1$d песні</item>
        <item quantity="many">%1$d песень</item>
        <item quantity="other">%1$d песень</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d эпізод</item>
        <item quantity="few">%1$d эпізоды</item>
        <item quantity="many">%1$d эпізодаў</item>
        <item quantity="other">%1$d эпізодаў</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d частка</item>
        <item quantity="few">%1$d часткі</item>
        <item quantity="many">%1$d частак</item>
        <item quantity="other">%1$d частак</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d трэк</item>
        <item quantity="few">%1$d трэкі</item>
        <item quantity="many">%1$d трэкаў</item>
        <item quantity="other">%1$d трэкаў</item>
    </plurals>
    <string name="shuffling_x">Перамешванне %1$s</string>
    <string name="copying_the_error">Капіяванне памылкі</string>
    <string name="sort_and_filter">Сартаванне і фільтрацыя</string>
    <string name="filter">Фільтр</string>
    <string name="reversed">У зваротным парадку</string>
    <string name="apply">Дастасаваць</string>
    <string name="save">Захаваць</string>
    <string name="unsave">Не захоўваць</string>
    <string name="sort_title">Назва</string>
    <string name="sort_date">Дата</string>
    <string name="sort_date_added">Дата дадання</string>
    <string name="sort_duration">Працягласць</string>
    <string name="sort_subtitle">Субтытры</string>
    <string name="scroll_animations">Анімацыі пракруткі</string>
    <string name="scroll_animations_summary">Анімацыі пры пракрутцы элементаў</string>
    <string name="delete">Выдаліць</string>
    <string name="playlist_name">Назва плэйліста</string>
    <string name="playlist_description">Апісанне плэйліста</string>
    <string name="create_playlist">Стварыць плэйліст</string>
    <string name="create">Стварыць</string>
    <string name="add_song">Дадаць песню</string>
    <string name="creating_x">Стварэнне %1$s</string>
    <string name="playlist_name_empty">Назва плэйліста пуста</string>
    <string name="x_created">%1$s створаны</string>
    <string name="deleting_x">Выдаленне %1$s</string>
    <string name="deleted_x">%1$s выдалены</string>
    <string name="loading_x">Загрузка %1s</string>
    <string name="saving_x">Захаванне %1$s</string>
    <string name="saved_to_x">Захавана ў %1$s</string>
    <string name="saved_to_playlists">Захавана ў плэйлісты</string>
    <string name="selected_n">Выбрана %1$d</string>
    <string name="adding_x">Даданне %1$s</string>
    <string name="moving_x">Перамяшчэнне %1$s</string>
    <string name="removing_x">Выдаленне %1$s</string>
    <string name="no_download_extension">Пашырэння для спампавання не знойдзена. Скарыстайцеся кодам \"echodown\", каб атрымаць яго.</string>
    <string name="nothing_to_download_in_x">Няма чаго спампоўваць у %1$s</string>
    <string name="download_started">Спампаванне пачалося</string>
    <string name="merging_x">Зліццё %1$s</string>
    <string name="tagging_x">Тэгіраванне %1$s</string>
    <string name="apply_player_color_to_app">Дастасаваць колер плэера да ўсяго дадатку</string>
    <string name="apply_player_color_to_app_summary">ПАПЯРЭДЖАННЕ ПРА ЗАТРЫМКІ!!!</string>
    <string name="delete_download">Выдаліць спампаванне</string>
    <string name="removed_x_from_downloads">%1$s выдалена з спампаванняў</string>
    <string name="download_complete">Спампаванне завершана</string>
    <string name="app_widget_description">Echo на галоўным экране!</string>
    <string name="opening_webview_x">Адкрыццё WebView: %1$s</string>
    <string name="no_update_available_for_x">Няма даступных абнаўленняў для %1$s</string>
    <string name="other">Іншае</string>
    <string name="player">Плэер</string>
    <string name="about">Пра дадатак</string>
    <string name="language_x">Мова: %1$s</string>
    <string name="guide">Дапаможнік</string>
    <string name="donate">Ахвяраванне</string>
    <string name="contributors">Удзельнікі</string>
    <string name="app_desc">Проста музычны плэер.</string>
    <string name="manage">Кіраваць</string>
    <string name="no_account">Няма акаўнту</string>
    <string name="other_settings">Іншыя налады</string>
    <string name="no_x_found">%1$s не знайдзена</string>
    <string name="playlist">Плэйліст</string>
    <string name="album">Альбом</string>
    <string name="pre_release">Папярэдняя версія</string>
    <string name="single">Сінгл</string>
    <string name="ep">Міні-альбом</string>
    <string name="lp">Поўнафарматны альбом</string>
    <string name="compilation">Кампіляцыя</string>
    <string name="show">Паказаць</string>
    <string name="book">Кніга</string>
    <string name="song">Песня</string>
    <string name="podcast">Падкаст</string>
    <string name="video">Відэа</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="genres_x">Жанры: %1$s</string>
    <string name="disc_number_n">Нумар дыска: %1$d</string>
    <string name="album_order_n">Парадкавы нумар у альбоме: %1$d</string>
    <string name="confirmation">Пацверджанне</string>
    <string name="delete_playlist_confirmation">Вы ўпэўнены, што хочаце выдаліць %1$s?</string>
    <string name="confirm">Пацвердзіць</string>
    <string name="big_cover">Больш вялікія вокладкі</string>
    <string name="big_cover_summary">Добра падыходзіць для прылад з вялікімі экранамі</string>
    <string name="unhide">Паказаць</string>
    <string name="hide">Схаваць</string>
    <string name="no_last_played_track_found">Апошні прайграны трэк не знойдзены.</string>
    <string name="not_yet_released">Яшчэ не выпушчана</string>
    <string name="releases_on_x">Выходзіць %1$s</string>
    <string name="unavailable_in_your_region">Недаступна ў вашым рэгіёне</string>
    <string name="not_playable_x">Немагчыма прайграць: %1$s</string>
    <string name="colors">Колеры</string>
    <string name="scroll_bar">Паласа пракруткі</string>
    <string name="scroll_bar_summary">Паласа пракруткі ўзбоч для хуткага доступу (можа працаваць з памылкамі)</string>
    <string name="currently_playing">Зараз грае</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-bn\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name" translatable="false">Echo</string>
    <string name="app_github_repo" translatable="false">brahmkshatriya/echo</string>
    <string name="okay">ঠিক আছে</string>
    <string name="cancel">বাতিল</string>
    <string name="back">পেছনে</string>
    <string name="feed">ফিড</string>
    <string name="x_permission_required">%1$s অনুমতি প্রয়োজন</string>
    <string name="x_was_not_granted">%1$s প্রদান করা হয়নি</string>
    <string name="audio">অডিও</string>
    <string name="audio_permission_summary">আপনার স্থানীয় মিউজিক লাইব্রেরি অ্যাক্সেস করতে</string>
    <string name="read_storage">স্টোরেজ পড়ুন</string>
    <string name="write_storage">স্টোরেজ লিখুন</string>
    <string name="write_storage_permission_summary">স্থানীয় প্লেলিস্ট তৈরি এবং সম্পাদনা করতে</string>
    <string name="notifications">বিজ্ঞপ্তি</string>
    <string name="notifications_permission_summary">ডাউনলোড এবং মিউজিকের জন্য বিজ্ঞপ্তি দেখাতে</string>
    <string name="remove">সরান</string>
    <string name="more_by_x">%1$s এর আরও</string>
    <string name="songs">গান</string>
    <string name="albums">অ্যালবাম</string>
    <string name="x_radio">%1$s রেডিও</string>
    <string name="cached_songs">ক্যাশ করা গান</string>
    <string name="cache_playlist_warning">পরীক্ষামূলক বৈশিষ্ট্য। শুধুমাত্র শোনা ছাড়া অন্য কিছু সমর্থিত নয়।</string>
    <string name="artists">শিল্পী</string>
    <string name="recently_added">সম্প্রতি যোগ করা</string>
    <string name="refresh_library_on_reload">পুনরায় লোডে লাইব্রেরি রিফ্রেশ করুন</string>
    <string name="refresh_library_on_reload_summary">প্রতিবার ফিড লোড হলে ডিভাইস স্ক্যান করুন</string>
    <string name="duration_filter">সময়কাল ফিল্টার</string>
    <string name="duration_filter_summary">মান থেকে কম সময়কাল (সেকেন্ডে) সহ অডিও ফাইল ফিল্টার করুন</string>
    <string name="blacklist_folders">ব্ল্যাকলিস্ট ফোল্ডার</string>
    <string name="blacklist_folders_summary">লাইব্রেরি থেকে বাদ দিতে ফোল্ডার</string>
    <string name="blacklist_folder_keywords">ব্ল্যাকলিস্ট ফোল্ডার কীওয়ার্ড</string>
    <string name="blacklist_folder_keywords_summary">ফোল্ডার ব্ল্যাকলিস্ট করতে কীওয়ার্ড, বিভাজক জন্য কমা ব্যবহার করুন</string>
    <string name="saved">সংরক্ষিত</string>
    <string name="tabs">ট্যাব</string>
    <string name="show_tabs">ট্যাব দেখান</string>
    <string name="show_tab_summary">এক্সটেনশনের ট্যাবগুলি বিভাগ হিসাবে দেখাবে</string>
    <string name="unified_liked_playlist_summary">বিভিন্ন এক্সটেনশন থেকে আপনার পছন্দের ট্র্যাক</string>
    <string name="n_items">%1$d আইটেম</string>
    <string name="item">আইটেম</string>
    <plurals name="number_items">
        <item quantity="one">%1$d আইটেম</item>
        <item quantity="other">%1$d আইটেম</item>
    </plurals>
    <string name="playlist_liked">পছন্দের</string>
    <string name="playlist_liked_desc">আপনার পছন্দের ট্র্যাক</string>
    <string name="unknown">অজানা</string>
    <string name="like">পছন্দ</string>
    <string name="unlike">অপছন্দ</string>
    <string name="repeat_one">একটি পুনরাবৃত্তি</string>
    <string name="repeat_off">পুনরাবৃত্তি বন্ধ</string>
    <string name="repeat_all">সব পুনরাবৃত্তি</string>
    <string name="home">হোম</string>
    <string name="search">অনুসন্ধান</string>
    <string name="library">লাইব্রেরি</string>
    <string name="more">আরও</string>
    <string name="extension">এক্সটেনশন</string>
    <string name="downloading_x">%1$s ডাউনলোড হচ্ছে</string>
    <string name="cancel_all">সব বাতিল করুন</string>
    <string name="download_progress">ডাউনলোড অগ্রগতি</string>
    <string name="downloads">ডাউনলোড</string>
    <string name="downloaded_x">%1$s ডাউনলোড হয়েছে</string>
    <string name="logout_and_login">লগআউট এবং লগইন</string>
    <string name="login">লগইন</string>
    <string name="view">দেখুন</string>
    <string name="extension_out_of_date">পুরনো</string>
    <string name="no_internet">ইন্টারনেট নেই</string>
    <string name="error_loading_extension_from_x">%1$s থেকে এক্সটেনশন লোড করতে ত্রুটি</string>
    <string name="extension_x_not_found">এক্সটেনশন %1$s পাওয়া যায়নি</string>
    <string name="required_extensions_missing_x">প্রয়োজনীয় এক্সটেনশন অনুপস্থিত: %1$s</string>
    <string name="x_login_required">%1$s লগইন প্রয়োজন</string>
    <string name="x_is_not_supported_in_x">%1$s, %2$s এ সমর্থিত নয়</string>
    <string name="account_session_expired_in_x">%1$s এ অ্যাকাউন্ট সেশন মেয়াদ শেষ</string>
    <string name="error_x">ত্রুটি: %1$s</string>
    <string name="str_copy">কপি</string>
    <string name="extensions">এক্সটেনশন</string>
    <string name="choose_a_color">একটি রঙ চয়ন করুন</string>
    <string name="random">এলোমেলো</string>
    <string name="add">যোগ করুন</string>
    <string name="loading">লোড হচ্ছে…</string>
    <string name="settings">সেটিংস</string>
    <string name="value">মান</string>
    <string name="value_not_set">সেট করা নেই</string>
    <string name="playback">প্লেব্যাক</string>
    <string name="audio_fx">অডিও ইফেক্ট</string>
    <string name="audio_fx_summary">সমস্ত গানের জন্য প্রয়োগ করা ইফেক্ট</string>
    <string name="audio_fx_desc">বর্তমান ট্র্যাকের জন্য অডিও ইফেক্ট পরিবর্তন করুন।</string>
    <string name="reset">রিসেট</string>
    <string name="playback_speed">প্লেব্যাক গতি</string>
    <string name="change_pitch_with_speed">গতির সাথে পিচ পরিবর্তন করুন</string>
    <string name="bass_boost">বাস বুস্ট</string>
    <string name="bass_boost_desc">বড় মান শব্দ বিকৃত করতে পারে।</string>
    <string name="change_pitch_with_speed_desc">সেই স্লো-মোশন শব্দ পান</string>
    <string name="equalizer">ইকুয়ালাইজার</string>
    <string name="equalizer_summary">ডিভাইস ইকুয়ালাইজার সেটিংস খুলুন</string>
    <string name="stream_quality">স্ট্রিম কোয়ালিটি</string>
    <string name="stream_quality_summary">স্ট্রিমের ডিফল্ট কোয়ালিটি নির্বাচন করুন</string>
    <string name="x_specific_quality_summary">%1$s নির্দিষ্ট স্ট্রিম কোয়ালিটি, ডিফল্ট স্ট্রিম কোয়ালিটি নির্বাচন ওভাররাইড করবে</string>
    <string-array name="stream_qualities">
        <item>সর্বোচ্চ</item>
        <item>মাঝারি</item>
        <item>সর্বনিম্ন</item>
    </string-array>
    <string name="unmetered_stream_quality">আনমিটার্ড স্ট্রিম কোয়ালিটি</string>
    <string name="unmetered_stream_quality_summary">আনমিটার্ড নেটওয়ার্কে সংযুক্ত থাকলে স্ট্রিমের কোয়ালিটি। এটি ডিফল্ট স্ট্রিম কোয়ালিটি ওভাররাইড করবে।</string>
    <string name="behavior">আচরণ</string>
    <string name="keep_queue">প্লেয়ার সারি রাখুন</string>
    <string name="keep_queue_summary">অ্যাপ পুনরায় খোলার সময় প্লেয়ার সারি পুনরুদ্ধার করুন।</string>
    <string name="stop_player">প্লেয়ার বন্ধ করুন</string>
    <string name="stop_player_summary">সাম্প্রতিক থেকে অ্যাপ সরানো হলে প্লেয়ার বন্ধ করুন</string>
    <string name="skip_silence">নীরবতা এড়িয়ে যান</string>
    <string name="skip_silence_summary">গ্যাপলেস প্লেব্যাক প্রদান করতে গানে নীরব অংশ এড়িয়ে যান।</string>
    <string name="auto_start_radio">স্বয়ংক্রিয় রেডিও শুরু</string>
    <string name="auto_start_radio_summary">অসীম সারি পেতে প্লেলিস্টে ট্র্যাকের সম্পর্কিত গান স্বয়ংক্রিয়ভাবে যোগ করুন</string>
    <string name="cache_size">ক্যাশ আকার</string>
    <string name="cache_size_summary">অডিও এবং ভিডিও ক্যাশ করতে MB এ আকার</string>
    <string name="version">সংস্করণ</string>
    <string name="select_language">ভাষা নির্বাচন করুন</string>
    <string name="system">সিস্টেম</string>
    <string name="check_for_updates">আপডেট চেক করুন</string>
    <string name="check_for_updates_summary">অ্যাপ খোলার সময় অ্যাপ এবং এক্সটেনশন উভয়ের নতুন আপডেট খুঁজুন।</string>
    <string name="install">ইনস্টল</string>
    <string name="app">অ্যাপ</string>
    <string name="file">ফাইল</string>
    <string name="installation_type">ইনস্টলেশন প্রকার</string>
    <string name="installation_type_summary">অ্যাপ ইনস্টলেশন নিম্নলিখিত লিঙ্কগুলি Echo তে খুলতে অনুমতি দেবে:</string>
    <string name="installation_type_warning">ফাইল হিসাবে এক্সটেনশন ইনস্টল করলে উপলব্ধ নয়।</string>
    <string name="could_not_find_the_file">ফাইল খুঁজে পাওয়া যায়নি।</string>
    <string name="extension_installer">এক্সটেনশন ইনস্টলার</string>
    <string name="extension_installed_successfully">এক্সটেনশন সফলভাবে ইনস্টল হয়েছে।</string>
    <string name="extension_uninstalled_successfully">এক্সটেনশন সফলভাবে আনইনস্টল হয়েছে।</string>
    <string name="allow_opening_links">লিঙ্ক খোলার অনুমতি দিন</string>
    <string name="open_links_instruction">এই লিঙ্কগুলি খোলার অনুমতি দিতে, আপনাকে:\n- নিচে স্ক্রোল করুন এবং \"ডিফল্টভাবে খুলুন\" ক্লিক করুন\n- \"+ লিঙ্ক যোগ করুন\" ক্লিক করুন</string>
    <string name="downloading_update_for_x">%1$s এর জন্য আপডেট ডাউনলোড হচ্ছে</string>
    <string name="extension_updated_successfully">%1$s সফলভাবে আপডেট হয়েছে</string>
    <string name="link">লিঙ্ক</string>
    <string name="link_or_code">লিঙ্ক বা কোড</string>
    <string name="list_is_empty">তালিকা খালি</string>
    <string name="extension_installed">%1$s (ইনস্টল করা)</string>
    <string name="add_extensions">এক্সটেনশন যোগ করুন</string>
    <string name="invalid_extension_list">অবৈধ এক্সটেনশন তালিকা</string>
    <string name="checking_for_updates">আপডেট চেক করা হচ্ছে</string>
    <string name="look_and_feel">চেহারা এবং অনুভূতি</string>
    <string name="ui">UI</string>
    <string name="theme">থিম</string>
    <string name="theme_summary">অন্ধ হতে চান?</string>
    <string-array name="themes">
        <item>হালকা</item>
        <item>অন্ধকার</item>
        <item>সিস্টেম</item>
    </string-array>
    <string name="custom_theme_color">কাস্টম থিম রঙ</string>
    <string name="custom_theme_color_summary">সিস্টেম থিমের পরিবর্তে একটি কাস্টম থিম রঙ ব্যবহার করুন।</string>
    <string name="add_color">রঙ যোগ করুন</string>
    <string name="custom_colors">কাস্টম রঙ</string>
    <string name="amoled">AMOLED</string>
    <string name="amoled_summary">পিচ ব্ল্যাক, পিউর ব্ল্যাক</string>
    <string name="navbar_gradient">গ্রেডিয়েন্ট নেভবার</string>
    <string name="navbar_gradient_summary">নেভবার ধীরে ধীরে স্বচ্ছ হয়ে যায়</string>
    <string name="dynamic_player">ডাইনামিক প্লেয়ার রঙ</string>
    <string name="dynamic_player_summary">ট্র্যাক আর্টওয়ার্কের উপর ভিত্তি করে প্লেয়ারে রঙ প্রয়োগ করুন</string>
    <string name="show_background">ব্যাকগ্রাউন্ড দেখান</string>
    <string name="show_background_summary">প্লেয়ারে ট্র্যাকের ব্যাকগ্রাউন্ড ভিডিও বা ঘোলা আর্টওয়ার্ক</string>
    <string name="colors">রঙ</string>
    <string name="scroll_bar">স্ক্রোল বার</string>
    <string name="scroll_bar_summary">দ্রুত অ্যাক্সেসের জন্য পাশে স্ক্রোলবার (সমস্যাযুক্ত হতে পারে)</string>
    <string name="animation">অ্যানিমেশন</string>
    <string name="back_animations">ব্যাক অ্যানিমেশন</string>
    <string name="back_animations_summary">অ্যান্ড্রয়েডের কারণে ভিজ্যুয়াল বাগ হতে পারে, তবে আপনি সাম্প্রতিক খুলে এটি ঠিক করতে পারেন।</string>
    <string name="animations">অ্যানিমেশন</string>
    <string name="animations_summary">খুব বেশি স্ট্যাটার অনুভব করছেন? এটি বন্ধ করা সাহায্য করতে পারে</string>
    <string name="refresh">রিফ্রেশ</string>
    <string name="x_disabled">%1$s (নিষ্ক্রিয়)</string>
    <string name="by_x">%1$s দ্বারা</string>
    <string name="music">মিউজিক</string>
    <string name="tracker">ট্র্যাকার</string>
    <string name="lyrics">লিরিক্স</string>
    <string name="misc">বিবিধ</string>
    <string name="x_extensions">%1$s এক্সটেনশন</string>
    <string name="x_extension">%1$s এক্সটেনশন</string>
    <string name="enabled">সক্রিয়</string>
    <string name="disabled">নিষ্ক্রিয়</string>
    <string name="error_updating_extension">আপডেট করার সময় ত্রুটি</string>
    <string name="no_user_found">কোন ব্যবহারকারী পাওয়া যায়নি</string>
    <string name="select_x_account">%1$s অ্যাকাউন্ট নির্বাচন করুন</string>
    <string name="add_extension">এক্সটেনশন যোগ করুন</string>
    <string name="webview">ওয়েবভিউ</string>
    <string name="logout">লগআউট</string>
    <string name="switch_account">অ্যাকাউন্ট পরিবর্তন করুন</string>
    <string name="incognito">ইনকগনিটো</string>
    <string name="not_logged_in">লগইন করা নেই</string>
    <string name="x_login">%1$s লগইন</string>
    <string name="x_is_required">%1$s প্রয়োজন</string>
    <string name="regex_invalid">%1$s অবৈধ, অনুগ্রহ করে regex অনুসরণ করুন: %2$s</string>
    <string name="playing_from">থেকে বাজছে</string>
    <string name="up_next">পরবর্তী</string>
    <string name="info">তথ্য</string>
    <string name="seekbar">সিকবার</string>
    <string name="shuffle">শাফল</string>
    <string name="previous">পূর্ববর্তী</string>
    <string name="play">প্লে</string>
    <string name="next">পরবর্তী</string>
    <string name="repeat">পুনরাবৃত্তি</string>
    <string name="close">বন্ধ</string>
    <string name="no_lyrics">কোন লিরিক্স নেই</string>
    <string name="sleep_timer">স্লিপ টাইমার</string>
    <string name="end_of_track">ট্র্যাক শেষ</string>
    <string name="_15min">১৫ মিনিট</string>
    <string name="_30min">৩০ মিনিট</string>
    <string name="_45min">৪৫ মিনিট</string>
    <string name="_1hr">১ ঘন্টা</string>
    <string name="_2hr">২ ঘন্টা</string>
    <string name="sleep_timer_desc">একটি নির্দিষ্ট সময় পরে প্লেব্যাক বন্ধ করতে স্লিপ টাইমার সেট করুন</string>
    <string name="sleep_on_specific_time">নির্দিষ্ট সময়ে স্লিপ</string>
    <string name="sleep_timer_cancelled">স্লিপ টাইমার বাতিল করা হয়েছে</string>
    <string name="sleep_timer_set_for">স্লিপ টাইমার %1$s এর জন্য সেট করা হয়েছে</string>
    <string name="search_x">%1$s অনুসন্ধান করুন</string>
    <string name="n_hours">%1$d ঘন্টা</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d ঘন্টা</item>
        <item quantity="other">%1$d ঘন্টা</item>
    </plurals>
    <string name="n_minutes">%1$d মিনিট</string>
    <plurals name="number_min">
        <item quantity="one">%1$d মিনিট</item>
        <item quantity="other">%1$d মিনিট</item>
    </plurals>
    <string name="servers">সার্ভার</string>
    <string name="sources">উৎস</string>
    <string name="backgrounds">ব্যাকগ্রাউন্ড</string>
    <string name="subtitles">সাবটাইটেল</string>
    <string name="audio_selection">অডিও নির্বাচন</string>
    <string name="video_selection">ভিডিও নির্বাচন</string>
    <string name="subtitle_selection">সাবটাইটেল নির্বাচন</string>
    <string name="quality_selection">কোয়ালিটি নির্বাচন</string>
    <string name="quality_x">কোয়ালিটি %1$d</string>
    <string name="off">বন্ধ</string>
    <string name="unknown_quality">অজানা কোয়ালিটি</string>
    <string name="crying_af" translatable="false">;-;</string>
    <string name="so_empty">এত খালি…</string>
    <string name="not_loading">লোড হচ্ছে না</string>
    <string name="n_dot_x" translatable="false">%1$d. %2$s</string>
    <string name="share">শেয়ার</string>
    <string name="sharing_x">%1$s শেয়ার করা হচ্ছে</string>
    <string name="save_to_library">লাইব্রেরিতে সংরক্ষণ করুন</string>
    <string name="saved_x_to_library">%1$s লাইব্রেরিতে সংরক্ষিত</string>
    <string name="remove_from_library">লাইব্রেরি থেকে সরান</string>
    <string name="removed_x_from_library">%1$s লাইব্রেরি থেকে সরানো হয়েছে</string>
    <string name="radio">রেডিও</string>
    <string name="download">ডাউনলোড</string>
    <string name="follow">ফলো</string>
    <string name="following_x">%1$s ফলো করা হচ্ছে</string>
    <string name="followed_x">%1$s ফলো করা হয়েছে</string>
    <string name="unfollow">আনফলো</string>
    <string name="unfollowing_x">%1$s আনফলো করা হচ্ছে</string>
    <string name="unfollowed_x">%1$s আনফলো করা হয়েছে</string>
    <string name="liking_x">%1$s পছন্দ করা হচ্ছে</string>
    <string name="liked_x">%1$s পছন্দ করা হয়েছে</string>
    <string name="unliking_x">%1$s অপছন্দ করা হচ্ছে</string>
    <string name="unliked_x">%1$s অপছন্দ করা হয়েছে</string>
    <string name="hiding_x">%1$s লুকানো হচ্ছে</string>
    <string name="unhiding_x">%1$s প্রদর্শন করা হচ্ছে</string>
    <string name="hidden_x">%1$s লুকানো হয়েছে</string>
    <string name="unhidden_x">%1$s প্রদর্শিত হয়েছে</string>
    <string name="save_to_playlist">প্লেলিস্টে সংরক্ষণ করুন</string>
    <string name="delete_playlist">প্লেলিস্ট মুছুন</string>
    <string name="add_to_next">পরবর্তীতে যোগ করুন</string>
    <string name="add_to_queue">সারিতে যোগ করুন</string>
    <string name="loading_radio_for_x">%1$s এর জন্য রেডিও লোড হচ্ছে</string>
    <string name="playing_x">%1$s বাজানো হচ্ছে</string>
    <string name="adding_x_to_queue">%1$s সারিতে যোগ করা হচ্ছে</string>
    <string name="adding_x_to_next">%1$s পরবর্তীতে যোগ করা হচ্ছে</string>
    <string name="background_gradient">ব্যাকগ্রাউন্ড গ্রেডিয়েন্ট</string>
    <string name="background_gradient_summary">প্রসঙ্গের উপর নির্ভর করে ব্যাকগ্রাউন্ডে একটি গ্রেডিয়েন্ট রঙের ছোঁয়া</string>
    <string name="all">সব</string>
    <string name="edit_playlist">প্লেলিস্ট সম্পাদনা করুন</string>
    <string name="more_brain_capacity">আরও ব্রেইন ক্যাপাসিটি</string>
    <string name="more_brain_capacity_summary">এটি সক্রিয় করলে অডিও ল্যাগ ঠিক করতে এবং ব্যাটারি ব্যবহার বাড়াতে সাহায্য করতে পারে (অডিও অফলোডিং নিষ্ক্রিয় করে)।</string>
    <string name="track">ট্র্যাক</string>
    <string name="tracks">ট্র্যাক</string>
    <string name="sort">সাজান</string>
    <string name="explicit">স্পষ্ট</string>
    <string name="x_plays">%1$s প্লে</string>
    <string name="x_followers">%1$s ফলোয়ার</string>
    <string name="n_songs">%1$d গান</string>
    <string name="n_episodes">%1$d এপিসোড</string>
    <string name="n_chapters">%1$d অধ্যায়</string>
    <string name="n_tracks">%1$d ট্র্যাক</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d গান</item>
        <item quantity="other">%1$d গান</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d এপিসোড</item>
        <item quantity="other">%1$d এপিসোড</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d অধ্যায়</item>
        <item quantity="other">%1$d অধ্যায়</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d ট্র্যাক</item>
        <item quantity="other">%1$d ট্র্যাক</item>
    </plurals>
    <string name="shuffling_x">%1$s শাফল করা হচ্ছে</string>
    <string name="copying_the_error">ত্রুটি কপি করা হচ্ছে</string>
    <string name="sort_and_filter">সাজান এবং ফিল্টার করুন</string>
    <string name="filter">ফিল্টার</string>
    <string name="reversed">বিপরীত</string>
    <string name="apply">প্রয়োগ করুন</string>
    <string name="save">সংরক্ষণ করুন</string>
    <string name="unsave">আনসেভ</string>
    <string name="sort_title">শিরোনাম</string>
    <string name="sort_date">তারিখ</string>
    <string name="sort_date_added">যোগ করার তারিখ</string>
    <string name="sort_duration">সময়কাল</string>
    <string name="sort_subtitle">সাবটাইটেল</string>
    <string name="scroll_animations">স্ক্রোল অ্যানিমেশন</string>
    <string name="scroll_animations_summary">যখন আপনি স্ক্রোল করেন তখন অ্যানিমেশন</string>
    <string name="delete">মুছুন</string>
    <string name="playlist_name">প্লেলিস্ট নাম</string>
    <string name="playlist_description">প্লেলিস্ট বিবরণ</string>
    <string name="create_playlist">প্লেলিস্ট তৈরি করুন</string>
    <string name="create">তৈরি করুন</string>
    <string name="add_song">গান যোগ করুন</string>
    <string name="creating_x">%1$s তৈরি করা হচ্ছে</string>
    <string name="playlist_name_empty">প্লেলিস্ট নাম খালি</string>
    <string name="x_created">%1$s তৈরি হয়েছে</string>
    <string name="deleting_x">%1$s মুছে ফেলা হচ্ছে</string>
    <string name="deleted_x">%1$s মুছে ফেলা হয়েছে</string>
    <string name="loading_x">%1s লোড হচ্ছে</string>
    <string name="saving_x">%1$s সংরক্ষণ করা হচ্ছে</string>
    <string name="saved_to_x">%1$s এ সংরক্ষিত</string>
    <string name="saved_to_playlists">প্লেলিস্টে সংরক্ষিত</string>
    <string name="selected_n">%1$d নির্বাচিত</string>
    <string name="adding_x">%1$s যোগ করা হচ্ছে</string>
    <string name="moving_x">%1$s সরানো হচ্ছে</string>
    <string name="removing_x">%1$s সরানো হচ্ছে</string>
    <string name="no_download_extension">কোন ডাউনলোড এক্সটেনশন পাওয়া যায়নি, এটি পেতে \"echodown\" কোড ব্যবহার করুন।</string>
    <string name="nothing_to_download_in_x">%1$s এ ডাউনলোড করার কিছু নেই</string>
    <string name="download_started">ডাউনলোড শুরু হয়েছে</string>
    <string name="merging_x">%1$s মার্জ করা হচ্ছে</string>
    <string name="tagging_x">%1$s ট্যাগ করা হচ্ছে</string>
    <string name="apply_player_color_to_app">সম্পূর্ণ অ্যাপে প্লেয়ার রঙ প্রয়োগ করুন</string>
    <string name="apply_player_color_to_app_summary">ল্যাগ সতর্কতা!!!</string>
    <string name="delete_download">ডাউনলোড মুছুন</string>
    <string name="removed_x_from_downloads">%1$s ডাউনলোড থেকে সরানো হয়েছে</string>
    <string name="download_complete">ডাউনলোড সম্পূর্ণ</string>
    <string name="app_widget_description">আপনার হোম স্ক্রিনে Echo!</string>
    <string name="opening_webview_x">ওয়েবভিউ খোলা হচ্ছে: %1$s</string>
    <string name="no_update_available_for_x">%1$s এর জন্য কোন আপডেট উপলব্ধ নেই</string>
    <string name="other">অন্যান্য</string>
    <string name="player">প্লেয়ার</string>
    <string name="about">সম্পর্কে</string>
    <string name="language_x">ভাষা: %1$s</string>
    <string name="guide">গাইড</string>
    <string name="donate">দান করুন</string>
    <string name="contributors">অবদানকারী</string>
    <string name="app_desc">শুধুমাত্র একটি মিউজিক প্লেয়ার।</string>
    <string name="manage">পরিচালনা করুন</string>
    <string name="no_account">কোন অ্যাকাউন্ট নেই</string>
    <string name="other_settings">অন্যান্য সেটিংস</string>
    <string name="no_x_found">কোন %1$s পাওয়া যায়নি</string>
    <string name="playlist">প্লেলিস্ট</string>
    <string name="album">অ্যালবাম</string>
    <string name="pre_release">প্রি রিলিজ</string>
    <string name="single">সিঙ্গেল</string>
    <string name="ep">EP</string>
    <string name="lp">LP</string>
    <string name="compilation">কম্পিলেশন</string>
    <string name="show">শো</string>
    <string name="book">বই</string>
    <string name="song">গান</string>
    <string name="podcast">পডকাস্ট</string>
    <string name="video">ভিডিও</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="genres_x">জনরা: %1$s</string>
    <string name="disc_number_n">ডিস্ক নম্বর: %1$d</string>
    <string name="album_order_n">অ্যালবাম অর্ডার নম্বর: %1$d</string>
    <string name="confirmation">নিশ্চিতকরণ</string>
    <string name="delete_playlist_confirmation">আপনি কি নিশ্চিত যে %1$s মুছে ফেলতে চান?</string>
    <string name="confirm">নিশ্চিত করুন</string>
    <string name="big_cover">বড় কভার</string>
    <string name="big_cover_summary">বড় স্ক্রিন সহ ডিভাইসের জন্য ভালো</string>
    <string name="unhide">প্রদর্শন করুন</string>
    <string name="hide">লুকান</string>
    <string name="no_last_played_track_found">সর্বশেষ বাজানো ট্র্যাক পাওয়া যায়নি।</string>
    <string name="not_yet_released">এখনও রিলিজ হয়নি</string>
    <string name="releases_on_x">%1$s এ রিলিজ হবে</string>
    <string name="unavailable_in_your_region">আপনার অঞ্চলে অনুপলব্ধ</string>
    <string name="not_playable_x">বাজানো যাবে না: %1$s</string>
    <string name="currently_playing">বর্তমানে বাজছে</string>
    <string name="circle">বৃত্ত</string>
    <string name="horizontal">অনুভূমিক</string>
    <string name="vertical">উল্লম্ব</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-ca\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">d\'acord</string>
    <string name="cancel">Cancel·lar</string>
    <string name="back">Enrere</string>
    <string name="feed">Transmissió</string>
    <string name="x_permission_required">%1$s Es necessiten permisos</string>
    <string name="x_was_not_granted">%1$s no s\'ha concedit</string>
    <string name="audio">Àudio</string>
    <string name="audio_permission_summary">Per accedir a la teva llibreria de música</string>
    <string name="read_storage">Llegir de l\'emmagatzematge</string>
    <string name="write_storage">Escriure a l\'emmagatzematge</string>
    <string name="write_storage_permission_summary">Crear i editar llistes de reproducció locals</string>
    <string name="notifications">Notificacions</string>
    <string name="notifications_permission_summary">Mostrar notificacions de descàrregues i música</string>
    <string name="remove">Eliminar</string>
    <string name="more_by_x">Més de %1$s</string>
    <string name="songs">Cançons</string>
    <string name="albums">Àlbums</string>
    <string name="x_radio">Ràdio de %1$s</string>
    <string name="cached_songs">Cançons en memòria cau</string>
    <string name="cache_playlist_warning">Funció experimental. Només es podràn escoltar, qualsevol altra acció no és suportada.</string>
    <string name="artists">Artistes</string>
    <string name="recently_added">Afegits recentment</string>
    <string name="refresh_library_on_reload">Actualitza la llibreria al tornar a carregar</string>
    <string name="refresh_library_on_reload_summary">Analitza l\'emmagatzematge cada cop que es carregui la transmissió</string>
    <string name="duration_filter">Filtre de durada</string>
    <string name="duration_filter_summary">Filtra els fitxers d\'àudio amb una durada inferior al valor indicat (segons)</string>
    <string name="blacklist_folders">Carpetes excloses</string>
    <string name="blacklist_folders_summary">Carpetes excloses de la llibreria</string>
    <string name="blacklist_folder_keywords">Paraules clau per excloure carpetes</string>
    <string name="blacklist_folder_keywords_summary">Paraules clau per excloure carpetes, separades per coma</string>
    <string name="saved">Guardat</string>
    <string name="tabs">Pestanyes</string>
    <string name="show_tabs">Mostra les pestanyes</string>
    <string name="show_tab_summary">Mostra les pestanyes de les extensions com a categories</string>
    <string name="unified_liked_playlist_summary">Les teves pistes favorites de diverses extensions</string>
    <string name="n_items">%1$d elements</string>
    <string name="item">Element</string>
    <plurals name="number_items">
        <item quantity="one">%1$d Element</item>
        <item quantity="many">%1$d Elements</item>
        <item quantity="other">%1$d Elements</item>
    </plurals>
    <string name="playlist_liked">m\'agrada</string>
    <string name="playlist_liked_desc">Les teves pistes favorites</string>
    <string name="unknown">Desconegut</string>
    <string name="like">M\'agrada</string>
    <string name="unlike">Ja no m\'agrada</string>
    <string name="repeat_one">Repetir un cop</string>
    <string name="repeat_off">No repetir</string>
    <string name="repeat_all">Repetir tot</string>
    <string name="home">Inici</string>
    <string name="search">Cerca</string>
    <string name="library">Biblioteca</string>
    <string name="more">Més</string>
    <string name="extension">Extensió</string>
    <string name="downloading_x">Descarregant %1$s</string>
    <string name="cancel_all">Cancel·la tot</string>
    <string name="download_progress">Progrés de la descàrrega</string>
    <string name="downloads">Descàrregues</string>
    <string name="downloaded_x">Descarregat: %1$s</string>
    <string name="logout_and_login">Tancar i Iniciar sessió</string>
    <string name="login">Iniciar sessió</string>
    <string name="view">Veure</string>
    <string name="extension_out_of_date">desactualitzat</string>
    <string name="no_internet">sense connexió a internet</string>
    <string name="error_loading_extension_from_x">Error carregant la extensió des de %1$s</string>
    <string name="extension_x_not_found">No s\'ha trobat l\'extensió %1$s</string>
    <string name="required_extensions_missing_x">No es troba la extensió necessaria: %1$s</string>
    <string name="x_login_required">cal iniciar sessió a %1$s</string>
    <string name="x_is_not_supported_in_x">no es suporta %1$s a %2$s</string>
    <string name="account_session_expired_in_x">La sessió del compte ha caducat en %1$s</string>
    <string name="error_x">Error: %1$s</string>
    <string name="str_copy">Còpia</string>
    <string name="extensions">Extensions</string>
    <string name="choose_a_color">Tria un color</string>
    <string name="random">Aleatori</string>
    <string name="add">Afegir</string>
    <string name="loading">Carregant…</string>
    <string name="settings">Configuració</string>
    <string name="value">Valor</string>
    <string name="value_not_set">No definit</string>
    <string name="playback">Reproducció</string>
    <string name="audio_fx">Effectes d\'àudio</string>
    <string name="audio_fx_summary">Efectes actius a totes les cançons</string>
    <string name="audio_fx_desc">Canvia els efectes d\'àudio per a la pista actual.</string>
    <string name="reset">Restableix</string>
    <string name="playback_speed">Velocitat de reproducció</string>
    <string name="change_pitch_with_speed">Canvia el to amb la velocitat</string>
    <string name="bass_boost">Potencia els baixos</string>
    <string name="bass_boost_desc">Un valor gran pot distorsionar el so.</string>
    <string name="change_pitch_with_speed_desc">Obté el so de càmera lenta</string>
    <string name="equalizer">Equalitzador</string>
    <string name="equalizer_summary">Obre la configuració d\'equalització del dispositiu</string>
    <string name="stream_quality">Qualitat de la transmissió</string>
    <string name="stream_quality_summary">Selecciona la qualitat de transmissió per defecte</string>
    <string name="x_specific_quality_summary">qualitat de transmissió específica per %1$s , sobreescriu el valor de qualitat per defecte</string>
    <string name="unmetered_stream_quality">Qualitat de transmissió amb una connexió fixa d\'internet</string>
    <string name="unmetered_stream_quality_summary">La qualitat de la transmissió en una xarxa no mesurada. Sobreescriu la qualitat de transmissió per defecte.</string>
    <string name="behavior">Comportament</string>
    <string name="keep_queue">Mantenir la cua de reproducció</string>
    <string name="keep_queue_summary">Recuperar la cua de reproducció quan es torna a obrir la app.</string>
    <string name="stop_player">Atura el reproductor</string>
    <string name="stop_player_summary">Atura el reproductor quan la app s\'elimina de aplicacions recents al sistema</string>
    <string name="skip_silence">Omet els silencis</string>
    <string name="skip_silence_summary">Omet les part silencioses de la cançó per una reproducció contínua.</string>
    <string name="auto_start_radio">Inicia automàticament la ràdio</string>
    <string name="auto_start_radio_summary">Afegeix cançons relacionades a la pista actual de manera automàtica a la llista de reproducció per tenir una cua infinita</string>
    <string name="cache_size">Tamany de la memòria cau</string>
    <string name="cache_size_summary">Tamany en MegaBytes reservats per la memòria cau de àudio i vídeo</string>
    <string name="version">Versió</string>
    <string name="select_language">Tria l\'idioma</string>
    <string name="system">Sistema</string>
    <string name="check_for_updates">Busca actualitzacions</string>
    <string name="check_for_updates_summary">Al obrir la app, busca actualitzacions tant per la pròpia app com per les extensions.</string>
    <string name="install">Instal·la</string>
    <string name="app">App</string>
    <string name="file">Fitxer</string>
    <string name="installation_type">Tipus d\'instal·lació</string>
    <string name="installation_type_summary">La instal·lació permetrà que els següents enllaços s\'obrin a Echo:</string>
    <string name="installation_type_warning">No disponible si s\'instal·la la extensió com un fitxer.</string>
    <string name="could_not_find_the_file">No s\'ha pogut trobar el fitxer.</string>
    <string name="extension_installer">Instal·lador d\'extensions</string>
    <string name="all">Tot</string>
    <string name="edit_playlist">Edita la llista de reproducció</string>
    <string name="more_brain_capacity">Més capacitat de procés</string>
    <string name="more_brain_capacity_summary">Activant aquest paràmetre, es pot reduïr el retard d\'àudio, però incrementa l\'us de bateria (desactiva la descàrrega de àudio)</string>
    <string name="track">Pista</string>
    <string name="tracks">Pistes</string>
    <string name="sort">Endreça</string>
    <string name="explicit">Explícit</string>
    <string name="x_plays">%1$s reproduccions</string>
    <string name="x_followers">%1$s seguidors</string>
    <string name="n_songs">%1$d cançons</string>
    <string name="n_episodes">%1$d episodis</string>
    <string name="n_chapters">%1$d capítols</string>
    <string name="n_tracks">%1$d pistes</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d cançó</item>
        <item quantity="many">%1$d cançons</item>
        <item quantity="other">%1$d cançons</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d episodi</item>
        <item quantity="many">%1$d episodis</item>
        <item quantity="other">%1$d episodis</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d capítol</item>
        <item quantity="many">%1$d capítols</item>
        <item quantity="other">%1$d capítols</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d pista</item>
        <item quantity="many">%1$d pistes</item>
        <item quantity="other">%1$d pistes</item>
    </plurals>
    <string name="shuffling_x">Barreja %1$s</string>
    <string name="copying_the_error">Copiant l\'error</string>
    <string name="sort_and_filter">Ordre i filtre</string>
    <string name="filter">Filtre</string>
    <string name="reversed">a la inversa</string>
    <string name="apply">aplica</string>
    <string name="save">Desa</string>
    <string name="unsave">desfés</string>
    <string name="sort_title">ordena per títol</string>
    <string name="sort_date">ordena per data</string>
    <string name="sort_date_added">data d\'addició</string>
    <string name="sort_duration">duració</string>
    <string name="sort_subtitle">subtítol</string>
    <string name="scroll_animations">animacions de desplaçament</string>
    <string name="scroll_animations_summary">Animacions quan et desplaces entre elements</string>
    <string name="delete">Esborra</string>
    <string name="playlist_name">Nom de la llista de reproducció</string>
    <string name="playlist_description">Descripció de la llista de reproducció</string>
    <string name="create_playlist">Crea una llista de reproducció</string>
    <string name="create">Crea</string>
    <string name="add_song">Afegeix cançó</string>
    <string name="creating_x">Creant %1$s</string>
    <string name="playlist_name_empty">Nom de la llista de reproducció buit</string>
    <string name="x_created">%1$s creat</string>
    <string name="deleting_x">esborrant %1$s</string>
    <string name="deleted_x">%1$s esborrat</string>
    <string name="loading_x">Carregant %1s</string>
    <string name="saving_x">Desant %1$s</string>
    <string name="saved_to_x">Desat a %1$s</string>
    <string name="saved_to_playlists">Desat a llistes de reproducció</string>
    <string name="selected_n">Seleccionat %1$d</string>
    <string name="adding_x">Afegint %1$s</string>
    <string name="moving_x">Movent %1$s</string>
    <string name="removing_x">Esborrant %1$s</string>
    <string name="no_download_extension">No s\'ha trobat la extensió de baixades, fés servir el codi \"echodown\" per obtenir-la.</string>
    <string name="nothing_to_download_in_x">No hi ha res a baixar a %1$s</string>
    <string name="download_started">Baixada iniciada</string>
    <string name="merging_x">Ajuntant %1$s</string>
    <string name="tagging_x">Etiquetant %1$s</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-de\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">Okay</string>
    <string name="cancel">Abbrechen</string>
    <string name="back">Zurück</string>
    <string name="x_permission_required">%1$s Berechtigung erforderlich</string>
    <string name="x_was_not_granted">%1$s wurde nicht gewährt</string>
    <string name="audio">Audio</string>
    <string name="video">Video</string>
    <string name="read_storage">Speicher lesen</string>
    <string name="write_storage_permission_summary">So erstellst und bearbeitst Du lokale Wiedergabelisten</string>
    <string name="notifications">Benachrichtigungen</string>
    <string name="artists">Künstler</string>
    <string name="recently_added">Kürzlich hinzugefügt</string>
    <string name="refresh_library_on_reload">Bibliothek beim erneuten Laden aktualisieren</string>
    <string name="refresh_library_on_reload_summary">Scanne das Gerät jedes Mal, wenn der Feed geladen wird</string>
    <string name="duration_filter">Filter für die Dauer</string>
    <string name="blacklist_folders">Ordner auf die schwarze Liste setzen</string>
    <string name="blacklist_folders_summary">Ordner, die aus der Bibliothek ausgeschlossen werden sollen</string>
    <string name="blacklist_folder_keywords">Ordner-Schlüsselwörter auf die schwarze Liste setzen</string>
    <string name="blacklist_folder_keywords_summary">Schlüsselwörter zum Sperren von Ordnern, Komma als Trennzeichen</string>
    <string name="saved">Gespeichert</string>
    <string name="tabs">Tabs</string>
    <string name="show_tabs">Tabs anzeigen</string>
    <string name="show_tab_summary">Tabs der Erweiterungen als Kategorien anzeigen</string>
    <string name="n_items">%1$d Einträge</string>
    <string name="playlist_liked_desc">Deine Lieblingstitel</string>
    <string name="like">Gefällt mir</string>
    <string name="unlike">Gefällt mir nicht</string>
    <string name="repeat_one">Einmal wiederholen</string>
    <string name="repeat_off">Wiederholen aus</string>
    <string name="repeat_all">Alle wiederholen</string>
    <string name="home">Startseite</string>
    <string name="search">Suchen</string>
    <string name="library">Bibliothek</string>
    <string name="more">Mehr</string>
    <string name="downloading_x">%1$s herunterladen</string>
    <string name="cancel_all">Alle abbrechen</string>
    <string name="downloads">Downloads</string>
    <string name="downloaded_x">%1$s heruntergeladen</string>
    <string name="login">Anmelden</string>
    <string name="extension_out_of_date">Veraltet</string>
    <string name="error_loading_extension_from_x">Fehler beim Laden der Erweiterung von %1$s</string>
    <string name="extension_x_not_found">Erweiterung %1$s nicht gefunden</string>
    <string name="required_extensions_missing_x">Erforderliche Erweiterungen fehlen: %1$s</string>
    <string name="x_login_required">%1$s Anmeldung erforderlich</string>
    <string name="account_session_expired_in_x">Die Sitzung ist in %1$s abgelaufen</string>
    <string name="error_x">Fehler: %1$s</string>
    <string name="str_copy">Kopieren</string>
    <string name="extensions">Erweiterungen</string>
    <string name="random">Zufällig</string>
    <string name="add">Hinzufügen</string>
    <string name="loading">Laden…</string>
    <string name="settings">Einstellungen</string>
    <string name="value">Wert</string>
    <string name="value_not_set">Nicht festgelegt</string>
    <string name="playback">Wiedergabe</string>
    <string name="audio_fx">Audio-Effekte</string>
    <string name="audio_fx_summary">Auf alle Songs angewendete Effekte</string>
    <string name="audio_fx_desc">Ändere die Audioeffekte für den aktuellen Titel.</string>
    <string name="playback_speed">Wiedergabegeschwindigkeit</string>
    <string name="change_pitch_with_speed">Tonhöhe mit Geschwindigkeit ändern</string>
    <string name="bass_boost">Bassverstärkung</string>
    <string name="change_pitch_with_speed_desc">Hole Dir den Slow-Motion-Sound</string>
    <string name="equalizer">Equalizer</string>
    <string name="equalizer_summary">Equalizer-Einstellungen des Geräts öffnen</string>
    <string name="stream_quality">Stream-Qualität</string>
    <string name="behavior">Verhalten</string>
    <string name="keep_queue">Warteschlange behalten</string>
    <string name="keep_queue_summary">Stellen Sie die Player-Warteschlange wieder her, wenn Sie die App erneut öffnen.</string>
    <string name="stop_player_summary">Beenden Sie den Player, wenn die App aus den zuletzt verwendeten Apps entfernt wird</string>
    <string name="skip_silence">Stille überspringen</string>
    <string name="auto_start_radio_summary">Fügen Sie automatisch verwandte Songs des Titels zur Wiedergabeliste hinzu, um eine unendliche Warteschlange zu haben</string>
    <string name="cache_size">Cache-Größe</string>
    <string name="cache_size_summary">Größe in MB zum Zwischenspeichern von Audio und Video</string>
    <string name="version">Version</string>
    <string name="system">System</string>
    <string name="install">Installieren</string>
    <string name="app">App</string>
    <string name="file">Datei</string>
    <string name="installation_type">Art der Installation</string>
    <string name="installation_type_summary">Durch die App-Installation können die folgenden Links in Echo geöffnet werden:</string>
    <string name="could_not_find_the_file">Die Datei konnte nicht gefunden werden.</string>
    <string name="extension_installer">Installer für Erweiterungen</string>
    <string name="extension_uninstalled_successfully">Die Erweiterung wurde erfolgreich deinstalliert.</string>
    <string name="allow_opening_links">Öffnen von Links zulassen</string>
    <string name="downloading_update_for_x">Update für %1$s wird heruntergeladen</string>
    <string name="extension_updated_successfully">%1$s erfolgreich aktualisiert</string>
    <string name="link">Verbinden</string>
    <string name="link_or_code">Link oder Code</string>
    <string name="list_is_empty">Liste ist leer</string>
    <string name="add_extensions">Erweiterungen hinzufügen</string>
    <string name="invalid_extension_list">Liste ungültiger Erweiterungen</string>
    <string name="look_and_feel">Aussehen und Haptik</string>
    <string name="ui">UI</string>
    <string name="theme">Thema</string>
    <string name="theme_summary">Möchtest du blind sein?</string>
    <string name="custom_theme_color_summary">Verwenden Sie eine benutzerdefinierte Designfarbe anstelle des Systemdesigns.</string>
    <string name="custom_colors">Benutzerdefinierte Farben</string>
    <string name="amoled">AMOLED</string>
    <string name="navbar_gradient">Navigationsleiste mit Farbverlauf</string>
    <string name="navbar_gradient_summary">Die Navigationsleiste wird allmählich transparent</string>
    <string name="dynamic_player">Farbe des dynamischen Players</string>
    <string name="show_background">Hintergrund anzeigen</string>
    <string name="animation">Animation</string>
    <string name="animations">Animationen</string>
    <string name="animations_summary">Haben Sie das Gefühl, zu viel zu stottern? Das Ausschalten könnte helfen</string>
    <string name="refresh">Auffrischen</string>
    <string name="by_x">Um %1$s</string>
    <string name="music">Musik</string>
    <string name="tracker">Tracker</string>
    <string name="lyrics">Liedtext</string>
    <string name="x_extensions">%1$s Erweiterungen</string>
    <string name="enabled">Ermöglichte</string>
    <string name="disabled">Arbeitsunfähig</string>
    <string name="no_user_found">Kein Benutzer gefunden</string>
    <string name="add_extension">Erweiterung hinzufügen</string>
    <string name="error_updating_extension">Fehler beim Aktualisieren</string>
    <string name="webview">Webview-Ansicht</string>
    <string name="logout">Abmeldung</string>
    <string name="switch_account">Konto wechseln</string>
    <string name="incognito">Inkognito</string>
    <string name="not_logged_in">Nicht eingeloggt</string>
    <string name="x_login">%1$s Anmelden</string>
    <string name="x_is_required">%1$s ist erforderlich</string>
    <string name="playing_from">Abspielen von</string>
    <string name="up_next">Als nächstes</string>
    <string name="info">Info</string>
    <string name="seekbar">Suchleiste</string>
    <string name="play">Spielen</string>
    <string name="next">Nächster</string>
    <string name="repeat">Wiederholen</string>
    <string name="close">Schließen</string>
    <string name="no_lyrics">Kein Text</string>
    <string name="sleep_timer">Sleep-Timer</string>
    <string name="end_of_track">Ende der Strecke</string>
    <string name="sleep_on_specific_time">Schlafen Sie zu einer bestimmten Zeit</string>
    <string name="search_x">Suche %1$s</string>
    <string name="servers">Diener</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d Stunde</item>
        <item quantity="other">%1$d Stunden</item>
    </plurals>
    <plurals name="number_min">
        <item quantity="one">%1$d Min</item>
        <item quantity="other">%1$d Minuten</item>
    </plurals>
    <string name="misc">Verschiedenes</string>
    <string name="amoled_summary">Pechschwarz, Pures Schwarz</string>
    <string name="stop_player">Player stoppen</string>
    <string name="audio_permission_summary">So greifst Du auf Deine lokale Musikbibliothek zu</string>
    <string name="write_storage">In Speicher schreiben</string>
    <string name="x_is_not_supported_in_x">%1$s wird in %2$s nicht unterstützt</string>
    <string name="skip_silence_summary">Überspringe den stillen Teils des Songs, um eine lückenlose Wiedergabe zu ermöglichen.</string>
    <string name="cache_playlist_warning">Experimentelle Funktionen. Alles, außer dem Anhören, wird nicht unterstützt.</string>
    <string name="duration_filter_summary">Filter Audiodateien heraus, deren Dauer (in Sekunden) kleiner als der Wert ist</string>
    <string name="extension_installed">%1$s (Installiert)</string>
    <string name="unified_liked_playlist_summary">Deine Lieblingstitel aus verschiedenen Erweiterungen</string>
    <string name="playlist_liked">Gefällt mir</string>
    <string name="unknown">Unbekannt</string>
    <string name="x_disabled">%1$s (Deaktiviert)</string>
    <string name="sleep_timer_cancelled">Sleep-Timer abgebrochen</string>
    <string name="shuffle">Durchmischung</string>
    <string name="extension">Erweiterung</string>
    <string name="auto_start_radio">Radio automatisch starten</string>
    <string name="download_progress">Downloadfortschritt</string>
    <string name="logout_and_login">Ab- und Anmelden</string>
    <string name="view">Ansehen</string>
    <string name="no_internet">Kein Internet</string>
    <string name="choose_a_color">Wähle eine Farbe</string>
    <string name="installation_type_warning">Nicht verfügbar, wenn die Erweiterung als Datei installiert wurde.</string>
    <string name="reset">Zurücksetzen</string>
    <string name="bass_boost_desc">Ein größerer Wert kann den Klang verzerren.</string>
    <string name="stream_quality_summary">Standard-Qualität des Streams auswählen</string>
    <string name="custom_theme_color">Benutzerdefinierte Themenfarbe</string>
    <string name="previous">Vorhergehend</string>
    <string name="open_links_instruction">Um das Öffnen dieser Links zu ermöglichen, müssen Sie Folgendes tun:\n- Scrollen Sie nach unten und klicken Sie auf \"Standardmäßig öffnen\".\n- Klicken Sie auf \"+ Link hinzufügen\"</string>
    <string name="add_color">Farbe hinzufügen</string>
    <string name="_2hr">2h</string>
    <string name="sleep_timer_set_for">Sleep-Timer auf %1$s eingestellt</string>
    <string name="x_extension">%1$s Erweiterung</string>
    <string name="select_x_account">%1$s Konto auswählen</string>
    <string name="_15min">ca. 15 m</string>
    <string name="sleep_timer_desc">Stellen Sie einen Sleep-Timer ein, um die Wiedergabe nach einer bestimmten Zeit zu stoppen</string>
    <string name="_30min">ca. 30 m</string>
    <string name="dynamic_player_summary">Anwenden von Farbe auf den Player basierend auf dem Strecken-Artwork</string>
    <string name="show_background_summary">Hintergrundvideo oder verschwommenes Artwork der Strecke im Player</string>
    <string name="_45min">ca. 45 m</string>
    <string name="_1hr">1h</string>
    <string name="notifications_permission_summary">So bekommst Du Benachrichtigungen für Downloads und Musik</string>
    <string name="remove">Entfernen</string>
    <string name="more_by_x">Mehr von %1$s</string>
    <string name="songs">Lieder</string>
    <string name="albums">Alben</string>
    <string name="x_radio">%1$s Radio</string>
    <string name="cached_songs">Zwischengespeicherte Songs</string>
    <string name="extension_installed_successfully">Die Erweiterung wurde erfolgreich installiert.</string>
    <string name="sources">Quellen</string>
    <string name="backgrounds">Hintergründe</string>
    <string name="subtitles">Untertitel</string>
    <string name="audio_selection">Audio-Auswahl</string>
    <string name="quality_selection">Qualitätsauswahl</string>
    <string name="quality_x">Qualität %1$d</string>
    <string name="off">Aus</string>
    <string name="so_empty">So leer…</string>
    <string name="not_loading">Wird nicht geladen</string>
    <string name="share">Freigeben</string>
    <string name="sharing_x">Freigeben von %1$s</string>
    <string name="save_to_library">In Bibliothek speichern</string>
    <string name="saved_x_to_library">%1$s in der Bibliothek gespeichert</string>
    <string name="remove_from_library">Aus Bibliothek entfernen</string>
    <string name="removed_x_from_library">%1$s aus der Bibliothek entfernt</string>
    <string name="radio">Radio</string>
    <string name="download">Herunterladen</string>
    <string name="follow">Folgen</string>
    <string name="following_x">Nach %1$s</string>
    <string name="followed_x">Befolgt %1$s</string>
    <string name="unfollow">Nicht mehr folgen</string>
    <string name="unfollowing_x">%1$s nicht mehr folgen</string>
    <string name="unfollowed_x">Nicht gefolgt %1$s</string>
    <string name="hide">Verstecken</string>
    <string name="hiding_x">Ausblenden von %1$s</string>
    <string name="unhide">Wieder Einblenden</string>
    <string name="unhiding_x">%1$s wieder Einblenden</string>
    <string name="liking_x">Liken von %1$s</string>
    <string name="liked_x">Gefällt mir %1$s</string>
    <string name="unliking_x">Unbeliebt %1$s</string>
    <string name="unliked_x">Unbeliebt %1$s</string>
    <string name="save_to_playlist">In Wiedergabeliste speichern</string>
    <string name="add_to_next">Zum nächsten hinzufügen</string>
    <string name="add_to_queue">Zur Warteschlange hinzufügen</string>
    <string name="loading_radio_for_x">Radio wird für %1$s geladen</string>
    <string name="playing_x">Spielen von %1$s</string>
    <string name="adding_x_to_queue">Hinzufügen von %1$s zur Warteschlange</string>
    <string name="background_gradient">Hintergrund-Gradient</string>
    <string name="background_gradient_summary">Ein Farbverlauf im Hintergrund je nach Kontext</string>
    <string name="all">Alle</string>
    <string name="edit_playlist">Playlist bearbeiten</string>
    <string name="more_brain_capacity">Mehr Gehirnkapazität</string>
    <string name="sort">Sortieren</string>
    <string name="explicit">Explizit</string>
    <string name="x_plays">%1$s Spiele</string>
    <string name="x_followers">%1$s Follower</string>
    <string name="shuffling_x">Mischen von %1$s</string>
    <string name="copying_the_error">Kopieren des Fehlers</string>
    <string name="reversed">Umgekehrt</string>
    <string name="apply">Anwenden</string>
    <string name="save">Speichern</string>
    <string name="sort_title">Titel</string>
    <string name="sort_date">Datum</string>
    <string name="sort_duration">Dauer</string>
    <string name="scroll_animations">Scroll-Animationen</string>
    <string name="scroll_animations_summary">Animationen beim Scrollen</string>
    <string name="sort_subtitle">Untertitel</string>
    <string name="playlist_name">Name der Wiedergabeliste</string>
    <string name="playlist_description">Beschreibung der Wiedergabeliste</string>
    <string name="create_playlist">Playlist erstellen</string>
    <string name="create">Erstellten</string>
    <string name="add_song">Song hinzufügen</string>
    <string name="creating_x">Erstellen von %1$s</string>
    <string name="playlist_name_empty">Der Name der Wiedergabeliste ist leer</string>
    <string name="x_created">%1$s erstellt</string>
    <string name="deleting_x">Löschen von %1$s</string>
    <string name="deleted_x">Gelöscht %1$s</string>
    <string name="loading_x">%1s wird geladen</string>
    <string name="saving_x">Einsparung von %1$s</string>
    <string name="saved_to_x">Gespeichert auf %1$s</string>
    <string name="saved_to_playlists">In Wiedergabelisten gespeichert</string>
    <string name="selected_n">Ausgewählt %1$d</string>
    <string name="adding_x">Hinzufügen von %1$s</string>
    <string name="moving_x">Verschieben von %1$s</string>
    <string name="removing_x">Entfernen von %1$s</string>
    <string name="no_download_extension">Keine Download-Erweiterung gefunden, verwenden Sie den Code \"echodown\", um sie zu erhalten.</string>
    <string name="download_started">Download gestartet</string>
    <string name="merging_x">Zusammenführen von %1$s</string>
    <string name="tagging_x">Markieren von %1$s</string>
    <string name="apply_player_color_to_app">Anwenden der Playerfarbe auf die gesamte App</string>
    <string name="apply_player_color_to_app_summary">VERZÖGERUNGS-WARNUNG!!</string>
    <string name="sort_and_filter">Sortieren und Filtern</string>
    <string name="delete_playlist">Wiedergabeliste löschen</string>
    <string name="subtitle_selection">Auswahl der Untertitel</string>
    <string name="nothing_to_download_in_x">Nichts zum Herunterladen in %1$s</string>
    <string name="more_brain_capacity_summary">Einen Aktivierung kann die Audioverzögerung auf Kosten des Akkuverbrauchs beheben. (Deaktiviert das Audio-Offloading).</string>
    <string name="unknown_quality">Unbekannte Qualität</string>
    <string name="video_selection">Video-Auswahl</string>
    <string name="adding_x_to_next">Hinzufügen von %1$s zum nächsten</string>
    <string name="filter">Filter</string>
    <string name="delete">Löschen</string>
    <string name="delete_download">Download löschen</string>
    <string name="removed_x_from_downloads">%1$s aus Downloads entfernt</string>
    <string name="download_complete">Download Komplett</string>
    <string name="app_widget_description">Echo auf Ihrem Startbildschirm!</string>
    <string name="item">Eintrag</string>
    <plurals name="number_items">
        <item quantity="one">%1$d Eintrag</item>
        <item quantity="other">%1$d Einträge</item>
    </plurals>
    <string name="x_specific_quality_summary">Die spezifische Stream-Qualität von %1$s überschreibt die Standardauswahl für die Stream-Qualität</string>
    <string name="unmetered_stream_quality">Unbegrenzte Stream-Qualität</string>
    <string name="unmetered_stream_quality_summary">Streamingqualität in unbegrenzten Netzwerkerkverbindungen. Überschreibt die Standard-Streamingqualität.</string>
    <string name="select_language">Sprache auswählen</string>
    <string name="check_for_updates">Nach Updates suchen</string>
    <string name="check_for_updates_summary">Prüfe beim Öffnen von Echo die App und Erweiterungen auf Aktualisierungen.</string>
    <string name="checking_for_updates">Suche nach Aktualisierungen</string>
    <string name="back_animations">\"Zurück\"-Animationen</string>
    <string name="back_animations_summary">Kann visuellen Android-Bug auslösen, lässt sich aber beheben durch öffnen von \"Letzte Apps\".</string>
    <string name="regex_invalid">%1$s ist ungültig, bitte folge dem Regex: %2$s</string>
    <string name="n_hours">%1$d Stunden</string>
    <string name="n_minutes">%1$d Minuten</string>
    <string name="hidden_x">%1$s Ausgeblendet</string>
    <string name="unhidden_x">%1$s Eingeblendet</string>
    <string name="track">Titel</string>
    <string name="tracks">Titel</string>
    <string name="n_episodes">%1$d Episoden</string>
    <string name="n_chapters">%1$d Kapitel</string>
    <string name="n_tracks">%1$d Titel</string>
    <plurals name="number_episodes">
        <item quantity="one">%1$d Episode</item>
        <item quantity="other">%1$d Episoden</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d Kapitel</item>
        <item quantity="other">%1$d Kapitel</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d Titel</item>
        <item quantity="other">%1$d Titel</item>
    </plurals>
    <string name="unsave">Löschen</string>
    <string name="sort_date_added">Hinzugefügt am</string>
    <string name="opening_webview_x">Öffne Webview: %1$s</string>
    <string name="no_update_available_for_x">Kein Update verfügbar für %1$s</string>
    <string name="other">Anderes</string>
    <string name="about">Über</string>
    <string name="language_x">Sprache: %1$s</string>
    <string name="guide">Anleitung</string>
    <string name="donate">Spenden</string>
    <string name="contributors">Mitwirkende</string>
    <string name="app_desc">Nur ein Musikspieler.</string>
    <string name="manage">Verwalten</string>
    <string name="no_account">Kein Account</string>
    <string name="other_settings">Andere Einstellungen</string>
    <string name="no_x_found">%1$s nicht gefunden</string>
    <string name="playlist">Playliste</string>
    <string name="pre_release">Vorabveröffentlichung</string>
    <string name="compilation">Kompilation</string>
    <string name="show">Anzeigen</string>
    <string name="book">Buch</string>
    <string name="disc_number_n">Disknummer: %1$d</string>
    <string name="album_order_n">Album-Bestellnumner: %1$d</string>
    <string name="confirmation">Bestätigung</string>
    <string name="delete_playlist_confirmation">%1$s wirklich löschen?</string>
    <string name="confirm">Bestätige</string>
    <string name="big_cover">Größere Cover</string>
    <string name="big_cover_summary">Gut für Geräte mit großem Bildschirm</string>
    <string name="no_last_played_track_found">Kein zuletzt gespielter Titel gefunden.</string>
    <string name="not_yet_released">Noch nicht veröffentlicht</string>
    <string name="releases_on_x">Veröffentlichung am %1$s</string>
    <string name="unavailable_in_your_region">In deiner Region nicht verfügbar</string>
    <string name="not_playable_x">Nicht Abspielbar: %1$s</string>
    <string name="n_songs">%1$d Songs</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d Song</item>
        <item quantity="other">%1$d Songs</item>
    </plurals>
    <string name="player">Player</string>
    <string name="album">Album</string>
    <string name="single">Single</string>
    <string name="ep">EP</string>
    <string name="lp">LP</string>
    <string name="song">Song</string>
    <string name="podcast">Podcast</string>
    <string name="feed">Feed</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="genres_x">Genres: %1$s</string>
    <string name="colors">Farben</string>
    <string name="scroll_bar">Bildlaufleiste</string>
    <string name="scroll_bar_summary">Bildlaufleiste an der Seite für schnelleren Zugriff (kann fehlerhaft sein)</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-es\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="back">Atrás</string>
    <string name="cancel">Cancelar</string>
    <string name="tabs">Pestañas</string>
    <string name="extension_updated_successfully">%1$s actualizado correctamente</string>
    <string name="link">Enlace</string>
    <string name="link_or_code">Enlace o código</string>
    <string name="list_is_empty">La lista está vacía</string>
    <string name="look_and_feel">Apariencia</string>
    <string name="next">Siguiente</string>
    <string name="all">Todo</string>
    <string name="filter">Filtrar</string>
    <string name="x_permission_required">Se requiere permiso de %1$s</string>
    <string name="x_was_not_granted">No se concedió el permiso de %1$s</string>
    <string name="audio">Audio</string>
    <string name="audio_permission_summary">Para acceder a sus canciones guardadas localmente</string>
    <string name="video">Vídeo</string>
    <string name="read_storage">Acceder a sus archivos</string>
    <string name="write_storage">Crear archivos en el almacenamiento interno</string>
    <string name="write_storage_permission_summary">Para crear y editar listas de reproducción locales</string>
    <string name="notifications">Notificaciones</string>
    <string name="notifications_permission_summary">Para mostrar notificaciones de descargas y música</string>
    <string name="remove">Quitar</string>
    <string name="more_by_x">Más de %1$s</string>
    <string name="songs">Canciones</string>
    <string name="albums">Álbumes</string>
    <string name="x_radio">Radio de %1$s</string>
    <string name="cached_songs">Canciones prealmacenadas</string>
    <string name="cache_playlist_warning">Función experimental. No se permite ninguna acción excepto escuchar.</string>
    <string name="artists">Artistas</string>
    <string name="recently_added">Añadidos recientemente</string>
    <string name="refresh_library_on_reload">Actualizar colección al recargar</string>
    <string name="refresh_library_on_reload_summary">Examinar almacenamiento cada vez que se abra la app</string>
    <string name="duration_filter">Filtro de duración</string>
    <string name="duration_filter_summary">Ignorar archivos de audio cuya duración (en segundos) sea menor que el valor</string>
    <string name="blacklist_folders">Carpetas en lista negra</string>
    <string name="blacklist_folders_summary">Carpetas para excluir de la colección</string>
    <string name="blacklist_folder_keywords">Palabras clave para carpetas en lista negra</string>
    <string name="blacklist_folder_keywords_summary">Palabras clave para incluir carpetas en la lista negra. Use la coma para separar</string>
    <string name="saved">Guardadas</string>
    <string name="show_tabs">Mostrar pestañas</string>
    <string name="show_tab_summary">Mostrar pestañas de las extensiones como categorías</string>
    <string name="unified_liked_playlist_summary">Sus pistas favoritas de varias extensiones</string>
    <string name="n_items">%1$d elementos</string>
    <string name="playlist_liked">Favoritas</string>
    <string name="playlist_liked_desc">Sus pistas favoritas</string>
    <string name="unknown">Desconocido</string>
    <string name="like">Me gusta</string>
    <string name="unlike">No me gusta</string>
    <string name="repeat_one">Repetir una vez</string>
    <string name="repeat_off">Sin repetición</string>
    <string name="repeat_all">Repetir todo</string>
    <string name="home">Inicio</string>
    <string name="search">Buscar</string>
    <string name="library">Colección</string>
    <string name="more">Más</string>
    <string name="extension">Extensión</string>
    <string name="downloading_x">Descargando %1$s</string>
    <string name="cancel_all">Cancelar todo</string>
    <string name="download_progress">Progreso de la descarga</string>
    <string name="downloads">Descargas</string>
    <string name="downloaded_x">Descargado %1$s</string>
    <string name="logout_and_login">Finalizar sesión y acceder</string>
    <string name="login">Acceder</string>
    <string name="view">Ver</string>
    <string name="extension_out_of_date">Extensión desactualizada</string>
    <string name="no_internet">Sin Internet</string>
    <string name="error_loading_extension_from_x">Error al cargar la extensión desde %1$s</string>
    <string name="extension_x_not_found">No se encontró la extensión %1$s</string>
    <string name="required_extensions_missing_x">Faltan extensiones requeridas: %1$s</string>
    <string name="x_login_required">Se requiere acceder a %1$s</string>
    <string name="x_is_not_supported_in_x">%1$s no se admite en %2$s</string>
    <string name="account_session_expired_in_x">La sesión de la cuenta caducó el %1$s</string>
    <string name="error_x">Error: %1$s</string>
    <string name="str_copy">Copiar</string>
    <string name="extensions">Extensiones</string>
    <string name="choose_a_color">Elegir un color</string>
    <string name="random">Al azar</string>
    <string name="add">Añadir</string>
    <string name="loading">Cargando…</string>
    <string name="settings">Configuración</string>
    <string name="value">Valor</string>
    <string name="value_not_set">No establecido</string>
    <string name="playback">Reproducción</string>
    <string name="audio_fx">Efectos de audio</string>
    <string name="audio_fx_summary">Efectos aplicados a todas las canciones</string>
    <string name="audio_fx_desc">Cambie los efectos de audio para la pista actual.</string>
    <string name="reset">Restablecer</string>
    <string name="playback_speed">Velocidad de reproducción</string>
    <string name="change_pitch_with_speed">Cambiar tono con la velocidad</string>
    <string name="bass_boost">Aumento de bajos</string>
    <string name="bass_boost_desc">Un valor mayor puede distorsionar el sonido.</string>
    <string name="change_pitch_with_speed_desc">Consiga el sonido de cámara lenta</string>
    <string name="equalizer">Ecualizador</string>
    <string name="equalizer_summary">Abrir la configuración del ecualizador del sistema</string>
    <string name="stream_quality">Calidad de retransmisión</string>
    <string name="stream_quality_summary">Seleccione la calidad de la transmisión</string>
    <string name="behavior">Comportamiento</string>
    <string name="keep_queue">Mantener cola del reproductor</string>
    <string name="keep_queue_summary">Recupera la cola del reproductor al reabrir la aplicación.</string>
    <string name="stop_player">Detener reproductor</string>
    <string name="stop_player_summary">Detener la reproducción al quitar la aplicación de Recientes</string>
    <string name="skip_silence">Saltar silencio</string>
    <string name="skip_silence_summary">Omitir la parte silenciosa de la canción para una reproducción sin pausas.</string>
    <string name="auto_start_radio">Iniciar radio automáticamente</string>
    <string name="auto_start_radio_summary">Añadir automáticamente canciones relacionadas a la lista para una cola infinita</string>
    <string name="cache_size">Tamaño de antememoria</string>
    <string name="version">Versión</string>
    <string name="cache_size_summary">Tamaño en MB de prealmacenamiento de audio y vídeo</string>
    <string name="system">Sistema</string>
    <string name="install">Instalar</string>
    <string name="app">Aplicación</string>
    <string name="file">Archivo</string>
    <string name="installation_type">Tipo de instalación</string>
    <string name="installation_type_summary">La instalación de la aplicación permitirá que estos enlaces se abran en Echo:</string>
    <string name="installation_type_warning">No está disponible si instala la extensión como un archivo.</string>
    <string name="could_not_find_the_file">No se pudo encontrar el archivo.</string>
    <string name="extension_installer">Instalador de extensiones</string>
    <string name="extension_installed_successfully">Extensión instalada correctamente.</string>
    <string name="extension_uninstalled_successfully">Extensión desinstalada correctamente.</string>
    <string name="allow_opening_links">Permitir abrir enlaces</string>
    <string name="open_links_instruction">Para permitir abrir estos enlaces, necesita:\n- Desplazarse hacia abajo y tocar «Abrir de manera predeterminada»\n- Tocar «+ Añadir enlace»</string>
    <string name="downloading_update_for_x">Descargando actualización para %1$s</string>
    <string name="extension_installed">%1$s (instalada)</string>
    <string name="add_extensions">Añadir extensiones</string>
    <string name="invalid_extension_list">Lista de extensiones no válida</string>
    <string name="ui">Interfaz</string>
    <string name="theme">Tema</string>
    <string name="theme_summary">¿Quiere perder la visión?</string>
    <string name="custom_theme_color">Color de tema personalizado</string>
    <string name="custom_theme_color_summary">Usar un color de tema personalizado en lugar del tema del sistema.</string>
    <string name="add_color">Añadir color</string>
    <string name="custom_colors">Colores personalizados</string>
    <string name="amoled">AMOLED</string>
    <string name="amoled_summary">Reemplazar el color de fondo con negro intenso. Útil en pantallas AMOLED para reducir el consumo de batería y evitar imágenes fantasma por sobreexposición</string>
    <string name="navbar_gradient">Barra de navegación con degradado</string>
    <string name="animation">Animación</string>
    <string name="navbar_gradient_summary">La barra de navegación se vuelve gradualmente transparente</string>
    <string name="dynamic_player">Color dinámico del reproductor</string>
    <string name="dynamic_player_summary">Aplica un color al reproductor basado en la carátula de la canción</string>
    <string name="show_background">Mostrar fondo</string>
    <string name="show_background_summary">Video de fondo o carátula difuminada de la pista en el reproductor</string>
    <string name="animations">Animaciones</string>
    <string name="animations_summary">¿Siente lentitud en la aplicación? Desactivarlo podría ayudar</string>
    <string name="refresh">Actualizar</string>
    <string name="x_disabled">%1$s (desactivado)</string>
    <string name="by_x">Por %1$s</string>
    <string name="music">Música</string>
    <string name="tracker">Rastreador</string>
    <string name="lyrics">Letras</string>
    <string name="misc">Varios</string>
    <string name="x_extensions">%1$s extensiones</string>
    <string name="x_extension">%1$s extensión</string>
    <string name="enabled">Activado</string>
    <string name="disabled">Desactivado</string>
    <string name="no_user_found">No se encontró ningún usuario</string>
    <string name="select_x_account">Seleccionar cuenta de %1$s</string>
    <string name="add_extension">Añadir extensión</string>
    <string name="error_updating_extension">Error al actualizar</string>
    <string name="webview">WebView</string>
    <string name="logout">Salir</string>
    <string name="switch_account">Cambiar cuenta</string>
    <string name="incognito">Incógnito</string>
    <string name="not_logged_in">No ha accedido</string>
    <string name="x_login">Acceder a %1$s</string>
    <string name="x_is_required">%1$s es obligatorio</string>
    <string name="playing_from">Reproduciendo desde</string>
    <string name="up_next">A continuación</string>
    <string name="info">Información</string>
    <string name="seekbar">Barra de posición</string>
    <string name="shuffle">Aleatorio</string>
    <string name="previous">Anterior</string>
    <string name="play">Reproducir</string>
    <string name="repeat">Repetir</string>
    <string name="close">Cerrar</string>
    <string name="no_lyrics">Sin letra</string>
    <string name="sleep_timer">Temporizador de sueño</string>
    <string name="end_of_track">Fin de la pista</string>
    <string name="_15min">15m</string>
    <string name="_30min">30m</string>
    <string name="_45min">45m</string>
    <string name="_1hr">1h</string>
    <string name="_2hr">2h</string>
    <string name="sleep_timer_desc">Establecer un temporizador para detener la reproducción después de cierto tiempo</string>
    <string name="sleep_on_specific_time">Dormir a una hora específica</string>
    <string name="sleep_timer_cancelled">Temporizador de sueño cancelado</string>
    <string name="sleep_timer_set_for">Temporizador de sueño configurado para %1$s</string>
    <string name="search_x">Buscar en %1$s</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d hora</item>
        <item quantity="many">%1$d horas</item>
        <item quantity="other">%1$d horas</item>
    </plurals>
    <plurals name="number_min">
        <item quantity="one">%1$d minuto</item>
        <item quantity="many">%1$d minutos</item>
        <item quantity="other">%1$d minutos</item>
    </plurals>
    <string name="servers">Servidores</string>
    <string name="sources">Fuentes</string>
    <string name="backgrounds">Fondos</string>
    <string name="subtitles">Subtítulos</string>
    <string name="audio_selection">Selección de audio</string>
    <string name="video_selection">Selección de vídeo</string>
    <string name="subtitle_selection">Selección de subtítulos</string>
    <string name="quality_selection">Selección de calidad</string>
    <string name="quality_x">Calidad %1$d</string>
    <string name="off">Apagado</string>
    <string name="unknown_quality">Calidad desconocida</string>
    <string name="so_empty">Tan vacío…</string>
    <string name="not_loading">No se carga</string>
    <string name="share">Compartir</string>
    <string name="sharing_x">Compartiendo %1$s</string>
    <string name="save_to_library">Guardar en la colección</string>
    <string name="saved_x_to_library">Se guardó %1$s en la colección</string>
    <string name="remove_from_library">Eliminar de la colección</string>
    <string name="removed_x_from_library">Se eliminó %1$s de la colección</string>
    <string name="radio">Radio</string>
    <string name="download">Descargar</string>
    <string name="follow">Seguir</string>
    <string name="following_x">Siguiendo a %1$s</string>
    <string name="followed_x">Seguido %1$s</string>
    <string name="unfollow">Dejar de seguir</string>
    <string name="unfollowing_x">Dejando de seguir a %1$s</string>
    <string name="unfollowed_x">Dejó de seguir a %1$s</string>
    <string name="hide">Ocultar</string>
    <string name="hiding_x">Ocultando %1$s</string>
    <string name="unhide">Mostrar</string>
    <string name="unhiding_x">Mostrando %1$s</string>
    <string name="liking_x">Dando me gusta a %1$s</string>
    <string name="liked_x">Me gustó %1$s</string>
    <string name="unliking_x">Quitando me gusta a %1$s</string>
    <string name="unliked_x">Quitado me gusta a %1$s</string>
    <string name="save_to_playlist">Guardar en lista de reproducción</string>
    <string name="delete_playlist">Eliminar lista de reproducción</string>
    <string name="add_to_next">Añadir a continuación</string>
    <string name="add_to_queue">Añadir a la cola</string>
    <string name="loading_radio_for_x">Cargando radio para %1$s</string>
    <string name="playing_x">Reproduciendo %1$s</string>
    <string name="adding_x_to_queue">Añadiendo %1$s a la cola</string>
    <string name="adding_x_to_next">Añadiendo %1$s a continuación</string>
    <string name="background_gradient">Degradado de fondo</string>
    <string name="background_gradient_summary">Un tinte degradado en el fondo según el contexto</string>
    <string name="edit_playlist">Editar lista de reproducción</string>
    <string name="more_brain_capacity">Mayor capacidad cerebral</string>
    <string name="more_brain_capacity_summary">Activar esto puede solucionar el retraso del audio, pero aumenta drásticamente el uso de la batería (desactiva el descargo de audio).</string>
    <string name="sort">Ordenar</string>
    <string name="explicit">Explícito</string>
    <string name="x_plays">%1$s reproducciones</string>
    <string name="x_followers">%1$s seguidores</string>
    <string name="shuffling_x">Reproduciendo al azar %1$s</string>
    <string name="copying_the_error">Copiando el error</string>
    <string name="sort_and_filter">Ordenar y filtrar</string>
    <string name="reversed">Invertido</string>
    <string name="apply">Aplicar</string>
    <string name="save">Guardar</string>
    <string name="sort_title">Título</string>
    <string name="sort_date">Fecha</string>
    <string name="sort_duration">Duración</string>
    <string name="scroll_animations">Animaciones al desplazar</string>
    <string name="scroll_animations_summary">Animaciones durante el desplazamiento</string>
    <string name="sort_subtitle">Subtítulo</string>
    <string name="delete">Eliminar</string>
    <string name="playlist_name">Nombre de la lista</string>
    <string name="playlist_description">Descripción de la lista</string>
    <string name="create_playlist">Crear lista de reproducción</string>
    <string name="create">Crear</string>
    <string name="add_song">Añadir canción</string>
    <string name="creating_x">Creando %1$s</string>
    <string name="playlist_name_empty">El nombre de la lista está vacío</string>
    <string name="x_created">%1$s creado</string>
    <string name="deleting_x">Eliminando %1$s</string>
    <string name="deleted_x">Eliminado %1$s</string>
    <string name="loading_x">Cargando %1s</string>
    <string name="saving_x">Guardando %1$s</string>
    <string name="saved_to_x">Guardado en %1$s</string>
    <string name="saved_to_playlists">Guardado en listas</string>
    <string name="selected_n">Seleccionado %1$d</string>
    <string name="adding_x">Añadiendo %1$s</string>
    <string name="moving_x">Moviendo %1$s</string>
    <string name="removing_x">Quitando %1$s</string>
    <string name="no_download_extension">No se encontró la extensión de descargas; use el código «echodown» para obtenerla.</string>
    <string name="nothing_to_download_in_x">Nada para descargar en %1$s</string>
    <string name="download_started">Descarga iniciada</string>
    <string name="merging_x">Uniendo %1$s</string>
    <string name="tagging_x">Etiquetando %1$s</string>
    <string name="okay">Aceptar</string>
    <string name="apply_player_color_to_app">Aplicar el color del reproductor a toda la aplicación</string>
    <string name="apply_player_color_to_app_summary">¡ALERTA DE DESFASE!</string>
    <string name="delete_download">Eliminar descarga</string>
    <string name="removed_x_from_downloads">Eliminado %1$s de las descargas</string>
    <string name="download_complete">Descarga completada</string>
    <string name="app_widget_description">¡Echo en tu pantalla de inicio!</string>
    <string name="x_specific_quality_summary">%1$s La calidad de transmisión específica anulará la selección de calidad de transmisión predeterminada</string>
    <string name="unmetered_stream_quality_summary">La calidad de la transmisión al conectarse a una red sin límite de consumo. Esto anulará la calidad de transmisión predeterminada.</string>
    <string name="select_language">Seleccionar Idioma</string>
    <string name="check_for_updates">Buscar actualizaciones</string>
    <string name="check_for_updates_summary">Busque nuevas actualizaciones tanto de la aplicación como de las extensiones cuando abra la aplicación.</string>
    <string name="checking_for_updates">Buscando actualizaciones</string>
    <string name="back_animations_summary">Puede causar un error visual debido a Android, pero puedes abrir Recientes para solucionarlo.</string>
    <string name="n_hours">%1$d Horas</string>
    <string name="n_minutes">%1$d minutos</string>
    <string name="hidden_x">Ocultar %1$s</string>
    <string name="unhidden_x">Mostrar %1$s</string>
    <string name="track">Pista</string>
    <string name="tracks">Pistas</string>
    <string name="n_songs">%1$d Canciones</string>
    <string name="n_episodes">%1$d Episodios</string>
    <string name="n_chapters">%1$d Capítulos</string>
    <string name="n_tracks">%1$d Pistas</string>
    <string name="unsave">No guardar</string>
    <string name="sort_date_added">Fecha De Agregado</string>
    <string name="opening_webview_x">Abriendo Webview: %1$s</string>
    <string name="no_update_available_for_x">No hay actualizaciones para %1$s</string>
    <string name="other">Otros</string>
    <string name="about">Acerca de</string>
    <string name="language_x">Idioma: %1$s</string>
    <string name="guide">Guía</string>
    <string name="donate">Donar</string>
    <string name="contributors">Colaboradores</string>
    <string name="app_desc">Sólo un reproductor de música.</string>
    <string name="manage">Administrar</string>
    <string name="no_account">No Hay cuenta</string>
    <string name="other_settings">Otras configuraciones</string>
    <string name="no_x_found">No %1$s encontrado</string>
    <string name="pre_release">Prelanzamiento</string>
    <string name="compilation">Compilación</string>
    <string name="book">Libro</string>
    <string name="song">Canción</string>
    <string name="podcast">Podcast</string>
    <string name="genres_x">Géneros: %1$s</string>
    <string name="disc_number_n">Número de disco: %1$d</string>
    <string name="album_order_n">Número de orden del álbum: %1$d</string>
    <string name="confirmation">Confirmación</string>
    <string name="delete_playlist_confirmation">Estas seguro de qué quieres eliminar %1$s?</string>
    <string name="confirm">Confirmar</string>
    <string name="big_cover_summary">Bueno para dispositivos con pantallas más grandes</string>
    <string name="no_last_played_track_found">No se encontró la última pista reproducida.</string>
    <string name="not_yet_released">Aún no publicado</string>
    <string name="releases_on_x">Lanzamiento en %1$s</string>
    <string name="unavailable_in_your_region">No esta Disponible en tu región</string>
    <string name="not_playable_x">No se puede reproducir: %1$s</string>
    <string name="unmetered_stream_quality">Calidad de transmisión sin medición</string>
    <string name="regex_invalid">%1$s es inválido; debe coincidir con la expresión regular: %2$s</string>
    <string name="item">Elemento</string>
    <string name="colors">Colores</string>
    <string name="scroll_bar_summary">Barra de desplazamiento lateral para un acceso más rápido (puede ser inestable)</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d Canción</item>
        <item quantity="many">%1$d Canciones</item>
        <item quantity="other">%1$d Canciones</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d Capítulo</item>
        <item quantity="many">%1$d Capítulos</item>
        <item quantity="other">%1$d Capítulos</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d Pista</item>
        <item quantity="many">%1$d Pistas</item>
        <item quantity="other">%1$d Pistas</item>
    </plurals>
    <string name="player">Reproductor</string>
    <string name="playlist">Lista de reproducción</string>
    <string name="album">Álbum</string>
    <string name="single">Sencillo</string>
    <string name="show">Mostrar</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="big_cover">Portadas más grandes</string>
    <string name="currently_playing">Reproduciendo ahora</string>
    <string name="feed">Novedades</string>
    <plurals name="number_items">
        <item quantity="one">%1$d Elemento</item>
        <item quantity="many">%1$d Elementos</item>
        <item quantity="other">%1$d Elementos</item>
    </plurals>
    <string name="scroll_bar">Barra de desplazamiento</string>
    <string name="back_animations">Animaciones de retroceso</string>
    <plurals name="number_episodes">
        <item quantity="one">%1$d Episodio</item>
        <item quantity="many">%1$d Episodios</item>
        <item quantity="other">%1$d Episodios</item>
    </plurals>
    <string name="ep">EP</string>
    <string name="lp">LP</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-fa\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">باشه</string>
    <string name="cancel">لغو</string>
    <string name="back">بازگشت</string>
    <string name="notifications">اعلان</string>
    <string name="remove">حذف</string>
    <string name="more_by_x">بیشتر از %1$s</string>
    <string name="songs">اهنگ ها</string>
    <string name="albums">البوم ها</string>
    <string name="x_radio">رادیو %1$s</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-fr\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="tabs">Onglets</string>
    <string name="repeat_one">Répéter Une Fois</string>
    <string name="duration_filter_summary">Filtrer les fichiers audio dont la durée (en secondes) est inférieure à la valeur</string>
    <string name="unified_liked_playlist_summary">Vos morceaux préférés de différentes extensions</string>
    <string name="cancel_all">Tout Annuler</string>
    <string name="downloads">Téléchargements</string>
    <string name="random">Aléatoire</string>
    <string name="audio_fx_summary">Effets appliqués à toutes les chansons</string>
    <string name="choose_a_color">Choisissez une couleur</string>
    <string name="playback">Lecture</string>
    <string name="x_permission_required">%1$s Autorisation Requise</string>
    <string name="view">Voir</string>
    <string name="video">Vidéo</string>
    <string name="loading">Chargement…</string>
    <string name="extension_uninstalled_successfully">Extension désinstallée avec succès.</string>
    <string name="blacklist_folder_keywords_summary">Mots-clés pour exclure les dossiers, utiliser la virgule comme séparateur</string>
    <string name="show_tab_summary">Va afficher les onglets des extensions sous forme de catégories</string>
    <string name="playing_from">Lecture Depuis</string>
    <string name="_2hr">2 h</string>
    <string name="cancel">Annuler</string>
    <string name="back">Retour</string>
    <string name="x_was_not_granted">%1$s n\'a pas été accordée</string>
    <string name="audio_permission_summary">Pour accéder à votre bibliothèque musicale locale</string>
    <string name="read_storage">Lire le Stockage</string>
    <string name="write_storage">Modifier le Stockage</string>
    <string name="notifications">Notifications</string>
    <string name="notifications_permission_summary">Pour afficher les notifications lors du téléchargement et de l\'écoute</string>
    <string name="remove">Retirer</string>
    <string name="more_by_x">Plus par %1$s</string>
    <string name="songs">Chansons</string>
    <string name="albums">Albums</string>
    <string name="x_radio">%1$s Radio</string>
    <string name="cached_songs">Chansons Mises en Cache</string>
    <string name="artists">Artistes</string>
    <string name="recently_added">Ajouts Récents</string>
    <string name="refresh_library_on_reload">Actualiser la Bibliothèque lors du Rechargement</string>
    <string name="duration_filter">Filtre de Durée</string>
    <string name="blacklist_folders">Exclure des Dossiers</string>
    <string name="blacklist_folder_keywords">Mots-clés des Dossiers à Exclure</string>
    <string name="saved">Enregistrées</string>
    <string name="show_tabs">Afficher les Onglets</string>
    <string name="n_items">%1$d Éléments</string>
    <string name="playlist_liked_desc">Vos morceaux préférés</string>
    <string name="unknown">Inconnu</string>
    <string name="like">Aimer</string>
    <string name="unlike">Ne Plus Aimer</string>
    <string name="repeat_all">Répéter Tout</string>
    <string name="search">Recherche</string>
    <string name="more">Plus</string>
    <string name="extension">Extension</string>
    <string name="downloading_x">Téléchargement de %1$s</string>
    <string name="download_progress">Progression du Téléchargement</string>
    <string name="downloaded_x">%1$s Téléchargé</string>
    <string name="logout_and_login">Déconnecter et Reconnecter vous</string>
    <string name="login">Se Connecter</string>
    <string name="extension_out_of_date">Obsolète</string>
    <string name="error_loading_extension_from_x">Erreur lors du chargement de l\'extension depuis %1$s</string>
    <string name="x_login_required">Connexion à %1$s requise</string>
    <string name="x_is_not_supported_in_x">%1$s n\'est pas pris en charge dans %2$s</string>
    <string name="account_session_expired_in_x">Session du Compte expirée dans %1$s</string>
    <string name="str_copy">Copier</string>
    <string name="add">Ajouter</string>
    <string name="value">Valeur</string>
    <string name="value_not_set">Non Défini</string>
    <string name="audio_fx">Effets Audio</string>
    <string name="audio_fx_desc">Modifiez les effets audio de la piste actuelle.</string>
    <string name="reset">Réinitialiser</string>
    <string name="playback_speed">Vitesse de Lecture</string>
    <string name="change_pitch_with_speed">Changer la hauteur avec la vitesse</string>
    <string name="bass_boost_desc">Une valeur élevée peut déformer le son.</string>
    <string name="change_pitch_with_speed_desc">Obtenez ce son de ralenti</string>
    <string name="equalizer">Égaliseur</string>
    <string name="stream_quality">Qualité du Flux</string>
    <string name="behavior">Comportement</string>
    <string name="keep_queue">Garder la Liste du Lecteur</string>
    <string name="keep_queue_summary">Conserve la liste de lecture lorsque vous rouvrez l\'application.</string>
    <string name="stop_player">Arrêter le lecteur</string>
    <string name="stop_player_summary">Arrêté le lecteur lorsque l\'appli est fermée</string>
    <string name="skip_silence">Passer les Silences</string>
    <string name="skip_silence_summary">Ignore les parties silencieuses de la chanson pour une lecture sans interruption.</string>
    <string name="auto_start_radio">Démarrage Auto de la Radio</string>
    <string name="auto_start_radio_summary">Ajoutez automatiquement les chansons associées à la piste dans la playlist, pour avoir une file d\'attente infinie</string>
    <string name="cache_size">Taille du Cache</string>
    <string name="cache_size_summary">Taille en Mo pour mettre en cache l\'audio et la vidéo</string>
    <string name="install">Installer</string>
    <string name="app">Appli</string>
    <string name="file">Fichier</string>
    <string name="installation_type">Type d\'Installation</string>
    <string name="installation_type_warning">Non disponible si vous installez l\'extension en tant que Fichier.</string>
    <string name="extension_installer">Installateur d\'Extension</string>
    <string name="allow_opening_links">Autoriser l\'ouverture des liens</string>
    <string name="downloading_update_for_x">Téléchargement de la mise à jour pour %1$s</string>
    <string name="link_or_code">Lien ou Code</string>
    <string name="list_is_empty">Liste Vide</string>
    <string name="extension_installed">%1$s (Installé)</string>
    <string name="invalid_extension_list">Liste d\'extensions invalide</string>
    <string name="look_and_feel">Apparence et Ressenti</string>
    <string name="ui">Interface Utilisateur</string>
    <string name="theme_summary">Voulez-vous devenir aveugle ?</string>
    <string name="add_color">Ajouter une couleur</string>
    <string name="custom_colors">Couleurs Personnalisées</string>
    <string name="amoled">AMOLED</string>
    <string name="navbar_gradient">Dégradé de la Barre de Navigation</string>
    <string name="navbar_gradient_summary">La barre de navigation devient progressivement transparente</string>
    <string name="dynamic_player">Couleur du Lecteur Dynamique</string>
    <string name="dynamic_player_summary">Appliquer une couleur au lecteur en fonction de l\'Illustration de la Piste</string>
    <string name="show_background">Afficher l\'Arrière-plan</string>
    <string name="animation">Animation</string>
    <string name="refresh">Rafraîchir</string>
    <string name="x_disabled">%1$s (Désactivé)</string>
    <string name="music">Musique</string>
    <string name="tracker">Traqueur</string>
    <string name="lyrics">Paroles</string>
    <string name="misc">Divers</string>
    <string name="x_extensions">%1$s Extensions</string>
    <string name="x_extension">%1$s Extension</string>
    <string name="enabled">Activé</string>
    <string name="disabled">Désactivé</string>
    <string name="no_user_found">Aucun utilisateur trouvé</string>
    <string name="select_x_account">Sélectionnez un compte %1$s</string>
    <string name="add_extension">Ajouter une Extension</string>
    <string name="error_updating_extension">Erreur lors de la mise à jour</string>
    <string name="webview">Vue web</string>
    <string name="logout">Se Déconnecter</string>
    <string name="switch_account">Changer de Compte</string>
    <string name="incognito">Incognito</string>
    <string name="not_logged_in">Non Connecté</string>
    <string name="x_login">Connexion %1$s</string>
    <string name="x_is_required">%1$s est requis</string>
    <string name="up_next">À Suivre</string>
    <string name="seekbar">Barre de Recherche</string>
    <string name="shuffle">Mélanger</string>
    <string name="close">Fermer</string>
    <string name="no_lyrics">Aucune Parole</string>
    <string name="sleep_timer">Minuterie de Sommeil</string>
    <string name="end_of_track">Fin de la Piste</string>
    <string name="_15min">15 min</string>
    <string name="_30min">30 min</string>
    <string name="_45min">45 min</string>
    <string name="sleep_timer_desc">Réglez une minuterie de mise en veille pour arrêter la lecture après un certain temps</string>
    <string name="sleep_on_specific_time">Dormir à une heure précise</string>
    <string name="sleep_timer_cancelled">Minuterie de sommeil annulée</string>
    <string name="search_x">Rechercher %1$s</string>
    <string name="servers">Serveurs</string>
    <string name="sources">Sources</string>
    <string name="backgrounds">Arrière-plans</string>
    <string name="subtitles">Sous-titres</string>
    <string name="subtitle_selection">Sélection des Sous-titres</string>
    <string name="quality_selection">Sélection de la Qualité</string>
    <string name="quality_x">Qualité %1$d</string>
    <string name="off">Off</string>
    <string name="so_empty">Si vide…</string>
    <string name="not_loading">Ne Charge Pas</string>
    <string name="share">Partager</string>
    <string name="sharing_x">Partage de %1$s</string>
    <string name="saved_x_to_library">%1$s enregistré dans la bibliothèque</string>
    <string name="removed_x_from_library">%1$s supprimé de la bibliothèque</string>
    <string name="radio">Radio</string>
    <string name="follow">Suivre</string>
    <string name="following_x">Suivi de %1$s</string>
    <string name="followed_x">%1$s Suivi·e</string>
    <string name="unfollow">Ne Plus Suivre</string>
    <string name="unfollowing_x">Suppression du Suivi de %1$s</string>
    <string name="download">Télécharger</string>
    <string name="hiding_x">Masquage de %1$s</string>
    <string name="hide">Masquer</string>
    <string name="unhide">Afficher</string>
    <string name="liking_x">Aime %1$s</string>
    <string name="unliking_x">%1$s Plus Aimé</string>
    <string name="save_to_playlist">Enregistrer dans la playlist</string>
    <string name="delete_playlist">Supprimer la playlist</string>
    <string name="loading_radio_for_x">Chargement de la radio pour %1$s</string>
    <string name="playing_x">Lecture de %1$s</string>
    <string name="adding_x_to_queue">Ajout de %1$s à la liste</string>
    <string name="adding_x_to_next">Ajout de %1$s aux suivants</string>
    <string name="all">Tout</string>
    <string name="edit_playlist">Modifier la Playlist</string>
    <string name="more_brain_capacity">Plus de Capacité Cérébrale</string>
    <string name="x_followers">%1$s Abonnés</string>
    <string name="shuffling_x">Mélange de %1$s</string>
    <string name="copying_the_error">Erreur Copiée</string>
    <string name="sort_and_filter">Trier et Filtrer</string>
    <string name="filter">Filtrer</string>
    <string name="reversed">Inversé</string>
    <string name="apply">Appliquer</string>
    <string name="save">Enregistrer</string>
    <string name="sort_title">Titre</string>
    <string name="sort_date">Date</string>
    <string name="sort_duration">Durée</string>
    <string name="sort_subtitle">Sous-titre</string>
    <string name="delete">Supprimer</string>
    <string name="playlist_name">Nom de la Playlist</string>
    <string name="playlist_description">Description de la Playlist</string>
    <string name="create_playlist">Créer une Playlist</string>
    <string name="add_song">Ajouter une Chanson</string>
    <string name="creating_x">Création de %1$s</string>
    <string name="playlist_name_empty">Le nom de la playlist est vide</string>
    <string name="x_created">%1$s créée</string>
    <string name="loading_x">Chargement de %1s</string>
    <string name="saving_x">Sauvegarde de %1$s</string>
    <string name="saved_to_x">Sauvegardée dans %1$s</string>
    <string name="saved_to_playlists">Sauvegardée dans la playlist</string>
    <string name="removing_x">Suppression de %1$s</string>
    <string name="download_complete">Téléchargement Terminé</string>
    <string name="app_widget_description">Echo sur votre écran d\'accueil !</string>
    <string name="okay">OK</string>
    <string name="no_internet">Pas d\'Internet</string>
    <string name="error_x">Erreur : %1$s</string>
    <string name="cache_playlist_warning">Fonctionnalité Expérimentale. Seul l\'écoute est supportée.</string>
    <string name="refresh_library_on_reload_summary">Scan l\'appareil chaque fois que le flux est rechargé</string>
    <string name="write_storage_permission_summary">Pour créer et modifier les playlists locales</string>
    <string name="system">Système</string>
    <string name="blacklist_folders_summary">Dossiers à exclure de la bibliothèque</string>
    <string name="repeat_off">Ne Pas Répéter</string>
    <string name="library">Bibliothèque</string>
    <string name="playlist_liked">Aimés</string>
    <string name="extensions">Extensions</string>
    <string name="home">Accueil</string>
    <string name="settings">Paramètres</string>
    <string name="bass_boost">Amplification des Basses</string>
    <string name="by_x">Par %1$s</string>
    <string name="required_extensions_missing_x">Extensions requises manquantes : %1$s</string>
    <string name="equalizer_summary">Ouvrir les paramètres de l\'égaliseur de l\'appareil</string>
    <string name="custom_theme_color">Couleur de Thème Personnalisée</string>
    <string name="stream_quality_summary">Sélectionnez la qualité du flux par défaut</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d Heure</item>
        <item quantity="many">%1$d Heures</item>
        <item quantity="other">%1$d Heures</item>
    </plurals>
    <string name="animations_summary">Interface pas fluide ? Désactiver cette option pourrait aider</string>
    <string name="installation_type_summary">L\'installation de l\'application permettra aux liens suivants de s\'ouvrir dans Echo :</string>
    <string name="could_not_find_the_file">Fichier introuvable.</string>
    <string name="custom_theme_color_summary">Utilise une couleur de thème personnalisée, au lieu de celle du système.</string>
    <string name="extension_installed_successfully">Extension installée avec succès.</string>
    <string name="theme">Thème</string>
    <string name="_1hr">1 h</string>
    <string name="open_links_instruction">Pour autoriser l\'ouverture de ces liens, vous devez :\n- Faire défiler la page vers le bas et cliquer sur \"Ouvrir par défaut\"\n- Cliquer sur \"+ Ajouter un lien\"</string>
    <string name="extension_updated_successfully">%1$s mis à jour avec succès</string>
    <string name="add_extensions">Ajouter des Extensions</string>
    <string name="audio_selection">Sélection Audio</string>
    <string name="video_selection">Sélection Vidéo</string>
    <string name="amoled_summary">Noir Profond, Noir Pur</string>
    <string name="animations">Animations</string>
    <string name="show_background_summary">Vidéo d\'arrière-plan ou illustration floue du morceau dans le lecteur</string>
    <string name="repeat">Répéter</string>
    <string name="unliked_x">%1$s Plus Aimé</string>
    <string name="more_brain_capacity_summary">L\'activation de cette option peut aider à corriger le décalage audio, mais augmente considérablement l\'utilisation de la batterie (Désactive le déchargement audio).</string>
    <string name="sort">Trier</string>
    <string name="tagging_x">Marquage de %1$s</string>
    <string name="previous">Précédent</string>
    <string name="next">Suivant</string>
    <string name="save_to_library">Sauvegarder dans la bibliothèque</string>
    <plurals name="number_min">
        <item quantity="one">%1$d Minute</item>
        <item quantity="many">%1$d Minutes</item>
        <item quantity="other">%1$d Minutes</item>
    </plurals>
    <string name="unfollowed_x">%1$s Plus Suivi·e</string>
    <string name="x_plays">%1$s Écoutes</string>
    <string name="download_started">Téléchargement Démarré</string>
    <string name="add_to_next">Ajouter à la suite</string>
    <string name="add_to_queue">Ajouter à la liste</string>
    <string name="scroll_animations">Animations de Défilement</string>
    <string name="moving_x">Déplacement de %1$s</string>
    <string name="background_gradient_summary">Un dégradé de couleur en arrière-plan selon le contexte</string>
    <string name="deleted_x">%1$s Supprimé</string>
    <string name="explicit">Explicite</string>
    <string name="adding_x">Ajout de %1$s</string>
    <string name="scroll_animations_summary">Animations lorsque vous defilez des choses</string>
    <string name="create">Créer</string>
    <string name="deleting_x">Suppression de %1$s</string>
    <string name="no_download_extension">Aucune extension de téléchargement trouvée, utilisez le code \"echodown\" pour l\'obtenir.</string>
    <string name="delete_download">Supprimer le Téléchargement</string>
    <string name="removed_x_from_downloads">%1$s Supprimé des Téléchargements</string>
    <string name="nothing_to_download_in_x">Rien à télécharger dans %1$s</string>
    <string name="merging_x">Fusion de %1$s</string>
    <string name="apply_player_color_to_app_summary">ALERTE AU LAG !!!</string>
    <string name="extension_x_not_found">Extension %1$s non trouvée</string>
    <string name="audio">Audio</string>
    <string name="version">Version</string>
    <string name="link">Lien</string>
    <string name="info">Info</string>
    <string name="play">Jouer</string>
    <string name="sleep_timer_set_for">Minuterie de sommeil réglée sur %1$s</string>
    <string name="remove_from_library">Retirer de la bibliothèque</string>
    <string name="unknown_quality">Qualité Inconnue</string>
    <string name="liked_x">%1$s Aimé</string>
    <string name="background_gradient">Dégradé d\'Arrière-plan</string>
    <string name="selected_n">%1$d Sélectionnées</string>
    <string name="unhiding_x">Affichage de %1$s</string>
    <string name="apply_player_color_to_app">Appliquer la couleur du Lecteur à l\'ensemble de l\'application</string>
    <string name="feed">Flux</string>
    <string name="item">Objet</string>
    <plurals name="number_items">
        <item quantity="one">%1$d Objet</item>
        <item quantity="many">%1$d Objets</item>
        <item quantity="other">%1$d Objets</item>
    </plurals>
    <string name="x_specific_quality_summary">Quality spécifique de %1$s, cette option va remplacer la qualité du flux par défaut</string>
    <string name="unmetered_stream_quality">Qualité du Flux sur connection non limitée</string>
    <string name="unmetered_stream_quality_summary">La qualité du flux sur une connection non limitée. Cette option remplace la qualité du flux par défaut.</string>
    <string name="select_language">Choisir une Langue</string>
    <string name="check_for_updates">Vérifier les mises à jour</string>
    <string name="check_for_updates_summary">Chercher les mises à jour pour l\'application et les extensions quand vous ouvrez l\'application.</string>
    <string name="checking_for_updates">Recherche de mises a jour</string>
    <string name="back_animations">Animations de retour</string>
    <string name="back_animations_summary">Peut causer des bugs visuels dû à android, vous pouvez juste ouvrir les applications récentes pour régler ce bug.</string>
    <string name="regex_invalid">%1$s est invalide, s\'il vous plaît suivez le regex : %2$s</string>
    <string name="n_hours">%1$d heures</string>
    <string name="n_minutes">%1$d minutes</string>
    <string name="hidden_x">Cachage de %1$s</string>
    <string name="unhidden_x">%1$s affiché</string>
    <string name="track">Piste</string>
    <string name="tracks">Pistes</string>
    <string name="n_songs">%1$d Chansons</string>
    <string name="n_episodes">%1$d Épisodes</string>
    <string name="n_chapters">%1$d Chapitres</string>
    <string name="n_tracks">%1$d Pistes</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d Chanson</item>
        <item quantity="many">%1$d Chansons</item>
        <item quantity="other">%1$d Chansons</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d Épisode</item>
        <item quantity="many">%1$d Épisodes</item>
        <item quantity="other">%1$d Épisodes</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d Chapitre</item>
        <item quantity="many">%1$d Chapitres</item>
        <item quantity="other">%1$d Chapitres</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d Piste</item>
        <item quantity="many">%1$d Pistes</item>
        <item quantity="other">%1$d Pistes</item>
    </plurals>
    <string name="unsave">Annuler la sauvegarde</string>
    <string name="sort_date_added">Date d\'ajout</string>
    <string name="opening_webview_x">Overture de la vue web : %1$s</string>
    <string name="no_update_available_for_x">Pas de mises à jour disponibles pour %1$s</string>
    <string name="other">Autre</string>
    <string name="player">Lecteur</string>
    <string name="about">À propos</string>
    <string name="language_x">Langue : %1$s</string>
    <string name="guide">Guide</string>
    <string name="donate">Faire un don</string>
    <string name="contributors">Contributeurs</string>
    <string name="app_desc">Juste un lecteur de musique.</string>
    <string name="manage">Gérer</string>
    <string name="no_account">Pas de compte</string>
    <string name="other_settings">Autres Paramètres</string>
    <string name="no_x_found">%1$s non trouvé</string>
    <string name="playlist">Liste de lecture</string>
    <string name="album">Album</string>
    <string name="pre_release">Pré-version</string>
    <string name="single">Single</string>
    <string name="ep">EP</string>
    <string name="lp">LP</string>
    <string name="compilation">Compilation</string>
    <string name="show">Montrer</string>
    <string name="book">Livre</string>
    <string name="song">Chanson</string>
    <string name="podcast">Podcast</string>
    <string name="isrc_x">ISRC : %1$s</string>
    <string name="genres_x">Genres : %1$s</string>
    <string name="disc_number_n">Nombre du Disque : %1$d</string>
    <string name="album_order_n">Nombre de l\'ordre de l\'album : %1$d</string>
    <string name="confirmation">Confirmation</string>
    <string name="delete_playlist_confirmation">Êtes vous sûr de vouloir supprimer %1$s?</string>
    <string name="confirm">Confirmer</string>
    <string name="big_cover">Couvertures plus grandes</string>
    <string name="big_cover_summary">Bon pour les appareils avec un écran plus large</string>
    <string name="no_last_played_track_found">La dernière piste jouée n\'a pas été trouvée.</string>
    <string name="not_yet_released">Pas encore sorti</string>
    <string name="releases_on_x">Sorties sur %1$s</string>
    <string name="unavailable_in_your_region">Non disponible dans votre région</string>
    <string name="not_playable_x">Non jouable : %1$s</string>
    <string name="colors">Couleurs</string>
    <string name="scroll_bar">Barre de Défilement</string>
    <string name="scroll_bar_summary">Barre de défilement sur le côté pour un accès plus rapide (peut être bugé)</string>
    <string name="currently_playing">En cours de Lecture</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-hi\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="cancel">रद्द करें</string>
    <string name="back">वापस</string>
    <string name="audio">ऑडियो</string>
    <string name="songs">गाने</string>
    <string name="albums">एल्बम्स</string>
    <string name="cached_songs">कैश किए गाने</string>
    <string name="artists">कलाकार</string>
    <string name="recently_added">हाल ही में जोड़े गए</string>
    <string name="refresh_library_on_reload">पुनः लोड पर लाइब्रेरी ताज़ा करें</string>
    <string name="refresh_library_on_reload_summary">फ़ीड लोड होने पर हर बार डिवाइस स्कैन करें</string>
    <string name="duration_filter">अवधि फ़िल्टर</string>
    <string name="duration_filter_summary">ऑडियो फ़ाइलों को फ़िल्टर करें जिनकी अवधि (सेकंड में) इस मान से कम हो</string>
    <string name="blacklist_folders">ब्लैकलिस्ट फ़ोल्डर</string>
    <string name="blacklist_folders_summary">लाइब्रेरी से बाहर रखने वाले फ़ोल्डर</string>
    <string name="blacklist_folder_keywords">ब्लैकलिस्ट फ़ोल्डर कीवर्ड</string>
    <string name="blacklist_folder_keywords_summary">फ़ोल्डरों को ब्लैकलिस्ट करने के लिए कीवर्ड, अल्पविराम से अलग करें</string>
    <string name="saved">सहेजा गया</string>
    <string name="tabs">टैब</string>
    <string name="show_tabs">टैब दिखाएँ</string>
    <string name="show_tab_summary">एक्सटेंशन्स के टैब को श्रेणी के रूप में दिखाएँ</string>
    <string name="unknown">अज्ञात</string>
    <string name="like">पसंद करें</string>
    <string name="unlike">पसंद हटाएँ</string>
    <string name="home">होम</string>
    <string name="search">खोजें</string>
    <string name="library">लाइब्रेरी</string>
    <string name="more">अधिक</string>
    <string name="extension">एक्सटेंशन</string>
    <string name="downloading_x">%1$s डाउनलोड हो रहा है</string>
    <string name="cancel_all">सभी रद्द करें</string>
    <string name="download_progress">डाउनलोड प्रगति</string>
    <string name="downloads">डाउनलोड</string>
    <string name="downloaded_x">%1$s डाउनलोड हुआ</string>
    <string name="login">लॉगिन करें</string>
    <string name="view">देखें</string>
    <string name="extension_out_of_date">पुराना हो गया</string>
    <string name="no_internet">कोई इंटरनेट नहीं</string>
    <string name="str_copy">कॉपी करें</string>
    <string name="extensions">एक्सटेंशन्स</string>
    <string name="choose_a_color">रंग चुनें</string>
    <string name="random">यादृच्छिक</string>
    <string name="add">जोड़ें</string>
    <string name="loading">लोड हो रहा है…</string>
    <string name="settings">सेटिंग्स</string>
    <string name="value">मान</string>
    <string name="playback">प्लेबैक</string>
    <string name="audio_fx">साउंड इफेक्ट्स</string>
    <string name="audio_fx_summary">सभी गानों पर लागू इफेक्ट्स</string>
    <string name="audio_fx_desc">वर्तमान ट्रैक के लिए साउंड इफेक्ट्स बदलें।</string>
    <string name="reset">रीसेट करें</string>
    <string name="playback_speed">प्लेबैक गति</string>
    <string name="change_pitch_with_speed">गति के साथ पिच बदलें</string>
    <string name="bass_boost">बास बूस्ट</string>
    <string name="bass_boost_desc">बड़ा मान ध्वनि को बिगाड़ सकता है।</string>
    <string name="change_pitch_with_speed_desc">धीमी गति वाला साउंड प्राप्त करें</string>
    <string name="equalizer">इक्वलाइज़र</string>
    <string name="equalizer_summary">डिवाइस के इक्वलाइज़र सेटिंग्स खोलें</string>
    <string name="stream_quality">स्ट्रीम गुणवत्ता</string>
    <string name="stream_quality_summary">स्ट्रीम की डिफ़ॉल्ट गुणवत्ता चुनें</string>
    <string name="behavior">व्यवहार</string>
    <string name="keep_queue">प्लेयर क्यू बनाए रखें</string>
    <string name="keep_queue_summary">ऐप फिर से खोलने पर प्लेयर क्यू पुनः प्राप्त करें।</string>
    <string name="stop_player">प्लेयर रोकें</string>
    <string name="stop_player_summary">ऐप को हाल के ऐप्स से हटाने पर प्लेयर रोकें</string>
    <string name="skip_silence">मौन छोड़ें</string>
    <string name="skip_silence_summary">गाने के मौन हिस्सों को छोड़ें, ताकि बिना रुकावट प्लेबैक हो।</string>
    <string name="auto_start_radio">ऑटो स्टार्ट रेडियो</string>
    <string name="auto_start_radio_summary">प्लेलिस्ट में ट्रैक से संबंधित गाने स्वचालित रूप से जोड़ें, ताकि क्यू अनंत हो</string>
    <string name="cache_size">कैश आकार</string>
    <string name="cache_size_summary">ऑडियो और वीडियो कैश करने के लिए एमबी में आकार</string>
    <string name="version">संस्करण</string>
    <string name="install">इंस्टॉल करें</string>
    <string name="app">ऐप</string>
    <string name="file">फ़ाइल</string>
    <string name="installation_type">इंस्टॉलेशन प्रकार</string>
    <string name="installation_type_summary">ऐप इंस्टॉलेशन निम्नलिखित लिंक को इको में खोलने की अनुमति देगा:</string>
    <string name="installation_type_warning">फ़ाइल के रूप में एक्सटेंशन इंस्टॉल करने पर उपलब्ध नहीं।</string>
    <string name="could_not_find_the_file">फ़ाइल नहीं मिली।</string>
    <string name="extension_installer">एक्सटेंशन इंस्टॉलर</string>
    <string name="extension_installed_successfully">एक्सटेंशन सफलतापूर्वक इंस्टॉल हुआ।</string>
    <string name="extension_uninstalled_successfully">एक्सटेंशन सफलतापूर्वक अनइंस्टॉल हुआ।</string>
    <string name="allow_opening_links">लिंक खोलने की अनुमति</string>
    <string name="open_links_instruction">इन लिंक को खोलने के लिए:\n- नीचे स्क्रॉल करें और \"डिफ़ॉल्ट रूप से खोलें\" पर क्लिक करें\n- \"+ लिंक जोड़ें\" पर क्लिक करें</string>
    <string name="extension_updated_successfully">%1$s सफलतापूर्वक अपडेट हुआ</string>
    <string name="link">लिंक</string>
    <string name="link_or_code">लिंक या कोड</string>
    <string name="list_is_empty">सूची खाली है</string>
    <string name="extension_installed">%1$s (इंस्टॉल किया गया)</string>
    <string name="add_extensions">एक्सटेंशन्स जोड़ें</string>
    <string name="invalid_extension_list">अमान्य एक्सटेंशन्स सूची</string>
    <string name="look_and_feel">रूप और अनुभव</string>
    <string name="ui">यूआई</string>
    <string name="theme">थीम</string>
    <string name="theme_summary">अंधा होना चाहते हैं?</string>
    <string name="custom_theme_color">कस्टम थीम रंग</string>
    <string name="custom_theme_color_summary">सिस्टम थीम के बजाय कस्टम थीम रंग का उपयोग करें।</string>
    <string name="add_color">रंग जोड़ें</string>
    <string name="custom_colors">कस्टम रंग</string>
    <string name="amoled">एमोलेड</string>
    <string name="amoled_summary">गहरा काला, शुद्ध काला</string>
    <string name="navbar_gradient">ग्रेडिएंट नेवबार</string>
    <string name="navbar_gradient_summary">नेवबार धीरे-धीरे पारदर्शी हो जाता है</string>
    <string name="dynamic_player">डायनामिक प्लेयर रंग</string>
    <string name="dynamic_player_summary">ट्रैक आर्टवर्क के आधार पर प्लेयर का रंग लागू करें</string>
    <string name="show_background">पृष्ठभूमि दिखाएँ</string>
    <string name="show_background_summary">प्लेयर में ट्रैक का बैकग्राउंड वीडियो या धुंधली आर्टवर्क</string>
    <string name="animation">एनीमेशन</string>
    <string name="animations">एनीमेशन्स</string>
    <string name="animations_summary">बहुत रुकावट महसूस हो रही है? इसे बंद करने से मदद मिल सकती है</string>
    <string name="refresh">ताज़ा करें</string>
    <string name="music">संगीत</string>
    <string name="tracker">ट्रैकर</string>
    <string name="lyrics">गीत के बोल</string>
    <string name="misc">विविध</string>
    <string name="enabled">सक्षम</string>
    <string name="disabled">निष्क्रिय</string>
    <string name="no_user_found">कोई उपयोगकर्ता नहीं मिला</string>
    <string name="add_extension">एक्सटेंशन जोड़ें</string>
    <string name="webview">वेबव्यू</string>
    <string name="logout">लॉगआउट करें</string>
    <string name="switch_account">खाता बदलें</string>
    <string name="incognito">गुप्त</string>
    <string name="not_logged_in">लॉगिन नहीं किया</string>
    <string name="playing_from">यहाँ से चला रहा है</string>
    <string name="up_next">आने वाला</string>
    <string name="info">जानकारी</string>
    <string name="seekbar">सीकबार</string>
    <string name="shuffle">शफ़ल करें</string>
    <string name="previous">पिछला</string>
    <string name="play">चलाएँ</string>
    <string name="next">अगला</string>
    <string name="repeat">दोहराएँ</string>
    <string name="close">बंद करें</string>
    <string name="no_lyrics">कोई गीत के बोल नहीं</string>
    <string name="sleep_timer">स्लीप टाइमर</string>
    <string name="end_of_track">ट्रैक का अंत</string>
    <string name="_15min">15 मिनट</string>
    <string name="_30min">30 मिनट</string>
    <string name="_45min">45 मिनट</string>
    <string name="_1hr">1 घंटा</string>
    <string name="_2hr">2 घंटे</string>
    <string name="sleep_timer_desc">कुछ समय बाद प्लेबैक रोकने के लिए स्लीप टाइमर सेट करें</string>
    <string name="sleep_on_specific_time">विशिष्ट समय पर स्लीप</string>
    <string name="sleep_timer_set_for">%1$s के लिए स्लीप टाइमर सेट</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d घंटा</item>
        <item quantity="other">%1$d घंटे</item>
    </plurals>
    <plurals name="number_min">
        <item quantity="one">%1$d मिनट</item>
        <item quantity="other">%1$d मिनट</item>
    </plurals>
    <string name="sources">स्रोत</string>
    <string name="backgrounds">पृष्ठभूमि</string>
    <string name="subtitles">उपशीर्षक</string>
    <string name="audio_selection">ऑडियो चयन</string>
    <string name="video_selection">वीडियो चयन</string>
    <string name="subtitle_selection">उपशीर्षक चयन</string>
    <string name="off">बंद</string>
    <string name="not_loading">लोड नहीं हो रहा</string>
    <string name="share">साझा करें</string>
    <string name="save_to_library">लाइब्रेरी में सहेजें</string>
    <string name="remove_from_library">लाइब्रेरी से हटाएँ</string>
    <string name="radio">रेडियो</string>
    <string name="download">डाउनलोड करें</string>
    <string name="follow">फॉलो करें</string>
    <string name="unfollow">अनफॉलो करें</string>
    <string name="hide">छिपाएँ</string>
    <string name="unhide">दिखाएँ</string>
    <string name="save_to_playlist">प्लेलिस्ट में सहेजें</string>
    <string name="delete_playlist">प्लेलिस्ट मिटाएँ</string>
    <string name="add_to_queue">क्यू में जोड़ें</string>
    <string name="edit_playlist">प्लेलिस्ट संपादित करें</string>
    <string name="sort">क्रमबद्ध करें</string>
    <string name="explicit">स्पष्ट</string>
    <string name="save">सहेजें</string>
    <string name="sort_title">शीर्षक</string>
    <string name="sort_date">तारीख</string>
    <string name="sort_duration">अवधि</string>
    <string name="sort_subtitle">उपशीर्षक</string>
    <string name="playlist_name">प्लेलिस्ट का नाम</string>
    <string name="playlist_description">प्लेलिस्ट विवरण</string>
    <string name="create_playlist">प्लेलिस्ट बनाएँ</string>
    <string name="create">बनाएँ</string>
    <string name="playlist_name_empty">प्लेलिस्ट का नाम खाली है</string>
    <string name="download_started">डाउनलोड शुरू हुआ</string>
    <string name="cache_playlist_warning">प्रायोगिक सुविधा। इनके सुनने के अलावा कुछ भी समर्थित नहीं है।</string>
    <string name="system">सिस्टम</string>
    <string name="saved_to_playlists">प्लेलिस्ट में सहेजा गया</string>
    <string name="nothing_to_download_in_x">%1$s में डाउनलोड करने के लिए कुछ नहीं</string>
    <string name="no_download_extension">कोई डाउनलोड एक्सटेंशन नहीं मिला, \"echodown\" कोड का उपयोग करें।</string>
    <string name="write_storage_permission_summary">स्थानीय प्लेलिस्ट बनाने और संपादित करने के लिए</string>
    <string name="notifications">सूचनाएँ</string>
    <string name="notifications_permission_summary">डाउनलोड और संगीत के लिए सूचनाएँ दिखाने के लिए</string>
    <string name="remove">निकालें</string>
    <string name="more_by_x">%1$s द्वारा और</string>
    <string name="x_radio">%1$s रेडियो</string>
    <string name="required_extensions_missing_x">आवश्यक एक्सटेंशन्स गायब: %1$s</string>
    <string name="x_login_required">%1$s लॉगिन आवश्यक</string>
    <string name="x_is_not_supported_in_x">%1$s %2$s में समर्थित नहीं है</string>
    <string name="by_x">%1$s द्वारा</string>
    <string name="x_extension">%1$s एक्सटेंशन</string>
    <string name="quality_x">गुणवत्ता %1$d</string>
    <string name="so_empty">बिल्कुल खाली…</string>
    <string name="sharing_x">%1$s साझा कर रहे हैं</string>
    <string name="removed_x_from_library">%1$s को लाइब्रेरी से हटाया गया</string>
    <string name="followed_x">%1$s को फॉलो किया</string>
    <string name="unfollowing_x">%1$s को अनफॉलो कर रहे हैं</string>
    <string name="unfollowed_x">%1$s को अनफॉलो किया</string>
    <string name="liking_x">%1$s को पसंद कर रहे हैं</string>
    <string name="liked_x">%1$s को पसंद किया</string>
    <string name="unliking_x">%1$s की पसंद हटा रहे हैं</string>
    <string name="unliked_x">%1$s की पसंद हटाई</string>
    <string name="add_to_next">अगले में जोड़ें</string>
    <string name="playing_x">%1$s चला रहे हैं</string>
    <string name="adding_x_to_queue">%1$s को क्यू में जोड़ रहे हैं</string>
    <string name="adding_x_to_next">%1$s को अगले में जोड़ रहे हैं</string>
    <string name="background_gradient">पृष्ठभूमि ग्रेडिएंट</string>
    <string name="background_gradient_summary">संदर्भ के आधार पर पृष्ठभूमि में ग्रेडिएंट रंग</string>
    <string name="all">सभी</string>
    <string name="okay">ठीक है</string>
    <string name="x_permission_required">%1$s अनुमति आवश्यक</string>
    <string name="x_was_not_granted">%1$s दी नहीं गई</string>
    <string name="audio_permission_summary">स्थानीय संगीत लाइब्रेरी तक पहुँचने के लिए</string>
    <string name="video">वीडियो</string>
    <string name="read_storage">संग्रहण पढ़ें</string>
    <string name="write_storage">संग्रहण लिखें</string>
    <string name="unified_liked_playlist_summary">विभिन्न एक्सटेंशन्स से आपके पसंदीदा ट्रैक्स</string>
    <string name="n_items">%1$d आइटम</string>
    <string name="playlist_liked">पसंदीदा</string>
    <string name="playlist_liked_desc">आपके पसंदीदा ट्रैक्स</string>
    <string name="repeat_one">एक को दोहराएँ</string>
    <string name="repeat_off">दोहराना बंद</string>
    <string name="repeat_all">सभी को दोहराएँ</string>
    <string name="logout_and_login">लॉगआउट और लॉगिन</string>
    <string name="error_loading_extension_from_x">%1$s से एक्सटेंशन लोड करने में त्रुटि</string>
    <string name="extension_x_not_found">एक्सटेंशन %1$s नहीं मिला</string>
    <string name="account_session_expired_in_x">%1$s में खाता सत्र समाप्त</string>
    <string name="error_x">त्रुटि: %1$s</string>
    <string name="value_not_set">सेट नहीं किया गया</string>
    <string name="x_disabled">%1$s (निष्क्रिय)</string>
    <string name="x_extensions">%1$s एक्सटेंशन्स</string>
    <string name="select_x_account">%1$s खाता चुनें</string>
    <string name="error_updating_extension">अपडेट करने में त्रुटि</string>
    <string name="x_login">%1$s लॉगिन</string>
    <string name="x_is_required">%1$s आवश्यक है</string>
    <string name="sleep_timer_cancelled">स्लीप टाइमर रद्द</string>
    <string name="search_x">%1$s खोजें</string>
    <string name="servers">सर्वर</string>
    <string name="quality_selection">गुणवत्ता चयन</string>
    <string name="unknown_quality">अज्ञात गुणवत्ता</string>
    <string name="saved_x_to_library">%1$s को लाइब्रेरी में सहेजा</string>
    <string name="following_x">%1$s को फॉलो कर रहे हैं</string>
    <string name="hiding_x">%1$s को छिपा रहे हैं</string>
    <string name="unhiding_x">%1$s को दिखा रहे हैं</string>
    <string name="loading_radio_for_x">%1$s के लिए रेडियो लोड हो रहा है</string>
    <string name="apply">लागू करें</string>
    <string name="add_song">गाना जोड़ें</string>
    <string name="selected_n">%1$d चुना गया</string>
    <string name="adding_x">%1$s जोड़ रहे हैं</string>
    <string name="moving_x">%1$s स्थानांतरित कर रहे हैं</string>
    <string name="removing_x">%1$s निकाल रहे हैं</string>
    <string name="more_brain_capacity">ज़्यादा प्रोसेसिंग पावर</string>
    <string name="delete">मिटाएँ</string>
    <string name="more_brain_capacity_summary">इसे सक्षम करने से ऑडियो लैग ठीक हो सकता है और बैटरी खपत बढ़ सकती है (ऑडियो ऑफलोडिंग निष्क्रिय)।</string>
    <string name="x_plays">%1$s बार चला</string>
    <string name="x_followers">%1$s फॉलोअर</string>
    <string name="shuffling_x">%1$s को शफ़ल कर रहे हैं</string>
    <string name="copying_the_error">त्रुटि कॉपी कर रहे हैं</string>
    <string name="sort_and_filter">क्रमबद्ध और फ़िल्टर</string>
    <string name="filter">फ़िल्टर करें</string>
    <string name="reversed">उल्टा</string>
    <string name="scroll_animations">स्क्रॉल एनीमेशन्स</string>
    <string name="scroll_animations_summary">स्क्रॉल करने पर एनीमेशन्स</string>
    <string name="creating_x">%1$s बना रहे हैं</string>
    <string name="x_created">%1$s बन गया</string>
    <string name="deleted_x">%1$s मिट गया</string>
    <string name="saving_x">%1$s सहेज रहे हैं</string>
    <string name="saved_to_x">%1$s में सहेजा गया</string>
    <string name="merging_x">%1$s मर्ज कर रहे हैं</string>
    <string name="tagging_x">%1$s टैग कर रहे हैं</string>
    <string name="deleting_x">%1$s मिटा रहे हैं</string>
    <string name="loading_x">%1s लोड हो रहा है</string>
    <string name="downloading_update_for_x">%1$s के लिए अपडेट डाउनलोड हो रहा है</string>
    <string name="apply_player_color_to_app">पूरा ऐप पर प्लेयर रंग लागू करें</string>
    <string name="apply_player_color_to_app_summary">लैग चेतावनी!!!</string>
    <string name="delete_download">डाउनलोड मिटाएँ</string>
    <string name="removed_x_from_downloads">%1$s को डाउनलोड से हटाया</string>
    <string name="download_complete">डाउनलोड पूरा</string>
    <string name="app_widget_description">होम स्क्रीन पर इको!</string>
    <string name="feed">फ़ीड</string>
    <string name="item">आइटम</string>
    <plurals name="number_items">
        <item quantity="one">%1$d आइटम</item>
        <item quantity="other">%1$d आइटम्स</item>
    </plurals>
    <string name="x_specific_quality_summary">%1$s विशिष्ट स्ट्रीम गुणवत्ता, डिफ़ॉल्ट स्ट्रीम गुणवत्ता को ओवरराइड करेगी</string>
    <string name="unmetered_stream_quality">असीमित स्ट्रीम गुणवत्ता</string>
    <string name="unmetered_stream_quality_summary">असीमित नेटवर्क से कनेक्ट होने पर स्ट्रीम की गुणवत्ता, डिफ़ॉल्ट स्ट्रीम गुणवत्ता को ओवरराइड करेगी।</string>
    <string name="select_language">भाषा चुनें</string>
    <string name="check_for_updates">अपडेट जाँचें</string>
    <string name="check_for_updates_summary">ऐप खोलने पर ऐप और एक्सटेंशन्स के नए अपडेट की जाँच करें।</string>
    <string name="checking_for_updates">अपडेट जाँच रहे हैं</string>
    <string name="back_animations">पिछला एनीमेशन्स</string>
    <string name="back_animations_summary">एंड्रॉइड के कारण विज़ुअल बग हो सकता है, हाल के ऐप्स खोलकर ठीक करें।</string>
    <string name="regex_invalid">%1$s अमान्य है, कृपया regex का पालन करें: %2$s</string>
    <string name="n_hours">%1$d घंटे</string>
    <string name="n_minutes">%1$d मिनट</string>
    <string name="hidden_x">%1$s छिपाया गया</string>
    <string name="unhidden_x">%1$s दिखाया गया</string>
    <string name="track">ट्रैक</string>
    <string name="tracks">ट्रैक्स</string>
    <string name="n_songs">%1$d गाने</string>
    <string name="n_episodes">%1$d एपिसोड्स</string>
    <string name="n_chapters">%1$d अध्यायों</string>
    <string name="n_tracks">%1$d ट्रैक्स</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d गाना</item>
        <item quantity="other">%1$d गाने</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d एपिसोड</item>
        <item quantity="other">%1$d एपिसोड्स</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d अध्याय</item>
        <item quantity="other">%1$d अध्यायों</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d ट्रैक</item>
        <item quantity="other">%1$d ट्रैक्स</item>
    </plurals>
    <string name="unsave">असहेजें</string>
    <string name="sort_date_added">जोड़ा गया तारीख</string>
    <string name="opening_webview_x">वेबव्यू खोल रहे हैं: %1$s</string>
    <string name="no_update_available_for_x">%1$s के लिए कोई अपडेट उपलब्ध नहीं</string>
    <string name="other">अन्य</string>
    <string name="player">प्लेयर</string>
    <string name="about">के बारे में</string>
    <string name="language_x">भाषा: %1$s</string>
    <string name="guide">गाइड</string>
    <string name="donate">दान करें</string>
    <string name="contributors">योगदानकर्ता</string>
    <string name="app_desc">बस एक म्यूज़िक प्लेयर।</string>
    <string name="manage">प्रबंधन करें</string>
    <string name="no_account">कोई खाता नहीं</string>
    <string name="other_settings">अन्य सेटिंग्स</string>
    <string name="no_x_found">कोई %1$s नहीं मिला</string>
    <string name="playlist">प्लेलिस्ट</string>
    <string name="album">एल्बम</string>
    <string name="pre_release">प्री-रिलीज़</string>
    <string name="single">सिंगल</string>
    <string name="ep">ईपी</string>
    <string name="lp">एलपी</string>
    <string name="compilation">संकलन</string>
    <string name="show">शो</string>
    <string name="book">किताब</string>
    <string name="song">गाना</string>
    <string name="podcast">पॉडकास्ट</string>
    <string name="isrc_x">आईएसआरसी: %1$s</string>
    <string name="genres_x">शैलियाँ: %1$s</string>
    <string name="disc_number_n">डिस्क नंबर: %1$d</string>
    <string name="album_order_n">एल्बम क्रम नंबर: %1$d</string>
    <string name="confirmation">पुष्टिकरण</string>
    <string name="delete_playlist_confirmation">क्या आप वाकई %1$s मिटाना चाहते हैं?</string>
    <string name="confirm">पुष्टि करें</string>
    <string name="big_cover">बड़े कवर</string>
    <string name="big_cover_summary">बड़े स्क्रीन वाले डिवाइस के लिए उपयुक्त</string>
    <string name="no_last_played_track_found">कोई अंतिम चला ट्रैक नहीं मिला।</string>
    <string name="not_yet_released">अभी तक रिलीज़ नहीं हुआ</string>
    <string name="releases_on_x">%1$s पर रिलीज़ होगा</string>
    <string name="unavailable_in_your_region">आपके क्षेत्र में उपलब्ध नहीं</string>
    <string name="not_playable_x">चलाने योग्य नहीं: %1$s</string>
    <string name="colors">रंगों</string>
    <string name="scroll_bar">स्क्रॉल बार</string>
    <string name="scroll_bar_summary">साइड में स्क्रॉल बार तेज़ी से पहुँच के लिए (थोड़ा गड़बड़ हो सकता है)</string>
    <string name="currently_playing">अभी चल रहा</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-hng\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">Theek Hai</string>
    <string name="cancel">Radd Karo</string>
    <string name="back">Peeche</string>
    <string name="feed">Feed</string>
    <string name="x_permission_required">%1$s Permission Chahiye</string>
    <string name="x_was_not_granted">%1$s Allow Nahi Kiya Gaya</string>
    <string name="audio">Audio</string>
    <string name="audio_permission_summary">Apni Local Music Library Ko Access Karne Ke Liye</string>
    <string name="read_storage">Storage Padho</string>
    <string name="write_storage">Storage Likho</string>
    <string name="write_storage_permission_summary">Local Playlists Banane Aur Edit Karne Ke Liye</string>
    <string name="notifications">Notifications</string>
    <string name="notifications_permission_summary">Downloads Aur Music Ke Liye Notifications Dikhane Ke Liye</string>
    <string name="remove">Hatao</string>
    <string name="more_by_x">%1$s Ke Aur Tracks</string>
    <string name="songs">Gaane</string>
    <string name="albums">Albums</string>
    <string name="x_radio">%1$s Radio</string>
    <string name="cached_songs">Cached Gaane</string>
    <string name="cache_playlist_warning">Experimental Feature. Inhe Sunne Ke Alawa Kuch Bhi Supported Nahi Hai.</string>
    <string name="artists">Kalakaar</string>
    <string name="recently_added">Haal Mein Jode Gaye</string>
    <string name="refresh_library_on_reload">Reload Par Library Refresh Karo</string>
    <string name="refresh_library_on_reload_summary">Har Baar Feed Load Hone Par Device Scan Karo</string>
    <string name="duration_filter">Duration Filter</string>
    <string name="duration_filter_summary">Un Audio Files Ko Filter Karo Jinki Duration (Seconds Mein) Is Value Se Kam Ho</string>
    <string name="blacklist_folders">Blacklist Folders</string>
    <string name="blacklist_folders_summary">Wo Folders Jo Library Se Bahar Rakho</string>
    <string name="blacklist_folder_keywords">Blacklist Folder Keywords</string>
    <string name="blacklist_folder_keywords_summary">Folders Ko Blacklist Karne Ke Liye Keywords, Alag Karne Ke Liye Comma Use Karo</string>
    <string name="saved">Saved</string>
    <string name="tabs">Tabs</string>
    <string name="show_tabs">Tabs Dikhao</string>
    <string name="show_tab_summary">Extensions Ke Tabs Ko Category Ke Roop Mein Dikhao</string>
    <string name="unified_liked_playlist_summary">Alag-Alag Extensions Se Aapke Pasand Kiye Tracks</string>
    <string name="n_items">%1$d Items</string>
    <string name="item">Item</string>
    <plurals name="number_items">
        <item quantity="one">%1$d Item</item>
        <item quantity="other">%1$d Items</item>
    </plurals>
    <string name="playlist_liked">Pasand Kiye</string>
    <string name="playlist_liked_desc">Aapke Pasand Kiye Tracks</string>
    <string name="unknown">Anjaan</string>
    <string name="like">Pasand Karo</string>
    <string name="unlike">Pasand Hatao</string>
    <string name="repeat_one">Ek Baar Repeat</string>
    <string name="repeat_off">Repeat Band</string>
    <string name="repeat_all">Sab Repeat Karo</string>
    <string name="home">Home</string>
    <string name="search">Khoj</string>
    <string name="library">Library</string>
    <string name="more">Aur</string>
    <string name="extension">Extension</string>
    <string name="downloading_x">%1$s Download Ho Raha Hai</string>
    <string name="cancel_all">Sab Radd Karo</string>
    <string name="download_progress">Download Progress</string>
    <string name="downloads">Downloads</string>
    <string name="downloaded_x">%1$s Download Ho Gaya</string>
    <string name="logout_and_login">Logout Aur Login</string>
    <string name="login">Login</string>
    <string name="view">Dekho</string>
    <string name="extension_out_of_date">Purana Ho Gaya</string>
    <string name="no_internet">No Internet</string>
    <string name="error_loading_extension_from_x">%1$s Se Extension Load Karne Mein Error</string>
    <string name="extension_x_not_found">Extension %1$s Nahi Mila</string>
    <string name="required_extensions_missing_x">Zaroori Extensions Nahi Hain: %1$s</string>
    <string name="x_login_required">%1$s Login Chahiye</string>
    <string name="x_is_not_supported_in_x">%1$s %2$s Mein Supported Nahi Hai</string>
    <string name="account_session_expired_in_x">%1$s Mein Account Session Expired</string>
    <string name="error_x">Error: %1$s</string>
    <string name="str_copy">Copy</string>
    <string name="extensions">Extensions</string>
    <string name="choose_a_color">Ek Color Chuno</string>
    <string name="random">Random</string>
    <string name="add">Jodo</string>
    <string name="loading">Load Ho Raha Hai…</string>
    <string name="settings">Settings</string>
    <string name="value">Value</string>
    <string name="value_not_set">Set Nahi Kiya</string>
    <string name="playback">Playback</string>
    <string name="audio_fx">Audio Effects</string>
    <string name="audio_fx_summary">Sabhi Gaanon Par Effects Apply Honge</string>
    <string name="audio_fx_desc">Current Track Ke Liye Audio Effects Badlo.</string>
    <string name="reset">Reset</string>
    <string name="playback_speed">Playback Speed</string>
    <string name="change_pitch_with_speed">Speed Ke Saath Pitch Badlo</string>
    <string name="bass_boost">Bass Boost</string>
    <string name="bass_boost_desc">Badi Value Se Sound Distort Ho Sakta Hai.</string>
    <string name="change_pitch_with_speed_desc">Slow-Motion Sound Effect Pao</string>
    <string name="equalizer">Equalizer</string>
    <string name="equalizer_summary">Device Ke Equalizer Settings Kholo</string>
    <string name="stream_quality">Stream Quality</string>
    <string name="stream_quality_summary">Stream Ki Default Quality Chuno</string>
    <string name="x_specific_quality_summary">%1$s Specific Stream Quality, Default Stream Quality Ko Override Karega</string>
    <string name="unmetered_stream_quality">Unmetered Stream Quality</string>
    <string name="unmetered_stream_quality_summary">Unmetered Network Se Connect Hone Par Stream Ki Quality. Ye Default Stream Quality Ko Override Karega.</string>
    <string name="behavior">Vyvhaar</string>
    <string name="keep_queue">Player Queue Rakho</string>
    <string name="keep_queue_summary">App Dobara Khulne Par Player Queue Recover Karo.</string>
    <string name="stop_player">Player Rok Do</string>
    <string name="stop_player_summary">Jab App Recents Se Hatao, Player Rok Do</string>
    <string name="skip_silence">Chuppi Skip Karo</string>
    <string name="skip_silence_summary">Gaane Ke Silent Part Ko Skip Karo Taki Gapless Playback Mile.</string>
    <string name="auto_start_radio">Auto Start Radio</string>
    <string name="auto_start_radio_summary">Track Se Jude Gaanon Ko Playlist Mein Auto Add Karo, Taki Queue Infinite Rahe</string>
    <string name="version">Version</string>
    <string name="select_language">Bhasha Chuno</string>
    <string name="check_for_updates">Updates Check Karo</string>
    <string name="extension_installed_successfully">Extension Safalta Se Install Ho Gaya.</string>
    <string name="extension_uninstalled_successfully">Extension Safalta Se Uninstall Ho Gaya.</string>
    <string name="downloading_update_for_x">%1$s Ke Liye Update Download Ho Raha Hai</string>
    <string name="add_extensions">Extensions Jodo</string>
    <string name="checking_for_updates">Updates Ke Liye Check Kar Rahe Hain</string>
    <string name="look_and_feel">Dekh Aur Feel</string>
    <string name="ui">UI</string>
    <string name="theme">Theme</string>
    <string name="theme_summary">Andha Banna Hai?</string>
    <string name="custom_theme_color">Custom Theme Color</string>
    <string name="custom_theme_color_summary">System Theme Ke Bajaye Custom Theme Color Use Karo.</string>
    <string name="add_color">Color Jodo</string>
    <string name="custom_colors">Custom Colors</string>
    <string name="amoled">AMOLED</string>
    <string name="amoled_summary">Bilku Kala, Pure Black</string>
    <string name="navbar_gradient">Gradient Navbar</string>
    <string name="navbar_gradient_summary">Navbar Dheere-Dheere Transparent Ho Jati Hai</string>
    <string name="dynamic_player">Dynamic Player Color</string>
    <string name="dynamic_player_summary">Track Artwork Ke Aadhar Par Player Ka Color Apply Karo</string>
    <string name="animation">Animation</string>
    <string name="animations">Animations</string>
    <string name="animations_summary">Agar Bahut Stutter Ho Raha Hai, To Ise Band Karne Se Help Mil Sakti Hai</string>
    <string name="refresh">Refresh Karo</string>
    <string name="x_disabled">%1$s (Disabled)</string>
    <string name="by_x">%1$s Dwara</string>
    <string name="music">Sangeet</string>
    <string name="tracker">Tracker</string>
    <string name="lyrics">Geet Ke Bol</string>
    <string name="x_extensions">%1$s Extensions</string>
    <string name="x_extension">%1$s Extension</string>
    <string name="enabled">Chalu</string>
    <string name="disabled">Nishkriya</string>
    <string name="no_user_found">Koi User Nahi Mila</string>
    <string name="add_extension">Extension Jodo</string>
    <string name="webview">Webview</string>
    <string name="logout">Logout Karo</string>
    <string name="switch_account">Account Badlo</string>
    <string name="incognito">Gupt</string>
    <string name="not_logged_in">Logged In Nahi Hai</string>
    <string name="x_login">%1$s Login</string>
    <string name="x_is_required">%1$s Zaroori Hai</string>
    <string name="playing_from">Yahan Se Chala Raha Hai</string>
    <string name="up_next">Aane Wala</string>
    <string name="info">Jankari</string>
    <string name="seekbar">Seekbar</string>
    <string name="shuffle">Shuffle Karo</string>
    <string name="previous">Pichhla</string>
    <string name="play">Chalao</string>
    <string name="next">Agla</string>
    <string name="repeat">Repeat</string>
    <string name="close">Band Karo</string>
    <string name="no_lyrics">Koi Geet Ke Bol Nahi</string>
    <string name="sleep_timer">Sleep Timer</string>
    <string name="search_x">%1$s Khoj</string>
    <string name="sources">Srot</string>
    <string name="subtitles">Subtitles</string>
    <string name="quality_selection">Quality Chunao</string>
    <string name="not_loading">Load Nahi Ho Raha</string>
    <string name="share">Share Karo</string>
    <string name="radio">Radio</string>
    <string name="download">Download Karo</string>
    <string name="follow">Follow Karo</string>
    <string name="unfollow">Unfollow Karo</string>
    <string name="save_to_playlist">Playlist Mein Save Karo</string>
    <string name="delete_playlist">Playlist Delete Karo</string>
    <string name="add_to_queue">Queue Mein Jodo</string>
    <string name="edit_playlist">Playlist Edit Karo</string>
    <string name="track">Track</string>
    <string name="sort">Sort Karo</string>
    <string name="filter">Filter Karo</string>
    <string name="apply">Apply Karo</string>
    <string name="save">Save Karo</string>
    <string name="sort_duration">Avdhi</string>
    <string name="sort_subtitle">Subtitle</string>
    <string name="delete">Delete Karo</string>
    <string name="playlist_name">Playlist Ka Naam</string>
    <string name="playlist_description">Playlist Ka Vivran</string>
    <string name="create_playlist">Playlist Banayein</string>
    <string name="create">Banao</string>
    <string name="saved_to_x">%1$s Mein Save Kiya</string>
    <string name="saved_to_playlists">Playlists Mein Save Kiya</string>
    <string name="adding_x">%1$s Jod Rahe Hain</string>
    <string name="moving_x">%1$s Move Kar Rahe Hain</string>
    <string name="removing_x">%1$s Hata Rahe Hain</string>
    <string name="download_started">Download Shuru Ho Gaya</string>
    <string name="other">Anya</string>
    <string name="player">Player</string>
    <string name="about">Ke Baare Mein</string>
    <string name="playlist">Playlist</string>
    <string name="album">Album</string>
    <string name="video">Video</string>
    <string name="delete_playlist_confirmation">Kya Aap Sachemuch %1$s Delete Karna Chahte Hain?</string>
    <string name="confirm">Confirm Karo</string>
    <string name="hide">Chhupayein</string>
    <string name="not_yet_released">Abhi Release Nahi Hua</string>
    <string name="cache_size">Cache Size</string>
    <string name="cache_size_summary">Audio Aur Video Cache Karne Ke Liye MB Mein Size</string>
    <string name="system">System</string>
    <string name="check_for_updates_summary">App Khulne Par App Aur Extensions Ke Naye Updates Check Karo.</string>
    <string name="install">Install Karo</string>
    <string name="app">App</string>
    <string name="file">File</string>
    <string name="installation_type">Installation Type</string>
    <string name="installation_type_summary">App Installation Se Ye Links Echo Mein Khulenge:</string>
    <string name="installation_type_warning">Agar Extension File Ke Roop Mein Install Kiya To Ye Available Nahi Hoga.</string>
    <string name="could_not_find_the_file">File Nahi Mili.</string>
    <string name="extension_installer">Extension Installer</string>
    <string name="allow_opening_links">Links Khulne Ki Ijaazat Do</string>
    <string name="open_links_instruction">In Links Ko Khulne Ki Ijaazat Dene Ke Liye:\n- Niche Scroll Karke \"Open by Default\" Par Click Karo\n- \"+ Add Link\" Par Click Karo</string>
    <string name="extension_updated_successfully">%1$s Safalta Se Update Ho Gaya</string>
    <string name="link">Link</string>
    <string name="link_or_code">Link Ya Code</string>
    <string name="list_is_empty">List Khali Hai</string>
    <string name="extension_installed">%1$s (Installed)</string>
    <string name="invalid_extension_list">Invalid Extensions List</string>
    <string name="show_background">Background Dikhao</string>
    <string name="show_background_summary">Player Mein Track Ka Background Video Ya Blurred Artwork</string>
    <string name="back_animations">Back Animations</string>
    <string name="back_animations_summary">Android Ke Karan Visual Bug Ho Sakta Hai, Lekin Recents Khulne Se Fix Ho Jayega.</string>
    <string name="misc">Vividh</string>
    <string name="error_updating_extension">Update Karte Waqt Error</string>
    <string name="select_x_account">%1$s Account Chuno</string>
    <string name="regex_invalid">%1$s Valid Nahi Hai, Kripya Regex Follow Karo: %2$s</string>
    <string name="end_of_track">Track Ka Ant</string>
    <string name="_15min">15 Minute</string>
    <string name="_30min">30 Minute</string>
    <string name="_45min">45 Minute</string>
    <string name="_1hr">1 Ghanta</string>
    <string name="_2hr">2 Ghante</string>
    <string name="sleep_timer_desc">Playback Ko Kuch Samay Baad Rokne Ke Liye Sleep Timer Set Karo</string>
    <string name="sleep_on_specific_time">Nirdharit Samay Par Sona</string>
    <string name="sleep_timer_cancelled">Sleep Timer Radd Kiya Gaya</string>
    <string name="sleep_timer_set_for">%1$s Ke Liye Sleep Timer Set</string>
    <string name="n_hours">%1$d Ghante</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d Ghanta</item>
        <item quantity="other">%1$d Ghante</item>
    </plurals>
    <string name="n_minutes">%1$d Minute</string>
    <plurals name="number_min">
        <item quantity="one">%1$d Minute</item>
        <item quantity="other">%1$d Minutes</item>
    </plurals>
    <string name="servers">Servers</string>
    <string name="backgrounds">Backgrounds</string>
    <string name="audio_selection">Audio Chunao</string>
    <string name="video_selection">Video Chunao</string>
    <string name="subtitle_selection">Subtitle Chunao</string>
    <string name="quality_x">Quality %1$d</string>
    <string name="off">Band</string>
    <string name="unknown_quality">Anjaan Quality</string>
    <string name="so_empty">Bilkul Khali…</string>
    <string name="sharing_x">%1$s Share Kar Rahe Hain</string>
    <string name="save_to_library">Library Mein Save Karo</string>
    <string name="saved_x_to_library">%1$s Library Mein Save Kiya</string>
    <string name="remove_from_library">Library Se Hatao</string>
    <string name="removed_x_from_library">%1$s Library Se Hataya</string>
    <string name="following_x">%1$s Follow Kar Rahe Hain</string>
    <string name="followed_x">%1$s Follow Kiya</string>
    <string name="unfollowing_x">%1$s Unfollow Kar Rahe Hain</string>
    <string name="unfollowed_x">%1$s Unfollow Kiya</string>
    <string name="liking_x">%1$s Pasand Kar Rahe Hain</string>
    <string name="liked_x">%1$s Pasand Kiya</string>
    <string name="unliking_x">%1$s Pasand Hata Rahe Hain</string>
    <string name="unliked_x">%1$s Pasand Hataya</string>
    <string name="hiding_x">%1$s Chhupa Rahe Hain</string>
    <string name="unhiding_x">%1$s Chhupana Hata Rahe Hain</string>
    <string name="hidden_x">%1$s Chhupa Diya</string>
    <string name="unhidden_x">%1$s Chhupana Hataya</string>
    <string name="add_to_next">Agla Jodo</string>
    <string name="loading_radio_for_x">%1$s Ke Liye Radio Load Ho Raha Hai</string>
    <string name="playing_x">%1$s Chala Raha Hai</string>
    <string name="adding_x_to_queue">%1$s Queue Mein Jod Rahe Hain</string>
    <string name="adding_x_to_next">%1$s Agle Mein Jod Rahe Hain</string>
    <string name="background_gradient">Background Gradient</string>
    <string name="background_gradient_summary">Context Ke Anusar Background Mein Gradient Color</string>
    <string name="all">Sab</string>
    <string name="more_brain_capacity">Zyada Dimaag Shakti</string>
    <string name="more_brain_capacity_summary">Ise Enable Karne Se Audio Lag Fix Ho Sakta Hai Aur Battery Zyada Use Hogi (Audio Offloading Band Hoga).</string>
    <string name="tracks">Tracks</string>
    <string name="explicit">Spa sht</string>
    <string name="x_plays">%1$s Plays</string>
    <string name="x_followers">%1$s Followers</string>
    <string name="n_songs">%1$d Gaane</string>
    <string name="n_episodes">%1$d Episodes</string>
    <string name="n_chapters">%1$d Chapters</string>
    <string name="n_tracks">%1$d Tracks</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d Gaana</item>
        <item quantity="other">%1$d Gaane</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d Episode</item>
        <item quantity="other">%1$d Episodes</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d Chapter</item>
        <item quantity="other">%1$d Chapters</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d Track</item>
        <item quantity="other">%1$d Tracks</item>
    </plurals>
    <string name="shuffling_x">%1$s Shuffle Kar Rahe Hain</string>
    <string name="copying_the_error">Error Copy Kar Rahe Hain</string>
    <string name="sort_and_filter">Sort Aur Filter</string>
    <string name="reversed">Ulta</string>
    <string name="unsave">Unsave Karo</string>
    <string name="sort_title">Title</string>
    <string name="sort_date">Tareekh</string>
    <string name="sort_date_added">Jodne Ki Tareekh</string>
    <string name="scroll_animations">Scroll Animations</string>
    <string name="scroll_animations_summary">Scroll Karte Waqt Animations</string>
    <string name="add_song">Gaana Jodo</string>
    <string name="creating_x">%1$s Bana Rahe Hain</string>
    <string name="playlist_name_empty">Playlist Ka Naam Khali Hai</string>
    <string name="x_created">%1$s Ban Gaya</string>
    <string name="deleting_x">%1$s Delete Kar Rahe Hain</string>
    <string name="deleted_x">%1$s Delete Ho Gaya</string>
    <string name="loading_x">%1s Load Ho Raha Hai</string>
    <string name="saving_x">%1$s Save Kar Rahe Hain</string>
    <string name="selected_n">%1$d Chuna Gaya</string>
    <string name="no_download_extension">Koi Download Extension Nahi Mila, \"echodown\" Code Use Karo.</string>
    <string name="nothing_to_download_in_x">%1$s Mein Download Karne Ke Liye Kuch Nahi</string>
    <string name="merging_x">%1$s Merge Kar Rahe Hain</string>
    <string name="tagging_x">%1$s Tag Kar Rahe Hain</string>
    <string name="apply_player_color_to_app">Poore App Mein Player Color Apply Karo</string>
    <string name="apply_player_color_to_app_summary">LAG ALERT!!!</string>
    <string name="delete_download">Download Delete Karo</string>
    <string name="removed_x_from_downloads">%1$s Downloads Se Hataya</string>
    <string name="download_complete">Download Pura Ho Gaya</string>
    <string name="app_widget_description">Echo Aapke Home Screen Par!</string>
    <string name="opening_webview_x">Webview Khul Raha Hai: %1$s</string>
    <string name="no_update_available_for_x">%1$s Ke Liye Koi Update Nahi</string>
    <string name="language_x">Bhasha: %1$s</string>
    <string name="guide">Guide</string>
    <string name="donate">Donate Karo</string>
    <string name="contributors">Yogdan Karta</string>
    <string name="app_desc">Bas Ek Music Player.</string>
    <string name="manage">Manage Karo</string>
    <string name="no_account">Koi Account Nahi</string>
    <string name="other_settings">Aur Settings</string>
    <string name="no_x_found">Koi %1$s Nahi Mila</string>
    <string name="pre_release">Pre-Release</string>
    <string name="single">Single</string>
    <string name="ep">EP</string>
    <string name="lp">LP</string>
    <string name="compilation">Sankalan</string>
    <string name="show">Show</string>
    <string name="book">Kitab</string>
    <string name="song">Gaana</string>
    <string name="podcast">Podcast</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="genres_x">Genres: %1$s</string>
    <string name="disc_number_n">Disc Number: %1$d</string>
    <string name="album_order_n">Album Order Number: %1$d</string>
    <string name="confirmation">Pushtikaran</string>
    <string name="big_cover">Bade Covers</string>
    <string name="big_cover_summary">Bade Screen Wale Devices Ke Liye Accha</string>
    <string name="unhide">Dikhayein</string>
    <string name="no_last_played_track_found">Koi Antim Chala Track Nahi Mila.</string>
    <string name="releases_on_x">%1$s Par Release Hoga</string>
    <string name="unavailable_in_your_region">Aapke Region Mein Available Nahi</string>
    <string name="not_playable_x">Chal Nahi Sakta: %1$s</string>
    <string name="scroll_bar_summary">Side mein scrollbar jaldi access ke liye (shayad glitchy ho sakta hai)</string>
    <string name="scroll_bar">Scroll Bar</string>
    <string name="colors">Rango</string>
    <string name="currently_playing">Abhi baj raha</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-hu\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">Rendben</string>
    <string name="cancel">Mégse</string>
    <string name="back">Vissza</string>
    <string name="feed">Kezdőlap</string>
    <string name="x_permission_required">%1$s Engedély szükséges</string>
    <string name="x_was_not_granted">%1$s nem lett megadva</string>
    <string name="audio">Hang</string>
    <string name="audio_permission_summary">Hogy hozzáférj a helyi zenetáradhoz</string>
    <string name="read_storage">Tárhely olvasása</string>
    <string name="write_storage">Tárhely írása</string>
    <string name="write_storage_permission_summary">Helyi lejátszó listák létrehozása és szerkesztéséhez</string>
    <string name="notifications">Értesítések</string>
    <string name="notifications_permission_summary">A letöltések és zene értesítések mutatásához</string>
    <string name="remove">Eltávolítás</string>
    <string name="more_by_x">Meg több %1$s</string>
    <string name="songs">Dalok</string>
    <string name="albums">Albumok</string>
    <string name="x_radio">%1$s Rádió</string>
    <string name="cached_songs">Gyorstárazott Dalok</string>
    <string name="cache_playlist_warning">Kísérleti funkció. A hallgatáson kívül más nem támogatott.</string>
    <string name="artists">Előadók</string>
    <string name="recently_added">Nemrég hozzá adva</string>
    <string name="refresh_library_on_reload">Frissítse a könyvtárat újratöltéskor</string>
    <string name="refresh_library_on_reload_summary">Az eszköz újra keresése a Kezdőlap be töltésekor</string>
    <string name="duration_filter">Hossz szűrés</string>
    <string name="duration_filter_summary">Szűrje ki azokat a hangfájlokat aminek hossza (másodperc) kevesebb mint az adott érték</string>
    <string name="blacklist_folders">Feketelistás mappák</string>
    <string name="blacklist_folders_summary">Kihagyandó mappák a könyvtárból</string>
    <string name="blacklist_folder_keywords">Feketelistás mappák kulcsszavai</string>
    <string name="blacklist_folder_keywords_summary">Kulcsszavak hozzá adása a feketelistás mappákhoz, használj vesszőt az elválasztáshoz</string>
    <string name="saved">Mentve</string>
    <string name="tabs">Fülek</string>
    <string name="show_tabs">Fülek mutatása</string>
    <string name="show_tab_summary">A bővítmény fülek mutatása mint fülek</string>
    <string name="unified_liked_playlist_summary">Kedvelt dalaid különböző bővítményekből</string>
    <string name="n_items">%1$d tétel</string>
    <string name="item">Tétel</string>
    <plurals name="number_items">
        <item quantity="one">%1$d Tétel</item>
        <item quantity="other">%1$d Tételek</item>
    </plurals>
    <string name="playlist_liked">Kedvelt</string>
    <string name="playlist_liked_desc">Kedvelt dalaid</string>
    <string name="unknown">Ismeretlen</string>
    <string name="like">Tetszik</string>
    <string name="unlike">Nem tetszik</string>
    <string name="repeat_one">Egy ismétlése</string>
    <string name="repeat_off">Ismétlés ki</string>
    <string name="repeat_all">Összes ismétlése</string>
    <string name="home">Kezdő oldal</string>
    <string name="search">Keresés</string>
    <string name="library">Könyvtár</string>
    <string name="more">Több</string>
    <string name="extension">Bővítmény</string>
    <string name="downloading_x">%1$s Letöltése</string>
    <string name="cancel_all">Mégse (Mind)</string>
    <string name="download_progress">Letöltése allapota</string>
    <string name="downloads">Letöltések</string>
    <string name="downloaded_x">%1$s Letöltve</string>
    <string name="logout_and_login">Ki és bejelentkezés</string>
    <string name="login">Bejelentkezés</string>
    <string name="view">Nézet</string>
    <string name="extension_out_of_date">Régi vérzió</string>
    <string name="no_internet">Nincs internet</string>
    <string name="error_loading_extension_from_x">Hiba a bővítmény betöltése közben az alábbi helyről %1$s</string>
    <string name="extension_x_not_found">Bővítmény %1$s nem található</string>
    <string name="required_extensions_missing_x">Hiányzó szükséges bővítmény: %1$s</string>
    <string name="x_login_required">%1$s bejelentkezés szükséges</string>
    <string name="x_is_not_supported_in_x">%1$s nem támogatott ezzel %2$s</string>
    <string name="account_session_expired_in_x">A %1$s felhasználói munkamenete lejárt</string>
    <string name="error_x">Hiba: %1$s</string>
    <string name="str_copy">Másolás</string>
    <string name="extensions">Bővítmények</string>
    <string name="choose_a_color">Válassz egy színt</string>
    <string name="random">Véletlenszerű</string>
    <string name="add">Hozzá ad</string>
    <string name="loading">Töltés…</string>
    <string name="settings">Beállítások</string>
    <string name="value">Értek</string>
    <string name="value_not_set">Nincs beállítva</string>
    <string name="playback">Lejátszás</string>
    <string name="audio_fx">Hanghatások</string>
    <string name="audio_fx_summary">A hanghatások az összes dalra alkalmazva</string>
    <string name="audio_fx_desc">Hanghatás módosítás a jelenlegi dalhoz.</string>
    <string name="reset">Alapértelmezett</string>
    <string name="playback_speed">Lejátszási sebesség</string>
    <string name="change_pitch_with_speed">Hangszín változtatása a sebességel</string>
    <string name="bass_boost">Basszus növelés</string>
    <string name="bass_boost_desc">Magasabb értékek a hang torzulásához vezethet.</string>
    <string name="change_pitch_with_speed_desc">Lassú felvétel szerű hangszín</string>
    <string name="equalizer">Equalizer</string>
    <string name="equalizer_summary">Az eszköz hangszínszabályzójának beállítások megnyitása</string>
    <string name="stream_quality">Streamelés minősége</string>
    <string name="stream_quality_summary">Az alapértelmezett streaming minőség</string>
    <string name="x_specific_quality_summary">%1$s specifikus stream minőség, felül írja a alapértelmezett streamelési minőség beállítást</string>
    <string name="unmetered_stream_quality">Szabályozatlan Streamelési Minőség</string>
    <string name="unmetered_stream_quality_summary">Korlátlan hálózati kapcsolaton történő streaming minősége. Ez felül írja a alapértelmezett streaming minőséget.</string>
    <string name="behavior">Viselkedés</string>
    <string name="keep_queue">Lejátszási sor megtartása</string>
    <string name="keep_queue_summary">Lejátszási sor vissza állítása, mikor újra megnyitod az appot.</string>
    <string name="stop_player">Lejátszó megállása</string>
    <string name="stop_player_summary">Lejátszó megállása, amikor az app eltávolításra kerül korábbi alkalmazások közül</string>
    <string name="skip_silence">A Csendek kivágása</string>
    <string name="skip_silence_summary">A csendek kivágása, a szünetmentes lejátszás érdekében.</string>
    <string name="auto_start_radio">Automata Rádió indítás</string>
    <string name="auto_start_radio_summary">Automatikusan adjon hasonló számokat a lejátszási lista végtelenítéséhez</string>
    <string name="cache_size">Gyorsítótár Méret</string>
    <string name="cache_size_summary">Hango és videó gyorsítótár mérete MB-ban</string>
    <string name="version">Verzió</string>
    <string name="select_language">Nyelv kiválasztása</string>
    <string name="system">Rendszer</string>
    <string name="check_for_updates">Frissítések Ellenőrzése</string>
    <string name="check_for_updates_summary">Az app és bővítmény frissítések ellenőrzése indításkor.</string>
    <string name="install">Telepítés</string>
    <string name="app">Alkalmazás</string>
    <string name="file">Fajl</string>
    <string name="installation_type">Telepítés Módja</string>
    <string name="installation_type_summary">Az app telepítése engedélyezi az alábbi linkek megnyitását az Echo-ban:</string>
    <string name="installation_type_warning">Nem elérhető ha a bővítményt fajlként telepíted.</string>
    <string name="could_not_find_the_file">A fájl nem található.</string>
    <string name="extension_installer">Bővítmény Telepítő</string>
    <string name="extension_installed_successfully">A Bővítmény sikeresen telepítve.</string>
    <string name="extension_uninstalled_successfully">A bővítmény sikeresen eltaviltva.</string>
    <string name="allow_opening_links">Linkek megnyitásnak engedélyezése</string>
    <string name="so_empty">Túl nagy üresség van…</string>
    <string name="not_loading">Nem Tölt</string>
    <string name="share">Megosztás</string>
    <string name="sharing_x">%1$s megosztása</string>
    <string name="save_to_library">Mentes a könyvtárba</string>
    <string name="saved_x_to_library">%1$s Mentve a Könyvtárba</string>
    <string name="remove_from_library">Eltaviltva a könyvtárból</string>
    <string name="removed_x_from_library">%1$s eltávolítva a könyvtárból</string>
    <string name="radio">Rádió</string>
    <string name="download">Letöltés</string>
    <string name="follow">Kovetes</string>
    <string name="following_x">%1$s kovetve</string>
    <string name="followed_x">%1$s Követve</string>
    <string name="unfollow">Követés megszüntetése</string>
    <string name="unfollowing_x">Nem követed %1$s mostantól</string>
    <string name="unfollowed_x">%1$s nem követed továbbá</string>
    <string name="liking_x">%1$s kedvelve</string>
    <string name="liked_x">Kedvelted %1$s</string>
    <string name="unliking_x">Nem kedveled %1$s</string>
    <string name="unliked_x">Kedvelés visszavonva %1$s</string>
    <string name="hiding_x">%1$s el rejtve</string>
    <string name="unhiding_x">%1$s mutatása</string>
    <string name="hidden_x">%1$s mostantól rejve</string>
    <string name="unhidden_x">%1$s nincs többé rejve</string>
    <string name="save_to_playlist">Mentes a lejátszási listára</string>
    <string name="delete_playlist">Lejátszási lista törlése</string>
    <string name="add_to_next">Beszúrás következőnek</string>
    <string name="add_to_queue">Hozzá adás most következő dalokhoz</string>
    <string name="loading_radio_for_x">%1$s rádiójának betöltése</string>
    <string name="playing_x">Most megy %1$s</string>
    <string name="adding_x_to_queue">%1$s hozzá adása a dal váró listához</string>
    <string name="adding_x_to_next">%1$s hozzáadása a következőhöz</string>
    <string name="open_links_instruction">Az ilyen linkek megnyitásához az alábbiak szükségesek:\n- Görgess lejjebb és tappolj a \"megnyitás alapértelmezettként\"\n- Tappolj \" + Link Hozzáadása\"</string>
    <string name="downloading_update_for_x">%1$s frissítésének letöltése</string>
    <string name="extension_updated_successfully">%1$s sikeresen frissítve</string>
    <string name="link">Link</string>
    <string name="link_or_code">Link vagy Kód</string>
    <string name="list_is_empty">A lista üres</string>
    <string name="extension_installed">%1$s (telepítve)</string>
    <string name="add_extensions">Bővítmények hozzáadása</string>
    <string name="invalid_extension_list">Érvénytelen bővítménylista</string>
    <string name="checking_for_updates">Frissítések ellenőrzése</string>
    <string name="look_and_feel">Kinézet és Hangulat</string>
    <string name="ui">UI</string>
    <string name="theme">Téma</string>
    <string name="theme_summary">Meg akarsz vakulni?</string>
    <string name="custom_theme_color">Egyedi Témaszín</string>
    <string name="custom_theme_color_summary">Használj egyéni szín használata a rendszertéma helyett.</string>
    <string name="add_color">Szín hozzáadása</string>
    <string name="custom_colors">Egyéni színek</string>
    <string name="amoled">AMOLED</string>
    <string name="amoled_summary">Koromsötét, Tökéletes fekete</string>
    <string name="navbar_gradient">Színátmenetes Navibár</string>
    <string name="navbar_gradient_summary">A navibár átlátszóvá válik folyamatosan</string>
    <string name="dynamic_player">Dinamikus Lejátszó Szín</string>
    <string name="dynamic_player_summary">Az album borító alapján alkalmazza a színeket</string>
    <string name="show_background">Háttér mutatása</string>
    <string name="show_background_summary">Háttérvideó vagy homályos albumképe a jelenlegi dalnak a lejátszóban</string>
    <string name="colors">Színek</string>
    <string name="scroll_bar">Görgetősáv</string>
    <string name="scroll_bar_summary">Görgetősáv oldalt a gyorsabb hozzáférésért (lehet ,hogy bugos lesz)</string>
    <string name="animation">Animáció</string>
    <string name="back_animations">Visszalépés Animációk</string>
    <string name="back_animations_summary">Vizuális hibákat okozhat a rendszer miatt ,de csak nyisd meg az alkalmazás előzményeket a javításhoz.</string>
    <string name="animations">Animációk</string>
    <string name="animations_summary">Túl röcögős az app? ennek kikapcsolása talán segít</string>
    <string name="refresh">Frissités</string>
    <string name="x_disabled">%1$s (letiltva)</string>
    <string name="by_x">Tőlle: %1$s</string>
    <string name="music">Zene</string>
    <string name="tracker">Kereső</string>
    <string name="lyrics">Dalszöveg</string>
    <string name="misc">Egyéb</string>
    <string name="x_extensions">%1$s Bővítmények</string>
    <string name="x_extension">%1$s Bővitmény</string>
    <string name="enabled">Engedélyezve</string>
    <string name="disabled">Letiltva</string>
    <string name="error_updating_extension">Hiba a frissítéskor</string>
    <string name="no_user_found">Felhasználó nem található</string>
    <string name="select_x_account">Válassz %1$s felhasználót</string>
    <string name="add_extension">Bővítmény hozzáadása</string>
    <string name="webview">Webes nézet</string>
    <string name="logout">Kijelentkezés</string>
    <string name="switch_account">Felhasználó váltás</string>
    <string name="incognito">Inkognitó</string>
    <string name="not_logged_in">Nincs bejelentkezve</string>
    <string name="x_login">%1$s Belépés</string>
    <string name="x_is_required">%1$s szükséges</string>
    <string name="regex_invalid">%1$s helytelen, kérlek kövesd a regexet: %2$s</string>
    <string name="playing_from">Lejátszás Innen</string>
    <string name="up_next">Következik</string>
    <string name="info">Infó</string>
    <string name="seekbar">Keresősáv</string>
    <string name="shuffle">Keverés</string>
    <string name="previous">Előző</string>
    <string name="play">Lejátszás</string>
    <string name="next">Következő</string>
    <string name="repeat">Ismétlés</string>
    <string name="close">Bezár</string>
    <string name="no_lyrics">Nincs Dalszöveg</string>
    <string name="sleep_timer">Elalvás Időzítő</string>
    <string name="end_of_track">A Dal Vége</string>
    <string name="_15min">15 perc</string>
    <string name="_30min">30 perc</string>
    <string name="_45min">45 perc</string>
    <string name="_1hr">1 Óra</string>
    <string name="_2hr">2 Óra</string>
    <string name="sleep_timer_desc">Elalvás időzítő a lejátszás megállításához egy bizonyos idő elteltével</string>
    <string name="sleep_on_specific_time">Alvás a megadott időben</string>
    <string name="sleep_timer_cancelled">Elalvás Időzítő kikapcsolva</string>
    <string name="sleep_timer_set_for">Elalvás Időzítő beállítva %1$s</string>
    <string name="search_x">Keresés %1$s</string>
    <string name="n_hours">%1$d óra</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d Óra</item>
        <item quantity="other">%1$d Óra</item>
    </plurals>
    <string name="n_minutes">%1$d perc</string>
    <plurals name="number_min">
        <item quantity="one">%1$d Perc</item>
        <item quantity="other">%1$d Perc</item>
    </plurals>
    <string name="servers">Szerverek</string>
    <string name="sources">Források</string>
    <string name="backgrounds">Hátterek</string>
    <string name="subtitles">Feliratok</string>
    <string name="audio_selection">Hangkiválasztás</string>
    <string name="video_selection">Videóválasztó</string>
    <string name="subtitle_selection">Feliratválasztó</string>
    <string name="quality_selection">Minőség Választó</string>
    <string name="quality_x">Minőség %1$d</string>
    <string name="off">Ki</string>
    <string name="unknown_quality">Ismeretlen Minőség</string>
    <string name="background_gradient">Háttér átmenet</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-in\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="cancel">Batal</string>
    <string name="extension_x_not_found">Ekstensi %1$s tidak ditemukan</string>
    <string name="no_internet">Tidak ada internet</string>
    <string name="link_or_code">Tautan atau kode</string>
    <string name="stop_player_summary">Hentikan musik ketika aplikasi ditutup</string>
    <string name="auto_start_radio">Radio Mulai Otomatis</string>
    <string name="songs">Lagu</string>
    <string name="more_brain_capacity_summary">Mengaktifkan ini, dapat memperbaiki kelambatan audio, tetapi secara drastis meningkatkan penggunaan baterai (Menonaktifkan pemuatan audio).</string>
    <string name="next">Selanjutnya</string>
    <string name="previous">Sebelumnya</string>
    <string name="x_permission_required">Perizinan %1$s Diperlukan</string>
    <string name="x_was_not_granted">%1$s tidak diizinkan</string>
    <string name="audio">Audio</string>
    <string name="audio_permission_summary">Akses musik lokal</string>
    <string name="albums">Album</string>
    <string name="artists">Artis</string>
    <string name="video">Video</string>
    <string name="write_storage_permission_summary">Membuat dan merubah playlist lokal</string>
    <string name="more_by_x">Yang lain dari %1$s</string>
    <string name="recently_added">Baru-baru ini ditambahkan</string>
    <string name="x_radio">%1$s radio</string>
    <string name="read_storage">Baca penyimpanan</string>
    <string name="write_storage">Ubah penyimpanan</string>
    <string name="cached_songs">Lagu tercache</string>
    <string name="refresh_library_on_reload">Segarkan library saat mulai ulang</string>
    <string name="notifications_permission_summary">Notifikasi musik dan unduhan</string>
    <string name="blacklist_folders">Folder blacklist</string>
    <string name="refresh_library_on_reload_summary">Pindai perangkat setiap beranda muncul</string>
    <string name="show_tabs">Tunjukan tab</string>
    <string name="saved">Tersimpan</string>
    <string name="blacklist_folder_keywords">Blacklist folder dengan kata kunci</string>
    <string name="blacklist_folder_keywords_summary">Kata kunci untuk memasukkan folder ke daftar hitam. Gunakan koma untuk pemisah</string>
    <string name="tabs">Tab</string>
    <string name="show_tab_summary">Tampilkan tab ekstensi sebagai kategori</string>
    <string name="n_items">%1$d item</string>
    <string name="unknown">Tidak diketahui</string>
    <string name="like">Suka</string>
    <string name="unlike">Tidak suka</string>
    <string name="search">Cari</string>
    <string name="by_x">Oleh%1$s</string>
    <string name="bass_boost_desc">Nilai yang tinggi mungkin akan merusak suara.</string>
    <string name="downloading_x">Mengunduh %1$s</string>
    <string name="more">Lebih banyak</string>
    <string name="cancel_all">Batalkan semua</string>
    <string name="download_progress">Unduhan berlangsung</string>
    <string name="downloads">Unduhan</string>
    <string name="library">Perpustakaan</string>
    <string name="downloaded_x">Terunduh %1$s</string>
    <string name="login">Masuk</string>
    <string name="extension_out_of_date">Kadaluarsa</string>
    <string name="error_loading_extension_from_x">Eror memuat ekstensi dari %1$s</string>
    <string name="str_copy">Salin</string>
    <string name="choose_a_color">Pilih warna</string>
    <string name="required_extensions_missing_x">Ekstensi yang diperlukan tidak ada: %1$s</string>
    <string name="x_login_required">Perlu masuk %1$s</string>
    <string name="error_x">Eror: %1$s</string>
    <string name="extensions">Ekstensi</string>
    <string name="random">Acak</string>
    <string name="x_is_not_supported_in_x">%1$s tidak didukung dalam %2$s</string>
    <string name="account_session_expired_in_x">Sesi akun kadaluarsa %1$s</string>
    <string name="add">Tambah</string>
    <string name="value">Nilai</string>
    <string name="audio_fx">Efek suara</string>
    <string name="audio_fx_summary">Berefek pada semua lagu</string>
    <string name="playback">Pemutaran</string>
    <string name="loading">Tunggu yaa…</string>
    <string name="bass_boost">Tingkat bass</string>
    <string name="equalizer_summary">Buka pengaturan equalizer sistem</string>
    <string name="stream_quality_summary">Pilih kualitas stream</string>
    <string name="stop_player">Hentikan Pemain</string>
    <string name="playback_speed">Kecepatan pemutaran</string>
    <string name="equalizer">Equaliser</string>
    <string name="keep_queue">Simpan antrean</string>
    <string name="keep_queue_summary">Kembalikan antrean ketika membuka aplikasi.</string>
    <string name="change_pitch_with_speed">Ubah kecepatan suara</string>
    <string name="change_pitch_with_speed_desc">Jadikan lagunya seloww</string>
    <string name="behavior">Kebiasaan</string>
    <string name="skip_silence">Lewati hening</string>
    <string name="skip_silence_summary">Lewati bagian senyap dalam lagu, untuk menyediakan pemutaran tanpa celah</string>
    <string name="cache_size">Ukuran cache</string>
    <string name="auto_start_radio_summary">Otomatis tambah musik terkait, supaya musik terus berjalan</string>
    <string name="system">Sistem</string>
    <string name="install">Pasang</string>
    <string name="app">Aplikasi</string>
    <string name="installation_type_warning">Tidak tersedia jika Anda menginstal ekstensi sebagai file.</string>
    <string name="extension_installer">Pemasang ekstensi</string>
    <string name="back">Kembali</string>
    <string name="extension_uninstalled_successfully">Ekstensi berhasil di-uninstall.</string>
    <string name="allow_opening_links">Perbolehkan membuka tautan</string>
    <string name="open_links_instruction">Untuk membuka tautan ini, kamu harus:\n- Scroll kebawah kemudian klik \"Buka\" \n- Klik pada \"+ Tambahkan tautan\"</string>
    <string name="extension_updated_successfully">%1$s berhasil diperbarui</string>
    <string name="list_is_empty">Daftar kosong</string>
    <string name="add_extensions">Tambahkan Ekstensi</string>
    <string name="custom_theme_color">Racik warna tema</string>
    <string name="add_color">Tambah warna</string>
    <string name="custom_colors">Warna Kustom</string>
    <string name="amoled">Hitam pekat</string>
    <string name="theme_summary">Ingin Gelap Gulita?</string>
    <string name="dynamic_player_summary">Atur warna pemutar berdasarkan sampul lagu</string>
    <string name="navbar_gradient">Gradasi Bilah Navigasi</string>
    <string name="navbar_gradient_summary">Bilah Navigasi menjadi transparan secara bertahap</string>
    <string name="animations">Animasi</string>
    <string name="refresh">Segarkan</string>
    <string name="music">Musik</string>
    <string name="lyrics">Lirik</string>
    <string name="tracker">Tracker</string>
    <string name="misc">Pengaturan Lainnya</string>
    <string name="x_extensions">%1$sEkstensi</string>
    <string name="x_extension">%1$sEkstensi</string>
    <string name="enabled">Diaktifkan</string>
    <string name="disabled">Dimatikan</string>
    <string name="no_user_found">Pengguna tidak ditemukan</string>
    <string name="select_x_account">Pilih akun %1$s</string>
    <string name="add_extension">Tambah Ekstensi</string>
    <string name="error_updating_extension">Eror ketika memperbarui</string>
    <string name="webview">WebView</string>
    <string name="logout">Keluar</string>
    <string name="switch_account">Ganti akun</string>
    <string name="incognito">Mode Penyamaran</string>
    <string name="playing_from">Memutar Dari</string>
    <string name="x_is_required">%1$s diperlukan</string>
    <string name="info">Info</string>
    <string name="up_next">Selanjutnya</string>
    <string name="seekbar">Bilah pencarian</string>
    <string name="repeat">Ulangi</string>
    <string name="close">Tutup</string>
    <string name="no_lyrics">Tidak ada lirik</string>
    <string name="end_of_track">Akhir lagu</string>
    <string name="_2hr">2 jam</string>
    <string name="sleep_timer_desc">Atur waktu tidur untuk menghentikan pemutaran setelah beberapa waktu</string>
    <string name="sleep_on_specific_time">Matikan pada waktu tertentu</string>
    <string name="sleep_timer_set_for">Pengatur waktu tidur diatur untuk %1$s</string>
    <string name="search_x">Cari %1$s</string>
    <plurals name="number_hour">
        <item quantity="other">%1$d jam</item>
    </plurals>
    <plurals name="number_min">
        <item quantity="other">%1$d menit</item>
    </plurals>
    <string name="servers">Server</string>
    <string name="subtitles">Subtitle</string>
    <string name="video_selection">Pilihan Video</string>
    <string name="quality_x">Kualitas %1$d</string>
    <string name="off">Mati</string>
    <string name="not_loading">Tidak memuat</string>
    <string name="so_empty">Kosong sekali…</string>
    <string name="save_to_library">Simpan ke perpustakaan</string>
    <string name="saved_x_to_library">%1$s tersimpan ke perpustakaan</string>
    <string name="remove_from_library">Hapus dari perpustakaan</string>
    <string name="download">Unduhan</string>
    <string name="following_x">Mengikuti %1$s</string>
    <string name="followed_x">Diikuti %1$s</string>
    <string name="removed_x_from_library">%1$s terhapus dari perpustakaan</string>
    <string name="unfollowing_x">Berhenti mengikuti %1$s</string>
    <string name="unfollowed_x">%1$s sudah tidak mengikuti</string>
    <string name="hide">Sembunyikan</string>
    <string name="unhide">Batal sembunyikan</string>
    <string name="unhiding_x">Batal menyembunyikan %1$s</string>
    <string name="liking_x">Menyukai %1$s</string>
    <string name="unliking_x">Tidak Suka %1$s</string>
    <string name="unliked_x">Tidak Suka %1$s</string>
    <string name="save_to_playlist">Simpan ke daftar putar</string>
    <string name="add_to_queue">Tambahkan ke antrean</string>
    <string name="playing_x">Memainkan %1$s</string>
    <string name="adding_x_to_queue">Menambah %1$s ke antrean</string>
    <string name="adding_x_to_next">Memutar %1$s selanjutnya</string>
    <string name="background_gradient">Gradasi Latar Belakang</string>
    <string name="background_gradient_summary">Warna gradasi latar belakang tergantung konteks</string>
    <string name="sort">Sortir</string>
    <string name="explicit">Eksplisit</string>
    <string name="more_brain_capacity">Kapasitas Otak Lebih</string>
    <string name="x_plays">%1$s diputar</string>
    <string name="shuffling_x">Acak %1$s</string>
    <string name="filter">Saring</string>
    <string name="reversed">Terbalik</string>
    <string name="apply">Terapkan</string>
    <string name="save">Simpan</string>
    <string name="sort_title">Judul</string>
    <string name="scroll_animations_summary">Animasi saat menggulir</string>
    <string name="playlist_name">Nama playlist</string>
    <string name="playlist_description">Deskripsi playlist</string>
    <string name="create">Buat</string>
    <string name="add_song">Tambahkan lagu</string>
    <string name="creating_x">Membuat %1$s</string>
    <string name="x_created">%1$s dibuat</string>
    <string name="deleted_x">%1$s terhapus</string>
    <string name="saving_x">Menyimpan %1$s</string>
    <string name="saved_to_playlists">Tersimpan ke playlist</string>
    <string name="saved_to_x">Simpan ke %1$s</string>
    <string name="selected_n">%1$d terpilih</string>
    <string name="adding_x">Menambahkan %1$s</string>
    <string name="moving_x">Memindah %1$s</string>
    <string name="removing_x">Menghapus %1$s</string>
    <string name="nothing_to_download_in_x">Tidak ada yang diunduh di %1$s</string>
    <string name="merging_x">Menggabungkan %1$s</string>
    <string name="tagging_x">Menandai %1$s</string>
    <string name="theme">Tema</string>
    <string name="all">Semua</string>
    <string name="remove">Hapus</string>
    <string name="playlist_liked_desc">Lagu yang disukai</string>
    <string name="repeat_one">Ulang sekali</string>
    <string name="extension">Ekstensi</string>
    <string name="notifications">Notifikasi</string>
    <string name="playlist_liked">Disukai</string>
    <string name="home">Beranda</string>
    <string name="stream_quality">Kualitas streaming</string>
    <string name="version">Versi</string>
    <string name="settings">Pengaturan</string>
    <string name="play">Putar</string>
    <string name="shuffle">Acak</string>
    <string name="radio">Radio</string>
    <string name="blacklist_folders_summary">Folder yang dikecualikan dari library</string>
    <string name="sources">Sumber</string>
    <string name="follow">Ikuti</string>
    <string name="x_followers">%1$s Pengikut</string>
    <string name="delete">Hapus</string>
    <string name="okay">Oke</string>
    <string name="edit_playlist">Sunting Daftar Putar</string>
    <string name="unified_liked_playlist_summary">Lagu yang disukai dari berbagai ekstensi</string>
    <string name="repeat_off">Tidak ada perulangan</string>
    <string name="repeat_all">Ulangi semua</string>
    <string name="audio_fx_desc">Ubah efek suara pada lagu ini.</string>
    <string name="installation_type">Tipe pemasangan</string>
    <string name="view">Lihat</string>
    <string name="cache_size_summary">Ukuran cache video dan audio dalam MB</string>
    <string name="logout_and_login">Keluar dan masuk</string>
    <string name="value_not_set">Tidak diatur</string>
    <string name="amoled_summary">Ganti warna latar belakang dengan hitam pekat. Berguna untuk layar AMOLED untuk mengurangi pengurasan baterai dan mencegah layar terbakar</string>
    <string name="_30min">30 menit</string>
    <string name="extension_installed">%1$s (Telah Terpasang)</string>
    <string name="unknown_quality">Kualitas tidak diketahui</string>
    <string name="animation">Animasi</string>
    <string name="not_logged_in">Tidak ada akun</string>
    <string name="_15min">15 menit</string>
    <string name="share">Bagikan</string>
    <string name="duration_filter">Penyaringan durasi</string>
    <string name="sharing_x">Berbagi %1$s</string>
    <string name="sort_duration">Durasi</string>
    <string name="create_playlist">Buat playlist</string>
    <string name="downloading_update_for_x">Mengunduh pembaruan untuk %1$s</string>
    <string name="link">Tautan</string>
    <string name="deleting_x">Menghapus %1$s</string>
    <string name="invalid_extension_list">Daftar ekstensi tidak valid</string>
    <string name="sleep_timer">Waktu tidur</string>
    <string name="_45min">45 menit</string>
    <string name="x_disabled">%1$s (Dimatikan)</string>
    <string name="custom_theme_color_summary">Gunakan warna tema khusus, bukan warna sistem</string>
    <string name="backgrounds">Latar Belakang</string>
    <string name="_1hr">1 jam</string>
    <string name="dynamic_player">Warna Pemutar Dinamis</string>
    <string name="show_background">Tunjukan Latar Belakang</string>
    <string name="x_login">Login %1$s</string>
    <string name="subtitle_selection">Pilihan Subtitle</string>
    <string name="scroll_animations">Animasi scroll</string>
    <string name="playlist_name_empty">Nama playlist kosong</string>
    <string name="copying_the_error">Salin eror</string>
    <string name="audio_selection">Pilihan Audio</string>
    <string name="quality_selection">Pilihan Kualitas</string>
    <string name="unfollow">Berhenti mengikuti</string>
    <string name="no_download_extension">Ekstensi untuk mengunduh tidak ada, gunakan kode \"echodown\" untuk mendapatkannya.</string>
    <string name="delete_playlist">Hapus daftar putar</string>
    <string name="liked_x">Disukai %1$s</string>
    <string name="sort_date">Tanggal</string>
    <string name="hiding_x">Sembunyikan %1$s</string>
    <string name="show_background_summary">Latarbelakang video atau blur pada pemutar lagu</string>
    <string name="add_to_next">Putar selanjutnya</string>
    <string name="duration_filter_summary">Saring file audio berdasarkan durasi (detik) kurang dari nilai yang ditentukan</string>
    <string name="sort_and_filter">Sortir dan saring</string>
    <string name="sort_subtitle">Teks terjemahan</string>
    <string name="loading_x">Memuat %1s</string>
    <string name="download_started">Unduhan dimulai</string>
    <string name="cache_playlist_warning">Fitur percobaan. Semua kecuali mendengarkan ini tidak terdukung.</string>
    <string name="installation_type_summary">Pemasangan melalui aplikasi akan memungkinkan link berikut terbuka di Echo:</string>
    <string name="animations_summary">Puyeng? Coba matiin ini</string>
    <string name="reset">Mulai ulang</string>
    <string name="ui">UI</string>
    <string name="loading_radio_for_x">Memuat radio untuk %1$s</string>
    <string name="extension_installed_successfully">Ekstensi berhasil terpasang.</string>
    <string name="file">File</string>
    <string name="look_and_feel">Tampilan dan Nuansa</string>
    <string name="sleep_timer_cancelled">Waktu tidur dibatalkan</string>
    <string name="could_not_find_the_file">File tidak ditemukan.</string>
    <string name="apply_player_color_to_app">Terapkan warna pemutar ke seluruh aplikasi</string>
    <string name="apply_player_color_to_app_summary">AWAS NGELAG!!!</string>
    <string name="delete_download">Hapus Unduhan</string>
    <string name="removed_x_from_downloads">Menghapus %1$s dari Unduhan</string>
    <string name="download_complete">Unduhan Selesai</string>
    <string name="app_widget_description">Gema di layar beranda Anda!</string>
    <string name="feed">Pakan</string>
    <string name="item">Barang</string>
    <plurals name="number_items">
        <item quantity="other">%1$d Barang</item>
    </plurals>
    <string name="x_specific_quality_summary">%1$s kualitas aliran tertentu, akan menimpa seleksi kualitas aliran default</string>
    <string name="unmetered_stream_quality">Kualitas Aliran Tidak Terukur</string>
    <string name="unmetered_stream_quality_summary">Kualitas aliran ketika terhubung ke jaringan unmetered. Ini akan mengesampingkan kualitas aliran default.</string>
    <string name="select_language">Pilih Bahasa</string>
    <string name="check_for_updates">Memeriksa update terbaru</string>
    <string name="check_for_updates_summary">Cari pembaruan baru dari kedua aplikasi dan ekstensi, saat Anda membuka aplikasi.</string>
    <string name="checking_for_updates">Mengecek update terbaru</string>
    <string name="back_animations">Animasi Belakang</string>
    <string name="back_animations_summary">Dapat menyebabkan bug visual karena Android, tetapi Anda bisa membuka istirahat untuk memperbaikinya.</string>
    <string name="regex_invalid">%1$s tidak valid, silakan ikuti regex: %2$s</string>
    <string name="n_hours">%1$d jam</string>
    <string name="app_desc">Hanya pemutar musik.</string>
    <string name="confirmation">Konfirmasi</string>
    <string name="delete_playlist_confirmation">Apakah anda pasti ingin menghapus %1$s?</string>
    <string name="confirm">Konfirmasi</string>
    <string name="big_cover_summary">Bagus untuk perangkat dengan layar lebih besar</string>
    <string name="not_playable_x">%1$s Tidak dapat diputar</string>
    <string name="releases_on_x">Akan rilis pada %1$s</string>
    <string name="unavailable_in_your_region">Tidak tersedia di wilayah anda</string>
    <string name="currently_playing">Sedang Diputar</string>
    <string name="colors">Warna</string>
    <string name="scroll_bar">Bilah Gulir</string>
    <string name="unhidden_x">Tidak tersembunyi%1$s</string>
    <string name="genres_x">Genre: %1$s</string>
    <string name="guide">Panduan</string>
    <string name="donate">Donasi</string>
    <string name="contributors">Kontributor</string>
    <string name="manage">Kelola</string>
    <string name="no_account">Tidak Ada Akun</string>
    <string name="other_settings">Pengaturan Lainnya</string>
    <string name="no_x_found">Tidak Ada %1$s Ditemukan</string>
    <string name="playlist">Daftar Putar</string>
    <string name="album">Album</string>
    <string name="pre_release">Pra Rilis</string>
    <string name="single">Tunggal</string>
    <string name="compilation">Kompilasi</string>
    <string name="song">Lagu</string>
    <string name="podcast">Podcast</string>
    <string name="disc_number_n">Piringan Nomor: %1$d</string>
    <string name="big_cover">Sampul Lebih Besar</string>
    <string name="no_last_played_track_found">Tidak ada lagu terakhir yang diputar.</string>
    <string name="not_yet_released">Belum dirilis</string>
    <string name="scroll_bar_summary">Bilah gulir untuk akses lebih cepat (mungkin ada gangguan)</string>
    <string name="n_minutes">%1$d Menit</string>
    <string name="hidden_x">Disembunyikan %1$s</string>
    <string name="track">Lagu</string>
    <string name="n_songs">Lagu %1$d</string>
    <string name="n_episodes">%1$d Episode</string>
    <string name="n_chapters">%1$d Bagian</string>
    <string name="unsave">Tidak disimpan</string>
    <string name="no_update_available_for_x">Tidak ada pembaruan untuk %1$s</string>
    <string name="other">Lainnya</string>
    <string name="player">Pemutar</string>
    <string name="about">Tentang</string>
    <string name="language_x">Bahasa: %1$s</string>
    <string name="show">Tampilkan</string>
    <string name="book">Buku</string>
    <string name="album_order_n">Nomor Urutan Album: %1$d</string>
    <string name="tracks">Lagu</string>
    <string name="n_tracks">Lagu %1$d</string>
    <plurals name="number_songs">
        <item quantity="other">Tunggal\nLagu %1$d\n\nJamak\nLagu %1$d</item>
    </plurals>
    <string name="sort_date_added">Tanggal Ditambahkan</string>
    <string name="opening_webview_x">Membuka Tampilan Web: %1$s</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="ep">EP</string>
    <string name="lp">LP</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-it\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">OK</string>
    <string name="cancel">Annulla</string>
    <string name="back">Indietro</string>
    <string name="refresh_library_on_reload">Aggiorna libreria al riavvio</string>
    <string name="refresh_library_on_reload_summary">Scansiona il dispositivo ogni volta che il feed viene caricato</string>
    <string name="duration_filter">Durata filtro</string>
    <string name="blacklist_folders">Cartelle escluse</string>
    <string name="repeat_off">Ripetizione disattivata</string>
    <string name="repeat_all">Ripeti tutto</string>
    <string name="home">Principale</string>
    <string name="search">Cerca</string>
    <string name="library">Libreria</string>
    <string name="extension_x_not_found">Estensione %1$s non trovata</string>
    <string name="install">Installa</string>
    <string name="theme">Tema</string>
    <string name="save_to_library">Salva nella libreria</string>
    <string name="save">Salva</string>
    <string name="app_widget_description">Echo nella tua schermata home!</string>
    <plurals name="number_min">
        <item quantity="one">%1$d minuto</item>
        <item quantity="many">%1$d minuti</item>
        <item quantity="other">%1$d minuti</item>
    </plurals>
    <string name="cache_playlist_warning">Funzionalità sperimentale. Qualsiasi utilizzo diverso dall’ascolto non è supportato.</string>
    <string name="x_permission_required">Permessi %1$s richiesti</string>
    <string name="x_was_not_granted">Permessi %1$s non consentiti</string>
    <string name="audio">Audio</string>
    <string name="audio_permission_summary">Per accedere alla tua libreria musicale locale</string>
    <string name="video">Video</string>
    <string name="read_storage">Lettura in memoria</string>
    <string name="write_storage">Scrittura in memoria</string>
    <string name="write_storage_permission_summary">Per creare o modificare le playlist locali</string>
    <string name="notifications">Notifiche</string>
    <string name="notifications_permission_summary">Per mostrare notifiche di download o di riproduzione</string>
    <string name="remove">Rimuovi</string>
    <string name="more_by_x">Altro di %1$s</string>
    <string name="songs">Brani</string>
    <string name="albums">Album</string>
    <string name="x_radio">%1$s Radio</string>
    <string name="cached_songs">Brani nella cache</string>
    <string name="recently_added">Aggiunto di recente</string>
    <string name="artists">Artisti</string>
    <string name="duration_filter_summary">FIltra i file audio con una durata (in secondi) più breve di quella indicata</string>
    <string name="blacklist_folders_summary">Cartelle da escludere dalla liberia</string>
    <string name="blacklist_folder_keywords">Parole chiave cartelle escluse</string>
    <string name="blacklist_folder_keywords_summary">Parole chiave per escludere cartelle, usa la virgola come separatore</string>
    <string name="saved">Salvato</string>
    <string name="tabs">Schede</string>
    <string name="show_tabs">Mostra schede</string>
    <string name="unified_liked_playlist_summary">I tuoi brani preferiti dalle varie estensioni</string>
    <string name="n_items">%1$d Elementi</string>
    <string name="show_tab_summary">Mostrerà le schede delle estensioni come categorie</string>
    <string name="playlist_liked">Preferiti</string>
    <string name="playlist_liked_desc">I tuoi brani preferiti</string>
    <string name="unknown">Sconosciuto</string>
    <string name="like">Mi piace</string>
    <string name="unlike">Non mi piace</string>
    <string name="repeat_one">Ripeti una volta</string>
    <string name="more">Altro</string>
    <string name="downloading_x">Scaricamento di %1$s</string>
    <string name="cancel_all">Annulla tutto</string>
    <string name="logout_and_login">Disconnetti e accedi</string>
    <string name="download_progress">Avanzamento download</string>
    <string name="downloads">Download</string>
    <string name="downloaded_x">%1$s scaricato</string>
    <string name="login">Accedi</string>
    <string name="view">Visualizza</string>
    <string name="extension_out_of_date">Estensione obsoleta</string>
    <string name="no_internet">Nessuna connessione Internet</string>
    <string name="error_loading_extension_from_x">Errore nel caricamento dell’estensione da %1$s</string>
    <string name="required_extensions_missing_x">Estensioni necessarie mancanti: %1$s</string>
    <string name="x_login_required">Accesso a %1$s richiesto</string>
    <string name="x_is_not_supported_in_x">%1$s non è supportato da %2$s</string>
    <string name="account_session_expired_in_x">Sessione account scaduta in %1$s</string>
    <string name="error_x">Errore: %1$s</string>
    <string name="str_copy">Copia</string>
    <string name="extensions">Estensioni</string>
    <string name="choose_a_color">Scegli un colore</string>
    <string name="random">Casuale</string>
    <string name="add">Aggiungi</string>
    <string name="loading">Caricamento in corso…</string>
    <string name="settings">Impostazioni</string>
    <string name="audio_fx">Effetti audio</string>
    <string name="value">Valore</string>
    <string name="value_not_set">Non impostato</string>
    <string name="playback">Riproduzione</string>
    <string name="audio_fx_summary">Effetti applicati a tutti i brani</string>
    <string name="audio_fx_desc">Modifica gli effetti audio per il brano corrente.</string>
    <string name="reset">Ripristina</string>
    <string name="playback_speed">Velocità di riproduzione</string>
    <string name="change_pitch_with_speed">Modifica il tono insieme alla velocità</string>
    <string name="bass_boost">Bassi potenziati</string>
    <string name="change_pitch_with_speed_desc">Ottieni suono al rallentatore</string>
    <string name="equalizer">Equalizzatore</string>
    <string name="equalizer_summary">Apri le impostazioni dell’equalizzatore del dispositivo</string>
    <string name="stream_quality">Qualità dello streaming</string>
    <string name="keep_queue_summary">Recupera la coda di riproduzione all’apertura dell’app.</string>
    <string name="stream_quality_summary">Seleziona la qualità predefinita dello streaming</string>
    <string name="behavior">Comportamento</string>
    <string name="keep_queue">Mantieni la coda di riproduzione</string>
    <string name="stop_player">Ferma riproduzione</string>
    <string name="stop_player_summary">Ferma la riproduzione quando l’app viene rimossa dai recenti</string>
    <string name="skip_silence">Riproduzione senza pause</string>
    <string name="auto_start_radio">Avvio Automatico della Radio</string>
    <string name="auto_start_radio_summary">Aggiungi automaticamente brani correlati alla traccia nella playlist per avere una coda infinita</string>
    <string name="cache_size">Dimensione della cache</string>
    <string name="cache_size_summary">Dimensione in MB della cache audio e video</string>
    <string name="version">Versione</string>
    <string name="system">Sistema</string>
    <string name="app">App</string>
    <string name="file">File</string>
    <string name="installation_type">Tipo di Installazione</string>
    <string name="installation_type_summary">L\'installazione come App consente di aprire i seguenti link in Echo:</string>
    <string name="installation_type_warning">Non disponibile se installi l’estensione come File.</string>
    <string name="could_not_find_the_file">Impossibile trovare il file.</string>
    <string name="extension_installer">Installazione Estensioni</string>
    <string name="extension_installed_successfully">Estensione installata con successo.</string>
    <string name="extension_uninstalled_successfully">Estensione disinstallata con successo.</string>
    <string name="allow_opening_links">Consenti l’apertura dei link</string>
    <string name="link_or_code">Link o Codice</string>
    <string name="list_is_empty">La lista è vuota</string>
    <string name="open_links_instruction">Per consentire l’apertura di questi link, devi:\n- Scorrere verso il basso e cliccare su \"Apri per impostazione predefinita\"\n- Cliccare su \"+ Aggiungi link\"</string>
    <string name="downloading_update_for_x">Download aggiornamento per %1$s</string>
    <string name="extension_updated_successfully">%1$s aggiornato con successo</string>
    <string name="link">Link</string>
    <string name="extension_installed">%1$s (Installato)</string>
    <string name="add_extensions">Aggiungi Estensioni</string>
    <string name="invalid_extension_list">La lista delle estensioni non è valida</string>
    <string name="look_and_feel">Aspetto e stile</string>
    <string name="ui">Interfaccia utente</string>
    <string name="theme_summary">Vuoi accecarti?</string>
    <string name="custom_theme_color">Colore Tema Personalizzato</string>
    <string name="custom_theme_color_summary">Usa un colore del tema personalizzato anziché il tema di sistema.</string>
    <string name="add_color">Aggiungi colore</string>
    <string name="custom_colors">Colori personalizzati</string>
    <string name="amoled">AMOLED</string>
    <string name="amoled_summary">Usa un nero profondo</string>
    <string name="navbar_gradient">Barra di navigazione sfumata</string>
    <string name="navbar_gradient_summary">La barra di navigazione diventa gradualmente trasparente</string>
    <string name="dynamic_player_summary">Applica il colore al lettore in base alla copertina del brano</string>
    <string name="dynamic_player">Colore dinamico del lettore</string>
    <string name="show_background">Mostra sfondo</string>
    <string name="show_background_summary">Video in background o copertina sfocata del brano nel lettore</string>
    <string name="animation">Animazione</string>
    <string name="animations">Animazioni</string>
    <string name="animations_summary">Se l’app ti sembra che vada a scatti, prova a disattivare questa opzione</string>
    <string name="refresh">Aggiorna</string>
    <string name="x_disabled">%1$s (disattivato)</string>
    <string name="by_x">Di %1$s</string>
    <string name="music">Musica</string>
    <string name="tracker">Tracker</string>
    <string name="lyrics">Testo</string>
    <string name="misc">Varie</string>
    <string name="x_extensions">Estensioni %1$s</string>
    <string name="x_extension">Estensione %1$s</string>
    <string name="enabled">Abilitato</string>
    <string name="disabled">Disabilitato</string>
    <string name="no_user_found">Nessun utente trovato</string>
    <string name="select_x_account">Seleziona l\'account %1$s</string>
    <string name="add_extension">Aggiungi estensione</string>
    <string name="error_updating_extension">Errore durante l’aggiornamento</string>
    <string name="webview">Visualizzazione Web</string>
    <string name="logout">Disconnetti</string>
    <string name="switch_account">Cambia account</string>
    <string name="incognito">Modalità incognito</string>
    <string name="not_logged_in">Accesso non eseguito</string>
    <string name="x_login">Accedi a %1$s</string>
    <string name="x_is_required">%1$s è necessario</string>
    <string name="playing_from">Riproduzione da</string>
    <string name="up_next">Coda</string>
    <string name="info">Info</string>
    <string name="shuffle">Riproduzione casuale</string>
    <string name="previous">Precedente</string>
    <string name="play">Riproduci</string>
    <string name="next">Successivo</string>
    <string name="repeat">Ripeti</string>
    <string name="close">Chiudi</string>
    <string name="no_lyrics">Testo non disponibile</string>
    <string name="sleep_timer">Timer di spegnimento</string>
    <string name="end_of_track">Fine del brano</string>
    <string name="_15min">15m</string>
    <string name="_30min">30m</string>
    <string name="_45min">45m</string>
    <string name="_1hr">1h</string>
    <string name="_2hr">2h</string>
    <string name="sleep_timer_desc">Imposta un timer di sospensione per interrompere la riproduzione dopo un certo periodo di tempo</string>
    <string name="sleep_on_specific_time">Interrompi ad un orario specifico</string>
    <string name="sleep_timer_cancelled">Timer di sospensione annullato</string>
    <string name="sleep_timer_set_for">Timer di sospensione impostato a %1$s</string>
    <string name="search_x">Cerca %1$s</string>
    <string name="servers">Server</string>
    <string name="sources">Sorgenti</string>
    <string name="backgrounds">Sfondi</string>
    <string name="subtitles">Sottotitoli</string>
    <string name="audio_selection">Seleziona audio</string>
    <string name="video_selection">Seleziona video</string>
    <string name="subtitle_selection">Selezione sottotitoli</string>
    <string name="quality_selection">Selezione qualità</string>
    <string name="quality_x">Qualità %1$d</string>
    <string name="off">Spento</string>
    <string name="unknown_quality">Qualità sconosciuta</string>
    <string name="so_empty">È così vuoto…</string>
    <string name="not_loading">Non in caricamento</string>
    <string name="share">Condividi</string>
    <string name="sharing_x">Condivisione di %1$s</string>
    <string name="saved_x_to_library">%1$s salvato nella libreria</string>
    <string name="remove_from_library">Rimuovi dalla libreria</string>
    <string name="follow">Segui</string>
    <string name="removed_x_from_library">%1$s rimosso dalla libreria</string>
    <string name="radio">Radio</string>
    <string name="download">Scarica</string>
    <string name="following_x">Aggiunta di %1$s tra i seguiti</string>
    <string name="followed_x">%1$s aggiunto ai seguiti</string>
    <string name="unfollow">Non seguire più</string>
    <string name="unfollowing_x">Rimozione di %1$s tra i seguiti</string>
    <string name="unfollowed_x">%1$s rimosso dai seguiti</string>
    <string name="hide">Nascondi</string>
    <string name="hiding_x">Nascondendo %1$s</string>
    <string name="unhide">Rivela</string>
    <string name="unhiding_x">Mostrando %1$s</string>
    <string name="liking_x">Aggiunta di %1$s tra i preferiti</string>
    <string name="liked_x">%1$s aggiunto tra i preferiti</string>
    <string name="unliking_x">Rimozione di %1$s dai preferiti</string>
    <string name="unliked_x">%1$s rimosso dai preferiti</string>
    <string name="save_to_playlist">Salva in una playlist</string>
    <string name="delete_playlist">Cancella playlist</string>
    <string name="add_to_next">Riproduci dopo</string>
    <string name="add_to_queue">Aggiungi alla coda</string>
    <string name="adding_x_to_next">Aggiunta di %1$s come successivo in coda</string>
    <string name="loading_radio_for_x">Caricamento radio per %1$s</string>
    <string name="playing_x">Riproduzione di %1$s</string>
    <string name="adding_x_to_queue">Aggiunta di %1$s alla coda</string>
    <string name="background_gradient">Sfondo sfumato</string>
    <string name="background_gradient_summary">Una sfumatura di colore nello sfondo in base al contesto</string>
    <string name="all">Tutto</string>
    <string name="edit_playlist">Modifica playlist</string>
    <string name="more_brain_capacity">Più capacità di elaborazione</string>
    <string name="sort">Ordina</string>
    <string name="explicit">Esplicito</string>
    <string name="more_brain_capacity_summary">Attivare questa opzione può aiutare a risolvere i ritardi audio, a discapito del consumo della batteria (offloading audio disattivato).</string>
    <string name="x_plays">%1$s ascolti</string>
    <string name="x_followers">%1$s follower</string>
    <string name="shuffling_x">Riproduzione casuale di %1$s</string>
    <string name="copying_the_error">Copia errore</string>
    <string name="sort_and_filter">Ordina e filtra</string>
    <string name="filter">Filtra</string>
    <string name="reversed">Invertito</string>
    <string name="apply">Applica</string>
    <string name="sort_title">Titolo</string>
    <string name="sort_date">Data</string>
    <string name="sort_duration">Durata</string>
    <string name="scroll_animations">Animazioni di scorrimento</string>
    <string name="scroll_animations_summary">Animazioni durante lo scorrimento</string>
    <string name="sort_subtitle">Sottotitoli</string>
    <string name="delete">Elimina</string>
    <string name="playlist_name">Nome playlist</string>
    <string name="playlist_name_empty">Il nome della playlist è vuoto</string>
    <string name="playlist_description">Descrizione playlist</string>
    <string name="create_playlist">Crea playlist</string>
    <string name="create">Crea</string>
    <string name="add_song">Aggiungi brano</string>
    <string name="creating_x">Creazione di %1$s</string>
    <string name="x_created">%1$s creato</string>
    <string name="deleting_x">Eliminazione di %1$s</string>
    <string name="deleted_x">%1$s eliminato</string>
    <string name="loading_x">Caricamento di %1s</string>
    <string name="saved_to_playlists">Salvato nelle playlist</string>
    <string name="saving_x">Salvataggio di %1$s</string>
    <string name="saved_to_x">Salvato in %1$s</string>
    <string name="selected_n">Selezione: %1$d</string>
    <string name="adding_x">Aggiunta di %1$s</string>
    <string name="moving_x">Spostamento di %1$s</string>
    <string name="removing_x">Rimozione di %1$s</string>
    <string name="no_download_extension">Nessuna estensione per il download trovata, usa il codice \"echodown\" per ottenerla.</string>
    <string name="nothing_to_download_in_x">Nulla da scaricare in %1$s</string>
    <string name="apply_player_color_to_app">Applica il colore del lettore a tutta l’applicazione</string>
    <string name="apply_player_color_to_app_summary">PERICOLO DI LAG!!!</string>
    <string name="download_started">Download avviato</string>
    <string name="merging_x">Unione di %1$s</string>
    <string name="tagging_x">Aggiunta dei tag di %1$s</string>
    <string name="delete_download">Elimina download</string>
    <string name="removed_x_from_downloads">%1$s rimosso dai Download</string>
    <string name="download_complete">Download completato</string>
    <string name="extension">Estensione</string>
    <string name="bass_boost_desc">Un valore più alto può distorcere il suono.</string>
    <string name="skip_silence_summary">Salta le parti silenziose della canzone per una riproduzione continua.</string>
    <string name="seekbar">Barra di avanzamento</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d ora</item>
        <item quantity="many">%1$d ore</item>
        <item quantity="other">%1$d ore</item>
    </plurals>
    <string name="feed">Novità</string>
    <string name="item">Oggetto</string>
    <plurals name="number_items">
        <item quantity="one">%1$d Oggetto</item>
        <item quantity="many">%1$d Oggetti</item>
        <item quantity="other">%1$d Oggetti</item>
    </plurals>
    <string name="x_specific_quality_summary">Qualità dello streaming specifica di %1$s, sovrascriverà la selezione predefinita della qualità dello streaming</string>
    <string name="unmetered_stream_quality">Qualità di riproduzione su reti non a consumo</string>
    <string name="unmetered_stream_quality_summary">La qualità dello streaming quando ci si connette a una rete non a consumo. Questo sovrascriverà la qualità di streaming predefinita.</string>
    <string name="select_language">Seleziona Lingua</string>
    <string name="check_for_updates">Controlla aggiornamenti</string>
    <string name="check_for_updates_summary">Cerca nuovi aggiornamenti di app ed estensioni all’apertura dell’app.</string>
    <string name="checking_for_updates">Controllo degli aggiornamenti in corso</string>
    <string name="back_animations">Animazioni “indietro”</string>
    <string name="back_animations_summary">Può causare un errore visivo a causa di Android, ma è sufficiente aprire i Recenti per risolverlo.</string>
    <string name="regex_invalid">%1$s non è valido, per favore segui la regex: %2$s</string>
    <string name="n_hours">%1$d ore</string>
    <string name="n_minutes">%1$d minuti</string>
    <string name="hidden_x">Nascosto %1$s</string>
    <string name="unhidden_x">%1$s visibile</string>
    <string name="track">Traccia</string>
    <string name="tracks">Tracce</string>
    <string name="n_songs">%1$d brani</string>
    <string name="n_episodes">%1$d episodi</string>
    <string name="n_chapters">%1$d capitoli</string>
    <string name="n_tracks">%1$d tracce</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d brano</item>
        <item quantity="many">%1$d brani</item>
        <item quantity="other">%1$d brani</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d episodio</item>
        <item quantity="many">%1$d episodi</item>
        <item quantity="other">%1$d episodi</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d capitolo</item>
        <item quantity="many">%1$d capitoli</item>
        <item quantity="other">%1$d capitoli</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d traccia</item>
        <item quantity="many">%1$d tracce</item>
        <item quantity="other">%1$d tracce</item>
    </plurals>
    <string name="unsave">Non salvare</string>
    <string name="sort_date_added">Data di aggiunta</string>
    <string name="opening_webview_x">Apertura Webview: %1$s</string>
    <string name="no_update_available_for_x">Nessun aggiornamento disponibile per %1$s</string>
    <string name="other">Altro</string>
    <string name="player">Lettore</string>
    <string name="about">Informazioni</string>
    <string name="language_x">Lingua: %1$s</string>
    <string name="guide">Guida</string>
    <string name="donate">Dona ora</string>
    <string name="contributors">Contributori</string>
    <string name="app_desc">Semplicemente un lettore musicale.</string>
    <string name="manage">Gestisci</string>
    <string name="no_account">Nessun account</string>
    <string name="other_settings">Altre impostazioni</string>
    <string name="no_x_found">Nessun %1$s trovato</string>
    <string name="playlist">Playlist</string>
    <string name="album">Album</string>
    <string name="pre_release">Anteprima</string>
    <string name="single">Singolo</string>
    <string name="ep">EP</string>
    <string name="lp">LP</string>
    <string name="compilation">Compilation</string>
    <string name="show">Mostra</string>
    <string name="book">Prenota</string>
    <string name="song">Brano</string>
    <string name="podcast">Podcast</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="genres_x">Generi: %1$s</string>
    <string name="disc_number_n">Numero disco: %1$d</string>
    <string name="album_order_n">Numero d’ordine nell’album: %1$d</string>
    <string name="confirmation">Conferma</string>
    <string name="delete_playlist_confirmation">Sei sicuro di voler eliminare %1$s?</string>
    <string name="confirm">Conferma</string>
    <string name="big_cover">Cover più grandi</string>
    <string name="big_cover_summary">Ottimo per dispositivi con schermi più grandi</string>
    <string name="no_last_played_track_found">Non è stata trovata l\'ultima traccia riprodotta.</string>
    <string name="not_yet_released">Non ancora rilasciato</string>
    <string name="releases_on_x">Rilasciato il %1$s</string>
    <string name="unavailable_in_your_region">Non disponibile nella tua area geografica</string>
    <string name="not_playable_x">Non riproducibile: %1$s</string>
    <string name="colors">Colori</string>
    <string name="scroll_bar">Barra di scorrimento</string>
    <string name="scroll_bar_summary">Barra di scorrimento sul lato per un accesso più rapido (potrebbe presentare artefatti visivi)</string>
    <string name="currently_playing">In riproduzione</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-iw\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">בסדר</string>
    <string name="cancel">ביטול</string>
    <string name="back">חזרה</string>
    <string name="feed">פיד</string>
    <string name="x_permission_required">נדרשת הרשאת %1$s</string>
    <string name="x_was_not_granted">%1$s לא הוענק</string>
    <string name="audio">שמע</string>
    <string name="audio_permission_summary">כדי לקבל גישה לספריית המוזיקה המקומית שלך</string>
    <string name="read_storage">גישה לאחסון</string>
    <string name="write_storage">שמירה באחסון המקומי</string>
    <string name="write_storage_permission_summary">כדי ליצור ולערוך פלייליסטים מקומיים</string>
    <string name="notifications">התראות</string>
    <string name="notifications_permission_summary">כדי להציג התראות עבור הורדות ומוזיקה</string>
    <string name="remove">מחיקה</string>
    <string name="more_by_x">עוד מ־%1$s</string>
    <string name="songs">שירים</string>
    <string name="albums">אלבומים</string>
    <string name="x_radio">רדיו %1$s</string>
    <string name="cached_songs">שירים במטמון</string>
    <string name="cache_playlist_warning">תכונה ניסיונית. כל דבר מלבד האזנה להם אינו נתמך.</string>
    <string name="artists">אמנים</string>
    <string name="recently_added">נוסף לאחרונה</string>
    <string name="refresh_library_on_reload">ריענון הספרייה בעת טעינה מחדש</string>
    <string name="refresh_library_on_reload_summary">סרוק את המכשיר בכל פעם שהפיד נטען</string>
    <string name="duration_filter">סינון לפי אורך</string>
    <string name="duration_filter_summary">סנן קבצי שמע שמשך הזמן (בשניות) שלהם קטן מהערך</string>
    <string name="blacklist_folders">תיקיות ברשימה השחורה</string>
    <string name="blacklist_folders_summary">תיקיות להחרגה מהספרייה</string>
    <string name="blacklist_folder_keywords">מילות מפתח של תיקיית רשימה שחורה</string>
    <string name="blacklist_folder_keywords_summary">מילות מפתח לרשימה שחורה של תיקיות. השתמש בפסיק כמפריד</string>
    <string name="saved">נשמר</string>
    <string name="tabs">טאבים</string>
    <string name="show_tabs">הצגת טאבים</string>
    <string name="show_tab_summary">יציג כרטיסיות של התוספים כקטגוריה</string>
    <string name="unified_liked_playlist_summary">הרצועות שאהבת מתוספים שונים</string>
    <string name="n_items">%1$d פריטים</string>
    <string name="item">פריט</string>
    <plurals name="number_items">
        <item quantity="one">פריט %1$d</item>
        <item quantity="two">%1$d פריטים</item>
        <item quantity="other">%1$d פריטים</item>
    </plurals>
    <string name="playlist_liked">אהבת</string>
    <string name="unknown">לא ידוע</string>
    <string name="like">אהוב</string>
    <string name="unlike">לא אהוב</string>
    <string name="repeat_one">חזרה פעם אחת</string>
    <string name="repeat_off">חזרה כבויה</string>
    <string name="repeat_all">חזרה על הכול</string>
    <string name="home">בית</string>
    <string name="search">חיפוש</string>
    <string name="library">ספרייה</string>
    <string name="more">עוד</string>
    <string name="extension">תוספים</string>
    <string name="downloading_x">בהורדה %1$s</string>
    <string name="cancel_all">ביטול הכל</string>
    <string name="download_progress">התקדמות ההרודה</string>
    <string name="downloads">הורדות</string>
    <string name="downloaded_x">הורד %1$s</string>
    <string name="logout_and_login">יציאה וכניסה</string>
    <string name="login">כניסה</string>
    <string name="view">צפייה</string>
    <string name="extension_out_of_date">לא מעודכן</string>
    <string name="no_internet">אין אינטרנט</string>
    <string name="error_loading_extension_from_x">שגיאה בטעינת תוסף מ %1$s</string>
    <string name="extension_x_not_found">תוספים %1$s לא נמצאו</string>
    <string name="required_extensions_missing_x">תוספים נדרשים חסרים: %1$s</string>
    <string name="x_login_required">נדרשת כניסה ל-%1$s</string>
    <string name="x_is_not_supported_in_x">%1$s אינו נתמך ב-%2$s</string>
    <string name="account_session_expired_in_x">סשן החשבון פג בעוד %1$s</string>
    <string name="error_x">שגיאה: %1$s</string>
    <string name="str_copy">העתקה</string>
    <string name="extensions">הרחבות</string>
    <string name="choose_a_color">בחירת צבע</string>
    <string name="random">אקראי</string>
    <string name="add">הוספה</string>
    <string name="loading">טוען…</string>
    <string name="settings">הגדרות</string>
    <string name="value">ערך</string>
    <string name="value_not_set">לא הוגדר</string>
    <string name="playback">השמעה</string>
    <string name="audio_fx">אפקטי קול</string>
    <string name="audio_fx_summary">האפקטים מוחלים על כל השירים</string>
    <string name="audio_fx_desc">שנה את אפקטי השמע עבור השיר הנוכחי.</string>
    <string name="reset">אתחול</string>
    <string name="playback_speed">מהירות השמעה</string>
    <string name="change_pitch_with_speed">שינוי גובה הצליל עם המהירות</string>
    <string name="bass_boost">בוסט בס</string>
    <string name="bass_boost_desc">ערך גדול יותר עלול לעוות את הצליל.</string>
    <string name="change_pitch_with_speed_desc">קבל את הצליל של הילוך איטי</string>
    <string name="equalizer">אקולייזר</string>
    <string name="equalizer_summary">פתח את הגדרות האקולייזר של המכשיר</string>
    <string name="stream_quality_summary">בחר את איכות ברירת המחדל של הסטרימינג</string>
    <string name="x_specific_quality_summary">איכות הסטרימינג הספציפית עבור %1$s. היא תעקוף את בחירת איכות הסטרימינג המוגדרת כברירת מחדל</string>
    <string name="unmetered_stream_quality">איכות סטרימינג ברשת לא מוגבלת</string>
    <string name="unmetered_stream_quality_summary">איכות הסטרימינג כאשר המכשיר מחובר לרשת לא מוגבלת בנתונים. פעולה זו תעקוף את איכות הסטרימינג המוגדרת כברירת מחדל.</string>
    <string name="behavior">התנהגות</string>
    <string name="keep_queue_summary">משחזר את תור הנגן כאשר אתה פותח את האפליקציה מחדש.</string>
    <string name="stop_player">עצור נגן</string>
    <string name="stop_player_summary">מפסיק לנגן כאשר האפליקציה נמחקת מ\"לאחרונה\" במכשיר</string>
    <string name="skip_silence">דלג על חלקי שתיקה</string>
    <string name="skip_silence_summary">דלג על חלקים שקטים בשיר כדי לספק השמעה ללא הפסקות.</string>
    <string name="auto_start_radio">רדיו הפעלה אוטומטית</string>
    <string name="auto_start_radio_summary">מוסיף אוטומטית שירים קשורים לרצועה בפלייליסט כדי ליצור תור שירים אין סופי</string>
    <string name="amoled">אמו-לד</string>
    <string name="amoled_summary">שחור מוחלט, שחור טהור</string>
    <string name="navbar_gradient">סרגל ניווט עם גרדיאנט</string>
    <string name="navbar_gradient_summary">סרגל הניווט הופך בהדרגה לשקוף</string>
    <string name="dynamic_player">צבע נגן דינמי</string>
    <string name="dynamic_player_summary">החלת צבע על הנגן בהתבסס על גרפיקת הרצועה</string>
    <string name="show_background">הצג רקע</string>
    <string name="show_background_summary">סרטון רקע או גרפיקה מטושטשת של הרצועה בנגן</string>
    <string name="animation">אנימציה</string>
    <string name="back_animations">אנימציות אחוריות</string>
    <string name="back_animations_summary">יכול לגרום לבאג ויזואלי עקב אנדרואיד, אבל אתה יכול פשוט לפתוח את ההודעות האחרונות כדי לתקן את זה.</string>
    <string name="animations">אנימציות</string>
    <string name="animations_summary">מרגיש יותר מדי גמגום? לכבות את זה עשוי יעזור</string>
    <string name="refresh">ריענון</string>
    <string name="x_disabled">%1$s (מושבת)</string>
    <string name="by_x">על ידי %1$s</string>
    <string name="tracker">עוקב</string>
    <string name="lyrics">מילים</string>
    <string name="misc">שונות</string>
    <string name="x_extensions">הרחבות %1$s</string>
    <string name="x_extension">הרחבת %1$s</string>
    <string name="enabled">מופעל</string>
    <string name="disabled">מושבת</string>
    <string name="error_updating_extension">שגיאה במהלך העדכון</string>
    <string name="no_user_found">לא נמצא משתמש</string>
    <string name="select_x_account">בחר חשבון %1$s</string>
    <string name="add_extension">הוסף הרחבה</string>
    <string name="webview">תצוגת אינטרנט</string>
    <string name="playlist_liked_desc">הרצועות האהובות שלך</string>
    <string name="stream_quality">איכות סטרימינג</string>
    <string name="keep_queue">שמור על תור הנגן</string>
    <string name="cache_size">גודל מטמון</string>
    <string name="cache_size_summary">גודל במגה בייט לאחסון אודיו ווידאו במטמון</string>
    <string name="version">גרסה</string>
    <string name="select_language">בחר שפה</string>
    <string name="system">מערכת</string>
    <string name="check_for_updates">בדוק עבור עדכונים</string>
    <string name="check_for_updates_summary">חפש עדכונים חדשים גם לאפליקציה וגם לתוספים כשאתה פותח את האפליקציה.</string>
    <string name="install">התקן</string>
    <string name="app">אפליקציה</string>
    <string name="file">קובץ</string>
    <string name="installation_type">סוג התקנה</string>
    <string name="installation_type_summary">התקנת האפליקציה תאפשר פתיחת הקישורים הבאים ב-Echo:</string>
    <string name="installation_type_warning">לא זמין אם תתקין את התוסף כקובץ.</string>
    <string name="could_not_find_the_file">לא הצלחנו למצוא את הקובץ.</string>
    <string name="extension_installer">מתקין תוספים</string>
    <string name="extension_installed_successfully">התוסף הותקן בהצלחה.</string>
    <string name="extension_uninstalled_successfully">התוסף הוסר בהצלחה.</string>
    <string name="allow_opening_links">אפשר פתיחת קישורים</string>
    <string name="open_links_instruction">על מנת לאפשר פתיחה של הקישורים האלו, אתה צריך:\n- לגלול למטה וללחוץ על \"פתיחה כברירת מחדל\"\n- ללחוץ על \"+ הוסף קישור\"</string>
    <string name="downloading_update_for_x">מוריד עדכון עבור %1$s</string>
    <string name="extension_updated_successfully">%1$s עודכן בהצלחה</string>
    <string name="link">קישור</string>
    <string name="link_or_code">קישור או קוד</string>
    <string name="list_is_empty">הרשימה ריקה</string>
    <string name="extension_installed">%1$s (מותקן)</string>
    <string name="add_extensions">הוסף תוספים</string>
    <string name="invalid_extension_list">רשימת תוספים לא חוקית</string>
    <string name="checking_for_updates">בודק אחר עדכונים</string>
    <string name="look_and_feel">מראה ותחושה</string>
    <string name="ui">ממשק משתמש</string>
    <string name="theme">נושא</string>
    <string name="theme_summary">רוצה להיות עיוור?</string>
    <string name="custom_theme_color">צבע ערכת נושא מותאם אישית</string>
    <string name="custom_theme_color_summary">השתמש בצבע ערכת נושא מותאם אישית, במקום ערכת הנושא של המערכת.</string>
    <string name="add_color">הוסף צבע</string>
    <string name="custom_colors">צבעים מותאמים אישית</string>
    <string name="music">מוזיקה</string>
    <string name="logout">התנתק</string>
    <string name="switch_account">החלף חשבון</string>
    <string name="incognito">גלישה בסתר</string>
    <string name="not_logged_in">לא מחובר</string>
    <string name="x_login">כניסת %1$s</string>
    <string name="x_is_required">נדרש %1$s</string>
    <string name="regex_invalid">%1$s אינו חוקי, אנא עקוב אחר הביטוי הרגולרי: %2$s</string>
    <string name="playing_from">מנגן מ</string>
    <string name="up_next">הבא בתור</string>
    <string name="info">מידע</string>
    <string name="shuffle">השמעה אקראית</string>
    <string name="liking_x">שם לייק ל- %1$s</string>
    <string name="unhiding_x">מבטל את ההסתרה של %1$s</string>
    <string name="hidden_x">%1$s הוסתר</string>
    <string name="unhidden_x">בטל את ההסתרה של %1$s</string>
    <string name="save_to_playlist">שמור לפלייליסט</string>
    <string name="delete_playlist">מחק פלייליסט</string>
    <string name="add_to_next">הוסף להבא</string>
    <string name="add_to_queue">הוסף לתור</string>
    <string name="loading_radio_for_x">טוען רדיו עבור %1$s</string>
    <string name="playing_x">מנגן %1$s</string>
    <string name="adding_x_to_queue">מוסיף את %1$s לתור</string>
    <string name="adding_x_to_next">מוסיף את %1$s להבא</string>
    <string name="background_gradient">‍שיפוע רקע</string>
    <string name="background_gradient_summary">גוון צבע הדרגתי ברקע בהתאם להקשר</string>
    <string name="all">הכל</string>
    <string name="edit_playlist">ערוך פלייליסט</string>
    <string name="more_brain_capacity">יותר קיבולת מוחית</string>
    <string name="more_brain_capacity_summary">הפעלת אפשרות זו יכולה לסייע בתיקון השהיית שמע, אך להגדיל את ניצול הסוללה (משבית את פריקת האודיו).</string>
    <string name="track">‮רצועה</string>
    <string name="tracks">רצועות</string>
    <string name="sort">מיון</string>
    <string name="explicit">מפורש</string>
    <string name="x_plays">%1$s מתנגן</string>
    <string name="x_followers">%1$s עוקבים</string>
    <string name="n_songs">%1$d שירים</string>
    <string name="n_episodes">%1$d פרקים</string>
    <string name="n_chapters">%1$d עונות</string>
    <string name="n_tracks">%1$d רצועות</string>
    <plurals name="number_songs">
        <item quantity="one">שיר %1$d</item>
        <item quantity="two">%1$d שירים</item>
        <item quantity="other">%1$d שירים</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">פרק %1$d</item>
        <item quantity="two">%1$d פרקים</item>
        <item quantity="other">%1$d פרקים</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">עונה %1$d</item>
        <item quantity="two">‌%1$d עונות</item>
        <item quantity="other">%1$d עונות</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">רצועה %1$d</item>
        <item quantity="two">%1$d רצועות</item>
        <item quantity="other">%1$d רצועות</item>
    </plurals>
    <string name="shuffling_x">מנגן אקראית את %1$s</string>
    <string name="copying_the_error">מעתיק את השגיאה</string>
    <string name="sort_and_filter">מיון וסינון</string>
    <string name="filter">מסנן</string>
    <string name="reversed">הפוך</string>
    <string name="apply">החל</string>
    <string name="save">שמור</string>
    <string name="unsave">בטל שמירה</string>
    <string name="sort_title">כותרת</string>
    <string name="sort_date">תאריך</string>
    <string name="sort_date_added">תאריך נוסף</string>
    <string name="sort_duration">אורך</string>
    <string name="sort_subtitle">כתובית</string>
    <string name="scroll_animations">אנימציות גלילה</string>
    <string name="scroll_animations_summary">אנימציות שמופיעות שגוללים דברים</string>
    <string name="delete">מחק</string>
    <string name="playlist_name">שם פלייליסט</string>
    <string name="playlist_description">תיאור פלייליסט</string>
    <string name="create_playlist">צור פלייליסט</string>
    <string name="create">צור</string>
    <string name="add_song">הוסף שיר</string>
    <string name="creating_x">יוצר את %1$s</string>
    <string name="playlist_name_empty">שם הפלייליסט ריק</string>
    <string name="x_created">%1$s נוצר</string>
    <string name="deleting_x">מוחק את %1$s</string>
    <string name="deleted_x">%1$s נמחק</string>
    <string name="loading_x">טוען את %1s</string>
    <string name="saving_x">שומר את %1$s</string>
    <string name="saved_to_x">נשמר ל-%1$s</string>
    <string name="saved_to_playlists">נשמר לפלייליסטים</string>
    <string name="selected_n">%1$d נבחרו</string>
    <string name="adding_x">מוסיף את %1$s</string>
    <string name="moving_x">מזיז את %1$s</string>
    <string name="removing_x">מסיר את %1$s</string>
    <string name="no_download_extension">לא נמצא תוסף להורדה, השתמש בקוד \"echodown\" כדי להוריד אותו.</string>
    <string name="nothing_to_download_in_x">אין מה להוריד ב-%1$s</string>
    <string name="download_started">הורדה החלה</string>
    <string name="merging_x">ממזג את %1$s</string>
    <string name="tagging_x">מתייג את %1$s</string>
    <string name="apply_player_color_to_app">החלת צבע הנגן על כל האפליקציה</string>
    <string name="apply_player_color_to_app_summary">התראת לאג!!!</string>
    <string name="delete_download">מחק הורדה</string>
    <string name="removed_x_from_downloads">%1$s נמחק מהורדות</string>
    <string name="download_complete">הורדה הושלמה</string>
    <string name="app_widget_description">Echo במסך הבית שלך!</string>
    <string name="opening_webview_x">פותח תצוגת אינטרנט: %1$s</string>
    <string name="no_update_available_for_x">אין עדכון זמין עבור %1$s</string>
    <string name="other">אחר</string>
    <string name="player">נגן</string>
    <string name="about">אודות</string>
    <string name="language_x">שפה: %1$s</string>
    <string name="guide">מדריך</string>
    <string name="donate">תרום</string>
    <string name="contributors">תורמים</string>
    <string name="app_desc">רק נגן מוזיקה.</string>
    <string name="manage">נהל</string>
    <string name="no_account">‌אין חשבון</string>
    <string name="other_settings">הגדרות אחרות</string>
    <string name="no_x_found">%1$s לא נמצאו</string>
    <string name="playlist">פלייליסט</string>
    <string name="album">אלבום</string>
    <string name="pre_release">שחרור מוקדם</string>
    <string name="single">סינגל</string>
    <string name="ep">מיני-אלבום</string>
    <string name="lp">נגינה-ארוכה</string>
    <string name="compilation">קומפילציה</string>
    <string name="show">הצג</string>
    <string name="book">ספר</string>
    <string name="song">שיר</string>
    <string name="podcast">פודקאסט</string>
    <string name="video">סרטון</string>
    <string name="isrc_x">קוד הקלטה תקני בינלאומי: %1$s</string>
    <string name="genres_x">ז\'אנרים: %1$s</string>
    <string name="disc_number_n">מספר דיסק: %1$d</string>
    <string name="album_order_n">מספר סדר אלבום: %1$d</string>
    <string name="confirmation">אישור</string>
    <string name="delete_playlist_confirmation">האם אתה בטוח שברצונך למחוק את %1$s?</string>
    <string name="confirm">אשר</string>
    <string name="big_cover">כיסויים גדולים יותר</string>
    <string name="previous">הקודם</string>
    <string name="play">לנגן</string>
    <string name="next">הבא</string>
    <string name="repeat">לחזור על</string>
    <string name="close">סגירה</string>
    <string name="no_lyrics">לא נמצאו מילים</string>
    <string name="sleep_timer">טיימר שינה</string>
    <string name="end_of_track">סוף השיר</string>
    <string name="_15min">15 דקות</string>
    <string name="_30min">30 דקות</string>
    <string name="_45min">45 דקות</string>
    <string name="_1hr">1 שעה</string>
    <string name="_2hr">2 שעות</string>
    <string name="sleep_timer_desc">הגדר טיימר שינה כדי להפסיק את ההשמעה לאחר זמן מסוים</string>
    <string name="sleep_on_specific_time">הפסק השמעה בשעה מסוימת</string>
    <string name="sleep_timer_cancelled">טיימר השינה בוטל</string>
    <string name="sleep_timer_set_for">טיימר השינה נקבע ל־%1$s</string>
    <string name="search_x">חיפוש %1$s</string>
    <string name="n_hours">%1$d שעות</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d שעה</item>
        <item quantity="two">%1$d שעות</item>
        <item quantity="other">%1$d אחר</item>
    </plurals>
    <string name="n_minutes">%1$d דקות</string>
    <plurals name="number_min">
        <item quantity="one">%1$d דקה</item>
        <item quantity="two">%1$d דקות</item>
        <item quantity="other">%1$d אחר</item>
    </plurals>
    <string name="servers">שרתים</string>
    <string name="sources">מקורות</string>
    <string name="backgrounds">רקעים</string>
    <string name="subtitles">כתוביות</string>
    <string name="audio_selection">בחירת אודיו</string>
    <string name="video_selection">בחירת וידאו</string>
    <string name="subtitle_selection">בחירת כתוביות</string>
    <string name="quality_selection">בחירת איכות</string>
    <string name="quality_x">איכות %1$d</string>
    <string name="off">כבוי</string>
    <string name="unknown_quality">איכות לא ידועה</string>
    <string name="so_empty">כל כך ריק…</string>
    <string name="not_loading">לא טוען</string>
    <string name="share">שיתוף</string>
    <string name="sharing_x">משתף את %1$s</string>
    <string name="save_to_library">שמירה לספרייה</string>
    <string name="saved_x_to_library">%1$s נשמר בספרייה</string>
    <string name="remove_from_library">הסר מהספרייה</string>
    <string name="removed_x_from_library">הוסר %1$s מהספרייה</string>
    <string name="radio">רדיו</string>
    <string name="download">הורדה</string>
    <string name="follow">מעקב</string>
    <string name="following_x">עקבת ‍אחר %1$s</string>
    <string name="followed_x">התחלת לעקוב אחרי %1$s</string>
    <string name="unfollow">בטל מעקב</string>
    <string name="unfollowing_x">מבטל מעקב אחר %1$s</string>
    <string name="unfollowed_x">בוטל המעקב אחר %1$s</string>
    <string name="liked_x">שמת לייק ל- %1$s</string>
    <string name="unliking_x">מבטל לייק ל- %1$s</string>
    <string name="unliked_x">ביטלת לייק ל־%1$s</string>
    <string name="hiding_x">מסתיר את %1$s</string>
    <string name="seekbar">סרגל התקדמות</string>
    <string name="big_cover_summary">טוב למכשירים עם מסכים גדולים יותר</string>
    <string name="unhide">בטל הסתרה</string>
    <string name="hide">הסתר</string>
    <string name="no_last_played_track_found">לא נמצאה רצועה שהושמעה לאחרונה.</string>
    <string name="not_yet_released">לא שוחרר עדיין</string>
    <string name="releases_on_x">שוחרר ב-%1$s</string>
    <string name="unavailable_in_your_region">לא זמין באזור שלך</string>
    <string name="not_playable_x">לא ניתן לניגון: %1$s</string>
    <string name="colors">צבעים</string>
    <string name="scroll_bar">סרגל גלילה</string>
    <string name="scroll_bar_summary">סרגל גלילה בצד המסך לגישה מהירה יותר (עשוי להיות גליצ\'י)</string>
    <string name="currently_playing">מתנגן כרגע</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-ja\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="off">オフ</string>
    <string name="albums">アルバム</string>
    <string name="notifications">通知</string>
    <string name="artists">歌手</string>
    <string name="install">インストール</string>
    <string name="songs">曲</string>
    <string name="audio">オーディオ</string>
    <string name="remove">削除</string>
    <string name="x_radio">%1$sラジオ</string>
    <string name="like">いいね</string>
    <string name="home">ホーム</string>
    <string name="search">検索</string>
    <string name="more">もっと</string>
    <string name="downloading_x">%1$sをダウンロード中</string>
    <string name="cancel_all">すべてキャンセル</string>
    <string name="downloads">ダウンロード</string>
    <string name="login">ログイン</string>
    <string name="add">追加</string>
    <string name="settings">設定</string>
    <string name="loading">読み込み中…</string>
    <string name="logout">ログアウト</string>
    <string name="no_lyrics">歌詞がありません</string>
    <string name="_1hr">1時間</string>
    <string name="_2hr">２時間</string>
    <string name="subtitles">字幕</string>
    <string name="audio_selection">音響選択</string>
    <string name="quality_selection">動画の画質選択</string>
    <string name="share">共有</string>
    <string name="hide">隠す</string>
    <string name="cancel">キャンセル</string>
    <string name="okay">はい</string>
    <string name="back">戻る</string>
    <string name="video">動画</string>
    <string name="playlist_liked_desc">いいねした曲</string>
    <string name="no_internet">インターネット接続がありません</string>
    <string name="file">ファイル</string>
    <string name="quality_x">品質 %1$d</string>
    <string name="app">アプリ</string>
    <string name="link">リンク</string>
    <string name="subtitle_selection">字幕選択</string>
    <string name="theme_summary">目に優しいダークモードを選びませんか？</string>
    <string name="music">音楽</string>
    <string name="lyrics">歌詞</string>
    <string name="video_selection">動画選択</string>
    <string name="up_next">次へ</string>
    <string name="info">情報</string>
    <string name="_15min">15分</string>
    <string name="_30min">30分</string>
    <string name="_45min">45分</string>
    <string name="so_empty">コンテンツがありません</string>
    <string name="radio">ラジオ</string>
    <string name="all">全部</string>
    <string name="logout_and_login">ログインとログアウト</string>
    <string name="choose_a_color">色を選択</string>
    <string name="stream_quality">ストリームの品質</string>
    <string name="skip_silence">無音部分をスキップ</string>
    <string name="version">バージョン</string>
    <string name="system">システム</string>
    <string name="playback_speed">プレイバック速度</string>
    <string name="x_was_not_granted">%1$s は付与されませんでした</string>
    <string name="x_permission_required">%1$s 権限が必要です</string>
    <string name="audio_permission_summary">デバイスの音楽ライブラリにアクセス</string>
    <string name="notifications_permission_summary">ダウンロードと音楽に関する通知を表示する</string>
    <string name="write_storage_permission_summary">ローカルプレイリストの作成・編集</string>
    <string name="cache_playlist_warning">実験的な機能です。音楽視聴以外の機能はサポートされていません。</string>
    <string name="read_storage">ストレージの読み込み</string>
    <string name="write_storage">ストレージへの書き込み</string>
    <string name="cached_songs">キャッシュされた曲</string>
    <string name="refresh_library_on_reload">リロード時にライブラリを更新</string>
    <string name="recently_added">最近追加された</string>
    <string name="duration_filter_summary">指定した時間よりも短い音楽ファイルを除外します</string>
    <string name="blacklist_folders">ブラックリスト</string>
    <string name="saved">保存しました</string>
    <string name="tabs">タブ</string>
    <string name="show_tabs">表示タブ</string>
    <string name="unified_liked_playlist_summary">各拡張機能でいいねした曲</string>
    <string name="blacklist_folders_summary">ライブラリから除外するフォルダ</string>
    <string name="blacklist_folder_keywords">ブラックリストにするフォルダのキーワード</string>
    <string name="blacklist_folder_keywords_summary">フォルダをブラックリストに追加するためのキーワードをコンマ区切りで入力してください</string>
    <string name="show_tab_summary">拡張機能をカテゴリータブで表示</string>
    <string name="duration_filter">音楽ファイルの長さで絞り込む</string>
    <string name="feed">フィード</string>
    <string name="refresh_library_on_reload_summary">フィードが読み込まれるたびにデバイスをスキャンする</string>
    <string name="n_items">%1$d件のアイテム</string>
    <string name="item">アイテム</string>
    <plurals name="number_items">
        <item quantity="other">%1$d件のアイテム</item>
    </plurals>
    <string name="playlist_liked">いいね</string>
    <string name="unknown">不明</string>
    <string name="unlike">いいね解除</string>
    <string name="repeat_one">単体リピート</string>
    <string name="repeat_off">リピート解除</string>
    <string name="repeat_all">全てリピート</string>
    <string name="library">ライブラリ</string>
    <string name="extension">拡張</string>
    <string name="download_progress">ダウンロード進捗</string>
    <string name="downloaded_x">%1$s件をダウンロードしました</string>
    <string name="view">表示</string>
    <string name="extension_out_of_date">期限切れ</string>
    <string name="error_loading_extension_from_x">拡張機能 %1$s の読み込み中にエラーが発生しました</string>
    <string name="extension_x_not_found">拡張機能 %1$s は見つかりません</string>
    <string name="required_extensions_missing_x">必要な拡張機能がありません: %1$s</string>
    <string name="x_login_required">%1$s ログインが必要です</string>
    <string name="x_is_not_supported_in_x">%1$sは%2$sでサポートされていません</string>
    <string name="account_session_expired_in_x">%1$sのアカウントセッションの有効期限が切れました</string>
    <string name="error_x">エラー: %1$s</string>
    <string name="str_copy">コピー</string>
    <string name="extensions">拡張機能</string>
    <string name="random">ランダム</string>
    <string name="value">値</string>
    <string name="value_not_set">未設定</string>
    <string name="playback">再生</string>
    <string name="audio_fx">オーディオエフェクト</string>
    <string name="audio_fx_summary">すべての曲にエフェクトを適用</string>
    <string name="audio_fx_desc">現在のトラックのオーディオ効果を変更します。</string>
    <string name="reset">リセット</string>
    <string name="change_pitch_with_speed">速度に応じてピッチを変える</string>
    <string name="bass_boost">バスブースト</string>
    <string name="bass_boost_desc">値を大きくすると音が歪む場合があります。</string>
    <string name="equalizer">イコライザー</string>
    <string name="equalizer_summary">デバイスのイコライザー設定を開く</string>
    <string name="stream_quality_summary">ストリームのデフォルトの品質を選択する</string>
    <string name="more_by_x">%1$s の詳細</string>
    <string name="x_specific_quality_summary">%1$s のストリーム品質はデフォルトのストリーム品質を上書きします</string>
    <string name="unmetered_stream_quality">無制限ネットワーク時の品質</string>
    <string name="unmetered_stream_quality_summary">無制限ネットワークに接続された際のストリームの品質。この設定はデフォルトのストリーム品質を上書きします。</string>
    <string name="behavior">動作</string>
    <string name="keep_queue">再生キューを保存</string>
    <string name="keep_queue_summary">アプリ起動時に前回のキューを復元。</string>
    <string name="stop_player">音楽の停止</string>
    <string name="stop_player_summary">アプリケーションが最近使用した履歴から削除されたときに、音楽を停止する</string>
    <string name="skip_silence_summary">曲の無音部分をスキップし、ギャップレス再生を実現。</string>
    <string name="auto_start_radio">自動ラジオ再生</string>
    <string name="auto_start_radio_summary">プレイリスト内のトラックに関連する曲を自動追加し、無限再生キューを作成する</string>
    <string name="cache_size">キャッシュサイズ</string>
    <string name="cache_size_summary">オーディオとビデオのキャッシュサイズ（MB単位）</string>
    <string name="select_language">言語を選択</string>
    <string name="check_for_updates">更新を確認</string>
    <string name="check_for_updates_summary">アプリを開いた際に、アプリと拡張機能の両方の更新を確認します。</string>
    <string name="installation_type">インストール方式</string>
    <string name="installation_type_summary">アプリをインストールすると、以下のリンクをEchoで開くことができます:</string>
    <string name="installation_type_warning">拡張機能をファイルとしてインストールした場合、利用できません。</string>
    <string name="could_not_find_the_file">ファイルが見つかりませんでした。</string>
    <string name="extension_installer">拡張機能インストーラー</string>
    <string name="extension_installed_successfully">拡張機能が正常にインストールされました。</string>
    <string name="extension_uninstalled_successfully">拡張機能が正常にアンインストールされました。</string>
    <string name="allow_opening_links">リンクを開くことを許可</string>
    <string name="open_links_instruction">これらのリンクを開くには、以下の操作が必要です：\n- 下にスクロールし、「デフォルトで開く」をクリック\n- 「+ リンクを追加」をクリック</string>
    <string name="downloading_update_for_x">%1$sの更新をダウンロードしています</string>
    <string name="extension_updated_successfully">%1$s の更新に成功しました</string>
    <string name="link_or_code">リンクまたはコード</string>
    <string name="list_is_empty">リストが空です</string>
    <string name="extension_installed">%1$s（インストール済）</string>
    <string name="add_extensions">拡張機能の追加</string>
    <string name="invalid_extension_list">無効な拡張機能のリスト</string>
    <string name="checking_for_updates">更新を確認しています</string>
    <string name="look_and_feel">見た目と操作感</string>
    <string name="theme">テーマ</string>
    <string name="custom_theme_color">カスタムテーマカラー</string>
    <string name="custom_theme_color_summary">システムのテーマではなく、カスタムテーマカラーを使用します。</string>
    <string name="add_color">色を追加</string>
    <string name="custom_colors">カスタムカラー</string>
    <string name="navbar_gradient">ナビゲーションバーのグラデーション</string>
    <string name="navbar_gradient_summary">ナビゲーションバーを徐々に透明にする</string>
    <string name="dynamic_player">ダイナミックプレイヤーカラー</string>
    <string name="dynamic_player_summary">トラックのアートワークに基づいてプレイヤーに色を適用する</string>
    <string name="show_background">背景の表示</string>
    <string name="show_background_summary">プレイヤーの背景に動画、またはぼかされたアートワークを表示</string>
    <string name="animation">アニメーション</string>
    <string name="back_animations">戻るアニメーション</string>
    <string name="back_animations_summary">Androidの仕様により視覚的な不具合が発生する可能性がありますが、再度アプリを開けば修正できます。</string>
    <string name="animations">アニメーション</string>
    <string name="animations_summary">ひどくつっかえますか？これをオフにすると、改善するかもしれません</string>
    <string name="refresh">更新</string>
    <string name="x_disabled">%1$s（無効化済）</string>
    <string name="tracker">トラッカー</string>
    <string name="misc">その他</string>
    <string name="x_extensions">%1$s拡張機能</string>
    <string name="x_extension">%1$s拡張機能</string>
    <string name="enabled">有効</string>
    <string name="disabled">無効</string>
    <string name="error_updating_extension">更新中にエラーが発生しました</string>
    <string name="no_user_found">ユーザーが見つかりません</string>
    <string name="select_x_account">%1$sのアカウントを選択してください</string>
    <string name="add_extension">拡張機能の追加</string>
    <string name="switch_account">アカウントの変更</string>
    <string name="incognito">匿名</string>
    <string name="not_logged_in">ログインしていません</string>
    <string name="x_login">%1$sにログイン</string>
    <string name="x_is_required">%1$sが必要です</string>
    <string name="regex_invalid">%1$s は無効です。正規表現に従ってください: %2$s</string>
    <string name="seekbar">シークバー</string>
    <string name="shuffle">シャッフル</string>
    <string name="previous">前へ</string>
    <string name="play">再生</string>
    <string name="next">次へ</string>
    <string name="repeat">繰り返し</string>
    <string name="close">閉じる</string>
    <string name="sleep_timer">スリープタイマー</string>
    <string name="end_of_track">トラックの終了時</string>
    <string name="sleep_timer_desc">一定時間後に再生を停止するスリープタイマーを設定します</string>
    <string name="sleep_on_specific_time">決まった時間にスリープ</string>
    <string name="sleep_timer_cancelled">スリープタイマーがキャンセルされました</string>
    <string name="sleep_timer_set_for">スリープタイマーが %1$s に設定されました</string>
    <string name="search_x">%1$sを検索</string>
    <string name="n_hours">%1$d時間</string>
    <plurals name="number_hour">
        <item quantity="other">%1$d時間</item>
    </plurals>
    <string name="n_minutes">%1$d分</string>
    <plurals name="number_min">
        <item quantity="other">%1$d秒</item>
    </plurals>
    <string name="servers">サーバー</string>
    <string name="sources">ソース</string>
    <string name="backgrounds">背景</string>
    <string name="unknown_quality">不明な品質</string>
    <string name="not_loading">ロードしていません</string>
    <string name="sharing_x">%1$sの共有</string>
    <string name="save_to_library">ライブラリに保存</string>
    <string name="saved_x_to_library">%1$sがライブラリに保存されました</string>
    <string name="remove_from_library">ライブラリから削除</string>
    <string name="removed_x_from_library">%1$sがライブラリから削除されました</string>
    <string name="download">ダウンロード</string>
    <string name="follow">フォロー</string>
    <string name="following_x">%1$sをフォロー中</string>
    <string name="followed_x">%1$sをフォローしています</string>
    <string name="unfollow">フォロー解除</string>
    <string name="unfollowing_x">%1$sのフォロー解除中</string>
    <string name="unfollowed_x">%1$sのフォローを解除しています</string>
    <string name="liking_x">%1$sをいいね中</string>
    <string name="liked_x">%1$sをいいねしました</string>
    <string name="unliking_x">%1$sのいいねを解除中</string>
    <string name="unliked_x">%1$sのいいねを解除しました</string>
    <string name="hiding_x">%1$sを非表示中</string>
    <string name="unhiding_x">%1$sの非表示を解除中</string>
    <string name="hidden_x">%1$sを非表示にしました</string>
    <string name="unhidden_x">%1$sの非表示を解除しました</string>
    <string name="save_to_playlist">プレイリストに保存</string>
    <string name="delete_playlist">プレイリストを削除</string>
    <string name="add_to_next">次に追加</string>
    <string name="add_to_queue">キューに追加</string>
    <string name="loading_radio_for_x">%1$sのラジオをロード中</string>
    <string name="playing_x">%1$sを再生中</string>
    <string name="adding_x_to_queue">%1$sをキューに追加中</string>
    <string name="adding_x_to_next">%1$sを次に追加中</string>
    <string name="background_gradient">背景のグラデーション</string>
    <string name="edit_playlist">プレイリストを編集</string>
    <string name="more_brain_capacity_summary">これを有効にすると、音声の遅延を修正し、バッテリーをより使用します（オーディオオフロードの無効化）。</string>
    <string name="track">トラック</string>
    <string name="tracks">トラック</string>
    <string name="sort">並び替え</string>
    <string name="explicit">明示的</string>
    <string name="x_plays">%1$s回再生</string>
    <string name="x_followers">%1$sフォロワー</string>
    <string name="n_songs">%1$d曲</string>
    <string name="n_episodes">%1$dエピソード</string>
    <string name="n_chapters">%1$dチャプター</string>
    <string name="n_tracks">%1$dトラック</string>
    <plurals name="number_songs">
        <item quantity="other">%1$d曲</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="other">%1$dエピソード</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="other">%1$dチャプター</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="other">%1$dトラック</item>
    </plurals>
    <string name="shuffling_x">%1$sをシャッフル中</string>
    <string name="copying_the_error">エラーをコピー中</string>
    <string name="sort_and_filter">並び替えと絞り込み</string>
    <string name="filter">絞り込み</string>
    <string name="reversed">予約済み</string>
    <string name="apply">適用</string>
    <string name="save">保存</string>
    <string name="unsave">未保存</string>
    <string name="sort_title">タイトル</string>
    <string name="sort_date">日付</string>
    <string name="sort_date_added">追加日</string>
    <string name="sort_duration">時間</string>
    <string name="sort_subtitle">サブタイトル</string>
    <string name="scroll_animations">スクロールアニメーション</string>
    <string name="scroll_animations_summary">スクロール時のアニメーション</string>
    <string name="delete">削除</string>
    <string name="playlist_name">プレイリストの名前</string>
    <string name="playlist_description">プレイリストの説明</string>
    <string name="create_playlist">プレイリストを作成</string>
    <string name="create">作成</string>
    <string name="add_song">曲を追加</string>
    <string name="creating_x">%1$sを作成中</string>
    <string name="playlist_name_empty">プレイリスト名が空です</string>
    <string name="x_created">%1$sが作成されました</string>
    <string name="deleting_x">%1$sを削除中</string>
    <string name="deleted_x">%1$sが削除されました</string>
    <string name="loading_x">%1sをロード中</string>
    <string name="saving_x">%1$sを保存中</string>
    <string name="saved_to_x">%1$sに保存しました</string>
    <string name="saved_to_playlists">プレイリストに保存</string>
    <string name="selected_n">%1$dが選択されました</string>
    <string name="adding_x">%1$sを追加中</string>
    <string name="moving_x">%1$sを移動中</string>
    <string name="removing_x">%1$sを削除中</string>
    <string name="no_download_extension">ダウンロード可能な拡張機能が見つかりません。コード「echodown」を使用して入手してください。</string>
    <string name="nothing_to_download_in_x">%1$s にダウンロードするものはありません</string>
    <string name="download_started">ダウンロードか開始されました</string>
    <string name="merging_x">%1$sをマージ中</string>
    <string name="tagging_x">%1$sをタグ付け中</string>
    <string name="apply_player_color_to_app">プレイヤーカラーをアプリ全体に適用する</string>
    <string name="delete_download">ダウンロードの削除</string>
    <string name="removed_x_from_downloads">%1$sがダウンロードから削除されました</string>
    <string name="download_complete">ダウンロード完了</string>
    <string name="opening_webview_x">Webviewで開く:%1$s</string>
    <string name="no_update_available_for_x">%1$sのアップデートはありません</string>
    <string name="other">その他</string>
    <string name="player">プレイヤー</string>
    <string name="about">全般</string>
    <string name="language_x">言語: %1$s</string>
    <string name="guide">ガイド</string>
    <string name="donate">寄付</string>
    <string name="contributors">貢献者</string>
    <string name="manage">管理</string>
    <string name="no_account">アカウントなし</string>
    <string name="other_settings">その他の設定</string>
    <string name="no_x_found">%1$sが見つかりません</string>
    <string name="playlist">プレイリスト</string>
    <string name="album">アルバム</string>
    <string name="pre_release">プレリリース</string>
    <string name="single">シングル</string>
    <string name="show">表示</string>
    <string name="book">本</string>
    <string name="song">曲</string>
    <string name="podcast">ポッドキャスト</string>
    <string name="genres_x">ジャンル: %1$s</string>
    <string name="disc_number_n">ディスク番号: %1$d</string>
    <string name="confirmation">確認</string>
    <string name="delete_playlist_confirmation">本当に %1$s を削除しますか？</string>
    <string name="confirm">確認</string>
    <string name="big_cover_summary">画面の大きいデバイスに適しています</string>
    <string name="unhide">非表示を解除</string>
    <string name="no_last_played_track_found">最後に再生されたトラックが見つかりませんでした。</string>
    <string name="not_yet_released">まだリリースされていません</string>
    <string name="releases_on_x">%1$sにリリース</string>
    <string name="unavailable_in_your_region">お住まいの地域ではご利用いただけません</string>
    <string name="not_playable_x">再生できません: %1$s</string>
    <string name="ui">UI</string>
    <string name="webview">Webview</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="lp">LP</string>
    <string name="ep">EP</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-ko\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="audio_permission_summary">로컬 음악 라이브러리에 액세스</string>
    <string name="okay">확인</string>
    <string name="back">뒤로가기</string>
    <string name="cancel">취소</string>
    <string name="read_storage">저장소 불러오기</string>
    <string name="x_permission_required">%1$s 권한이 필요합니다</string>
    <string name="audio">오디오</string>
    <string name="video">동영상</string>
    <string name="write_storage">저장소 사용하기</string>
    <string name="x_was_not_granted">%1$s 가 부여되지 않았습니다</string>
    <string name="notifications_permission_summary">다운로드 및 음악에 대한 알림을 표시</string>
    <string name="recently_added">최근 추가됨</string>
    <string name="artists">아티스트</string>
    <string name="notifications">알림</string>
    <string name="write_storage_permission_summary">로컬 재생목록을 만들고 수정하기</string>
    <string name="remove">제거</string>
    <string name="more_by_x">%1$s 만큼 증가</string>
    <string name="songs">곡</string>
    <string name="albums">앨범</string>
    <string name="x_radio">%1$s 라디오</string>
    <string name="cached_songs">캐싱된 노래</string>
    <string name="cache_playlist_warning">실험적 기능. 듣기 이외의 모든 기능은 지원되지 않습니다.</string>
    <string name="blacklist_folders_summary">라이브러리에서 제외할 폴더</string>
    <string name="refresh_library_on_reload">새로고침시 라이브러리 다시 불러오기</string>
    <string name="blacklist_folders">블랙리스트 폴더</string>
    <string name="blacklist_folder_keywords">블랙리스트 폴더 키워드</string>
    <string name="show_tab_summary">확장 기능의 탭을 카테고리로 표시합니다</string>
    <string name="blacklist_folder_keywords_summary">폴더를 차단할 키워드입니다. 쉼표로 구분하세요</string>
    <string name="duration_filter_summary">지속 시간(초)이 다음 값보다 짧은 오디오 파일을 필터링합니다</string>
    <string name="show_tabs">탭 표시</string>
    <string name="duration_filter">기간 필터</string>
    <string name="refresh_library_on_reload_summary">피드가 로드될 때마다 장치를 스캔합니다</string>
    <string name="saved">저장됨</string>
    <string name="tabs">탭</string>
    <string name="unified_liked_playlist_summary">다양한 확장 프로그램에서 좋아하는 트랙</string>
    <string name="n_items">%1$d 항목</string>
    <string name="playlist_liked_desc">내가 좋아하는 트랙</string>
    <string name="no_internet">인터넷 없음</string>
    <string name="library">보관함</string>
    <string name="extension_x_not_found">확장 프로그램 %1$s을 찾을 수 없습니다</string>
    <string name="x_is_not_supported_in_x">%1$s는 %2$s에서 지원되지 않습니다</string>
    <string name="cancel_all">전체 취소</string>
    <string name="repeat_off">반복 끄기</string>
    <string name="playlist_liked">좋아요</string>
    <string name="like">좋아요</string>
    <string name="unlike">싫어요</string>
    <string name="repeat_one">한 번 반복</string>
    <string name="repeat_all">전체 반복</string>
    <string name="home">홈</string>
    <string name="search">검색</string>
    <string name="more">자세히</string>
    <string name="extension">확장 프로그램</string>
    <string name="downloading_x">%1$s 다운로드 중</string>
    <string name="download_progress">다운로드 진행률</string>
    <string name="downloads">다운로드</string>
    <string name="downloaded_x">%1$s 다운로드 됨</string>
    <string name="logout_and_login">로그아웃 및 로그인</string>
    <string name="login">로그인</string>
    <string name="view">보기</string>
    <string name="extension_out_of_date">업데이트 필요</string>
    <string name="error_loading_extension_from_x">%1$s 에서 확장 프로그램을 로드하는 동안 오류가 발생했습니다</string>
    <string name="required_extensions_missing_x">필수 확장 프로그램이 필요합니다: %1$s</string>
    <string name="x_login_required">%1$s 로그인 필요</string>
    <string name="error_x">오류: %1$s</string>
    <string name="str_copy">복사</string>
    <string name="extensions">확장 프로그램</string>
    <string name="choose_a_color">색상 선택</string>
    <string name="random">무작위</string>
    <string name="add">추가하기</string>
    <string name="loading">로드 중…</string>
    <string name="settings">설정</string>
    <string name="value">값</string>
    <string name="value_not_set">설정되지 않음</string>
    <string name="account_session_expired_in_x">%1$s 에서 계정 세션이 만료되었습니다</string>
    <string name="unknown">알 수 없음</string>
    <string name="equalizer">이퀄라이저</string>
    <string name="custom_theme_color_summary">시스템 테마 색상 대신 사용자 정의 테마 색상을 사용합니다.</string>
    <string name="add_color">색상 추가</string>
    <string name="stream_quality">스트리밍 품질</string>
    <string name="audio_fx_summary">모든 곡에 적용되는 효과</string>
    <string name="extension_installer">확장 프로그램 설치 관리자</string>
    <string name="keep_queue_summary">앱을 다시 열면 플레이어 대기열을 복구합니다.</string>
    <string name="installation_type_summary">앱을 설치하면 Echo에서 다음 링크가 열립니다:</string>
    <string name="extension_uninstalled_successfully">확장 프로그램이 성공적으로 제거되었습니다.</string>
    <string name="skip_silence_summary">끊김없는 재생을 위해 노래의 조용한 부분을 건너뜁니다.</string>
    <string name="installation_type">설치 유형</string>
    <string name="auto_start_radio_summary">재생 목록에 트랙의 관련 노래를 자동으로 추가하여 무한 대기열을 만듭니다</string>
    <string name="add_extensions">확장 프로그램 추가</string>
    <string name="open_links_instruction">이러한 링크를 열도록 허용하려면 다음과 같이 해야 합니다:\n- 아래로 스크롤하여 \"기본으로 열기\"를 클릭합니다\n- \"+ 링크 추가\"를 클릭합니다</string>
    <string name="extension_updated_successfully">%1$s가 업데이트되었습니다</string>
    <string name="look_and_feel">테마</string>
    <string name="audio_fx_desc">현재 트랙의 오디오 효과를 변경합니다.</string>
    <string name="custom_theme_color">사용자 지정 테마 색상</string>
    <string name="extension_installed">%1$s (설치됨)</string>
    <string name="custom_colors">사용자 지정 색상</string>
    <string name="playback">재생</string>
    <string name="audio_fx">오디오 효과</string>
    <string name="reset">재설정</string>
    <string name="playback_speed">재생 속도</string>
    <string name="change_pitch_with_speed">속도에 따른 피치 변경</string>
    <string name="bass_boost_desc">값이 클수록 소리가 왜곡될 수 있습니다.</string>
    <string name="change_pitch_with_speed_desc">소리에 슬로우-모션 적용</string>
    <string name="equalizer_summary">시스템 이퀄라이저 설정 열기</string>
    <string name="stream_quality_summary">스트리밍 품질 선택</string>
    <string name="behavior">동작</string>
    <string name="keep_queue">플레이어 대기열 유지</string>
    <string name="stop_player">플레이어 중지</string>
    <string name="stop_player_summary">앱이 최근 항목에서 제거되면 플레이어 중지하기</string>
    <string name="skip_silence">무음 건너뛰기</string>
    <string name="auto_start_radio">라디오 자동 시작</string>
    <string name="cache_size">캐시 크기</string>
    <string name="cache_size_summary">오디오 및 비디오 캐시 용량 (MB)</string>
    <string name="version">버전</string>
    <string name="install">설치</string>
    <string name="app">앱</string>
    <string name="file">파일</string>
    <string name="installation_type_warning">확장 프로그램을 파일로 설치한 경우에는 사용할 수 없습니다.</string>
    <string name="could_not_find_the_file">파일을 찾을 수 없습니다.</string>
    <string name="allow_opening_links">링크 열기 허용</string>
    <string name="downloading_update_for_x">%1$s에 대한 업데이트 다운로드 중</string>
    <string name="link">링크</string>
    <string name="link_or_code">링크 또는 코드</string>
    <string name="list_is_empty">목록이 비어 있습니다</string>
    <string name="invalid_extension_list">잘못된 확장 프로그램 목록</string>
    <string name="ui">UI</string>
    <string name="theme">테마</string>
    <string name="theme_summary">화려한 것을 원하시나요?</string>
    <string name="amoled">아몰레드</string>
    <string name="amoled_summary">배경색을 완전한 검정으로 바꾸어 아몰레드 디스플레이에서 배터리 소모를 줄이고 화면 번인을 방지합니다</string>
    <string name="bass_boost">저음 부스트</string>
    <string name="system">시스템</string>
    <string name="extension_installed_successfully">확장 프로그램이 성공적으로 설치되었습니다.</string>
    <string name="quality_selection">품질 선택</string>
    <string name="navbar_gradient">그라데이션 내비게이션 바</string>
    <string name="by_x">%1$s에 의해</string>
    <string name="unknown_quality">알 수 없는 품질</string>
    <string name="quality_x">품질 %1$d</string>
    <string name="saving_x">%1$s 저장중</string>
    <string name="background_gradient_summary">상황에 따른 배경의 그라데이션 색상 색조</string>
    <string name="unfollow">언팔로우</string>
    <string name="dynamic_player">동적 플레이어 색상</string>
    <string name="unhiding_x">%1$s 숨기기 해제 하는 중</string>
    <string name="animations">애니메이션</string>
    <string name="enabled">활성화</string>
    <string name="liking_x">%1$s 좋아요 중</string>
    <string name="unliked_x">%1$s 싫어요 됨</string>
    <string name="delete">삭제</string>
    <string name="_2hr">2시간</string>
    <string name="disabled">비활성화</string>
    <string name="repeat">반복</string>
    <string name="play">재생</string>
    <string name="sort_subtitle">자막</string>
    <string name="tracker">트래커</string>
    <string name="adding_x_to_queue">대기열에 %1$s를 추가하는 중</string>
    <string name="misc">고급</string>
    <string name="navbar_gradient_summary">Navbar가 점차 투명해집니다</string>
    <string name="x_disabled">%1$s (비활성됨)</string>
    <string name="removed_x_from_library">보관함에서 %1$s를 제거했습니다</string>
    <string name="radio">라디오</string>
    <string name="unfollowed_x">%1$s 언팔로우중</string>
    <string name="animations_summary">끊김 현상이 너무 심하다고 느껴지세요? 이 기능을 끄면 도움이 될 수 있습니다</string>
    <string name="music">음악</string>
    <string name="x_extensions">%1$s 확장 기능</string>
    <string name="x_extension">%1$s 확장</string>
    <string name="next">다음</string>
    <string name="all">전체</string>
    <string name="share">공유</string>
    <string name="sleep_timer_desc">일정 시간이 지나면 재생을 중지하도록 타이머 설정하기</string>
    <string name="sleep_on_specific_time">수면 시간 직접 설정</string>
    <string name="sharing_x">%1$s 공유하다</string>
    <string name="hiding_x">%1$s 숨기는 중</string>
    <string name="sleep_timer_set_for">수면 타이머가 %1$s 으로 설정됨</string>
    <string name="dynamic_player_summary">트랙 아트웍을 기반으로 플레이어에 색상을 적용합니다</string>
    <string name="show_background">배경 표시</string>
    <string name="animation">애니메이션</string>
    <string name="refresh">새로 고침</string>
    <string name="lyrics">가사</string>
    <string name="no_user_found">사용자를 찾을 수 없습니다</string>
    <string name="select_x_account">%1$s 계정 선택</string>
    <string name="add_extension">확장 프로그램 추가</string>
    <string name="error_updating_extension">업데이트 중 오류</string>
    <string name="webview">웹뷰</string>
    <string name="logout">로그아웃</string>
    <string name="switch_account">계정 전환</string>
    <string name="incognito">시크릿 모드</string>
    <string name="not_logged_in">로그인하지 않음</string>
    <string name="x_login">%1$s 로그인</string>
    <string name="x_is_required">%1$s가 필요합니다</string>
    <string name="playing_from">재생 위치</string>
    <string name="up_next">대기열</string>
    <string name="info">정보</string>
    <string name="seekbar">탐색바</string>
    <string name="shuffle">셔플</string>
    <string name="previous">이전 게시물</string>
    <string name="close">닫다</string>
    <string name="no_lyrics">가사 없음</string>
    <string name="sleep_timer">수면 타이머</string>
    <string name="end_of_track">트랙 종료시</string>
    <string name="_15min">15분</string>
    <string name="_30min">30분</string>
    <string name="_45min">45분</string>
    <string name="_1hr">1시간</string>
    <string name="sleep_timer_cancelled">수면 타이머 취소됨</string>
    <string name="search_x">%1$s 검색</string>
    <plurals name="number_hour">
        <item quantity="other">%1$d 시간</item>
    </plurals>
    <string name="sources">출처</string>
    <string name="subtitles">자막</string>
    <string name="video_selection">동영상 선택</string>
    <string name="subtitle_selection">자막 선택</string>
    <string name="off">꺼짐</string>
    <string name="so_empty">비어있음…</string>
    <string name="not_loading">로드되지 않음</string>
    <string name="save_to_library">보관함에 저장</string>
    <string name="saved_x_to_library">%1$s을 보관함에 저장했습니다</string>
    <string name="remove_from_library">보관함에서 제거</string>
    <string name="download">다운로드</string>
    <string name="follow">팔로우</string>
    <string name="hide">숨기기</string>
    <string name="unhide">표시하기</string>
    <string name="liked_x">%1$s 좋아요됨</string>
    <string name="unliking_x">%1$s 싫어요 중</string>
    <string name="save_to_playlist">재생목록에 저장</string>
    <string name="delete_playlist">재생목록 삭제</string>
    <string name="add_to_queue">대기열에 추가</string>
    <string name="playing_x">%1$s 재생 중</string>
    <string name="adding_x_to_next">다음에 %1$s 추가 중</string>
    <string name="background_gradient">배경 그라데이션</string>
    <string name="more_brain_capacity">더 많은 뇌 용량</string>
    <string name="sort">정렬</string>
    <string name="edit_playlist">재생목록 수정</string>
    <string name="copying_the_error">오류 복사하기</string>
    <string name="reversed">반전</string>
    <string name="apply">적용하다</string>
    <string name="save">저장</string>
    <string name="sort_title">제목</string>
    <string name="sort_date">날짜</string>
    <string name="sort_duration">기간</string>
    <string name="scroll_animations">스크롤 애니메이션</string>
    <string name="scroll_animations_summary">스크롤 시 애니메이션</string>
    <string name="create_playlist">재생 목록 만들기</string>
    <string name="add_song">노래 추가</string>
    <string name="playlist_name_empty">재생 목록 이름이 비어 있습니다</string>
    <string name="deleted_x">%1$s 삭제됨</string>
    <string name="saved_to_playlists">재생 목록에 저장</string>
    <string name="selected_n">%1$d 선택됨</string>
    <string name="removing_x">%1$s 제거</string>
    <string name="moving_x">%1$s 이동</string>
    <string name="no_download_extension">다운로드 확장자를 찾을 수 없습니다, 코드 “echodown”을 사용하여 다운로드하세요.</string>
    <string name="download_started">다운로드 시작</string>
    <string name="tagging_x">%1$s 태그 지정</string>
    <plurals name="number_min">
        <item quantity="other">%1$d 분</item>
    </plurals>
    <string name="servers">서버</string>
    <string name="following_x">%1$s 팔로잉</string>
    <string name="backgrounds">배경</string>
    <string name="audio_selection">오디오 선택</string>
    <string name="show_background_summary">플레이어의 배경 비디오 또는 트랙의 흐릿한 아트워크</string>
    <string name="followed_x">%1$s 팔로잉중</string>
    <string name="unfollowing_x">%1$s 언팔로잉</string>
    <string name="x_plays">%1$s 재생</string>
    <string name="loading_radio_for_x">%1$s에 대한 라디오 로드 중</string>
    <string name="playlist_name">재생목록 이름</string>
    <string name="nothing_to_download_in_x">%1$s에 다운로드할 항목이 없습니다</string>
    <string name="shuffling_x">셔플링 %1$s</string>
    <string name="x_created">%1$s 생성되었습니다</string>
    <string name="add_to_next">다음에 추가</string>
    <string name="more_brain_capacity_summary">이 옵션을 활성화하면 오디오 지연 현상을 해결할 수 있지만, 배터리 사용량이 크게 증가합니다 (오디오 오프로딩이 비활성화됩니다).</string>
    <string name="explicit">설명</string>
    <string name="x_followers">%1$s 팔로워</string>
    <string name="loading_x">%1s 로딩중</string>
    <string name="sort_and_filter">정렬 및 필터링</string>
    <string name="playlist_description">재생 목록 설명</string>
    <string name="creating_x">%1$s 생성 중</string>
    <string name="filter">필터</string>
    <string name="create">만들기</string>
    <string name="deleting_x">%1$s 삭제 중</string>
    <string name="adding_x">%1$s 추가</string>
    <string name="saved_to_x">%1$s에 저장됨</string>
    <string name="merging_x">%1$s 병합 중</string>
    <string name="apply_player_color_to_app">플레이어 색상을 앱 전체에 적용합니다</string>
    <string name="apply_player_color_to_app_summary">지연 경고!!!</string>
    <string name="delete_download">다운로드 삭제</string>
    <string name="removed_x_from_downloads">%1$s를 다운로드에서 제거했습니다</string>
    <string name="download_complete">다운로드 완료</string>
    <string name="app_widget_description">홈 화면에서 에코!</string>
    <string name="feed">피드</string>
    <string name="item">항목</string>
    <plurals name="number_items">
        <item quantity="other">%1$d 항목</item>
    </plurals>
    <string name="x_specific_quality_summary">선택한 %1$s 스트림 품질이 기본 스트림 품질 설정을 덮어씁니다</string>
    <string name="unmetered_stream_quality">무제한 네트워크 스트림 품질</string>
    <string name="unmetered_stream_quality_summary">무제한 네트워크에 연결되었을 때 사용할 스트림 품질입니다. 이 설정은 기본 스트림 품질을 덮어씁니다.</string>
    <string name="select_language">언어 선택</string>
    <string name="check_for_updates">업데이트 확인</string>
    <string name="check_for_updates_summary">앱을 실행할 때, 앱과 확장 기능의 새 업데이트를 확인합니다.</string>
    <string name="checking_for_updates">업데이트 확인 중</string>
    <string name="back_animations">뒤로가기 애니메이션</string>
    <string name="back_animations_summary">안드로이드 문제로 시각적 버그가 발생할 수 있지만, 최근 앱 화면을 열면 해결할 수 있습니다.</string>
    <string name="regex_invalid">%1$s 값이 올바르지 않습니다. 다음 정규식을 따라야 합니다: %2$s</string>
    <string name="n_hours">%1$d시간</string>
    <string name="n_minutes">%1$d분</string>
    <string name="hidden_x">숨겨진 %1$s</string>
    <string name="unhidden_x">숨김 해제된 %1$s</string>
    <string name="track">트랙</string>
    <string name="tracks">트랙들</string>
    <string name="n_songs">%1$d곡</string>
    <string name="n_episodes">%1$d에피소드</string>
    <string name="n_chapters">%1$d챕터</string>
    <string name="n_tracks">%1$d트랙</string>
    <string name="colors">색상</string>
    <string name="scroll_bar">스크롤 바</string>
    <string name="scroll_bar_summary">더 빠른 접근을 위한 측면 스크롤 바(오류가 발생할 수 있음)</string>
    <plurals name="number_episodes">
        <item quantity="other">%1$d 에피소드</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="other">%1$d 챕터</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="other">%1$d 트랙</item>
    </plurals>
    <string name="unsave">저장 취소</string>
    <plurals name="number_songs">
        <item quantity="other">%1$d 노래</item>
    </plurals>
    <string name="sort_date_added">추가된 날짜</string>
    <string name="opening_webview_x">웹뷰 열기: %1$s</string>
    <string name="no_update_available_for_x">%1$s 에 대한 업데이트가 없음</string>
    <string name="other">기타</string>
    <string name="player">플레이어</string>
    <string name="about">정보</string>
    <string name="language_x">언어: %1$s</string>
    <string name="guide">가이드</string>
    <string name="donate">후원</string>
    <string name="contributors">기여자</string>
    <string name="app_desc">뮤직 플레이어 입니다.</string>
    <string name="manage">관리</string>
    <string name="no_account">계정 없음</string>
    <string name="other_settings">기타 설정</string>
    <string name="no_x_found">%1$s를 찿을수 없음</string>
    <string name="playlist">플레이리스트</string>
    <string name="album">앨범</string>
    <string name="pre_release">사전 출시</string>
    <string name="single">싱글</string>
    <string name="song">노래</string>
    <string name="podcast">팟캐스트</string>
    <string name="genres_x">장르: %1$s</string>
    <string name="disc_number_n">디스크 번호: %1$d</string>
    <string name="confirmation">확인</string>
    <string name="delete_playlist_confirmation">%1$s을 삭제하시겠습니까?</string>
    <string name="confirm">확인</string>
    <string name="big_cover">더 큰 커버</string>
    <string name="big_cover_summary">화면이 큰 기기에 적합합니다</string>
    <string name="no_last_played_track_found">마지막으로 재생한 트랙을 찾을 수 없습니다.</string>
    <string name="not_yet_released">아직 출시되지 않음</string>
    <string name="releases_on_x">%1$s에 출시 예정</string>
    <string name="unavailable_in_your_region">귀하의 지역에서는 사용할 수 없습니다</string>
    <string name="not_playable_x">재생할 수 없음: %1$s</string>
    <string name="show">보기</string>
    <string name="ep">미니 앨범</string>
    <string name="lp">정규 앨범</string>
    <string name="compilation">편집</string>
    <string name="book">책</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="album_order_n">앨범 주문 번호: %1$d</string>
    <string name="currently_playing">현재 재생 중</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-land\dimens.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <dimen name="bottom_player_peek_height">80dp</dimen>
    <dimen name="player_more_top_margin">8dp</dimen>
</resources>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-land\styles.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="EchoCollapsingBar" parent="TopCollapsingBar">
        <item name="layout_scrollFlags">scroll|exitUntilCollapsed</item>
    </style>

    <style name="PlayerTrackCoverContainer" parent="BasePlayerTrackCoverContainer">
        <item name="android:layout_marginStart">0dp</item>
        <item name="android:layout_marginEnd">0dp</item>
        <item name="android:layout_marginTop">8dp</item>
        <item name="android:layout_marginBottom">8dp</item>
    </style>

    <style name="PlayerExpandedConstraintLayout">
        <item name="android:layout_width">0dp</item>
        <item name="android:layout_weight">1</item>
        <item name="android:layout_height">match_parent</item>
        <item name="android:clipToPadding">false</item>
        <item name="android:paddingEnd">24dp</item>
        <item name="android:paddingStart">24dp</item>
        <item name="android:layout_marginEnd">-24dp</item>
    </style>
</resources>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-lv\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">Labi</string>
    <string name="cancel">Atcelt</string>
    <string name="back">Atpakaļ</string>
    <string name="feed">Avots</string>
    <string name="x_permission_required">Nepieciešama Atļauja %1$s</string>
    <string name="x_was_not_granted">%1$s netika piešķirta</string>
    <string name="audio">Audio</string>
    <string name="audio_permission_summary">Lai piekļūtu lokālajai mūzikas bibliotēkai</string>
    <string name="read_storage">Lasīt Krātuvi</string>
    <string name="write_storage">Rakstīt krātuvē</string>
    <string name="write_storage_permission_summary">Lai izveidotu un rediģētu lokālos atskaņošanas sarakstus</string>
    <string name="notifications">Paziņojumi</string>
    <string name="notifications_permission_summary">Lai rādītu paziņojumus par lejupielādēm un mūziku</string>
    <string name="remove">Noņemt</string>
    <string name="more_by_x">Vairāk no %1$s</string>
    <string name="songs">Dziesmas</string>
    <string name="albums">Albūmi</string>
    <string name="x_radio">%1$s Radio</string>
    <string name="cached_songs">Dziesmas Kešatmiņā</string>
    <string name="cache_playlist_warning">Eksperimentāla Funkcija. Jeb kas, izņemot klausīšanos, nav atbalstīts.</string>
    <string name="artists">Izpildītāji</string>
    <string name="recently_added">Nesen Pievienots</string>
    <string name="refresh_library_on_reload">Atsvaidzināt Bibliotēku pie Atkalielādes</string>
    <string name="refresh_library_on_reload_summary">Skenēt ierīci katru reizi kad plūsma ir ielādēta</string>
    <string name="duration_filter">Ilguma Filtrs</string>
    <string name="duration_filter_summary">Atfiltrēt audio failus, kas garumā (sekundēs) ir īsāki par norādīto vērtību</string>
    <string name="blacklist_folders">Mapju Melnais Saraksts</string>
    <string name="blacklist_folders_summary">Mapes, kuras neiekļaut bibliotēkā</string>
    <string name="blacklist_folder_keywords">Atslēgvārdi Mapju Melnajam Sarakstam</string>
    <plurals name="number_episodes">
        <item quantity="zero">%1$d Epizode</item>
        <item quantity="one">%1$d Epizode</item>
        <item quantity="other">%1$d Epizodes</item>
    </plurals>
    <string name="n_episodes">%1$d Epizodes</string>
    <plurals name="number_hour">
        <item quantity="zero">%1$d Stundas</item>
        <item quantity="one">%1$d Stunda</item>
        <item quantity="other">%1$d Stundas</item>
    </plurals>
    <string name="n_hours">%1$d stundas</string>
    <plurals name="number_items">
        <item quantity="zero">%1$d Elementi</item>
        <item quantity="one">%1$d Elements</item>
        <item quantity="other">%1$d Elementi</item>
    </plurals>
    <string name="n_items">%1$d Elementi</string>
    <plurals name="number_min">
        <item quantity="zero">%1$d Minūtes</item>
        <item quantity="one">%1$d Minūte</item>
        <item quantity="other">%1$d Minūtes</item>
    </plurals>
    <string name="n_minutes">%1$d minūtes</string>
    <plurals name="number_songs">
        <item quantity="zero">%1$d Dziesmas</item>
        <item quantity="one">%1$d Dziesma</item>
        <item quantity="other">%1$d Dziesmas</item>
    </plurals>
    <string name="n_songs">%1$d Dziesmas</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-ms\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">OK</string>
    <string name="cancel">Batal</string>
    <string name="back">Balik</string>
    <string name="songs">Lagu</string>
    <string name="albums">Album</string>
    <string name="artists">Penyanyi</string>
    <string name="audio">Audio</string>
    <string name="feed">Saluran Suapan</string>
    <string name="x_permission_required">%1$s Kebenaran Diperlukan</string>
    <string name="x_was_not_granted">%1$s tidak diberikan</string>
    <string name="audio_permission_summary">Untuk mengakses pustaka muzik tempatan anda</string>
    <string name="read_storage">Baca Storan</string>
    <string name="write_storage">Tulis Storan</string>
    <string name="write_storage_permission_summary">Untuk membuat dan mengedit senarai main tempatan</string>
    <string name="notifications">Pemberitahuan</string>
    <string name="notifications_permission_summary">Untuk menunjukkan pemberitahuan untuk muat turun dan muzik</string>
    <string name="remove">Buang</string>
    <string name="more_by_x">Bergerak oleh %1$s</string>
    <string name="x_radio">%1$s Radio</string>
    <string name="cached_songs">Lagu Cache</string>
    <string name="cache_playlist_warning">Ciri Percubaan. Apa-apa kecuali mendengar mereka tidak disokong.</string>
    <string name="recently_added">Baru Ditambah</string>
    <string name="refresh_library_on_reload">Muat semula Pustaka pada Muat Semula</string>
    <string name="refresh_library_on_reload_summary">Imbas peranti setiap kali saluran suapan dimuatkan</string>
    <string name="duration_filter">Penapis Tempoh</string>
    <string name="duration_filter_summary">Tapis audio dengan tempoh (dalam saat) kurang daripada nilai</string>
    <string name="blacklist_folders">Senarai Hitam Folder</string>
    <string name="blacklist_folders_summary">Folder untuk dikecualikan daripada perpustakaan</string>
    <string name="blacklist_folder_keywords">Kata Kunci Folder Senarai Hitam</string>
    <string name="blacklist_folder_keywords_summary">Kata kunci untuk menyenaraihitamkan folder, gunakan koma untuk pemisah</string>
    <string name="saved">Disimpan</string>
    <string name="tabs">Tab</string>
    <string name="show_tabs">Tunjukkan Tab</string>
    <string name="show_tab_summary">akan menunjukkan tab sambungan sebagai kategori</string>
    <string name="unified_liked_playlist_summary">Your liked tracks from various extensions</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-night\colors.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="amoled_bg">@color/black</color>
    <color name="amoled_bg_semi">#54000000</color>
    <color name="amoled_fg">@color/white</color>
    <color name="amoled_fg_semi">#1AFFFFFF</color>
</resources>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-night\themes.xml
================================================================================

<resources>
    <style name="Default" parent="Base.Theme.Echo">
        <item name="navBarForeground">?colorOnPrimary</item>
        <item name="navBarBackground">?colorControlActivated</item>
    </style>
</resources>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-pl\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">Ok</string>
    <string name="cancel">Anuluj</string>
    <string name="back">Wstecz</string>
    <string name="x_permission_required">Wymagane pozwolenie %1$s</string>
    <string name="x_was_not_granted">%1$s nie zostało wydane</string>
    <string name="audio">Dźwięk</string>
    <string name="feed">Feed</string>
    <string name="audio_permission_summary">Żeby uzyskać dostęp do lokalnej biblioteki muzycznej</string>
    <string name="read_storage">Odczytaj pamięć</string>
    <string name="write_storage">Zapisz w pamięci</string>
    <string name="write_storage_permission_summary">Aby tworzyć i edytować lokalne listy odtwarzania</string>
    <string name="notifications">Powiadomienia</string>
    <string name="notifications_permission_summary">W celu wyświetlania powiadomienień o pobraniach i muzyce</string>
    <string name="remove">Usuń</string>
    <string name="more_by_x">Więcej od %1$s</string>
    <string name="songs">Utwory</string>
    <string name="albums">Albumy</string>
    <string name="x_radio">Radio %1$s</string>
    <string name="cached_songs">Buforowane piosenki</string>
    <string name="artists">Wykonawcy</string>
    <string name="recently_added">Ostatnio dodane</string>
    <string name="refresh_library_on_reload">Aktualizuj bibliotekę przy ponownym ładowaniu</string>
    <string name="refresh_library_on_reload_summary">Skanuj urządzenie za każdym razem, gdy ładowany jest feed</string>
    <string name="duration_filter">Filtr czasu trwania</string>
    <string name="cache_playlist_warning">Funkcja eksperymentalna. Wszystko, oprócz słuchania, nie jest obsługiwane.</string>
    <string name="duration_filter_summary">Odfiltruj pliki audio, których czas trwania (w sekundach) jest krótszy niż określona wartość</string>
    <string name="blacklist_folders">Czarna lista folderów</string>
    <string name="blacklist_folders_summary">Foldery do wykluczenia z biblioteki</string>
    <string name="blacklist_folder_keywords">Słowa kluczowe do czarnej listy folderów</string>
    <string name="blacklist_folder_keywords_summary">Słowa kluczowe do umieszczenia folderów na czarnej liście, użyj przecinka jako separatora</string>
    <string name="saved">Dodano</string>
    <string name="tabs">Zakładki</string>
    <string name="show_tabs">Pokaż zakładki</string>
    <string name="show_tab_summary">pokaże zakładki rozszerzeń jako kategorię</string>
    <string name="unified_liked_playlist_summary">Twoje ulubione utwory z różnych rozszerzeń</string>
    <string name="n_items">%1$d Elementy</string>
    <string name="item">Element</string>
    <plurals name="number_items">
        <item quantity="one">%1$d Element</item>
        <item quantity="few">%1$d Elementy</item>
        <item quantity="many">%1$d Elementów</item>
        <item quantity="other">%1$d Elementów</item>
    </plurals>
    <string name="amoled">AMOLED</string>
    <string name="dynamic_player">Dynamiczny kolor odtwarzacza</string>
    <string name="show_background">Pokaż tło</string>
    <string name="colors">Kolory</string>
    <string name="animation">Animacja</string>
    <string name="back_animations">Animacje powrotu</string>
    <string name="animations">Animacje</string>
    <string name="x_disabled">%1$s (Wyłączono)</string>
    <string name="music">Muzyka</string>
    <string name="lyrics">Tekst</string>
    <string name="x_extensions">%1$s rozszerzeń</string>
    <string name="playlist_liked">Polubione</string>
    <string name="playlist_liked_desc">Twoje polubione utwory</string>
    <string name="unknown">Nie wiadomo</string>
    <string name="like">Dodaj do Polubionych</string>
    <string name="unlike">Usuń z Polubionych</string>
    <string name="repeat_off">Powtórzenie wyłączono</string>
    <string name="repeat_all">Powtórz wszystko</string>
    <string name="repeat_one">Powtórz raz</string>
    <string name="home">Główna</string>
    <string name="search">Wyszukaj</string>
    <string name="library">Biblioteka</string>
    <string name="more">Więcej</string>
    <string name="extension">Rozszerzenie</string>
    <string name="downloading_x">Pobieranie %1$s</string>
    <string name="cancel_all">Anuluj wszystkie</string>
    <string name="download_progress">Postęp pobierania</string>
    <string name="downloads">Pobrane</string>
    <string name="downloaded_x">Pobrano %1$s</string>
    <string name="login">Zaloguj się</string>
    <string name="view">Wyświetl</string>
    <string name="extension_out_of_date">Nieaktualne</string>
    <string name="no_internet">Brak połączenia z Internetem</string>
    <string name="error_loading_extension_from_x">Wystąpił błąd przy ładowaniu rozszerzenia z %1$s</string>
    <string name="extension_x_not_found">Nie znaleziono rozszerzenia %1$s</string>
    <string name="required_extensions_missing_x">Brakuje wymaganych rozszerzeń: %1$s</string>
    <string name="x_login_required">%1$s wymaga zalogowania</string>
    <string name="x_is_not_supported_in_x">%2$s nie obsługuje %1$s</string>
    <string name="account_session_expired_in_x">Sesja logowania %1$s wygasła</string>
    <string name="error_x">Błąd: %1$s</string>
    <string name="str_copy">Kopiuj</string>
    <string name="extensions">Rozszerzenia</string>
    <string name="choose_a_color">Wybierz kolor</string>
    <string name="random">Losowy</string>
    <string name="add">Dodaj</string>
    <string name="loading">Ładowanie…</string>
    <string name="settings">Ustawienia</string>
    <string name="value">Wartość</string>
    <string name="value_not_set">Nie ustawiono</string>
    <string name="playback">Odtwarzanie</string>
    <string name="audio_fx">Efekty dźwiękowe</string>
    <string name="audio_fx_summary">Efekty stosowane we wszystkich utworach</string>
    <string name="audio_fx_desc">Zmień efekty dźwiękowe dla aktualnie odtwarzanego utworu.</string>
    <string name="reset">Resetuj</string>
    <string name="playback_speed">Prędkość odtwarzania</string>
    <string name="change_pitch_with_speed">Zmień tonację wraz z prędkością</string>
    <string name="bass_boost">Wzmocnienie basów</string>
    <string name="bass_boost_desc">Większe wartości mogą zniekształcić dźwięk.</string>
    <string name="change_pitch_with_speed_desc">Uzyskaj efekt \"slow-motion\"</string>
    <string name="equalizer">Korektor dźwięku</string>
    <string name="equalizer_summary">Otwórz korektor dźwięku urządzenia</string>
    <string name="stream_quality">Jakość odtwarzania</string>
    <string name="stream_quality_summary">Wybierz domyślną jakość odtwarzania</string>
    <string name="x_specific_quality_summary">Jakość odtwarzania dla %1$s, nadpisuje domyślne ustawienia</string>
    <string name="unmetered_stream_quality">Nieograniczona jakość odtwarzania</string>
    <string name="unmetered_stream_quality_summary">Jakość odtwarzania używana w przypadku połączeń bez limitów. To ustawienie nadpisze domyślną jakość odtwarzania.</string>
    <string name="keep_queue">Zachowaj kolejkę odtwarzania</string>
    <string name="keep_queue_summary">Zachowaj kolejkę odtwarzacza pomiędzy uruchomieniami aplikacji.</string>
    <string name="stop_player">Zatrzymaj odtwarzanie</string>
    <string name="stop_player_summary">Zatrzymaj odtwarzanie, gdy aplikacja zostanie zamknięta</string>
    <string name="behavior">Zachowanie</string>
    <string name="cache_size">Rozmiar pamięci podręcznej</string>
    <string name="version">Wersja</string>
    <string name="select_language">Wybierz język</string>
    <string name="system">System</string>
    <string name="check_for_updates">Sprawdź aktualizacje</string>
    <string name="install">Zainstaluj</string>
    <string name="app">Aplikacja</string>
    <string name="file">Plik</string>
    <string name="installation_type">Typ instalacji</string>
    <string name="extension_installer">Instalator rozszerzeń</string>
    <string name="skip_silence">Pomiń ciszę</string>
    <string name="cache_size_summary">Rozmiar w MB do buforowania audio i wideo</string>
    <string name="extension_installed_successfully">Rozszerzenie zainstalowane pomyślnie.</string>
    <string name="extension_uninstalled_successfully">Rozszerzenie odinstalowane pomyślnie.</string>
    <string name="downloading_update_for_x">Pobieranie aktualizacji dla %1$s</string>
    <string name="extension_updated_successfully">%1$s zaktualizowane pomyślnie</string>
    <string name="link">Link</string>
    <string name="link_or_code">Link lub kod</string>
    <string name="list_is_empty">Lista jest pusta</string>
    <string name="extension_installed">%1$s (Zainstalowano)</string>
    <string name="add_extensions">Dodaj rozszerzenia</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-pt\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="required_extensions_missing_x">Extensões necessárias ausentes: %1$s</string>
    <string name="logout_and_login">Sair e Iniciar Sessão</string>
    <string name="audio_selection">Seleção de áudio</string>
    <string name="search">Pesquisar</string>
    <string name="stop_player_summary">Pare o jogador, quando o aplicativo for removido de recentes</string>
    <string name="invalid_extension_list">Lista de extensões inválidas</string>
    <string name="no_user_found">Nenhum usuário encontrado</string>
    <string name="installation_type_summary">A instalação do aplicativo permitirá que os seguintes links sejam abertos no Echo:</string>
    <string name="sleep_timer">Temporizador de sono</string>
    <string name="extension_uninstalled_successfully">Extensão desinstalada com êxito.</string>
    <string name="auto_start_radio_summary">Adicione automaticamente músicas relacionadas da faixa na lista de reprodução, para ter uma fila infinita</string>
    <string name="explicit">Explícito</string>
    <string name="read_storage">Armazenamento de leitura</string>
    <string name="login">Iniciar sessão</string>
    <string name="change_pitch_with_speed_desc">Obtenha aquele som em câmara lenta</string>
    <string name="sort_duration">Duração</string>
    <string name="equalizer_summary">Abra as configurações do equalizador do sistema</string>
    <string name="list_is_empty">A lista está vazia</string>
    <string name="show_background">Mostrar plano de fundo</string>
    <string name="webview">Visualização da Web</string>
    <string name="tabs">Separadores</string>
    <string name="subtitles">Legendas</string>
    <string name="extension_installed_successfully">Extensão instalada com êxito.</string>
    <string name="duration_filter_summary">Filtrar arquivos de áudio com duração (em segundos) menor que o valor</string>
    <string name="like">Gostar</string>
    <string name="follow">Seguir</string>
    <string name="cancel">Cancelar</string>
    <string name="x_permission_required">Permissão %1$s necessária</string>
    <string name="x_was_not_granted">%1$s não foi concedido</string>
    <string name="audio">Áudio</string>
    <string name="audio_permission_summary">Para aceder à sua biblioteca de música local</string>
    <string name="write_storage_permission_summary">Para criar e editar listas de reprodução locais</string>
    <string name="notifications">Notificações</string>
    <string name="notifications_permission_summary">Para mostrar notificações de downloads e músicas</string>
    <string name="video">Vídeo</string>
    <string name="songs">Canções</string>
    <string name="albums">Álbuns</string>
    <string name="x_radio">%1$s Rádio</string>
    <string name="cached_songs">Músicas armazenadas em cache</string>
    <string name="cache_playlist_warning">Característica experimental. Qualquer coisa, exceto ouvi-los, não é suportada.</string>
    <string name="artists">Artistas</string>
    <string name="recently_added">Recentemente adicionado</string>
    <string name="refresh_library_on_reload">Atualizar biblioteca ao recarregar</string>
    <string name="refresh_library_on_reload_summary">Analise o dispositivo sempre que o feed for carregado</string>
    <string name="duration_filter">Filtro de Duração</string>
    <string name="blacklist_folders">Pastas da lista negra</string>
    <string name="blacklist_folder_keywords_summary">Palavras-chave para pastas da lista negra. Use vírgula para separador</string>
    <string name="saved">Guardado</string>
    <string name="show_tabs">Mostrar separadores</string>
    <string name="unified_liked_playlist_summary">Suas faixas curtidas de várias extensões</string>
    <string name="n_items">%1$d Itens</string>
    <string name="playlist_liked">Gostei</string>
    <string name="playlist_liked_desc">As suas faixas preferidas</string>
    <string name="unknown">Desconhecido</string>
    <string name="unlike">Descurtir</string>
    <string name="repeat_one">Repetir um</string>
    <string name="repeat_off">Repetir apagado</string>
    <string name="repeat_all">Repetir tudo</string>
    <string name="more">Saber mais</string>
    <string name="extension">Extensão</string>
    <string name="downloading_x">Baixando %1$s</string>
    <string name="cancel_all">Cancelar tudo</string>
    <string name="downloads">Transferências</string>
    <string name="downloaded_x">Baixado %1$s</string>
    <string name="view">Visão</string>
    <string name="extension_out_of_date">Desatualizado</string>
    <string name="no_internet">Sem Internet</string>
    <string name="error_loading_extension_from_x">Erro ao carregar a extensão de %1$s</string>
    <string name="extension_x_not_found">Extensão %1$s não encontrada</string>
    <string name="x_is_not_supported_in_x">%1$s não é suportado em %2$s</string>
    <string name="error_x">Erro: %1$s</string>
    <string name="str_copy">Copiar</string>
    <string name="extensions">Extensões</string>
    <string name="choose_a_color">Escolha uma cor</string>
    <string name="random">Aleatório</string>
    <string name="add">Adicionar</string>
    <string name="loading">A carregar…</string>
    <string name="settings">Configurações</string>
    <string name="value">Valor</string>
    <string name="value_not_set">Não definido</string>
    <string name="playback">Reprodução</string>
    <string name="audio_fx">Efeitos de áudio</string>
    <string name="audio_fx_summary">Efeitos aplicados a todas as músicas</string>
    <string name="audio_fx_desc">Altere os efeitos de áudio da faixa atual.</string>
    <string name="reset">Repor</string>
    <string name="playback_speed">Velocidade de reprodução</string>
    <string name="change_pitch_with_speed">Mude o tom com velocidade</string>
    <string name="bass_boost">Aumento de graves</string>
    <string name="bass_boost_desc">Um valor maior pode distorcer o som.</string>
    <string name="equalizer">Equalizador</string>
    <string name="stream_quality">Qualidade do fluxo</string>
    <string name="stream_quality_summary">Selecione a qualidade do fluxo</string>
    <string name="behavior">Comportamento</string>
    <string name="keep_queue">Manter a fila do jogador</string>
    <string name="keep_queue_summary">Recupere a fila do player quando reabrir o aplicativo.</string>
    <string name="skip_silence">Pular silêncio</string>
    <string name="skip_silence_summary">Pule a parte silenciosa da música, para fornecer uma reprodução sem interrupções</string>
    <string name="auto_start_radio">Rádio de arranque automático</string>
    <string name="cache_size">Tamanho do cache</string>
    <string name="cache_size_summary">Tamanho em MB para armazenar áudio e vídeo em cache</string>
    <string name="version">Versão</string>
    <string name="system">Sistema</string>
    <string name="install">Instalar</string>
    <string name="app">Aplicação</string>
    <string name="file">Ficheiro</string>
    <string name="installation_type">Tipo de Instalação</string>
    <string name="installation_type_warning">Não disponível se você instalar a extensão como um arquivo.</string>
    <string name="could_not_find_the_file">Não foi possível encontrar o ficheiro.</string>
    <string name="extension_installer">Instalador de extensões</string>
    <string name="allow_opening_links">Permitir a abertura de links</string>
    <string name="open_links_instruction">Para permitir a abertura desses links, você precisa:\n- Role para baixo e clique em \"Abrir por padrão\"\n- Clique em \"+ Adicionar Link\"</string>
    <string name="downloading_update_for_x">Download da atualização para %1$s</string>
    <string name="extension_updated_successfully">%1$s atualizado com êxito</string>
    <string name="link">Ligação</string>
    <string name="extension_installed">%1$s (Instalado)</string>
    <string name="add_extensions">Adicionar extensões</string>
    <string name="ui">Interface do usuário</string>
    <string name="theme">Tema</string>
    <string name="custom_theme_color">Cor do tema personalizada</string>
    <string name="custom_theme_color_summary">Use uma cor de tema personalizada, em vez da cor do sistema</string>
    <string name="add_color">Adicionar cor</string>
    <string name="custom_colors">Cores personalizadas</string>
    <string name="amoled">AMOLED</string>
    <string name="amoled_summary">Substitua a cor de fundo por preto breu. Útil para telas AMOLED para diminuir o consumo de bateria e evitar o burn-in da tela</string>
    <string name="navbar_gradient">Barra de navegação gradiente</string>
    <string name="navbar_gradient_summary">Navbar torna-se gradualmente transparente</string>
    <string name="dynamic_player">Cor dinâmica do leitor</string>
    <string name="dynamic_player_summary">Aplicar cor ao leitor com base na ilustração da faixa</string>
    <string name="show_background_summary">Vídeo de fundo ou arte desfocada da faixa no player</string>
    <string name="animation">Animação</string>
    <string name="animations">Animações</string>
    <string name="animations_summary">Sente muita gagueira? desligá-lo, pode ajudar</string>
    <string name="refresh">Atualizar</string>
    <string name="x_disabled">%1$s (Desativado)</string>
    <string name="by_x">Por %1$s</string>
    <string name="music">Música</string>
    <string name="tracker">Rastreador</string>
    <string name="lyrics">Letras</string>
    <string name="misc">Disposições diversas</string>
    <string name="x_extensions">Extensões %1$s</string>
    <string name="enabled">Ativado</string>
    <string name="select_x_account">Selecione a conta %1$s</string>
    <string name="add_extension">Adicionar extensão</string>
    <string name="error_updating_extension">Erro ao atualizar</string>
    <string name="logout">Sair</string>
    <string name="switch_account">Mudar de conta</string>
    <string name="incognito">Incógnito</string>
    <string name="not_logged_in">Não conectado</string>
    <string name="x_login">%1$s Login</string>
    <string name="x_is_required">$1%s é necessário</string>
    <string name="playing_from">Jogando a partir de</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d Hora</item>
        <item quantity="many">%1$d Horas</item>
        <item quantity="other">%1$d Horas</item>
    </plurals>
    <string name="info">Informação</string>
    <string name="seekbar">Barra de busca</string>
    <string name="shuffle">Embaralhar</string>
    <string name="previous">Anterior</string>
    <string name="play">Reproduzir</string>
    <string name="next">Seguinte</string>
    <string name="repeat">Repetir</string>
    <string name="close">Fechar</string>
    <string name="no_lyrics">Sem letra</string>
    <string name="end_of_track">Fim da pista</string>
    <string name="_15min">15 min</string>
    <string name="_30min">30 min</string>
    <string name="_45min">45 min</string>
    <string name="_1hr">1 Hr</string>
    <string name="_2hr">2 Hr</string>
    <string name="sleep_timer_desc">Definir um temporizador de suspensão para parar a reprodução após um determinado período de tempo</string>
    <string name="sleep_on_specific_time">Dormir em horário específico</string>
    <string name="sleep_timer_cancelled">Temporizador de suspensão cancelado</string>
    <string name="servers">Servidores</string>
    <string name="video_selection">Seleção de vídeo</string>
    <string name="subtitle_selection">Seleção de legendas</string>
    <string name="quality_selection">Seleção de Qualidade</string>
    <string name="quality_x">Qualidade %1$d</string>
    <string name="off">Desligado</string>
    <string name="unknown_quality">Qualidade desconhecida</string>
    <string name="so_empty">Tão vazio…</string>
    <string name="not_loading">Não carregando</string>
    <string name="share">Partilhar</string>
    <string name="sharing_x">Partilha %1$s</string>
    <string name="save_to_library">Guardar na biblioteca</string>
    <string name="saved_x_to_library">%1$s guardados na biblioteca</string>
    <string name="remove_from_library">Remover da biblioteca</string>
    <string name="radio">Rádio</string>
    <string name="download">Baixar</string>
    <string name="followed_x">Seguiu %1$s</string>
    <string name="unfollow">Deixar de seguir</string>
    <string name="unfollowing_x">Deixar de seguir %1$s</string>
    <string name="unfollowed_x">Deixou de seguir %1$s</string>
    <string name="hide">Ocultar</string>
    <string name="hiding_x">Ocultando %1$s</string>
    <string name="unhide">Desocultar</string>
    <string name="liking_x">Gostar de %1$s</string>
    <string name="liked_x">Gostou de %1$s</string>
    <string name="unliking_x">Não gostei de %1$s</string>
    <string name="unliked_x">Não gostei de %1$s</string>
    <string name="save_to_playlist">Guardar na lista de reprodução</string>
    <string name="delete_playlist">Excluir lista de reprodução</string>
    <string name="loading_radio_for_x">Carregando rádio por %1$s</string>
    <string name="playing_x">Jogando %1$s</string>
    <string name="adding_x_to_queue">Adicionar %1$s à fila</string>
    <string name="background_gradient">Gradiente de plano de fundo</string>
    <string name="background_gradient_summary">Uma tonalidade de cor gradiente no plano de fundo, dependendo do contexto</string>
    <string name="all">Tudo</string>
    <string name="more_brain_capacity">Mais capacidade cerebral</string>
    <string name="more_brain_capacity_summary">Ativando isso, pode corrigir o atraso de áudio, mas aumenta drasticamente o uso da bateria (Desativa o descarregamento de áudio).</string>
    <string name="sort">Ordenar</string>
    <string name="x_plays">%1$s Reproduções</string>
    <string name="x_followers">%1$s Seguidores</string>
    <string name="shuffling_x">Embaralhando %1$s</string>
    <string name="copying_the_error">Copiar o erro</string>
    <string name="reversed">Invertido</string>
    <string name="apply">Candidatar-se</string>
    <string name="save">Salvar</string>
    <string name="sort_title">Título</string>
    <string name="scroll_animations">Animações de rolagem</string>
    <string name="scroll_animations_summary">Animações durante a rolagem</string>
    <string name="sort_subtitle">Subtítulo</string>
    <string name="delete">Suprimir</string>
    <string name="playlist_description">Descrição da lista de reprodução</string>
    <string name="create_playlist">Criar lista de reprodução</string>
    <string name="creating_x">Criando %1$s</string>
    <string name="x_created">%1$s criado</string>
    <string name="playlist_name_empty">O nome da lista de reprodução está vazio</string>
    <string name="deleting_x">Excluindo %1$s</string>
    <string name="deleted_x">%1$s Apagado</string>
    <string name="loading_x">Carregando %1s</string>
    <string name="saving_x">Poupança %1$s</string>
    <string name="saved_to_x">Salvo em %1$s</string>
    <string name="saved_to_playlists">Guardado em listas de reprodução</string>
    <string name="selected_n">Selecionado %1$d</string>
    <string name="adding_x">Adicionando %1$s</string>
    <string name="moving_x">Movendo %1$s</string>
    <string name="removing_x">Removendo %1$s</string>
    <string name="no_download_extension">Nenhuma extensão de download encontrada, use o código \"echodown\" para obtê-lo.</string>
    <string name="nothing_to_download_in_x">Nada para baixar em %1$s</string>
    <string name="download_started">Download iniciado</string>
    <string name="merging_x">Mesclando %1$s</string>
    <string name="tagging_x">Marcando %1$s</string>
    <string name="apply_player_color_to_app">Aplicar a cor do Player a todo o aplicativo</string>
    <string name="apply_player_color_to_app_summary">ALERTA DE GAL!!</string>
    <plurals name="number_min">
        <item quantity="one">%1$d Minuto</item>
        <item quantity="many">%1$d Minutos</item>
        <item quantity="other">%1$d Minutos</item>
    </plurals>
    <string name="delete_download">Excluir Download</string>
    <string name="home">Casa</string>
    <string name="account_session_expired_in_x">A sessão da conta expirou em %1$s</string>
    <string name="more_by_x">Mais por %1$s</string>
    <string name="write_storage">Armazenamento de gravação</string>
    <string name="blacklist_folder_keywords">Palavras-chave da pasta da lista negra</string>
    <string name="show_tab_summary">Mostrar separadores das extensões como categorias</string>
    <string name="remove">Remover</string>
    <string name="x_login_required">%1$s login necessário</string>
    <string name="blacklist_folders_summary">Pastas a excluir da biblioteca</string>
    <string name="add_to_queue">Adicionar à fila</string>
    <string name="okay">Está bem</string>
    <string name="back">Voltar</string>
    <string name="library">Biblioteca</string>
    <string name="look_and_feel">Olhar e Sentir</string>
    <string name="removed_x_from_library">%1$s removido da biblioteca</string>
    <string name="download_progress">Download Progresso</string>
    <string name="disabled">Desabilitado</string>
    <string name="up_next">Próximo</string>
    <string name="stop_player">Parar Jogador</string>
    <string name="link_or_code">Link ou Código</string>
    <string name="theme_summary">Quer ser cego?</string>
    <string name="sources">Fontes</string>
    <string name="adding_x_to_next">Adicionar %1$s ao próximo</string>
    <string name="x_extension">Extensão %1$s</string>
    <string name="sleep_timer_set_for">Temporizador de suspensão definido para %1$s</string>
    <string name="search_x">Pesquisar %1$s</string>
    <string name="sort_and_filter">Ordenar e filtrar</string>
    <string name="filter">Filtro</string>
    <string name="following_x">Seguindo %1$s</string>
    <string name="backgrounds">Contextos gerais</string>
    <string name="add_to_next">Adicionar ao seguinte</string>
    <string name="playlist_name">Nome da lista de reprodução</string>
    <string name="unhiding_x">Desocultando %1$s</string>
    <string name="removed_x_from_downloads">%1$s removido dos downloads</string>
    <string name="edit_playlist">Editar lista de reprodução</string>
    <string name="sort_date">Data</string>
    <string name="create">Criar</string>
    <string name="add_song">Adicionar música</string>
    <string name="download_complete">Download Completo</string>
    <string name="app_widget_description">Eco na sua tela inicial!</string>
    <plurals name="number_items">
        <item quantity="one">%1$d Item</item>
        <item quantity="many">%1$d Ítens</item>
        <item quantity="other"/>
    </plurals>
    <string name="x_specific_quality_summary">Qualide de stream específica, irá substituir a qualidade de stream padrão</string>
    <string name="unmetered_stream_quality">Qualidade de stream não medida</string>
    <string name="select_language">Selecionar Linguagem</string>
    <string name="check_for_updates">Verificar por atualizações</string>
    <string name="check_for_updates_summary">Olhe por novas atualizações para o app e para as extensões, quando você abrir o app.</string>
    <string name="checking_for_updates">Checando por atualizações</string>
    <string name="back_animations">Animações de trás</string>
    <string name="back_animations_summary">Pode causar um bug visual por causa do Android, mas você pode abrir os recentes só para resolver.</string>
    <string name="n_hours">%1$d horas</string>
    <string name="n_minutes">%1$d minutos</string>
    <string name="hidden_x">Escondido %1$s</string>
    <string name="feed">Feed</string>
    <string name="unmetered_stream_quality_summary">A qualidade do stream quando está conectado em uma rede limitada. Isso substituirá a qualidade do stream padrão.</string>
    <string name="regex_invalid">%1$s é inválido, por favor siga o regex: %2$s</string>
    <string name="unhidden_x">Desoculto %1$s</string>
    <string name="unavailable_in_your_region">Não disponível na sua região</string>
    <string name="not_playable_x">Não tocável: %1$s</string>
    <string name="item">Item</string>
    <string name="track">Faixa</string>
    <string name="tracks">Faixas</string>
    <string name="n_songs">%1$d músicas</string>
    <string name="n_episodes">%1$d episódios</string>
    <string name="n_chapters">%1$d capítulos</string>
    <string name="n_tracks">%1$d faixas</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d música</item>
        <item quantity="many">%1$d músicas</item>
        <item quantity="other"/>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d episódio</item>
        <item quantity="many">%1$d episódios</item>
        <item quantity="other"/>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d capítulo</item>
        <item quantity="many">%1$d capítulos</item>
        <item quantity="other"/>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d faixa</item>
        <item quantity="many">%1$d faixas</item>
        <item quantity="other"/>
    </plurals>
    <string name="unsave">Desfazer salvamento</string>
    <string name="sort_date_added">Data adicionada</string>
    <string name="opening_webview_x">Abrindo WebView: %1$s</string>
    <string name="no_update_available_for_x">Nenhuma atualização disponível para %1$s</string>
    <string name="other">Outros</string>
    <string name="player">Reprodutor</string>
    <string name="about">Sobre</string>
    <string name="language_x">Linguagem: %1$s</string>
    <string name="guide">Guia</string>
    <string name="donate">Doar</string>
    <string name="contributors">Contribuidores</string>
    <string name="app_desc">Só um reprodutor de música.</string>
    <string name="manage">Gerenciar</string>
    <string name="no_account">Nenhuma conta</string>
    <string name="other_settings">Outras configurações</string>
    <string name="no_x_found">Nenhum %1$s encontrado</string>
    <string name="playlist">Playlist</string>
    <string name="album">Álbum</string>
    <string name="pre_release">Pré-lançamento</string>
    <string name="single">Single</string>
    <string name="ep">EP</string>
    <string name="lp">LP</string>
    <string name="compilation">Compilação</string>
    <string name="show">Mostrar</string>
    <string name="book">Livro</string>
    <string name="song">Música</string>
    <string name="podcast">Podcast</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="genres_x">Gêneros: %1$s</string>
    <string name="disc_number_n">Número do disco: %1$d</string>
    <string name="album_order_n">Número da ordem do álbum: %1$d</string>
    <string name="confirmation">Confirmação</string>
    <string name="delete_playlist_confirmation">Você tem certeza que quer deletar %1$s?</string>
    <string name="confirm">Confirmar</string>
    <string name="big_cover">Capas maiores</string>
    <string name="big_cover_summary">Bom para dispositivos com telas grandes</string>
    <string name="no_last_played_track_found">Nenhum faixa ultimamente tocada encontrada.</string>
    <string name="not_yet_released">Ainda não lançado</string>
    <string name="releases_on_x">Lançamentos em %1$s</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-pt-rBR\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">Certo</string>
    <string name="cancel">Cancelar</string>
    <string name="back">Voltar</string>
    <string name="x_permission_required">Permissão %1$s necessária</string>
    <string name="audio">Áudio</string>
    <string name="audio_permission_summary">Acessar sua biblioteca local</string>
    <string name="video">Vídeo</string>
    <string name="read_storage">Ler armazenamento</string>
    <string name="write_storage">Salvar no armazenamento</string>
    <string name="notifications">Notificações</string>
    <string name="notifications_permission_summary">Mostrar notificações de downloads e músicas</string>
    <string name="remove">Remover</string>
    <string name="more_by_x">Mais de %1$s</string>
    <string name="songs">Músicas</string>
    <string name="albums">Álbuns</string>
    <string name="x_radio">Rádio %1$s</string>
    <string name="cached_songs">Músicas em cache</string>
    <string name="refresh_library_on_reload">Atualizar biblioteca ao recarregar</string>
    <string name="refresh_library_on_reload_summary">Escanear o dispositivo sempre que o feed for carregado</string>
    <string name="duration_filter">Filtro de Duração</string>
    <string name="duration_filter_summary">Filtrar arquivos de áudio com duração (em segundos) inferior ao valor</string>
    <string name="blacklist_folders">Pastas bloqueadas</string>
    <string name="blacklist_folders_summary">Pastas a excluir da biblioteca</string>
    <string name="blacklist_folder_keywords">Palavras-chave de pastas bloqueadas</string>
    <string name="blacklist_folder_keywords_summary">Palavras-chave para deixar pastas na lista negra. Use vírgula como separador</string>
    <string name="saved">Salvo</string>
    <string name="tabs">Abas</string>
    <string name="show_tabs">Mostrar abas</string>
    <string name="show_tab_summary">Mostrar abas das extensões como categorias</string>
    <string name="unified_liked_playlist_summary">Suas faixas curtidas de várias extensões</string>
    <string name="n_items">%1$d Itens</string>
    <string name="playlist_liked">Curtidas</string>
    <string name="playlist_liked_desc">Suas faixas curtidas</string>
    <string name="more">Mais</string>
    <string name="extension">Extensão</string>
    <string name="downloading_x">Baixando %1$s</string>
    <string name="cancel_all">Cancelar tudo</string>
    <string name="download_progress">Progresso do download</string>
    <string name="downloads">Downloads</string>
    <string name="downloaded_x">Baixado %1$s</string>
    <string name="logout_and_login">Sair e Entrar</string>
    <string name="login">Entrar</string>
    <string name="view">Ver</string>
    <string name="extension_out_of_date">Extensão desatualizada</string>
    <string name="no_internet">Sem Internet</string>
    <string name="error_loading_extension_from_x">Erro ao carregar a extensão de %1$s</string>
    <string name="extension_x_not_found">Extensão %1$s não encontrada</string>
    <string name="required_extensions_missing_x">Extensões necessárias ausentes: %1$s</string>
    <string name="x_login_required">Login do %1$s necessário</string>
    <string name="x_is_not_supported_in_x">%1$s não é compatível com %2$s</string>
    <string name="account_session_expired_in_x">Sessão da conta expirada em %1$s</string>
    <string name="error_x">Erro: %1$s</string>
    <string name="str_copy">Copiar</string>
    <string name="extensions">Extensões</string>
    <string name="choose_a_color">Escolha uma cor</string>
    <string name="random">Aleatório</string>
    <string name="add">Adicionar</string>
    <string name="loading">Carregando…</string>
    <string name="settings">Configurações</string>
    <string name="value">Valor</string>
    <string name="value_not_set">Não definido</string>
    <string name="playback">Reprodução</string>
    <string name="audio_fx">Efeitos de áudio</string>
    <string name="audio_fx_summary">Efeitos aplicados para todas as músicas</string>
    <string name="reset">Resetar</string>
    <string name="playback_speed">Velocidade de reprodução</string>
    <string name="change_pitch_with_speed">Alterar tom com velocidade</string>
    <string name="bass_boost">Reforço de Graves</string>
    <string name="equalizer">Equalizador</string>
    <string name="equalizer_summary">Abrir as configurações do equalizador do sistema</string>
    <string name="stream_quality">Qualidade de Streaming</string>
    <string name="stream_quality_summary">Selecione a qualidade padrão do stream</string>
    <string name="behavior">Comportamento</string>
    <string name="keep_queue">Manter fila do reprodutor</string>
    <string name="stop_player">Parar reprodutor</string>
    <string name="stop_player_summary">Parar o reprodutor quando o app for removido dos recentes</string>
    <string name="skip_silence">Ignorar silêncio</string>
    <string name="skip_silence_summary">Pular a parte silenciosa da música para oferecer reprodução sem interrupções</string>
    <string name="auto_start_radio">Iniciar rádio automaticamente</string>
    <string name="cache_size">Tamanho do cache</string>
    <string name="version">Versão</string>
    <string name="system">Sistema</string>
    <string name="install">Instalar</string>
    <string name="app">App</string>
    <string name="file">Arquivo</string>
    <string name="installation_type">Tipo de instalação</string>
    <string name="installation_type_summary">A instalação do app permitirá que os seguintes links sejam abertos no Echo:</string>
    <string name="installation_type_warning">Não disponível se você instalar a extensão como um arquivo.</string>
    <string name="extension_installed_successfully">Extensão instalada com sucesso.</string>
    <string name="allow_opening_links">Permitir a abertura de links</string>
    <string name="downloading_update_for_x">Baixando atualização para %1$s</string>
    <string name="extension_updated_successfully">%1$s atualizado com sucesso</string>
    <string name="link">Link</string>
    <string name="link_or_code">Link ou Código</string>
    <string name="list_is_empty">A lista está vazia</string>
    <string name="extension_installed">%1$s (Instalado)</string>
    <string name="add_extensions">Adicionar extensões</string>
    <string name="ui">Interface do Usuário</string>
    <string name="theme">Tema</string>
    <string name="custom_theme_color">Cor do tema personalizado</string>
    <string name="add_color">Adicionar cor</string>
    <string name="custom_colors">Cores personalizadas</string>
    <string name="amoled">AMOLED</string>
    <string name="amoled_summary">Substitua a cor de fundo por preto absoluto. Útil para telas AMOLED para reduzir o consumo de bateria e prevenir o burn-in da tela</string>
    <string name="navbar_gradient">Barra de navegação em gradiente</string>
    <string name="navbar_gradient_summary">A barra de navegação se torna gradualmente transparente</string>
    <string name="dynamic_player">Cor dinâmica do reprodutor</string>
    <string name="show_background">Mostrar fundo</string>
    <string name="show_background_summary">Vídeo de fundo ou arte borrada da faixa no reprodutor</string>
    <string name="animation">Animação</string>
    <string name="animations_summary">Sentindo muitos travamentos? Desativar isso pode ajudar</string>
    <string name="refresh">Atualizar</string>
    <string name="x_disabled">%1$s (Desabilitado)</string>
    <string name="by_x">Por %1$s</string>
    <string name="music">Música</string>
    <string name="tracker">Rastreador</string>
    <string name="misc">Diversos</string>
    <string name="x_extensions">Extensões %1$s</string>
    <string name="x_extension">Extensão %1$s</string>
    <string name="enabled">Habilitado</string>
    <string name="disabled">Desabilitado</string>
    <string name="no_user_found">Nenhum usuário encontrado</string>
    <string name="select_x_account">Selecionar conta %1$s</string>
    <string name="add_extension">Adicionar extensão</string>
    <string name="error_updating_extension">Erro ao atualizar</string>
    <string name="webview">WebView</string>
    <string name="logout">Sair</string>
    <string name="switch_account">Trocar conta</string>
    <string name="incognito">Modo anônimo</string>
    <string name="not_logged_in">Não conectado</string>
    <string name="x_login">Login %1$s</string>
    <string name="x_is_required">%1$s é necessário</string>
    <string name="playing_from">Reproduzindo de</string>
    <string name="up_next">Próximo</string>
    <string name="info">Informação</string>
    <string name="seekbar">Barra de busca</string>
    <string name="shuffle">Aleatório</string>
    <string name="previous">Anterior</string>
    <string name="next">Próximo</string>
    <string name="repeat">Repetir</string>
    <string name="close">Fechar</string>
    <string name="no_lyrics">Nenhuma letra encontrada</string>
    <string name="end_of_track">Fim da faixa</string>
    <string name="_15min">15min</string>
    <string name="_30min">30min</string>
    <string name="_45min">45min</string>
    <string name="sharing_x">Compartilhando %1$s</string>
    <string name="save_to_library">Salvar na biblioteca</string>
    <string name="saved_x_to_library">Salvo %1$s na biblioteca</string>
    <string name="remove_from_library">Remover da biblioteca</string>
    <string name="followed_x">%1$s seguido</string>
    <string name="unfollowing_x">Deixando de seguir %1$s</string>
    <string name="unfollowed_x">Deixou de seguir %1$s</string>
    <string name="hide">Esconder</string>
    <string name="hiding_x">Escondendo %1$s</string>
    <string name="unhide">Desfazer ocultação</string>
    <string name="unhiding_x">Desocultando %1$s</string>
    <string name="liked_x">Curtiu %1$s</string>
    <string name="unliking_x">Descurtindo %1$s</string>
    <string name="save_to_playlist">Salvar na playlist</string>
    <string name="delete_playlist">Apagar playlist</string>
    <string name="add_to_next">Adicionar à próxima</string>
    <string name="add_to_queue">Adicionar à fila</string>
    <string name="loading_radio_for_x">Carregando rádio para %1$s</string>
    <string name="playing_x">Tocando %1$s</string>
    <string name="adding_x_to_queue">Adicionando %1$s à fila</string>
    <string name="adding_x_to_next">Adicionando %1$s à próxima</string>
    <string name="all">Tudo</string>
    <string name="more_brain_capacity">Mais capacidade cerebral</string>
    <string name="sort">Ordenar</string>
    <string name="x_plays">%1$s Reproduções</string>
    <string name="shuffling_x">Embaralhando %1$s</string>
    <string name="copying_the_error">Copiar o erro</string>
    <string name="sort_and_filter">Ordenar e Filtrar</string>
    <string name="apply">Aplicar</string>
    <string name="sort_title">Título</string>
    <string name="sort_date">Data</string>
    <string name="sort_duration">Duração</string>
    <string name="scroll_animations_summary">Animações ao rolar</string>
    <string name="sort_subtitle">Legenda</string>
    <string name="delete">Excluir</string>
    <string name="playlist_name">Nome da playlist</string>
    <string name="playlist_description">Descrição da playlist</string>
    <string name="create_playlist">Criar playlist</string>
    <string name="create">Criar</string>
    <string name="creating_x">Criando %1$s</string>
    <string name="playlist_name_empty">O nome da playlist está vazia</string>
    <string name="x_created">%1$s criado</string>
    <string name="deleting_x">Deletando %1$s</string>
    <string name="deleted_x">%1$s deletado</string>
    <string name="loading_x">Carregando %1s</string>
    <string name="saving_x">Salvando %1$s</string>
    <string name="saved_to_x">Salvo em %1$s</string>
    <string name="selected_n">%1$d selecionado</string>
    <string name="adding_x">Adicionando %1$s</string>
    <string name="moving_x">Movendo %1$s</string>
    <string name="no_download_extension">Nenhuma extensão de download encontrada, use o código \"echodown\" para obter.</string>
    <string name="download_started">Download Iniciado</string>
    <string name="merging_x">Mesclando %1$s</string>
    <string name="tagging_x">Marcando %1$s</string>
    <string name="apply_player_color_to_app">Aplicar a cor do player em todo o app</string>
    <string name="apply_player_color_to_app_summary">ALERTA DE LAG!!!</string>
    <string name="removed_x_from_downloads">Removido %1$s dos downloads</string>
    <string name="download_complete">Download concluído</string>
    <string name="app_widget_description">Echo na sua tela inicial!</string>
    <string name="x_was_not_granted">%1$s não foi concedido</string>
    <string name="library">Biblioteca</string>
    <string name="unlike">Descurtir</string>
    <string name="like">Curtir</string>
    <string name="repeat_one">Repetir uma</string>
    <string name="artists">Artistas</string>
    <string name="write_storage_permission_summary">Criar e editar playlists locais</string>
    <string name="home">Início</string>
    <string name="recently_added">Adicionados recentemente</string>
    <string name="unknown">Desconhecido</string>
    <string name="repeat_off">Repetir desativado</string>
    <string name="repeat_all">Repetir tudo</string>
    <string name="search">Pesquisar</string>
    <string name="could_not_find_the_file">Não foi possível encontrar o arquivo.</string>
    <string name="audio_fx_desc">Alterar os efeitos de áudio para a faixa atual.</string>
    <string name="bass_boost_desc">Valores maiores podem distorcer o som.</string>
    <string name="change_pitch_with_speed_desc">Obtenha o som em câmera lenta</string>
    <string name="keep_queue_summary">Recuperar a fila do reprodutor quando você reabrir o app.</string>
    <string name="auto_start_radio_summary">Adicionar automaticamente músicas relacionadas à faixa na playlist, para ter uma fila infinita</string>
    <string name="cache_size_summary">Tamanho em MB para armazenar áudio e vídeo em cache</string>
    <string name="extension_installer">Instalador de extensão</string>
    <string name="theme_summary">Quer ficar cego?</string>
    <string name="open_links_instruction">Para permitir a abertura desses links, você precisa:\n- Rolar para baixo e clicar em \"Abrir por padrão\"\n- Clicar em \"+ Adicionar link\"</string>
    <string name="extension_uninstalled_successfully">Extensão desinstalada com sucesso.</string>
    <string name="invalid_extension_list">Lista de extensões inválidas</string>
    <string name="look_and_feel">Aparência e Comportamento</string>
    <string name="custom_theme_color_summary">Use uma cor de tema personalizada, em vez da cor do sistema</string>
    <string name="sleep_on_specific_time">Dormir em um horário específico</string>
    <string name="animations">Animações</string>
    <string name="sleep_timer_set_for">Temporizador de sono definido para %1$s</string>
    <string name="search_x">Pesquisar %1$s</string>
    <string name="video_selection">Seleção de vídeo</string>
    <string name="cache_playlist_warning">Recurso experimental. Qualquer coisa além de ouvi-las não é suportada.</string>
    <string name="edit_playlist">Editar playlist</string>
    <string name="more_brain_capacity_summary">Ativar isso pode corrigir o atraso de áudio, mas aumenta drasticamente o consumo da bateria (Desativa o descarregamento de áudio).</string>
    <string name="explicit">Explícito</string>
    <string name="x_followers">%1$s Seguidores</string>
    <string name="scroll_animations">Animações de rolagem</string>
    <string name="dynamic_player_summary">Aplicar cor ao reprodutor com base na arte da faixa</string>
    <string name="lyrics">Letras</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d Hora</item>
        <item quantity="many">%1$d Horas</item>
        <item quantity="other">%1$d Horas</item>
    </plurals>
    <string name="so_empty">Tão vazio…</string>
    <string name="subtitles">Legendas</string>
    <string name="quality_selection">Seleção de qualidade</string>
    <string name="play">Reproduzir</string>
    <string name="sleep_timer">Temporizador de sono</string>
    <string name="_1hr">1hr</string>
    <string name="follow">Seguir</string>
    <string name="_2hr">2hr</string>
    <string name="sleep_timer_desc">Defina um temporizador de sono para parar a reprodução após um determinado período de tempo</string>
    <string name="sleep_timer_cancelled">Temporizador de sono cancelado</string>
    <string name="save">Salvar</string>
    <plurals name="number_min">
        <item quantity="one">%1$d Minuto</item>
        <item quantity="many">%1$d Minutos</item>
        <item quantity="other">%1$d Minutos</item>
    </plurals>
    <string name="unfollow">Deixar de seguir</string>
    <string name="servers">Servidores</string>
    <string name="sources">Fontes</string>
    <string name="unknown_quality">Qualidade desconhecida</string>
    <string name="backgrounds">Fundos</string>
    <string name="audio_selection">Seleção de áudio</string>
    <string name="subtitle_selection">Seleção de legendas</string>
    <string name="quality_x">Qualidade %1$d</string>
    <string name="off">Desligado</string>
    <string name="not_loading">Não carregando</string>
    <string name="share">Compartilhar</string>
    <string name="reversed">Invertido</string>
    <string name="removed_x_from_library">Removido %1$s da biblioteca</string>
    <string name="radio">Rádio</string>
    <string name="filter">Filtrar</string>
    <string name="download">Baixar</string>
    <string name="following_x">Seguindo %1$s</string>
    <string name="liking_x">Curtindo %1$s</string>
    <string name="nothing_to_download_in_x">Nada para baixar em %1$s</string>
    <string name="removing_x">Removendo %1$s</string>
    <string name="unliked_x">Descurtiu %1$s</string>
    <string name="background_gradient">Gradiente de fundo</string>
    <string name="background_gradient_summary">Um tom de cor gradiente no fundo, dependendo do contexto</string>
    <string name="add_song">Adicionar música</string>
    <string name="saved_to_playlists">Salvo nas playlists</string>
    <string name="delete_download">Excluir download</string>
    <string name="item">Item</string>
    <string name="feed">Feed</string>
    <plurals name="number_items">
        <item quantity="one">%1$d item</item>
        <item quantity="many">%1$d itens</item>
        <item quantity="other">%1$d itens</item>
    </plurals>
    <string name="x_specific_quality_summary">%1$s qualidade de stream específica, irá substituir a qualidade de stream padrão</string>
    <string name="colors">Cores</string>
    <string name="scroll_bar">Barra de rolagem</string>
    <string name="scroll_bar_summary">Barra de rolagem no lado para um acesso mais rápido (pode estar com bugs)</string>
    <string name="back_animations">Animações de trás</string>
    <string name="back_animations_summary">Pode causar bug visual por causa do Android, mas você pode apenas abrir os recentes para resolver isso.</string>
    <string name="regex_invalid">%1$s é inválido, por favor siga o regex: %2$s</string>
    <string name="n_hours">%1$d horas</string>
    <string name="n_minutes">%1$d minutos</string>
    <string name="hidden_x">%1$s oculto</string>
    <string name="unhidden_x">%1$s desoculto</string>
    <string name="track">Faixa</string>
    <string name="tracks">Faixas</string>
    <string name="n_songs">%1$d músicas</string>
    <string name="n_episodes">%1$d episódios</string>
    <string name="n_chapters">%1$d capítulos</string>
    <string name="n_tracks">%1$d faixas</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d música</item>
        <item quantity="many">%1$d músicas</item>
        <item quantity="other">%1$d músicas</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d episódio</item>
        <item quantity="many">%1$d episódios</item>
        <item quantity="other">%1$d episódios</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d capítulo</item>
        <item quantity="many">%1$d capítulos</item>
        <item quantity="other">%1$d capítulos</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d faixa</item>
        <item quantity="many">%1$d faixas</item>
        <item quantity="other">%1$d faixas</item>
    </plurals>
    <string name="unsave">Desfazer salvamento</string>
    <string name="sort_date_added">Data adicionada</string>
    <string name="opening_webview_x">Abrindo Webview: %1$s</string>
    <string name="no_update_available_for_x">Nenhuma atualização disponível para %1$s</string>
    <string name="other">Outros</string>
    <string name="player">Reprodutor</string>
    <string name="about">Sobre</string>
    <string name="language_x">Linguagem: %1$s</string>
    <string name="guide">Guia</string>
    <string name="donate">Doar</string>
    <string name="contributors">Contribuidores</string>
    <string name="app_desc">Só um reprodutor de música.</string>
    <string name="manage">Gerenciar</string>
    <string name="no_account">Nenhuma conta</string>
    <string name="other_settings">Outras configurações</string>
    <string name="no_x_found">Nenhum %1$s encontrado</string>
    <string name="playlist">Playlist</string>
    <string name="album">Álbum</string>
    <string name="pre_release">Pré-lançamento</string>
    <string name="single">Single</string>
    <string name="ep">EP</string>
    <string name="lp">LP</string>
    <string name="compilation">Compilação</string>
    <string name="show">Mostrar</string>
    <string name="book">Livro</string>
    <string name="song">Música</string>
    <string name="podcast">Podcast</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="genres_x">Gêneros: %1$s</string>
    <string name="disc_number_n">Número do disco: %1$d</string>
    <string name="album_order_n">Número da ordem do álbum: %1$d</string>
    <string name="confirmation">Confirmação</string>
    <string name="delete_playlist_confirmation">Você tem certeza que quer deletar %1$s?</string>
    <string name="confirm">Confirmar</string>
    <string name="big_cover">Capas maiores</string>
    <string name="big_cover_summary">Bom para dispositivos com telas maiores</string>
    <string name="no_last_played_track_found">Nenhuma faixa ultimamente tocada encontrada.</string>
    <string name="not_yet_released">Ainda não lançado</string>
    <string name="releases_on_x">Lançamentos em %1$s</string>
    <string name="unavailable_in_your_region">Não disponível na sua região</string>
    <string name="not_playable_x">Não tocável: %1$s</string>
    <string name="unmetered_stream_quality">Qualidade de stream não medida</string>
    <string name="unmetered_stream_quality_summary">A qualidade de stream quando está conectado em uma rede limitada. Isso irá substituir a qualidade de stream padrão.</string>
    <string name="select_language">­Selecionar linguagem</string>
    <string name="check_for_updates">Verificar por atualizações</string>
    <string name="check_for_updates_summary">Olhe por novas atualização para o app e as extensões, quando você abrir o app.</string>
    <string name="checking_for_updates">Verificando por atualizações</string>
    <string name="currently_playing">Atualmente tocando</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-ru\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="notifications">Уведомления</string>
    <string name="x_permission_required">Требуется разрешение %1$s</string>
    <string name="cancel">Отмена</string>
    <string name="audio_permission_summary">Необходимо для доступа к вашей локальной музыкальной библиотеке</string>
    <string name="back">Назад</string>
    <string name="audio">Аудио</string>
    <string name="video">Видео</string>
    <string name="notifications_permission_summary">Необходимо, чтобы показывать уведомления для скачиваний и музыки</string>
    <string name="songs">Песни</string>
    <string name="x_radio">%1$s Радио</string>
    <string name="cached_songs">Кэшированные песни</string>
    <string name="recently_added">Недавно добавленные</string>
    <string name="show_tabs">Показывать вкладки</string>
    <string name="remove">Убрать</string>
    <string name="artists">Исполнители</string>
    <string name="okay">Ок</string>
    <string name="write_storage_permission_summary">Необходимо, чтобы создавать или редактировать локальные плейлисты</string>
    <string name="albums">Альбомы</string>
    <string name="cache_playlist_warning">Экспериментальная функция. Всё, кроме прослушивания, не поддерживается.</string>
    <string name="duration_filter">Фильтр по длительности</string>
    <string name="duration_filter_summary">Фильтрация аудиофайлов с длительностью меньше указанной (в секундах)</string>
    <string name="tabs">Вкладки</string>
    <string name="unified_liked_playlist_summary">Ваши понравившиеся треки из разных расширений</string>
    <string name="show_tab_summary">показывать вкладки расширений как категории</string>
    <string name="saved">Сохранённое</string>
    <string name="unknown">Неизвестно</string>
    <string name="repeat_all">Повторять всё</string>
    <string name="search">Поиск</string>
    <string name="library">Библиотека</string>
    <string name="more">Больше</string>
    <string name="extension">Расширение</string>
    <string name="downloading_x">Скачивается %1$s</string>
    <string name="download_progress">Прогресс скачивания</string>
    <string name="downloads">Скачивания</string>
    <string name="login">Вход</string>
    <string name="no_internet">Отсутствует подключение к интернету</string>
    <string name="extension_x_not_found">Расширение %1$s не найдено</string>
    <string name="required_extensions_missing_x">Отсутствуют требуемые расширения: %1$s</string>
    <string name="x_login_required">Требуется вход в %1$s</string>
    <string name="account_session_expired_in_x">Сессия аккаунта истекает в %1$s</string>
    <string name="error_x">Ошибка: %1$s</string>
    <string name="str_copy">Скопировать</string>
    <string name="add">Добавить</string>
    <string name="loading">Загрузка…</string>
    <string name="value">Значение</string>
    <string name="audio_fx">Аудиоэффекты</string>
    <string name="equalizer">Эквалайзер</string>
    <string name="equalizer_summary">Открыть настройки эквалайзера устройства</string>
    <string name="behavior">Поведение</string>
    <string name="settings">Настройки</string>
    <string name="extensions">Расширения</string>
    <string name="downloaded_x">Скачано %1$s</string>
    <string name="cancel_all">Отменить всё</string>
    <string name="playback">Воспроизведение</string>
    <string name="error_loading_extension_from_x">Ошибка при загрузке расширения из %1$s</string>
    <string name="x_is_not_supported_in_x">%1$s не поддерживается в %2$s</string>
    <string name="choose_a_color">Выберите цвет</string>
    <string name="reset">Сбросить</string>
    <string name="playback_speed">Скорость воспроизведения</string>
    <string name="bass_boost_desc">Более высокое значение может исказить звук.</string>
    <string name="stream_quality">Качество воспроизведения</string>
    <string name="stream_quality_summary">Выбор качества воспроизведения по умолчанию</string>
    <string name="x_was_not_granted">%1$s не было предоставлено</string>
    <string name="read_storage">Чтение хранилища</string>
    <string name="write_storage">Запись в хранилище</string>
    <string name="more_by_x">Больше от %1$s</string>
    <string name="refresh_library_on_reload">Обновлять библиотеку при перезагрузке</string>
    <string name="blacklist_folders_summary">Папки, которые нужно исключить из библиотеки</string>
    <string name="blacklist_folders">Чёрный список папок</string>
    <string name="playlist_liked">Понравившиеся</string>
    <string name="home">Главная</string>
    <string name="playlist_liked_desc">Ваши понравившиеся треки</string>
    <string name="logout_and_login">Выход и вход</string>
    <string name="view">Посмотреть</string>
    <string name="audio_fx_summary">Эффекты, применяемые ко всем песням</string>
    <string name="skip_silence">Пропускать тишину</string>
    <string name="cache_size">Размер кэша</string>
    <string name="music">Музыка</string>
    <string name="switch_account">Сменить аккаунт</string>
    <string name="not_logged_in">Вход не выполнен</string>
    <string name="x_login">Войти в %1$s</string>
    <string name="x_is_required">Требуется %1$s</string>
    <string name="info">Информация</string>
    <string name="shuffle">Перемешать</string>
    <string name="play">Воспроизвести</string>
    <string name="close">Закрыть</string>
    <string name="no_lyrics">Нет текста</string>
    <string name="sleep_timer">Таймер сна</string>
    <string name="end_of_track">По окончании трека</string>
    <string name="_45min">45 мин.</string>
    <string name="_15min">15 мин.</string>
    <string name="_1hr">1 ч.</string>
    <string name="_2hr">2 ч.</string>
    <string name="sleep_timer_cancelled">Таймер сна отменён</string>
    <string name="sleep_timer_set_for">Таймер сна установлен на %1$s</string>
    <string name="search_x">Поиск %1$s</string>
    <string name="sources">Источники</string>
    <string name="backgrounds">Фоны</string>
    <string name="subtitles">Субтитры</string>
    <string name="audio_selection">Выбор аудио</string>
    <string name="servers">Серверы</string>
    <string name="quality_selection">Выбор качества</string>
    <string name="quality_x">Качество: %1$d</string>
    <string name="off">Выкл.</string>
    <string name="unknown_quality">Неизвестное качество</string>
    <string name="save_to_library">Сохранить в библиотеку</string>
    <string name="saved_x_to_library">%1$s cохранено в библиотеку</string>
    <string name="radio">Радио</string>
    <string name="download">Скачать</string>
    <string name="playlist_name">Название плейлиста</string>
    <string name="create">Создать</string>
    <string name="creating_x">Создание %1$s</string>
    <string name="playlist_name_empty">Название плейлиста не задано</string>
    <string name="x_created">%1$s создан</string>
    <string name="deleting_x">Удаление %1$s</string>
    <string name="deleted_x">%1$s удалён</string>
    <string name="saving_x">Сохранение %1$s</string>
    <string name="saved_to_x">Сохранено в %1$s</string>
    <string name="saved_to_playlists">Сохранено в плейлисты</string>
    <string name="selected_n">Выбрано %1$d</string>
    <string name="adding_x">Добавление %1$s</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d час</item>
        <item quantity="few">%1$d часа</item>
        <item quantity="many">%1$d часов</item>
        <item quantity="other">%1$d часов</item>
    </plurals>
    <plurals name="number_min">
        <item quantity="one">%1$d минута</item>
        <item quantity="few">%1$d минуты</item>
        <item quantity="many">%1$d минут</item>
        <item quantity="other">%1$d минут</item>
    </plurals>
    <string name="subtitle_selection">Выбор субтитров</string>
    <string name="blacklist_folder_keywords">Ключевые слова для чёрного списка папок</string>
    <string name="audio_fx_desc">Изменить аудиоэффекты для текущего трека.</string>
    <string name="_30min">30 мин.</string>
    <string name="playlist_description">Описание плейлиста</string>
    <string name="create_playlist">Создайте плейлист</string>
    <string name="add_song">Добавить песню</string>
    <string name="loading_x">Загрузка %1s</string>
    <string name="moving_x">Перемещение %1$s</string>
    <string name="removing_x">Удаление %1$s</string>
    <string name="video_selection">Выбор видео</string>
    <string name="playing_from">Воспроизводится из</string>
    <string name="so_empty">Так пусто…</string>
    <string name="not_loading">Не загружается</string>
    <string name="share">Поделиться</string>
    <string name="remove_from_library">Удалить из библиотеки</string>
    <string name="removed_x_from_library">%1$s удалено из библиотеки</string>
    <string name="follow">Подписаться</string>
    <string name="unfollow">Отписаться</string>
    <string name="logout">Выйти из аккаунта</string>
    <string name="incognito">Инкогнито</string>
    <string name="sleep_timer_desc">Установите таймер сна, чтобы остановить воспроизведение через заданное время</string>
    <string name="value_not_set">Не установлено</string>
    <string name="app">Приложение</string>
    <string name="installation_type_warning">Недоступно, если вы устанавливаете расширение в виде файла.</string>
    <string name="extension_installer">Установщик расширений</string>
    <string name="allow_opening_links">Разрешить открытие ссылок</string>
    <string name="ui">Интерфейс</string>
    <string name="add_extension">Добавить расширение</string>
    <string name="error_updating_extension">Ошибка во время обновления</string>
    <string name="nothing_to_download_in_x">Нечего скачивать в %1$s</string>
    <string name="download_started">Начало скачивания</string>
    <string name="extension_uninstalled_successfully">Расширение успешно удалено.</string>
    <string name="installation_type">Тип установки</string>
    <string name="installation_type_summary">Установка приложения разрешит открытие следующих ссылок в Echo:</string>
    <string name="theme">Тема</string>
    <string name="file">Файл</string>
    <string name="extension_installed_successfully">Расширение успешно установлено.</string>
    <string name="n_items">%1$d Элементов</string>
    <string name="like">Добавить в Понравившиеся</string>
    <string name="unlike">Удалить из Понравившихся</string>
    <string name="repeat_one">Повторять один</string>
    <string name="repeat_off">Повтор выключен</string>
    <string name="extension_out_of_date">Старая версия</string>
    <string name="random">Случайный</string>
    <string name="change_pitch_with_speed">Изменять высоту тона вместе с скоростью</string>
    <string name="bass_boost">Усиление басов</string>
    <string name="refresh_library_on_reload_summary">Сканировать устройство каждый раз при загрузке ленты</string>
    <string name="blacklist_folder_keywords_summary">Ключевые слова для чёрного списка папок. Используйте запятую как разделитель</string>
    <string name="change_pitch_with_speed_desc">Получите тот замедленный звук</string>
    <string name="keep_queue">Сохранять очередь плеера</string>
    <string name="stop_player">Останавливать плеер</string>
    <string name="stop_player_summary">Останавливать плеер при удалении приложения из Недавних</string>
    <string name="auto_start_radio">Автозапуск радио</string>
    <string name="cache_size_summary">Размер в МБ для кэширования аудио и видео</string>
    <string name="version">Версия</string>
    <string name="system">Система</string>
    <string name="install">Установить</string>
    <string name="could_not_find_the_file">Не удалось найти файл.</string>
    <string name="link">Ссылка</string>
    <string name="list_is_empty">Список пуст</string>
    <string name="extension_installed">%1$s (Установлено)</string>
    <string name="add_extensions">Добавить расширения</string>
    <string name="extension_updated_successfully">%1$s успешно обновлено</string>
    <string name="theme_summary">Хотите ослепнуть?</string>
    <string name="custom_theme_color_summary">Использование пользовательского цвета темы вместо системного.</string>
    <string name="add_color">Добавить цвет</string>
    <string name="custom_colors">Пользовательские цвета</string>
    <string name="navbar_gradient_summary">Панель навигации постепенно становится прозрачной</string>
    <string name="animation">Анимация</string>
    <string name="animations">Анимации</string>
    <string name="refresh">Обновить</string>
    <string name="x_disabled">%1$s (Отключено)</string>
    <string name="by_x">Автор: %1$s</string>
    <string name="tracker">Трекер</string>
    <string name="lyrics">Текст</string>
    <string name="x_extensions">%1$s Расширения</string>
    <string name="select_x_account">Выберите аккаунт %1$s</string>
    <string name="up_next">Очередь</string>
    <string name="seekbar">Панель поиска</string>
    <string name="previous">Предыдущий</string>
    <string name="next">Следующий</string>
    <string name="repeat">Повторять</string>
    <string name="sleep_on_specific_time">Остановить через указанное время</string>
    <string name="sharing_x">Обмен %1$s</string>
    <string name="following_x">Подписка на %1$s</string>
    <string name="followed_x">Вы подписаны на %1$s</string>
    <string name="unfollowing_x">Отписка от %1$s</string>
    <string name="hide">Скрыть</string>
    <string name="unhide">Показать</string>
    <string name="liking_x">Добавление %1$s в Понравившиеся</string>
    <string name="unliking_x">Удаление %1$s из Понравившихся</string>
    <string name="unliked_x">%1$s удалено из Понравившихся</string>
    <string name="add_to_queue">Добавить в очередь</string>
    <string name="loading_radio_for_x">Загрузка радио для %1$s</string>
    <string name="playing_x">Воспроизведение %1$s</string>
    <string name="adding_x_to_queue">Добавление %1$s в очередь</string>
    <string name="background_gradient">Градиент фона</string>
    <string name="all">Всё</string>
    <string name="edit_playlist">Редактировать плейлист</string>
    <string name="more_brain_capacity">Отключить разгрузку</string>
    <string name="sort">Сортировать по</string>
    <string name="x_followers">%1$s подписчиков</string>
    <string name="shuffling_x">Перемешивание %1$s</string>
    <string name="copying_the_error">Копирование ошибки</string>
    <string name="filter">Фильтр</string>
    <string name="reversed">В обратном порядке</string>
    <string name="apply">Применить</string>
    <string name="scroll_animations">Анимации прокрутки</string>
    <string name="sort_subtitle">Субтитры</string>
    <string name="delete">Удалить</string>
    <string name="no_download_extension">Расширение для скачивания не найдено. Используйте код \\\"echodown\\\", чтобы скачать его.</string>
    <string name="tagging_x">Тегирование %1$s</string>
    <string name="apply_player_color_to_app">Применять цвет плеера ко всему приложению</string>
    <string name="apply_player_color_to_app_summary">ПРЕДУПРЕЖДЕНИЕ О ЗАДЕРЖКАХ!!!</string>
    <string name="look_and_feel">Внешний вид и ощущения</string>
    <string name="invalid_extension_list">Список недопустимых расширений</string>
    <string name="open_links_instruction">Чтобы разрешить открытие этих ссылок, вам нужно:\n- Прокрутить вниз и нажать «Открыть по умолчанию».\n- Нажать «+ Добавить ссылку»</string>
    <string name="skip_silence_summary">Пропуск беззвучной части песни, чтобы обеспечить непрерывное воспроизведение.</string>
    <string name="link_or_code">Ссылка или код</string>
    <string name="show_background">Показывать фон</string>
    <string name="custom_theme_color">Пользовательский цвет темы</string>
    <string name="unfollowed_x">Вы отписаны от %1$s</string>
    <string name="navbar_gradient">Градиентная панель навигации</string>
    <string name="dynamic_player">Динамический цвет плеера</string>
    <string name="unhiding_x">Возвращение %1$s</string>
    <string name="liked_x">%1$s добавлено в Понравившиеся</string>
    <string name="keep_queue_summary">Восстанавливать очередь плеера при повторном открытии приложения.</string>
    <string name="save_to_playlist">Сохранить в плейлист</string>
    <string name="x_extension">%1$s Расширение</string>
    <string name="sort_and_filter">Сортировка и фильтрация</string>
    <string name="sort_date">Дата</string>
    <string name="auto_start_radio_summary">Автоматическое добавление связанных треков в плейлист, чтобы иметь бесконечную очередь</string>
    <string name="downloading_update_for_x">Скачивание обновления для %1$s</string>
    <string name="amoled_summary">Чёрный, Настоящий чёрный</string>
    <string name="show_background_summary">Фоновое видео или размытая обложка трека в плеере</string>
    <string name="dynamic_player_summary">Применение цвета к плееру на основе обложки трека</string>
    <string name="misc">Разное</string>
    <string name="animations_summary">Отключите это, если возникают подвисания</string>
    <string name="more_brain_capacity_summary">Включение этой функции может устранить задержку звука, но увеличит расход батареи (отключает разгрузку аудио).</string>
    <string name="enabled">Включено</string>
    <string name="disabled">Отключено</string>
    <string name="no_user_found">Пользователь не найден</string>
    <string name="add_to_next">Добавить следующим</string>
    <string name="hiding_x">Скрытие %1$s</string>
    <string name="delete_playlist">Удалить плейлист</string>
    <string name="adding_x_to_next">Добавление %1$s следующим</string>
    <string name="background_gradient_summary">Градиентный цветовой оттенок фона в зависимости от обложки трека</string>
    <string name="sort_duration">Длительность</string>
    <string name="x_plays">%1$s прослушиваний</string>
    <string name="save">Сохранить</string>
    <string name="sort_title">Название</string>
    <string name="scroll_animations_summary">Анимации при прокрутке элементов</string>
    <string name="merging_x">Слияние %1$s</string>
    <string name="delete_download">Удалить скачивание</string>
    <string name="removed_x_from_downloads">%1$s удалено из скачиваний</string>
    <string name="download_complete">Скачивание завершено</string>
    <string name="app_widget_description">Echo на вашем главном экране!</string>
    <string name="feed">Лента</string>
    <string name="item">Элемент</string>
    <plurals name="number_items">
        <item quantity="one">%1$d элемент</item>
        <item quantity="few">%1$d элемента</item>
        <item quantity="many">%1$d элементов</item>
        <item quantity="other">%1$d элементов</item>
    </plurals>
    <string name="x_specific_quality_summary">Конкретное качество воспроизведения %1$s, переопределит выбор качества воспроизведения по умолчанию</string>
    <string name="unmetered_stream_quality">Неограниченное качество воспроизведения</string>
    <string name="unmetered_stream_quality_summary">Качество воспроизведения при подключении к сети с неограниченным трафиком. Переопределит качество воспроизведения по умолчанию.</string>
    <string name="select_language">Выбрать язык</string>
    <string name="check_for_updates">Проверять на наличие обновлений</string>
    <string name="check_for_updates_summary">Проверять наличие обновлений для приложения и расширений при его запуске.</string>
    <string name="checking_for_updates">Проверка обновлений</string>
    <string name="back_animations">Анимации при возвращении назад</string>
    <string name="back_animations_summary">Может вызывать визуальные сбои из-за особенностей Android, но вы можете исправить его, открыв список последних приложений.</string>
    <string name="regex_invalid">%1$s недопустим, пожалуйста, следуйте формату: %2$s</string>
    <string name="n_hours">%1$d часов</string>
    <string name="n_minutes">%1$d минут</string>
    <string name="hidden_x">%1$s скрыто</string>
    <string name="track">Трек</string>
    <string name="tracks">Треки</string>
    <string name="n_episodes">%1$d эпизодов</string>
    <string name="n_chapters">%1$d частей</string>
    <string name="n_tracks">%1$d треков</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d песня</item>
        <item quantity="few">%1$d песни</item>
        <item quantity="many">%1$d песен</item>
        <item quantity="other">%1$d песен</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d эпизод</item>
        <item quantity="few">%1$d эпизода</item>
        <item quantity="many">%1$d эпизодов</item>
        <item quantity="other">%1$d эпизодов</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d глава</item>
        <item quantity="few">%1$d главы</item>
        <item quantity="many">%1$d глав</item>
        <item quantity="other">%1$d глав</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d трек</item>
        <item quantity="few">%1$d трека</item>
        <item quantity="many">%1$d треков</item>
        <item quantity="other">%1$d треков</item>
    </plurals>
    <string name="unsave">Удалить из сохранённого</string>
    <string name="sort_date_added">Дата добавления</string>
    <string name="opening_webview_x">Открытие Веб-просмотра: %1$s</string>
    <string name="no_update_available_for_x">Нет доступных обновлений для %1$s</string>
    <string name="other">Другое</string>
    <string name="player">Плеер</string>
    <string name="about">О приложении</string>
    <string name="language_x">Язык: %1$s</string>
    <string name="guide">Руководство</string>
    <string name="contributors">Авторы</string>
    <string name="donate">Пожертвование</string>
    <string name="unhidden_x">%1$s показано</string>
    <string name="app_desc">Просто музыкальный плеер.</string>
    <string name="podcast">Подкаст</string>
    <string name="genres_x">Жанры: %1$s</string>
    <string name="disc_number_n">Номер диска: %1$d</string>
    <string name="album_order_n">Порядковый номер в альбоме: %1$d</string>
    <string name="confirmation">Подтверждение</string>
    <string name="delete_playlist_confirmation">Вы уверены, что хотите удалить %1$s?</string>
    <string name="confirm">Подтвердить</string>
    <string name="big_cover">Более крупные обложки</string>
    <string name="big_cover_summary">Хорошо подходит для устройств с большим экраном</string>
    <string name="no_last_played_track_found">Последний проигранный трек не найден.</string>
    <string name="not_yet_released">Ещё не вышло</string>
    <string name="releases_on_x">Выходит %1$s</string>
    <string name="unavailable_in_your_region">Недоступно в вашем регионе</string>
    <string name="not_playable_x">Невозможно воспроизвести: %1$s</string>
    <string name="manage">Управлять</string>
    <string name="no_account">Нет аккаунта</string>
    <string name="other_settings">Другие настройки</string>
    <string name="no_x_found">%1$s не найдено</string>
    <string name="playlist">Плейлист</string>
    <string name="album">Альбом</string>
    <string name="pre_release">Предварительный релиз</string>
    <string name="single">Сингл</string>
    <string name="ep">Мини-альбом</string>
    <string name="lp">Полноформатный альбом</string>
    <string name="compilation">Альбом-сборник</string>
    <string name="show">Показать</string>
    <string name="book">Книга</string>
    <string name="song">Песня</string>
    <string name="n_songs">%1$d песен</string>
    <string name="amoled">AMOLED</string>
    <string name="webview">Веб-просмотр</string>
    <string name="explicit">Возрастное ограничение</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="scroll_bar">Полоса прокрутки</string>
    <string name="colors">Цвета</string>
    <string name="scroll_bar_summary">Полоса прокрутки сбоку для более быстрого доступа (может работать с ошибками)</string>
    <string name="currently_playing">Сейчас играет</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-sa\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="up_next">पश्चात् आगच्छत्</string>
    <string name="cache_playlist_warning">प्रयोगात्मकं वैशिष्ट्यम्श्र वणं विना अन्यत् किमपि न समर्थितम्।</string>
    <string name="cancel">रद्द करोतु</string>
    <string name="back">प्रत्यावर्तनम्</string>
    <string name="audio">श्रव्यः</string>
    <string name="songs">गीतानि</string>
    <string name="albums">सङ्गीतसङ्ग्रहः</string>
    <string name="cached_songs">सञ्चितगीतानि</string>
    <string name="artists">कलाकारः</string>
    <string name="duration_filter">अवधि फ़िल्टर</string>
    <string name="duration_filter_summary">मूल्यात् न्यूनावधि(सेकेण्ड्-मात्रेषु) युक्तानि श्रव्यसञ्चिकाः छानन्तु</string>
    <string name="blacklist_folders">कालीसूची पुट</string>
    <string name="blacklist_folders_summary">पुस्तकालयात् बहिष्कृत्य पुटं</string>
    <string name="blacklist_folder_keywords">अवरोध-सूची फोल्डर-कुंजिकाशब्दः</string>
    <string name="login">लॉगिनः</string>
    <string name="view">द्रष्टुम्</string>
    <string name="extension_out_of_date">कालातीतम्</string>
    <string name="no_internet">कोऽपि जालम् नास्ति</string>
    <string name="str_copy">प्रतिकृतिः</string>
    <string name="extensions">विस्तारः</string>
    <string name="choose_a_color">वर्णं चयनं करोतु</string>
    <string name="random">यदृच्छया</string>
    <string name="add">योजयतु</string>
    <string name="value">मूल्य</string>
    <string name="auto_start_radio">स्वचालितरूपेण रेडियो प्रारम्भः</string>
    <string name="animations_summary">अधिकं रुकावटः? इतः त्यागः साहाय्यम् कर्तुं शक्नोति</string>
    <string name="refresh">नवीकृतं करोतु</string>
    <string name="music">सङ्गीतम्</string>
    <string name="tracker">अनुसृत्यः</string>
    <string name="lyrics">गीतशब्दः</string>
    <string name="no_lyrics">कोऽपि गीतपद्यम् नास्ति</string>
    <string name="sleep_timer">निद्रातिमरः</string>
    <string name="audio_selection">श्रव्यचयनम्</string>
    <string name="video_selection">विडियो चयन</string>
    <string name="subtitle_selection">उपशीर्षकचयनम्</string>
    <string name="share">वितरति</string>
    <string name="save_to_library">पुस्तकालये रक्षतु</string>
    <string name="remove_from_library">पुस्तकालयात् निष्कासयन्तु</string>
    <string name="radio">आकाशवाणी</string>
    <string name="download">अवतारयतु</string>
    <string name="follow">अनुसर</string>
    <string name="unfollow">अनुयायित्वम् त्यज</string>
    <string name="hide">छादय</string>
    <string name="unhide">अप्रच्छादय</string>
    <string name="save_to_playlist">सङ्गीतसूच्याम् सन्धानम्</string>
    <string name="delete_playlist">सङ्गीतसूचिं निष्कासयतु</string>
    <string name="add_to_queue">कतारम् योजय</string>
    <string name="edit_playlist">सङ्गीतसूचिं सम्पादयतु</string>
    <string name="sort">प्रकारं</string>
    <string name="explicit">स्पष्टम्</string>
    <string name="save">सन्धानं करोतु</string>
    <string name="sort_title">शीर्षक</string>
    <string name="sort_date">दिनाङ्कः</string>
    <string name="sort_duration">अवधि</string>
    <string name="sort_subtitle">उपशीर्षक</string>
    <string name="playlist_name">सङ्गीतसूच्याः नाम</string>
    <string name="playlist_description">सङ्गीतसूच्याः विवरणम्</string>
    <string name="create_playlist">प्लेलिस्ट् निर्मितय</string>
    <string name="create">निर्माति</string>
    <string name="playlist_name_empty">सङ्गीतसूच्याः नाम रिक्तं न भवेत्</string>
    <string name="saved_to_playlists">प्लेलिस्ट् मध्ये सुरक्षितम्</string>
    <string name="removing_x">%1$s अपसारयन्</string>
    <string name="merging_x">%1$s संयोजयन्</string>
    <string name="tagging_x">%1$s टङ्कयन्</string>
    <string name="nothing_to_download_in_x">%1$s मध्ये डाउनलोड् कर्तुं किमपि नास्ति</string>
    <string name="download_started">अवतरणं आरब्धम्</string>
    <string name="no_download_extension">कोऽपि डाउनलोड् विस्तारः न प्राप्तः, \"echodown\" इति कोडस्य उपयोगं कुर्वन्तु ।</string>
    <string name="okay">समीचीनम्</string>
    <string name="x_permission_required">%1$s अनुमतिः आवश्यकम्</string>
    <string name="x_was_not_granted">%1$s न प्रदत्तम्</string>
    <string name="audio_permission_summary">ते स्थानीयं सङ्गीतसंग्रहम् अन्वेष्टुम्</string>
    <string name="video">दृश्यम्</string>
    <string name="read_storage">संग्रहणस्य पठन्</string>
    <string name="write_storage">संग्रहणस्य लेखनम्</string>
    <string name="write_storage_permission_summary">स्थानीयसूचिषु निर्माणम् सम्पादनं च कर्तुम्</string>
    <string name="notifications">सूचनाः</string>
    <string name="notifications_permission_summary">आवश्यकानां सञ्चिकानां सङ्गीतस्य च सूचनां दर्शयितुम्</string>
    <string name="remove">अपसारय</string>
    <string name="more_by_x">%1$s इत्यस्मात् अधिकम्</string>
    <string name="x_radio">%1$s रेडियो</string>
    <string name="unified_liked_playlist_summary">तव विभिन्नविस्तारणेभ्यः प्रियाः गानानि</string>
    <string name="n_items">%1$d वस्तूनि</string>
    <string name="playlist_liked">प्रियम्</string>
    <string name="playlist_liked_desc">तव प्रियगानानि</string>
    <string name="repeat_one">एकं पुनरावृत्तिः</string>
    <string name="repeat_off">पुनरावृत्तिः निष्क्रियः</string>
    <string name="repeat_all">सर्वेषां पुनरावृत्तिः</string>
    <string name="logout_and_login">निर्गम्य पुनः प्रविश</string>
    <string name="error_loading_extension_from_x">%1$s इत्यस्मात् विस्तारणं लोड कर्तुं त्रुटिः</string>
    <string name="extension_x_not_found">%1$s विस्तारणं न प्राप्तम्</string>
    <string name="required_extensions_missing_x">आवश्यकाः विस्तारणाः नास्ति: %1$s</string>
    <string name="x_login_required">%1$s प्रवेशः आवश्यकः</string>
    <string name="x_is_not_supported_in_x">%1$s इत्येतत् %2$s मध्ये समर्थितं नास्ति</string>
    <string name="account_session_expired_in_x">%1$s मध्ये खाता सत्रं समाप्तम्</string>
    <string name="error_x">त्रुटिः: %1$s</string>
    <string name="value_not_set">न स्थापितम्</string>
    <string name="x_disabled">%1$s (निष्क्रियः)</string>
    <string name="by_x">%1$s इत्यनेन</string>
    <string name="x_extensions">%1$s विस्तारणानि</string>
    <string name="x_extension">%1$s विस्तारणम्</string>
    <string name="select_x_account">%1$s खाता चिनोतु</string>
    <string name="error_updating_extension">नवीनीकरणे त्रुटिः</string>
    <string name="x_login">%1$s प्रवेशः</string>
    <string name="sleep_timer_cancelled">निद्राकालगणना निरस्तम्</string>
    <string name="search_x">%1$s अन्वेषणम्</string>
    <string name="servers">सेवकाः</string>
    <string name="quality_selection">गुणनिर्वाचनम्</string>
    <string name="quality_x">गुणः %1$d</string>
    <string name="unknown_quality">अज्ञातगुणः</string>
    <string name="so_empty">इत्थं रिक्तम्…</string>
    <string name="sharing_x">%1$s साझीकरणम्</string>
    <string name="x_is_required">%1$sआवश्यकम्</string>
    <string name="saved_x_to_library">%1$s ग्रन्थालये सुरक्षितम्</string>
    <string name="removed_x_from_library">%1$s ग्रन्थालयात् अपासृतम्</string>
    <string name="following_x">%1$s अनुसरन्</string>
    <string name="followed_x">%1$s अनुगतम्</string>
    <string name="unfollowing_x">%1$s अनुसरणं निष्कासयन्</string>
    <string name="unfollowed_x">%1$s अननुगतम्</string>
    <string name="hiding_x">%1$s गूढीकरणम्</string>
    <string name="unhiding_x">%1$s प्रकटयन्</string>
    <string name="liking_x">%1$s प्रियं कुर्वन्</string>
    <string name="liked_x">%1$s प्रियं कृतम्</string>
    <string name="unliking_x">%1$s अप्रियम् कुर्वन्</string>
    <string name="unliked_x">%1$s अप्रियम् कृतम्</string>
    <string name="add_to_next">अनुक्रमे योजय</string>
    <string name="loading_radio_for_x">%1$s इत्यस्मै रेडियो लोड कर्तुम्</string>
    <string name="adding_x_to_queue">%1$s अनुक्रमे योजयन्</string>
    <string name="adding_x_to_next">%1$s परं योजयन्</string>
    <string name="background_gradient">पृष्ठभूमेः आच्छादनवर्णः</string>
    <string name="background_gradient_summary">प्रसङ्गानुसारं पृष्ठभूमेः वर्णच्छायायाः परिवर्तनम्</string>
    <string name="all">सर्वम्</string>
    <string name="more_brain_capacity">अधिकं मस्तिष्कशक्तिः</string>
    <string name="x_plays">%1$s चालनानि</string>
    <string name="x_followers">%1$s अनुयायिनः</string>
    <string name="shuffling_x">%1$s क्रीडनम्</string>
    <string name="copying_the_error">त्रुटिं अनुकुर्वन्</string>
    <string name="sort_and_filter">क्रमयोजनं तथा निस्सरणम्</string>
    <string name="filter">निस्सरणम्</string>
    <string name="reversed">विपरीतम्</string>
    <string name="apply">आयोजय</string>
    <string name="scroll_animations">स्क्रॉल गति दृश्याः</string>
    <string name="scroll_animations_summary">स्क्रॉल करते समय एनीमेशन</string>
    <string name="delete">निराकुरु</string>
    <string name="add_song">गीतं योजय</string>
    <string name="creating_x">%1$s निर्मीयते</string>
    <string name="x_created">%1$s निर्मितम्</string>
    <string name="deleting_x">%1$s नष्टं कुर्वन्</string>
    <string name="deleted_x">%1$s नष्टम्</string>
    <string name="saving_x">%1$s सुरक्षितम्</string>
    <string name="saved_to_x">%1$s मध्ये सुरक्षितम्</string>
    <string name="selected_n">चयनितं %1$d</string>
    <string name="adding_x">%1$s योजयन्</string>
    <string name="moving_x">%1$s सञ्चालयन्</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d घण्टा</item>
        <item quantity="other">%1$d घण्टा:</item>
    </plurals>
    <string name="playing_x">%1$s संचालयामास</string>
    <string name="loading_x">%1s लोड कुर्वन्</string>
    <string name="recently_added">अधुना योजितम्</string>
    <string name="refresh_library_on_reload">पुनः लोड् इत्यत्र पुस्तकालयः ताजगः कुर्वन्तु</string>
    <string name="refresh_library_on_reload_summary">प्रत्येकं फीड् लोड् भवति तदा यन्त्रं स्कैन् कुर्वन्तु</string>
    <string name="blacklist_folder_keywords_summary">निषिद्धफोल्डरार्थपदाः, अल्पविरामं प्रयुञ्जीत</string>
    <string name="saved">रक्षितम्</string>
    <string name="tabs">टब्स्</string>
    <string name="show_tabs">ट्याब्स् दर्शयतु</string>
    <string name="show_tab_summary">विस्तारणस्य वर्गरूपेण ट्याब्स् प्रदर्शयिष्यति</string>
    <string name="unknown">अज्ञात</string>
    <string name="like">इष्टम्</string>
    <string name="unlike">अस्वीकृतं करोतु</string>
    <string name="home">गृहम्</string>
    <string name="search">अन्वेषणम्</string>
    <string name="library">पुस्तकालयः</string>
    <string name="more">अधिक</string>
    <string name="extension">प्रत्यासक्तिः</string>
    <string name="downloading_x">%1$s डाउनलोड् करणम्</string>
    <string name="cancel_all">सर्वं रद्दं कुर्वन्तु</string>
    <string name="download_progress">प्रगतिः डाउनलोड् कुर्वन्तु</string>
    <string name="downloads">अवतरणानि</string>
    <string name="downloaded_x">%1$s डाउनलोड् कृतम्</string>
    <string name="loading">लोड् कुर्वन् अस्ति…</string>
    <string name="settings">सेटिङ्स्</string>
    <string name="playback">पुनः चलाना</string>
    <string name="audio_fx">श्रव्य प्रभाव</string>
    <string name="audio_fx_summary">सर्वेषां गीतानां कृते प्रभावाः प्रयुक्ताः</string>
    <string name="audio_fx_desc">वर्तमानस्य पटलस्य कृते श्रव्यप्रभावं परिवर्तयन्तु ।</string>
    <string name="reset">पुनः सेट् करें</string>
    <string name="playback_speed">पुनरावृत्ति गती</string>
    <string name="change_pitch_with_speed">वेगेन सह पिच परिवर्तयन्तु</string>
    <string name="bass_boost">बास बूस्ट</string>
    <string name="bass_boost_desc">बृहत्तरं मूल्यं ध्वनिं विकृतं कर्तुं शक्नोति।</string>
    <string name="change_pitch_with_speed_desc">तत् मन्दगतिध्वनिं प्राप्नुत</string>
    <string name="equalizer">इक्वलाइज़रः</string>
    <string name="equalizer_summary">उपकरणस्य इक्वालाइजर् विकल्पान् उद्घाटयतु</string>
    <string name="stream_quality">प्रवाहस्य गुणवत्ता</string>
    <string name="stream_quality_summary">स्रावस्य पूर्वनिर्धारितगुणवत्तां चयनयतु</string>
    <string name="behavior">आचारः</string>
    <string name="keep_queue">संगीतपङ्क्तिं धारयतु</string>
    <string name="keep_queue_summary">यदा अनुप्रयोगः पुनः उद्घाटयति, तदा संगीतपङ्क्तिं पुनः प्राप्तुं।</string>
    <string name="stop_player">सङ्गीतकः रोधयतु</string>
    <string name="stop_player_summary">यदा ऍप्प् हाल ही में निवारणं कृतम्, प्लेयरम् स्थगय</string>
    <string name="skip_silence">मौनं लङ्घयतु</string>
    <string name="skip_silence_summary">गीतस्य मौनभागं तिरस्कुरु, निरन्तरप्रवहपठनाय।</string>
    <string name="auto_start_radio_summary">प्लेलिस्ट् मध्ये ट्रैकस्य सम्बन्धित गीतानि स्वयमेव योजयेत्, अनन्तम् कतारम् करणाय</string>
    <string name="cache_size">सङ्ग्राहक परिमाण</string>
    <string name="cache_size_summary">श्रव्यं विडियो च संग्रहणार्थं MB मध्ये आकारः</string>
    <string name="version">संस्करणम्</string>
    <string name="system">प्रणाली</string>
    <string name="install">स्थापय</string>
    <string name="app">अनुप्रयोगः</string>
    <string name="file">सञ्चिका</string>
    <string name="installation_type">संस्थापनप्रकारः</string>
    <string name="installation_type_summary">अनुप्रयोगस्य संस्थापनं निम्नलिखितान् सम्पर्कान् प्रतिध्वन्यां उद्घाटनं अनुमन्यते:</string>
    <string name="installation_type_warning">यदि त्वं विस्तारणं फाइलरूपेण स्थापयसि तदा उपलब्धं न भविष्यति।</string>
    <string name="could_not_find_the_file">सञ्चिका न प्राप्ता।</string>
    <string name="extension_installer">संस्थापकः</string>
    <string name="extension_installed_successfully">विस्तारः सफलतया संस्थापितः।</string>
    <string name="extension_uninstalled_successfully">विस्तारः सफलतया अपाकृतः।</string>
    <string name="allow_opening_links">सम्पर्कान् उद्घाटनं अनुमन्यताम्</string>
    <string name="open_links_instruction">एतानि लिङ्कानि उद्घाटयितुं अनुमतिं दातुं भवद्भिः आवश्यकं यत् :\n- अधः स्क्रॉल कृत्वा \"Open by Default\" इत्यत्र क्लिक् कुर्वन्तु ।\n- \"+ Add Link\" इत्यत्र क्लिक् कुर्वन्तु</string>
    <string name="extension_updated_successfully">%1$s यथावत् सफलतया अद्यतनं कृतम्</string>
    <string name="link">सूत्रम्</string>
    <string name="link_or_code">सूत्रं वा कोड</string>
    <string name="list_is_empty">सूची रिक्तम् अस्ति</string>
    <string name="extension_installed">%1$s (स्थापितम्)</string>
    <string name="add_extensions">विस्तारकान् योजयतु</string>
    <string name="invalid_extension_list">अमङ्गल-प्रायः विस्तारक-सूची</string>
    <string name="look_and_feel">दर्शनम् एवं अनुभूति</string>
    <string name="ui">यूआई</string>
    <string name="theme">थीमः</string>
    <string name="theme_summary">अन्धकारम् इच्छसि?</string>
    <string name="custom_theme_color">स्वरूपस्य वर्णः</string>
    <string name="custom_theme_color_summary">प्रणालीयस्य स्थाने स्वकीयं विषयवर्णं उपयोगयतु।</string>
    <string name="add_color">वर्णं योजयतु</string>
    <string name="custom_colors">स्वयं रूपित वर्णः</string>
    <string name="amoled">अमोल्ड्</string>
    <string name="amoled_summary">अतीतः कृष्ण, शुद्धकृष्ण</string>
    <string name="navbar_gradient">आभासं नेवबार</string>
    <string name="navbar_gradient_summary">नेवबार शनैः पारदर्शं भवति</string>
    <string name="dynamic_player">डायनामिक प्लेयर वर्णः</string>
    <string name="dynamic_player_summary">ट्रैक् आर्टवर्क् आधारय प्लेयरस्य वर्णः योजय</string>
    <string name="show_background">पृष्ठभूमिं दर्शयतु</string>
    <string name="show_background_summary">प्लेयरमध्ये ट्रैकस्य पृष्ठभूमिः विडियो वा धुन्धला कलाकृतिः</string>
    <string name="animation">एनिमेशनम्</string>
    <string name="animations">एनिमेशनानि</string>
    <string name="misc">विविधम्</string>
    <string name="enabled">समर्थितम्</string>
    <string name="disabled">असमर्थितम्</string>
    <string name="no_user_found">कोऽपि उपयोगकर्त्ता न लब्धः</string>
    <string name="add_extension">विस्तारम् योजय</string>
    <string name="webview">वेबव्यू</string>
    <string name="logout">लॉग आउट्</string>
    <string name="switch_account">खाता परिवर्तय</string>
    <string name="incognito">अज्ञातं मोड</string>
    <string name="not_logged_in">लॉग इनः न अस्ति</string>
    <string name="playing_from">अत्र क्रीडायते</string>
    <string name="info">सूचना</string>
    <string name="seekbar">सीकबारः</string>
    <string name="shuffle">मिश्रणम्</string>
    <string name="previous">पूर्वम्</string>
    <string name="play">चलय</string>
    <string name="next">अनन्तरम्</string>
    <string name="repeat">पुनरावृत्तिः</string>
    <string name="close">अवगुण्ठय</string>
    <string name="end_of_track">पथस्य समाप्तिः</string>
    <string name="_15min">१५मि</string>
    <string name="_30min">३०मी</string>
    <string name="_45min">४५मी</string>
    <string name="_1hr">१घं</string>
    <string name="_2hr">२घं</string>
    <string name="sleep_timer_desc">निश्चितसमयानन्तरं प्लेबैकं स्थगयितुं निद्रासमयनिर्धारकं सेट् कुर्वन्तु</string>
    <string name="sleep_on_specific_time">विशिष्टसमये निद्रां कुर्वन्तु</string>
    <string name="sleep_timer_set_for">%1$s कृते निद्रासमयनिर्धारकः सेट् कृतः</string>
    <plurals name="number_min">
        <item quantity="one">%1$d निमेष:</item>
        <item quantity="other">%1$d निमेषाः</item>
    </plurals>
    <string name="sources">स्रोताः</string>
    <string name="backgrounds">पृष्ठभूमयः</string>
    <string name="subtitles">उपशीर्षकानि</string>
    <string name="off">दूरे</string>
    <string name="not_loading">लोड् न कुर्वन् अस्ति</string>
    <string name="more_brain_capacity_summary">इदं सक्रियं कृत्वा, श्रवणविलम्बं सम्यक् कर्तुं तथा बैटरी उपयोगं वर्धयितुं शक्यते (श्रवणस्थानान्तरणं निष्क्रियं करोत)।</string>
    <string name="downloading_update_for_x">%1$s कृते अद्यतनं डाउनलोड् करणम्</string>
    <string name="apply_player_color_to_app">सङ्गीतक्रीडकवर्णं सर्वे अनुप्रयोगे योजयतु</string>
    <string name="apply_player_color_to_app_summary">विलम्ब-सूचना!!!</string>
    <string name="download_complete">डाउनलोड सम्पूर्ण</string>
    <string name="delete_download">डाउनलोड् विलोपयन्तु</string>
    <string name="removed_x_from_downloads">डाउनलोड्स तः %1$s निष्कासितम्</string>
    <string name="app_widget_description">Echo गृहपृष्ठे दृश्यताम्!</string>
    <string name="feed">सञ्चिका</string>
    <string name="item">वस्तवः</string>
    <plurals name="number_items">
        <item quantity="one">%1$d वस्तवः</item>
        <item quantity="other">%1$d वस्तूनि</item>
    </plurals>
    <string name="x_specific_quality_summary">%1$s विशेषस्रावगुणवत्ता, पूर्वनिर्धारितस्रावगुणवत्ता चयनं अतिक्रमिष्यति</string>
    <string name="unmetered_stream_quality">अमितस्रावगुणवत्ता</string>
    <string name="unmetered_stream_quality_summary">यदा अमितजालसन्निवेशनम् अस्ति तदा स्रावस्य गुणवत्ता। एतत् पूर्वनिर्धारितस्रावगुणवत्तां अतिक्रमिष्यति।</string>
    <string name="select_language">भाषां चयनयतु</string>
    <string name="check_for_updates">अद्यतनानां परीक्षणं कुरु</string>
    <string name="check_for_updates_summary">एप् तथा विस्तारणयोः नवीन अद्यतनानां परीक्षणं कुरु यदा एप् उद्घाटयसे।</string>
    <string name="checking_for_updates">अद्यतनानां परीक्षणं क्रियते</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d गीतः</item>
        <item quantity="other">%1$d गीतानि</item>
    </plurals>
    <string name="back_animations">पृष्ठपृष्ठगतिः</string>
    <string name="back_animations_summary">एतत् अण्ड्रॉइड् कारणेन दृश्यदोषं जनयितुं शक्नोति, किन्तु त्वं केवलं “recents” उद्घाट्य तं सुधारयितुं शक्नोषि।</string>
    <string name="regex_invalid">%1$s अमान्यः अस्ति, कृपया regex अनुसर: %2$s</string>
    <string name="n_hours">%1$d घण्टाः</string>
    <string name="n_minutes">%1$d निमेषाः</string>
    <string name="hidden_x">गुप्तः %1$s</string>
    <string name="unhidden_x">अगुप्तः %1$s</string>
    <string name="track">अनुगमनम्</string>
    <string name="tracks">अनुगमनानि</string>
    <string name="n_songs">%1$d गीतानि</string>
    <string name="n_episodes">%1$d प्रकरणानि</string>
    <string name="n_chapters">%1$d अध्यायाः</string>
    <string name="n_tracks">%1$d पथाः</string>
    <plurals name="number_episodes">
        <item quantity="one">%1$d प्रकरणम्</item>
        <item quantity="other">%1$d प्रकरणानि</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d अध्यायः</item>
        <item quantity="other">%1$d अध्यायाः</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d अनुगमनम्</item>
        <item quantity="other">%1$d अनुगमनानि</item>
    </plurals>
    <string name="unsave">असङ्ग्रहीतं</string>
    <string name="sort_date_added">संयुक्ततारीख्</string>
    <string name="opening_webview_x">वेब्व्यू उद्घाट्यते: %1$s</string>
    <string name="no_update_available_for_x">%1$s कृते कोऽपि अद्यतनं उपलब्धं नास्ति</string>
    <string name="other">अन्यः</string>
    <string name="player">वादकः</string>
    <string name="about">सम्बन्धि</string>
    <string name="language_x">भाषा: %1$s</string>
    <string name="guide">मार्गदर्शनम्</string>
    <string name="donate">दानं</string>
    <string name="contributors">योगदानकर्तारः</string>
    <string name="app_desc">साधारणः संगीतवादकः एव।</string>
    <string name="manage">व्यवस्थापयतु</string>
    <string name="no_account">कोऽपि खाता न अस्ति</string>
    <string name="other_settings">अन्यः विन्यासाः</string>
    <string name="no_x_found">%1$s किमपि न लब्धम्</string>
    <string name="playlist">संग्रहसूची</string>
    <string name="album">संग्रहः</string>
    <string name="colors">वर्णाः</string>
    <string name="scroll_bar">सरणिपट्टिका</string>
    <string name="scroll_bar_summary">पार्श्वे शीघ्रगमनाय सरणिपट्टिका (दोषयुक्ता स्यात्)</string>
    <string name="pre_release">पूर्वमुक्तिः</string>
    <string name="single">एककः</string>
    <string name="ep">EP</string>
    <string name="lp">LP</string>
    <string name="compilation">संकलनम्</string>
    <string name="show">प्रदर्शनम्</string>
    <string name="book">पुस्तकम्</string>
    <string name="song">गीतम्</string>
    <string name="podcast">श्रव्यवार्ता</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="genres_x">प्रकाराः: %1$s</string>
    <string name="disc_number_n">फलकसंख्या: %1$d</string>
    <string name="album_order_n">आलबमक्रमसंख्या: %1$d</string>
    <string name="confirmation">प्रमाणनम्</string>
    <string name="delete_playlist_confirmation">किं भवान् निश्चिन्तः यत् %1$s विलोपयितुम् इच्छति?</string>
    <string name="confirm">निश्चययतु</string>
    <string name="big_cover">विस्तीर्णावरणानि</string>
    <string name="big_cover_summary">विशालपर्दयुक्तयानानाम् उपयुक्तम्</string>
    <string name="no_last_played_track_found">न अन्तिमः क्रीडितः पथः प्राप्तः।</string>
    <string name="not_yet_released">अद्यापि न मुक्तम्</string>
    <string name="releases_on_x">%1$s इत्यस्मिन् दिने प्रकाश्यते</string>
    <string name="unavailable_in_your_region">भवतः प्रदेशे अनुपलब्धम्</string>
    <string name="not_playable_x">न क्रीडनीयम्: %1$s</string>
    <string name="currently_playing">सम्प्रति क्रीडति</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-si\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">හරි</string>
    <string name="cancel">අත හරින්න</string>
    <string name="back">ආපසු</string>
    <string name="x_permission_required">%1$s අවසරය අවශ්‍යයි</string>
    <string name="x_was_not_granted">%1$s අවසර නැත</string>
    <string name="audio">ශ්‍රව්‍ය</string>
    <string name="audio_permission_summary">ඔබගේ පෙදෙස් සංගීත පුස්තකාල පිවිසීමට</string>
    <string name="read_storage">ආචයනය කියවීම</string>
    <string name="write_storage">ආචයනය ලිවීම</string>
    <string name="write_storage_permission_summary">පෙදෙස් ධාවන ලැයිස්තු සෑදීම සහ සංස්කාරණයට</string>
    <string name="notifications">නිවේදන</string>
    <string name="feed">පෝෂණය</string>
    <string name="notifications_permission_summary">බාගත හා ගීත සඳහා නිවේදන පෙන්වීමට</string>
    <string name="remove">ඉවතලන්න</string>
    <string name="more_by_x">තව %1$sගෙන්</string>
    <string name="songs">සිංදු</string>
    <string name="albums">ඇල්බම</string>
    <string name="x_radio">%1$s රේඩියෝව</string>
    <string name="cached_songs">වාරක සිංදු</string>
    <string name="cache_playlist_warning">පරීක්ෂණාත්මක අංගයකි. සවන්දීම හැර වෙන සහයක් නැත.</string>
    <string name="artists">ශිල්පීන්</string>
    <string name="recently_added">මෑතකදී එකතු කල</string>
    <string name="refresh_library_on_reload">නැවත පිරුමේදී නැවුම් කරන්න</string>
    <string name="refresh_library_on_reload_summary">පෝෂණය වන විට සුපිරික්සනය කරන්න</string>
    <string name="duration_filter">ගතවූ කාල පෙරනය</string>
    <string name="duration_filter_summary">ශ්‍රව්‍ය ගොනු ගතවූ කාලය(තත්පර) ට අඩු අගයන් පෙරා ඉවත් කරන්න</string>
    <string name="blacklist_folders">අසාදු ලේඛන ගොනු කාණ්ඩය</string>
    <string name="blacklist_folders_summary">පුස්තකාලයෙන් ඉවත් කලයුතු ගොනු කාණ්ඩ</string>
    <string name="blacklist_folder_keywords">අසාදු ලේඛිත ගොනු කාණ්ඩ මූලපද</string>
    <string name="blacklist_folder_keywords_summary">මූලපද කොමාවෙන් වෙන් කරන්න</string>
    <string name="saved">සුරකින ලදී</string>
    <string name="tabs">තීරුව</string>
    <string name="show_tabs">තීරු පෙන්වන්න</string>
    <string name="show_tab_summary">තීරු දිගුවන් ප්‍රවර්ග ලෙස දක්වනු ඇත</string>
    <string name="unified_liked_playlist_summary">ඔබේ කැමති පථයන් විවිධ දිගුවලින්</string>
    <string name="n_items">අයිතම %1$d</string>
    <string name="item">අයිතමය</string>
    <plurals name="number_items">
        <item quantity="one">අයිතමය %1$d</item>
        <item quantity="other">අයිතම %1$d</item>
    </plurals>
    <string name="playlist_liked">කැමති</string>
    <string name="playlist_liked_desc">ඔබේ කැමති පථ</string>
    <string name="unknown">නොදනී</string>
    <string name="like">කැමැත්ත</string>
    <string name="unlike">අකමැත්ත</string>
    <string name="repeat_one">එක්වරක්</string>
    <string name="repeat_off">නැවත එපා</string>
    <string name="repeat_all">සියල්ල නැවත</string>
    <string name="home">නිවස</string>
    <string name="search">සොයන්න</string>
    <string name="library">පුස්තකාලය</string>
    <string name="more">තව</string>
    <string name="extension">දිගුව</string>
    <string name="downloading_x">%1$s බාගත වෙමින්</string>
    <string name="cancel_all">සියල්ල අවලංගු කරන්න</string>
    <string name="download_progress">බාගතවෙමින්</string>
    <string name="downloads">බාගත</string>
    <string name="downloaded_x">%1$s බාගතවිය</string>
    <string name="logout_and_login">වරනය සහ පූරනය</string>
    <string name="login">පුරනය</string>
    <string name="view">බලන්න</string>
    <string name="extension_out_of_date">කල් පැන ඇත</string>
    <string name="no_internet">අන්තර්ජාලය නොමැත</string>
    <string name="error_loading_extension_from_x">දිගුව ගැනීමේ දෝෂයක් %1$s සිට</string>
    <string name="extension_x_not_found">%1$s දිගුව හමුවූයේ නැත</string>
    <string name="required_extensions_missing_x">අවශ්‍ය දිගුව නොමැත: %1$s</string>
    <string name="x_login_required">%1$s පුරනය වීම අවශ්‍යයි</string>
    <string name="x_is_not_supported_in_x">%1$s, %2$sන් සහය නොදක්වයි</string>
    <string name="account_session_expired_in_x">ගිණුම් සැසිය තව %1$sන් අවසන්වෙ</string>
    <string name="error_x">දෝෂය: %1$s</string>
    <string name="str_copy">පිටපත් කරන්න</string>
    <string name="extensions">දිගු</string>
    <string name="choose_a_color">වර්ණයක් තෝරන්න</string>
    <string name="random">අහඹු</string>
    <string name="add">එකතු කරන්න</string>
    <string name="loading">පටවමින්…</string>
    <string name="settings">සැකසුම්</string>
    <string name="value">අගය</string>
    <string name="value_not_set">පිහිටුවා නොමැත</string>
    <string name="playback">පිළිවැයුම</string>
    <string name="audio_fx">ශ්‍රව්‍ය ආචරණ</string>
    <string name="audio_fx_summary">සියලූම සිංදු සඳහා ආචරණ යොදා ඇත</string>
    <string name="audio_fx_desc">තත් පථය සඳහා ශ්‍රව්‍ය ආචරණය මාරු කරන්න.</string>
    <string name="reset">නැවත පිහිටුවීම</string>
    <string name="playback_speed">පිළිවැයුම් වේගය</string>
    <string name="change_pitch_with_speed">වේගය සමග තාරතාව වෙනස් කරන්න</string>
    <string name="bass_boost">මඳුරුස්වරය උත්තේජනය කරන්න</string>
    <string name="bass_boost_desc">අධි අගයන් ශබ්දය විකෘති කල හැක.</string>
    <string name="change_pitch_with_speed_desc">එම මද-ගාමී ශබ්දය ගන්න</string>
    <string name="equalizer">සමකාරකය</string>
    <string name="equalizer_summary">උපාංග සමකාරක සැකසුම් විවෘත කරන්න</string>
    <string name="stream_quality">ප්‍රවාහ තත්වය</string>
    <string name="stream_quality_summary">පෙරනිම් ප්‍රවාහ තත්වය තෝරන්න</string>
    <string name="x_specific_quality_summary">%1$s සුවිශේෂ ප්‍රවාහ තත්වය, පෙරනිම් ප්‍රවාහ තත්වය අහිබවනු ඇත</string>
    <string name="unmetered_stream_quality">නොමැනූ ප්‍රවාහ තත්වය</string>
    <string name="unmetered_stream_quality_summary">නොමැනූ ජාලයකට සම්බන්ධ වූ විට ප්‍රවාහ තත්වය. මෙය පෙරනිම් ප්‍රවාහ තත්වය අභිබවයි.</string>
    <string name="behavior">හැසිරීම</string>
    <string name="keep_queue">ධාවක පෙළ තබා ගන්න</string>
    <string name="keep_queue_summary">නැවත යෙදුම විවෘත කලවිට, ධාවක පෙළ නැවත ලබාගන්න.</string>
    <string name="stop_player">ධාවකය නවතන්න</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-sk\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="cancel">Zrušiť</string>
    <string name="back">Späť</string>
    <string name="albums">Albumy</string>
    <string name="saved">Uložené</string>
    <string name="playlist_liked_desc">Tvoje obľúbené skladby</string>
    <string name="unknown">Neznámy</string>
    <string name="home">Domov</string>
    <string name="search">Hľadať</string>
    <string name="library">Knižnica</string>
    <string name="more">Viac</string>
    <string name="extension">Rozšírenie</string>
    <string name="downloading_x">Sťahuje sa %1$s</string>
    <string name="cancel_all">Zrušiť všetko</string>
    <string name="download_progress">Priebeh sťahovania</string>
    <string name="downloads">Stiahnuté</string>
    <string name="downloaded_x">Stiahnuté %1$s</string>
    <string name="logout_and_login">Odhlásiť a Prihlásiť sa</string>
    <string name="login">Prihlásiť sa</string>
    <string name="view">Zobraziť</string>
    <string name="extension_out_of_date">Neaktuálne</string>
    <string name="no_internet">Bez Internetu</string>
    <string name="error_loading_extension_from_x">Problém načítavania rozšírenia z %1$s</string>
    <string name="extension_x_not_found">Rozšírenie %1$s nebolo nájdené</string>
    <string name="required_extensions_missing_x">Potrebné rozšírenia chýbajú: %1$s</string>
    <string name="x_login_required">Je potrebné %1$s prihlásenie</string>
    <string name="x_is_not_supported_in_x">%1$s není podporované v %2$s</string>
    <string name="error_x">Chyba: %1$s</string>
    <string name="str_copy">Kopírovať</string>
    <string name="extensions">Rozšírenia</string>
    <string name="choose_a_color">Vybrať farbu</string>
    <string name="random">Náhodné</string>
    <string name="add">Pridať</string>
    <string name="loading">Načítava sa…</string>
    <string name="settings">Nastavenia</string>
    <string name="value">Hodnota</string>
    <string name="value_not_set">Nenastavené</string>
    <string name="playback">Prehrávanie</string>
    <string name="audio_fx">Efekty zvuku</string>
    <string name="audio_fx_summary">Efekty použité na všetky skladby</string>
    <string name="audio_fx_desc">Zmente efekty zvuku pre aktuálnu skladbu.</string>
    <string name="reset">Resetovať</string>
    <string name="playback_speed">Rýchlosť prehrávania</string>
    <string name="change_pitch_with_speed">Meniť výšky tónu s rýchlosťou</string>
    <string name="bass_boost">Zvýraznenie basov</string>
    <string name="bass_boost_desc">Väčšia hodnota môže skresliť zvuk.</string>
    <string name="change_pitch_with_speed_desc">Dostante ten spomalený zvuk</string>
    <string name="equalizer">Ekvalizér</string>
    <string name="equalizer_summary">Otvoriť nastavenia ekvalizéru zariadenia</string>
    <string name="stream_quality">Kvalita Streamu</string>
    <string name="stream_quality_summary">Vybrať predvolenú kvalitu streamu</string>
    <string name="x_specific_quality_summary">%1$s špecifická kvallita streamu, toto prepíše predvolenú kvalitu streamu</string>
    <string name="unmetered_stream_quality">Nemeraná Kvalita Streamu</string>
    <string name="unmetered_stream_quality_summary">Kvalita streamu, keď ste pripojený na nemeranú sieť. Toto prepíše predvolenú kvalitu streamu.</string>
    <string name="behavior">Správanie</string>
    <string name="keep_queue">Ponechať Zoznam Prehrávača</string>
    <string name="keep_queue_summary">Obnoviť zoznam prehrávača, keď znovu otvoríte aplikáciu.</string>
    <string name="stop_player">Zastaviť prehrávanie</string>
    <string name="stop_player_summary">Zastaviť prehrávanie, keď je aplikácia vymazaná z nedávnych</string>
    <string name="skip_silence">Preskočiť Ticho</string>
    <string name="skip_silence_summary">Preskočiť tichú časť v skladbe, na poskytnutie bezmedzerového prehrávania.</string>
    <string name="auto_start_radio">Automaticky Začať Rádio</string>
    <string name="auto_start_radio_summary">Automaticky pridať súvisiace skladby do zoznamu prehrávača pre nekonečné prehrávanie</string>
    <string name="cache_size">Velkosť vyrovnávacej pamäte</string>
    <string name="cache_size_summary">Velkosť v MB na ukladanie audia a videa do vyrovnávacej pamäte</string>
    <string name="version">Verzia</string>
    <string name="select_language">Vybrať Jazyk</string>
    <string name="system">Systém</string>
    <string name="check_for_updates">Kontrola Aktualizácií</string>
    <string name="check_for_updates_summary">Hľadať nové aktualizácie aplikácie a rozšírení, keď otvoríte aplikáciu.</string>
    <string name="install">Inštalovať</string>
    <string name="app">Aplikácia</string>
    <string name="file">Súbor</string>
    <string name="installation_type">Typ Inštalácie</string>
    <string name="okay">Potvrdiť</string>
    <string name="feed">Pre teba</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-sr\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">Ok</string>
    <string name="cancel">Otkaži</string>
    <string name="back">Nazad</string>
    <string name="x_permission_required">%1$s Potrebna je dozvola</string>
    <string name="x_was_not_granted">%1$s nije dozvoljena</string>
    <string name="audio">Audio</string>
    <string name="audio_permission_summary">Da bi ste pristupili muzici sačuvanoj lokalno na uređaju</string>
    <string name="read_storage">Čitanje memorije</string>
    <string name="write_storage">Pisanje u memoriju</string>
    <string name="write_storage_permission_summary">Da kreirate i uređujete lokalne plejliste</string>
    <string name="notifications">Notifikacije</string>
    <string name="notifications_permission_summary">Prikaži notifikacije za preuzimanja i za muziku</string>
    <string name="remove">Ukloni</string>
    <string name="more_by_x">Više od %1$s</string>
    <string name="songs">Pesme</string>
    <string name="albums">Albumi</string>
    <string name="x_radio">%1$s Radio</string>
    <string name="cached_songs">Pesme u kešu</string>
    <string name="cache_playlist_warning">Eksperimentalna funkcija. Sve osim slušanja nije podržano.</string>
    <string name="artists">Izvođači</string>
    <string name="recently_added">Nedavno dodato</string>
    <string name="refresh_library_on_reload">Osveži biblioteku na pokretanju</string>
    <string name="refresh_library_on_reload_summary">Skeniraj uređaj savki put kada se feed učita</string>
    <string name="duration_filter">Filter trajanja</string>
    <string name="duration_filter_summary">Filtriraj audio datoteke sa trajanjem (u sekundama) manjim od vrednosti</string>
    <string name="blacklist_folders">Zabrani foldere</string>
    <string name="blacklist_folders_summary">Folderi koje treba izostaviti iz biblioteke</string>
    <string name="blacklist_folder_keywords">Zabrani foldere sa ključnim rečima</string>
    <string name="blacklist_folder_keywords_summary">Ključne reči za crnu listu foldera, koristite zarez za razdvajanje</string>
    <string name="saved">Sačuvano</string>
    <string name="tabs">Kartice</string>
    <string name="show_tabs">Prikaži kartice</string>
    <string name="show_tab_summary">pokazaće kartice ekstenzija kao kategoriju</string>
    <string name="unified_liked_playlist_summary">Numere koje ste voleli sa različitih ekstenzija</string>
    <string name="n_items">%1$d Stavke</string>
    <string name="item">Stavka</string>
    <string name="playlist_liked">Sviđa mi se</string>
    <string name="playlist_liked_desc">Pesme koje ti se sviđaju</string>
    <string name="unknown">Nepoznato</string>
    <string name="like">Sviđanje</string>
    <string name="unlike">Ne sviđa mi se</string>
    <string name="repeat_one">Ponovi jednom</string>
    <string name="repeat_off">Ponavljanje isključeno</string>
    <string name="repeat_all">Ponavljaj sve</string>
    <string name="home">Početna</string>
    <string name="search">Pretraga</string>
    <string name="library">Biblioteka</string>
    <string name="more">Više</string>
    <string name="extension">Ekstenzija</string>
    <string name="downloading_x">Preuzimanje %1$s</string>
    <string name="cancel_all">Otkaži sve</string>
    <string name="download_progress">Procenat preuzimanja</string>
    <string name="downloads">Preuzimanja</string>
    <string name="downloaded_x">Preuzeto %1$s</string>
    <string name="logout_and_login">Prijava i odjava</string>
    <string name="login">Prijava</string>
    <string name="view">Pregled</string>
    <string name="extension_out_of_date">Zastarelo</string>
    <string name="no_internet">Nema internet konekcije</string>
    <string name="error_loading_extension_from_x">Greška prilikom učitavanja ekstenzije od %1$s</string>
    <string name="extension_x_not_found">Ekstenzija %1$s nije pronađena</string>
    <string name="required_extensions_missing_x">Potrebna ekstenzija nije pronađena: %1$s</string>
    <string name="x_login_required">%1$s prijava je potrebna</string>
    <string name="x_is_not_supported_in_x">%1$s nije podržana u%2$s</string>
    <string name="account_session_expired_in_x">Sesija naloga je istekla u %1$s</string>
    <string name="error_x">Greška: %1$s</string>
    <string name="str_copy">Kopiraj</string>
    <string name="extensions">Ekstenzije</string>
    <string name="choose_a_color">Izaberi boju</string>
    <string name="random">Nasumično</string>
    <string name="add">Dodaj</string>
    <string name="loading">Učitavanje…</string>
    <string name="settings">Podešavanja</string>
    <string name="value">Vrednost</string>
    <string name="value_not_set">Nije podešeno</string>
    <string name="playback">Reprodukcija</string>
    <string name="audio_fx">Audio efekti</string>
    <string name="audio_fx_summary">Efekti primenjeni na sve pesme</string>
    <string name="audio_fx_desc">Promeni audio efekte na trenutnoj pesmi.</string>
    <string name="reset">Resetuj</string>
    <string name="playback_speed">Brzina reprodukcije</string>
    <string name="change_pitch_with_speed">Promeni pitch sa brzinom</string>
    <string name="bass_boost_desc">Veća vrednost može poremetiti zvuk.</string>
    <string name="stream_quality">Kvalitet strima</string>
    <string name="stream_quality_summary">Izaberi podrazumevani kvalitet strima</string>
    <string name="x_specific_quality_summary">%1$s kvalitet strima, koristiće se umesto podrazumevanog kvaliteta strima</string>
    <string name="unmetered_stream_quality">Neograničen kvalitet strima</string>
    <string name="unmetered_stream_quality_summary">Kvalitet strima kada je povezan na mrežu bez ograničenja. Ovo će poništiti podrazumevani kvalitet strima.</string>
    <string name="behavior">Ponašanje</string>
    <string name="keep_queue">Zadrži red plejera</string>
    <string name="keep_queue_summary">Oporavite redosled kada ponovo otvorite aplikaciju.</string>
    <string name="stop_player">Zaustavi plejer</string>
    <string name="stop_player_summary">Zaustavi plejer kada se aplikacija ukloni iz nedavnih aplikacija</string>
    <string name="skip_silence">Preskoči tišinu</string>
    <string name="skip_silence_summary">Preskočite nemi deo pesme da biste obezbedili reprodukciju bez pauza.</string>
    <string name="auto_start_radio">Automatski Pokreni Radio</string>
    <string name="auto_start_radio_summary">Automatski dodajte povezane pesme na listu pesama, da biste imali beskonačan red</string>
    <string name="cache_size">Veličina keša</string>
    <string name="cache_size_summary">Veličina u MB za keš memoriju audio i video snimaka</string>
    <string name="version">Verzija</string>
    <string name="select_language">Izaberi jezik</string>
    <string name="system">Sistem</string>
    <string name="check_for_updates">Proveri ažuriranja</string>
    <string name="check_for_updates_summary">Proveri postoje li nova ažuriranja za aplikaciju i ekstenzije kada se aplikacija pokrene.</string>
    <string name="install">Instaliraj</string>
    <string name="app">Aplikacija</string>
    <string name="file">Fajl</string>
    <string name="installation_type">Tip instalacije</string>
    <string name="installation_type_summary">Instalacija aplikacije će dozvoliti da se sledeći linkovi otvore u Echo:</string>
    <string name="installation_type_warning">Nedostupno ako se instalira ekstenzija kao fajl.</string>
    <string name="could_not_find_the_file">Nije moguće pronaći fajl.</string>
    <string name="extension_installer">Instaler ekstenzija</string>
    <string name="extension_installed_successfully">Ekstenzija uspešno instalirana.</string>
    <string name="extension_uninstalled_successfully">Ekstenzija uspešno obrisana.</string>
    <string name="allow_opening_links">Dozvoli otvaranje linkova</string>
    <string name="downloading_update_for_x">Preuzimanje ažuriranja za %1$s</string>
    <string name="extension_updated_successfully">%1$s ažuriran uspešno</string>
    <string name="link">Link</string>
    <string name="link_or_code">Link ili Kod</string>
    <string name="list_is_empty">Lista je prazna</string>
    <string name="extension_installed">%1$s (Instalirano)</string>
    <string name="add_extensions">Dodaj Ekstenzije</string>
    <string name="invalid_extension_list">Nepravilna lista ekstenzija</string>
    <string name="checking_for_updates">Provera da li postoje ažuriranja</string>
    <string name="look_and_feel">Izgled i osećaj</string>
    <string name="ui">UI</string>
    <string name="theme">Tema</string>
    <string name="custom_theme_color">Prozivoljna boja</string>
    <string name="custom_theme_color_summary">Koristi proizvoljnu boju teme umesto sistemskih boja.</string>
    <string name="add_color">Dodaj boju</string>
    <string name="custom_colors">Prozivoljne boje</string>
    <string name="refresh">Osveži</string>
    <string name="x_disabled">%1$s (Onemogućeno)</string>
    <string name="by_x">Od %1$s</string>
    <string name="music">Muzičke</string>
    <string name="misc">Razno</string>
    <string name="x_extension">%1$s Ekstenzija</string>
    <string name="enabled">Omogućeno</string>
    <string name="disabled">Onemogućeno</string>
    <string name="error_updating_extension">Greška pri ažuriranju</string>
    <string name="no_user_found">Nije pronađen korisnik</string>
    <string name="select_x_account">Izaberi %1$s nalog</string>
    <string name="add_extension">Dodaj ekstenziju</string>
    <string name="logout">Odjavi se</string>
    <string name="switch_account">Promeni Nalog</string>
    <string name="incognito">Bez Arhiviranja</string>
    <string name="not_logged_in">Ne prijavljen</string>
    <string name="x_is_required">%1$s je potrebno</string>
    <string name="playing_from">Pušta Se Iz</string>
    <string name="up_next">Sledeće</string>
    <string name="info">Informacije</string>
    <string name="previous">Prethodna</string>
    <string name="next">Sledeća</string>
    <string name="repeat">Ponavljaj</string>
    <string name="close">Zatvori</string>
    <string name="no_lyrics">Bez teksta</string>
    <string name="sleep_timer">Tajmer za spavanje</string>
    <string name="end_of_track">Kraj pesme</string>
    <string name="servers">Serveri</string>
    <string name="sources">Izvori</string>
    <string name="backgrounds">Pozadine</string>
    <string name="subtitles">Titlovi</string>
    <string name="audio_selection">Izbor zvuka</string>
    <string name="video_selection">Izbor Videa</string>
    <string name="subtitle_selection">Izbor Titlova</string>
    <string name="quality_selection">Izbor Kvaliteta</string>
    <string name="quality_x">Kvalitet %1$d</string>
    <string name="off">Isključeno</string>
    <string name="unknown_quality">Nepoznat kvalitet</string>
    <string name="so_empty">Prazno…</string>
    <string name="not_loading">Ne učitava se</string>
    <string name="share">Podeli</string>
    <string name="sharing_x">Deljenje %1$s</string>
    <string name="save_to_library">Sačuvaj u biblioteku</string>
    <string name="remove_from_library">Ukloni iz biblioteke</string>
    <string name="download">Preuzmi</string>
    <string name="follow">Prati</string>
    <string name="unfollow">Prekini prakćenje</string>
    <string name="change_pitch_with_speed_desc">Slow-motion zvuk</string>
    <string name="equalizer">Ekvalajzer</string>
    <string name="equalizer_summary">Otvori ekvalajzer na uređaju</string>
    <string name="open_links_instruction">Da biste omogućili otvaranje ovih linkova, potrebno je da:\n- Pomerite se nadole i kliknete na „Otvori podrazumevano“\n- Kliknite na „+ Dodaj link“</string>
    <string name="theme_summary">Baš želiš da oslepiš?</string>
    <string name="navbar_gradient">Gradijent Navbar</string>
    <string name="navbar_gradient_summary">Navbar polako postaje transparentan</string>
    <string name="dynamic_player">Dinamična Boja Plejera</string>
    <string name="dynamic_player_summary">Primeni boju artwork-a pesme na plejer</string>
    <string name="show_background">Prikaži Pozadinu</string>
    <string name="show_background_summary">Pozadinski video ili zamagljen artwork kao pozadina plejera</string>
    <string name="animation">Animacija</string>
    <string name="back_animations">Animacija za nazad</string>
    <string name="back_animations_summary">Može prouzrokovati vizualni bug, ali se lako rešava otvaranjem recents.</string>
    <string name="animations">Animacije</string>
    <string name="animations_summary">Previše zastajkivanja? Isključivanje ovog podešavanja možda pomogne</string>
    <string name="tracker">Traker</string>
    <string name="lyrics">Tekst</string>
    <string name="x_extensions">%1$s Ekstenzije</string>
    <string name="webview">Webview</string>
    <string name="x_login">%1$s Prijava</string>
    <string name="regex_invalid">%1$s je nevažeće, prati ovo %2$s</string>
    <string name="seekbar">Seekbar</string>
    <string name="play">Pusti</string>
    <string name="_15min">15min</string>
    <string name="_30min">30min</string>
    <string name="_45min">45min</string>
    <string name="_1hr">1h</string>
    <string name="_2hr">2h</string>
    <string name="sleep_timer_desc">Postavi tajmer za spavanje da zaustavi reprodukciju nakon određenog vremena</string>
    <string name="sleep_on_specific_time">Spavanje u specifično vreme</string>
    <string name="sleep_timer_cancelled">Tajmer za spavanje otkazan</string>
    <string name="sleep_timer_set_for">Tajmer za spavanje postavljen za %1$s</string>
    <string name="search_x">Pretraga %1$s</string>
    <string name="n_hours">%1$d Sati</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d Sat</item>
        <item quantity="few">%1$d Sata</item>
        <item quantity="other">%1$d Sati</item>
    </plurals>
    <string name="n_minutes">%1$d minuta</string>
    <plurals name="number_min">
        <item quantity="one">%1$d Minut</item>
        <item quantity="few">%1$d Minuta</item>
        <item quantity="other">%1$d Minuta</item>
    </plurals>
    <string name="saved_x_to_library">Sačuvano%1$s u biblioteku</string>
    <string name="removed_x_from_library">Uklonjeno%1$s iz biblioteke</string>
    <string name="radio">Radio</string>
    <string name="following_x">Praćenje %1$s</string>
    <string name="followed_x">Zapraćen %1$s</string>
    <string name="amoled_summary">Tamno Crna, Skroz Crna</string>
    <string name="unfollowing_x">Otpraćivanje%1$s</string>
    <string name="unfollowed_x">Otpratili ste%1$s</string>
    <string name="liking_x">Sviđa ti se %1$s</string>
    <string name="liked_x">Sviđa mi se%1$s</string>
    <string name="unliking_x">Ne sviđa mi se%1$s</string>
    <string name="unliked_x">Ne sviđa mi se%1$s</string>
    <string name="hiding_x">Sakriveno%1$s</string>
    <string name="unhiding_x">Nije sakriveno%1$s</string>
    <string name="hidden_x">Sakriveno %1$s</string>
    <string name="unhidden_x">Nije više sakriveno%1$s</string>
    <string name="save_to_playlist">Sačuvaj u plejlisti</string>
    <string name="delete_playlist">Izbriši plejlistu</string>
    <string name="add_to_next">Dodaj u sledeće</string>
    <string name="add_to_queue">Dodaj u redosled</string>
    <string name="loading_radio_for_x">Učitavanje radija za %1$s</string>
    <string name="playing_x">Pušta se%1$s</string>
    <string name="adding_x_to_queue">Dodavanje %1$su redosled</string>
    <string name="adding_x_to_next">Dosavanje %1$su sledeće</string>
    <string name="background_gradient">Pozadinski gradijent</string>
    <string name="background_gradient_summary">Gradijent u boji kao pozadina u zavisnosti od sadržaja</string>
    <string name="all">Sve</string>
    <string name="edit_playlist">Izmeni plejlistu</string>
    <string name="more_brain_capacity">Veći kapacitet \"iteligencije\"</string>
    <string name="more_brain_capacity_summary">Isključivanje Audio Offloading funkcije ( Uključivanjem ove funkcije može se smanjiti lag audio zapisa, ali se time povećava potrošnja baterije).</string>
    <string name="track">Traka</string>
    <string name="tracks">Trake</string>
    <string name="sort">Sortiraj</string>
    <string name="explicit">Eksplicitno</string>
    <string name="x_plays">%1$s Pušta</string>
    <string name="x_followers">%1$s Pratilaca</string>
    <string name="n_songs">%1$d Pesama</string>
    <string name="n_episodes">%1$d Epizoda</string>
    <string name="n_chapters">%1$d Poglavlja</string>
    <string name="n_tracks">%1$d Pesama</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d Pesma</item>
        <item quantity="few">%1$d Pesme</item>
        <item quantity="other">%1$d Pesama</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d Epizoda</item>
        <item quantity="few">%1$d Epizode</item>
        <item quantity="other">%1$d Epizoda</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d Poglavlje</item>
        <item quantity="few">%1$d Poglavlja</item>
        <item quantity="other">%1$d Poglavlja</item>
    </plurals>
    <string name="sort_and_filter">Soritraj i Filtriraj</string>
    <string name="filter">Filter</string>
    <string name="reversed">Obrnuto</string>
    <string name="apply">Primeni</string>
    <string name="save">Sačuvaj</string>
    <string name="unsave">Odustani</string>
    <string name="sort_title">Naslov</string>
    <string name="sort_date">Datum</string>
    <string name="sort_date_added">Datum dodavanja</string>
    <string name="sort_duration">Trajanje</string>
    <string name="sort_subtitle">Podnaslov</string>
    <string name="scroll_animations">Animacije skrolovanja</string>
    <string name="scroll_animations_summary">Animacije kada skroluješ</string>
    <string name="delete">Izbriši</string>
    <string name="playlist_name">Naziv Plejliste</string>
    <string name="playlist_description">Opis Plejliste</string>
    <string name="create_playlist">Napravi plejlistu</string>
    <string name="create">Kreiraj</string>
    <string name="add_song">Dodaj Pesmu</string>
    <string name="creating_x">Kreiranje %1$s</string>
    <string name="playlist_name_empty">Naziv plejliste je prazan</string>
    <string name="x_created">%1$s kreirano</string>
    <string name="deleting_x">Brisanje %1$s</string>
    <string name="deleted_x">Izbrisano%1$s</string>
    <string name="loading_x">Učitavanje %1s</string>
    <string name="saving_x">Čuvanje%1$s</string>
    <string name="saved_to_x">Sačuvano u %1$s</string>
    <string name="saved_to_playlists">Sačuvano u plejliste</string>
    <string name="selected_n">Izabrano%1$d</string>
    <string name="adding_x">Dodavanje %1$s</string>
    <string name="moving_x">Premeštanje%1$s</string>
    <string name="removing_x">Uklanjanje %1$s</string>
    <string name="no_download_extension">Nije pronađena ni jedna ekstenzija. Koristi kod \"ecodown\" da ih preuzmeš.</string>
    <string name="nothing_to_download_in_x">Ništa nije preuzeto u %1$s</string>
    <string name="download_started">Preuzimanje započeto</string>
    <string name="merging_x">Spajanje %1$s</string>
    <string name="tagging_x">Tagovanje%1$s</string>
    <string name="apply_player_color_to_app">Primeni boju plejera u celoj aplikaciji</string>
    <string name="delete_download">Obriši preuzeto</string>
    <string name="removed_x_from_downloads">Uklonjeno%1$s iz Preuzimanja</string>
    <string name="download_complete">Preuzimanje dovršeno</string>
    <string name="app_widget_description">Echo na tvom početnom ekranu!</string>
    <string name="opening_webview_x">Otvaranje Webview: %1$s</string>
    <string name="no_update_available_for_x">Nije pronađeno ni jedno ažuriranje za %1$s</string>
    <string name="other">Ostalo</string>
    <string name="player">Plejer</string>
    <string name="about">Opis</string>
    <string name="language_x">Jezik: %1$s</string>
    <string name="guide">Uputstvo</string>
    <string name="donate">Doniraj</string>
    <string name="contributors">Saradnici</string>
    <string name="app_desc">Samo običan muzički plejer.</string>
    <string name="manage">Upravljaj</string>
    <string name="no_account">Bez Naloga</string>
    <string name="other_settings">Ostala Podešavanja</string>
    <string name="no_x_found">%1$s Nije pronađen</string>
    <string name="playlist">Plejlista</string>
    <string name="album">Album</string>
    <string name="pre_release">Prethodno Izdanje</string>
    <string name="single">Singl</string>
    <string name="ep">EP</string>
    <string name="lp">LP</string>
    <string name="compilation">Kompilacija</string>
    <string name="show">Prikaži</string>
    <string name="book">Rezerviši</string>
    <string name="song">Pesma</string>
    <string name="podcast">Podkest</string>
    <string name="video">Video</string>
    <string name="genres_x">Žanrovi:%1$s</string>
    <string name="disc_number_n">Disk broj:%1$d</string>
    <string name="album_order_n">Redosled Albuma:%1$d</string>
    <string name="confirmation">Potvrda</string>
    <string name="delete_playlist_confirmation">Da li ste sigurni da želite da obrišete %1$s?</string>
    <string name="confirm">Potvrdi</string>
    <string name="big_cover">Veći Omoti Albuma</string>
    <string name="big_cover_summary">Pogodno za uređaje sa većim ekranima</string>
    <string name="unhide">Nemoj Sakrivati</string>
    <string name="hide">Sakrij</string>
    <string name="no_last_played_track_found">Nije pronađena poslednja slušana pesma.</string>
    <string name="not_yet_released">Još uvek nije objavljeno</string>
    <string name="releases_on_x">Biće objavljeno %1$s</string>
    <string name="unavailable_in_your_region">Nije dostupno u vašem regionu</string>
    <string name="not_playable_x">Nije moguće pustiti:%1$s</string>
    <plurals name="number_items">
        <item quantity="one">%1$d Stavka</item>
        <item quantity="few">%1$d Stavke</item>
        <item quantity="other">%1$d Stavki</item>
    </plurals>
    <string name="feed">Fid</string>
    <string name="bass_boost">Pojačavanje Basa</string>
    <string name="amoled">AMOLED</string>
    <plurals name="number_tracks">
        <item quantity="one">%1$d Traka</item>
        <item quantity="few">%1$d Trake</item>
        <item quantity="other">%1$d Traka</item>
    </plurals>
    <string name="copying_the_error">Kopiranje greške</string>
    <string name="shuffle">Shuffle</string>
    <string name="shuffling_x">Shuffling %1$s</string>
    <string name="apply_player_color_to_app_summary">LAG UPOZORENJE!</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="colors">Boje</string>
    <string name="scroll_bar">Traka Za Pomeranje</string>
    <string name="scroll_bar_summary">Traka za skrolovanje sa strane za brži pristup (možda sadrži greške)</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-ta\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">சரி</string>
    <string name="back">பின்</string>
    <string name="x_permission_required">%1$s இசைவு வேண்டும்</string>
    <string name="video">படக்காட்சி</string>
    <string name="cancel">கைவிடு</string>
    <string name="x_was_not_granted">%1$s இசைவு இல்லை</string>
    <string name="audio">ஒலிதம்</string>
    <string name="notifications">அறிவிப்புகள்</string>
    <string name="notifications_permission_summary">பதிவிறக்கங்கள் மற்றும் இசைக்கான அறிவிப்பைக் காட்ட</string>
    <string name="remove">அகற்று</string>
    <string name="songs">பாடல்கள்</string>
    <string name="albums">தொகுப்புகள்</string>
    <string name="x_radio">%1$s வானொலி</string>
    <string name="cached_songs">தற்காலிக சேமிப்பு பாடல்கள்</string>
    <string name="cache_playlist_warning">சோதனை நற்பொருத்தம். அவற்றைக் கேட்பதைத் தவிர வேறு எதுவும் ஆதரிக்கப்படவில்லை.</string>
    <string name="artists">கலைஞர்கள்</string>
    <string name="recently_added">அண்மைக் காலத்தில் சேர்க்கப்பட்டது</string>
    <string name="refresh_library_on_reload_summary">ஒவ்வொரு முறையும் ஊட்டம் ஏற்றப்படும்போது கருவியை வருடு</string>
    <string name="duration_filter">கால வடிகட்டி</string>
    <string name="duration_filter_summary">ஒலி கோப்புகளைக் காலத்தைவிட (நொடிகளில்) குறைவாக வடிகட்டு</string>
    <string name="blacklist_folders">தடுப்புப்பட்டியல் கோப்புறைகள்</string>
    <string name="blacklist_folders_summary">நூலகத்திலிருந்து விலக்கக் கோப்புறைகள்</string>
    <string name="feed">ஊட்டம்</string>
    <string name="write_storage">சேமிப்பிடம் எழுது</string>
    <string name="write_storage_permission_summary">உள்ளக இயக்கப்பட்டியல்களை உருவாக்க மற்றும் திருத்த</string>
    <string name="refresh_library_on_reload">மறுஏற்றத்தில் நூலகத்தைப் புதுப்பி</string>
    <string name="blacklist_folder_keywords">தடுப்புப்பட்டியல் கோப்புறை சொற்கள்</string>
    <string name="saved">சேமிக்கப்பட்டது</string>
    <string name="tabs">தாவல்கள்</string>
    <string name="show_tabs">தாவல்களைக் காட்டு</string>
    <string name="show_tab_summary">நீட்டிப்புகளின் தாவல்களை வகையாகக் காண்பிக்கும்</string>
    <string name="unified_liked_playlist_summary">பல்வேறு நீட்டிப்புகளிலிருந்து நீங்கள் விரும்பிய தடங்கள்</string>
    <string name="n_items">%1$d உருப்படிகள்</string>
    <string name="item">உருப்படி</string>
    <plurals name="number_items">
        <item quantity="one">%1$d உருப்படி</item>
        <item quantity="other">%1$d உருப்படிகள்</item>
    </plurals>
    <string name="playlist_liked">பிடித்திருந்தது</string>
    <string name="playlist_liked_desc">நீங்கள் விரும்பிய தடங்கள்</string>
    <string name="unknown">தெரியவில்லை</string>
    <string name="like">விருப்பம்</string>
    <string name="unlike">விருப்பமில்லை</string>
    <string name="repeat_one">ஒருமுறை மீண்டும்செய்</string>
    <string name="repeat_off">மறுநிகழ்வு முடக்கம்</string>
    <string name="repeat_all">அனைத்தையும் மறுநிகழ்வு</string>
    <string name="home">வீடு</string>
    <string name="search">தேடல்</string>
    <string name="library">நூலகம்</string>
    <string name="more">மேலும்</string>
    <string name="extension">நீட்டிப்பு</string>
    <string name="downloading_x">%1$s ஐ பதிவிறக்குகிறது</string>
    <string name="cancel_all">அனைத்தையும் நீக்கறல்</string>
    <string name="download_progress">பதிவிறக்க முன்னேற்றம்</string>
    <string name="downloads">பதிவிறக்கங்கள்</string>
    <string name="downloaded_x">பதிவிறக்கம் %1$s</string>
    <string name="logout_and_login">வெளியேறு மற்றும் உள்நுழைவு</string>
    <string name="login">புகுபதிவு</string>
    <string name="view">நோக்கு</string>
    <string name="extension_out_of_date">பழைய தகவல்</string>
    <string name="no_internet">இணையம் இல்லை</string>
    <string name="error_loading_extension_from_x">%1$s இலிருந்து நீட்டிப்பு ஏற்றுதல் பிழை</string>
    <string name="extension_x_not_found">நீட்டிப்பு %1$s கண்டுபிடிக்கப்படவில்லை</string>
    <string name="required_extensions_missing_x">தேவையான நீட்டிப்புகள் இல்லை: %1$s</string>
    <string name="x_login_required">%1$s உள்நுழைவு தேவை</string>
    <string name="x_is_not_supported_in_x">%1$s %2$s இல் ஆதரிக்கப்படவில்லை</string>
    <string name="account_session_expired_in_x">கணக்கு அமர்வு %1$s இல் காலாவதியானது</string>
    <string name="error_x">பிழை: %1$s</string>
    <string name="str_copy">நகலெடு</string>
    <string name="extensions">நீட்டிப்புகள்</string>
    <string name="audio_permission_summary">உங்கள் உள்ளக இசை நூலகத்தைத் திறக்க</string>
    <string name="read_storage">சேமிப்பகத்தைப் படி</string>
    <string name="more_by_x">மேலும் %1$s</string>
    <string name="blacklist_folder_keywords_summary">தடுப்புப்பட்டியல் கோப்புறைகளுக்கு முக்கிய சொற்கள், பிரிப்பானுக்கு கமாவைப் பயன்படுத்துங்கள்</string>
    <string name="choose_a_color">ஒரு வண்ணத்தைத் தேர்வுசெய்க</string>
    <string name="random">சீரற்ற</string>
    <string name="add">கூட்டு</string>
    <string name="loading">ஏற்றுகிறது…</string>
    <string name="settings">அமைப்புகள்</string>
    <string name="value">மதிப்பு</string>
    <string name="value_not_set">அமைக்கப்படவில்லை</string>
    <string name="playback">பின்னணி</string>
    <string name="audio_fx">ஒலி விளைவுகள்</string>
    <string name="audio_fx_summary">எல்லா பாடல்களுக்கும் விளைவுகள் பயன்படுத்தப்பட்டன</string>
    <string name="audio_fx_desc">தற்போதைய பாதைக்கான ஒலி விளைவுகளை மாற்று.</string>
    <string name="reset">மீட்டமை</string>
    <string name="playback_speed">பின்னணி விரைவு</string>
    <string name="change_pitch_with_speed">வேகத்துடன் சுருதியை மாற்றவும்</string>
    <string name="bass_boost">அடி ஊக்கம்</string>
    <string name="bass_boost_desc">பெரிய மதிப்பு ஒலியைச் சிதைக்கக்கூடும்.</string>
    <string name="change_pitch_with_speed_desc">அந்த மெதுவான இயக்க ஒலியைப் பெறுங்கள்</string>
    <string name="equalizer">சமநிலைப்படுத்தி</string>
    <string name="equalizer_summary">சாதன சமநிலை அமைப்புகளைத் திற</string>
    <string name="stream_quality">ஓடத்தின் தரம்</string>
    <string name="stream_quality_summary">ஓடத்தின் இயல்புநிலை தரத்தைத் தேர்ந்தெடு</string>
    <string name="x_specific_quality_summary">%1$s குறிப்பிட்ட ஓடத்தின் தரம், இயல்புநிலை ஓடத்தின் தரத் தேர்வை மேலெழுதும்</string>
    <string name="unmetered_stream_quality">அளவிடப்படாத ஓடத்தின் தரம்</string>
    <string name="unmetered_stream_quality_summary">அளவிடப்படாத நெட்வொர்க்குடன் இணைக்கப்படும்போது ஓடத்தின் தரம். இது இயல்புநிலை ஓடத்தின் தரத்தை மீறும்.</string>
    <string name="behavior">நடத்தை</string>
    <string name="keep_queue">இயக்கி வரிசையை வைத்திரு</string>
    <string name="keep_queue_summary">நீங்கள் பயன்பாட்டை மீண்டும் திறக்கும்போது, இயக்கி வரிசையை மீட்டெடு.</string>
    <string name="stop_player">இயக்கியை நிறுத்து</string>
    <string name="stop_player_summary">பயன்பாடு அண்மைகளிலிருந்து அகற்றப்படும்போது, இயக்கியை நிறுத்துங்கள்</string>
    <string name="skip_silence">மௌனத்தைத் தவிர்</string>
    <string name="skip_silence_summary">இடைவெளியின் பின்னணியை வழங்க, பாடலில் அமைதியான பகுதியைத் தவிர்.</string>
    <string name="auto_start_radio">தானி தொடங்கு வானோலி</string>
    <string name="auto_start_radio_summary">எல்லையற்ற வரிசையை வைத்திருக்க, இயக்கபட்டியலில் தொடர்புடைய பாதையின் பாடல்களைத் தானாகச் சேர்</string>
    <string name="cache_size">பிடிஇடம் அளவு</string>
    <string name="cache_size_summary">ஒலியும் ஒளியும் இடைப்பிடிக்க எம்பி அளவு</string>
    <string name="version">பதிப்பு</string>
    <string name="select_language">மொழியைத் தேர்ந்தெடு</string>
    <string name="system">மண்டலம்</string>
    <string name="check_for_updates">புதுப்பிப்புகளை சரிபார்</string>
    <string name="check_for_updates_summary">நீங்கள் பயன்பாட்டைத் திறக்கும்போது, பயன்பாடு மற்றும் நீட்டிப்புகள் இரண்டின் புதிய புதுப்பிப்புகளைப் பாருங்கள்.</string>
    <string name="install">நிறுவவும்</string>
    <string name="app">பயன்பாடு</string>
    <string name="file">கோப்பு</string>
    <string name="installation_type">நிறுவல் வகை</string>
    <string name="installation_type_summary">பயன்பாட்டு நிறுவல் பின்வரும் இணைப்புகளை எதிரொலியில் திறக்க இசைவு:</string>
    <string name="installation_type_warning">நீட்டிப்பை ஒரு கோப்பாக நிறுவினால் கிடைக்காது.</string>
    <string name="could_not_find_the_file">கோப்பைக் கண்டுபிடிக்க முடியவில்லை.</string>
    <string name="extension_installer">நீட்டிப்பு நிறுவி</string>
    <string name="extension_installed_successfully">நீட்டிப்பு வெற்றிகரமாக நிறுவப்பட்டது.</string>
    <string name="extension_uninstalled_successfully">நீட்டிப்பு வெற்றிகரமாக நிறுவல் நீக்கப்பட்டது.</string>
    <string name="allow_opening_links">இணைப்புகளைத் திறக்க இசைவு</string>
    <string name="open_links_instruction">இந்த இணைப்புகளைத் திறக்க அனுமதிக்க, நீங்கள் செய்ய வேண்டும்: \n- கீழே உருட்டி, \"இயல்புநிலையாகத் திறக்க\" என்பதைக் சொடுக்கு செய்க \n- \"+ இணைப்பைச் சேர்\" என்பதைக் சொடுக்கு செய்க</string>
    <string name="downloading_update_for_x">%1$s க்கான புதுப்பிப்பைப் பதிவிறக்குகிறது</string>
    <string name="extension_updated_successfully">%1$s வெற்றிகரமாகப் புதுப்பிக்கப்பட்டது</string>
    <string name="link">இணைப்பு</string>
    <string name="link_or_code">இணைப்பு அல்லது குறியீடு</string>
    <string name="list_is_empty">பட்டியல் காலியாக உள்ளது</string>
    <string name="extension_installed">%1$s (நிறுவப்பட்டது)</string>
    <string name="add_extensions">நீட்டிப்புகளைச் சேர்</string>
    <string name="invalid_extension_list">தவறான நீட்டிப்புகள் பட்டியல்</string>
    <string name="checking_for_updates">புதுப்பிப்புகளைச் சரிபார்க்கிறது</string>
    <string name="look_and_feel">காட்சி மற்றும் உணர்வு</string>
    <string name="ui">இடைமுகம்</string>
    <string name="theme">கருப்பொருள்</string>
    <string name="theme_summary">பார்வையற்றவராக இருக்க வேண்டுமா?</string>
    <string name="custom_theme_color">தனிப்பயன் கருப்பொருள் நிறம்</string>
    <string name="custom_theme_color_summary">கணினி கருப்பொருளுக்குப் பதிலாக தனிப்பயன் கருப்பொருள் வண்ணத்தைப் பயன்படுத்தவும்.</string>
    <string name="add_color">வண்ணத்தைச் சேர்</string>
    <string name="custom_colors">தனிப்பயன் வண்ணங்கள்</string>
    <string name="amoled">அமோல்ட்</string>
    <string name="amoled_summary">முழு கருப்பு, தூய கருப்பு</string>
    <string name="navbar_gradient">சாய்வு வழிப்பட்டி</string>
    <string name="navbar_gradient_summary">வழிப்பட்டி படிப்படியாக வெளிப்படையானதாக மாறும்</string>
    <string name="dynamic_player">மாறும் இயக்கி நிறம்</string>
    <string name="dynamic_player_summary">தடகலைப்படைப்புகளின் அடிப்படையில் இயக்கிக்கு வண்ணத்தைப் பயன்படுத்துங்கள்</string>
    <string name="show_background">பின்னணியைக் காட்டு</string>
    <string name="show_background_summary">பின்னணி காணொளி அல்லது இயக்கியில் தடத்தின் மங்கலான கலைப்படைப்பு</string>
    <string name="colors">நிறங்கள்</string>
    <string name="scroll_bar">உருள் பட்டி</string>
    <string name="scroll_bar_summary">வேகமான இசைவுக்கு பக்கத்தில் உருள் (தடுமாற்றமாக இருக்கலாம்)</string>
    <string name="animation">அசைவூட்டம்</string>
    <string name="back_animations">பின் அசைவூட்டங்கள்</string>
    <string name="back_animations_summary">ஆண்ட்ராய்டு காரணமாகக் காட்சி பிழையை ஏற்படுத்தக்கூடும், ஆனால் அதைச் சரிசெய்ய நீங்கள் முன்னணிகளைத் திறக்கலாம்.</string>
    <string name="animations">அசைவூட்டங்கள்</string>
    <string name="animations_summary">அதிகமாகத் தடுமாறுகிறதா? இதை அணைப்பது, உதவக்கூடும்</string>
    <string name="refresh">புதுப்பி</string>
    <string name="x_disabled">%1$s (முடக்கப்பட்டது)</string>
    <string name="by_x">%1$s மூலம்</string>
    <string name="music">இசை</string>
    <string name="tracker">கண்காணிப்பு</string>
    <string name="lyrics">பாட்டு</string>
    <string name="misc">இதர</string>
    <string name="x_extensions">%1$s நீட்டிப்புகள்</string>
    <string name="x_extension">%1$s நீட்டிப்பு</string>
    <string name="enabled">இயக்கப்பட்டது</string>
    <string name="disabled">முடக்கப்பட்டது</string>
    <string name="error_updating_extension">புதுப்பிக்கும்போது பிழை</string>
    <string name="no_user_found">பயனர் எதுவும் கிடைக்கவில்லை</string>
    <string name="select_x_account">%1$s கணக்கைத் தேர்ந்தெடு</string>
    <string name="add_extension">நீட்டிப்பு சேர்</string>
    <string name="webview">வலைக்காட்சி</string>
    <string name="logout">வெளியேற்றம்</string>
    <string name="switch_account">கணக்கை மாற்று</string>
    <string name="incognito">மறைநிலை</string>
    <string name="not_logged_in">உள்நுழையவில்லை</string>
    <string name="x_login">%1$s உள்நுழைவு</string>
    <string name="x_is_required">%1$s தேவை</string>
    <string name="regex_invalid">%1$s தவறானது, தயவுசெய்து வழக்கவெளியைப் பின்பற்றுங்கள்: %2$s</string>
    <string name="playing_from">இருந்து விளையாடுகிறது</string>
    <string name="up_next">அடுத்து வருவது</string>
    <string name="info">தகவல்</string>
    <string name="seekbar">தேடல் பட்டி</string>
    <string name="shuffle">கலக்கு</string>
    <string name="previous">முந்தைய</string>
    <string name="play">விளையாடு</string>
    <string name="next">அடுத்தது</string>
    <string name="repeat">மறுநிகழ்வு</string>
    <string name="close">மூடு</string>
    <string name="no_lyrics">பாடல் இல்லை</string>
    <string name="sleep_timer">தூக்க நேரங்குறிகருவி</string>
    <string name="end_of_track">பாதையின் முடிவு</string>
    <string name="_15min">15 மீ</string>
    <string name="_30min">30 மீ</string>
    <string name="_45min">45 மீ</string>
    <string name="_1hr">1ம</string>
    <string name="_2hr">2ம</string>
    <string name="sleep_timer_desc">ஒரு குறிப்பிட்ட நேரத்திற்குப் பிறகு பிளேபேக்கை நிறுத்த ஒரு தூக்க நேரத்தை அமை</string>
    <string name="sleep_on_specific_time">குறிப்பிட்ட நேரத்தில் தூங்குங்கள்</string>
    <string name="sleep_timer_cancelled">ச்லீப் நேரங்குறிகருவி ரத்து செய்யப்பட்டது</string>
    <string name="sleep_timer_set_for">தூக்க நேரங்குறிகருவி %1$s க்கு அமைக்கப்பட்டுள்ளது</string>
    <string name="search_x">தேடல் %1$s</string>
    <string name="n_hours">%1$d மணிநேரம்</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d மணி</item>
        <item quantity="other">%1$d மணிநேரம்</item>
    </plurals>
    <string name="n_minutes">%1$d நிமிடங்கள்</string>
    <plurals name="number_min">
        <item quantity="one">%1$d மணித்துளி</item>
        <item quantity="other">%1$d மணித்துளிகள்</item>
    </plurals>
    <string name="servers">சேவையகங்கள்</string>
    <string name="sources">மூலங்கள்</string>
    <string name="backgrounds">பின்னணிகள்</string>
    <string name="subtitles">வசனவரிகள்</string>
    <string name="audio_selection">ஒலி தேர்வு</string>
    <string name="video_selection">காணொளி தேர்வு</string>
    <string name="subtitle_selection">வசன தேர்வு</string>
    <string name="quality_selection">தரமான தேர்வு</string>
    <string name="quality_x">தகுதி %1$d</string>
    <string name="off">அணை</string>
    <string name="unknown_quality">தெரியாத தகுதி</string>
    <string name="so_empty">எனவே காலியாக…</string>
    <string name="not_loading">ஏற்றவில்லை</string>
    <string name="share">பகிர்</string>
    <string name="sharing_x">பகிர்வு %1$s</string>
    <string name="save_to_library">நூலகத்தில் சேமி</string>
    <string name="saved_x_to_library">%1$s நூலகத்திற்கு சேமிக்கப்பட்டது</string>
    <string name="remove_from_library">நூலகத்திலிருந்து அகற்று</string>
    <string name="removed_x_from_library">நூலகத்திலிருந்து %1$s அகற்றப்பட்டது</string>
    <string name="radio">வானொலி</string>
    <string name="download">பதிவிறக்கம்</string>
    <string name="follow">பின்தொடர்</string>
    <string name="following_x">பின்வரும் %1$s</string>
    <string name="followed_x">தொடர்ந்து %1$s</string>
    <string name="unfollow">பின்தொடரவும்</string>
    <string name="unfollowing_x">%1$s ஐப் பின்தொடராது</string>
    <string name="unfollowed_x">பின்பற்றப்படாத %1$s</string>
    <string name="liking_x">%1$s ஐ விரும்புகிறது</string>
    <string name="liked_x">%1$s பிடித்திருந்தது</string>
    <string name="unliking_x">விரும்பாத %1$s</string>
    <string name="unliked_x">விரும்பாத %1$s</string>
    <string name="hiding_x">%1$s மறைத்தல்</string>
    <string name="unhiding_x">%1$s ஐ மறைநீக்குதல்</string>
    <string name="hidden_x">மறைக்கப்பட்ட %1$s</string>
    <string name="unhidden_x">%1$s மறைநீக்கு</string>
    <string name="save_to_playlist">இயக்குபட்டியலுக்கு சேமி</string>
    <string name="delete_playlist">இயக்குபட்டியல் நீக்கு</string>
    <string name="add_to_next">அடுத்துக்குச் சேர்</string>
    <string name="add_to_queue">வரிசையில் சேர்</string>
    <string name="loading_radio_for_x">%1$s க்கு வானொலியை ஏற்றுகிறது</string>
    <string name="playing_x">%1$s விளையாடுகிறது</string>
    <string name="adding_x_to_queue">வரிசையில் %1$s ஐ சேர்க்கிறது</string>
    <string name="adding_x_to_next">அடுத்ததாக %1$s ஐ சேர்க்கிறது</string>
    <string name="background_gradient">பின்னணி சாய்வு</string>
    <string name="background_gradient_summary">சூழலைப் பொறுத்து பின்னணியில் ஒரு சாய்வு வண்ண நிறம்</string>
    <string name="all">அனைத்தும்</string>
    <string name="edit_playlist">இயக்கபட்டியலைத் திருத்து</string>
    <string name="more_brain_capacity">அதிக மூளை திறன்</string>
    <string name="more_brain_capacity_summary">இதை இயக்குவதன் மூலம், ஒலி மந்தத்தை சரிசெய்யவும் பேட்டரி பயன்பாட்டை அதிகரிக்கவும் உதவும் (ஒலி இறக்கிவைத்தலை முடக்குகிறது).</string>
    <string name="track">மின்தடம்</string>
    <string name="tracks">தடங்கள்</string>
    <string name="sort">வரிசைப்படுத்து</string>
    <string name="explicit">வெளிப்படையான</string>
    <string name="x_plays">%1$s நாடகங்கள்</string>
    <string name="x_followers">%1$s பின்தொடர்பவர்கள்</string>
    <string name="n_songs">%1$d பாடல்கள்</string>
    <string name="n_episodes">%1$d அத்தியாயங்கள்</string>
    <string name="n_chapters">%1$d பாடங்கள்</string>
    <string name="n_tracks">%1$d தடங்கள்</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d பாடல்</item>
        <item quantity="other">%1$d பாடல்கள்</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d அத்தியாயம்</item>
        <item quantity="other">%1$d அத்தியாயங்கள்</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d பாடம்</item>
        <item quantity="other">%1$d பாடங்கள்</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d தடம்</item>
        <item quantity="other">%1$d தடங்கள்</item>
    </plurals>
    <string name="shuffling_x">கலக்குதல் %1$s</string>
    <string name="copying_the_error">பிழையை நகலெடுக்கிறது</string>
    <string name="sort_and_filter">வரிசைப்படுத்தி வடிகட்டி</string>
    <string name="filter">வடிப்பி</string>
    <string name="reversed">தலைகீழ்</string>
    <string name="apply">இடு</string>
    <string name="save">சேமி</string>
    <string name="unsave">சேமிக்காதே</string>
    <string name="sort_title">தலைப்பு</string>
    <string name="sort_date">திகதி</string>
    <string name="sort_date_added">தேதி சேர்க்கப்பட்டது</string>
    <string name="sort_duration">காலம்</string>
    <string name="sort_subtitle">வசனவரி</string>
    <string name="scroll_animations">உருட்டல் அசைவூட்டங்கள்</string>
    <string name="scroll_animations_summary">நீங்கள் பொருட்களை உருட்டும்போது அசைவூட்டங்கள்</string>
    <string name="delete">நீக்கு</string>
    <string name="playlist_name">இயக்கபட்டியல் பெயர்</string>
    <string name="playlist_description">இயக்கபட்டியல் விளக்கம்</string>
    <string name="create_playlist">இயக்கப்பட்டியல் உருவாக்கு</string>
    <string name="create">உருவாக்கு</string>
    <string name="add_song">பாடல் சேர்</string>
    <string name="creating_x">%1$s ஐ உருவாக்குதல்</string>
    <string name="playlist_name_empty">இயக்கப்பட்டியல் பெயர் காலியாக உள்ளது</string>
    <string name="x_created">%1$s உருவாக்கப்பட்டது</string>
    <string name="deleting_x">%1$s ஐ அழிக்கிறது</string>
    <string name="deleted_x">நீக்கப்பட்டது %1$s</string>
    <string name="loading_x">%1s ஏற்றுகிறது</string>
    <string name="saving_x">%1$s சேமிப்பு</string>
    <string name="saved_to_x">%1$s க்கு சேமிக்கப்பட்டது</string>
    <string name="saved_to_playlists">இயக்கப்பட்டியல்களில் சேமிக்கப்பட்டது</string>
    <string name="selected_n">தேர்ந்தெடுக்கப்பட்ட %1$d</string>
    <string name="adding_x">%1$s ஐ சேர்க்கிறது</string>
    <string name="moving_x">நகரும் %1$s</string>
    <string name="removing_x">%1$s ஐ நீக்குகிறது</string>
    <string name="no_download_extension">பதிவிறக்க நீட்டிப்பு இல்லை, அதைப் பெற \"எக்கோடவுன்\" குறியீட்டைப் பயன்படுத்தவும்.</string>
    <string name="nothing_to_download_in_x">%1$s இல் பதிவிறக்கம் செய்ய எதுவும் இல்லை</string>
    <string name="download_started">பதிவிறக்கம் தொடங்கியது</string>
    <string name="merging_x">இணைத்தல் %1$s</string>
    <string name="tagging_x">குறிச்சொல் %1$s</string>
    <string name="apply_player_color_to_app">முழு பயன்பாட்டிற்கும் இயக்கி வண்ணத்தைப் பயன்படுத்துங்கள்</string>
    <string name="apply_player_color_to_app_summary">முன்னறிவிப்பு செய்யுங்கள் !!!</string>
    <string name="delete_download">பதிவிறக்கத்தை நீக்கு</string>
    <string name="removed_x_from_downloads">பதிவிறக்கங்களிலிருந்து %1$s அகற்றப்பட்டது</string>
    <string name="download_complete">முழுமையான பதிவிறக்கம்</string>
    <string name="app_widget_description">உங்கள் முகப்புத் திரையில் எதிரொலி!</string>
    <string name="opening_webview_x">வலைக்காட்சியைத் திறத்தல்: %1$s</string>
    <string name="no_update_available_for_x">%1$s க்கு புதுப்பிப்பு எதுவும் கிடைக்கவில்லை</string>
    <string name="other">மற்றொன்று</string>
    <string name="player">இயக்கி</string>
    <string name="about">பற்றி</string>
    <string name="language_x">மொழி: %1$s</string>
    <string name="guide">வழிகாட்டி</string>
    <string name="donate">நன்கொடை</string>
    <string name="contributors">பங்களிப்பாளர்கள்</string>
    <string name="app_desc">ஒரு இசை இயக்கி.</string>
    <string name="manage">நிர்வகி</string>
    <string name="no_account">கணக்கு இல்லை</string>
    <string name="other_settings">பிற அமைப்புகள்</string>
    <string name="no_x_found">%1$s காணப்படவில்லை</string>
    <string name="playlist">இயக்குப்பட்டியல்</string>
    <string name="album">தொகுப்பு</string>
    <string name="pre_release">முன் வெளியீடு</string>
    <string name="single">ஒற்றை</string>
    <string name="ep">ஈபி</string>
    <string name="lp">எல்பி</string>
    <string name="compilation">தொகுத்தல்</string>
    <string name="show">காட்டு</string>
    <string name="book">நூல்</string>
    <string name="song">பாடல்</string>
    <string name="podcast">நெற்றுவார்</string>
    <string name="isrc_x">ஐஎச்ஆர்சி: %1$s</string>
    <string name="genres_x">வகைகள்: %1$s</string>
    <string name="disc_number_n">வட்டு எண்: %1$d</string>
    <string name="album_order_n">தொகுப்பு ஆணை எண்: %1$d</string>
    <string name="confirmation">உறுதிப்படுத்தல்</string>
    <string name="delete_playlist_confirmation">%1$s ஐ நீக்க விரும்புகிறீர்களா?</string>
    <string name="confirm">உறுதிப்படுத்து</string>
    <string name="big_cover">பெரிய அட்டைகள்</string>
    <string name="big_cover_summary">பெரிய திரைகளைக் கொண்ட கருவிகளுக்கு நல்லது</string>
    <string name="unhide">மறைநீக்கு</string>
    <string name="hide">மறை</string>
    <string name="no_last_played_track_found">கடைசியாக விளையாடிய பாதையில் எதுவும் கிடைக்கவில்லை.</string>
    <string name="not_yet_released">இன்னும் வெளியிடப்படவில்லை</string>
    <string name="releases_on_x">%1$s இல் வெளியிடுகிறது</string>
    <string name="unavailable_in_your_region">உங்கள் பிராந்தியத்தில் கிடைக்கவில்லை</string>
    <string name="not_playable_x">விளையாட முடியாது: %1$s</string>
    <string name="currently_playing">தற்போது விளையாடுகிறது</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-th\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">โอเค</string>
    <string name="cancel">ยกเลิก</string>
    <string name="back">กลับ</string>
    <string name="feed">หน้าหลัก</string>
    <string name="x_permission_required">%1$sต้องได้รับอนุญาต</string>
    <string name="x_was_not_granted">%1$sไม่ได้รับอนุญาต</string>
    <string name="audio">เสียง</string>
    <string name="audio_permission_summary">เพื่อเข้าถึงเพลงในภูมิภาคของคุณ</string>
    <string name="read_storage">อ่านเก็บข้อมูล</string>
    <string name="write_storage">การเขียนที่เก็บข้อมูล</string>
    <string name="write_storage_permission_summary">สร้างและแก้ไขเพลย์ลิสต์</string>
    <string name="notifications">การแจ้งเตือน</string>
    <string name="notifications_permission_summary">แสดงการแจ้งเตือนสำหรับการดาวน์โหลดเพลง</string>
    <string name="remove">ลบ</string>
    <string name="more_by_x">เพิ่มเติมโดย %1$s</string>
    <string name="songs">เพลง</string>
    <string name="albums">อัลบั้ม</string>
    <string name="x_radio">%1$s สถานี</string>
    <string name="cached_songs">เพลงที่แคช</string>
    <string name="cache_playlist_warning">คุณสมบัติทดลอง ไม่รองรับสิ่งอื่นใดนอกจากการฟังเสียง</string>
    <string name="artists">ศิลปิน</string>
    <string name="recently_added">เพิ่มมาล่าสุด</string>
    <string name="refresh_library_on_reload">รีเฟรชไลบรารีเมื่อโหลดซ้ำ</string>
    <string name="refresh_library_on_reload_summary">สแกนอุปกรณ์ทุกครั้งที่โหลดฟีด</string>
    <string name="duration_filter">กรองตามช่วงเวลา</string>
    <string name="duration_filter_summary">กรองไฟล์เสียงที่มีระยะเวลา (เป็นวินาที) น้อยกว่าค่า</string>
    <string name="blacklist_folders">โฟลเดอร์แบล็คลิสต์</string>
    <string name="blacklist_folders_summary">โฟลเดอร์ที่จะไม่รวมไว้ในไลบรารี</string>
    <string name="blacklist_folder_keywords">คีย์สำคัญโฟลเดอร์แบล็คลิสต์</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-tl\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="okay">Piliin</string>
    <string name="cancel">Kansela</string>
    <string name="back">Bumalik</string>
    <string name="feed">Mga Feed</string>
    <string name="cached_songs">Mga Kanta na Na-cache</string>
    <string name="audio">Mga Awitin</string>
    <string name="audio_permission_summary">Para ma-access ang iyong lokal na tugtugin</string>
    <string name="read_storage">Basahin ang Storage</string>
    <string name="write_storage">Magsulat sa Storage</string>
    <string name="write_storage_permission_summary">Upang gumawa at mag-edit ng lokal na playlists</string>
    <string name="notifications">Mga Notification</string>
    <string name="notifications_permission_summary">Upang lumabas ang notification para sa mga download at kanta</string>
    <string name="remove">Alisin</string>
    <string name="more_by_x">Marami pang kanta ni %1$s</string>
    <string name="songs">Mga Kanta</string>
    <string name="albums">Mga Album</string>
    <string name="x_radio">Radyong %1$s</string>
    <string name="cache_playlist_warning">Isang feature na pang-experimento. Maalin lamang kundi ang makinig dito ang suportado.</string>
    <string name="artists">Mga Artist</string>
    <string name="recently_added">Mga nadagdag lang</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-tr\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="audio_permission_summary">Çevrimdışı müzik kitaplığına erişmek için</string>
    <string name="okay">Tamam</string>
    <string name="audio">Ses</string>
    <string name="write_storage_permission_summary">Çevrimdışı oynatma listesi yaratmak ve düzenlemek için</string>
    <string name="cache_playlist_warning">Deneysel Özellik. Şarkıları dinlemek dışındaki hiçbir şey desteklenmiyor.</string>
    <string name="refresh_library_on_reload">Yeniden Yüklemede Kütüphaneyi Yenile</string>
    <string name="remove">Kaldır</string>
    <string name="back">Geri</string>
    <string name="x_radio">%1$s Radyosu</string>
    <string name="artists">Sanatçılar</string>
    <string name="write_storage">Depolamaya Yaz</string>
    <string name="songs">Şarkılar</string>
    <string name="cancel">İptal</string>
    <string name="x_permission_required">%1$s İzini Gerekli</string>
    <string name="x_was_not_granted">%1$s izini verilmedi</string>
    <string name="video">Video</string>
    <string name="read_storage">Depolamayı Oku</string>
    <string name="notifications">Bildirimler</string>
    <string name="notifications_permission_summary">İndirme ve müzik bildirimlerini göstermek için</string>
    <string name="more_by_x">%1$s\'dan Daha fazla</string>
    <string name="albums">Albümler</string>
    <string name="cached_songs">Önbelleğe Alınmış Şarkılar</string>
    <string name="recently_added">Yakın Zamanda Eklendi</string>
    <string name="refresh_library_on_reload_summary">Besleme yüklendiğinde cihazı her seferinde tara</string>
    <string name="duration_filter">Süre Filtre</string>
    <string name="duration_filter_summary">Değeri (saniye cinsinden) daha az olan ses dosyalarını filtrele</string>
    <string name="blacklist_folder_keywords_summary">Kara listeye alınacak klasörler için anahtar kelimeler. Ayırıcı olarak virgül kullanın</string>
    <string name="blacklist_folder_keywords">Kara Liste Klasör Anahtar Kelimeleri</string>
    <string name="unified_liked_playlist_summary">Çeşitli uzantılardan beğendiğiniz parçalar</string>
    <string name="downloading_x">İndiriliyor %1$s</string>
    <string name="downloaded_x">İndirilen %1$s</string>
    <string name="logout_and_login">Çıkış yap ve giriş yap</string>
    <string name="no_internet">İnternet Yok</string>
    <string name="error_x">Hata: %1$s</string>
    <string name="reset">Sıfırla</string>
    <string name="playback_speed">Oynatma Hızı</string>
    <string name="change_pitch_with_speed">Hızı değiştirerek tonlama</string>
    <string name="equalizer_summary">Sistem eşitleyici ayarlarını aç</string>
    <string name="equalizer">Ekolayzer</string>
    <string name="skip_silence">Sessizliği Atla</string>
    <string name="auto_start_radio">Radyo Otomatik Başlat</string>
    <string name="skip_silence_summary">Şarkıdaki sessiz bölümü atla, kesintisiz çalma sağla</string>
    <string name="stop_player_summary">Uygulama son kullanımdan kaldırıldığında çalar durdurulsun</string>
    <string name="auto_start_radio_summary">Çalma listesindeki parçanın ilgili şarkılarını otomatik olarak ekleyin, böylece sonsuz bir kuyruk elde edin</string>
    <string name="version">Sürüm</string>
    <string name="install">Yükle</string>
    <string name="app">Uygulama</string>
    <string name="file">Dosya</string>
    <string name="installation_type">Kurulum Türü</string>
    <string name="installation_type_warning">Uzantıyı bir dosya olarak yüklerseniz mevcut değildir.</string>
    <string name="extension_installer">Uzantı Yükleyici</string>
    <string name="allow_opening_links">Bağlantıların açılmasına izin ver</string>
    <string name="open_links_instruction">Bu bağlantıları açabilmek için şunları yapmalısınız:\n- Aşağı kaydırın ve \"Varsayılan Olarak Aç\" seçeneğine tıklayın\n- \"+ Bağlantı Ekle\" seçeneğine tıklayın</string>
    <string name="downloading_update_for_x">%1$s için güncelleme indiriliyor</string>
    <string name="extension_updated_successfully">%1$s başarıyla güncellendi</string>
    <string name="link">Bağlantı</string>
    <string name="extension_installed">%1$s (Yüklü)</string>
    <string name="look_and_feel">Görünüm &amp; Hissiyat</string>
    <string name="add_color">Renk ekle</string>
    <string name="navbar_gradient">Gradyan Navigasyon Çubuğu</string>
    <string name="navbar_gradient_summary">Navigasyon çubuğu yavaşça şeffaf hale geliyor</string>
    <string name="animation">Animasyon</string>
    <string name="tracker">İzleyici</string>
    <string name="webview">WebView</string>
    <string name="logout">Çıkış yap</string>
    <string name="switch_account">Hesabı Değiştir</string>
    <string name="playing_from">Oynatılıyor</string>
    <string name="up_next">Sıradaki</string>
    <string name="play">Oynat</string>
    <string name="next">Sonraki</string>
    <string name="repeat">Tekrarla</string>
    <string name="no_lyrics">Şarkı Sözleri Yok</string>
    <string name="sleep_timer">Uyku Zamanlayıcı</string>
    <string name="end_of_track">Parça Sonu</string>
    <string name="sleep_on_specific_time">Belirli bir saatte uyku</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d Saat</item>
        <item quantity="other">%1$d Saatler</item>
    </plurals>
    <string name="servers">Sunucular</string>
    <string name="audio_selection">Ses Seçimi</string>
    <string name="video_selection">Video Seçimi</string>
    <string name="subtitle_selection">Altyazı Seçimi</string>
    <string name="share">Paylaş</string>
    <string name="removed_x_from_library">Kütüphaneden %1$s kaldırıldı</string>
    <string name="radio">Radyo</string>
    <string name="follow">Takip Et</string>
    <string name="following_x">Takip eden %1$s</string>
    <string name="followed_x">%1$s takip edildi</string>
    <string name="unfollowing_x">Takibi bırakılıyor %1$s</string>
    <string name="unhiding_x">%1$s gizliliği kaldırılıyor</string>
    <string name="liking_x">%1$s\'yi Beğenme</string>
    <string name="liked_x">Beğenildi %1$s</string>
    <string name="unliking_x">Beğenilmeyen %1$s</string>
    <string name="unliked_x">Beğenilmeyen %1$s</string>
    <string name="save_to_playlist">Çalma listesine kaydet</string>
    <string name="delete_playlist">Çalma listesini sil</string>
    <string name="add_to_next">Sonraya Ekle</string>
    <string name="adding_x_to_queue">%1$s sıraya ekleniyor</string>
    <string name="adding_x_to_next">%1$s ekleniyor</string>
    <string name="background_gradient">Arka Plan Gradyanı</string>
    <string name="background_gradient_summary">Bağlama bağlamına bağlı olarak arka planda bir gradyan renk tonu</string>
    <string name="more_brain_capacity">Daha Fazla Beyin Kapasitesi</string>
    <string name="sort">Sırala</string>
    <string name="x_plays">%1$s Oynat</string>
    <string name="x_followers">%1$s Takipçi</string>
    <string name="scroll_animations_summary">Kaydırma sırasında animasyonlar</string>
    <string name="delete">Sil</string>
    <string name="playlist_name">Çalma Listesi Adı</string>
    <string name="playlist_description">Çalma Listesi Açıklaması</string>
    <string name="create_playlist">Çalma Listesi Oluştur</string>
    <string name="creating_x">%1$s Oluşturma</string>
    <string name="saved_to_x">%1$s adresine kaydedildi</string>
    <string name="saved_to_playlists">Çalma listelerine kaydedildi</string>
    <string name="selected_n">Seçilen %1$d</string>
    <string name="download_started">İndirme Başladı</string>
    <plurals name="number_min">
        <item quantity="one">%1$d Dakika</item>
        <item quantity="other">%1$d Dakika</item>
    </plurals>
    <string name="apply_player_color_to_app_summary">GECİKME UYARISI!!!</string>
    <string name="amoled_summary">Arka plan rengini tamamen siyah ile değiştirin. AMOLED ekranlar için pil tüketimini azaltmak ve ekran yanmasını önlemek için faydalıdır</string>
    <string name="stop_player">Oyuncuyu Durdur</string>
    <string name="blacklist_folders">Kara Liste Klasörleri</string>
    <string name="blacklist_folders_summary">Kütüphaneden hariç tutulacak klasörler</string>
    <string name="saved">Kaydedildi</string>
    <string name="tabs">Sekmeler</string>
    <string name="show_tabs">Sekmeleri Göster</string>
    <string name="n_items">%1$d Öğeler</string>
    <string name="playlist_liked">Beğenildi</string>
    <string name="show_tab_summary">Eklentilerin sekmelerini kategoriler olarak göster</string>
    <string name="playlist_liked_desc">Beğendiğin parçalar</string>
    <string name="unknown">Bilinmeyen</string>
    <string name="like">Beğen</string>
    <string name="unlike">Beğenme</string>
    <string name="repeat_one">Birini Tekrarla</string>
    <string name="repeat_off">Tekrar Kapat</string>
    <string name="repeat_all">Tümünü Tekrarla</string>
    <string name="home">Ana Sayfa</string>
    <string name="search">Ara</string>
    <string name="library">Kütüphane</string>
    <string name="more">Daha Fazla</string>
    <string name="extension">Eklenti</string>
    <string name="cancel_all">Tümünü İptal Et</string>
    <string name="download_progress">İndirme İlerlemesi</string>
    <string name="downloads">İndirmeler</string>
    <string name="login">Giriş Yap</string>
    <string name="view">Görüntü</string>
    <string name="extension_out_of_date">Güncel değil</string>
    <string name="error_loading_extension_from_x">%1$s adresinden uzantı yüklenirken hata</string>
    <string name="extension_x_not_found">Uzantı %1$s bulunamadı</string>
    <string name="required_extensions_missing_x">Gerekli uzantılar eksik: %1$s</string>
    <string name="x_login_required">%1$s giriş gereklidir</string>
    <string name="x_is_not_supported_in_x">%1$s %2$s içinde desteklenmiyor</string>
    <string name="account_session_expired_in_x">Hesap oturumu %1$s içinde süresi doldu</string>
    <string name="str_copy">Kopyala</string>
    <string name="extensions">Eklentiler</string>
    <string name="choose_a_color">Bir renk seç</string>
    <string name="random">Rastgele</string>
    <string name="add">Ekle</string>
    <string name="loading">Yükleniyor…</string>
    <string name="settings">Ayarlar</string>
    <string name="value">Değer</string>
    <string name="value_not_set">Ayarlanmadı</string>
    <string name="playback">Oynatma</string>
    <string name="audio_fx">Ses Efektleri</string>
    <string name="audio_fx_summary">Tüm şarkılara uygulanan efektler</string>
    <string name="audio_fx_desc">Mevcut parça için ses efektlerini değiştir.</string>
    <string name="bass_boost">Bas Takviyesi</string>
    <string name="bass_boost_desc">Daha büyük bir değer sesi bozabilir.</string>
    <string name="change_pitch_with_speed_desc">O yavaş hareket sesini al</string>
    <string name="stream_quality">Akış Kalitesi</string>
    <string name="stream_quality_summary">Akış kalitesini seçin</string>
    <string name="behavior">Davranış</string>
    <string name="keep_queue">Oynatıcı Kuyruğunu Koruyun</string>
    <string name="keep_queue_summary">Uygulamayı yeniden açtığınızda oyuncu kuyruğunu geri yükleyin.</string>
    <string name="cache_size">Önbellek Boyutu</string>
    <string name="cache_size_summary">Ses ve video için önbellek boyutu MB cinsinden</string>
    <string name="system">Sistem</string>
    <string name="installation_type_summary">Uygulama kurulumu, aşağıdaki bağlantıların Echo\'da açılmasına izin verecektir:</string>
    <string name="could_not_find_the_file">Dosya bulunamadı.</string>
    <string name="extension_installed_successfully">Eklenti başarıyla yüklendi.</string>
    <string name="extension_uninstalled_successfully">Eklenti başarıyla kaldırıldı.</string>
    <string name="link_or_code">Bağlantı veya Kod</string>
    <string name="list_is_empty">Liste boş</string>
    <string name="add_extensions">Eklentiler Ekle</string>
    <string name="invalid_extension_list">Geçersiz uzantılar listesi</string>
    <string name="theme">Tema</string>
    <string name="theme_summary">Kör olmak ister misin?</string>
    <string name="custom_theme_color">Özel Tema Rengi</string>
    <string name="ui">Kullanıcı Arayüzü</string>
    <string name="custom_theme_color_summary">Sistem renginin yerine özel bir tema rengi kullanın</string>
    <string name="custom_colors">Özel Renkler</string>
    <string name="amoled">AMOLED</string>
    <string name="dynamic_player">Dinamik Oynatıcı Rengi</string>
    <string name="dynamic_player_summary">Parça Sanatına dayalı olarak oynatıcıya renk uygula</string>
    <string name="show_background">Arka Planı Göster</string>
    <string name="show_background_summary">Oynatıcıda arka plan videosu veya parçanın bulanık sanatı</string>
    <string name="animations">Animasyonlar</string>
    <string name="animations_summary">Aşırı takılma mı hissediyorsunuz? Bunu kapatmak yardımcı olabilir</string>
    <string name="refresh">Yenile</string>
    <string name="x_disabled">%1$s (Devre Dışı)</string>
    <string name="by_x">Tarafından %1$s</string>
    <string name="music">Müzik</string>
    <string name="lyrics">Şarkı sözleri</string>
    <string name="x_extensions">%1$s Uzantıları</string>
    <string name="x_extension">%1$s Eklentisi</string>
    <string name="enabled">Açık</string>
    <string name="disabled">Devre dışı</string>
    <string name="no_user_found">Kullanıcı bulunamadı</string>
    <string name="select_x_account">%1$s hesabını seç</string>
    <string name="misc">Çeşitli</string>
    <string name="add_extension">Uzantı Ekle</string>
    <string name="error_updating_extension">Güncellenirken hata</string>
    <string name="incognito">Gizli Mod</string>
    <string name="not_logged_in">Giriş yapılmadı</string>
    <string name="x_login">%1$s Giriş</string>
    <string name="x_is_required">$1%s gereklidir</string>
    <string name="info">Bilgi</string>
    <string name="seekbar">Seekbar</string>
    <string name="shuffle">Karıştır</string>
    <string name="previous">Önceki</string>
    <string name="close">Kapat</string>
    <string name="_15min">15d</string>
    <string name="_30min">30d</string>
    <string name="_45min">45d</string>
    <string name="_1hr">1s</string>
    <string name="_2hr">2s</string>
    <string name="sleep_timer_desc">Belirli bir süre sonra çalmayı durdurmak için bir uyku zamanlayıcısı ayarlayın</string>
    <string name="sleep_timer_cancelled">Uyku zamanlayıcısı iptal edildi</string>
    <string name="sleep_timer_set_for">Uyku zamanlayıcısı %1$s için ayarlandı</string>
    <string name="search_x">Ara %1$s</string>
    <string name="sources">Kaynaklar</string>
    <string name="backgrounds">Arka Planlar</string>
    <string name="subtitles">Altyazılar</string>
    <string name="quality_selection">Kalite Seçimi</string>
    <string name="quality_x">Kalite %1$d</string>
    <string name="off">Kapalı</string>
    <string name="unknown_quality">Bilinmeyen Kalite</string>
    <string name="so_empty">O kadar boş ki…</string>
    <string name="not_loading">Yüklenmiyor</string>
    <string name="sharing_x">Paylaşım %1$s</string>
    <string name="save_to_library">Kütüphaneye Kaydet</string>
    <string name="saved_x_to_library">%1$s kütüphaneye kaydedildi</string>
    <string name="remove_from_library">Kütüphaneden Kaldır</string>
    <string name="download">İndir</string>
    <string name="unfollow">Takibi Bırak</string>
    <string name="unfollowed_x">Takibi bırakıldı %1$s</string>
    <string name="hide">Gizle</string>
    <string name="hiding_x">%1$s\'yi Gizleme</string>
    <string name="unhide">Gizliliği Aç</string>
    <string name="add_to_queue">Sıraya Ekle</string>
    <string name="loading_radio_for_x">%1$s için radyo yükleniyor</string>
    <string name="playing_x">%1$s çalınıyor</string>
    <string name="all">Tümü</string>
    <string name="edit_playlist">Çalma Listesini Düzenle</string>
    <string name="more_brain_capacity_summary">Bunu etkinleştirmek, ses gecikmesini düzeltebilir, ancak pil kullanımını önemli ölçüde artırır (ses yüklemesini devre dışı bırakır).</string>
    <string name="explicit">Açık</string>
    <string name="shuffling_x">Karıştırılıyor %1$s</string>
    <string name="copying_the_error">Hata kopyalanıyor</string>
    <string name="sort_and_filter">Sırala ve Filtrele</string>
    <string name="filter">Filtre</string>
    <string name="reversed">Tersine</string>
    <string name="apply">Uygula</string>
    <string name="save">Kaydet</string>
    <string name="sort_title">Başlık</string>
    <string name="sort_date">Tarih</string>
    <string name="sort_duration">Süre</string>
    <string name="scroll_animations">Kaydırma Animasyonları</string>
    <string name="sort_subtitle">Altyazı</string>
    <string name="create">Oluştur</string>
    <string name="add_song">Şarkı Ekle</string>
    <string name="playlist_name_empty">Çalma listesinin adı boş</string>
    <string name="x_created">%1$s oluşturuldu</string>
    <string name="deleting_x">%1$s siliniyor</string>
    <string name="deleted_x">%1$s silindi</string>
    <string name="loading_x">Yükleniyor %1s</string>
    <string name="saving_x">%1$s Kaydediliyor</string>
    <string name="adding_x">[E7X] Ekleme</string>
    <string name="moving_x">Taşınıyor %1$s</string>
    <string name="removing_x">%1$s Kaldırılıyor</string>
    <string name="no_download_extension">İndirilecek uzantı bulunamadı, \"echodown\" kodunu kullanarak edinin.</string>
    <string name="nothing_to_download_in_x">%1$s içinde indirilecek bir şey yok</string>
    <string name="merging_x">Birleştiriliyor %1$s</string>
    <string name="tagging_x">Etiketleme %1$s</string>
    <string name="apply_player_color_to_app">Tüm Uygulamaya Oynatıcı Rengini Uygula</string>
    <string name="download_complete">İndirme Tamamlandı</string>
    <string name="delete_download">İndirimi Kaldır</string>
    <string name="removed_x_from_downloads">İndirilenlerden %1$s kaldırıldı</string>
    <string name="app_widget_description">Ana ekranında yankı!</string>
    <string name="feed">Akış</string>
    <string name="item">Öğe</string>
    <plurals name="number_items">
        <item quantity="one">%1$d öğe</item>
        <item quantity="other">%1$d öğe</item>
    </plurals>
    <string name="x_specific_quality_summary">%1$s için özel akış kalitesi, varsayılan akış kalitesi seçimini geçersiz kılar</string>
    <string name="unmetered_stream_quality">Sınırsız ağ akış kalitesi</string>
    <string name="unmetered_stream_quality_summary">Sınırsız bir ağa bağlıyken akışın kalitesi. Bu, varsayılan akış kalitesini geçersiz kılar.</string>
    <string name="select_language">Dil Seç</string>
    <string name="check_for_updates">Güncellemeleri Denetle</string>
    <string name="check_for_updates_summary">Uygulamayı açtığında hem uygulama hem de uzantılar için yeni güncellemeleri kontrol et.</string>
    <string name="checking_for_updates">Güncellemeler denetleniyor</string>
    <string name="back_animations">Geri animasyonları</string>
    <string name="back_animations_summary">Android kaynaklı görsel hatalara neden olabilir, ancak bunu düzeltmek için son uygulamaları açabilirsin.</string>
    <string name="regex_invalid">%1$s geçersiz, lütfen şu düzenli ifadeyi takip et: %2$s</string>
    <string name="n_hours">%1$d saat</string>
    <string name="n_minutes">%1$d dakika</string>
    <string name="hidden_x">Gizli %1$s</string>
    <string name="unhidden_x">Görünür %1$s</string>
    <string name="track">Parça</string>
    <string name="tracks">Parçalar</string>
    <string name="n_songs">%1$d şarkı</string>
    <string name="n_episodes">%1$d bölüm</string>
    <string name="n_chapters">%1$d bölüm</string>
    <string name="n_tracks">%1$d parça</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d şarkı</item>
        <item quantity="other">%1$d şarkı</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d bölüm</item>
        <item quantity="other">%1$d bölüm</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d bölüm</item>
        <item quantity="other">%1$d bölüm</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d parça</item>
        <item quantity="other">%1$d parça</item>
    </plurals>
    <string name="unsave">Kaydı kaldır</string>
    <string name="sort_date_added">Ekleme tarihi</string>
    <string name="opening_webview_x">Web görünümü açılıyor: %1$s</string>
    <string name="no_update_available_for_x">%1$s için güncelleme mevcut değil</string>
    <string name="other">Diğer</string>
    <string name="player">Oynatıcı</string>
    <string name="about">Hakkında</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-uk\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="back">Назад</string>
    <string name="cancel">Скасувати</string>
    <string name="okay">Гаразд</string>
    <string name="video">Відео</string>
    <string name="audio">Звук</string>
    <string name="write_storage_permission_summary">Щоб створювати або редагувати локальні плейлисти</string>
    <string name="audio_permission_summary">Щоб отримати доступ до вашою локальної бібліотеки музики</string>
    <string name="notifications">Сповіщення</string>
    <string name="choose_a_color">Обрати колір</string>
    <string name="extensions">Розширення</string>
    <string name="add">Додати</string>
    <string name="str_copy">Копіювати</string>
    <string name="installation_type_warning">Недоступно, якщо ви встановлюєте розширення у вигляді файлу.</string>
    <string name="x_permission_required">Необхідно %1$s дозволів</string>
    <string name="x_was_not_granted">%1$s не було надано</string>
    <string name="read_storage">Зчитувати сховище</string>
    <string name="write_storage">Записувати в сховище</string>
    <string name="notifications_permission_summary">Показувати сповіщення про завантаження та музику</string>
    <string name="remove">Видалити</string>
    <string name="songs">Пісні</string>
    <string name="albums">Альбоми</string>
    <string name="cached_songs">Кешовані пісні</string>
    <string name="cache_playlist_warning">Експериментальна функція. Все, крім прослуховування, не підтримується.</string>
    <string name="artists">Виконавці</string>
    <string name="recently_added">Нещодавно додано</string>
    <string name="duration_filter_summary">Відфільтрувати звукові файли з тривалістю (в секундах) меншою за значення</string>
    <string name="duration_filter">Фільтр за тривалістю</string>
    <string name="blacklist_folders">Чорний список тек</string>
    <string name="blacklist_folder_keywords">Ключові слова теки для чорного списку</string>
    <string name="saved">Збережено</string>
    <string name="tabs">Вкладки</string>
    <string name="show_tabs">Показати вкладки</string>
    <string name="n_items">%1$d елементів</string>
    <string name="playlist_liked">Улюблені</string>
    <string name="playlist_liked_desc">Ваші улюблені пісні</string>
    <string name="unknown">Невідомо</string>
    <string name="repeat_one">Повторити один раз</string>
    <string name="repeat_off">Повторення вимкнено</string>
    <string name="repeat_all">Повторяти все</string>
    <string name="home">Головна</string>
    <string name="more">Більше</string>
    <string name="extension">Розширення</string>
    <string name="downloading_x">Завантаження %1$s</string>
    <string name="downloaded_x">Завантажено %1$s</string>
    <string name="login">Увійти</string>
    <string name="view">Переглянути</string>
    <string name="extension_out_of_date">Застаріле</string>
    <string name="no_internet">Немає мережі</string>
    <string name="required_extensions_missing_x">Відсутні необхідні розширення: %1$s</string>
    <string name="x_login_required">Потрібно ввійти в %1$s</string>
    <string name="x_is_not_supported_in_x">%1$s не підтримується в %2$s</string>
    <string name="account_session_expired_in_x">Сеанс облікового запису закінчився в %1$s</string>
    <string name="random">Випадково</string>
    <string name="audio_fx_desc">Змінити звукові ефекти для поточної доріжки.</string>
    <string name="reset">Скинути</string>
    <string name="playback_speed">Швидкість відтворення</string>
    <string name="bass_boost_desc">Більше значення може призвести до спотворення звуку.</string>
    <string name="change_pitch_with_speed_desc">Отримаєте сповільнений звук</string>
    <string name="stream_quality">Якість відтворення</string>
    <string name="stream_quality_summary">Виберіть типову якість відтворення</string>
    <string name="behavior">Поведінка</string>
    <string name="keep_queue">Тримати програвач у черзі</string>
    <string name="skip_silence">Пропускати тишу</string>
    <string name="skip_silence_summary">Пропускати мовчазну частину пісні, щоби забезпечити відтворення без пропусків.</string>
    <string name="cache_size">Розмір кешу</string>
    <string name="cache_size_summary">Розмір в МБ для кешування звуку та відео</string>
    <string name="version">Версія</string>
    <string name="install">Встановити</string>
    <string name="app">Застосунок</string>
    <string name="file">Файл</string>
    <string name="installation_type">Тип встановлення</string>
    <string name="could_not_find_the_file">Не вдалося знайти файл.</string>
    <string name="extension_installer">Встановлювач розширення</string>
    <string name="extension_installed_successfully">Розширення успішно встановлено.</string>
    <string name="extension_uninstalled_successfully">Розширення успішно видалено.</string>
    <string name="downloading_update_for_x">Завантаження оновлення для %1$s</string>
    <string name="extension_updated_successfully">%1$s успішно оновлено</string>
    <string name="link">Посилання</string>
    <string name="link_or_code">Посилання чи код</string>
    <string name="list_is_empty">Список пустий</string>
    <string name="extension_installed">%1$s (Встановлено)</string>
    <string name="invalid_extension_list">Список неприпустимих розширень</string>
    <string name="ui">Інтерфейс</string>
    <string name="theme">Тема</string>
    <string name="theme_summary">Хочете бути сліпими?</string>
    <string name="custom_theme_color">Власний колір теми</string>
    <string name="add_color">Додати колір</string>
    <string name="custom_colors">Власні кольори</string>
    <string name="amoled">AMOLED</string>
    <string name="navbar_gradient">Градієнтна навігаційна панель</string>
    <string name="navbar_gradient_summary">Навігаційна панель поступово стає прозорою</string>
    <string name="show_background">Показувати тло</string>
    <string name="show_background_summary">Фонове відео або розмита обкладинка треку в програвачі</string>
    <string name="animation">Анімація</string>
    <string name="animations_summary">Відчуваєте, що забагато смикається? Вимкніть це, це може допомогти</string>
    <string name="music">Музика</string>
    <string name="tracker">Відстежувач</string>
    <string name="x_extensions">%1$s розширень</string>
    <string name="enabled">Увімкнено</string>
    <string name="disabled">Вимкнено</string>
    <string name="no_user_found">Користувача не знайдено</string>
    <string name="select_x_account">Виберіть обліковий запис %1$s</string>
    <string name="add_extension">Додати розширення</string>
    <string name="logout">Вийти з облікового запису</string>
    <string name="switch_account">Змінити обліковий запис</string>
    <string name="incognito">Інкогніто</string>
    <string name="not_logged_in">Вхід не виконано</string>
    <string name="playing_from">Відтворюється з</string>
    <string name="up_next">Що далі</string>
    <string name="shuffle">Перемішати</string>
    <string name="previous">Попередня</string>
    <string name="play">Відтворити</string>
    <string name="repeat">Повторяти</string>
    <string name="_15min">15 хв</string>
    <string name="_45min">45 хв</string>
    <string name="_1hr">1 год</string>
    <string name="_2hr">2 год</string>
    <string name="sleep_on_specific_time">Сон у визначений час</string>
    <string name="sleep_timer_cancelled">Таймер сну скасовано</string>
    <string name="search_x">Знайти %1$s</string>
    <plurals name="number_min">
        <item quantity="one">%1$d хвилина</item>
        <item quantity="few">%1$d хвилини</item>
        <item quantity="many">%1$d хвилин</item>
        <item quantity="other">%1$d хвилин</item>
    </plurals>
    <string name="backgrounds">Тла</string>
    <string name="subtitles">Субтитри</string>
    <string name="subtitle_selection">Вибір субтитрів</string>
    <string name="quality_selection">Вибір якості</string>
    <string name="off">Вимк.</string>
    <string name="unknown_quality">Невідома якість</string>
    <string name="not_loading">Не завантажується</string>
    <string name="share">Поділитися</string>
    <string name="sharing_x">Обмін %1$s</string>
    <string name="remove_from_library">Видалити з бібліотеки</string>
    <string name="removed_x_from_library">%1$s видалено з бібліотеки</string>
    <string name="following_x">Підписування на %1$s</string>
    <string name="unfollowing_x">Відписування від %1$s</string>
    <string name="hide">Приховати</string>
    <string name="hiding_x">Приховування %1$s</string>
    <string name="unhiding_x">Показ %1$s</string>
    <string name="liked_x">Додано в Улюблене: %1$s</string>
    <string name="unliking_x">Видалено з Улюбленого: %1$s</string>
    <string name="unliked_x">Видалено з Улюбленого: %1$s</string>
    <string name="delete_playlist">Видалити з плейлиста</string>
    <string name="add_to_queue">Додати в чергу</string>
    <string name="loading_radio_for_x">Завантаження радіо для %1$s</string>
    <string name="playing_x">Відтворення %1$s</string>
    <string name="all">Усе</string>
    <string name="edit_playlist">Редагувати плейлист</string>
    <string name="x_plays">%1$s прослуховувань</string>
    <string name="shuffling_x">Перемішування %1$s</string>
    <string name="copying_the_error">Копіювання помилки</string>
    <string name="filter">Фільтр</string>
    <string name="reversed">Обернути</string>
    <string name="save">Зберегти</string>
    <string name="sort_date">Дата</string>
    <string name="sort_duration">Тривалість</string>
    <string name="scroll_animations">Анімації прокручування</string>
    <string name="sort_subtitle">Субтитри</string>
    <string name="create">Створити</string>
    <string name="add_song">Додати пісню</string>
    <string name="saving_x">Збереження %1$s</string>
    <string name="saved_to_x">Збережено в %1$s</string>
    <string name="saved_to_playlists">Збережено в плейлисти</string>
    <string name="selected_n">%1$d вибрано</string>
    <string name="removing_x">Видалення %1$s</string>
    <string name="download_started">Завантаження розпочато</string>
    <string name="merging_x">Об\'єднання %1$s</string>
    <string name="tagging_x">Тегування %1$s</string>
    <string name="apply_player_color_to_app">Застосувати колір програвача до всього застосунку</string>
    <string name="apply_player_color_to_app_summary">ПОПЕРЕДЖЕННЯ ПРО ЗАТРИМКИ!!!</string>
    <string name="delete_download">Видалити завантаження</string>
    <string name="download_complete">Завантаження завершено</string>
    <string name="app_widget_description">Echo на головному екрані!</string>
    <string name="webview">WebView</string>
    <string name="blacklist_folder_keywords_summary">Ключові слова до тек чорного списку, використовуйте кому як роздільник</string>
    <string name="scroll_animations_summary">Анімації під час гортання</string>
    <string name="misc">Інше</string>
    <string name="amoled_summary">Цілком чорний, чисто чорний</string>
    <string name="look_and_feel">Вигляд і відчуття</string>
    <string name="equalizer_summary">Відкрити налаштування еквалайзера пристрою</string>
    <string name="stop_player">Зупинити програвач</string>
    <string name="auto_start_radio">Автозапуск радіо</string>
    <string name="unlike">Видалити з Улюбленого</string>
    <string name="error_loading_extension_from_x">Помилка завантаження розширення з %1$s</string>
    <string name="error_x">Помилка: %1$s</string>
    <string name="search">Пошук</string>
    <string name="downloads">Завантаження</string>
    <string name="bass_boost">Підсилення басів</string>
    <string name="stop_player_summary">Зупинити програвач, коли застосунок видалено з Нещодавніх</string>
    <string name="show_tab_summary">показуватиме вкладки розширень як категорію</string>
    <string name="more_by_x">Більше від %1$s</string>
    <string name="x_radio">Радіо %1$s</string>
    <string name="library">Бібліотека</string>
    <string name="refresh_library_on_reload">Оновлювати бібліотеку при перезавантаженні</string>
    <string name="refresh_library_on_reload_summary">Сканувати пристрій щоразу під час завантаження стрічки</string>
    <string name="blacklist_folders_summary">Теки для вилучення з бібліотеки</string>
    <string name="unified_liked_playlist_summary">Ваші улюблені треки з різних розширень</string>
    <string name="equalizer">Еквалайзер</string>
    <string name="like">Додати в Улюблене</string>
    <string name="loading">Завантаження…</string>
    <string name="cancel_all">Скасувати все</string>
    <string name="settings">Налаштування</string>
    <string name="value">Значення</string>
    <string name="audio_fx">Звукові ефекти</string>
    <string name="download_progress">Прогрес завантаження</string>
    <string name="value_not_set">Не налаштовано</string>
    <string name="logout_and_login">Вихід і вхід</string>
    <string name="extension_x_not_found">Завантаження %1$s не знайдено</string>
    <string name="playback">Відтворення</string>
    <string name="audio_fx_summary">Ефекти застосовано до всіх пісень</string>
    <string name="change_pitch_with_speed">Змінюйте висоту тону зі швидкістю</string>
    <string name="keep_queue_summary">Відновити чергу програвача, коли ви знову відкриєте застосунок.</string>
    <string name="system">Системна</string>
    <string name="installation_type_summary">Після встановлення застосунку в Echo відкриватимуться наступні посилання:</string>
    <string name="auto_start_radio_summary">Автоматично додавати пов\'язані пісні треку до плейлиста, щоби мати нескінченну чергу</string>
    <string name="sort_and_filter">Сортування та фільтр</string>
    <string name="sort">Сортувати</string>
    <string name="playlist_description">Опис плейлиста</string>
    <string name="x_created">%1$s створено</string>
    <string name="moving_x">Переміщення %1$s</string>
    <string name="loading_x">Завантаження %1s</string>
    <string name="apply">Застосувати</string>
    <string name="deleting_x">Видалення %1$s</string>
    <string name="playlist_name">Назва плейлиста</string>
    <string name="no_download_extension">Розширення для завантаження не знайдено, скористайтеся кодом «echodown», щоб отримати його.</string>
    <string name="creating_x">Створення %1$s</string>
    <string name="playlist_name_empty">Назва плейлиста пуста</string>
    <string name="adding_x">Додавання %1$s</string>
    <string name="error_updating_extension">Помилка під час оновлення</string>
    <string name="x_extension">%1$s розширення</string>
    <string name="no_lyrics">Немає тексту</string>
    <string name="sleep_timer_set_for">Таймер сну встановлено на %1$s</string>
    <string name="sources">Джерела</string>
    <string name="unfollow">Відписатися</string>
    <string name="animations">Анімації</string>
    <string name="dynamic_player_summary">Застосувати колір до програвача на основі обкладинки доріжки</string>
    <string name="adding_x_to_next">Додавання %1$s наступною</string>
    <string name="refresh">Оновити</string>
    <string name="x_login">Увійти в %1$s</string>
    <string name="saved_x_to_library">%1$s збережено в бібліотеку</string>
    <string name="open_links_instruction">Щоб дозволити відкриття цих посилань, потрібно зробити наступне:\n- Прокрутити вниз і натиснути на «Відкрити по стандарту»\n- Натиснути на «+ Додати посилання»</string>
    <string name="by_x">Від %1$s</string>
    <string name="allow_opening_links">Дозволити відкриття посилань</string>
    <string name="radio">Радіо</string>
    <string name="unfollowed_x">Відписано від %1$s</string>
    <string name="liking_x">Додавання в Улюблене: %1$s</string>
    <string name="seekbar">Панель пошуку</string>
    <string name="next">Наступна</string>
    <string name="background_gradient_summary">Градієнтний відтінок кольору тла залежно від контексту</string>
    <string name="_30min">30 хв</string>
    <string name="adding_x_to_queue">Додавання %1$s до черги</string>
    <string name="x_disabled">%1$s (Вимкнено)</string>
    <string name="custom_theme_color_summary">Використовувати власний колір теми замість системного.</string>
    <string name="dynamic_player">Динамічний колір програвача</string>
    <string name="save_to_library">Зберегти до бібліотеки</string>
    <string name="lyrics">Текст</string>
    <string name="followed_x">Підписано на %1$s</string>
    <string name="x_is_required">Потрібно %1$s</string>
    <plurals name="number_hour">
        <item quantity="one">%1$d година</item>
        <item quantity="few">%1$d години</item>
        <item quantity="many">%1$d годин</item>
        <item quantity="other">%1$d годин</item>
    </plurals>
    <string name="background_gradient">Градієнт тла</string>
    <string name="sleep_timer_desc">Встановити таймер сну, щоби зупинити відтворення через певний проміжок часу</string>
    <string name="info">Інформація</string>
    <string name="sleep_timer">Таймер сну</string>
    <string name="servers">Сервери</string>
    <string name="download">Завантажити</string>
    <string name="follow">Підписатися</string>
    <string name="add_extensions">Додати розширення</string>
    <string name="close">Закрити</string>
    <string name="end_of_track">Кінець доріжки</string>
    <string name="audio_selection">Вибір звуку</string>
    <string name="explicit">Явний</string>
    <string name="video_selection">Вибір відео</string>
    <string name="sort_title">Назва</string>
    <string name="removed_x_from_downloads">%1$s видалено із завантажень</string>
    <string name="quality_x">Якість: %1$d</string>
    <string name="so_empty">Так пусто…</string>
    <string name="create_playlist">Створити плейлист</string>
    <string name="unhide">Показати</string>
    <string name="save_to_playlist">Зберегти в плейлист</string>
    <string name="add_to_next">Відтворити наступною</string>
    <string name="more_brain_capacity">Більше можливостей мозку</string>
    <string name="more_brain_capacity_summary">Увімкнення цієї функції може допомогти усунути затримку звуку та збільшить споживання заряду батареї (вимкне вивантаження аудіо).</string>
    <string name="deleted_x">%1$s видалено</string>
    <string name="x_followers">%1$s підписників</string>
    <string name="delete">Видалити</string>
    <string name="nothing_to_download_in_x">Нічого завантажувати в %1$s</string>
    <string name="feed">Стрічка</string>
    <string name="item">Елемент</string>
    <plurals name="number_items">
        <item quantity="one">%1$d елемент</item>
        <item quantity="few">%1$d елементи</item>
        <item quantity="many">%1$d елементів</item>
        <item quantity="other">%1$d елементів</item>
    </plurals>
    <string name="x_specific_quality_summary">%1$s конкретна якість потоку, замінить вибір типової якості потоку</string>
    <string name="unmetered_stream_quality">Необмежена якість потоку</string>
    <string name="unmetered_stream_quality_summary">Якість потоку при під’єднанні до нелімітованої мережі. Це замінить типову якість потоку.</string>
    <string name="select_language">Вибрати мову</string>
    <string name="check_for_updates">Перевірити оновлення</string>
    <string name="check_for_updates_summary">Шукайти нові оновлення як застосунку, так і розширень, коли відкриваєте програму.</string>
    <string name="checking_for_updates">Перевірка оновлень</string>
    <string name="back_animations">Анімації повернення</string>
    <string name="back_animations_summary">Це може спричинити візуальну помилку через Android, але ви можете просто відкрити нещодавні програми, аби це виправити.</string>
    <string name="regex_invalid">%1$s є недійсним, дотримуйтесь регулярного виразу: %2$s</string>
    <string name="n_hours">%1$d годин</string>
    <string name="n_minutes">%1$d хвилин</string>
    <string name="hidden_x">Приховати %1$s</string>
    <string name="unhidden_x">Показати %1$s</string>
    <string name="track">Трек</string>
    <string name="tracks">Пісні</string>
    <string name="n_episodes">%1$d епізодів</string>
    <string name="n_chapters">%1$d розділів</string>
    <string name="n_tracks">%1$d пісень</string>
    <plurals name="number_songs">
        <item quantity="one">%1$d пісня</item>
        <item quantity="few">%1$d пісні</item>
        <item quantity="many">%1$d пісень</item>
        <item quantity="other">%1$d пісень</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="one">%1$d епізод</item>
        <item quantity="few">%1$d епізоди</item>
        <item quantity="many">%1$d епізодів</item>
        <item quantity="other">%1$d епізодів</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="one">%1$d розділ</item>
        <item quantity="few">%1$d розділи</item>
        <item quantity="many">%1$d розділів</item>
        <item quantity="other">%1$d розділів</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="one">%1$d трек</item>
        <item quantity="few">%1$d треки</item>
        <item quantity="many">%1$d треків</item>
        <item quantity="other">%1$d треків</item>
    </plurals>
    <string name="unsave">Скасувати збереження</string>
    <string name="sort_date_added">Дата додавання</string>
    <string name="opening_webview_x">Відкриття Webview: %1$s</string>
    <string name="no_update_available_for_x">Немає доступних оновлень для %1$s</string>
    <string name="other">Інше</string>
    <string name="player">Програвач</string>
    <string name="about">Про застосунок</string>
    <string name="language_x">Мова: %1$s</string>
    <string name="guide">Посібник</string>
    <string name="donate">Пожертвувати</string>
    <string name="contributors">Вкладники</string>
    <string name="app_desc">Просто музичний програвач.</string>
    <string name="manage">Керувати</string>
    <string name="no_account">Немає облікового запису</string>
    <string name="other_settings">Інші налаштування</string>
    <string name="no_x_found">%1$s не знайдено</string>
    <string name="playlist">Список відтворення</string>
    <string name="album">Альбом</string>
    <string name="pre_release">Попередня версія</string>
    <string name="single">Сингл</string>
    <string name="ep">Мініальбом</string>
    <string name="lp">Альбом</string>
    <string name="compilation">Добірка</string>
    <string name="show">Показати</string>
    <string name="book">Книга</string>
    <string name="song">Пісня</string>
    <string name="podcast">Подкаст</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="genres_x">Жанри: %1$s</string>
    <string name="disc_number_n">Номер диску: %1$d</string>
    <string name="album_order_n">Номер замовлення альбому: %1$d</string>
    <string name="confirmation">Підтвердження</string>
    <string name="delete_playlist_confirmation">Упевнені, що хочете видалити %1$s?</string>
    <string name="confirm">Підтвердити</string>
    <string name="big_cover">Більші обкладинки</string>
    <string name="big_cover_summary">Добре підходить для пристроїв із великими екранами</string>
    <string name="no_last_played_track_found">Останній відтворений трек не знайдено.</string>
    <string name="not_yet_released">Ще не випущено</string>
    <string name="releases_on_x">Виходить %1$s</string>
    <string name="unavailable_in_your_region">Недоступно у вашому регіоні</string>
    <string name="not_playable_x">Неможливо відтворити: %1$s</string>
    <string name="n_songs">%1$d Пісні</string>
    <string name="colors">Кольори</string>
    <string name="scroll_bar">Смуга прокручування</string>
    <string name="scroll_bar_summary">Смуга прокрутки збоку для швидшого доступу (можливо, збої)</string>
    <string name="currently_playing">Зараз грає</string>
    <string name="circle" translatable="false">Коло</string>
    <string name="horizontal" translatable="false">Горизонтальний</string>
    <string name="vertical" translatable="false">Вертикальний</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-vi\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="like">Thích</string>
    <string name="unlike">Không thích</string>
    <string name="up_next">Tiếp theo</string>
    <string name="lyrics">Lời bài hát</string>
    <string name="no_lyrics">Không có lời bài hát</string>
    <string name="info">Thông tin</string>
    <string name="audio_fx">Hiệu ứng âm thanh</string>
    <string name="sleep_timer">Hẹn giờ tắt</string>
    <string name="sleep_timer_desc">Đặt hẹn giờ để dừng phát nhạc sau một khoảng thời gian nhất định</string>
    <string name="quality_selection">Chất lượng</string>
    <string name="manage">Quản lý</string>
    <string name="add">Thêm</string>
    <string name="extensions">Phần mở rộng</string>
    <string name="add_extensions">Thêm phần mở rộng</string>
    <string name="link">Liên kết</string>
    <string name="link_or_code">Liên kết hoặc Mã</string>
    <string name="list_is_empty">Danh sách trống</string>
    <string name="checking_for_updates">Kiểm tra cập nhật</string>
    <string name="back">Quay lại</string>
    <string name="okay">Đồng ý</string>
    <string name="cancel">Hủy bỏ</string>
    <string name="error_updating_extension">Lỗi khi cập nhật</string>
    <string name="enabled">Đã bật</string>
    <string name="disabled">Đã tắt</string>
    <string name="add_extension">Thêm phần mở rộng</string>
    <string name="logout_and_login">Đăng nhập và đăng xuất</string>
    <string name="logout">Đăng xuất</string>
    <string name="login">Đăng nhập</string>
    <string name="view">Xem</string>
    <string name="no_internet">Không có mạng</string>
    <string name="error_loading_extension_from_x">Lỗi khi tải phần mở rộng từ %1$s</string>
    <string name="extension_x_not_found">Không tìm thấy phần mở rộng %1$s</string>
    <string name="required_extensions_missing_x">Thiếu các phần rộng cần thiết: %1$s</string>
    <string name="x_login_required">Cần đăng nhập %1$s</string>
    <string name="x_is_not_supported_in_x">%1$s không được hỗ trợ trong %2$s</string>
    <string name="account_session_expired_in_x">Phiên tài khoản đã hết hạn trong %1$s</string>
    <string name="error_x">Lỗi: %1$s</string>
    <string name="str_copy">Sao chép</string>
    <string name="choose_a_color">Chọn một màu sắc</string>
    <string name="random">Ngẫu nhiên</string>
    <string name="loading">Đang tải…</string>
    <string name="settings">Cài đặt</string>
    <string name="value">Giá trị</string>
    <string name="playback">Phát</string>
    <string name="audio_fx_summary">Hiệu ứng áp dụng cho tất cả các bài hát</string>
    <string name="audio_fx_desc">Thay đổi hiệu ứng âm thanh cho bản nhạc hiện tại.</string>
    <string name="reset">Đặt lại</string>
    <string name="playback_speed">Tốc độ phát</string>
    <string name="bass_boost">Tăng cường âm bass</string>
    <string name="bass_boost_desc">Giá trị lớn hơn có thể làm méo âm thanh.</string>
    <string name="equalizer">Bộ cân bằng</string>
    <string name="equalizer_summary">Mở cài đặt bộ cân bằng âm thanh của thiết bị</string>
    <string name="stream_quality">Chất lượng</string>
    <string name="stream_quality_summary">Chọn chất lượng mặc định</string>
    <string name="x_specific_quality_summary">Chất lượng %1$s sẽ ghi đè lựa chọn chất lượng mặc định</string>
    <string name="unmetered_stream_quality">Chất lượng không giới hạn</string>
    <string name="unmetered_stream_quality_summary">Khi được kết nối với mạng không giới hạn, cài đặt này sẽ thay cho cài đặt chất lượng mặc định.</string>
    <string name="behavior">Hành vi</string>
    <string name="keep_queue">Giữ danh sách phát</string>
    <string name="keep_queue_summary">Giữ danh sách phát khi mở lại ứng dụng.</string>
    <string name="stop_player">Dừng phát</string>
    <string name="stop_player_summary">Dừng phát nhạc khi ứng dụng bị xóa khỏi Quản lý tác vụ</string>
    <string name="skip_silence">Bỏ qua đoạn im lặng</string>
    <string name="skip_silence_summary">Bỏ qua đoạn im lặng trong bài hát.</string>
    <string name="auto_start_radio">Tự mở đài</string>
    <string name="auto_start_radio_summary">Tự động thêm những bài hát liên quan vào danh sách phát</string>
    <string name="cache_size">Kích thước bộ nhớ đệm</string>
    <string name="cache_size_summary">Kích thước (MB) để lưu trữ âm thanh và video</string>
    <string name="version">Phiên bản</string>
    <string name="select_language">Chọn ngôn ngữ</string>
    <string name="system">Hệ thống</string>
    <string name="check_for_updates">Kiểm tra cập nhật</string>
    <string name="check_for_updates_summary">Kiểm tra cập nhật mới cho cả ứng dụng và phần mở rộng khi bạn mở ứng dụng.</string>
    <string name="install">Cài đặt</string>
    <string name="app">Ứng dụng</string>
    <string name="file">Tệp</string>
    <string name="installation_type">Loại cài đặt</string>
    <string name="installation_type_summary">Việc cài đặt ứng dụng sẽ cho phép các liên kết sau mở trong Echo:</string>
    <string name="installation_type_warning">Không có sẵn nếu bạn cài đặt phần mở rộng dưới dạng Tệp.</string>
    <string name="could_not_find_the_file">Không thể tìm thấy tệp.</string>
    <string name="extension_installer">Trình cài đặt phần mở rộng</string>
    <string name="extension_installed_successfully">Phần mở rộng đã được cài đặt thành công.</string>
    <string name="show_tab_summary">sẽ hiển thị các tab của các tiện ích như là các danh mục</string>
    <string name="unified_liked_playlist_summary">Các bản nhạc bạn thích từ các phần mở rộng khác nhau</string>
    <string name="extension">Phần mở rộng</string>
    <string name="extension_out_of_date">Lỗi thời</string>
    <string name="extension_uninstalled_successfully">Phần mở rộng đã được xóa thành công.</string>
    <string name="extension_updated_successfully">%1$s đã được cập nhật thành công</string>
    <string name="extension_installed">%1$s (đã cài đặt)</string>
    <string name="invalid_extension_list">Danh sách phần mở rộng không hợp lệ</string>
    <string name="no_download_extension">Không tìm thấy phần mở rộng Tải xuống, sử dụng mã \"echodown\" để nhận nó.</string>
    <string name="audio">Âm thanh</string>
    <string name="audio_permission_summary">Để truy cập thư viện nhạc trên máy của bạn</string>
    <string name="read_storage">Đọc Bộ nhớ</string>
    <string name="write_storage">Ghi vào Bộ nhớ</string>
    <string name="write_storage_permission_summary">Để tạo và chỉnh sửa danh sách phát trên thiết bị</string>
    <string name="notifications">Thông báo</string>
    <string name="notifications_permission_summary">Để hiển thị thông báo khi tải xuống và phát nhạc</string>
    <string name="remove">Gỡ bỏ</string>
    <string name="more_by_x">Nhiều hơn bởi %1$s</string>
    <string name="songs">Bài hát</string>
    <string name="albums">Album</string>
    <string name="cached_songs">Bài hát đã lưu vào bộ nhớ đệm</string>
    <string name="cache_playlist_warning">Tính năng thử nghiệm. Tất cả ngoại trừ việc nghe đều không được hỗ trợ.</string>
    <string name="artists">Nghệ sĩ</string>
    <string name="recently_added">Mới thêm gần đây</string>
    <string name="refresh_library_on_reload">Làm mới thư viện khi tải lại</string>
    <string name="duration_filter">Bộ lọc thời lượng</string>
    <string name="duration_filter_summary">Lọc bỏ các tệp âm thanh có độ dài (tính bằng giây) nhỏ hơn giá trị đã cho</string>
    <string name="blacklist_folders">Loại trừ thư mục</string>
    <string name="blacklist_folders_summary">Thư mục cần loại trừ khỏi thư viện</string>
    <string name="blacklist_folder_keywords">Từ khóa thư mục vào danh sách đen</string>
    <string name="blacklist_folder_keywords_summary">Từ khóa để chặn thư mục, sử dụng dấu phẩy để phân tách</string>
    <string name="saved">Đã lưu</string>
    <string name="allow_opening_links">Cho phép mở liên kết</string>
    <string name="open_links_instruction">Để mở những liên kết này, bạn cần:\n- Cuộn xuống và nhấp vào \"Mở mặc định\"\n- Nhấp vào \"+ Thêm liên kết\"</string>
    <string name="downloading_update_for_x">Đang tải cập nhật cho %1$s</string>
    <string name="look_and_feel">Giao diện</string>
    <string name="theme">Chủ đề</string>
    <string name="theme_summary">Bạn thích chế độ sáng hay tối?</string>
    <string name="custom_theme_color">Màu tùy chỉnh</string>
    <string name="custom_theme_color_summary">Sử dụng màu chủ đề tùy chỉnh, thay vì chủ đề hệ thống.</string>
    <string name="add_color">Thêm màu sắc</string>
    <string name="amoled">AMOLED</string>
    <string name="navbar_gradient">Nền thanh điều hướng</string>
    <string name="navbar_gradient_summary">Nền thanh điều hướng mờ dần</string>
    <string name="dynamic_player">Màu động cho trình chơi nhạc</string>
    <string name="dynamic_player_summary">Áp dụng màu sắc cho trình chơi nhạc dựa trên ảnh bìa nhạc</string>
    <string name="show_background">Hiển thị nền</string>
    <string name="show_background_summary">Hình nền video hoặc hình bìa mờ trong trình chơi nhạc</string>
    <string name="colors">Màu sắc</string>
    <string name="scroll_bar">Thanh cuộn</string>
    <string name="scroll_bar_summary">Thanh cuộn để lướt danh sách nhanh hơn (có thể không được mượt)</string>
    <string name="animation">Hiệu ứng động</string>
    <string name="back_animations">Khi quay lại</string>
    <string name="x_was_not_granted">%1$s đã không được cấp phép</string>
    <string name="tabs">Tab</string>
    <string name="show_tabs">Hiển thị Tab</string>
    <string name="playlist_liked">Thích</string>
    <string name="playlist_liked_desc">Các bài hát bạn thích</string>
    <string name="unknown">Không xác định</string>
    <string name="repeat_one">Lặp một lần</string>
    <string name="repeat_off">Không lặp lại</string>
    <string name="repeat_all">Lặp lại tất cả</string>
    <string name="home">Trang chủ</string>
    <string name="search">Tìm kiếm</string>
    <string name="library">Thư viện</string>
    <string name="more">Nhiều hơn</string>
    <string name="downloading_x">Đang tải %1$s</string>
    <string name="cancel_all">Hủy tất cả</string>
    <string name="download_progress">Tiến độ tải xuống</string>
    <string name="downloads">Tải xuống</string>
    <string name="downloaded_x">Đã tải xuống %1$s</string>
    <string name="ui">UI</string>
    <string name="custom_colors">Màu sắc tùy chỉnh</string>
    <string name="back_animations_summary">Có thể gây ra lỗi hiển thị (do Android), nhưng bạn chỉ cần mở Quản lý tác vụ để khắc phục.</string>
    <string name="animations">Hiệu ứng động</string>
    <string name="refresh">Làm mới</string>
    <string name="x_disabled">%1$s (đã tắt)</string>
    <string name="by_x">Bởi %1$s</string>
    <string name="music">Âm nhạc</string>
    <string name="misc">Khác</string>
    <string name="no_user_found">Không tìm thấy người dùng</string>
    <string name="select_x_account">Chọn tài khoản %1$s</string>
    <string name="switch_account">Chuyển tài khoản</string>
    <string name="incognito">Ẩn danh</string>
    <string name="not_logged_in">Chưa đăng nhập</string>
    <string name="regex_invalid">%1$s không hợp lệ, vui lòng theo định dạng regex: %2$s</string>
    <string name="playing_from">Chơi từ</string>
    <string name="seekbar">Thanh trượt</string>
    <string name="shuffle">Xáo trộn</string>
    <string name="play">Chơi</string>
    <string name="next">Tiếp theo</string>
    <string name="repeat">Lặp lại</string>
    <string name="close">Đóng lại</string>
    <string name="end_of_track">Cuối bài</string>
    <string name="_15min">15m</string>
    <string name="_30min">30m</string>
    <string name="_45min">45m</string>
    <string name="_1hr">1h</string>
    <string name="_2hr">2h</string>
    <string name="sleep_timer_cancelled">Hẹn giờ đã bị hủy</string>
    <string name="sleep_timer_set_for">Hẹn giờ cho %1$s</string>
    <string name="search_x">Tìm kiếm %1$s</string>
    <string name="n_hours">%1$d giờ</string>
    <string name="n_minutes">%1$d phút</string>
    <string name="servers">Máy chủ</string>
    <string name="sources">Nguồn gốc</string>
    <string name="backgrounds">Hình nền</string>
    <string name="subtitles">Phụ đề</string>
    <string name="audio_selection">Lựa chọn âm thanh</string>
    <string name="video_selection">Lựa chọn video</string>
    <string name="subtitle_selection">Chọn phụ đề</string>
    <string name="quality_x">Chất lượng %1$d</string>
    <string name="off">Tắt</string>
    <string name="unknown_quality">Chất lượng không xác định</string>
    <string name="so_empty">Không có gì…</string>
    <string name="share">Chia sẻ</string>
    <string name="sharing_x">Chia sẻ %1$s</string>
    <string name="save_to_library">Lưu vào thư viện</string>
    <string name="saved_x_to_library">Đã lưu %1$s vào thư viện</string>
    <string name="remove_from_library">Xóa khỏi thư viện</string>
    <string name="removed_x_from_library">Đã gỡ bỏ %1$s khỏi thư viện</string>
    <string name="radio">Đài phát thanh</string>
    <string name="download">Tải xuống</string>
    <string name="follow">Theo dõi</string>
    <string name="following_x">Theo dõi %1$s</string>
    <string name="followed_x">Đã thheo dõi %1$s</string>
    <string name="unfollow">Bỏ theo dõi</string>
    <string name="unfollowing_x">Bỏ theo dõi %1$s</string>
    <string name="unfollowed_x">Bỏ theo dõi %1$s</string>
    <string name="liking_x">Thích %1$s</string>
    <string name="liked_x">Đã thích %1$s</string>
    <string name="unliking_x">Không thích %1$s</string>
    <string name="hiding_x">Ẩn %1$s</string>
    <string name="unhiding_x">Hủy ẩn %1$s</string>
    <string name="hidden_x">Ẩn %1$s</string>
    <string name="unhidden_x">Không còn ẩn %1$s</string>
    <string name="save_to_playlist">Lưu vào danh sách phát</string>
    <string name="delete_playlist">Xóa danh sách phát</string>
    <string name="add_to_next">Thêm vào tiếp theo</string>
    <string name="add_to_queue">Thêm vào danh sách chờ</string>
    <string name="loading_radio_for_x">Đang tải radio cho %1$s</string>
    <string name="playing_x">Đang phát %1$s</string>
    <string name="adding_x_to_queue">Đang thêm %1$s vào hàng đợi</string>
    <string name="adding_x_to_next">Thêm %1$s vào tiếp theo</string>
    <string name="background_gradient">Nền mờ dần</string>
    <string name="background_gradient_summary">Một lớp màu mờ dần ở nền tùy thuộc vào ngữ cảnh</string>
    <string name="all">Tất cả</string>
    <string name="edit_playlist">Chỉnh sửa danh sách phát</string>
    <string name="more_brain_capacity_summary">Bật tùy chọn này có thể giúp khắc phục độ trễ âm thanh và tăng mức tiêu thụ pin (Vô hiệu hóa việc tắt âm thanh).</string>
    <string name="track">Bài hát</string>
    <string name="tracks">Bài hát</string>
    <string name="sort">Sắp xếp</string>
    <string name="currently_playing">Đang phát</string>
    <string name="feed">Feed</string>
    <string name="x_permission_required">Cần quyền %1$s</string>
    <string name="x_radio">Đài %1$s</string>
    <string name="refresh_library_on_reload_summary">Quét thiết bị mỗi khi nguồn cấp được tải</string>
    <string name="n_items">%1$d mục</string>
    <string name="item">Mục</string>
    <plurals name="number_items">
        <item quantity="other">%1$d mục</item>
    </plurals>
    <string name="value_not_set">Không được thiết lập</string>
    <string name="change_pitch_with_speed">Thay đổi cao độ với tốc độ</string>
    <string name="amoled_summary">Màu đen hoàn toàn</string>
    <string name="x_extensions">%1$s phần mở rộng</string>
    <string name="x_extension">%1$s phần mở rộng</string>
    <string name="x_login">Đăng nhập %1$s</string>
    <string name="x_is_required">%1$s là bắt buộc</string>
    <string name="previous">Trước</string>
    <string name="sleep_on_specific_time">Hẹn giờ tắt vào lúc</string>
    <plurals name="number_hour">
        <item quantity="other">%1$d giờ</item>
    </plurals>
    <plurals name="number_min">
        <item quantity="other">%1$d phút</item>
    </plurals>
    <string name="unliked_x">Không thích %1$s</string>
    <string name="x_followers">%1$s người theo dõi</string>
    <string name="n_songs">%1$d bài hát</string>
    <plurals name="number_songs">
        <item quantity="other">%1$d bài hát</item>
    </plurals>
    <string name="shuffling_x">Xáo trộn %1$s</string>
    <string name="copying_the_error">Sao chép lỗi</string>
    <string name="sort_and_filter">Sắp xếp và Lọc</string>
    <string name="filter">Bộ lọc</string>
    <string name="reversed">Đảo ngược</string>
    <string name="apply">Áp dụng</string>
    <string name="save">Lưu</string>
    <string name="unsave">Không lưu lại</string>
    <string name="sort_title">Tiêu đề</string>
    <string name="sort_date">Ngày</string>
    <string name="sort_date_added">Ngày thêm vào</string>
    <string name="sort_duration">Thời lượng</string>
    <string name="sort_subtitle">Phụ đề</string>
    <string name="scroll_animations">Hoạt ảnh cuộn</string>
    <string name="scroll_animations_summary">Các hiệu ứng hoạt ảnh khi bạn cuộn trang</string>
    <string name="delete">Xóa</string>
    <string name="playlist_name">Tên danh sách phát</string>
    <string name="playlist_description">Mô tả danh sách phát</string>
    <string name="create_playlist">Tạo danh sách phát</string>
    <string name="create">Tạo</string>
    <string name="add_song">Thêm bài hát</string>
    <string name="creating_x">Tạo %1$s</string>
    <string name="playlist_name_empty">Tên danh sách phát trống</string>
    <string name="x_created">%1$s đã được tạo</string>
    <string name="deleting_x">Xóa %1$s</string>
    <string name="deleted_x">Đã xóa %1$s</string>
    <string name="loading_x">Đang tải %1s</string>
    <string name="saving_x">Đang lưu %1$s</string>
    <string name="saved_to_x">Đã lưu vào %1$s</string>
    <string name="saved_to_playlists">Đã lưu vào danh sách phát</string>
    <string name="selected_n">Đã chọn %1$d</string>
    <string name="adding_x">Thêm %1$s</string>
    <string name="moving_x">Di chuyển %1$s</string>
    <string name="removing_x">Gỡ bỏ %1$s</string>
    <string name="nothing_to_download_in_x">Không có gì để tải xuống trong %1$s</string>
    <string name="download_started">Tải xuống đã bắt đầu</string>
    <string name="merging_x">Gộp %1$s</string>
    <string name="tagging_x">Gán thẻ %1$s</string>
    <string name="apply_player_color_to_app">Áp dụng màu của trình phát cho toàn bộ ứng dụng</string>
    <string name="apply_player_color_to_app_summary">Cảnh báo: Lag!!!</string>
    <string name="delete_download">Xóa tải về</string>
    <string name="removed_x_from_downloads">Đã xóa %1$s khỏi Tải về</string>
    <string name="download_complete">Tải xuống hoàn tất</string>
    <string name="app_widget_description">Echo trên màn hình chính!</string>
    <string name="opening_webview_x">Mở Webview: %1$s</string>
    <string name="no_update_available_for_x">Không có bản cập nhật nào cho %1$s</string>
    <string name="other">Khác</string>
    <string name="player">Trình phát nhạc</string>
    <string name="about">Giới thiệu</string>
    <string name="language_x">Ngôn ngữ: %1$s</string>
    <string name="guide">Hướng dẫn</string>
    <string name="donate">Đóng góp</string>
    <string name="contributors">Cộng tác viên</string>
    <string name="app_desc">Trình chơi nhạc.</string>
    <string name="no_account">Không có tài khoản</string>
    <string name="other_settings">Cài đặt khác</string>
    <string name="no_x_found">Không tìm thấy %1$s</string>
    <string name="playlist">Danh sách phát</string>
    <string name="album">Album</string>
    <string name="pre_release">Trước phát hành</string>
    <string name="single">Đơn</string>
    <string name="compilation">Biên soạn</string>
    <string name="show">Hiển thị</string>
    <string name="book">Sách</string>
    <string name="song">Bài hát</string>
    <string name="podcast">Podcast</string>
    <string name="video">Video</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="genres_x">Thể loại: %1$s</string>
    <string name="disc_number_n">Số đĩa: %1$d</string>
    <string name="album_order_n">Số thứ tự album: %1$d</string>
    <string name="confirmation">Xác nhận</string>
    <string name="delete_playlist_confirmation">Bạn có chắc chắn muốn xóa %1$s không?</string>
    <string name="confirm">Xác nhận</string>
    <string name="big_cover">Hình bìa lớn hơn</string>
    <string name="big_cover_summary">Phù hợp cho các thiết bị có màn hình lớn</string>
    <string name="unhide">Bỏ ẩn</string>
    <string name="hide">Ẩn</string>
    <string name="no_last_played_track_found">Không tìm thấy bài hát cuối cùng đã phát.</string>
    <string name="not_yet_released">Chưa được phát hành</string>
    <string name="releases_on_x">Phát hành vào %1$s</string>
    <string name="unavailable_in_your_region">Không khả dụng ở khu vực của bạn</string>
    <string name="not_playable_x">Không thể phát: %1$s</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-zh-rCN\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="refresh">刷新</string>
    <string name="enabled">已启用</string>
    <string name="music">音乐</string>
    <string name="disabled">已禁用</string>
    <string name="info">信息</string>
    <string name="up_next">即将播放</string>
    <string name="switch_account">切换账号</string>
    <string name="not_logged_in">未登录</string>
    <string name="followed_x">已关注 %1$s</string>
    <string name="refresh_library_on_reload">重新加载时刷新媒体库</string>
    <string name="downloaded_x">已下载 %1$s</string>
    <string name="write_storage">写入存储</string>
    <string name="back">返回</string>
    <string name="x_permission_required">需要 %1$s 权限</string>
    <string name="read_storage">读取存储</string>
    <string name="extension_installed_successfully">扩展已成功安装.</string>
    <string name="okay">好的</string>
    <string name="webview">网页视图</string>
    <string name="recently_added">最近添加</string>
    <string name="animation">动画</string>
    <string name="lyrics">歌词</string>
    <string name="x_was_not_granted">%1$s 未授权</string>
    <string name="audio">音频</string>
    <string name="video">视频</string>
    <string name="audio_permission_summary">用于获取你的本地音乐库</string>
    <string name="notifications">通知</string>
    <string name="notifications_permission_summary">用于显示下载与播放音乐的通知</string>
    <string name="remove">移除</string>
    <string name="songs">歌曲</string>
    <string name="albums">专辑</string>
    <string name="cached_songs">已缓存的歌曲</string>
    <string name="cache_playlist_warning">实验功能。除了收听之外，不支持任何其他功能。</string>
    <string name="artists">艺术家</string>
    <string name="more_by_x">%1$s 的更多内容</string>
    <string name="saved">已保存</string>
    <string name="show_tabs">显示标签页</string>
    <string name="playlist_liked">已点赞</string>
    <string name="unknown">未知</string>
    <string name="duration_filter">时长过滤器</string>
    <string name="unlike">取消点赞</string>
    <string name="home">主页</string>
    <string name="search">搜索</string>
    <string name="library">媒体库</string>
    <string name="more">更多</string>
    <string name="downloading_x">正在下载 %1$s</string>
    <string name="cancel_all">取消全部</string>
    <string name="download_progress">下载进度</string>
    <string name="logout_and_login">注销和登录</string>
    <string name="login">登录</string>
    <string name="view">查看</string>
    <string name="extension_out_of_date">过期</string>
    <string name="no_internet">无网络</string>
    <string name="downloads">下载</string>
    <string name="choose_a_color">选择一个颜色</string>
    <string name="random">随机</string>
    <string name="add">添加</string>
    <string name="loading">加载中…</string>
    <string name="reset">重置</string>
    <string name="bass_boost">低音增强</string>
    <string name="version">版本</string>
    <string name="look_and_feel">界面外观</string>
    <string name="add_color">添加颜色</string>
    <string name="custom_colors">自定义颜色</string>
    <string name="show_background">显示背景</string>
    <string name="animations_summary">感觉太卡顿了？关闭此选项或许会有所帮助</string>
    <string name="misc">其它</string>
    <string name="tracker">跟踪器</string>
    <string name="previous">上一曲</string>
    <string name="next">下一曲</string>
    <string name="close">关闭</string>
    <string name="no_lyrics">无歌词</string>
    <string name="tabs">标签页</string>
    <string name="shuffle">随机播放</string>
    <string name="value">值</string>
    <string name="cancel">取消</string>
    <string name="logout">注销</string>
    <string name="write_storage_permission_summary">用于创建和编辑本地播放列表</string>
    <string name="like">点赞</string>
    <string name="ui">用户界面</string>
    <string name="installation_type">安装类型</string>
    <string name="repeat_all">循环全部</string>
    <string name="extension">扩展</string>
    <string name="cache_size_summary">音频与视频的缓存（以MB为单位）</string>
    <string name="extension_installer">扩展安装器</string>
    <string name="list_is_empty">列表为空</string>
    <string name="animations">动画</string>
    <string name="value_not_set">未设置</string>
    <string name="repeat_one">单曲循环</string>
    <string name="play">播放</string>
    <string name="behavior">行为</string>
    <string name="incognito">匿名</string>
    <string name="download">下载</string>
    <string name="follow">关注</string>
    <string name="following_x">正在关注 %1$s</string>
    <string name="repeat_off">循环关闭</string>
    <string name="app">应用程序</string>
    <string name="extensions">扩展</string>
    <string name="cache_size">缓存大小</string>
    <string name="equalizer">均衡器</string>
    <string name="settings">设置</string>
    <string name="system">系统</string>
    <string name="install">安装</string>
    <string name="file">文件</string>
    <string name="could_not_find_the_file">无法找到文件.</string>
    <string name="add_extensions">添加扩展</string>
    <string name="extension_uninstalled_successfully">扩展已成功卸载.</string>
    <string name="invalid_extension_list">无效的扩展列表</string>
    <string name="theme">主题</string>
    <string name="x_radio">%1$s 电台</string>
    <string name="refresh_library_on_reload_summary">每次加载 feed 时扫描设备</string>
    <string name="duration_filter_summary">过滤掉时长（以秒为单位）小于该值的音频文件</string>
    <string name="blacklist_folders">文件夹黑名单</string>
    <string name="blacklist_folders_summary">从媒体库中排除的文件夹</string>
    <string name="blacklist_folder_keywords">黑名单文件夹关键字</string>
    <string name="blacklist_folder_keywords_summary">要屏蔽文件夹的关键词，使用逗号分隔</string>
    <string name="show_tab_summary">将显示扩展的标签作为类别</string>
    <string name="unified_liked_playlist_summary">您喜欢的来自各种扩展的曲目</string>
    <string name="n_items">%1$d 个项目</string>
    <string name="playlist_liked_desc">您喜欢的曲目</string>
    <string name="error_loading_extension_from_x">从 %1$s 加载扩展时出错</string>
    <string name="extension_x_not_found">未找到扩展 %1$s</string>
    <string name="required_extensions_missing_x">缺少所需扩展：%1$s</string>
    <string name="x_login_required">需要 %1$s 登录</string>
    <string name="x_is_not_supported_in_x">%2$s 不支持 %1$s</string>
    <string name="account_session_expired_in_x">帐户会话已于 %1$s 过期</string>
    <string name="error_x">错误: %1$s</string>
    <string name="str_copy">复制</string>
    <string name="playback">回放</string>
    <string name="audio_fx">音频效果</string>
    <string name="audio_fx_summary">所有歌曲均已应用效果</string>
    <string name="audio_fx_desc">更改当前曲目的音频效果.</string>
    <string name="playback_speed">播放速度</string>
    <string name="change_pitch_with_speed">随着速度改变音调</string>
    <string name="bass_boost_desc">较大的值可能会使声音失真。</string>
    <string name="change_pitch_with_speed_desc">获取慢动作声音</string>
    <string name="stream_quality">流媒体质量</string>
    <string name="stream_quality_summary">选择默认的流媒体的质量</string>
    <string name="keep_queue">保留播放队列</string>
    <string name="stop_player">停止播放器</string>
    <string name="stop_player_summary">当应用程序从最近使用记录中删除时，停止播放器</string>
    <string name="skip_silence">跳过静音</string>
    <string name="skip_silence_summary">跳过歌曲中的静音部分，以提供无缝播放.</string>
    <string name="auto_start_radio">自动启动无线电</string>
    <string name="auto_start_radio_summary">自动添加播放列表中曲目的相关歌曲，以获得无限队列</string>
    <string name="installation_type_summary">应用程序安装将允许在 Echo 中打开以下链接：</string>
    <string name="installation_type_warning">如果你以文件形式安装扩展，则此功能不可用.</string>
    <string name="allow_opening_links">允许打开链接</string>
    <string name="open_links_instruction">要允许打开这些链接，您需要：\n- 向下滚动并点击“默认打开”\n- 点击“+ 添加链接”</string>
    <string name="extension_updated_successfully">%1$s 更新成功</string>
    <string name="link">链接</string>
    <string name="link_or_code">链接或代码</string>
    <string name="extension_installed">%1$s （已安装）</string>
    <string name="theme_summary">想当盲人吗？</string>
    <string name="custom_theme_color">自定义主题颜色</string>
    <string name="custom_theme_color_summary">使用自定义主题颜色，而不是系统主题.</string>
    <string name="amoled">纯黑色主题</string>
    <string name="amoled_summary">漆黑，纯黑色</string>
    <string name="navbar_gradient">渐变导航栏</string>
    <string name="navbar_gradient_summary">导航栏逐渐变得透明</string>
    <string name="dynamic_player">动态播放器颜色</string>
    <string name="dynamic_player_summary">根据曲目图片为播放器应用颜色</string>
    <string name="show_background_summary">播放器中的背景视频或曲目图片模糊</string>
    <string name="x_disabled">%1$s （已禁用）</string>
    <string name="by_x">由 %1$s</string>
    <string name="x_extension">%1$s 扩展</string>
    <string name="no_user_found">未找到用户</string>
    <string name="select_x_account">选择 %1$s 账户</string>
    <string name="add_extension">添加扩展</string>
    <string name="error_updating_extension">更新时出错</string>
    <string name="x_login">%1$s 登录</string>
    <string name="x_is_required">%1$s 被需要</string>
    <string name="playing_from">播放自</string>
    <string name="seekbar">播放进度条</string>
    <string name="repeat">循环播放</string>
    <string name="sleep_timer">定时关闭</string>
    <string name="end_of_track">轨道结束时</string>
    <string name="_15min">15 分钟</string>
    <string name="_30min">30 分钟</string>
    <string name="_45min">45 分钟</string>
    <string name="_1hr">1 小时</string>
    <string name="_2hr">2 小时</string>
    <string name="sleep_timer_cancelled">定时关闭已取消</string>
    <string name="sleep_timer_set_for">定时关闭时长已设置为 %1$s</string>
    <string name="search_x">搜索 %1$s</string>
    <plurals name="number_hour">
        <item quantity="other">%1$d 小时</item>
    </plurals>
    <string name="servers">服务器</string>
    <string name="sources">来源</string>
    <string name="backgrounds">背景</string>
    <string name="subtitles">字幕</string>
    <string name="subtitle_selection">字幕选择</string>
    <string name="quality_selection">画质选择</string>
    <string name="quality_x">画质 %1$d</string>
    <string name="off">关闭</string>
    <string name="unknown_quality">质量未知</string>
    <string name="so_empty">好空虚……</string>
    <string name="not_loading">未加载</string>
    <string name="share">分享</string>
    <string name="sharing_x">分享 %1$s</string>
    <string name="save_to_library">保存到媒体库</string>
    <string name="saved_x_to_library">已将 %1$s 保存至媒体库</string>
    <string name="remove_from_library">从媒体库中删除</string>
    <string name="removed_x_from_library">已从媒体库中删除 %1$s</string>
    <string name="radio">电台</string>
    <string name="unfollow">取消关注</string>
    <string name="unfollowing_x">正在取关 %1$s</string>
    <string name="unfollowed_x">已取关 %1$s</string>
    <string name="hide">隐藏</string>
    <string name="unhide">取消隐藏</string>
    <string name="unhiding_x">正在取消隐藏 %1$s</string>
    <string name="liking_x">正在喜欢 %1$s</string>
    <string name="liked_x">已赞 %1$s</string>
    <string name="unliked_x">已取消喜欢 %1$s</string>
    <string name="save_to_playlist">保存至播放列表</string>
    <string name="delete_playlist">删除播放列表</string>
    <string name="add_to_queue">添加至队列</string>
    <string name="loading_radio_for_x">正在加载 %1$s 的电台</string>
    <string name="adding_x_to_next">正在将 %1$s 添加到下一个</string>
    <string name="background_gradient">背景渐变</string>
    <string name="background_gradient_summary">根据上下文在背景中呈现渐变色调</string>
    <string name="all">全部</string>
    <string name="edit_playlist">编辑播放列表</string>
    <string name="more_brain_capacity">提高大脑容量</string>
    <string name="explicit">限制级</string>
    <string name="x_plays">%1$s 次播放</string>
    <string name="x_followers">%1$s 位粉丝</string>
    <string name="shuffling_x">正在随机播放 %1$s</string>
    <string name="copying_the_error">正在复制错误</string>
    <string name="sort_and_filter">排序和过滤</string>
    <string name="filter">过滤器</string>
    <string name="reversed">倒放</string>
    <string name="apply">应用</string>
    <string name="sort_title">标题</string>
    <string name="sort_date">日期</string>
    <string name="sort_duration">时长</string>
    <string name="scroll_animations">滚动动画</string>
    <string name="scroll_animations_summary">滚动时的动画效果</string>
    <string name="sort_subtitle">字幕</string>
    <string name="delete">删除</string>
    <string name="playlist_name">播放列表名称</string>
    <string name="create_playlist">创建播放列表</string>
    <string name="create">创建</string>
    <string name="add_song">添加歌曲</string>
    <string name="creating_x">正在创建 %1$s</string>
    <string name="playlist_name_empty">播放列表名称为空</string>
    <string name="deleting_x">正在删除 %1$s</string>
    <string name="deleted_x">已删除 %1$s</string>
    <string name="loading_x">正在加载 %1s</string>
    <string name="saving_x">正在保存 %1$s</string>
    <string name="saved_to_playlists">已保存至播放列表</string>
    <string name="selected_n">已选择 %1$d</string>
    <string name="adding_x">正在添加 %1$s</string>
    <string name="moving_x">正在移动 %1$s</string>
    <string name="removing_x">正在移除 %1$s</string>
    <string name="nothing_to_download_in_x">%1$s 中没有可下载的内容</string>
    <string name="tagging_x">正在标记 %1$s</string>
    <string name="downloading_update_for_x">正在下载 %1$s 的更新</string>
    <plurals name="number_min">
        <item quantity="other">%1$d 分钟</item>
    </plurals>
    <string name="video_selection">视频选择</string>
    <string name="playlist_description">播放列表描述</string>
    <string name="keep_queue_summary">当您重新打开应用程序时，恢复播放器队列.</string>
    <string name="adding_x_to_queue">正在将 %1$s 添加到队列</string>
    <string name="unliking_x">已取消喜欢 %1$s</string>
    <string name="x_extensions">%1$s扩展</string>
    <string name="sleep_timer_desc">设置定时关闭，在一定时间后停止播放</string>
    <string name="equalizer_summary">打开设备均衡器设置</string>
    <string name="sleep_on_specific_time">在特定时间关闭</string>
    <string name="sort">排序</string>
    <string name="audio_selection">音频选择</string>
    <string name="hiding_x">正在隐藏 %1$s</string>
    <string name="download_started">下载已开始</string>
    <string name="add_to_next">添加至下一个</string>
    <string name="save">保存</string>
    <string name="playing_x">正在播放 %1$s</string>
    <string name="x_created">%1$s 已创建</string>
    <string name="more_brain_capacity_summary">启用此功能可以帮助解决音频延迟并增加电池使用量（禁用音频卸载）。</string>
    <string name="saved_to_x">已保存至 %1$s</string>
    <string name="merging_x">正在合并 %1$s</string>
    <string name="no_download_extension">未找到下载扩展，请使用代码“echodown”获取.</string>
    <string name="apply_player_color_to_app_summary">延迟警告！！！</string>
    <string name="apply_player_color_to_app">将播放器颜色应用到整个应用程序</string>
    <string name="delete_download">删除下载</string>
    <string name="download_complete">下载完成</string>
    <string name="removed_x_from_downloads">已将 %1$s 从下载移除</string>
    <string name="app_widget_description">在你的主屏幕上回响！</string>
    <string name="feed">反馈</string>
    <string name="item">项目</string>
    <string name="unmetered_stream_quality_summary">连接到不限流量网络时的流媒体质量。这将覆盖默认的流媒体质量。</string>
    <string name="unmetered_stream_quality">无限制流媒体质量</string>
    <string name="select_language">语言选择</string>
    <string name="check_for_updates">检查更新</string>
    <string name="check_for_updates_summary">打开应用程序时，查找应用程序和扩展程序的新更新。</string>
    <string name="checking_for_updates">正在检查更新</string>
    <string name="back_animations">返回动画</string>
    <string name="back_animations_summary">由于安卓系统可能会导致视觉错误，你可以通过打开最近记录来修复它.</string>
    <string name="regex_invalid">%1$s 是无效的, 请跟随正则表达式: %2$s</string>
    <string name="n_hours">%1$d 小时</string>
    <string name="n_minutes">%1$d 分钟</string>
    <string name="hidden_x">已隐藏 %1$s</string>
    <string name="unhidden_x">未隐藏 %1$s</string>
    <string name="track">曲目</string>
    <string name="tracks">曲目</string>
    <string name="n_episodes">%1$d 插曲</string>
    <string name="n_chapters">%1$d 章节</string>
    <string name="n_tracks">%1$d 曲目</string>
    <plurals name="number_songs">
        <item quantity="other">%1$d 歌曲</item>
    </plurals>
    <plurals name="number_episodes">
        <item quantity="other">%1$d 插曲</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="other">%1$d 章节</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="other">%1$d 首曲目</item>
    </plurals>
    <string name="unsave">不保存</string>
    <string name="sort_date_added">添加日期</string>
    <string name="opening_webview_x">正在打开网页视图: %1$s</string>
    <string name="no_update_available_for_x">%1$s 无可用更新</string>
    <string name="other">其它的</string>
    <string name="player">播放器</string>
    <string name="about">关于</string>
    <string name="language_x">语言: %1$s</string>
    <string name="guide">指南</string>
    <string name="donate">捐赠</string>
    <string name="contributors">贡献者</string>
    <string name="app_desc">只是一个音乐播放器.</string>
    <string name="manage">管理</string>
    <string name="no_account">没有账户</string>
    <string name="other_settings">其它设置</string>
    <string name="no_x_found">没有找到 %1$s</string>
    <string name="playlist">播放列表</string>
    <string name="album">专辑</string>
    <string name="pre_release">预发布</string>
    <string name="single">单曲</string>
    <string name="ep">迷你专辑</string>
    <string name="lp">完整专辑</string>
    <string name="compilation">汇集</string>
    <string name="show">显示</string>
    <string name="book">书</string>
    <string name="song">歌曲</string>
    <string name="podcast">播客</string>
    <string name="isrc_x">国际标准录音代码: %1$s</string>
    <string name="genres_x">流派: %1$s</string>
    <string name="disc_number_n">碟片编号: %1$d</string>
    <string name="album_order_n">专辑序号: %1$d</string>
    <string name="confirmation">确认</string>
    <string name="delete_playlist_confirmation">你确认想要删除 %1$s?</string>
    <string name="confirm">确认</string>
    <string name="big_cover">更大的封面</string>
    <string name="big_cover_summary">适合屏幕较大的设备</string>
    <string name="no_last_played_track_found">没有找到最近播放歌曲。</string>
    <string name="not_yet_released">未发行</string>
    <string name="releases_on_x">发行在 %1$s</string>
    <string name="unavailable_in_your_region">您所在地区不可用</string>
    <string name="not_playable_x">不可播放: %1$s</string>
    <plurals name="number_items">
        <item quantity="other">%1$d 个项目</item>
    </plurals>
    <string name="x_specific_quality_summary">%1$s 特定的流质量，将覆盖默认的流质量选择</string>
    <string name="n_songs">%1$d 首歌曲</string>
    <string name="scroll_bar">滚动栏</string>
    <string name="scroll_bar_summary">侧面的滚动条可加快访问速度（可能会有故障）</string>
    <string name="colors">颜色</string>
    <string name="currently_playing">当前播放</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\values-zh-rTW\strings.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="downloads">下載列表</string>
    <string name="cancel">取消</string>
    <string name="back">返回</string>
    <string name="audio">音訊</string>
    <string name="songs">歌曲</string>
    <string name="albums">專輯</string>
    <string name="cached_songs">已快取的歌曲</string>
    <string name="cache_playlist_warning">實驗性功能 不支援除了聽歌之外的功能。</string>
    <string name="artists">藝人</string>
    <string name="recently_added">最近新增</string>
    <string name="refresh_library_on_reload">重新載入時重新整理媒體庫</string>
    <string name="refresh_library_on_reload_summary">每次載入饋送時掃描裝置</string>
    <string name="duration_filter">持續時間篩選器</string>
    <string name="duration_filter_summary">過濾掉持續時間（以秒為單位）小於該值的音訊檔案</string>
    <string name="blacklist_folders">黑名單資料夾</string>
    <string name="blacklist_folders_summary">要從媒體庫中排除的資料夾</string>
    <string name="blacklist_folder_keywords">黑名單資料夾關鍵字</string>
    <string name="blacklist_folder_keywords_summary">將資料夾列入黑名單的關鍵字。使用逗號作為分隔符</string>
    <string name="saved">已儲存</string>
    <string name="tabs">分頁</string>
    <string name="show_tabs">顯示分頁</string>
    <string name="show_tab_summary">將擴展的選項卡顯示為類別</string>
    <string name="unknown">未知</string>
    <string name="like">喜歡</string>
    <string name="unlike">取消喜歡</string>
    <string name="home">首頁</string>
    <string name="search">搜尋</string>
    <string name="library">媒體庫</string>
    <string name="more">更多</string>
    <string name="extension">擴充功能</string>
    <string name="downloading_x">正在下載 %1$s</string>
    <string name="cancel_all">全部取消</string>
    <string name="download_progress">下載進度</string>
    <string name="downloaded_x">已下載 %1$s</string>
    <string name="login">登入</string>
    <string name="view">檢視</string>
    <string name="extension_out_of_date">擴充功能已過期</string>
    <string name="no_internet">無網際網路連線</string>
    <string name="str_copy">複製</string>
    <string name="extensions">擴充功能</string>
    <string name="choose_a_color">選擇顏色</string>
    <string name="random">隨機</string>
    <string name="add">新增</string>
    <string name="loading">載入中…</string>
    <string name="settings">設定</string>
    <string name="value">值</string>
    <string name="playback">播放</string>
    <string name="audio_fx">音效</string>
    <string name="audio_fx_summary">將音效套用到所有歌曲</string>
    <string name="audio_fx_desc">將音效套用到目前音軌。</string>
    <string name="reset">重設</string>
    <string name="playback_speed">播放速度</string>
    <string name="change_pitch_with_speed">音調隨速度變化</string>
    <string name="bass_boost">低音增強</string>
    <string name="bass_boost_desc">較大的數值可能會破壞聽感。</string>
    <string name="change_pitch_with_speed_desc">獲得那種慢動作聲音的感覺</string>
    <string name="equalizer">等化器</string>
    <string name="equalizer_summary">打開系統均衡器設置</string>
    <string name="stream_quality">串流媒體品質</string>
    <string name="stream_quality_summary">選擇串流媒體的品質</string>
    <string name="behavior">行為</string>
    <string name="keep_queue">保存播放器佇列</string>
    <string name="keep_queue_summary">當您重新開啟應用程式時，恢復播放器佇列。</string>
    <string name="stop_player">停止玩家</string>
    <string name="stop_player_summary">當應用程式從最近使用的應用程式中移除時停止播放器</string>
    <string name="skip_silence">跳過無聲</string>
    <string name="skip_silence_summary">跳過歌曲中的靜音部分，以提供無縫播放。</string>
    <string name="auto_start_radio">自動啟動無線電</string>
    <string name="auto_start_radio_summary">自動在播放清單中新增曲目的相關歌曲，以形成無限佇列</string>
    <string name="cache_size">快取大小</string>
    <string name="cache_size_summary">以 MB 為單位，用於快取音訊與影片</string>
    <string name="version">版本</string>
    <string name="system">系統</string>
    <string name="install">安裝</string>
    <string name="app">應用程式</string>
    <string name="file">檔案</string>
    <string name="installation_type">安裝類型</string>
    <string name="installation_type_summary">應用程式安裝將允許以下連結在 Echo 中開啟：</string>
    <string name="installation_type_warning">如果將擴展安裝為檔，則不可用。</string>
    <string name="could_not_find_the_file">找不到檔案。</string>
    <string name="extension_installer">擴充功能安裝程式</string>
    <string name="extension_installed_successfully">擴充功能安裝成功。</string>
    <string name="extension_uninstalled_successfully">擴充功能已成功解除安裝。</string>
    <string name="allow_opening_links">允許開啟連結</string>
    <string name="open_links_instruction">要允許開啟這些連結，您需要：\n- 向下捲動並點擊「預設開啟」\n- 點擊「+ 新增連結」</string>
    <string name="extension_updated_successfully">%1$s 更新成功</string>
    <string name="link">連結</string>
    <string name="link_or_code">連結或代碼</string>
    <string name="list_is_empty">列表為空</string>
    <string name="extension_installed">%1$s（已安裝）</string>
    <string name="add_extensions">新增擴充程式</string>
    <string name="invalid_extension_list">無效的擴充功能列表</string>
    <string name="look_and_feel">外觀與感覺</string>
    <string name="ui">介面</string>
    <string name="theme">主題</string>
    <string name="theme_summary">想當盲人嗎？</string>
    <string name="custom_theme_color">自訂主題顏色</string>
    <string name="custom_theme_color_summary">使用自訂主題顏色，而不是系統顏色。</string>
    <string name="add_color">新增顏色</string>
    <string name="custom_colors">自訂顏色</string>
    <string name="amoled">純黑色主題</string>
    <string name="amoled_summary">將背景色替換為漆黑。可用於AMOLED螢幕，以減少電池消耗並防止螢幕老化</string>
    <string name="navbar_gradient">漸層導覽列</string>
    <string name="navbar_gradient_summary">導覽列漸層透明</string>
    <string name="dynamic_player">動態播放器顏色</string>
    <string name="dynamic_player_summary">根據音軌圖像套用播放器顏色</string>
    <string name="show_background">顯示背景</string>
    <string name="show_background_summary">播放器中的背景影片或模糊藝術作品</string>
    <string name="animation">動畫</string>
    <string name="animations">動畫</string>
    <string name="animations_summary">感覺太卡頓了嗎？關閉此功能可能會有所幫助</string>
    <string name="refresh">重新整理</string>
    <string name="music">音樂</string>
    <string name="tracker">追蹤器</string>
    <string name="lyrics">歌詞</string>
    <string name="misc">雜項</string>
    <string name="enabled">已啟用</string>
    <string name="disabled">已停用</string>
    <string name="no_user_found">找不到使用者</string>
    <string name="add_extension">新增擴充功能</string>
    <string name="webview">WebView 視圖</string>
    <string name="logout">登出</string>
    <string name="switch_account">切換帳號</string>
    <string name="incognito">無痕模式</string>
    <string name="not_logged_in">未登入</string>
    <string name="playing_from">播放自</string>
    <string name="up_next">即將播放</string>
    <string name="info">資訊</string>
    <string name="seekbar">播放進度列</string>
    <string name="shuffle">隨機播放</string>
    <string name="previous">上一首</string>
    <string name="play">播放</string>
    <string name="next">下一首</string>
    <string name="repeat">重複播放</string>
    <string name="close">關閉</string>
    <string name="no_lyrics">無歌詞</string>
    <string name="sleep_timer">定時關閉</string>
    <string name="end_of_track">目前音軌結束時</string>
    <string name="_15min">15 分鐘</string>
    <string name="_30min">30 分鐘</string>
    <string name="_45min">45 分鐘</string>
    <string name="_1hr">1 小時</string>
    <string name="_2hr">2 小時</string>
    <string name="sleep_timer_desc">設定定時關閉以在一段時間後停止播放</string>
    <string name="sleep_on_specific_time">在特定時間睡眠</string>
    <string name="sleep_timer_set_for">定時關閉時長設定為 %1$s</string>
    <string name="sources">來源</string>
    <string name="backgrounds">背景</string>
    <string name="subtitles">字幕</string>
    <string name="audio_selection">音訊選擇</string>
    <string name="video_selection">影片選擇</string>
    <string name="subtitle_selection">字幕選擇</string>
    <string name="off">關閉</string>
    <string name="not_loading">未載入</string>
    <string name="share">分享</string>
    <string name="save_to_library">儲存到媒體庫中</string>
    <string name="remove_from_library">從媒體庫中移除</string>
    <string name="radio">電台</string>
    <string name="download">下載</string>
    <string name="follow">追蹤</string>
    <string name="unfollow">取消追蹤</string>
    <string name="hide">隱藏</string>
    <string name="unhide">取消隱藏</string>
    <string name="save_to_playlist">儲存到播放清單</string>
    <string name="delete_playlist">刪除播放清單</string>
    <string name="add_to_queue">新增至佇列</string>
    <string name="edit_playlist">編輯播放清單</string>
    <string name="sort">排序</string>
    <string name="explicit">未刪減限制級</string>
    <string name="save">儲存</string>
    <string name="sort_title">標題</string>
    <string name="sort_date">日期</string>
    <string name="sort_duration">持續時間</string>
    <string name="sort_subtitle">副標題</string>
    <string name="playlist_name">播放清單名稱</string>
    <string name="playlist_description">播放清單簡介</string>
    <string name="create_playlist">建立播放清單</string>
    <string name="create">建立</string>
    <string name="playlist_name_empty">播放清單名稱不能為空</string>
    <string name="saved_to_playlists">已儲存到播放清單</string>
    <string name="no_download_extension">未找到下載外掛程式，請使用 \"echodown\".</string>
    <string name="nothing_to_download_in_x">%1$s 中無可下載項目</string>
    <string name="download_started">下載已開始</string>
    <string name="okay">好的</string>
    <string name="video">視頻</string>
    <string name="write_storage">寫入存儲</string>
    <string name="remove">刪除</string>
    <string name="x_radio">%1$s 無線電</string>
    <string name="unified_liked_playlist_summary">您喜歡的各種擴展名的曲目</string>
    <string name="n_items">%1$d 個專案</string>
    <string name="playlist_liked_desc">您點讚的曲目</string>
    <string name="repeat_all">全部重複</string>
    <string name="error_loading_extension_from_x">從 %1$s 載入擴展時發生錯誤</string>
    <string name="extension_x_not_found">找不到延伸 %1$s</string>
    <string name="required_extensions_missing_x">缺少所需的擴展： %1$s</string>
    <string name="x_is_not_supported_in_x">%2$s 不支援 %1$s</string>
    <string name="account_session_expired_in_x">帳戶會話在 %1$s 中過期</string>
    <string name="x_disabled">%1$s （已關閉 ）</string>
    <string name="by_x">由 %1$s</string>
    <string name="x_extensions">%1$s 擴展</string>
    <string name="x_extension">%1$s 擴展</string>
    <string name="select_x_account">選擇 %1$s 帳戶</string>
    <string name="error_updating_extension">更新時出錯</string>
    <string name="x_is_required">需要 %1$s</string>
    <string name="sleep_timer_cancelled">休眠定時器已取消</string>
    <plurals name="number_min">
        <item quantity="other">%1$d 最小值</item>
    </plurals>
    <string name="servers">伺服器</string>
    <string name="quality_selection">質量選擇</string>
    <string name="quality_x">品質 %1$d</string>
    <string name="unknown_quality">品質未知</string>
    <string name="sharing_x">正在共用 %1$s</string>
    <string name="removed_x_from_library">已從庫中刪除 %1$s</string>
    <string name="following_x">在 %1$s 之後</string>
    <string name="followed_x">關注 %1$s</string>
    <string name="unfollowing_x">取消關注 %1$s</string>
    <string name="unfollowed_x">未關注 %1$s</string>
    <string name="hiding_x">隱藏 %1$s</string>
    <string name="liking_x">點讚 %1$s</string>
    <string name="liked_x">點讚 %1$s</string>
    <string name="unliking_x">未點讚的 %1$s</string>
    <string name="unliked_x">未點讚的 %1$s</string>
    <string name="adding_x_to_next">將 %1$s 新增到下一個</string>
    <string name="background_gradient">背景漸變</string>
    <string name="background_gradient_summary">背景中的漸變顏色色調，具體取決於上下文</string>
    <string name="all">都</string>
    <string name="more_brain_capacity">更多的腦容量</string>
    <string name="x_plays">%1$s 次播放</string>
    <string name="x_followers">%1$s 個粉絲</string>
    <string name="shuffling_x">洗牌 %1$s</string>
    <string name="copying_the_error">複製錯誤</string>
    <string name="sort_and_filter">排序和篩選</string>
    <string name="filter">濾波器</string>
    <string name="reversed">反</string>
    <string name="x_created">已建立 %1$s</string>
    <string name="deleted_x">已刪除 %1$s</string>
    <string name="loading_x">正在載入 %1s</string>
    <string name="saving_x">節省 %1$s</string>
    <string name="saved_to_x">儲存到 %1$s</string>
    <string name="selected_n">已選擇 %1$d</string>
    <string name="adding_x">添加 %1$s</string>
    <string name="moving_x">移動 %1$s</string>
    <string name="merging_x">合併 %1$s</string>
    <string name="apply_player_color_to_app">將播放機顏色應用於整個應用程式</string>
    <string name="apply_player_color_to_app_summary">延遲警報！！</string>
    <string name="scroll_animations_summary">滾動時的動畫</string>
    <string name="audio_permission_summary">訪問本地音樂庫</string>
    <string name="error_x">錯誤： %1$s</string>
    <plurals name="number_hour">
        <item quantity="other">%1$d 小時</item>
    </plurals>
    <string name="unhiding_x">取消隱藏 %1$s</string>
    <string name="notifications">通知</string>
    <string name="x_was_not_granted">未授予 %1$s</string>
    <string name="more_by_x">更多 %1$s</string>
    <string name="playlist_liked">喜歡</string>
    <string name="search_x">搜尋 %1$s</string>
    <string name="x_permission_required">需要 %1$s 許可權</string>
    <string name="logout_and_login">註銷和登錄</string>
    <string name="x_login">%1$s 登錄</string>
    <string name="adding_x_to_queue">將 %1$s 新增到佇列</string>
    <string name="downloading_update_for_x">正在下載 %1$s 的更新</string>
    <string name="add_song">添加歌曲</string>
    <string name="more_brain_capacity_summary">啟用此功能可以修復音訊延遲，但會大大增加電池使用量（禁用音訊卸載）。</string>
    <string name="removing_x">正在刪除 %1$s</string>
    <string name="apply">應用</string>
    <string name="deleting_x">正在刪除 %1$s</string>
    <string name="so_empty">好空…</string>
    <string name="loading_radio_for_x">正在為 %1$s 載入無線電</string>
    <string name="playing_x">正在玩 %1$s</string>
    <string name="scroll_animations">滾動動畫</string>
    <string name="repeat_one">重複1</string>
    <string name="saved_x_to_library">已將 %1$s 儲存到庫</string>
    <string name="read_storage">讀取存儲</string>
    <string name="write_storage_permission_summary">創建和編輯本地播放清單</string>
    <string name="notifications_permission_summary">顯示下載和音樂通知</string>
    <string name="repeat_off">關閉循環</string>
    <string name="x_login_required">需要登錄 %1$s</string>
    <string name="value_not_set">未設置</string>
    <string name="creating_x">正在建立 %1$s</string>
    <string name="add_to_next">添加到下一個</string>
    <string name="delete">刪除</string>
    <string name="tagging_x">正在標記 %1$s</string>
    <string name="delete_download">刪除下載</string>
    <string name="removed_x_from_downloads">已從下載中刪除 %1$s</string>
    <string name="download_complete">下載完整</string>
    <string name="app_widget_description">在您的主螢幕上回聲！</string>
    <string name="feed">回饋</string>
    <string name="item">項目</string>
    <plurals name="number_items">
        <item quantity="other">%1$d 個項目</item>
    </plurals>
    <string name="x_specific_quality_summary">%1$s 指定的串流品質，將會覆蓋預設的串流品質選項</string>
    <string name="unmetered_stream_quality">無限制串流品質</string>
    <string name="unmetered_stream_quality_summary">當連線到不限流量的網路時所使用的串流品質。這將會覆蓋預設的串流品質。</string>
    <string name="select_language">選取語言</string>
    <string name="check_for_updates">檢查更新</string>
    <string name="check_for_updates_summary">在開啟應用程式時，檢查應用程式與擴充功能是否有新更新。</string>
    <string name="checking_for_updates">正在檢查更新</string>
    <string name="colors">顏色</string>
    <string name="scroll_bar">捲軸</string>
    <string name="scroll_bar_summary">側邊捲軸以便更快存取（可能會有小故障）</string>
    <string name="back_animations">返回動畫</string>
    <string name="back_animations_summary">可能會因為 Android 而導致視覺錯誤，但您只要打開最近記錄即可修復。</string>
    <string name="regex_invalid">%1$s 無效，請依照正則表達式：%2$s</string>
    <string name="n_hours">%1$d 小時</string>
    <string name="n_minutes">%1$d 分鐘</string>
    <string name="hidden_x">已隱藏 %1$s</string>
    <string name="unhidden_x">已取消隱藏 %1$s</string>
    <string name="track">曲目</string>
    <string name="tracks">曲目</string>
    <string name="n_songs">%1$d 首歌曲</string>
    <string name="n_episodes">%1$d 插曲</string>
    <string name="n_chapters">%1$d 章節</string>
    <plurals name="number_songs">
        <item quantity="other">%1$d 首歌曲</item>
    </plurals>
    <string name="n_tracks">%1$d 曲目</string>
    <plurals name="number_episodes">
        <item quantity="other">%1$d 插曲</item>
    </plurals>
    <plurals name="number_chapters">
        <item quantity="other">%1$d 章節</item>
    </plurals>
    <plurals name="number_tracks">
        <item quantity="other">%1$d 首歌曲</item>
    </plurals>
    <string name="unsave">取消儲存</string>
    <string name="sort_date_added">新增日期</string>
    <string name="opening_webview_x">正在開啟網頁檢視：%1$s</string>
    <string name="other">其他</string>
    <string name="no_update_available_for_x">%1$s 沒有可用的更新</string>
    <string name="about">關於</string>
    <string name="player">播放器</string>
    <string name="language_x">語言：%1$s</string>
    <string name="guide">指南</string>
    <string name="donate">捐贈</string>
    <string name="contributors">貢獻者</string>
    <string name="app_desc">只是個音樂播放器。</string>
    <string name="manage">管理</string>
    <string name="other_settings">其他設定</string>
    <string name="no_x_found">未找到 %1$s</string>
    <string name="no_account">沒有帳號</string>
    <string name="playlist">播放清單</string>
    <string name="album">專輯</string>
    <string name="pre_release">預先發佈</string>
    <string name="single">單曲</string>
    <string name="ep">迷你專輯</string>
    <string name="lp">完整專輯</string>
    <string name="compilation">合輯</string>
    <string name="show">顯示</string>
    <string name="book">書籍</string>
    <string name="song">歌曲</string>
    <string name="podcast">播客</string>
    <string name="isrc_x">ISRC: %1$s</string>
    <string name="genres_x">曲風：%1$s</string>
    <string name="disc_number_n">碟號：%1$d</string>
    <string name="album_order_n">專輯排序號：%1$d</string>
    <string name="confirmation">確認</string>
    <string name="delete_playlist_confirmation">您確定要刪除 %1$s 嗎？</string>
    <string name="confirm">確認</string>
    <string name="big_cover">更大的封面</string>
    <string name="big_cover_summary">適合螢幕較大的裝置</string>
    <string name="no_last_played_track_found">未找到上次播放的曲目。</string>
    <string name="not_yet_released">尚未發行</string>
    <string name="releases_on_x">將於 %1$s 發行</string>
    <string name="unavailable_in_your_region">您所在的地區無法使用</string>
    <string name="currently_playing">正在播放</string>
    <string name="not_playable_x">無法播放：%1$s</string>
</resources>


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\xml\automotive_app_desc.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<automotiveApp xmlns:tools="http://schemas.android.com/tools">
    <uses name="media"/>
    <uses name="video" tools:ignore="InvalidUsesTagAttribute" />
</automotiveApp>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\xml\provider_paths.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<paths>
    <cache-path name="cache" path="./apks/" />
</paths>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\xml\widget_circle.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:initialLayout="@layout/widget_circle"
    android:minWidth="108dp"
    android:minHeight="108dp"
    android:previewLayout="@layout/widget_circle"
    android:resizeMode="horizontal|vertical"
    android:targetCellWidth="2"
    android:targetCellHeight="2"
    android:updatePeriodMillis="0"
    android:widgetCategory="home_screen"
    tools:ignore="UnusedAttribute" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\xml\widget_horizontal.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:initialLayout="@layout/widget_horizontal_narrow_short"
    android:minWidth="200dp"
    android:minHeight="64dp"
    android:previewLayout="@layout/widget_horizontal_narrow_short"
    android:resizeMode="horizontal|vertical"
    android:targetCellWidth="4"
    android:targetCellHeight="1"
    android:updatePeriodMillis="0"
    android:widgetCategory="home_screen"
    tools:ignore="UnusedAttribute" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\main\res\xml\widget_vertical.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:initialLayout="@layout/widget_vertical_large"
    android:minWidth="110dp"
    android:minHeight="110dp"
    android:previewLayout="@layout/widget_vertical_large"
    android:resizeMode="horizontal|vertical"
    android:targetCellWidth="3"
    android:targetCellHeight="3"
    android:updatePeriodMillis="0"
    android:widgetCategory="home_screen"
    tools:ignore="UnusedAttribute" />

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\app\src\nightly\res\values\colors.xml
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="app_color">#9999FF</color>
    <color name="app_color_highlight">#FFFFBFDB</color>
    <color name="app_color_shadow">#FF477BD1</color>
</resources>

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\audit\full_project_code.txt
================================================================================

ERROR READING FILE

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\build.gradle.kts
================================================================================

import com.android.build.api.dsl.androidLibrary

plugins {
    alias(libs.plugins.android.kmp.library)
    alias(libs.plugins.kotlin.multiplatform)
    alias(libs.plugins.kotlinx.serialization)
    id("com.vanniktech.maven.publish") version "0.34.0"
    id("org.jetbrains.dokka") version "2.0.0"
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}

kotlin {
    jvmToolchain(17)

    @Suppress("UnstableApiUsage")
    androidLibrary {
        namespace = "echo.common"
        compileSdk = 36
        minSdk = 24
    }
    jvm()

    sourceSets {
        commonMain {
            dependencies {
                api(libs.bundles.kotlinx)
                api(libs.okhttp)
                api(libs.protobuf.java)
            }
        }
    }
}

// build.gradle.kts

mavenPublishing {
    publishToMavenCentral(true)
    signAllPublications()

    coordinates("dev.brahmkshatriya.echo", "common", "1.0.0")

    pom {
        name = "Echo common library"
        description = "A common library for echo extensions."
        inceptionYear = "2025"
        url = "https://github.com/brahmkshatriya/echo"
        licenses {
            license {
                name = "Unabandon Public License"
                url = "https://github.com/brahmkshatriya/echo/blob/main/LICENSE.md"
                distribution = "https://github.com/brahmkshatriya/echo/blob/main/LICENSE.md"
            }
        }
        developers {
            developer {
                id = "brahmkshatriya"
                name = "Shivam"
                url = "https://github.com/brahmkshatriya/"
            }
        }
        scm {
            url = "https://github.com/brahmkshatriya/echo/"
            connection = "scm:git:git://github.com/brahmkshatriya/echo.git"
            developerConnection = "scm:git:ssh://git@github.com/brahmkshatriya/echo.git"
        }
    }
}

dokka {
    moduleName.set("common")
    moduleVersion.set("1.0")
    dokkaSourceSets.commonMain {
        includes.from("README.md")
        sourceLink {
            localDirectory.set(file("src/main/java"))
            remoteUrl("https://github.com/brahmkshatriya/echo/tree/main/common/src/main/java")
            remoteLineSuffix.set("#L")
        }
    }
    pluginsConfiguration.html {
        customStyleSheets.from("styles.css")
        footerMessage.set("made by <a style=\"color: inherit; text-decoration: underline;\" href=\"https://github.com/brahmkshatriya\">@brahmkshatriya</a>")
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\README.md
================================================================================

# Module common

This package contains common classes and interfaces that are used by all the extensions of Echo.

## Getting Started

### Template

To create a new extension, you can use the following template repo:

[https://github.com/brahmkshatriya/echo-extension-template](https://github.com/brahmkshatriya/echo-extension-template)

### Manual

- Add the dependency in your project.
  build.gradle.kts
    ```kotlin
    implementation("dev.brahmkshatriya.echo:common:1.0.0")
    ```

## How does it work?

Currently, the common package is JVM only. The app recognizes an App or an `apk` file as an extension by its `AndroidManifest.xml` file.
To determine what type of extension it is, the app looks for the following feature in the manifest file:
- For Music Extension:
  ```xml
  <uses-feature android:name="dev.brahmkshatriya.echo.music"/>
  ```
- For Lyrics Extension:
  ```xml
  <uses-feature android:name="dev.brahmkshatriya.echo.lyrics"/>
  ```
- For Tracker Extension:
  ```xml
  <uses-feature android:name="dev.brahmkshatriya.echo.trackers"/>
  ```
- For Misc Extension:
  ```xml
  <uses-feature android:name="dev.brahmkshatriya.echo.misc"/>
  ```

There are 2 ways the app can import an extension:
- File: The app stores the apk file in the internal storage and loads the class from the dex file.
- Installed Package: The app loads the class from the installed apps on the device.

Installed packages have priority over file based, if both extensions have same the id.

The `AndroidManifest.xml` file of the extension should contain the following metadata:
- class: The class path of the `ExtensionClient`.
```xml
<meta-data
    android:name="class"
    android:value="com.example.MyExtension" />
```

- id: The unique id of the extension.(Avoid using special characters or spaces)
```xml
<meta-data
    android:name="id"
    android:value="my_example" />
```
and [others...](https://github.com/brahmkshatriya/echo-extension-template/blob/main/app/src/main/AndroidManifest.xml)

### Flow of the app:
1. Load the extensions from the installed packages and internal storage.
2. Dynamically load the [`ExtensionClient`](./src/commonMain/kotlin/dev/brahmkshatriya/echo/common/clients/ExtensionClient.kt) instance using the class path from the metadata.
3. Inject the extension with [`Settings`](./src/commonMain/kotlin/dev/brahmkshatriya/echo/common/settings/Setting.kt) 
4. Inject the extension with other [provider interfaces](./src/commonMain/kotlin/dev/brahmkshatriya/echo/common/providers)
5. The extension is available to use in the app.

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\Extension.kt
================================================================================

package dev.brahmkshatriya.echo.common

import dev.brahmkshatriya.echo.common.clients.AlbumClient
import dev.brahmkshatriya.echo.common.clients.ArtistClient
import dev.brahmkshatriya.echo.common.clients.DownloadClient
import dev.brahmkshatriya.echo.common.clients.ExtensionClient
import dev.brahmkshatriya.echo.common.clients.FollowClient
import dev.brahmkshatriya.echo.common.clients.HideClient
import dev.brahmkshatriya.echo.common.clients.HomeFeedClient
import dev.brahmkshatriya.echo.common.clients.LibraryFeedClient
import dev.brahmkshatriya.echo.common.clients.LikeClient
import dev.brahmkshatriya.echo.common.clients.LoginClient
import dev.brahmkshatriya.echo.common.clients.LyricsClient
import dev.brahmkshatriya.echo.common.clients.LyricsSearchClient
import dev.brahmkshatriya.echo.common.clients.PlaylistClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditCoverClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditPrivacyClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditorListenerClient
import dev.brahmkshatriya.echo.common.clients.QuickSearchClient
import dev.brahmkshatriya.echo.common.clients.RadioClient
import dev.brahmkshatriya.echo.common.clients.SaveClient
import dev.brahmkshatriya.echo.common.clients.SearchFeedClient
import dev.brahmkshatriya.echo.common.clients.ShareClient
import dev.brahmkshatriya.echo.common.clients.TrackChapterClient
import dev.brahmkshatriya.echo.common.clients.TrackClient
import dev.brahmkshatriya.echo.common.clients.TrackerClient
import dev.brahmkshatriya.echo.common.clients.TrackerMarkClient
import dev.brahmkshatriya.echo.common.helpers.ClientException
import dev.brahmkshatriya.echo.common.helpers.Injectable
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.ExtensionType
import dev.brahmkshatriya.echo.common.models.Metadata
import dev.brahmkshatriya.echo.common.providers.GlobalSettingsProvider
import dev.brahmkshatriya.echo.common.providers.LyricsExtensionsProvider
import dev.brahmkshatriya.echo.common.providers.MessageFlowProvider
import dev.brahmkshatriya.echo.common.providers.MetadataProvider
import dev.brahmkshatriya.echo.common.providers.MiscExtensionsProvider
import dev.brahmkshatriya.echo.common.providers.MusicExtensionsProvider
import dev.brahmkshatriya.echo.common.providers.NetworkConnectionProvider
import dev.brahmkshatriya.echo.common.providers.TrackerExtensionsProvider

/**
 * A base class for any of the following Extension types
 * - [MusicExtension] - To play music and load music data (Supports tracking and lyrics too)
 * - [TrackerExtension] - To track what the user is listening to
 * - [LyricsExtension] - To show lyrics for the currently playing track
 *
 * @param T The type of the extension client
 * @property metadata The metadata of the extension
 * @property instance An injectable instance of the [T] client
 */
sealed class Extension<T : ExtensionClient>(
    open val metadata: Metadata,
    open val instance: Injectable<T>
) {
    /**
     * The id of the extension
     */
    val id: String get() = metadata.id

    /**
     * The type of the extension
     */
    val type: ExtensionType get() = metadata.type

    /**
     * Whether the extension is enabled
     */
    val isEnabled: Boolean get() = metadata.isEnabled

    /**
     * The name of the extension
     */
    val name: String get() = metadata.name

    /**
     * The version of the extension
     */
    val version: String get() = metadata.version
}

/**
 * A data class representing a Music Extension.
 * If some function is not supported by the extension, it should throw a [ClientException].
 *
 * Music Extension supports the following types of clients:
 * - [ExtensionClient] - Mandatory Base Client
 * - [LoginClient] - For login support
 *
 * ### Feed
 * To show feed of media items on main screen, the extension should implement the following clients:
 * - [HomeFeedClient] - To load the feed on the Home Tab
 * - [SearchFeedClient]/[QuickSearchClient] - To load the feed on the Search Tab
 * - [LibraryFeedClient] - To load the feed on the Library Tab
 *
 * ### Track Streaming
 * When streaming a track, the extension can implement the following clients:
 * - [TrackClient] - Mandatory to stream tracks
 * - [TrackChapterClient] - To mark tracks as played
 *
 * ### Media Items
 * To load media items, the extension should implement the following clients:
 * - [AlbumClient] - To load albums
 * - [PlaylistClient] - To load playlists
 * - [ArtistClient] - To load artists
 * - [RadioClient] - To load next tracks for the current track & show to radio button on media items with [EchoMediaItem.isRadioSupported] set to true
 *
 * ### Library
 * To allow library functionality, The extension can implement the following clients:
 * - [FollowClient] - To follow/unfollow items with [EchoMediaItem.isFollowable] set to true
 * - [SaveClient] - To save media items with [EchoMediaItem.isSaveable] set to true
 * - [LikeClient] - To like/unlike items with [EchoMediaItem.isLikeable] set to true
 * - [HideClient] - To hide items with [EchoMediaItem.isHideable] set to true
 * - [ShareClient] - To share items with [EchoMediaItem.isShareable] set to true
 *
 * ### Tracking and Lyrics
 * - [TrackerClient] - For tracking what the user is listening to
 * - [TrackerMarkClient] - For marking tracks as played
 * - [LyricsClient] - For lyrics support
 * - [LyricsSearchClient] - For searching lyrics using user query
 *
 * ### Playlist Editing
 * To allow playlist editing, The extension can implement the following clients:
 * - [PlaylistEditClient] - To edit playlists and show create playlist button on Library Tab
 * - [PlaylistEditCoverClient] - To edit playlist cover
 * - [PlaylistEditorListenerClient] - To listen to playlist editing events
 * - [PlaylistEditPrivacyClient] - To edit playlist privacy
 *
 * ## Providers
 * The extension can also implement the following providers:
 * - [MetadataProvider] - To get metadata of the extension
 * - [MessageFlowProvider] - To send popup messages in the app
 * - [MusicExtensionsProvider] - To get installed music extensions
 * - [LyricsExtensionsProvider] - To get installed lyrics extensions
 * - [TrackerExtensionsProvider] - To get installed tracker extensions
 * - [MiscExtensionsProvider] - To get installed misc extensions
 * - [GlobalSettingsProvider] - To get global settings of the app
 * - [NetworkConnectionProvider] - To get network connection status
 *
 * @param metadata The metadata of the extension
 * @param instance An injectable instance of the [ExtensionClient] client
 */
data class MusicExtension(
    override val metadata: Metadata,
    override val instance: Injectable<ExtensionClient>
) : Extension<ExtensionClient>(metadata, instance)

/**
 * A data class representing a Tracker Extension.
 *
 * Tracker Extension supports the following types of clients:
 * - [TrackerClient] - Mandatory, For tracking what the user is listening to
 * - [TrackerMarkClient] - For marking tracks as played
 * - [LoginClient] - For login support
 *
 * The extension can also implement the following providers:
 * - [MetadataProvider] - To get metadata of the extension
 * - [MessageFlowProvider] - To send messages in the app
 * - [MusicExtensionsProvider] - To get installed music extensions
 * - [LyricsExtensionsProvider] - To get installed lyrics extensions
 * - [TrackerExtensionsProvider] - To get installed tracker extensions
 * - [MiscExtensionsProvider] - To get installed misc extensions
 * - [GlobalSettingsProvider] - To get global settings of the app
 * - [NetworkConnectionProvider] - To get network connection status
 *
 * @param metadata The metadata of the extension
 * @param instance An injectable instance of the [TrackerClient] client
 */
data class TrackerExtension(
    override val metadata: Metadata,
    override val instance: Injectable<TrackerClient>
) : Extension<TrackerClient>(metadata, instance)

/**
 * A data class representing a Lyrics Extension.
 * Lyrics Extension supports the following types of clients:
 * - [LyricsClient] - Mandatory, For lyrics support
 * - [LyricsSearchClient] - For searching lyrics using user query
 * - [LoginClient] - For login support
 *
 * The extension can also implement the following providers:
 * - [MetadataProvider] - To get metadata of the extension
 * - [MessageFlowProvider] - To send messages in the app
 * - [MusicExtensionsProvider] - To get installed music extensions
 * - [LyricsExtensionsProvider] - To get installed lyrics extensions
 * - [TrackerExtensionsProvider] - To get installed tracker extensions
 * - [MiscExtensionsProvider] - To get installed misc extensions
 * - [GlobalSettingsProvider] - To get global settings of the app
 * - [NetworkConnectionProvider] - To get network connection status
 *
 * @param metadata The metadata of the extension
 * @param instance An injectable instance of the [LyricsClient] client
 */
data class LyricsExtension(
    override val metadata: Metadata,
    override val instance: Injectable<LyricsClient>
) : Extension<LyricsClient>(metadata, instance)


/**
 * A data class representing a Misc Extension.
 * Misc Extension supports the following types of clients:
 * - [ExtensionClient] - Mandatory Base Client
 * - [DownloadClient] - For downloading tracks
 * - [LoginClient] - For login support
 *
 * The extension can also implement the following providers:
 * - [MetadataProvider] - To get metadata of the extension
 * - [MessageFlowProvider] - To send messages in the app
 * - [MusicExtensionsProvider] - To get installed music extensions
 * - [LyricsExtensionsProvider] - To get installed lyrics extensions
 * - [TrackerExtensionsProvider] - To get installed tracker extensions
 * - [MiscExtensionsProvider] - To get installed misc extensions
 * - [GlobalSettingsProvider] - To get global settings of the app
 * - [NetworkConnectionProvider] - To get network connection status
 *
 * @param metadata The metadata of the extension
 * @param instance An injectable instance of the [ExtensionClient] client
 */
data class MiscExtension(
    override val metadata: Metadata,
    override val instance: Injectable<ExtensionClient>
) : Extension<ExtensionClient>(metadata, instance)

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\AlbumClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.models.Album
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Track

/**
 * Used to load an [Album], load its tracks and get its shelves.
 *
 * @see MusicExtension
 */
interface AlbumClient {

    /**
     * Loads an album, the unloaded album may only have the id and title.
     *
     * @param album the album to load.
     * @return the loaded album.
     */
    suspend fun loadAlbum(album: Album): Album

    /**
     * Loads the tracks of an album.
     *
     * @param album the loaded album to load the tracks of.
     * @return the paged tracks or null if the tracks cannot be loaded for this [album].
     *
     * @see Feed
     * @see Track
     */
    suspend fun loadTracks(album: Album): Feed<Track>?

    /**
     * Gets the feed of an album.
     *
     * @param album the album to get the feed of.
     * @return the feed of the album, or null if not available.
     *
     * @see Feed
     * @see Album
     */
    suspend fun loadFeed(album: Album): Feed<Shelf>?
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\ArtistClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.models.Artist
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Shelf

/**
 * Used to load an [Artist] and get its shelves.
 *
 * @see FollowClient
 * @see MusicExtension
 */
interface ArtistClient {

    /**
     * Loads an artist, the unloaded artist may only have the id and title.
     *
     * @param artist the artist to load.
     * @return the loaded artist.
     */
    suspend fun loadArtist(artist: Artist): Artist
    
    /**
     * Gets the shelves of an artist.
     *
     * @param artist the artist to get the shelves of.
     * @return the feed containing the shelves.
     *
     * @see Feed
     */
    suspend fun loadFeed(artist: Artist) : Feed<Shelf>
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\DownloadClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.models.DownloadContext
import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Progress
import dev.brahmkshatriya.echo.common.models.Streamable
import kotlinx.coroutines.flow.MutableStateFlow
import java.io.File

/**
 * The client for downloading tracks. Needs to support the following:
 * - Get the download tracks for the given media item.
 * - Get the download folder for the given context of downloading track.
 * - Which server to use for downloading.
 * - Which sources to use for downloading.
 * - Download the given sources.
 * - Merge the given media files into a single file.
 * - Tag a file with the given track metadata.
 * - The maximum number of concurrent downloads allowed.
 */
interface DownloadClient : ExtensionClient {

    /**
     * Get the download tracks for the given [item].
     *
     * @param extensionId The client ID.
     * @param item The media item to get the download tracks for.
     * @param context The context of the downloading track, can be null if not applicable.
     *
     * @return The download tracks.
     *
     * @see DownloadContext
     * @see EchoMediaItem
     */
    suspend fun getDownloadTracks(
        extensionId: String, item: EchoMediaItem, context: EchoMediaItem?
    ): List<DownloadContext>

    /**
     * The maximum number of concurrent downloads allowed.
     */
    val concurrentDownloads: Int

    /**
     * Which server to use for downloading.
     * use this to get the available servers.
     * ```
     * val servers = context.track.servers
     * ```
     * @param context The context of the downloading track.
     *
     * @see Streamable
     */
    suspend fun selectServer(context: DownloadContext): Streamable

    /**
     * Which source to use for downloading.
     *
     * @param context The context of the downloading track.
     * @param server The server to choose sources from.
     *
     * @return The selected sources.
     *
     * @see Streamable.Media.Server
     * @see Streamable.Source
     */
    suspend fun selectSources(
        context: DownloadContext, server: Streamable.Media.Server
    ): List<Streamable.Source>

    /**
     * Download the given [source].
     *
     * @param progressFlow The flow to emit the download progress.
     * @param context The context of the downloading track.
     * @param source The source to download.
     */
    suspend fun download(
        progressFlow: MutableStateFlow<Progress>,
        context: DownloadContext,
        source: Streamable.Source
    ): File

    /**
     * Merge the given media [files] into a single file.
     * The old files should be deleted after merging.
     *
     * @param progressFlow The flow to emit the merge progress.
     * @param context The context of the downloading track.
     * @param files The files to merge.
     */
    suspend fun merge(
        progressFlow: MutableStateFlow<Progress>,
        context: DownloadContext,
        files: List<File>
    ): File

    /**
     * Tag a file with the given track metadata
     * use this to tag the file with the track metadata
     * ```
     * val track = context.track
     * ```
     *
     * @param context The extension that the track belongs to.
     * @param file The file to tag
     */
    suspend fun tag(
        progressFlow: MutableStateFlow<Progress>,
        context: DownloadContext,
        file: File
    ): File
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\ExtensionClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.Extension
import dev.brahmkshatriya.echo.common.helpers.ContinuationCallback.Companion.await
import dev.brahmkshatriya.echo.common.providers.SettingsProvider
import okhttp3.OkHttpClient

/**
 * Interface to be implemented by every [Extension], create your network client, database client, etc. here.
 *
 * If using [OkHttpClient], use the custom [await] function for suspending the network call.
 * ```kotlin
 * val request = Request.Builder().url("https://example.com").build()
 * val response = client.newCall(request).await()
 * ```
 *
 * This interface extends the [SettingsProvider] interface
 */
interface ExtensionClient : SettingsProvider {
    /**
     * Only called when an extension is selected by the user, not when the extension is loaded
     * Use the `onInitialize` for doing stuff to initialize the extension
     *
     * can be called multiple times, if the user re-selects the extension
     */
    suspend fun onExtensionSelected() {}

    /**
     * Called when the extension is loaded, called after all the injections are done.
     * Only called once
     */
    suspend fun onInitialize() {}
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\FollowClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.models.EchoMediaItem

/**
 * Used to allow following and unfollowing an [EchoMediaItem]
 * with the [EchoMediaItem.isFollowable] set to true.
 *
 * @see MusicExtension
 */
interface FollowClient {

    /**
     * Checks if an item is followed.
     * This will only be called if the [EchoMediaItem.isFollowable] is true.
     *
     * @param item the item to check.
     * @return true if the item is followed, false otherwise.
     */
    suspend fun isFollowing(item: EchoMediaItem): Boolean

    /**
     * Gets the followers count of an item.
     * This will only be called if the [EchoMediaItem.isFollowable] is true.
     *
     * @param item the item to get the followers count of.
     * @return the number of followers or null if it cannot be determined.
     */
    suspend fun getFollowersCount(item: EchoMediaItem): Long?

    /**
     * Follows/Unfollow an Item.
     * This will only be called if the [EchoMediaItem.isFollowable] is true.
     *
     * @param item the item to follow.
     * @param shouldFollow whether to follow or unfollow the artist.
     */
    suspend fun followItem(item: EchoMediaItem, shouldFollow: Boolean)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\HideClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.models.EchoMediaItem

/**
 * Used to hide an item from the user's feed.
 * with the [EchoMediaItem.isHideable] set to true.
 */
interface HideClient {

    /**
     * Hides or unhides a item from the user's feed.
     *
     * @param item the item to hide or unhide.
     * @param shouldHide whether the item should be hidden or unhidden.
     */
    suspend fun hideItem(item: EchoMediaItem, shouldHide: Boolean)

    /**
     * Checks if a item is hidden.
     *
     * @param item the item to check.
     * @return true if the track is hidden, false otherwise.
     */
    suspend fun isItemHidden(item: EchoMediaItem): Boolean
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\HomeFeedClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Shelf

/**
 * Used to show the home feed and get its tabs.
 *
 * @see Feed
 * @see MusicExtension
 */
interface HomeFeedClient {

    /**
     * Gets the home feed.
     * Checkout [Feed] for more information.
     */
    suspend fun loadHomeFeed(): Feed<Shelf>
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\LibraryFeedClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Shelf

/**
 * Used to show the library feed and get its tabs.
 *
 * @see Feed
 * @see MusicExtension
 */
interface LibraryFeedClient {

    /**
     * Gets the library feed.
     * Checkout [Feed] for more information.
     */
    suspend fun loadLibraryFeed(): Feed<Shelf>

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\LikeClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.models.EchoMediaItem

/**
 * Used to like or unlike a item. with the [EchoMediaItem.isLikeable] set to true.
 */
interface LikeClient {
    /**
     * Likes or unlikes a item.
     *
     * @param item the item to like or unlike.
     * @param shouldLike whether the item should be liked or unliked.
     */
    suspend fun likeItem(item: EchoMediaItem, shouldLike: Boolean)

    /**
     * Checks if a item is liked.
     *
     * @param item the item to check.
     * @return true if the item is liked, false otherwise.
     */
    suspend fun isItemLiked(item: EchoMediaItem): Boolean
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\LoginClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.helpers.WebViewRequest
import dev.brahmkshatriya.echo.common.models.User

/**
 * To be implemented by the extension to provide login functionality.
 *
 * Do not implement this interface directly, use the sub-interfaces.
 * The extension can implement all of the sub-interfaces.
 *
 * @see [WebView]
 * @see [CustomInput]
 */
sealed interface LoginClient {


    /**
     * Interface when the login requires a webview.
     *
     * The extension should provide the [webViewRequest]
     *
     * @see [WebViewRequest]
     */
    interface WebView : LoginClient {

        /**
         * The request to be made to the webview, should return a list of users.
         *
         * The [WebViewRequest.maxTimeout] is ignored for login.
         *
         * @see WebViewRequest
         * @see LoginClient.WebView
         */
        val webViewRequest: WebViewRequest<List<User>>
    }

    /**
     * To be implemented when the login screen has custom text input fields.
     *
     * The extension needs to provide the [forms].
     */
    interface CustomInput : LoginClient {

        /**
         * List of forms to be displayed on the login screen.
         *
         * @see Form
         * @see LoginClient.CustomInput
         */
        val forms: List<Form>

        /**
         * Called when the user submits the login form.
         *
         * @param data A map of the input fields with the key as the `key` from the `InputField` and the value as the user input
         *
         * @return A list of users that are logged in
         *
         * @see LoginClient.CustomInput
         */
        suspend fun onLogin(key: String, data: Map<String, String?>): List<User>
    }

    /**
     * Represents a form for the login screen.
     *
     * @param key The key to be used to identify the `data` in the `onLogin` method
     * @param label The label to be displayed for the form
     * @param icon The icon to be displayed for the form
     * @param inputFields The list of input fields to be displayed in the form
     *
     * @see InputField
     * @see LoginClient.CustomInput
     */
    data class Form(
        val key: String,
        val label: String,
        val icon: InputField.Type,
        val inputFields: List<InputField>,
    )

    /**
     * Represents an input field for the login screen.
     *
     * @param type The type of the input field
     * @param key The key to be used in the `data` map in the `onLogin` method
     * @param label The label to be displayed for the input field
     * @param isRequired If the field is required
     * @param regex The regex to be used for validation of the input field
     */
    data class InputField(
        val type: Type,
        val key: String,
        val label: String,
        val isRequired: Boolean,
        val regex: Regex? = null
    ) {
        enum class Type {
            Email, Username, Password, Number, Url, Misc
        }
    }

    /**
     * Called when the extension starts or when the user changes.
     * `null` if no user is logged in (can also be Incognito mode)
     */
    fun setLoginUser(user: User?)

    /**
     * To be called when any other extension needs the current user.
     * Be sure to remove any sensitive data.
     */
    suspend fun getCurrentUser(): User?
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\LyricsClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.LyricsExtension
import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.helpers.PagedData
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Lyrics
import dev.brahmkshatriya.echo.common.models.Track

/**
 * Used to get the lyrics for track.
 *
 * Can be implemented by both:
 * - [MusicExtension]
 * - [LyricsExtension]
 *
 * To support lyrics search from user query. Use [LyricsSearchClient] instead.
 *
 * @see Lyrics
 * @see Track
 * @see PagedData
 */
interface LyricsClient : ExtensionClient {

    /**
     * Searches for the unloaded lyrics of a track.
     *
     * @param clientId the client id to use for the search.
     * @param track the track to search the lyrics for.
     * @return the paged lyrics.
     *
     * @see Lyrics
     * @see Track
     * @see PagedData
     */
    suspend fun searchTrackLyrics(clientId: String, track: Track): Feed<Lyrics>

    /**
     * Loads the unloaded lyrics.
     *
     * @param lyrics the lyrics to load.
     * @return the loaded lyrics.
     *
     * @see Lyrics
     */
    suspend fun loadLyrics(lyrics: Lyrics): Lyrics
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\LyricsSearchClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.helpers.PagedData
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Lyrics

/**
 * Used to search for lyrics.
 *
 * @see Lyrics
 * @see PagedData
 */
interface LyricsSearchClient : LyricsClient {
    /**
     * Searches for lyrics.
     *
     * @param query the query to search for.
     * @return the paged lyrics.
     *
     * @see Lyrics
     * @see PagedData
     */
    suspend fun searchLyrics(query: String): Feed<Lyrics>
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\PlaylistClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.helpers.PagedData
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Track

/**
 * Used to show the playlist and get its tracks.
 *
 * @see Playlist
 * @see Track
 * @see Feed
 */
interface PlaylistClient {

    /**
     * Loads a playlist.
     *
     * @param playlist the playlist to load.
     * @return the loaded playlist.
     *
     * @see Playlist
     */
    suspend fun loadPlaylist(playlist: Playlist): Playlist

    /**
     * Loads the tracks of a playlist.
     *
     * @param playlist the playlist to load the tracks of.
     * @return the paged tracks.
     *
     * @see PagedData
     * @see Track
     */
    suspend fun loadTracks(playlist: Playlist): Feed<Track>

    /**
     * Gets the feed of a playlist.
     *
     * @param playlist the playlist to get the feed of.
     * @return the feed of the playlist, or null if not available.
     *
     * @see Feed
     */
    suspend fun loadFeed(playlist: Playlist): Feed<Shelf>?
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\PlaylistEditClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Track

/**
 * Used to allow editing of an editable playlist.
 *
 * - To allow editing of cover art, use [PlaylistEditCoverClient].
 * - To allow editing the privacy of a playlist, use [PlaylistEditPrivacyClient].
 * - To listen to changes in the playlist editor, use [PlaylistEditorListenerClient].
 *
 * @see Playlist.isEditable
 */
interface PlaylistEditClient : PlaylistClient {

    /**
     * Lists all the editable playlists.
     *
     * @param track the track to show the editable playlists for.
     * @return a list playlists that are editable with a boolean indicating if the track is in the playlist.
     *
     * @see Playlist
     */
    suspend fun listEditablePlaylists(track: Track?): List<Pair<Playlist, Boolean>>

    /**
     * Creates a new playlist.
     *
     * @param title the title of the playlist.
     * @param description the description of the playlist.
     * @return the created playlist.
     *
     * @see Playlist
     */
    suspend fun createPlaylist(title: String, description: String?): Playlist

    /**
     * Deletes a playlist.
     *
     * @param playlist the playlist to delete.
     *
     * @see Playlist
     */
    suspend fun deletePlaylist(playlist: Playlist)

    /**
     * Edits the metadata of a playlist.
     *
     * @param playlist the playlist to edit.
     * @param title the new title of the playlist.
     * @param description the new description of the playlist.
     */
    suspend fun editPlaylistMetadata(playlist: Playlist, title: String, description: String?)

    /**
     * Adds tracks to a playlist.
     *
     * @param playlist the playlist to add the tracks to.
     * @param tracks the tracks in the playlist.
     * @param index the index to add the tracks at.
     * @param new the new tracks to add.
     */
    suspend fun addTracksToPlaylist(
        playlist: Playlist, tracks: List<Track>, index: Int, new: List<Track>
    )

    /**
     * Removes tracks from a playlist.
     *
     * @param playlist the playlist to remove the tracks from.
     * @param tracks the tracks in the playlist.
     * @param indexes the indexes of the tracks to remove.
     */
    suspend fun removeTracksFromPlaylist(
        playlist: Playlist, tracks: List<Track>, indexes: List<Int>
    )

    /**
     * Moves a track in a playlist.
     *
     * @param playlist the playlist to move the track in.
     * @param tracks the tracks in the playlist.
     * @param fromIndex the index to move the tracks from.
     * @param toIndex the index to move the tracks to.
     */
    suspend fun moveTrackInPlaylist(
        playlist: Playlist, tracks: List<Track>, fromIndex: Int, toIndex: Int
    )
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\PlaylistEditCoverClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.models.Playlist
import java.io.File

/**
 * Used to allow editing the cover of a playlist.
 *
 * @see PlaylistEditClient
 */
interface PlaylistEditCoverClient : PlaylistEditClient {

    /**
     * Edit the cover of a playlist.
     *
     * @param playlist the playlist to edit the cover of.
     * @param cover the new cover of the playlist, or null if user removed the cover.
     */
    suspend fun editPlaylistCover(playlist: Playlist, cover: File?)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\PlaylistEditorListenerClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.models.Playlist
import dev.brahmkshatriya.echo.common.models.Track

/**
 * Used to listen to playlist editor events.
 *
 * @see PlaylistEditClient
 */
interface PlaylistEditorListenerClient : PlaylistEditClient {

    /**
     * Called when entering the playlist editor.
     *
     * @param playlist the playlist being edited.
     * @param tracks the tracks in the playlist.
     */
    suspend fun onEnterPlaylistEditor(playlist: Playlist, tracks: List<Track>)

    /**
     * Called when exiting the playlist editor.
     *
     * @param playlist the playlist being edited.
     * @param tracks the tracks in the playlist.
     */
    suspend fun onExitPlaylistEditor(playlist: Playlist, tracks: List<Track>)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\PlaylistEditPrivacyClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.models.Playlist

/**
 * Used to edit the privacy of a playlist.
 *
 * @see Playlist.isPrivate
 * @see PlaylistEditClient
 */
interface PlaylistEditPrivacyClient : PlaylistEditClient {
    /**
     * Sets the privacy of a playlist.
     *
     * @param playlist the playlist to set the privacy of.
     * @param isPrivate whether the playlist should be private.
     */
    suspend fun setPrivacy(playlist: Playlist, isPrivate: Boolean)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\QuickSearchClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.QuickSearchItem

/**
 * Used to show search feed with a custom quick search implementation.
 *
 * @see QuickSearchItem
 * @see Feed
 * @see MusicExtension
 */
interface QuickSearchClient : SearchFeedClient {
    /**
     * Used for quick searching (suggestions below the search bar).
     * This is a lightweight search that returns a list of items
     *
     * @param query the query to search for, will be empty if the user hasn't typed anything.
     * @return the quick search items.
     *
     * @see QuickSearchItem
     */
    suspend fun quickSearch(query: String): List<QuickSearchItem>

    /**
     * Deletes a quick search item.
     *
     * @param item the item to delete.
     */
    suspend fun deleteQuickSearch(item: QuickSearchItem)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\RadioClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.models.EchoMediaItem
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Radio
import dev.brahmkshatriya.echo.common.models.Track

/**
 * Used to load the radio for track that is currently playing
 * and to show radio buttons for albums, artists, users and playlists.
 *
 * @see Radio
 */
interface RadioClient {

    /**
     * Loads a radio.
     *
     * @param radio the radio to load.
     * @return the loaded radio.
     *
     * @see Radio
     */
    suspend fun loadRadio(radio: Radio): Radio

    /**
     * Loads the tracks for a radio.
     *
     * @param radio the radio to load the tracks of.
     * @return the paged tracks.
     *
     * @see Feed
     */
    suspend fun loadTracks(radio: Radio): Feed<Track>

    /**
     * Creates a radio for a media item with [EchoMediaItem.isRadioSupported] set to true.
     *
     * If [item] is a [Track]. Make sure the radio tracks does not include this track.
     *
     * @param item the media item to create the radio for.
     * @param context the context of the item. Only available for [Track].
     * @return the created radio.
     *
     * @see EchoMediaItem
     * @see Radio
     * @see Track
     */
    suspend fun radio(item: EchoMediaItem, context: EchoMediaItem?): Radio
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\SaveClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.models.EchoMediaItem

/**
 * Used to save media items with [EchoMediaItem.isSaveable] set to true to the library
 * @see EchoMediaItem.isSaveable
 * @see LibraryFeedClient
 * @see MusicExtension
 */
interface SaveClient {

    /**
     * Saves or removes a media item from the library.
     *
     * @param item the media item to save or remove.
     * @param shouldSave whether the media item should be saved or removed.
     */
   suspend fun saveToLibrary(item: EchoMediaItem, shouldSave:Boolean)

    /**
     * Checks if a media item is saved to the library.
     *
     * @param item the media item to check.
     * @return whether the media item is saved to the library.
     */
   suspend fun isItemSaved(item: EchoMediaItem) : Boolean
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\SearchFeedClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Shelf

/**
 * Used to show the search the feed.
 *
 * @see Feed
 * @see MusicExtension
 */
interface SearchFeedClient {

    /**
     * Gets the search feed.
     *
     * @param query the query to search for, will be empty if the user hasn't typed anything.
     * @return the feed.
     *
     * @see Feed
     */
    suspend fun loadSearchFeed(query: String): Feed<Shelf>
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\SettingsChangeListenerClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.providers.SettingsProvider
import dev.brahmkshatriya.echo.common.settings.Setting
import dev.brahmkshatriya.echo.common.settings.Settings

/**
 * A client that listens to changes in the extension's [Settings].
 */
interface SettingsChangeListenerClient : SettingsProvider {
    /**
     * Called when the extension's [Settings] have changed or when a [Setting] has been clicked.
     *
     * @param settings The new [Settings].
     * @param key The key of the setting that has changed or clicked. Null if all settings have changed.
     */
    suspend fun onSettingsChanged(settings: Settings, key: String?)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\ShareClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.models.EchoMediaItem

/**
 * Used for getting a link to share media items with [EchoMediaItem.isShareable] set to true.
 */
interface ShareClient {
    /**
     * When the user wants to share the given media item
     *
     * @param item The media item to share
     * @return url of the shared item
     */
    suspend fun onShare(item: EchoMediaItem): String
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\TrackChapterClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.models.Chapter
import dev.brahmkshatriya.echo.common.models.Track

/**
 * Used to load [Chapter]s for a track.
 *
 * @see Track
 */
interface TrackChapterClient {

    /**
     * Gets the chapters for a track.
     *
     * @param track the track to get the chapters of.
     * @return the list of chapters for the track.
     *
     * @see Chapter
     */
    suspend fun getChapters(track: Track) : List<Chapter>
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\TrackClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.models.Feed
import dev.brahmkshatriya.echo.common.models.Shelf
import dev.brahmkshatriya.echo.common.models.Streamable
import dev.brahmkshatriya.echo.common.models.Track

/**
 * Used to load track and their media to allow streaming.
 *
 * @see MusicExtension
 */
interface TrackClient {

    /**
     * Loads an unloaded track.
     * Make sure the [track] contains at least one [Track.servers] in [Track.streamables]
     *
     * @param track the track to load.
     * @param isDownload whether the track is being downloaded.
     * @return the loaded track.
     *
     * @see Track
     */
    suspend fun loadTrack(track: Track, isDownload: Boolean): Track

    /**
     * Loads the media of a streamable.
     *
     * @param streamable the streamable to load the media of.
     * @param isDownload whether the media is being downloaded.
     * @return the media of the streamable.
     *
     * @see Streamable
     * @see Streamable.Media
     */
    suspend fun loadStreamableMedia(streamable: Streamable, isDownload: Boolean): Streamable.Media

    /**
     * Gets the shelves of a track.
     *
     * @param track the track to get the shelves of.
     * @return the feed containing the shelves, or null if not available.
     *
     * @see Feed
     */
    suspend fun loadFeed(track: Track): Feed<Shelf>?
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\TrackerClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.MusicExtension
import dev.brahmkshatriya.echo.common.TrackerExtension
import dev.brahmkshatriya.echo.common.models.TrackDetails

/**
 * Used to track the playback of a track.
 *
 * You can override the following methods to get the track details:
 * - [onTrackChanged]
 * - [onPlayingStateChanged]
 *
 * Can be implemented by both:
 * - [MusicExtension]
 * - [TrackerExtension]
 *
 * @see TrackerMarkClient
 */
interface TrackerClient : ExtensionClient {

    /**
     * Called when the player changes its current track.
     *
     *  Note: This method will be called again if the track was played again from the beginning.
     *
     * @param details the details of the track that is playing, or null if player is empty.
     */
    suspend fun onTrackChanged(details: TrackDetails?)

    /**
     * Called when the player changes its playing state or when the position changes.
     *
     * @param details the details of the track that is playing, or null if the player is empty.
     */
    suspend fun onPlayingStateChanged(details: TrackDetails?, isPlaying: Boolean)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\clients\TrackerMarkClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.clients

import dev.brahmkshatriya.echo.common.models.TrackDetails

/**
 * An interface for a tracker client that marks tracks as played after a certain duration.
 *
 * This interface extends [TrackerClient] and provides methods to determine when a track should be
 * marked as played based on its duration.
 */
interface TrackerMarkClient : TrackerClient {

    /**
     * The duration in milliseconds after which the track should be marked as played (defaults to null).
     * If null, the [onMarkAsPlayed] method will not be called.
     *
     * If you want a percentage of the song, you can calculate it based on the track's duration in
     * [onTrackChanged]
     */
    suspend fun getMarkAsPlayedDuration(details: TrackDetails): Long?

    /**
     * Called after the track has been streamed for [getMarkAsPlayedDuration] milliseconds.
     * This method will not be called if [getMarkAsPlayedDuration] is null.
     *
     * @param details the details of the track that was marked as played.
     */
    suspend fun onMarkAsPlayed(details: TrackDetails)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\helpers\ClientException.kt
================================================================================

package dev.brahmkshatriya.echo.common.helpers

import dev.brahmkshatriya.echo.common.clients.LoginClient

/**
 * A base exception class for handled client exceptions,
 * the extension can throw other exceptions too, but they will be handled by the App.
 *
 * The app handles the following exceptions:
 * - [LoginRequired] - When the user is not logged in
 * - [Unauthorized] - When the user is not authorized, will log out the user.
 * - [NotSupported] - When the extension does not support an operation.
 *
 * @see [LoginClient]
 */
sealed class ClientException : Exception() {
    /**
     * To be thrown when the some operation requires user to be logged in.
     */
    open class LoginRequired : ClientException()

    /**
     * To be thrown when the user is not authorized to perform an operation.
     * The user will be logged out from the app.
     *
     * @param userId The id of the user
     */
    class Unauthorized(val userId: String) : LoginRequired()

    /**
     * To be thrown when the extension does not support an operation.
     *
     * @param operation The name of the operation that is not supported
     */
    class NotSupported(val operation: String) : ClientException()
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\helpers\ContinuationCallback.kt
================================================================================

package dev.brahmkshatriya.echo.common.helpers

import kotlinx.coroutines.CancellableContinuation
import kotlinx.coroutines.CompletionHandler
import kotlinx.coroutines.suspendCancellableCoroutine
import okhttp3.Call
import okhttp3.Callback
import okhttp3.Response
import java.io.IOException
import kotlin.coroutines.resume
import kotlin.coroutines.resumeWithException

class ContinuationCallback(
    private val call: Call,
    private val continuation: CancellableContinuation<Response>
) : Callback, CompletionHandler {

    override fun onResponse(call: Call, response: Response) {
        continuation.resume(response)
    }

    override fun onFailure(call: Call, e: IOException) {
        if (!call.isCanceled()) {
            continuation.resumeWithException(e)
        }
    }

    override fun invoke(cause: Throwable?) {
        try {
            call.cancel()
        } catch (_: Throwable) {}
    }

    companion object {
        /**
         * Suspends the current coroutine,
         * performs the network call and resumes the coroutine with the response
         */
        suspend inline fun Call.await(): Response {
            return suspendCancellableCoroutine { continuation ->
                val callback = ContinuationCallback(this, continuation)
                enqueue(callback)
                continuation.invokeOnCancellation(callback)
            }
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\helpers\Injectable.kt
================================================================================

package dev.brahmkshatriya.echo.common.helpers

import kotlinx.coroutines.sync.Mutex
import kotlinx.coroutines.sync.withLock

class Injectable<T>(
    private val getter: () -> T,
    private var injections: List<suspend T.() -> Unit>
) {

    val data = lazy { runCatching { getter() } }
    private val mutex = Mutex()
    val value: T?
        get() = data.value.getOrNull()


    suspend fun value() = runCatching {
        mutex.withLock {
            val t = data.value.getOrThrow()
            injections.forEach { it(t) }
            injections = emptyList()
            injectionsMap.values.forEach { it(t) }
            injectionsMap.clear()
            t
        }
    }

    private val injectionsMap = mutableMapOf<String, suspend T.() -> Unit>()
    suspend fun injectOrRun(id: String, block: suspend T.() -> Unit) {
        if (data.isInitialized()) data.value.getOrThrow().block()
        else mutex.withLock {
            injectionsMap[id] = block
        }
    }

    @Suppress("UNCHECKED_CAST")
    fun <R> casted() = run {
        injections = injections + listOf { this as R }
        this as Injectable<R>
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\helpers\Page.kt
================================================================================

package dev.brahmkshatriya.echo.common.helpers

import kotlinx.serialization.Serializable

/**
 * Represents a page of data, with a continuation token for pagination
 *
 * @param T The type of data items
 * @property data The list of data items
 * @property continuation The next continuation token for pagination. If null, there are no more pages
 */
@Serializable
data class Page<T : Any>(
    val data: List<T>,
    val continuation: String?
)

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\helpers\PagedData.kt
================================================================================

package dev.brahmkshatriya.echo.common.helpers

import kotlinx.coroutines.sync.Mutex
import kotlinx.coroutines.sync.withLock

/**
 * A class that represents a paginated data. Used to load data in chunks.
 *
 * If the data is continuous, use [Continuous].
 * ```kotlin
 * val data = PagedData.Continuous { continuation ->
 *     val (tracks, nextContinuation) = api.loadTracks(continuation)
 *     Page(tracks, nextContinuation)
 * }
 * ```
 *
 * If the data is not continuous, you can just use [Single].
 * ```kotlin
 * val data = PagedData.Single { api.loadTracks() }
 * ```
 *
 * If you want to concatenate multiple paged data, use [Concat].
 * ```kotlin
 * val data = PagedData.Concat(
 *     PagedData.Single { api.loadTracks() },
 *     PagedData.Continuous { api.loadTracksPage(it) }
 *     // Add more sources here
 * )
 * ```
 * @param T The type of data
 */
sealed class PagedData<T : Any> {

    /**
     * To clear all the cache of paged data
     */
    abstract fun clear()

    /**
     * To load all the data
     *
     * @return A list of all the data
     */
    suspend fun loadAll(): List<T> {
        return mutex.withLock { loadAllInternal() }
    }

    abstract suspend fun loadAllInternal(): List<T>
    abstract suspend fun loadListInternal(continuation: String?): Page<T>

    private val mutex = Mutex()
    suspend fun loadPage(continuation: String?): Page<T> {
        return mutex.withLock { loadListInternal(continuation) }
    }

    abstract fun invalidate(continuation: String?)

    abstract fun <R : Any> map(block: suspend (Result<List<T>>) -> List<R>): PagedData<R>

    /**
     * A class representing a single page of data.
     *
     * @param load The function to load the list of data
     */
    class Single<T : Any>(
        val load: suspend () -> List<T>
    ) : PagedData<T>() {
        private var loaded = false
        val items = mutableListOf<T>()
        private suspend fun loadList(): List<T> {
            if (loaded) return items
            items.addAll(load())
            loaded = true
            return items
        }

        override fun clear() {
            items.clear()
            loaded = false
        }

        /**
         * To load all the data
         *
         * @return A list of all the data
         */
        override suspend fun loadAllInternal() = loadList()
        override suspend fun loadListInternal(continuation: String?): Page<T> {
            return Page(loadList(), null)
        }

        override fun invalidate(continuation: String?) {
            clear()
        }

        override fun <R : Any> map(block: suspend (Result<List<T>>) -> List<R>): PagedData<R> {
            return Single { block(runCatching { load() }) }
        }
    }

    /**
     * A class representing a continuous page of data.
     *
     * This class is used to load data in chunks.
     * It takes a function that loads a page of data, with the given continuation token
     * and returns a [Page] with the next continuation token.
     *
     * If next continuation token is `null`, it means there is no more data to load.
     * The initial call to load will have a `null` continuation token.
     *
     * Example for using with an API that uses Strings as continuation tokens:
     * ```kotlin
     * val data = PagedData.Continuous { continuation ->
     *   val (tracks, nextCont) = api.loadTracks(continuation)
     *   Page(tracks, nextCont)
     * }
     * ```
     *
     * Example for using with an API that uses Integers as continuation tokens:
     * ```kotlin
     * val totalTracks = api.getTotalTracks()
     * val data = PagedData.Continuous { continuation ->
     *    val contInt = continuation?.toIntOrNull() ?: 0
     *    val tracks = api.loadTracks(contInt)
     *    val nextContinuation = contInt + 10
     *    if (nextContinuation >= totalTracks) Page(tracks, null)
     *    else Page(tracks, nextContinuation)
     * }
     * ```
     * @param load The function to load a [Page] for a given continuation token
     */
    class Continuous<T : Any>(
        val load: suspend (continuation: String?) -> Page<T>,
    ) : PagedData<T>() {

        private val itemMap = mutableMapOf<String?, Page<T>>()
        override suspend fun loadListInternal(continuation: String?): Page<T> {
            val page = itemMap.getOrPut(continuation) {
                val (data, cont) = load(continuation)
                Page(data, cont)
            }
            return page
        }

        override fun invalidate(continuation: String?) {
            itemMap.remove(continuation)
        }

        override fun clear() = itemMap.clear()

        override suspend fun loadAllInternal(): List<T> {
            val list = mutableListOf<T>()
            val (data, continuation) = loadListInternal(null)
            list.addAll(data)
            var cont = continuation
            while (cont != null) {
                val page = loadListInternal(cont)
                list.addAll(page.data)
                cont = page.continuation
            }
            return list
        }

        override fun <R : Any> map(block: suspend (Result<List<T>>) -> List<R>): PagedData<R> {
            return Continuous { continuation ->
                val result = runCatching { load(continuation) }
                Page(block(result.map { it.data }), result.getOrNull()?.continuation)
            }
        }
    }

    /**
     * A class representing a concatenation of multiple data sources.
     *
     * This class is used to concatenate multiple data sources into a single source.
     * It takes multiple [PagedData] sources and loads them one after the other.
     *
     * Example:
     * ```kotlin
     * val data = PagedData.Concat(
     *     PagedData.Single { api.loadShelves() },
     *     PagedData.Continuous { api.loadShelvesPage(it) },
     *     // Add more sources here
     * )
     * ```
     * @param sources The list of [PagedData] sources to concatenate
     */
    class Concat<T : Any>(
        private vararg val sources: PagedData<T>
    ) : PagedData<T>() {
        init {
            require(sources.isNotEmpty()) { "Concat must have at least one source" }
        }

        override fun clear() = sources.forEach { it.clear() }
        override suspend fun loadAllInternal(): List<T> = sources.flatMap { it.loadAll() }

        override fun <R : Any> map(block:suspend (Result<List<T>>) -> List<R>): PagedData<R> {
            return Concat(*sources.map { it.map(block) }.toTypedArray())
        }

        private fun splitContinuation(continuation: String?): Pair<Int, String?> {
            if (continuation == null) return 0 to null
            val index = continuation.substringBefore("_").toIntOrNull() ?: -1
            val token = continuation.substringAfter("_")
            return index to token
        }

        private fun combine(index: Int, token: String?): String {
            return "${index}_${token ?: ""}"
        }

        override suspend fun loadListInternal(continuation: String?): Page<T> {
            val (index, token) = splitContinuation(continuation)
            val source = sources.getOrNull(index) ?: return Page(emptyList(), null)
            val page = source.loadPage(token)
            return if (page.continuation != null) Page(page.data, combine(index, page.continuation))
            else Page(page.data, combine(index + 1, null))
        }

        override fun invalidate(continuation: String?) {
            val (index, token) = splitContinuation(continuation)
            val source = sources.getOrNull(index)
            source?.invalidate(token)
        }
    }

    class Suspend<T : Any>(
        private val getter: suspend () -> PagedData<T>
    ) : PagedData<T>() {
        private val mutex = Mutex()
        private var _data: PagedData<T>? = null
        private suspend fun data(): PagedData<T> {
            return _data ?: mutex.withLock { getter() }.also { _data = it }
        }

        override fun clear() {
            _data?.clear()
        }

        override suspend fun loadAllInternal(): List<T> {
            return data().loadAll()
        }

        override fun <R : Any> map(block: suspend (Result<List<T>>) -> List<R>): PagedData<R> {
            return Suspend { data().map(block) }
        }

        override suspend fun loadListInternal(continuation: String?): Page<T> {
            return data().loadPage(continuation)
        }

        override fun invalidate(continuation: String?) {
            _data?.invalidate(continuation)
        }
    }

    companion object {
        fun <T : Any> empty() = Single<T> { emptyList() }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\helpers\WebViewClient.kt
================================================================================

package dev.brahmkshatriya.echo.common.helpers

interface WebViewClient {
    suspend fun await(
        showWebView: Boolean, reason: String, request: WebViewRequest<String>
    ): Result<String?>
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\helpers\WebViewRequest.kt
================================================================================

package dev.brahmkshatriya.echo.common.helpers

import dev.brahmkshatriya.echo.common.models.NetworkRequest

/**
 * Use this to access the webview from the extension. There are 3 types of requests:
 * - [Headers] - Used to intercept requests made by the webview and get the headers
 * - [Cookie] - Used to get the cookies stored in the webview
 * - [Evaluate] - Used to evaluate javascript in the webview
 *
 * The extension can implement all of the sub-interfaces, and the onStop methods
 * will be called in this order of [Headers], [Cookie], [Evaluate].
 *
 * The [initialUrl] is the URL to be loaded in the webview.
 * The [stopUrlRegex] is the regex to match the URL when the request is assumed to be complete.
 */
sealed interface WebViewRequest<T> {
    /**
     * The initial URL to be loaded in the webview.
     */
    val initialUrl: NetworkRequest

    /**
     * The regex to match the URL when the request is assumed to be complete.
     * Checks on all requests made by the webview.
     */
    val stopUrlRegex: Regex

    /**
     * The maximum time to wait for data to be returned from the webview.
     * This is in milliseconds.
     */
    val maxTimeout: Long
        get() = 15_000L // Default to 15 seconds

    /**
     * If you want to disable caching of the webview data, set this to true.
     */
    val dontCache: Boolean
        get() = false // Default to false, meaning the webview will cache the data

    /**
     * If you want to get the headers from all requests made by the webview, use this.
     *
     * @see WebViewRequest
     */
    interface Headers<T> : WebViewRequest<T> {
        /**
         * The regex to match the URL to intercept requests made by the webview for the headers.
         */
        val interceptUrlRegex: Regex

        /**
         * Called when the webview stops loading a URL with the [stopUrlRegex]
         *
         * You can convert the data returned from the javascript to [T].
         *
         * @param requests The requests that were intercepted with [interceptUrlRegex]
         *
         * @return The data to be passed to the next step
         */
        suspend fun onStop(requests: List<NetworkRequest>): T?
    }

    /**
     * If you want to get the cookies stored in the webview, use this.
     *
     * Cookies are cleared when the request is completed.
     *
     * @see WebViewRequest
     */
    interface Cookie<T> : WebViewRequest<T> {
        /**
         * Receive the cookies stored from the webview.
         *
         * You can convert the cookies to [T].
         *
         * @param url The URL that the webview stopped at
         * @param cookie The cookies stored in the webview
         *
         * @return The data to be passed to the next step
         */
        suspend fun onStop(url: NetworkRequest, cookie: String): T?
    }

    /**
     * If you want to evaluate javascript in the webview, use this.
     *
     * The [javascriptToEvaluate] is evaluated when the webview stops loading a URL with the [stopUrlRegex]
     * and the result is passed to the [onStop] method.
     *
     * You can also use [javascriptToEvaluateOnPageStart] to evaluate javascript when
     * the webview starts loading a URL. Its result is not passed to the [onStop] method.
     *
     * The javascript code should be wrapped in a function that returns some data.
     *
     * @see WebViewRequest
     */
    interface Evaluate<T> : WebViewRequest<T> {

        /**
         * The javascript to be evaluated in the webview.
         * Make sure this js code is wrapped in a function that can return some data.
         */
        val javascriptToEvaluate: String

        /**
         * The javascript to be evaluated when the webview starts loading a URL.
         * This is useful for setting up the webview before it loads the URL.
         *
         * Make sure this js code is wrapped in a function
         */
        val javascriptToEvaluateOnPageStart: String?

        /**
         * Called when the webview stops loading a URL with the [stopUrlRegex] and the javascript
         * is evaluated.
         *
         * You need to convert the data returned from the javascript to [T].
         *
         * @param url The URL that the webview stopped at
         * @param data The data returned from the [javascriptToEvaluate]
         *
         * @return The data to be passed to the next step
         */
        suspend fun onStop(url: NetworkRequest, data: String?): T?
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\Album.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.clients.AlbumClient
import dev.brahmkshatriya.echo.common.clients.FollowClient
import dev.brahmkshatriya.echo.common.clients.HideClient
import dev.brahmkshatriya.echo.common.clients.LikeClient
import dev.brahmkshatriya.echo.common.clients.RadioClient
import dev.brahmkshatriya.echo.common.clients.SaveClient
import dev.brahmkshatriya.echo.common.clients.ShareClient
import dev.brahmkshatriya.echo.common.models.Album.Type.Book
import dev.brahmkshatriya.echo.common.models.Album.Type.Compilation
import dev.brahmkshatriya.echo.common.models.Album.Type.EP
import dev.brahmkshatriya.echo.common.models.Album.Type.LP
import dev.brahmkshatriya.echo.common.models.Album.Type.PreRelease
import dev.brahmkshatriya.echo.common.models.Album.Type.Show
import dev.brahmkshatriya.echo.common.models.Album.Type.Single
import kotlinx.serialization.Serializable

/**
 * A data class representing an album
 *
 * @property id The id of the album
 * @property title The title of the album
 * @property type The [Type] of the album.
 * @property cover The cover image of the album
 * @property artists The artists of the album
 * @property duration The duration of the album in milliseconds
 * @property trackCount The total number of tracks in the album
 * @property releaseDate The release date of the album
 * @property label The publisher of the album
 * @property description The description of the album
 * @property background The background image of the album
 * @property isExplicit Whether the album is explicit
 * @property subtitle The subtitle of the album, used to display information under the title
 * @property extras Any extra data you want to associate with the album
 * @property isRadioSupported Whether the album can be used to create a radio. Checkout [RadioClient]
 * @property isFollowable Whether the album can be followed. Checkout [FollowClient]
 * @property isSaveable Whether the album can be saved to library. Checkout [SaveClient]
 * @property isLikeable Whether the album can be liked. Checkout [LikeClient]
 * @property isHideable Whether the album can be hidden. Checkout [HideClient]
 * @property isShareable Whether the album can be shared. Checkout [ShareClient]
 *
 * @see AlbumClient
 */
@Serializable
data class Album(
    override val id: String,
    override val title: String,
    override val type: Type? = null,
    override val cover: ImageHolder? = null,
    override val artists: List<Artist> = listOf(),
    override val trackCount: Long? = null,
    override val duration: Long? = null,
    val releaseDate: Date? = null,
    override val description: String? = null,
    override val background: ImageHolder? = cover,
    override val label: String? = null,
    override val isExplicit: Boolean = false,
    override val subtitle: String? = null,
    override val extras: Map<String, String> = mapOf(),
    override val isRadioSupported: Boolean = true,
    override val isFollowable: Boolean = false,
    override val isSaveable: Boolean = true,
    override val isLikeable: Boolean = false,
    override val isHideable: Boolean = false,
    override val isShareable: Boolean = true,
) : EchoMediaItem.Lists {

    override val date = releaseDate

    override val subtitleWithOutE = subtitle ?: buildString {
        append(artists.joinToString(", ") { it.name })
    }.trim().ifBlank { null }

    /**
     * The type of the album.
     * This can be actual album types like [PreRelease], [Single], [EP], [LP], [Compilation]
     * or Special types like :
     * - [Show] - Will represent the tracks as "Episodes"
     * - [Book] - Will represent the tracks as "Chapters"
     *
     * Other types will be represented as "Songs"
     */
    enum class Type {
        PreRelease, Single, EP, LP, Compilation, Show, Book
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\Artist.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.clients.ArtistClient
import dev.brahmkshatriya.echo.common.clients.FollowClient
import dev.brahmkshatriya.echo.common.clients.HideClient
import dev.brahmkshatriya.echo.common.clients.LikeClient
import dev.brahmkshatriya.echo.common.clients.RadioClient
import dev.brahmkshatriya.echo.common.clients.SaveClient
import dev.brahmkshatriya.echo.common.clients.ShareClient
import kotlinx.serialization.Serializable

/**
 * A data class representing an artist
 *
 * @property id The id of the artist
 * @property name The name of the artist
 * @property cover The cover image of the artist
 * @property bio The bio of the artist
 * @property background The background image of the artist
 * @property banners The banners of the artist (not used yet)
 * @property subtitle The subtitle of the artist, used to display information under the name
 * @property extras Any extra data you want to associate with the artist
 * @property isRadioSupported Whether the artist can be used to create a radio. Checkout [RadioClient]
 * @property isFollowable Whether the artist can be followed. Checkout [FollowClient]
 * @property isSaveable Whether the artist can be saved to library. Checkout [SaveClient]
 * @property isLikeable Whether the artist can be liked. Checkout [LikeClient]
 * @property isHideable Whether the artist can be hidden. Checkout [HideClient]
 * @property isShareable Whether the artist can be shared. Checkout [ShareClient]
 *
 * @see ArtistClient
 */
@Serializable
data class Artist(
    override val id: String,
    val name: String,
    override val cover: ImageHolder? = null,
    val bio: String? = null,
    override val background: ImageHolder? = cover,
    val banners: List<ImageHolder> = listOf(),
    override val subtitle: String? = null,
    override val extras: Map<String, String> = mapOf(),
    override val isRadioSupported: Boolean = true,
    override val isFollowable: Boolean = true,
    override val isSaveable: Boolean = true,
    override val isLikeable: Boolean = false,
    override val isHideable: Boolean = false,
    override val isShareable: Boolean = true,
) : EchoMediaItem {
    override val title = name
    override val description = bio
    override val subtitleWithOutE = subtitle
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\Chapter.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.models.Chapter.SkipType.ASK
import dev.brahmkshatriya.echo.common.models.Chapter.SkipType.NONE
import dev.brahmkshatriya.echo.common.models.Chapter.SkipType.SKIP
import kotlinx.serialization.Serializable

/**
 * Represents a chapter in a track.
 * @property name the name of the chapter.
 * @property startTime the start time of the chapter in milliseconds.
 * @property endTime the end time of the chapter in milliseconds, or null if it is not defined.
 * @property skipType the type of skip behavior for the chapter.
 */
@Serializable
data class Chapter(
    val name: String,
    val startTime: Long,
    val endTime: Long? = null,
    val skipType: SkipType = NONE,
) {

    /**
     * Represents the type of skip behavior for a chapter.
     * - [NONE] The chapter is not skipped.
     * - [SKIP] The chapter is automatically skipped.
     * - [ASK] The user is prompted whether to skip the chapter.
     */
    enum class SkipType {
        NONE, SKIP, ASK
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\Date.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import kotlinx.serialization.Serializable
import java.text.DateFormat
import java.util.Calendar
import java.util.Locale

@Suppress("MemberVisibilityCanBePrivate")
@Serializable
data class Date(
    val epochTimeMs: Long
) : Comparable<Date> {

    val calendar by lazy {
        Calendar.getInstance()!!.apply {
            timeInMillis = epochTimeMs
        }
    }

    val date by lazy { calendar.time!! }

    constructor(
        year: Int,
        month: Int? = null,
        day: Int? = null,
    ) : this(
        Calendar.getInstance().apply {
            set(year, (month ?: 1) - 1, day ?: 1)
        }.timeInMillis
    )

    companion object {
        fun Int.toYearDate() = Date(this)
    }


    val year: Int by lazy { calendar.get(Calendar.YEAR) }
    val month: Int? by lazy {
        val isFirstDayOfYear =
            calendar.get(Calendar.MONTH) == Calendar.JANUARY && calendar.get(Calendar.DAY_OF_MONTH) == 1
        if (!isFirstDayOfYear) calendar.get(Calendar.MONTH) + 1 else null
    }

    val day: Int? by lazy {
        if (calendar.get(Calendar.DAY_OF_MONTH) == 1) null
        else calendar.get(Calendar.DAY_OF_MONTH)
    }

    override fun compareTo(other: Date): Int {
        return date.compareTo(other.date)
    }

    override fun toString(): String = when {
        month == null || day == null -> year.toString()
        else -> DateFormat.getDateInstance(DateFormat.SHORT, Locale.getDefault()).format(date)
    }

}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\DownloadContext.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import kotlinx.serialization.Serializable

/**
 * Download context for a track
 *
 * @param extensionId The extension that the track belongs to.
 * @param track The track to download.
 * @param sortOrder The order of the [track] in the [context].
 * @param context The context of the media item, Album/Playlist/Artist.
 */
@Serializable
data class DownloadContext(
    val extensionId: String,
    val track: Track,
    val sortOrder: Int? = null,
    val context: EchoMediaItem? = null
)


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\EchoMediaItem.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.clients.FollowClient
import dev.brahmkshatriya.echo.common.clients.HideClient
import dev.brahmkshatriya.echo.common.clients.LikeClient
import dev.brahmkshatriya.echo.common.clients.RadioClient
import dev.brahmkshatriya.echo.common.clients.SaveClient
import dev.brahmkshatriya.echo.common.clients.ShareClient
import kotlinx.serialization.ExperimentalSerializationApi
import kotlinx.serialization.Serializable
import kotlinx.serialization.json.JsonClassDiscriminator

/**
 * A class representing a media item in Echo.
 *
 * Use [toShelf] to convert a media item to [Shelf.Item].
 *
 * Example:
 * ```kotlin
 * val track = api.getTrack("track_id")
 * val shelfItem = mediaItem.toShelf()
 * ```
 * @property id The id of the media item
 * @property title The title of the media item
 * @property cover The cover image of the media item
 * @property description A description of the media item, used to display additional information
 * @property background The background image of the media item, used to display a background image
 * @property subtitle The subtitle of the media item, used to display information under the title
 * @property extras Any extra data you want to associate with the media item
 * @property isFollowable Whether the media item can be followed. Checkout [FollowClient]
 * @property isSaveable Whether the media item can be saved to library. Checkout [SaveClient]
 * @property isLikeable Whether the media item can be liked. Checkout [LikeClient]
 * @property isHideable Whether the media item can be hidden. Checkout [HideClient]
 * @property isRadioSupported Whether the media item can be loaded to get [Radio]. Checkout [RadioClient]
 * @property isShareable Whether the media item can be shared. Checkout [ShareClient]
 *
 * @see Track
 * @see Artist
 * @see User
 * @see Album
 * @see Playlist
 * @see Radio
 */
@OptIn(ExperimentalSerializationApi::class)
@JsonClassDiscriminator("mediaItemType")
@Serializable
sealed interface EchoMediaItem {
    val id: String
    val title: String
    val cover: ImageHolder?
    val description: String?
    val background: ImageHolder?
    val subtitle: String?
    val extras: Map<String, String>
    val isRadioSupported: Boolean
    val isFollowable: Boolean
    val isSaveable: Boolean
    val isLikeable: Boolean
    val isHideable: Boolean
    val isShareable: Boolean
    val isExplicit: Boolean get() = false
    val isPrivate: Boolean get() = false

    @Serializable
    sealed interface Lists : EchoMediaItem {
        val artists: List<Artist>
        val trackCount: Long?
        val duration: Long? get() = null
        val date: Date? get() = null
        val label: String? get() = null
        val type: Album.Type? get() = null

        override val subtitleWithOutE
            get() = subtitle ?: buildString {
                append(artists.joinToString(", ") { it.name })
            }.trim().ifBlank { null }
    }


    val subtitleWithOutE: String?

    val subtitleWithE
        get() = buildString {
            if (isExplicit) append("\uD83C\uDD74 ")
            append(subtitleWithOutE ?: "")
        }.trim().ifBlank { null }

    fun sameAs(other: EchoMediaItem): Boolean {
        return this::class == other::class && id == other.id
    }

    fun toShelf() = Shelf.Item(this)

    fun copyMediaItem(
        id: String = this.id,
        title: String = this.title,
        cover: ImageHolder? = this.cover,
        description: String? = this.description,
        subtitle: String? = this.subtitle,
        extras: Map<String, String> = this.extras,
        isRadioSupported: Boolean = this.isRadioSupported,
        isFollowable: Boolean = this.isFollowable,
        isSaveable: Boolean = this.isSaveable
    ): EchoMediaItem = when (this) {
        is Artist -> copy(
            id = id,
            name = title,
            cover = cover,
            bio = description,
            subtitle = subtitle,
            extras = extras,
            isRadioSupported = isRadioSupported,
            isFollowable = isFollowable,
            isSaveable = isSaveable
        )

        is Album -> copy(
            id = id,
            title = title,
            cover = cover,
            description = description,
            subtitle = subtitle,
            extras = extras,
            isRadioSupported = isRadioSupported,
            isFollowable = isFollowable,
            isSaveable = isSaveable
        )

        is Playlist -> copy(
            id = id,
            title = title,
            cover = cover,
            description = description,
            subtitle = subtitle,
            extras = extras,
            isRadioSupported = isRadioSupported,
            isFollowable = isFollowable,
            isSaveable = isSaveable
        )

        is Radio -> copy(
            id = id,
            title = title,
            cover = cover,
            description = description,
            subtitle = subtitle,
            extras = extras,
            isFollowable = isFollowable,
            isSaveable = isSaveable
        )

        is Track -> copy(
            id = id,
            title = title,
            cover = cover,
            description = description,
            subtitle = subtitle,
            extras = extras,
            isRadioSupported = isRadioSupported,
            isFollowable = isFollowable,
            isSaveable = isSaveable
        )
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\ExtensionType.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.Extension

/**
 * Enum class to define the type of extension
 * @param feature the string used to identify the extension in the AndroidManifest uses-feature tag
 *
 * @see [Extension]
 */
enum class ExtensionType(val feature: String) {
    MUSIC("music"),
    TRACKER("tracker"),
    LYRICS("lyrics"),
    MISC("misc");
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\Feed.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.helpers.PagedData
import kotlinx.serialization.Serializable

/**
 * Represents a feed of multiple [T] items, Used in various contexts like home, library, etc.
 *
 * ### Feeds without Tabs
 * - The simplest way to create a feed is to show a list of [T] items, you can just do
 * the following to convert a list of [T] items to a Feed:
 * ```
 * val feed = listOf<T>().toFeed()
 * ```
 *
 * - If you want to show a feed that loads more stuff when scrolled to end, you need to use
 * the [PagedData] class. This class allows you to load more items as the user scrolls.
 * And You can use the following to convert a [PagedData] to a feed:
 * ```
 * val feed = pagedData.toFeed()
 * ```
 *
 * ### Feeds with Tabs
 * Feeds can have multiple [Tab] items, each representing a different category. When a tab is
 * selected, the [getPagedData] is called with the selected tab to retrieve a pair of [PagedData]
 * and [Buttons]. If the [tabs] list is empty, the getPagedData will be called with `null`.
 * An example of a feed with tabs:
 * ```
 * val feed = Feed(
 *      listOf("Tab1", "Tab2").map { Tab(it, it) }
 *  ) { tab ->
 *      val pagedData = when (tab?.id) {
 *          "Tab1" -> loadPagedDataForTab1()
 *          "Tab2" -> loadPagedDataForTab2()
 *          else -> throw IllegalArgumentException("Unknown tab")
 *      }
 *      pagedData.toFeedData()
 *  }
 * ```
 *
 * ### Buttons And Background
 * Feeds can also have [Buttons] shown below the tabs. Echo automatically handles searching and
 * filtering depending on the data provided in the items. You can provide a custom track list to
 * be used when play/shuffle button is clicked. You can send the buttons as `null`, if you want
 * echo to use the default buttons for the feed. Use the [Buttons.EMPTY] to force a feed to have
 * no buttons.
 *
 * An example of converting [PagedData] to [Feed.Data] with [Buttons]:
 * ```
 * val feedData = pagedData.toFeedData(
 *     buttons = Feed.Buttons(showPlayAndShuffle = true),
 *     background = "https://example.com/background.jpg".toImageHolder()
 * )
 * ```
 *
 * @property tabs The list of tabs in the feed.
 * @property getPagedData to retrieve the shelves with [Buttons] for a given tab
 *
 * @see Tab
 * @see PagedData
 * @see Buttons
 */
data class Feed<T : Any>(
    val tabs: List<Tab>,
    val getPagedData: suspend (Tab?) -> Data<T>
) {

    /**
     * A list of [Tab] items that are not sort tabs.
     * These tabs are used to load data in the feed and are not considered for sorting.
     **/
    val notSortTabs = tabs.filterNot { it.isSort }

    /**
     * Represents the loaded data of the [Feed].
     *
     * @property pagedData The [PagedData] containing the items for the feed.
     * @property buttons The [Buttons] to be shown in the feed. If `null`, the buttons will be decided automatically.
     * @property background The [ImageHolder] to be used as the background of the feed. If `null`, the background will be decided automatically.
     * */
    data class Data<T : Any>(
        val pagedData: PagedData<T>,
        val buttons: Buttons? = null,
        val background: ImageHolder? = null
    )

    /**
     * A data class representing the buttons that can be shown in the feed.
     *
     * @property showSearch Whether to show the search button.
     * @property showSort Whether to show the sort button.
     * @property showPlayAndShuffle Whether to show the play and shuffle buttons.
     * @property customTrackList To play a custom list of tracks when play and shuffle buttons are clicked.
     */
    @Serializable
    data class Buttons(
        val showSearch: Boolean = true,
        val showSort: Boolean = true,
        val showPlayAndShuffle: Boolean = false,
        val customTrackList: List<Track>? = null,
    ) {
        companion object {
            val EMPTY = Buttons(
                showSearch = false,
                showSort = false,
                showPlayAndShuffle = false,
                customTrackList = null
            )
        }
    }

    companion object {

        /**
         * Convenience function to convert a [PagedData] to a [Feed.Data].
         */
        fun <T : Any> PagedData<T>.toFeedData(
            buttons: Buttons? = null, background: ImageHolder? = null
        ) = Data(this, buttons, background)

        /**
         * Convenience function to create a [Feed] from a [PagedData] of [T] items.
         */
        fun <T : Any> PagedData<T>.toFeed(
            buttons: Buttons? = null, background: ImageHolder? = null
        ) = Feed(listOf()) { toFeedData(buttons, background) }

        /**
         * Convenience function to convert a list of [T] items to a [Feed.Data].
         */
        fun <T : Any> List<T>.toFeedData(
            buttons: Buttons? = null, background: ImageHolder? = null
        ) = Data(PagedData.Single { this }, buttons, background)

        /**
         * Convenience function to create a [Feed] from a list of [T] items.
         */
        fun <T : Any> List<T>.toFeed(
            buttons: Buttons? = null, background: ImageHolder? = null
        ) = Feed(listOf()) { PagedData.Single { this }.toFeedData(buttons, background) }

        /**
         * Convenience function to load all items in the [Feed].
         * Please use sparringly.
         */
        suspend fun <T : Any> Feed<T>.loadAll() = run {
            if (tabs.isEmpty()) return@run pagedDataOfFirst().loadAll()
            notSortTabs.flatMap { getPagedData(it).pagedData.loadAll() }
        }

        /**
         * Convenience function to load all items in the [Feed] for the firstOrNull [Tab].
         */
        suspend fun <T : Any> Feed<T>.pagedDataOfFirst() = run {
            getPagedData(notSortTabs.firstOrNull()).pagedData
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\ImageHolder.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.models.ImageHolder.Companion.toImageHolder
import dev.brahmkshatriya.echo.common.models.NetworkRequest.Companion.toGetRequest
import kotlinx.serialization.Serializable

/**
 * A class representing an image.
 *
 * Use [toImageHolder] to convert a string to a [NetworkRequestImageHolder].
 *
 * @see [NetworkRequestImageHolder]
 */
@Serializable
sealed class ImageHolder {

    /**
     * Whether to crop the image
     */
    abstract val crop: Boolean

    /**
     * A data class representing an image from a network request
     *
     * @param request The request to fetch the image
     * @param crop Whether to crop the image
     */
    @Serializable
    data class NetworkRequestImageHolder(val request: NetworkRequest, override val crop: Boolean) :
        ImageHolder()

    /**
     * A data class representing an image from a Resource URI
     *
     * @param uri The URI of the image
     * @param crop Whether to crop the image
     */
    @Serializable
    data class ResourceUriImageHolder(val uri: String, override val crop: Boolean) : ImageHolder()

    /**
     * A data class representing an image from a resource
     *
     * @param resId The resource ID of the image
     * @param crop Whether to crop the image
     */
    @Serializable
    data class ResourceIdImageHolder(val resId: Int, override val crop: Boolean) : ImageHolder()

    /**
     * A data class representing an image from a hex color
     * supported format: #RRGGBB or #AARRGGBB
     *
     * @param hex The hex color code of the image
     * @param crop Whether to crop the image
     */
    @Serializable
    data class HexColorImageHolder(val hex: String) : ImageHolder() {
        init {
            require(hexPattern.matches(hex)) {
                "Invalid hex color format: $hex. Use #RRGGBB or #AARRGGBB."
            }
        }

        override val crop = false
    }

    companion object {
        private val hexPattern = Regex("^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{8})$")

        /**
         * Converts a string to a [NetworkRequestImageHolder]
         *
         * @param headers The headers to be sent with the request
         * @param crop Whether to crop the image
         */
        fun String.toImageHolder(
            headers: Map<String, String> = mapOf(),
            crop: Boolean = false
        ) = NetworkRequestImageHolder(this.toGetRequest(headers), crop)

        /**
         * Converts a string to a [ResourceUriImageHolder]
         *
         * @param crop Whether to crop the image
         */
        fun String.toResourceUriImageHolder(crop: Boolean = false) = ResourceUriImageHolder(this, crop)

        /**
         * Converts an integer to a [ResourceIdImageHolder]
         *
         * @param crop Whether to crop the image
         */
        fun Int.toResourceImageHolder(crop: Boolean = false) = ResourceIdImageHolder(this, crop)

        /**
         * Converts a hex color code to a [HexColorImageHolder]
         *
         * @param crop Whether to crop the image
         */
        fun String.toHexColorImageHolder() = HexColorImageHolder(this)
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\ImportType.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

/**
 * Enum class to define the type of import,
 * - [BuiltIn]: Imported from the built-in Repo
 * - [App]: Imported from the installed packages
 * - [File]: Imported from the internal storage
 */
enum class ImportType {
    BuiltIn, App, File,
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\Lyrics.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.clients.LyricsClient
import kotlinx.serialization.Serializable

/**
 * Represents lyrics of a song, can be loaded later in [LyricsClient.loadLyrics].
 *
 * @property id the unique identifier of the lyrics.
 * @property title the title of the lyrics.
 * @property subtitle the subtitle of the lyrics.
 * @property lyrics the lyrics of the song.
 * @property extras additional information about the lyrics.
 *
 * @see Lyric
 */
@Serializable
data class Lyrics(
    val id: String,
    val title: String,
    val subtitle: String? = null,
    val lyrics: Lyric? = null,
    val extras: Map<String, String> = emptyMap()
) {

    /**
     * Represents a lyric of a song.
     *
     * This can be a [Simple] lyric or a [Timed] lyric.
     *
     * @see Simple
     * @see Timed
     */
    @Serializable
    sealed class Lyric

    /**
     * Represents a simple lyric of a song.
     *
     * @property text the text of the lyric.
     */
    @Serializable
    data class Simple(val text: String) : Lyric()

    /**
     * Represents a timed lyric of a song.
     *
     * @property list the list of timed lyric items.
     * @property fillTimeGaps whether to fill the time gaps between the items.
     *
     * @see Item
     */
    @Serializable
    data class Timed(
        val list: List<Item>,
        val fillTimeGaps: Boolean = true
    ) : Lyric()

    /**
     * Represents a word-by-word lyric of a song.
     *
     * @property list the list of lists of timed lyric items, where each inner list represents a word.
     * @property fillTimeGaps whether to fill the time gaps between the items.
     *
     * @see Item
     */
    @Serializable
    data class WordByWord(
        val list: List<List<Item>>,
        val fillTimeGaps: Boolean = true
    ) : Lyric()

    /**
     * Represents a timed lyric item.
     *
     * @property text the text of the lyric.
     * @property startTime the start time of the lyric.
     * @property endTime the end time of the lyric.
     */
    @Serializable
    data class Item(
        val text: String,
        val startTime: Long,
        val endTime: Long
    )
}


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\Message.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.providers.MessageFlowProvider

/**
 * A message to be sent to the app.
 *
 * @see MessageFlowProvider
 * @param message The message to be sent.
 * @param action The action to be performed when the message is clicked.
 */
data class Message(
    val message: String,
    val action: Action? = null
) {
    /**
     * An action to be performed when the message is clicked.
     *
     * @param name The  action button's text.
     * @param handler The handler to be called when the action is clicked.
     */
    data class Action(
        val name: String,
        val handler: (() -> Unit)
    )
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\Metadata.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import kotlinx.serialization.Serializable

/**
 * Metadata for an extension.
 *
 * @property className The class name of the extension
 * @property path The file path of the extension's file
 * @property importType The type of import for the extension
 * @property type The type of extension
 * @property id The id of the extension
 * @property name The name of the extension
 * @property version The version of the extension
 * @property description The description of the extension
 * @property author The author of the extension
 * @property authorUrl The author's site to open
 * @property icon The icon of the extension
 * @property repoUrl The repository URL of the extension
 * @property updateUrl The update URL of the extension
 * @property preservedPackages The packages to preserve, ideally for extensions that use native libraries
 * @property isEnabled Whether the extension is enabled
 */
@Serializable
data class Metadata(
    val className: String,
    val path: String,
    val importType: ImportType,
    val type: ExtensionType,
    val id: String,
    val name: String,
    val version: String,
    val description: String,
    val author: String,
    val authorUrl: String? = null,
    val icon: ImageHolder? = null,
    val repoUrl: String? = null,
    val updateUrl: String? = null,
    val preservedPackages: List<String> = listOf(),
    val isEnabled: Boolean = true
)

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\NetworkConnection.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.models.NetworkConnection.Metered
import dev.brahmkshatriya.echo.common.models.NetworkConnection.NotConnected
import dev.brahmkshatriya.echo.common.models.NetworkConnection.Unmetered


/**
 * Enum class to define the type of network,
 * - [NotConnected]: No network connection
 * - [Metered]: Connected to a metered network (e.g., mobile data)
 * - [Unmetered]: Connected to an unmetered network (e.g., Wi-Fi)
 */
enum class NetworkConnection {
    NotConnected, Metered, Unmetered
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\NetworkRequest.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.models.NetworkRequest.Companion.toGetRequest
import dev.brahmkshatriya.echo.common.models.NetworkRequest.Method.CONNECT
import dev.brahmkshatriya.echo.common.models.NetworkRequest.Method.DELETE
import dev.brahmkshatriya.echo.common.models.NetworkRequest.Method.GET
import dev.brahmkshatriya.echo.common.models.NetworkRequest.Method.HEAD
import dev.brahmkshatriya.echo.common.models.NetworkRequest.Method.OPTIONS
import dev.brahmkshatriya.echo.common.models.NetworkRequest.Method.PATCH
import dev.brahmkshatriya.echo.common.models.NetworkRequest.Method.POST
import dev.brahmkshatriya.echo.common.models.NetworkRequest.Method.PUT
import dev.brahmkshatriya.echo.common.models.NetworkRequest.Method.TRACE
import kotlinx.serialization.Serializable
import kotlin.io.encoding.Base64
import kotlin.io.encoding.ExperimentalEncodingApi

/**
 * A data class to represent a network request.
 *
 * @param url The URL to make the request to
 * @param headers The headers to be sent with the request
 * @param method The HTTP method to use for the request, defaults to [Method.GET]
 * @param bodyBase64 The body of the request encoded in Base64, can be null
 *
 * @see [toGetRequest]
 */
@OptIn(ExperimentalEncodingApi::class)
@Serializable
data class NetworkRequest(
    val url: String,
    val headers: Map<String, String> = emptyMap(),
    val method: Method = GET,
    val bodyBase64: String? = null,
) {

    /**
     * Represents the HTTP methods that can be used in a network request.
     * - [GET] for retrieving data
     * - [POST] for sending data
     * - [PUT] for updating data
     * - [DELETE] for deleting data
     * - [PATCH] for partially updating data
     * - [HEAD] for retrieving the headers of a resource without the body
     * - [OPTIONS] for requesting information about the communication options available
     * - [TRACE] for tracing the path to the resource
     * - [CONNECT] for establishing a tunnel to the server
     */
    enum class Method {
        GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS, TRACE, CONNECT
    }

    /**
     * The body of the request decoded from Base64.
     * If [bodyBase64] is null, this will also be null.
     *
     * @return The decoded body as a [ByteArray] or null if [bodyBase64] is null.
     */
    val body by lazy {
        bodyBase64?.let { Base64.decode(it) }
    }

    /**
     * A map of headers with all keys converted to lowercase.
     * This is useful for case-insensitive header lookups.
     */
    val lowerCaseHeaders by lazy {
        headers.mapKeys { it.key.lowercase() }
    }

    constructor(
        method: Method,
        url: String,
        headers: Map<String, String> = emptyMap(),
        body: ByteArray? = null,
    ) : this(
        url = url,
        headers = headers,
        method = method,
        bodyBase64 = body?.let { Base64.encode(it) }
    )

    companion object {

        /**
         * Converts the string to a [NetworkRequest] object
         *
         * @param headers The headers to be sent with the request
         *
         * @return A [NetworkRequest] object
         */
        fun String.toGetRequest(headers: Map<String, String> = emptyMap()): NetworkRequest {
            return NetworkRequest(this, headers)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\Playlist.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.clients.FollowClient
import dev.brahmkshatriya.echo.common.clients.HideClient
import dev.brahmkshatriya.echo.common.clients.LikeClient
import dev.brahmkshatriya.echo.common.clients.PlaylistClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditClient
import dev.brahmkshatriya.echo.common.clients.PlaylistEditPrivacyClient
import dev.brahmkshatriya.echo.common.clients.RadioClient
import dev.brahmkshatriya.echo.common.clients.SaveClient
import dev.brahmkshatriya.echo.common.clients.ShareClient
import kotlinx.serialization.Serializable

/**
 * A data class representing a playlist
 *
 * @property id The id of the playlist
 * @property title The title of the playlist
 * @property isEditable Whether the playlist is editable. Checkout [PlaylistEditClient]
 * @property isPrivate Whether the playlist is private. Checkout [PlaylistEditPrivacyClient]
 * @property cover The cover image of the playlist
 * @property authors The authors of the playlist
 * @property trackCount The total number of tracks in the playlist
 * @property duration The total duration of the playlist in milliseconds
 * @property creationDate The creation date of the playlist
 * @property description The description of the playlist
 * @property background The background image of the playlist
 * @property subtitle The subtitle of the playlist, used to display information under the title
 * @property extras Any extra data you want to associate with the playlist
 * @property isRadioSupported Whether the playlist can be used to create a radio. Checkout [RadioClient]
 * @property isFollowable Whether the playlist can be followed. Checkout [FollowClient]
 * @property isSaveable Whether the playlist can be saved to library. Checkout [SaveClient]
 * @property isLikeable Whether the playlist can be liked. Checkout [LikeClient]
 * @property isHideable Whether the playlist can be hidden. Checkout [HideClient]
 * @property isShareable Whether the playlist can be shared. Checkout [ShareClient]
 *
 * @see PlaylistClient
 */
@Serializable
data class Playlist(
    override val id: String,
    override val title: String,
    val isEditable: Boolean,
    override val isPrivate: Boolean = true,
    override val cover: ImageHolder? = null,
    val authors: List<Artist> = listOf(),
    override val trackCount: Long? = null,
    override val duration: Long? = null,
    val creationDate: Date? = null,
    override val description: String? = null,
    override val background: ImageHolder? = cover,
    override val subtitle: String? = null,
    override val extras: Map<String, String> = mapOf(),
    override val isRadioSupported: Boolean = true,
    override val isFollowable: Boolean = false,
    override val isSaveable: Boolean = true,
    override val isLikeable: Boolean = false,
    override val isHideable: Boolean = false,
    override val isShareable: Boolean = true,
) : EchoMediaItem.Lists {
    override val artists = authors
    override val date = creationDate
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\Progress.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import kotlinx.serialization.Serializable

/**
 * Progress data class to hold the progress of the download.
 *
 * @param size The total size of the file, 0 if unknown.
 * @param progress The progress of the download.
 * @param speed The speed of the download in bytes per second, 0 if unknown.
 */
@Serializable
data class Progress(
    val size: Long = 0,
    val progress: Long = 0,
    val speed: Long = 0,
)

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\QuickSearchItem.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import kotlinx.serialization.ExperimentalSerializationApi
import kotlinx.serialization.Serializable
import kotlinx.serialization.json.JsonClassDiscriminator

/**
 * Represents a quick search item.
 * This can be a [Query] or a [Media] item.
 *
 * @property searched whether the item was already searched by the user.
 */
@OptIn(ExperimentalSerializationApi::class)
@JsonClassDiscriminator("quickSearchItemType")
@Serializable
sealed class QuickSearchItem {
    abstract val searched: Boolean

    /**
     * Represents a search query.
     *
     * @property query the search query.
     * @property extras additional information about the search query.
     */
    @Serializable
    data class Query(
        val query: String,
        override val searched: Boolean,
        val extras: Map<String, String> = mapOf()
    ) : QuickSearchItem()

    /**
     * Represents a media item.
     *
     * @property media the media item.
     *
     * @see EchoMediaItem
     */
    @Serializable
    data class Media(
        val media: EchoMediaItem,
        override val searched: Boolean
    ) : QuickSearchItem()

    open val title: String
        get() = when (this) {
            is Query -> query
            is Media -> media.title
        }

    fun sameAs(other: QuickSearchItem): Boolean {
        return when (this) {
            is Query -> other is Query && query == other.query
            is Media -> other is Media && media.sameAs(other.media)
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\Radio.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.clients.FollowClient
import dev.brahmkshatriya.echo.common.clients.HideClient
import dev.brahmkshatriya.echo.common.clients.LikeClient
import dev.brahmkshatriya.echo.common.clients.SaveClient
import dev.brahmkshatriya.echo.common.clients.ShareClient
import kotlinx.serialization.Serializable

/**
 * A data class representing a radio, that can load tracks and be directly played when clicked.
 *
 * @property id The id of the radio
 * @property title The title of the radio
 * @property cover The cover image of the radio
 * @property authors The authors of the radio
 * @property trackCount The number of tracks in the radio, if applicable
 * @property subtitle The subtitle of the radio, used to display information under the title
 * @property extras Any extra data you want to associate with the radio
 * @property isFollowable Whether the radio can be followed. Checkout [FollowClient]
 * @property isSaveable Whether the radio can be saved to library. Checkout [SaveClient]
 * @property isLikeable Whether the radio can be liked. Checkout [LikeClient]
 * @property isHideable Whether the radio can be hidden. Checkout [HideClient]
 * @property isShareable Whether the radio can be shared. Checkout [ShareClient]
 */
@Serializable
data class Radio(
    override val id: String,
    override val title: String,
    override val cover: ImageHolder? = null,
    val authors: List<Artist> = listOf(),
    override val trackCount: Long? = null,
    override val description: String? = null,
    override val subtitle: String? = null,
    override val extras: Map<String, String> = mapOf(),
    override val isFollowable: Boolean = false,
    override val isSaveable: Boolean = false,
    override val isLikeable: Boolean = false,
    override val isHideable: Boolean = false,
    override val isShareable: Boolean = true,
) : EchoMediaItem.Lists {
    override val isRadioSupported = false
    override val artists = authors
    override val background: ImageHolder? = null
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\Shelf.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.helpers.PagedData
import kotlinx.serialization.ExperimentalSerializationApi
import kotlinx.serialization.Serializable
import kotlinx.serialization.Transient
import kotlinx.serialization.json.JsonClassDiscriminator

/**
 * Represents a shelf (group of Media Items or Categories) in the app feed.
 *
 * This can be [Lists] shelf, an [Item] shelf or a [Category] shelf.
 *
 * @see Lists
 * @see Item
 * @see Category
 */
@OptIn(ExperimentalSerializationApi::class)
@JsonClassDiscriminator("shelfType")
@Serializable
sealed interface Shelf {
    val id: String
    val title: String
    val extras: Map<String, String>

    /**
     * Represents a list of media items or categories.
     * If [more] is not null, a "More" button will be displayed
     * and clicking on it will load a separate page for loading the [PagedData].
     *
     * Can be a list of [Items], [Tracks] or [Categories].
     *
     * @property title the title of the list.
     * @property list the list of media items or categories.
     * @property subtitle the subtitle of the list.
     * @property type the type of the list.
     * @property more the more data of the list.
     *
     * @see Items
     * @see Tracks
     * @see Categories
     */
    @OptIn(ExperimentalSerializationApi::class)
    @JsonClassDiscriminator("shelfType")
    @Serializable
    sealed interface Lists<T : Any> : Shelf {
        val list: List<T>
        val subtitle: String?
        val type: Type
        val more: Feed<Shelf>?

        /**
         * Represents the type of the list.
         *
         * - [Type.Linear] items displayed in a horizontally.
         * - [Type.Grid] items displayed in a grid layout, vertically. limited to 8 items.
         */
        enum class Type {
            Linear, Grid
        }

        /**
         * Represents a list of [EchoMediaItem].
         *
         * @property id the unique identifier of the list.
         * @property title the title of the list.
         * @property list the list of media items.
         * @property subtitle the subtitle of the list.
         * @property type the type of the list.
         * @property more the more data of the list.
         */
        @Serializable
        data class Items(
            override val id: String,
            override val title: String,
            override val list: List<EchoMediaItem>,
            override val subtitle: String? = null,
            override val type: Type = Type.Linear,
            @Transient override val more: Feed<Shelf>? = null,
            override val extras: Map<String, String> = mapOf()
        ) : Lists<EchoMediaItem>

        /**
         * Represents a list of [Track], these will be numbered, otherwise use [Items] instead.
         *
         * @property id the unique identifier of the list.
         * @property title the title of the list.
         * @property list the list of tracks.
         * @property subtitle the subtitle of the list.
         * @property type the type of the list.
         * @property more the more data of the list.
         */
        @Serializable
        data class Tracks(
            override val id: String,
            override val title: String,
            override val list: List<Track>,
            override val subtitle: String? = null,
            override val type: Type = Type.Linear,
            @Transient override val more: Feed<Shelf>? = null,
            override val extras: Map<String, String> = mapOf()
        ) : Lists<Track>

        /**
         * Represents a list of [Category].
         *
         * @property id the unique identifier of the list.
         * @property title the title of the list.
         * @property list the list of categories.
         * @property subtitle the subtitle of the list.
         * @property type the type of the list.
         * @property more the more data of the list.
         */
        @Serializable
        data class Categories(
            override val id: String,
            override val title: String,
            override val list: List<Category>,
            override val subtitle: String? = null,
            override val type: Type = Type.Linear,
            @Transient override val more: Feed<Shelf>? = null,
            override val extras: Map<String, String> = mapOf()
        ) : Lists<Category>
    }

    /**
     * Represents a media item.
     *
     * @property media the media item.
     */
    @Serializable
    data class Item(
        val media: EchoMediaItem
    ) : Shelf {
        override val id = media.id
        override val title = media.title
        override val extras = media.extras
    }

    /**
     * Represents a category of media items.
     *
     * If [feed] is not null, clicking on this will load a separate page for loading the [Feed].
     * If [feed] is null, the category will act as a header.
     *
     * @property id the unique identifier of the category.
     * @property title the title of the category.
     * @property feed the items of the category.
     * @property subtitle the subtitle of the category.
     * @property image the image of the category.
     * @property backgroundColor the background color in hex. (#RRGGBB & #AARRGGBB)
     * @property extras additional information about the category.
     */
    @Serializable
    data class Category(
        override val id: String,
        override val title: String,
        @Transient val feed: Feed<Shelf>? = null,
        val subtitle: String? = null,
        val image: ImageHolder? = null,
        val backgroundColor: String? = null,
        override val extras: Map<String, String> = mapOf(),
    ) : Shelf
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\Streamable.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.clients.TrackClient
import dev.brahmkshatriya.echo.common.models.NetworkRequest.Companion.toGetRequest
import dev.brahmkshatriya.echo.common.models.Streamable.Media.Companion.toBackgroundMedia
import dev.brahmkshatriya.echo.common.models.Streamable.Media.Companion.toMedia
import dev.brahmkshatriya.echo.common.models.Streamable.Media.Companion.toServerMedia
import dev.brahmkshatriya.echo.common.models.Streamable.Media.Companion.toSubtitleMedia
import dev.brahmkshatriya.echo.common.models.Streamable.Source.Companion.toSource
import kotlinx.serialization.ExperimentalSerializationApi
import kotlinx.serialization.Serializable
import kotlinx.serialization.Transient
import kotlinx.serialization.json.JsonClassDiscriminator
import java.io.InputStream

/**
 * A data class representing an unloaded streamable item that is used when playing a [Track]
 * The streamable item can be of three types:
 * - [Streamable.server] - To represent a server that contains data to be played
 * - [Streamable.background] - To represent a background video
 * - [Streamable.subtitle] - To represent subtitle
 *
 * See [TrackClient.loadStreamableMedia] for loading this streamable item.
 *
 * @property id The id of the streamable item
 * @property quality The quality of the streamable item, this is used to sort the streamable items
 * @property type The type of the streamable item
 * @property title The title of the streamable item
 * @property extras Any extra data you want to associate with the streamable item
 *
 * @see Streamable.Media
 */
@Suppress("unused")
@Serializable
data class Streamable(
    val id: String,
    val quality: Int,
    val type: MediaType,
    val title: String? = null,
    val extras: Map<String, String> = mapOf()
) {

    /**
     * A class that represents a loaded streamable media.
     *
     * There are three types of media:
     * - [Subtitle] - To represent a loaded subtitle media
     * - [Server] - To represent a loaded server media
     * - [Background] - To represent a loaded background media
     *
     * @see toMedia
     * @see toSubtitleMedia
     * @see toServerMedia
     * @see toBackgroundMedia
     */
    @OptIn(ExperimentalSerializationApi::class)
    @JsonClassDiscriminator("mediaType")
    @Serializable
    sealed class Media {

        /**
         * A data class representing a loaded subtitle for a [Track].
         *
         * Headers are unfortunately not supported for subtitles.
         *
         * @property url The url of the subtitle
         * @property type The type of the subtitle
         *
         * @see SubtitleType
         * @see toSubtitleMedia
         */
        @Serializable
        data class Subtitle(val url: String, val type: SubtitleType) : Media()

        /**
         * A data class representing a loaded server media for a [Track].
         *
         * The sources will all load at the same time if [merged] is true and combined into a
         * single media source like a M3U8 with multiple qualities.
         *
         * If [merged] is false, the sources will be loaded separately and
         * the user can switch between them.
         *
         * @property sources The list of sources for the server media
         * @property merged Whether the server media is merged or not
         *
         * @see Source
         * @see Source.toMedia
         * @see toServerMedia
         */
        @Serializable
        data class Server(val sources: List<Source>, val merged: Boolean) : Media()

        /**
         * A data class representing a loaded background video for a [Track].
         * The sound of the background video will be removed.
         *
         * @property request The request for the background media
         *
         * @see NetworkRequest
         * @see toBackgroundMedia
         */
        @Serializable
        data class Background(val request: NetworkRequest) : Media()
        companion object {
            /**
             * Creates a [Server] media from this [Source].
             */
            fun Source.toMedia() = Server(listOf(this), false)

            /**
             * Creates a [Background] media from this String Url.
             *
             * @param headers The headers to be used for the request
             * @return A [Background] media from the String Url
             */
            fun String.toBackgroundMedia(headers: Map<String, String> = mapOf()) =
                Background(this.toGetRequest(headers))

            /**
             * Creates a single [Source] server media from this String Url.
             *
             * @param headers The headers to be used for the request
             * @param type The type of the source
             * @return A single [Source.Http] media with the given [type]
             */
            fun String.toServerMedia(
                headers: Map<String, String> = mapOf(),
                type: SourceType = SourceType.Progressive,
                isVideo: Boolean = false
            ) = this.toSource(headers, type, isVideo).toMedia()

            /**
             * Creates a [Subtitle] media from this String Url.
             *
             * @param type The type of the subtitle
             * @return A [Subtitle] media from the String Url
             */
            fun String.toSubtitleMedia(type: SubtitleType) = Subtitle(this, type)
        }
    }

    /**
     * A class representing Media Decryption for a [Source].
     *
     * There is only one type of decryption:
     * - [Widevine] - To represent a Widevine decryption
     */
    @OptIn(ExperimentalSerializationApi::class)
    @JsonClassDiscriminator("decryptionType")
    @Serializable
    sealed class Decryption {

        /**
         * A data class representing a Widevine decryption for a [Source].
         *
         * @property license The license request for the Widevine decryption
         * @property isMultiSession Whether the Widevine decryption is multi-session or not
         *
         * @see NetworkRequest
         */
        @Serializable
        data class Widevine(
            val license: NetworkRequest,
            val isMultiSession: Boolean,
        ) : Decryption()
    }

    /**
     * A class representing the actual source where streamable audio/video is present.
     *
     * There are three types of sources:
     * - [Http] - To represent a source that contains Audio/Video on a Http Url.
     * - [Raw] - To represent a source that contains Audio/Video in a Byte Stream.
     *
     * @property quality The quality of the source, this is used to sort the sources
     * @property title The title of the source
     *
     * @see SourceType
     * @see toSource
     * @see Media.toServerMedia
     */
    @OptIn(ExperimentalSerializationApi::class)
    @JsonClassDiscriminator("sourceType")
    @Serializable
    sealed class Source {
        abstract val id: String
        abstract val quality: Int
        abstract val title: String?
        abstract val isVideo: Boolean
        abstract val isLive: Boolean

        /**
         * A data class representing a source that contains Audio/Video on a Http Url.
         *
         * @property request The request for the source
         * @property type The type of the source
         * @property decryption The decryption for the source
         * @param isLive If true, will prevent caching of the source
         *
         * @see NetworkRequest
         * @see Decryption
         */
        @Serializable
        data class Http(
            val request: NetworkRequest,
            val type: SourceType = SourceType.Progressive,
            val decryption: Decryption? = null,
            override val quality: Int = 0,
            override val title: String? = null,
            override val isVideo: Boolean = false,
            override val isLive: Boolean = false
        ) : Source() {
            override val id = request.url
        }

        /**
         * A data class representing a source that contains Audio/Video in a Byte Stream.
         *
         * @property streamProvider A function that provides an [InputStream] from a given position.
         *
         * @see InputProvider
         */
        @Serializable
        data class Raw(
            @Transient val streamProvider: InputProvider? = null,
            override val id: String,
            override val quality: Int = 0,
            override val title: String? = null,
            override val isVideo: Boolean = false,
            override val isLive: Boolean = false
        ) : Source()

        companion object {
            /**
             * Creates a [Http] source from the String Url.
             *
             * @param headers The headers to be used for the request
             * @param type The type of the source
             * @return A [Source] from the String Url
             */
            fun String.toSource(
                headers: Map<String, String> = mapOf(),
                type: SourceType = SourceType.Progressive,
                isVideo: Boolean = false,
                isLive: Boolean = false
            ) = Http(this.toGetRequest(headers), type, isVideo = isVideo, isLive = isLive)

            fun InputProvider.toSource(
                id: String, isVideo: Boolean = false, isLive: Boolean = false
            ) = Raw(this, id, isVideo = isVideo, isLive = isLive)
        }
    }

    /**
     * An interface that provides an [InputStream] from a given position.
     *
     * This is used for [Streamable.Source.Raw] to provide the stream data.
     */
    fun interface InputProvider {

        /**
         * Provides an [InputStream] from a given position.
         *
         * @param position The position to start reading from, 0 if the stream should start from the beginning
         * @param length The total bytes that should be the end of the stream, -1 if unknown. Important for seeking.
         * @return An [InputStream] from the given position and the total bytes that can be read, or -1 if unknown.
         */
        suspend fun provide(position: Long, length: Long): Pair<InputStream, Long>
    }

    companion object {

        /**
         * Creates a [Streamable] with the given [id], [quality], [title], and [extras] for a server media.
         *
         * @param id The id of the streamable item
         * @param quality The quality of the streamable item, this is used to sort the streamable items
         * @param title The title of the streamable item
         * @param extras Any extra data you want to associate with the streamable item
         * @return A [Streamable] with the given [id], [quality], [title], and [extras] for a server media
         */
        fun server(
            id: String, quality: Int, title: String? = null, extras: Map<String, String> = mapOf()
        ) = Streamable(id, quality, MediaType.Server, title, extras)

        /**
         * Creates a [Streamable] with the given [id], [quality], [title], and [extras] for a background media.
         *
         * @param id The id of the streamable item
         * @param quality The quality of the streamable item, this is used to sort the streamable items
         * @param title The title of the streamable item
         * @param extras Any extra data you want to associate with the streamable item
         * @return A [Streamable] with the given [id], [quality], [title], and [extras] for a background media
         */
        fun background(
            id: String, quality: Int, title: String? = null, extras: Map<String, String> = mapOf()
        ) = Streamable(id, quality, MediaType.Background, title, extras)

        /**
         * Creates a [Streamable] with the given [id], [quality], [title], and [extras] for a subtitle media.
         *
         * @param id The id of the streamable item
         * @param title The title of the streamable item
         * @param extras Any extra data you want to associate with the streamable item
         * @return A [Streamable] with the given [id], [title], and [extras] for a subtitle media
         */
        fun subtitle(
            id: String, title: String? = null, extras: Map<String, String> = mapOf()
        ) = Streamable(id, 0, MediaType.Subtitle, title, extras)
    }

    /**
     * An enum class representing the type of media
     */
    enum class MediaType {
        /** Represents an unloaded background streamable */
        Background,

        /** Represents an unloaded server streamable */
        Server,

        /** Represents an unloaded subtitle streamable */
        Subtitle
    }

    /**
     * An enum class representing the type of subtitle
     */
    enum class SubtitleType {
        /** WebVTT subtitle format */
        VTT,

        /** SubRip subtitle format */
        SRT,

        /** Advanced SubStation Alpha subtitle format */
        ASS
    }

    /**
     * An enum representing the type of [Source].
     */
    enum class SourceType {
        /**
         * Source that contain Audio/Video in container format File.
         */
        Progressive,

        /**
         * Source that is a M3U8 File.
         */
        HLS,

        /**
         * Source that is a Dash Manifest File.
         */
        DASH
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\Tab.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.models.Feed.Companion.loadAll
import kotlinx.serialization.Serializable

/**
 * A data class representing a tab
 *
 * @property id The id of the tab
 * @property title The title of the tab
 * @property isSort Whether the tab is a sort tab, if true, it will not ne considered for loading in the [Feed.loadAll] method.
 * @property extras Any extra data you want to associate with the tab
 */
@Serializable
data class Tab(
    val id: String,
    val title: String,
    val isSort: Boolean = false,
    val extras: Map<String, String> = emptyMap(),
)

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\Track.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import dev.brahmkshatriya.echo.common.clients.FollowClient
import dev.brahmkshatriya.echo.common.clients.HideClient
import dev.brahmkshatriya.echo.common.clients.LikeClient
import dev.brahmkshatriya.echo.common.clients.RadioClient
import dev.brahmkshatriya.echo.common.clients.SaveClient
import dev.brahmkshatriya.echo.common.clients.ShareClient
import dev.brahmkshatriya.echo.common.clients.TrackClient
import kotlinx.serialization.Serializable
import java.util.Locale

/**
 * A class representing a track that can be played in Echo.
 *
 * @property id The id of the track
 * @property title The title of the track
 * @property type The type of the track, can be Audio, Video, or HorizontalVideo
 * @property cover The cover of the track
 * @property artists The artists of the track
 * @property album The album of the track
 * @property duration The duration of the track in milliseconds
 * @property playedDuration The duration of the track that has been played, in milliseconds
 * @property plays The number of plays of the track
 * @property releaseDate The release date of the track
 * @property description The description of the track
 * @property background The background image of the track
 * @property isrc The IRSC code of the track
 * @property genres The genres of the track
 * @property albumDiscNumber The disc number of the track in the album
 * @property albumOrderNumber The order number of the track in the album, if [albumDiscNumber] is not null, this is the order number in that disc
 * @property playlistAddedDate The date when the track was added to a playlist
 * @property isExplicit Whether the track is explicit
 * @property subtitle The subtitle of the track, used to display information under the title
 * @property extras Any extra data you want to associate with the track
 * @property isPlayable Whether the track is playable.
 * @property streamables The streamables of the track
 * @property isRadioSupported Whether the track can used to create a radio. Checkout [RadioClient]
 * @property isFollowable Whether the track can be followed. Checkout [FollowClient]
 * @property isSaveable Whether the track can be saved to library. Checkout [SaveClient]
 * @property isLikeable Whether the track can be liked. Checkout [LikeClient]
 * @property isHideable Whether the track can be hidden. Checkout [HideClient]
 * @property isShareable Whether the track can be shared. Checkout [ShareClient]
 *
 * @see Streamable
 * @see TrackClient
 */
@Serializable
data class Track(
    override val id: String,
    override val title: String,
    val type: Type = Type.Song,
    override val cover: ImageHolder? = null,
    val artists: List<Artist> = listOf(),
    val album: Album? = null,
    val duration: Long? = null,
    val playedDuration: Long? = null,
    val plays: Long? = null,
    val releaseDate: Date? = null,
    override val description: String? = null,
    override val background: ImageHolder? = cover,
    val genres: List<String> = listOf(),
    val isrc: String? = null,
    val albumOrderNumber: Long? = null,
    val albumDiscNumber: Long? = null,
    val playlistAddedDate: Date? = null,
    override val isExplicit: Boolean = false,
    override val subtitle: String? = null,
    override val extras: Map<String, String> = mapOf(),
    val isPlayable: Playable = Playable.Yes,
    val streamables: List<Streamable> = listOf(),
    override val isRadioSupported: Boolean = true,
    override val isFollowable: Boolean = false,
    override val isSaveable: Boolean = true,
    override val isLikeable: Boolean = true,
    override val isHideable: Boolean = true,
    override val isShareable: Boolean = true,
) : EchoMediaItem {

    enum class Type {
        Song, Podcast, VideoSong, Video, HorizontalVideo
    }

    @Serializable
    sealed interface Playable {
        @Serializable
        data object Yes : Playable

        @Serializable
        data object RegionLocked : Playable

        @Serializable
        data object Unreleased : Playable

        @Serializable
        data class No(val reason: String) : Playable
    }

    /**
     * The streamable subtitles of the track.
     * @see Streamable.subtitle
     * @see Streamable.Media.Subtitle
     */
    val subtitles: List<Streamable> by lazy {
        streamables.filter { it.type == Streamable.MediaType.Subtitle }
    }

    /**
     * The streamable servers of the track.
     * @see Streamable.server
     * @see Streamable.Media.Server
     */
    val servers: List<Streamable> by lazy {
        streamables.filter { it.type == Streamable.MediaType.Server }
    }

    /**
     * The streamable backgrounds of the track.
     * @see Streamable.background
     * @see Streamable.Media.Background
     */
    val backgrounds: List<Streamable> by lazy {
        streamables.filter { it.type == Streamable.MediaType.Background }
    }

    override val subtitleWithOutE = subtitle ?: buildString {
        if (duration != null) append(duration.toDurationString())
        val artists = artists.joinToString(", ") { it.name }
        if (artists.isNotBlank()) {
            if (duration != null) append(" • ")
            append(artists)
        }
    }.trim().ifBlank { null }

    override val subtitleWithE = buildString {
        if (isExplicit) append("\uD83C\uDD74 ")
        append(subtitleWithOutE ?: "")
    }.trim().ifBlank { null }

    companion object {
        fun Long.toDurationString(): String {
            val seconds = this / 1000
            val minutes = seconds / 60
            val hours = minutes / 60
            return buildString {
                if (hours > 0) append(String.format(Locale.getDefault(), "%02d:", hours))
                append(String.format(Locale.getDefault(), "%02d:%02d", minutes % 60, seconds % 60))
            }.trim()
        }
    }
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\TrackDetails.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import kotlinx.serialization.Serializable

/**
 * A data class that holds the details of a track that is in the player.
 *
 * @param extensionId the extension id of the extension that the track is from.
 * @param context the context of the track.
 * @param track the track itself.
 * @param currentPosition the current position of the track in milliseconds.
 * @param totalDuration the total duration of the track in milliseconds, or null if unknown.
 *
 * @see EchoMediaItem
 * @see Track
 */
@Serializable
data class TrackDetails(
    val extensionId: String,
    val track: Track,
    val context: EchoMediaItem?,
    val currentPosition: Long,
    val totalDuration: Long?,
)

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\models\User.kt
================================================================================

package dev.brahmkshatriya.echo.common.models

import kotlinx.serialization.Serializable

/**
 * A data class representing a user
 * 
 * @property id The id of the user
 * @property name The name of the user
 * @property cover The cover image of the user
 * @property subtitle The subtitle of the user, used to display information under the name
 * @property extras Any extra data you want to associate with the user
 */
@Serializable
data class User(
    val id: String,
    val name: String,
    val cover: ImageHolder? = null,
    val subtitle: String? = null,
    val extras: Map<String, String> = emptyMap(),
)

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\providers\GlobalSettingsProvider.kt
================================================================================

package dev.brahmkshatriya.echo.common.providers

import dev.brahmkshatriya.echo.common.settings.Settings

/**
 * Interface to provide global [Settings] to the extension
 */
interface GlobalSettingsProvider {
    /**
     * Called when the extension is initialized, to provide the global [Settings] to the extension
     */
    fun setGlobalSettings(globalSettings: Settings)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\providers\LyricsExtensionsProvider.kt
================================================================================

package dev.brahmkshatriya.echo.common.providers

import dev.brahmkshatriya.echo.common.LyricsExtension

/**
 * Interface to provide installed [LyricsExtension]s to this extension
 */
interface LyricsExtensionsProvider {
    /**
     * List of required [LyricsExtension]s. If empty, all installed extensions will be provided.
     * If not empty, only the extensions with the specified ids will be provided
     */
    val requiredLyricsExtensions: List<String>

    /**
     * Called when the extension is initialized,
     * to provide the [requiredLyricsExtensions] to the extension.
     *
     * Also called when the extension list is updated.
     */
    fun setLyricsExtensions(extensions: List<LyricsExtension>)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\providers\MessageFlowProvider.kt
================================================================================

package dev.brahmkshatriya.echo.common.providers

import dev.brahmkshatriya.echo.common.models.Message
import kotlinx.coroutines.flow.MutableSharedFlow

/**
 * Interface to provide functionality of sending messages to the app, via using a shared flow.
 *
 * @see MutableSharedFlow
 * @see Message
 */
interface MessageFlowProvider {
    /**
     * Injecting the message flow, called once when the extension is initialized.
     *
     * use the following to use the message flow:
     * ```kotlin
     * messageFlow.emit(Message("Hello World!"))
     * // or
     * val action = Action("Click me!") { /* do something */  }
     * messageFlow.emit(Message("Hello World!", action))
     * ```
     *
     * @param messageFlow The shared flow to send messages to the app.
     */
    fun setMessageFlow(messageFlow: MutableSharedFlow<Message>)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\providers\MetadataProvider.kt
================================================================================

package dev.brahmkshatriya.echo.common.providers

import dev.brahmkshatriya.echo.common.models.Metadata

interface MetadataProvider {
    fun setMetadata(metadata: Metadata)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\providers\MiscExtensionsProvider.kt
================================================================================

package dev.brahmkshatriya.echo.common.providers

import dev.brahmkshatriya.echo.common.MiscExtension

/**
 * Interface to provide installed [MiscExtension]s to this extension
 */
interface MiscExtensionsProvider {

    /**
     * List of required [MiscExtension]s. If empty, all installed extensions will be provided.
     * If not empty, only the extensions with the specified ids will be provided
     */
    val requiredMiscExtensions: List<String>

    /**
     * Called when the extension is initialized,
     * to provide the [requiredMiscExtensions] to the extension.
     *
     * Also called when the extension list is updated.
     */
    fun setMiscExtensions(extensions: List<MiscExtension>)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\providers\MusicExtensionsProvider.kt
================================================================================

package dev.brahmkshatriya.echo.common.providers

import dev.brahmkshatriya.echo.common.MusicExtension

/**
 * Interface to provide installed [MusicExtension]s to this extension
 */
interface MusicExtensionsProvider {
    /**
     * List of required [MusicExtension]s. If empty, all installed extensions will be provided.
     * If not empty, only the extensions with the specified ids will be provided
     */
    val requiredMusicExtensions: List<String>

    /**
     * Called when the extension is initialized,
     * to provide the [requiredMusicExtensions] to the extension.
     *
     * Also called when the extension list is updated.
     */
    fun setMusicExtensions(extensions: List<MusicExtension>)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\providers\NetworkConnectionProvider.kt
================================================================================

package dev.brahmkshatriya.echo.common.providers

import dev.brahmkshatriya.echo.common.models.NetworkConnection

/**
 * Interface to provide the current network connection of the app
 */
interface NetworkConnectionProvider {

    /**
     * Called when the network connection changes,
     * to provide the current [NetworkConnection] to the extension
     */
    fun setNetworkConnection(networkConnection: NetworkConnection)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\providers\SettingsProvider.kt
================================================================================

package dev.brahmkshatriya.echo.common.providers

import dev.brahmkshatriya.echo.common.settings.Setting
import dev.brahmkshatriya.echo.common.settings.Settings

/**
 * Interface to provide [Settings] to the extension
 */
interface SettingsProvider {
    /**
     * List of [Setting]s to be displayed in the settings screen
     */
    suspend fun getSettingItems() : List<Setting>

    /**
     * Called when the extension is initialized, to provide the [Settings] to the extension
     */
    fun setSettings(settings: Settings)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\providers\TrackerExtensionsProvider.kt
================================================================================

package dev.brahmkshatriya.echo.common.providers

import dev.brahmkshatriya.echo.common.TrackerExtension

/**
 * Interface to provide installed [TrackerExtension]s to this extension
 */
interface TrackerExtensionsProvider {
    /**
     * List of required [TrackerExtension]s. If empty, all installed extensions will be provided.
     * If not empty, only the extensions with the specified ids will be provided
     */
    val requiredTrackerExtensions: List<String>

    /**
     * Called when the extension is initialized,
     * to provide the [requiredTrackerExtensions] to the extension.
     *
     * Also called when the extension list is updated.
     */
    fun setTrackerExtensions(extensions: List<TrackerExtension>)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\providers\WebViewClientProvider.kt
================================================================================

package dev.brahmkshatriya.echo.common.providers

import dev.brahmkshatriya.echo.common.helpers.WebViewClient

interface WebViewClientProvider {
    fun setWebViewClient(webViewClient: WebViewClient)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\settings\Setting.kt
================================================================================

package dev.brahmkshatriya.echo.common.settings

/**
 * A sealed interface that represents a setting. These are the types of [Setting]s:
 * - [SettingCategory]
 * - [SettingItem]
 * - [SettingSwitch]
 * - [SettingSlider]
 * - [SettingTextInput]
 * - [SettingList]
 * - [SettingMultipleChoice]
 * - [SettingOnClick]
 *
 * @property title The title of the setting.
 * @property key The unique key of the setting.
 */
sealed interface Setting {
    val title: String
    val key: String
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\settings\SettingCategory.kt
================================================================================

package dev.brahmkshatriya.echo.common.settings

/**
 * A category of settings. The UI will group the [items] with the following [title].
 *
 * @param title The title of the category.
 * @param key should be ignored.
 * @param items The [Setting]s to be grouped in the category.
 */
data class SettingCategory(
    override val title: String,
    override val key: String,
    val items: List<Setting>
) : Setting

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\settings\SettingItem.kt
================================================================================

package dev.brahmkshatriya.echo.common.settings

import dev.brahmkshatriya.echo.common.clients.SettingsChangeListenerClient

/**
 * A [Setting] item that can be used to show some data in the UI
 * or as a Button with the help of [SettingsChangeListenerClient].
 *
 * @param title The title of the setting.
 * @param key The unique key of the setting, will be called when the setting is clicked.
 * @param summary The summary of the setting.
 */
data class SettingItem(
    override val title: String,
    override val key: String,
    val summary: String? = null,
) : Setting

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\settings\SettingList.kt
================================================================================

package dev.brahmkshatriya.echo.common.settings

/**
 * A setting that allows the user to select a single string from a list of options.
 * Value can be accessed from [Settings.getString]
 *
 * @param title The title of the setting.
 * @param key The key of the setting.
 * @param summary The summary of the setting.
 * @param entryTitles The titles of the entries.
 * @param entryValues The values of the entries.
 * @param defaultEntryIndex The index of the default entry.
 */
data class SettingList(
    override val title: String,
    override val key: String,
    val summary: String? = null,
    val entryTitles: List<String>,
    val entryValues: List<String>,
    val defaultEntryIndex: Int? = null
) : Setting

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\settings\SettingMultipleChoice.kt
================================================================================

package dev.brahmkshatriya.echo.common.settings

/**
 * A setting that allows the user to select multiple items from a list of options.
 * Values can be accessed from [Settings.getStringSet]
 *
 * @param title The title of the setting.
 * @param key The unique key of the setting.
 * @param summary The summary of the setting.
 * @param entryTitles The titles of the entries.
 * @param entryValues The values of the entries.
 * @param defaultEntryIndices The indices of the default entries.
 */
data class SettingMultipleChoice(
    override val title: String,
    override val key: String,
    val summary: String? = null,
    val entryTitles: List<String>,
    val entryValues: List<String>,
    val defaultEntryIndices: Set<Int>? = null
) : Setting

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\settings\SettingOnClick.kt
================================================================================

package dev.brahmkshatriya.echo.common.settings

import dev.brahmkshatriya.echo.common.providers.SettingsProvider

/**
 * Represents a setting that can be clicked to perform an action.
 * The [SettingsProvider.getSettingItems] will be called again after the action is performed.
 *
 * @property title The title of the setting.
 * @property key The unique key for the setting.
 * @property summary An optional summary for the setting.
 * @property onClick The action to perform when the setting is clicked.
 */
data class SettingOnClick(
    override val title: String,
    override val key: String,
    val summary: String? = null,
    val onClick: suspend () -> Unit,
) : Setting


================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\settings\Settings.kt
================================================================================

package dev.brahmkshatriya.echo.common.settings

/**
 * Interface to provide settings to the extension.
 * This can be used to store data that needs to be persisted. (Recommended to not store sensitive data)
 *
 * Following [Setting] Can be used for following types of data:
 * - String: [SettingTextInput], [SettingList]
 * - String Set: [SettingMultipleChoice]
 * - Integer: [SettingSlider]
 * - Boolean: [SettingSwitch]
 */
interface Settings {
    /**
     * Get the [String] value for the given key. Returns null if the key is not found.
     */
    fun getString(key: String): String?

    /**
     * Store the value for the given key.
     * @param value: The value to store. If null, the key will be removed.
     */
    fun putString(key: String, value: String?)

    /**
     * Get the [Set] of [String]s for the given key. Returns null if the key is not found.
     */
    fun getStringSet(key: String): Set<String>?

    /**
     * Store the value for the given key.
     * @param value: The value to store. If null, the key will be removed.
     */
    fun putStringSet(key: String, value: Set<String>?)

    /**
     * Get the [Int] value for the given key. Returns null if the key is not found.
     */
    fun getInt(key: String): Int?

    /**
     * Store the value for the given key.
     * @param value: The value to store. If null, the key will be removed.
     */
    fun putInt(key: String, value: Int?)

    /**
     * Get the [Boolean] value for the given key. Returns null if the key is not found.
     */
    fun getBoolean(key: String): Boolean?

    /**
     * Store the value for the given key.
     * @param value: The value to store. If null, the key will be removed.
     */
    fun putBoolean(key: String, value: Boolean?)
}

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\settings\SettingSlider.kt
================================================================================

package dev.brahmkshatriya.echo.common.settings

/**
 * A slider that allows the user to select a value from a range.
 * Use [allowOverride] to allow the user to use values outside the range.
 * Value can be accessed from [Settings.getInt]
 *
 * @param title The title of the setting.
 * @param key The key of the setting.
 * @param summary The summary of the setting.
 * @param defaultValue The default value of the setting.
 * @param from The minimum value of the slider.
 * @param to The maximum value of the slider.
 * @param steps The number of steps between the minimum and maximum values, if null, the slider will be continuous.
 * @param allowOverride Whether the user can use values outside the range.
 */
data class SettingSlider (
    override val title: String,
    override val key: String,
    val summary: String? = null,
    val defaultValue: Int? = null,
    val from: Int,
    val to: Int,
    val steps: Int? = null,
    val allowOverride: Boolean = false
) : Setting

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\settings\SettingSwitch.kt
================================================================================

package dev.brahmkshatriya.echo.common.settings

/**
 * A switch that allows the user to toggle a setting on or off.
 * Value can be accessed from [Settings.getBoolean]
 *
 * @param title The title of the setting.
 * @param key The key of the setting.
 * @param summary The summary of the setting.
 * @param defaultValue The default value of the setting.
 */
data class SettingSwitch(
    override val title: String,
    override val key: String,
    val summary: String? = null,
    val defaultValue: Boolean
) : Setting

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\common\src\commonMain\kotlin\dev\brahmkshatriya\echo\common\settings\SettingTextInput.kt
================================================================================

package dev.brahmkshatriya.echo.common.settings

/**
 * A setting that allows the user to input a string.
 * Value can be accessed from [Settings.getString], recommended to use [String.isNullOrBlank].
 *
 * @param title The title of the setting.
 * @param key The key of the setting.
 * @param summary The summary of the setting.
 * @param defaultValue The default value of the setting.
 */
data class SettingTextInput(
    override val title: String,
    override val key: String,
    val summary: String? = null,
    val defaultValue: String? = null
) : Setting

================================================================================
FILE: C:\Users\joaom\Documents\GitHub\music-hub\gradle\wrapper\gradle-wrapper.properties
================================================================================

#Tue Feb 18 16:12:29 IST 2025
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-9.0.0-bin.zip
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists

